/*
 * Your installation or use of this SugarCRM file is subject to the applicable
 * terms available at
 * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.
 * If you do not agree to all of the applicable terms or do not have the
 * authority to bind the entity as an authorized representative, then do not
 * install or use this SugarCRM file.
 *
 * Copyright (C) SugarCRM Inc. All rights reserved.
 */
/*
 * Includes TraceKit
 * https://github.com/getsentry/TraceKit
 * MIT License
 *
 * Copyright 2014 Matt Robenolt and other contributors
 * Released under the BSD license
 * https://github.com/getsentry/raven-js/blob/master/LICENSE
 *
Copyright (c) 2014 Matt Robenolt and other contributors
All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright notice,
  this list of conditions and the following disclaimer.
* Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation and/or other materials
  provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/*------------------------------
https://github.com/caolan/async
MIT License
Copyright (c) 2010 Caolan McMahon
*/

/*------------------------------
http://backbonejs.org/
MIT License
Copyright (c) 2010-2012 Jeremy Ashkenas, DocumentCloud
*/

/*------------------------------
http://underscorejs.org/
MIT License
Copyright (c) 2009-2012 Jeremy Ashkenas, DocumentCloud
*/

/*------------------------------
http://handlebarsjs.com/
MIT License
Copyright (C) 2011 by Yehuda Katz
*/

/*------------------------------
https://github.com/marcuswestin/store.js/

Modifications made by SugarCRM Inc. (c) 2014. These modifications are subject to the same terms as the MIT.
For information on the full license terms or related notices, go to http://www.sugarcrm.com/third-party-software. 

The MIT License (MIT)
Copyright (c) 2010-2013 Marcus Westin
*/

/*------------------------------
Modifications made by SugarCRM Inc. (c) 2014. These modifications are subject to the same terms as the MIT.
For information on the full license terms or related notices, go to http://www.sugarcrm.com/third-party-software. 

http://zeptojs.com
MIT License
Copyright (c) 2010-2012 Thomas Fuchs
*/

/*------------------------------
fastclick
Modifications made by SugarCRM Inc. (c) 2014. These modifications are subject to the same terms as the MIT.
For information on the full license terms or related notices, go to http://www.sugarcrm.com/third-party-software.
 
MIT License
The Financial Times Limited [All Rights Reserved]
*/

/*------------------------------
sugarapi.js
pull-to-refresh.js
(c) SugarCRM Inc.
*/

/*------------------------------
MIT License
Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
*/

/**
 * ScrollFix v0.1
 * http://www.joelambert.co.uk
 *
 * Copyright 2011, Joe Lambert.
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */

/*------------------------------
https://code.google.com/p/jsjpegmeta/
MIT License
Copyright (c) 2009 Ben Leslie
*/

/*------------------------------
https://github.com/stomita/ios-imagefile-megapixel
MIT License
Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>
*/

/*********************************************************************************
Zynga Scroller
https://github.com/zynga/scroller

Copyright (c) 2011 Zynga Inc., http://zynga.com/

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
********************************************************************************/

/*------------------------------
 moment.js
 Copyright (c) 2011-2013 Tim Wood, Iskren Chernev, Moment.js contributors
 MIT License
*/

/* https://github.com/jasny/jquery.smartbanner

Modifications made by SugarCRM Inc. (c) 2014. These modifications are subject to the same terms as the MIT.
For information on the full license terms or related notices, go to http://www.sugarcrm.com/third-party-software. 

Copyright (c) Arnold Daniels <arnold@jasny.net>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is furnished
to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/


/*
##nvd3.js License

Copyright (c) 2011, 2012 [Novus Partners, Inc.][novus]

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

[novus]: https://www.novus.com/



##d3.js License

Copyright (c) 2012, Michael Bostock
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright notice, this
  list of conditions and the following disclaimer.

* Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.

* The name Michael Bostock may not be used to endorse or promote products
  derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL MICHAEL BOSTOCK BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*------------------------------
http://www.idangero.us/swiper
MIT License
Copyright (c) 2014 Vladimir Kharlampidi
*/

/*
 * Your installation or use of this SugarCRM file is subject to the applicable
 * terms available at
 * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.
 * If you do not agree to all of the applicable terms or do not have the
 * authority to bind the entity as an authorized representative, then do not
 * install or use this SugarCRM file.
 *
 * Copyright (C) SugarCRM Inc. All rights reserved.
 */

/*Copyright (c) 2008, ZETETIC LLC
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:
    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
    * Neither the name of the ZETETIC LLC nor the
      names of its contributors may be used to endorse or promote products
      derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY ZETETIC LLC ''AS IS'' AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL ZETETIC LLC BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

(function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{},id:i,loaded:false};e[i].call(r.exports,r,r.exports,n);r.loaded=true;return r.exports}n.m=e;n.c=t;n.p="";return n(0)})([function(e,t,n){e.exports=n(42)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";window.$=n(43);n(44);n(45);n(46);n(47);n(48);n(49);window.d3=n(50);window._=n(51);_.mixin(n(52));n(54);_.getNested=function(e){return function t(){var t=arguments[1];arguments[1]=_.isArray(t)?t:String(t);return e.apply(this,arguments)}}(_.getNested);window.Promise=n(57);window.moment=n(60);window.async=n(164);window.store=n(165);window.JpegMeta=n(166);window.MegaPixImage=n(167);window.JPEGEncoder=n(168);window.FastClick=n(169);window.Scroller=n(170);window.EasyScroller=n(171);window.Raven=n(172);n(173);n(174);n(175);n(176);n(177);if(true){window.ScrollFix=n(178);n(179);n(180)}n(184);window.Handlebars=n(186);window.version_compare=n(187);window.SUGAR=n(188);n(189);n(190);n(191);n(192);n(193);n(194);n(195);n(196);n(197);n(198);n(199);n(200);n(201);n(202);n(203);n(204);n(205);n(206);n(207);n(208);n(209);n(210);n(211);n(212);n(213);n(214);n(215);n(216);n(217);n(218);n(219);n(220);n(221);n(222);n(223);n(224);n(225);n(226);n(227);n(228);n(230);n(231);n(232);n(234);n(235);n(236);n(237);n(238);n(239);n(240);n(241);n(242);n(243);n(244);n(245);n(246);n(273);if(!window.JASMINE_OFFLINE){n.p="js/";n(274);SUGAR.App.augment("config",n(282),false);if(true){n(283)}n(284);n(285);n(286);n(287);n(248);n(250);n(288);n(289);n(290);n(291);n(292);n(293);n(294);n(296);n(260);n(297);n(298);n(299);n(300);n(301);n(302);n(269);n(268);n(271);n(303);n(304);n(305);n(306);n(327);n(328);n(312);n(329);n(330);n(331);n(332);n(333);n(334);n(335);n(336);n(257);n(316);n(326);n(313);n(337);n(338);n(339);n(340);n(341);n(342);n(343);n(344);n(345);n(346);n(347);n(348);n(349);n(350);n(351);n(352);n(353);n(354);n(355);n(315);n(356);n(357);n(358);n(359);n(360);n(363);n(364);n(365);n(366);n(325);n(367);n(368);n(369);n(370);n(371);n(372);n(373);n(374);n(375);n(376);n(307);n(377);n(362);n(378);n(379);n(380);n(381);n(382);n(361);n(383);n(384);n(385);n(387);n(388);n(389);n(390);n(295);n(391);n(392);n(393);n(394);n(395);n(392);n(396);n(397);n(398);n(399);n(400);n(401);n(402);n(403);n(404);n(405);n(406);n(407);n(408);n(409);n(410);n(411);n(412);n(320);n(413);n(414);n(415);n(416);n(417);n(418);n(419);if(true){n(255);n(420);n(270);n(421)}else{require("%app.js%/native/nomad");require("%app.js%/native/local-security");require("%app.js%/native/keychain");require("%app.js%/native/translation");require("%app.js%/native/login-manager")}if(["e2e","debug","qa"].indexOf("store")!==-1){n(422);n(423)}n(424);var i=n(425);window.Handlebars.templates=window.Handlebars.templates||{};var r=["error-emulation"];var a=n(426);i.requireModulesWithinContext(a,function(e){var t=i.adjustTemplateName(e);if(r.indexOf(t)===-1||["e2e","debug","qa"].indexOf("store")!==-1){window.Handlebars.templates[t]=a(e)}});if(false){require("%app%/entries/custom")}if(false){e.hot.accept("%app%/less/bootstrap-mobile.less")}if(false){require("%app.views%/offline/offline-data-generation-view.js");require("%app.js%/utils/performance/logger.js")}}if(false){window.sinon=require("imports?global=>window!%app.lib%/sinon-server.js");require("%cukes%/tests/client/dialog-overriding")}},function(e,t){var n=function(){var e,t,n,i,r=[],a=r.slice,s=r.filter,o=window.document,l={},u={},c={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},d=/^\s*<(\w+|!)[^>]*>/,f=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,h=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,p=/^(?:body|html)$/i,m=/([A-Z])/g,_=["val","css","html","text","data","width","height","offset"],g=["after","prepend","before","append"],v=o.createElement("table"),y=o.createElement("tr"),b={tr:o.createElement("tbody"),tbody:v,thead:v,tfoot:v,td:y,th:y,"*":o.createElement("div")},x=/complete|loaded|interactive/,w=/^[\w-]*$/,L={},S=L.toString,E={},k,T,M=o.createElement("div"),A={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},C=Array.isArray||function(e){return e instanceof Array};E.matches=function(e,t){if(!t||!e||e.nodeType!==1)return false;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,a=!r;if(a)(r=M).appendChild(e);i=~E.qsa(r,t).indexOf(e);a&&M.removeChild(e);return i};function R(e){return e==null?String(e):L[S.call(e)]||"object"}function D(e){return R(e)=="function"}function I(e){return e!=null&&e==e.window}function O(e){return e!=null&&e.nodeType==e.DOCUMENT_NODE}function N(e){return R(e)=="object"}function F(e){return N(e)&&!I(e)&&Object.getPrototypeOf(e)==Object.prototype}function B(e){return typeof e.length=="number"}function P(e){return s.call(e,function(e){return e!=null})}function U(e){return e.length>0?n.fn.concat.apply([],e):e}k=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})};function Y(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}T=function(e){return s.call(e,function(t,n){return e.indexOf(t)==n})};function H(e){return e in u?u[e]:u[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function G(e,t){return typeof t=="number"&&!c[Y(e)]?t+"px":t}function j(e){var t,n;if(!l[e]){t=o.createElement(e);o.body.appendChild(t);n=getComputedStyle(t,"").getPropertyValue("display");t.parentNode.removeChild(t);n=="none"&&(n="block");l[e]=n}return l[e]}function V(e){return"children"in e?a.call(e.children):n.map(e.childNodes,function(e){if(e.nodeType==1)return e})}E.fragment=function(t,i,r){var s,l,u;if(f.test(t))s=n(o.createElement(RegExp.$1));if(!s){if(t.replace)t=t.replace(h,"<$1></$2>");if(i===e)i=d.test(t)&&RegExp.$1;if(!(i in b))i="*";u=b[i];u.innerHTML=""+t;s=n.each(a.call(u.childNodes),function(){u.removeChild(this)})}if(F(r)){l=n(s);n.each(r,function(e,t){if(_.indexOf(e)>-1)l[e](t);else l.attr(e,t)})}return s};E.Z=function(e,t){e=e||[];e.__proto__=n.fn;e.selector=t||"";return e};E.isZ=function(e){return e instanceof E.Z};E.init=function(t,i){var r;if(!t)return E.Z();else if(typeof t=="string"){t=t.trim();if(t[0]=="<"&&d.test(t))r=E.fragment(t,RegExp.$1,i),t=null;else if(i!==e)return n(i).find(t);else r=E.qsa(o,t)}else if(D(t))return n(o).ready(t);else if(E.isZ(t))return t;else{if(C(t))r=P(t);else if(N(t))r=[t],t=null;else if(d.test(t))r=E.fragment(t.trim(),RegExp.$1,i),t=null;else if(i!==e)return n(i).find(t);else r=E.qsa(o,t)}return E.Z(r,t)};n=function(e,t){return E.init(e,t)};function z(n,i,r){for(t in i)if(r&&(F(i[t])||C(i[t]))){if(F(i[t])&&!F(n[t]))n[t]={};if(C(i[t])&&!C(n[t]))n[t]=[];z(n[t],i[t],r)}else if(i[t]!==e)n[t]=i[t]}n.extend=function(e){var t,n=a.call(arguments,1);if(typeof e=="boolean"){t=e;e=n.shift()}n.forEach(function(n){z(e,n,t)});return e};E.qsa=function(e,t){var n,i=t[0]=="#",r=!i&&t[0]==".",s=i||r?t.slice(1):t,o=w.test(s);return O(e)&&o&&i?(n=e.getElementById(s))?[n]:[]:e.nodeType!==1&&e.nodeType!==9?[]:a.call(o&&!i?r?e.getElementsByClassName(s):e.getElementsByTagName(t):e.querySelectorAll(t))};function $(e,t){return t==null?n(e):n(e).filter(t)}n.contains=o.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t&&(t=t.parentNode))if(t===e)return true;return false};function q(e,t,n,i){return D(t)?t.call(e,n,i):t}function W(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function K(t,n){var i=t.className||"",r=i&&i.baseVal!==e;if(n===e)return r?i.baseVal:i;r?i.baseVal=n:t.className=n}function J(e){try{return e?e=="true"||(e=="false"?false:e=="null"?null:+e+""==e?+e:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(t){return e}}n.type=R;n.isFunction=D;n.isWindow=I;n.isArray=C;n.isPlainObject=F;n.isEmptyObject=function(e){var t;for(t in e)return false;return true};n.inArray=function(e,t,n){return r.indexOf.call(t,e,n)};n.camelCase=k;n.trim=function(e){return e==null?"":String.prototype.trim.call(e)};n.uuid=0;n.support={};n.expr={};n.map=function(e,t){var n,i=[],r,a;if(B(e))for(r=0;r<e.length;r++){n=t(e[r],r);if(n!=null)i.push(n)}else for(a in e){n=t(e[a],a);if(n!=null)i.push(n)}return U(i)};n.each=function(e,t){var n,i;if(B(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===false)return e}else{for(i in e)if(t.call(e[i],i,e[i])===false)return e}return e};n.grep=function(e,t){return s.call(e,t)};if(window.JSON)n.parseJSON=JSON.parse;n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){L["[object "+t+"]"]=t.toLowerCase()});n.fn={forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,indexOf:r.indexOf,concat:r.concat,map:function(e){return n(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return n(a.apply(this,arguments))},ready:function(e){if(x.test(o.readyState)&&o.body)e(n);else o.addEventListener("DOMContentLoaded",function(){e(n)},false);return this},get:function(t){return t===e?a.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){if(this.parentNode!=null)this.parentNode.removeChild(this)})},each:function(e){r.every.call(this,function(t,n){return e.call(t,n,t)!==false});return this},filter:function(e){if(D(e))return this.not(this.not(e));return n(s.call(this,function(t){return E.matches(t,e)}))},add:function(e,t){return n(T(this.concat(n(e,t))))},is:function(e){return this.length>0&&E.matches(this[0],e)},not:function(t){var i=[];if(D(t)&&t.call!==e)this.each(function(e){if(!t.call(this,e))i.push(this)});else{var r=typeof t=="string"?this.filter(t):B(t)&&D(t.item)?a.call(t):n(t);this.forEach(function(e){if(r.indexOf(e)<0)i.push(e)})}return n(i)},has:function(e){return this.filter(function(){return N(e)?n.contains(this,e):n(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!N(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!N(e)?e:n(e)},find:function(e){var t,i=this;if(!e)t=n();else if(typeof e=="object")t=n(e).filter(function(){var e=this;return r.some.call(i,function(t){return n.contains(t,e)})});else if(this.length==1)t=n(E.qsa(this[0],e));else t=this.map(function(){return E.qsa(this,e)});return t},closest:function(e,t){var i=this[0],r=false;if(typeof e=="object")r=n(e);while(i&&!(r?r.indexOf(i)>=0:E.matches(i,e)))i=i!==t&&!O(i)&&i.parentNode;return n(i)},parents:function(e){var t=[],i=this;while(i.length>0)i=n.map(i,function(e){if((e=e.parentNode)&&!O(e)&&t.indexOf(e)<0){t.push(e);return e}});return $(t,e)},parent:function(e){return $(T(this.pluck("parentNode")),e)},children:function(e){return $(this.map(function(){return V(this)}),e)},contents:function(){return this.map(function(){return a.call(this.childNodes)})},siblings:function(e){return $(this.map(function(e,t){return s.call(V(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return n.map(this,function(t){return t[e]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display="");if(getComputedStyle(this,"").getPropertyValue("display")=="none")this.style.display=j(this.nodeName)})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=D(e);if(this[0]&&!t)var i=n(e).get(0),r=i.parentNode||this.length>1;return this.each(function(a){n(this).wrapAll(t?e.call(this,a):r?i.cloneNode(true):i)})},wrapAll:function(e){if(this[0]){n(this[0]).before(e=n(e));var t;while((t=e.children()).length)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=D(e);return this.each(function(i){var r=n(this),a=r.contents(),s=t?e.call(this,i):e;a.length?a.wrapAll(s):r.append(s)})},unwrap:function(){this.parent().each(function(){n(this).replaceWith(n(this).children())});return this},clone:function(){return this.map(function(){return this.cloneNode(true)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var i=n(this);(t===e?i.css("display")=="none":t)?i.show():i.hide()})},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var i=this.innerHTML;n(this).empty().append(q(this,e,t,i))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=q(this,e,t,this.textContent);this.textContent=n==null?"":""+n}):0 in this?this[0].textContent:null},attr:function(n,i){var r;return typeof n=="string"&&!(1 in arguments)?!this.length||this[0].nodeType!==1?e:!(r=this[0].getAttribute(n))&&n in this[0]?this[0][n]:r:this.each(function(e){if(this.nodeType!==1)return;if(N(n))for(t in n)W(this,t,n[t]);else W(this,n,q(this,i,e,this.getAttribute(n)))})},removeAttr:function(e){return this.each(function(){this.nodeType===1&&e.split(" ").forEach(function(e){W(this,e)},this)})},prop:function(e,t){e=A[e]||e;return 1 in arguments?this.each(function(n){this[e]=q(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(t,n){var i="data-"+t.replace(m,"-$1").toLowerCase();var r=1 in arguments?this.attr(i,n):this.attr(i);return r!==null?J(r):e},val:function(e){return 0 in arguments?this.each(function(t){this.value=q(this,e,t,this.value)}):this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var i=n(this),r=q(this,e,t,i.offset()),a=i.offsetParent().offset(),s={top:r.top-a.top,left:r.left-a.left};if(i.css("position")=="static")s["position"]="relative";i.css(s)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,i){if(arguments.length<2){var r,a=this[0];if(!a)return;r=getComputedStyle(a,"");if(typeof e=="string")return a.style[k(e)]||r.getPropertyValue(e);else if(C(e)){var s={};n.each(e,function(e,t){s[t]=a.style[k(t)]||r.getPropertyValue(t)});return s}}var o="";if(R(e)=="string"){if(!i&&i!==0)this.each(function(){this.style.removeProperty(Y(e))});else o=Y(e)+":"+G(e,i)}else{for(t in e)if(!e[t]&&e[t]!==0)this.each(function(){this.style.removeProperty(Y(t))});else o+=Y(t)+":"+G(t,e[t])+";"}return this.each(function(){this.style.cssText+=";"+o})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){if(!e)return false;return r.some.call(this,function(e){return this.test(K(e))},H(e))},addClass:function(e){if(!e)return this;return this.each(function(t){if(!("className"in this))return;i=[];var r=K(this),a=q(this,e,t,r);a.split(/\s+/g).forEach(function(e){if(!n(this).hasClass(e))i.push(e)},this);i.length&&K(this,r+(r?" ":"")+i.join(" "))})},removeClass:function(t){return this.each(function(n){if(!("className"in this))return;if(t===e)return K(this,"");i=K(this);q(this,t,n,i).split(/\s+/g).forEach(function(e){i=i.replace(H(e)," ")});K(this,i.trim())})},toggleClass:function(t,i){if(!t)return this;return this.each(function(r){var a=n(this),s=q(this,t,r,K(this));s.split(/\s+/g).forEach(function(t){(i===e?!a.hasClass(t):i)?a.addClass(t):a.removeClass(t)})})},scrollTop:function(t){if(!this.length)return;var n="scrollTop"in this[0];if(t===e)return n?this[0].scrollTop:this[0].pageYOffset;return this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})},scrollLeft:function(t){if(!this.length)return;var n="scrollLeft"in this[0];if(t===e)return n?this[0].scrollLeft:this[0].pageXOffset;return this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})},position:function(){if(!this.length)return;var e=this[0],t=this.offsetParent(),i=this.offset(),r=p.test(t[0].nodeName)?{top:0,left:0}:t.offset();i.top-=parseFloat(n(e).css("margin-top"))||0;i.left-=parseFloat(n(e).css("margin-left"))||0;r.top+=parseFloat(n(t[0]).css("border-top-width"))||0;r.left+=parseFloat(n(t[0]).css("border-left-width"))||0;return{top:i.top-r.top,left:i.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.body;while(e&&!p.test(e.nodeName)&&n(e).css("position")=="static")e=e.offsetParent;return e})}};n.fn.detach=n.fn.remove;["width","height"].forEach(function(t){var i=t.replace(/./,function(e){return e[0].toUpperCase()});n.fn[t]=function(r){var a,s=this[0];if(r===e)return I(s)?s["inner"+i]:O(s)?s.documentElement["scroll"+i]:(a=this.offset())&&a[t];else return this.each(function(e){s=n(this);s.css(t,q(this,r,e,s[t]()))})}});function X(e,t){t(e);for(var n=0,i=e.childNodes.length;n<i;n++)X(e.childNodes[n],t)}g.forEach(function(e,t){var i=t%2;n.fn[e]=function(){var e,r=n.map(arguments,function(t){e=R(t);return e=="object"||e=="array"||t==null?t:E.fragment(t)}),a,s=this.length>1;if(r.length<1)return this;return this.each(function(e,l){a=i?l:l.parentNode;l=t==0?l.nextSibling:t==1?l.firstChild:t==2?l:null;var u=n.contains(o.documentElement,a);r.forEach(function(e){if(s)e=e.cloneNode(true);else if(!a)return n(e).remove();a.insertBefore(e,l);if(u)X(e,function(e){if(e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&!e.src)window["eval"].call(window,e.innerHTML)})})})};n.fn[i?e+"To":"insert"+(t?"Before":"After")]=function(t){n(t)[e](this);return this}});E.Z.prototype=n.fn;E.uniq=T;E.deserializeValue=J;n.zepto=E;return n}();window.Zepto=n;window.$===undefined&&(window.$=n);e.exports=$},function(e,t){(function(e){var t=0,n=window.document,i,r,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:text|application)\/javascript/i,o=/^(?:text|application)\/xml/i,l="application/json",u="text/html",c=/^\s*$/,d=n.createElement("a");d.href=window.location.href;function f(t,n,i){var r=e.Event(n);e(t).trigger(r,i);return!r.isDefaultPrevented()}function h(e,t,i,r){if(e.global)return f(t||n,i,r)}e.active=0;function p(t){if(t.global&&e.active++===0)h(t,null,"ajaxStart")}function m(t){if(t.global&&!--e.active)h(t,null,"ajaxStop")}function _(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===false||h(t,n,"ajaxBeforeSend",[e,t])===false)return false;h(t,n,"ajaxSend",[e,t])}function g(e,t,n,i){var r=n.context,a="success";n.success.call(r,e,a,t);if(i)i.resolveWith(r,[e,a,t]);h(n,r,"ajaxSuccess",[t,n,e]);y(a,t,n)}function v(e,t,n,i,r){var a=i.context;i.error.call(a,n,t,e);if(r)r.rejectWith(a,[n,t,e]);h(i,a,"ajaxError",[n,i,e||t]);y(t,n,i)}function y(e,t,n){var i=n.context;n.complete.call(i,t,e);h(n,i,"ajaxComplete",[t,n]);m(n)}function b(){}e.ajaxJSONP=function(i,r){if(!("type"in i))return e.ajax(i);var a=i.jsonpCallback,s=(e.isFunction(a)?a():a)||"jsonp"+ ++t,o=n.createElement("script"),l=window[s],u,c=function(t){e(o).triggerHandler("error",t||"abort")},d={abort:c},f;if(r)r.promise(d);e(o).on("load error",function(t,n){clearTimeout(f);e(o).off().remove();if(t.type=="error"||!u){v(null,n||"error",d,i,r)}else{g(u[0],d,i,r)}window[s]=l;if(u&&e.isFunction(l))l(u[0]);l=u=undefined});if(_(d,i)===false){c("abort");return d}window[s]=function(){u=arguments};o.src=i.url.replace(/\?(.+)=\?/,"?$1="+s);n.head.appendChild(o);if(i.timeout>0)f=setTimeout(function(){c("timeout")},i.timeout);return d};e.ajaxSettings={type:"GET",beforeSend:b,success:b,error:b,complete:b,context:null,global:true,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:u,text:"text/plain"},crossDomain:false,timeout:0,processData:true,cache:true};function x(e){if(e)e=e.split(";",2)[0];return e&&(e==u?"html":e==l?"json":s.test(e)?"script":o.test(e)&&"xml")||"text"}function w(e,t){if(t=="")return e;return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function L(t){if(t.processData&&t.data&&e.type(t.data)!="string")t.data=e.param(t.data,t.traditional);if(t.data&&(!t.type||t.type.toUpperCase()=="GET"))t.url=w(t.url,t.data),t.data=undefined}e.ajax=function(t){var a=e.extend({},t||{}),s=e.Deferred&&e.Deferred(),o;for(i in e.ajaxSettings)if(a[i]===undefined)a[i]=e.ajaxSettings[i];p(a);if(!a.crossDomain){o=n.createElement("a");o.href=a.url;o.href=o.href;a.crossDomain=d.protocol+"//"+d.host!==o.protocol+"//"+o.host}if(!a.url)a.url=window.location.toString();L(a);var l=a.dataType,u=/\?.+=\?/.test(a.url);if(u)l="jsonp";if(a.cache===false||(!t||t.cache!==true)&&("script"==l||"jsonp"==l))a.url=w(a.url,"_="+Date.now());if("jsonp"==l){if(!u)a.url=w(a.url,a.jsonp?a.jsonp+"=?":a.jsonp===false?"":"callback=?");return e.ajaxJSONP(a,s)}var f=a.accepts[l],h={},m=function(e,t){h[e.toLowerCase()]=[e,t]},y=/^([\w-]+:)\/\//.test(a.url)?RegExp.$1:window.location.protocol,S=a.xhr(),E=S.setRequestHeader,k;if(s)s.promise(S);if(!a.crossDomain)m("X-Requested-With","XMLHttpRequest");m("Accept",f||"*/*");if(f=a.mimeType||f){if(f.indexOf(",")>-1)f=f.split(",",2)[0];S.overrideMimeType&&S.overrideMimeType(f)}if(a.contentType||a.contentType!==false&&a.data&&a.type.toUpperCase()!="GET")m("Content-Type",a.contentType||"application/x-www-form-urlencoded");if(a.headers)for(r in a.headers)m(r,a.headers[r]);S.setRequestHeader=m;S.onreadystatechange=function(){if(S.readyState==4){S.onreadystatechange=b;clearTimeout(k);var t,n=false;if(S.status>=200&&S.status<300||S.status==304||S.status==0&&y=="file:"){l=l||x(a.mimeType||S.getResponseHeader("content-type"));t=S.responseText;try{if(l=="script")(1,eval)(t);else if(l=="xml")t=S.responseXML;else if(l=="json")t=c.test(t)?null:e.parseJSON(t)}catch(i){n=i}if(n)v(n,"parsererror",S,a,s);else g(t,S,a,s)}else{v(S.statusText||null,S.status?"error":"abort",S,a,s)}}};if(_(S,a)===false){S.abort();v(null,"abort",S,a,s);return S}if(a.xhrFields)for(r in a.xhrFields)S[r]=a.xhrFields[r];var T="async"in a?a.async:true;S.open(a.type,a.url,T,a.username,a.password);for(r in h)E.apply(S,h[r]);if(a.timeout>0)k=setTimeout(function(){S.onreadystatechange=b;S.abort();v(null,"timeout",S,a,s)},a.timeout);S.send(a.data?a.data:null);return S};function S(t,n,i,r){if(e.isFunction(n))r=i,i=n,n=undefined;if(!e.isFunction(i))r=i,i=undefined;return{url:t,data:n,success:i,dataType:r}}e.get=function(){return e.ajax(S.apply(null,arguments))};e.post=function(){var t=S.apply(null,arguments);t.type="POST";return e.ajax(t)};e.getJSON=function(){var t=S.apply(null,arguments);t.dataType="json";return e.ajax(t)};e.fn.load=function(t,n,i){if(!this.length)return this;var r=this,s=t.split(/\s/),o,l=S(t,n,i),u=l.success;if(s.length>1)l.url=s[0],o=s[1];l.success=function(t){r.html(o?e("<div>").html(t.replace(a,"")).find(o):t);u&&u.apply(r,arguments)};e.ajax(l);return this};var E=encodeURIComponent;function k(t,n,i,r){var a,s=e.isArray(n),o=e.isPlainObject(n);e.each(n,function(n,l){a=e.type(l);if(r)n=i?r:r+"["+(o||a=="object"||a=="array"?n:"")+"]";if(!r&&s)t.add(l.name,l.value);else if(a=="array"||!i&&a=="object")k(t,l,i,n);else t.add(n,l)})}e.param=function(t,n){var i=[];i.add=function(t,n){if(e.isFunction(n))n=n();if(n==null)n="";this.push(E(t)+"="+E(n))};k(i,t,n);return i.join("&").replace(/%20/g,"+")}})(Zepto)},function(e,t){(function(e){function t(e,t){var n=this.os={},i=this.browser={},r=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),a=e.match(/(Android);?[\s\/]+([\d.]+)?/),s=!!e.match(/\(Macintosh\; Intel /),o=e.match(/(iPad).*OS\s([\d_]+)/),l=e.match(/(iPod)(.*OS\s([\d_]+))?/),u=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),c=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),d=/Win\d{2}|Windows/.test(t),f=e.match(/Windows Phone ([\d.]+)/),h=c&&e.match(/TouchPad/),p=e.match(/Kindle\/([\d.]+)/),m=e.match(/Silk\/([\d._]+)/),_=e.match(/(BlackBerry).*Version\/([\d.]+)/),g=e.match(/(BB10).*Version\/([\d.]+)/),v=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),y=e.match(/PlayBook/),b=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),x=e.match(/Firefox\/([\d.]+)/),w=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),L=!b&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),S=L||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);if(i.webkit=!!r)i.version=r[1];if(a)n.android=true,n.version=a[2];if(u&&!l)n.ios=n.iphone=true,n.version=u[2].replace(/_/g,".");if(o)n.ios=n.ipad=true,n.version=o[2].replace(/_/g,".");if(l)n.ios=n.ipod=true,n.version=l[3]?l[3].replace(/_/g,"."):null;if(f)n.wp=true,n.version=f[1];if(c)n.webos=true,n.version=c[2];if(h)n.touchpad=true;if(_)n.blackberry=true,n.version=_[2];if(g)n.bb10=true,n.version=g[2];if(v)n.rimtabletos=true,n.version=v[2];if(y)i.playbook=true;if(p)n.kindle=true,n.version=p[1];if(m)i.silk=true,i.version=m[1];if(!m&&n.android&&e.match(/Kindle Fire/))i.silk=true;if(b)i.chrome=true,i.version=b[1];if(x)i.firefox=true,i.version=x[1];if(w)i.ie=true,i.version=w[1];if(S&&(s||n.ios||d)){i.safari=true;if(!n.ios)i.version=S[1]}if(L)i.webview=true;n.tablet=!!(o||y||a&&!e.match(/Mobile/)||x&&e.match(/Tablet/)||w&&!e.match(/Phone/)&&e.match(/Touch/));n.phone=!!(!n.tablet&&!n.ipod&&(a||u||c||_||g||b&&e.match(/Android/)||b&&e.match(/CriOS\/([\d.]+)/)||x&&e.match(/Mobile/)||w&&e.match(/Touch/)))}t.call(e,navigator.userAgent,navigator.platform);e.__detect=t})(Zepto)},function(e,t){(function(e){var t=1,n,i=Array.prototype.slice,r=e.isFunction,a=function(e){return typeof e=="string"},s={},o={},l="onfocusin"in window,u={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents";function d(e){return e._zid||(e._zid=t++)}function f(e,t,n,i){t=h(t);if(t.ns)var r=p(t.ns);return(s[d(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!n||d(e.fn)===d(n))&&(!i||e.sel==i)})}function h(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function p(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function m(e,t){return e.del&&(!l&&e.e in u)||!!t}function _(e){return c[e]||l&&u[e]||e}function g(t,i,r,a,o,l,u){var f=d(t),p=s[f]||(s[f]=[]);i.split(/\s/).forEach(function(i){if(i=="ready")return e(document).ready(r);var s=h(i);s.fn=r;s.sel=o;if(s.e in c)r=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return s.fn.apply(this,arguments)};s.del=l;var d=l||r;s.proxy=function(e){e=L(e);if(e.isImmediatePropagationStopped())return;e.data=a;var i=d.apply(t,e._args==n?[e]:[e].concat(e._args));if(i===false)e.preventDefault(),e.stopPropagation();return i};s.i=p.length;p.push(s);if("addEventListener"in t)t.addEventListener(_(s.e),s.proxy,m(s,u))})}function v(e,t,n,i,r){var a=d(e);(t||"").split(/\s/).forEach(function(t){f(e,t,n,i).forEach(function(t){delete s[a][t.i];if("removeEventListener"in e)e.removeEventListener(_(t.e),t.proxy,m(t,r))})})}e.event={add:g,remove:v};e.proxy=function(t,n){var s=2 in arguments&&i.call(arguments,2);if(r(t)){var o=function(){return t.apply(n,s?s.concat(i.call(arguments)):arguments)};o._zid=d(t);return o}else if(a(n)){if(s){s.unshift(t[n],t);return e.proxy.apply(null,s)}else{return e.proxy(t[n],t)}}else{throw new TypeError("expected function")}};e.fn.bind=function(e,t,n){return this.on(e,t,n)};e.fn.unbind=function(e,t){return this.off(e,t)};e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var y=function(){return true},b=function(){return false},x=/^([A-Z]|returnValue$|layer[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function L(t,i){if(i||!t.isDefaultPrevented){i||(i=t);e.each(w,function(e,n){var r=i[e];t[e]=function(){this[n]=y;return r&&r.apply(i,arguments)};t[n]=b});if(i.defaultPrevented!==n?i.defaultPrevented:"returnValue"in i?i.returnValue===false:i.getPreventDefault&&i.getPreventDefault())t.isDefaultPrevented=y}return t}function S(e){var t,i={originalEvent:e};for(t in e)if(!x.test(t)&&e[t]!==n)i[t]=e[t];return L(i,e)}e.fn.delegate=function(e,t,n){return this.on(t,e,n)};e.fn.undelegate=function(e,t,n){return this.off(t,e,n)};e.fn.live=function(t,n){e(document.body).delegate(this.selector,t,n);return this};e.fn.die=function(t,n){e(document.body).undelegate(this.selector,t,n);return this};e.fn.on=function(t,s,o,l,u){var c,d,f=this;if(t&&!a(t)){e.each(t,function(e,t){f.on(e,s,o,t,u)});return f}if(!a(s)&&!r(l)&&l!==false)l=o,o=s,s=n;if(r(o)||o===false)l=o,o=n;if(l===false)l=b;return f.each(function(n,r){if(u)c=function(e){v(r,e.type,l);return l.apply(this,arguments)};if(s)d=function(t){var n,a=e(t.target).closest(s,r).get(0);if(a&&a!==r){n=e.extend(S(t),{currentTarget:a,liveFired:r});return(c||l).apply(a,[n].concat(i.call(arguments,1)))}};g(r,t,l,o,s,d||c)})};e.fn.off=function(t,i,s){var o=this;if(t&&!a(t)){e.each(t,function(e,t){o.off(e,i,t)});return o}if(!a(i)&&!r(s)&&s!==false)s=i,i=n;if(s===false)s=b;return o.each(function(){v(this,t,s,i)})};e.fn.trigger=function(t,n){t=a(t)||e.isPlainObject(t)?e.Event(t):L(t);t._args=n;return this.each(function(){if(t.type in u&&typeof this[t.type]=="function")this[t.type]();else if("dispatchEvent"in this)this.dispatchEvent(t);else e(this).triggerHandler(t,n)})};e.fn.triggerHandler=function(t,n){var i,r;this.each(function(s,o){i=S(a(t)?e.Event(t):t);i._args=n;i.target=o;e.each(f(o,t.type||t),function(e,t){r=t.proxy(i);if(i.isImmediatePropagationStopped())return false})});return r};("focusin focusout focus blur load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select keydown keypress keyup error").split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}});e.Event=function(e,t){if(!a(e))t=e,e=t.type;var n=document.createEvent(o[e]||"Events"),i=true;if(t)for(var r in t)r=="bubbles"?i=!!t[r]:n[r]=t[r];n.initEvent(e,i,true);return L(n)}})(Zepto)},function(e,t){(function(e,t){var n="",i,r,a,s={Webkit:"webkit",Moz:"",O:"o"},o=window.document,l=o.createElement("div"),u=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,c,d,f,h,p,m,_,g,v,y={};function b(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function x(e){return i?i+e:e.toLowerCase()}e.each(s,function(e,r){if(l.style[e+"TransitionProperty"]!==t){n="-"+e.toLowerCase()+"-";i=r;return false}});c=n+"transform";y[d=n+"transition-property"]=y[f=n+"transition-duration"]=y[p=n+"transition-delay"]=y[h=n+"transition-timing-function"]=y[m=n+"animation-name"]=y[_=n+"animation-duration"]=y[v=n+"animation-delay"]=y[g=n+"animation-timing-function"]="";e.fx={off:i===t&&l.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:n,transitionEnd:x("TransitionEnd"),animationEnd:x("AnimationEnd")};e.fn.animate=function(n,i,r,a,s){if(e.isFunction(i))a=i,r=t,i=t;if(e.isFunction(r))a=r,r=t;if(e.isPlainObject(i))r=i.easing,a=i.complete,s=i.delay,i=i.duration;if(i)i=(typeof i=="number"?i:e.fx.speeds[i]||e.fx.speeds._default)/1e3;if(s)s=parseFloat(s)/1e3;return this.anim(n,i,r,a,s)};e.fn.anim=function(n,i,r,a,s){var o,l={},x,w="",L=this,S,E=e.fx.transitionEnd,k=false;if(i===t)i=e.fx.speeds._default/1e3;if(s===t)s=0;if(e.fx.off)i=0;if(typeof n=="string"){l[m]=n;l[_]=i+"s";l[v]=s+"s";l[g]=r||"linear";E=e.fx.animationEnd}else{x=[];for(o in n)if(u.test(o))w+=o+"("+n[o]+") ";else l[o]=n[o],x.push(b(o));if(w)l[c]=w,x.push(c);if(i>0&&typeof n==="object"){l[d]=x.join(", ");l[f]=i+"s";l[p]=s+"s";l[h]=r||"linear"}}S=function(t){if(typeof t!=="undefined"){if(t.target!==t.currentTarget)return;e(t.target).unbind(E,S)}else e(this).unbind(E,S);k=true;e(this).css(y);a&&a.call(this)};if(i>0){this.bind(E,S);setTimeout(function(){if(k)return;S.call(L)},(i+s)*1e3+25)}this.size()&&this.get(0).clientLeft;this.css(l);if(i<=0)setTimeout(function(){L.each(function(){S.call(this)})},0);return this};l=null})(Zepto)},function(e,t){
(function(e,t){var n=window.document,i=n.documentElement,r=e.fn.show,a=e.fn.hide,s=e.fn.toggle;function o(n,i,r,a,s){if(typeof i=="function"&&!s)s=i,i=t;var o={opacity:r};if(a){o.scale=a;n.css(e.fx.cssPrefix+"transform-origin","0 0")}return n.animate(o,i,null,s)}function l(t,n,i,r){return o(t,n,0,i,function(){a.call(e(this));r&&r.call(this)})}e.fn.toggle=function(n,i){if(n===t||typeof n=="boolean")return s.call(this,n);else return this.each(function(){var t=e(this);t[t.css("display")=="none"?"show":"hide"](n,i)})};e.fn.fadeTo=function(e,t,n){return o(this,e,t,null,n)};e.fn.fadeIn=function(e,t){var n=this.css("opacity");if(n>0)this.css("opacity",0);else n=1;return r.call(this).fadeTo(e,n,t)};e.fn.fadeOut=function(e,t){return l(this,e,null,t)};e.fn.fadeToggle=function(t,n){return this.each(function(){var i=e(this);i[i.css("opacity")==0||i.css("display")=="none"?"fadeIn":"fadeOut"](t,n)})}})(Zepto)},function(e,t){(function(e){var t={},n,i,r,a,s=750,o;function l(e,t,n,i){return Math.abs(e-t)>=Math.abs(n-i)?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}function u(){a=null;if(t.last){if(t.el)t.el.trigger("longTap");t={}}}function c(){if(a)clearTimeout(a);a=null}function d(){if(n)clearTimeout(n);if(i)clearTimeout(i);if(r)clearTimeout(r);if(a)clearTimeout(a);n=i=r=a=null;t={}}function f(e){return(e.pointerType=="touch"||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function h(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}e(document).ready(function(){var p,m,_=0,g=0,v,y;if("MSGesture"in window){o=new MSGesture;o.target=document.body}e(document).bind("MSGestureEnd",function(e){var n=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;if(n){if(t.el)t.el.trigger("swipe");if(t.el)t.el.trigger("swipe"+n)}}).on("touchstart MSPointerDown pointerdown",function(i){if((y=h(i,"down"))&&!f(i))return;v=y?i:i.touches[0];if(i.touches&&i.touches.length===1&&t.x2){t.x2=undefined;t.y2=undefined}p=Date.now();m=p-(t.last||p);t.el=e("tagName"in v.target?v.target:v.target.parentNode);n&&clearTimeout(n);t.x1=v.pageX;t.y1=v.pageY;if(m>0&&m<=250)t.isDoubleTap=true;t.last=p;a=setTimeout(u,s);if(o&&y)o.addPointer(i.pointerId)}).on("touchmove MSPointerMove pointermove",function(e){if((y=h(e,"move"))&&!f(e))return;v=y?e:e.touches[0];c();t.x2=v.pageX;t.y2=v.pageY;_+=Math.abs(t.x1-t.x2);g+=Math.abs(t.y1-t.y2)}).on("touchend MSPointerUp pointerup",function(a){if((y=h(a,"up"))&&!f(a))return;c();if(t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30)r=setTimeout(function(){if(t.el)t.el.trigger("swipe");if(t.el)t.el.trigger("swipe"+l(t.x1,t.x2,t.y1,t.y2));t={}},0);else if("last"in t)if(_<30&&g<30){i=setTimeout(function(){var i=e.Event("tap");i.cancelTouch=d;if(t.el)t.el.trigger(i);if(t.isDoubleTap){if(t.el)t.el.trigger("doubleTap");t={}}else{n=setTimeout(function(){n=null;if(t.el)t.el.trigger("singleTap");t={}},250)}},0)}else{t={}}_=g=0}).on("touchcancel MSPointerCancel pointercancel",d);e(window).on("scroll",d)});["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})})(Zepto)},function(e,t,n){var i,r;!function(){function a(e,t){return t>e?-1:e>t?1:e>=t?0:0/0}function s(e){return null===e?0/0:+e}function o(e){return!isNaN(e)}function l(e){return{left:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);r>i;){var a=i+r>>>1;e(t[a],n)<0?i=a+1:r=a}return i},right:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);r>i;){var a=i+r>>>1;e(t[a],n)>0?r=a:i=a+1}return i}}}function u(e){return e.length}function c(e){for(var t=1;e*t%1;)t*=10;return t}function d(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function f(){this._=Object.create(null)}function h(e){return(e+="")===xs||e[0]===ws?ws+e:e}function p(e){return(e+="")[0]===ws?e.slice(1):e}function m(e){return h(e)in this._}function _(e){return(e=h(e))in this._&&delete this._[e]}function g(){var e=[];for(var t in this._)e.push(p(t));return e}function v(){var e=0;for(var t in this._)++e;return e}function y(){for(var e in this._)return!1;return!0}function b(){this._=Object.create(null)}function x(e,t,n){return function(){var i=n.apply(t,arguments);return i===t?e:i}}function w(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,i=Ls.length;i>n;++n){var r=Ls[n]+t;if(r in e)return r}}function L(){}function S(){}function E(e){function t(){for(var t,i=n,r=-1,a=i.length;++r<a;)(t=i[r].on)&&t.apply(this,arguments);return e}var n=[],i=new f;return t.on=function(t,r){var a,s=i.get(t);return arguments.length<2?s&&s.on:(s&&(s.on=null,n=n.slice(0,a=n.indexOf(s)).concat(n.slice(a+1)),i.remove(t)),r&&n.push(i.set(t,{on:r})),e)},t}function k(){ss.event.preventDefault()}function T(){for(var e,t=ss.event;e=t.sourceEvent;)t=e;return t}function M(e){for(var t=new S,n=0,i=arguments.length;++n<i;)t[arguments[n]]=E(t);return t.of=function(n,i){return function(r){try{var a=r.sourceEvent=ss.event;r.target=e,ss.event=r,t[r.type].apply(n,i)}finally{ss.event=a}}},t}function A(e){return Es(e,Cs),e}function C(e){return"function"==typeof e?e:function(){return ks(e,this)}}function R(e){return"function"==typeof e?e:function(){return Ts(e,this)}}function D(e,t){function n(){this.removeAttribute(e)}function i(){this.removeAttributeNS(e.space,e.local)}function r(){this.setAttribute(e,t)}function a(){this.setAttributeNS(e.space,e.local,t)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=ss.ns.qualify(e),null==t?e.local?i:n:"function"==typeof t?e.local?o:s:e.local?a:r}function I(e){return e.trim().replace(/\s+/g," ")}function O(e){return new RegExp("(?:^|\\s+)"+ss.requote(e)+"(?:\\s+|$)","g")}function N(e){return(e+"").trim().split(/^|\s+/)}function F(e,t){function n(){for(var n=-1;++n<r;)e[n](this,t)}function i(){for(var n=-1,i=t.apply(this,arguments);++n<r;)e[n](this,i)}e=N(e).map(B);var r=e.length;return"function"==typeof t?i:n}function B(e){var t=O(e);return function(n,i){if(r=n.classList)return i?r.add(e):r.remove(e);var r=n.getAttribute("class")||"";i?(t.lastIndex=0,t.test(r)||n.setAttribute("class",I(r+" "+e))):n.setAttribute("class",I(r.replace(t," ")))}}function P(e,t,n){function i(){this.style.removeProperty(e)}function r(){this.style.setProperty(e,t,n)}function a(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}return null==t?i:"function"==typeof t?a:r}function U(e,t){function n(){delete this[e]}function i(){this[e]=t}function r(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?r:i}function Y(e){return"function"==typeof e?e:(e=ss.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}function H(){var e=this.parentNode;e&&e.removeChild(this)}function G(e){return{__data__:e}}function j(e){return function(){return As(this,e)}}function V(e){return arguments.length||(e=a),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function z(e,t){for(var n=0,i=e.length;i>n;n++)for(var r,a=e[n],s=0,o=a.length;o>s;s++)(r=a[s])&&t(r,s,n);return e}function $(e){return Es(e,Ds),e}function q(e){var t,n;return function(i,r,a){var s,o=e[a].update,l=o.length;for(a!=n&&(n=a,t=0),r>=t&&(t=r+1);!(s=o[t])&&++t<l;);return s}}function W(e,t,n){function i(){var t=this[s];t&&(this.removeEventListener(e,t,t.$),delete this[s])}function r(){var r=l(t,ls(arguments));i.call(this),this.addEventListener(e,this[s]=r,r.$=n),r._=t}function a(){var t,n=new RegExp("^__on([^.]+)"+ss.requote(e)+"$");for(var i in this)if(t=i.match(n)){var r=this[i];this.removeEventListener(t[1],r,r.$),delete this[i]}}var s="__on"+e,o=e.indexOf("."),l=K;o>0&&(e=e.slice(0,o));var u=Os.get(e);return u&&(e=u,l=J),o?t?r:i:t?L:a}function K(e,t){return function(n){var i=ss.event;ss.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{ss.event=i}}}function J(e,t){var n=K(e,t);return function(e){var t=this,i=e.relatedTarget;i&&(i===t||8&i.compareDocumentPosition(t))||n.call(t,e)}}function X(){var e=".dragsuppress-"+ ++Fs,t="click"+e,n=ss.select(ds).on("touchmove"+e,k).on("dragstart"+e,k).on("selectstart"+e,k);if(Ns){var i=cs.style,r=i[Ns];i[Ns]="none"}return function(a){if(n.on(e,null),Ns&&(i[Ns]=r),a){var s=function(){n.on(t,null)};n.on(t,function(){k(),s()},!0),setTimeout(s,0)}}}function Z(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>Bs&&(ds.scrollX||ds.scrollY)){n=ss.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var r=n[0][0].getScreenCTM();Bs=!(r.f||r.e),n.remove()}return Bs?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}function Q(){return ss.event.changedTouches[0].identifier}function ee(){return ss.event.target}function te(){return ds}function ne(e){return e>0?1:0>e?-1:0}function ie(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function re(e){return e>1?0:-1>e?Ys:Math.acos(e)}function ae(e){return e>1?js:-1>e?-js:Math.asin(e)}function se(e){return((e=Math.exp(e))-1/e)/2}function oe(e){return((e=Math.exp(e))+1/e)/2}function le(e){return((e=Math.exp(2*e))-1)/(e+1)}function ue(e){return(e=Math.sin(e/2))*e}function ce(){}function de(e,t,n){return this instanceof de?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof de?new de(e.h,e.s,e.l):Ee(""+e,ke,de):new de(e,t,n)}function fe(e,t,n){function i(e){return e>360?e-=360:0>e&&(e+=360),60>e?a+(s-a)*e/60:180>e?s:240>e?a+(s-a)*(240-e)/60:a}function r(e){return Math.round(255*i(e))}var a,s;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+t):n+t-n*t,a=2*n-s,new xe(r(e+120),r(e),r(e-120))}function he(e,t,n){return this instanceof he?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof he?new he(e.h,e.c,e.l):e instanceof me?ge(e.l,e.a,e.b):ge((e=Te((e=ss.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new he(e,t,n)}function pe(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new me(n,Math.cos(e*=Vs)*t,Math.sin(e)*t)}function me(e,t,n){return this instanceof me?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof me?new me(e.l,e.a,e.b):e instanceof he?pe(e.h,e.c,e.l):Te((e=xe(e)).r,e.g,e.b):new me(e,t,n)}function _e(e,t,n){var i=(e+16)/116,r=i+t/500,a=i-n/200;return r=ve(r)*to,i=ve(i)*no,a=ve(a)*io,new xe(be(3.2404542*r-1.5371385*i-.4985314*a),be(-.969266*r+1.8760108*i+.041556*a),be(.0556434*r-.2040259*i+1.0572252*a))}function ge(e,t,n){return e>0?new he(Math.atan2(n,t)*zs,Math.sqrt(t*t+n*n),e):new he(0/0,0/0,e)}function ve(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ye(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function be(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function xe(e,t,n){return this instanceof xe?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof xe?new xe(e.r,e.g,e.b):Ee(""+e,xe,fe):new xe(e,t,n)}function we(e){return new xe(e>>16,255&e>>8,255&e)}function Le(e){return we(e)+""}function Se(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function Ee(e,t,n){var i,r,a,s=0,o=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(e))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(Ae(r[0]),Ae(r[1]),Ae(r[2]))}return(a=so.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(s=(3840&a)>>4,s=s>>4|s,o=240&a,o=o>>4|o,l=15&a,l=l<<4|l):7===e.length&&(s=(16711680&a)>>16,o=(65280&a)>>8,l=255&a)),t(s,o,l))}function ke(e,t,n){var i,r,a=Math.min(e/=255,t/=255,n/=255),s=Math.max(e,t,n),o=s-a,l=(s+a)/2;return o?(r=.5>l?o/(s+a):o/(2-s-a),i=e==s?(t-n)/o+(n>t?6:0):t==s?(n-e)/o+2:(e-t)/o+4,i*=60):(i=0/0,r=l>0&&1>l?0:i),new de(i,r,l)}function Te(e,t,n){e=Me(e),t=Me(t),n=Me(n);var i=ye((.4124564*e+.3575761*t+.1804375*n)/to),r=ye((.2126729*e+.7151522*t+.072175*n)/no),a=ye((.0193339*e+.119192*t+.9503041*n)/io);return me(116*r-16,500*(i-r),200*(r-a))}function Me(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ae(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Ce(e){return"function"==typeof e?e:function(){return e}}function Re(e){return e}function De(e){return function(t,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),Ie(t,n,e,i)}}function Ie(e,t,n,i){function r(){var e,t=l.status;if(!t&&Ne(l)||t>=200&&300>t||304===t){try{e=n.call(a,l)}catch(i){return s.error.call(a,i),void 0}s.load.call(a,e)}else s.error.call(a,l)}var a={},s=ss.dispatch("beforesend","progress","load","error"),o={},l=new XMLHttpRequest,u=null;return!ds.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(e){var t=ss.event;ss.event=e;try{s.progress.call(a,l)}finally{ss.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?o[e]:(null==t?delete o[e]:o[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",a):t},a.responseType=function(e){return arguments.length?(u=e,a):u},a.response=function(e){return n=e,a},["get","post"].forEach(function(e){a[e]=function(){return a.send.apply(a,[e].concat(ls(arguments)))}}),a.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,e,!0),null==t||"accept"in o||(o.accept=t+",*/*"),l.setRequestHeader)for(var c in o)l.setRequestHeader(c,o[c]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=u&&(l.responseType=u),null!=r&&a.on("error",r).on("load",function(e){r(null,e)}),s.beforesend.call(a,l),l.send(null==i?null:i),a},a.abort=function(){return l.abort(),a},ss.rebind(a,s,"on"),null==i?a:a.get(Oe(i))}function Oe(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Ne(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Fe(){var e=Be(),t=Pe()-e;t>24?(isFinite(t)&&(clearTimeout(co),co=setTimeout(Fe,t)),uo=0):(uo=1,ho(Fe))}function Be(){var e=Date.now();for(fo=oo;fo;)e>=fo.t&&(fo.f=fo.c(e-fo.t)),fo=fo.n;return e}function Pe(){for(var e,t=oo,n=1/0;t;)t.f?t=e?e.n=t.n:oo=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return lo=e,n}function Ue(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Ye(e,t){var n=Math.pow(10,3*bs(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function He(e){var t=e.decimal,n=e.thousands,i=e.grouping,r=e.currency,a=i&&n?function(e,t){for(var r=e.length,a=[],s=0,o=i[0],l=0;r>0&&o>0&&(l+o+1>t&&(o=Math.max(1,t-l)),a.push(e.substring(r-=o,r+o)),!((l+=o+1)>t));)o=i[s=(s+1)%i.length];return a.reverse().join(n)}:Re;return function(e){var n=mo.exec(e),i=n[1]||" ",s=n[2]||">",o=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],d=n[7],f=n[8],h=n[9],p=1,m="",_="",g=!1,v=!0;switch(f&&(f=+f.substring(1)),(u||"0"===i&&"="===s)&&(u=i="0",s="="),h){case"n":d=!0,h="g";break;case"%":p=100,_="%",h="f";break;case"p":p=100,_="%",h="r";break;case"b":case"o":case"x":case"X":"#"===l&&(m="0"+h.toLowerCase());case"c":v=!1;case"d":g=!0,f=0;break;case"s":p=-1,h="r"}"$"===l&&(m=r[0],_=r[1]),"r"!=h||f||(h="g"),null!=f&&("g"==h?f=Math.max(1,Math.min(21,f)):("e"==h||"f"==h)&&(f=Math.max(0,Math.min(20,f)))),h=_o.get(h)||Ge;var y=u&&d;return function(e){var n=_;if(g&&e%1)return"";var r=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===o?"":o;if(0>p){var l=ss.formatPrefix(e,f);e=l.scale(e),n=l.symbol+_}else e*=p;e=h(e,f);var b,x,w=e.lastIndexOf(".");if(0>w){var L=v?e.lastIndexOf("e"):-1;0>L?(b=e,x=""):(b=e.substring(0,L),x=e.substring(L))}else b=e.substring(0,w),x=t+e.substring(w+1);!u&&d&&(b=a(b,1/0));var S=m.length+b.length+x.length+(y?0:r.length),E=c>S?new Array(S=c-S+1).join(i):"";return y&&(b=a(E+b,E.length?c-x.length:1/0)),r+=m,e=b+x,("<"===s?r+e+E:">"===s?E+r+e:"^"===s?E.substring(0,S>>=1)+r+e+E.substring(S):r+(y?e:E+e))+n}}}function Ge(e){return e+""}function je(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ve(e,t,n){function i(t){var n=e(t),i=a(n,1);return i-t>t-n?n:i}function r(n){return t(n=e(new vo(n-1)),1),n}function a(e,n){return t(e=new vo(+e),n),e}function s(e,i,a){var s=r(e),o=[];if(a>1)for(;i>s;)n(s)%a||o.push(new Date(+s)),t(s,1);else for(;i>s;)o.push(new Date(+s)),t(s,1);return o}function o(e,t,n){try{vo=je;var i=new je;return i._=e,s(i,t,n)}finally{vo=Date}}e.floor=e,e.round=i,e.ceil=r,e.offset=a,e.range=s;var l=e.utc=ze(e);return l.floor=l,l.round=ze(i),l.ceil=ze(r),l.offset=ze(a),l.range=o,e}function ze(e){return function(t,n){try{vo=je;var i=new je;return i._=t,e(i,n)._}finally{vo=Date}}}function $e(e){function t(e){function t(t){for(var n,r,a,s=[],o=-1,l=0;++o<i;)37===e.charCodeAt(o)&&(s.push(e.slice(l,o)),null!=(r=bo[n=e.charAt(++o)])&&(n=e.charAt(++o)),(a=M[n])&&(n=a(t,null==r?"e"===n?" ":"0":r)),s.push(n),l=o+1);return s.push(e.slice(l,o)),s.join("")}var i=e.length;return t.parse=function(t){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=n(i,e,t,0);if(r!=t.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var a=null!=i.Z&&vo!==je,s=new(a?je:vo);return"j"in i?s.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(s.setFullYear(i.y,0,1),s.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(s.getDay()+5)%7:i.w+7*i.U-(s.getDay()+6)%7)):s.setFullYear(i.y,i.m,i.d),s.setHours(i.H+(0|i.Z/100),i.M+i.Z%100,i.S,i.L),a?s._:s},t.toString=function(){return e},t}function n(e,t,n,i){for(var r,a,s,o=0,l=t.length,u=n.length;l>o;){if(i>=u)return-1;if(r=t.charCodeAt(o++),37===r){if(s=t.charAt(o++),a=A[s in bo?t.charAt(o++):s],!a||(i=a(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function i(e,t,n){w.lastIndex=0;var i=w.exec(t.slice(n));return i?(e.w=L.get(i[0].toLowerCase()),n+i[0].length):-1}function r(e,t,n){b.lastIndex=0;var i=b.exec(t.slice(n));return i?(e.w=x.get(i[0].toLowerCase()),n+i[0].length):-1}function a(e,t,n){k.lastIndex=0;var i=k.exec(t.slice(n));return i?(e.m=T.get(i[0].toLowerCase()),n+i[0].length):-1}function s(e,t,n){S.lastIndex=0;var i=S.exec(t.slice(n));return i?(e.m=E.get(i[0].toLowerCase()),n+i[0].length):-1}function o(e,t,i){return n(e,M.c.toString(),t,i)}function l(e,t,i){return n(e,M.x.toString(),t,i)}function u(e,t,i){return n(e,M.X.toString(),t,i)}function c(e,t,n){var i=y.get(t.slice(n,n+=2).toLowerCase());return null==i?-1:(e.p=i,n)}var d=e.dateTime,f=e.date,h=e.time,p=e.periods,m=e.days,_=e.shortDays,g=e.months,v=e.shortMonths;t.utc=function(e){function n(e){try{vo=je;var t=new vo;return t._=e,i(t)}finally{vo=Date}}var i=t(e);return n.parse=function(e){try{vo=je;var t=i.parse(e);return t&&t._}finally{vo=Date}},n.toString=i.toString,n},t.multi=t.utc.multi=ft;var y=ss.map(),b=We(m),x=Ke(m),w=We(_),L=Ke(_),S=We(g),E=Ke(g),k=We(v),T=Ke(v);p.forEach(function(e,t){y.set(e.toLowerCase(),t)});var M={a:function(e){return _[e.getDay()]},A:function(e){return m[e.getDay()]},b:function(e){return v[e.getMonth()]},B:function(e){return g[e.getMonth()]},c:t(d),d:function(e,t){return qe(e.getDate(),t,2)},e:function(e,t){return qe(e.getDate(),t,2)},H:function(e,t){return qe(e.getHours(),t,2)},I:function(e,t){return qe(e.getHours()%12||12,t,2)},j:function(e,t){return qe(1+go.dayOfYear(e),t,3)},L:function(e,t){return qe(e.getMilliseconds(),t,3)},m:function(e,t){return qe(e.getMonth()+1,t,2)},M:function(e,t){return qe(e.getMinutes(),t,2)},p:function(e){return p[+(e.getHours()>=12)]},S:function(e,t){return qe(e.getSeconds(),t,2)},U:function(e,t){return qe(go.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return qe(go.mondayOfYear(e),t,2)},x:t(f),X:t(h),y:function(e,t){return qe(e.getFullYear()%100,t,2)},Y:function(e,t){return qe(e.getFullYear()%1e4,t,4)},Z:ct,"%":function(){return"%"}},A={a:i,A:r,b:a,B:s,c:o,d:rt,e:rt,H:st,I:st,j:at,L:ut,m:it,M:ot,p:c,S:lt,U:Xe,w:Je,W:Ze,x:l,X:u,y:et,Y:Qe,Z:tt,"%":dt};return t}function qe(e,t,n){var i=0>e?"-":"",r=(i?-e:e)+"",a=r.length;return i+(n>a?new Array(n-a+1).join(t)+r:r)}function We(e){return new RegExp("^(?:"+e.map(ss.requote).join("|")+")","i")}function Ke(e){for(var t=new f,n=-1,i=e.length;++n<i;)t.set(e[n].toLowerCase(),n);return t}function Je(e,t,n){xo.lastIndex=0;var i=xo.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Xe(e,t,n){xo.lastIndex=0;var i=xo.exec(t.slice(n));return i?(e.U=+i[0],n+i[0].length):-1}function Ze(e,t,n){xo.lastIndex=0;var i=xo.exec(t.slice(n));return i?(e.W=+i[0],n+i[0].length):-1}function Qe(e,t,n){xo.lastIndex=0;var i=xo.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function et(e,t,n){xo.lastIndex=0;var i=xo.exec(t.slice(n,n+2));return i?(e.y=nt(+i[0]),n+i[0].length):-1}function tt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function nt(e){return e+(e>68?1900:2e3)}function it(e,t,n){xo.lastIndex=0;var i=xo.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function rt(e,t,n){xo.lastIndex=0;var i=xo.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function at(e,t,n){xo.lastIndex=0;var i=xo.exec(t.slice(n,n+3));return i?(e.j=+i[0],n+i[0].length):-1}function st(e,t,n){xo.lastIndex=0;var i=xo.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function ot(e,t,n){xo.lastIndex=0;var i=xo.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function lt(e,t,n){xo.lastIndex=0;var i=xo.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function ut(e,t,n){xo.lastIndex=0;var i=xo.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function ct(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",i=0|bs(t)/60,r=bs(t)%60;return n+qe(i,"0",2)+qe(r,"0",2)}function dt(e,t,n){wo.lastIndex=0;var i=wo.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function ft(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,i=e[n];!i[1](t);)i=e[++n];return i[0](t)}}function ht(){}function pt(e,t,n){var i=n.s=e+t,r=i-e,a=i-r;n.t=e-a+(t-r)}function mt(e,t){e&&ko.hasOwnProperty(e.type)&&ko[e.type](e,t)}function _t(e,t,n){var i,r=-1,a=e.length-n;for(t.lineStart();++r<a;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function gt(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)_t(e[n],t,1);t.polygonEnd()}function vt(){function e(e,t){e*=Vs,t=t*Vs/2+Ys/4;var n=e-i,s=n>=0?1:-1,o=s*n,l=Math.cos(t),u=Math.sin(t),c=a*u,d=r*l+c*Math.cos(o),f=c*s*Math.sin(o);Mo.add(Math.atan2(f,d)),i=e,r=l,a=u}var t,n,i,r,a;Ao.point=function(s,o){Ao.point=e,i=(t=s)*Vs,r=Math.cos(o=(n=o)*Vs/2+Ys/4),a=Math.sin(o)},Ao.lineEnd=function(){e(t,n)}}function yt(e){var t=e[0],n=e[1],i=Math.cos(n);return[i*Math.cos(t),i*Math.sin(t),Math.sin(n)]}function bt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function xt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function wt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Lt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function St(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Et(e){return[Math.atan2(e[1],e[0]),ae(e[2])]}function kt(e,t){return bs(e[0]-t[0])<Ps&&bs(e[1]-t[1])<Ps}function Tt(e,t){e*=Vs;var n=Math.cos(t*=Vs);Mt(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Mt(e,t,n){++Co,Do+=(e-Do)/Co,Io+=(t-Io)/Co,Oo+=(n-Oo)/Co}function At(){function e(e,r){e*=Vs;var a=Math.cos(r*=Vs),s=a*Math.cos(e),o=a*Math.sin(e),l=Math.sin(r),u=Math.atan2(Math.sqrt((u=n*l-i*o)*u+(u=i*s-t*l)*u+(u=t*o-n*s)*u),t*s+n*o+i*l);Ro+=u,No+=u*(t+(t=s)),Fo+=u*(n+(n=o)),Bo+=u*(i+(i=l)),Mt(t,n,i)}var t,n,i;Ho.point=function(r,a){r*=Vs;var s=Math.cos(a*=Vs);t=s*Math.cos(r),n=s*Math.sin(r),i=Math.sin(a),Ho.point=e,Mt(t,n,i)}}function Ct(){Ho.point=Tt}function Rt(){function e(e,t){e*=Vs;var n=Math.cos(t*=Vs),s=n*Math.cos(e),o=n*Math.sin(e),l=Math.sin(t),u=r*l-a*o,c=a*s-i*l,d=i*o-r*s,f=Math.sqrt(u*u+c*c+d*d),h=i*s+r*o+a*l,p=f&&-re(h)/f,m=Math.atan2(f,h);Po+=p*u,Uo+=p*c,Yo+=p*d,Ro+=m,No+=m*(i+(i=s)),Fo+=m*(r+(r=o)),Bo+=m*(a+(a=l)),Mt(i,r,a)}var t,n,i,r,a;Ho.point=function(s,o){t=s,n=o,Ho.point=e,s*=Vs;var l=Math.cos(o*=Vs);i=l*Math.cos(s),r=l*Math.sin(s),a=Math.sin(o),Mt(i,r,a)},Ho.lineEnd=function(){e(t,n),Ho.lineEnd=Ct,Ho.point=Tt}}function Dt(e,t){function n(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),n}function It(){return!0}function Ot(e,t,n,i,r){var a=[],s=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],i=e[t];if(kt(n,i)){r.lineStart();for(var o=0;t>o;++o)r.point((n=e[o])[0],n[1]);return r.lineEnd(),void 0}var l=new Ft(n,e,null,!0),u=new Ft(n,null,l,!1);l.o=u,a.push(l),s.push(u),l=new Ft(i,e,null,!1),u=new Ft(i,null,l,!0),l.o=u,a.push(l),s.push(u)}}),s.sort(t),Nt(a),Nt(s),a.length){for(var o=0,l=n,u=s.length;u>o;++o)s[o].e=l=!l;for(var c,d,f=a[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(var o=0,u=c.length;u>o;++o)r.point((d=c[o])[0],d[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(p){c=h.p.z;for(var o=c.length-1;o>=0;--o)r.point((d=c[o])[0],d[1])}else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);r.lineEnd()}}}function Nt(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}function Ft(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Bt(e,t,n,i){return function(r,a){function s(t,n){var i=r(t,n);e(t=i[0],n=i[1])&&a.point(t,n)}function o(e,t){var n=r(e,t);_.point(n[0],n[1])}function l(){v.point=o,_.lineStart()}function u(){v.point=s,_.lineEnd()}function c(e,t){m.push([e,t]);var n=r(e,t);b.point(n[0],n[1])}function d(){b.lineStart(),m=[]}function f(){c(m[0][0],m[0][1]),b.lineEnd();var e,t=b.clean(),n=y.buffer(),i=n.length;if(m.pop(),p.push(m),m=null,i)if(1&t){e=n[0];var r,i=e.length-1,s=-1;if(i>0){for(x||(a.polygonStart(),x=!0),a.lineStart();++s<i;)a.point((r=e[s])[0],r[1]);a.lineEnd()}}else i>1&&2&t&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Pt))}var h,p,m,_=t(a),g=r.invert(i[0],i[1]),v={point:s,lineStart:l,lineEnd:u,polygonStart:function(){v.point=c,v.lineStart=d,v.lineEnd=f,h=[],p=[]},polygonEnd:function(){v.point=s,v.lineStart=l,v.lineEnd=u,h=ss.merge(h);var e=Vt(g,p);h.length?(x||(a.polygonStart(),x=!0),Ot(h,Yt,e,n,a)):e&&(x||(a.polygonStart(),x=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),x&&(a.polygonEnd(),x=!1),h=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},y=Ut(),b=t(y),x=!1;return v}}function Pt(e){return e.length>1}function Ut(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:L,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Yt(e,t){return((e=e.x)[0]<0?e[1]-js-Ps:js-e[1])-((t=t.x)[0]<0?t[1]-js-Ps:js-t[1])}function Ht(e){var t,n=0/0,i=0/0,r=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(a,s){var o=a>0?Ys:-Ys,l=bs(a-n);bs(l-Ys)<Ps?(e.point(n,i=(i+s)/2>0?js:-js),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(o,i),e.point(a,i),t=0):r!==o&&l>=Ys&&(bs(n-r)<Ps&&(n-=r*Ps),bs(a-o)<Ps&&(a-=o*Ps),i=Gt(n,i,a,s),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(o,i),t=0),e.point(n=a,i=s),r=o},lineEnd:function(){e.lineEnd(),n=i=0/0},clean:function(){return 2-t}}}function Gt(e,t,n,i){var r,a,s=Math.sin(e-n);return bs(s)>Ps?Math.atan((Math.sin(t)*(a=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(t))*Math.sin(e))/(r*a*s)):(t+i)/2}function jt(e,t,n,i){var r;if(null==e)r=n*js,i.point(-Ys,r),i.point(0,r),i.point(Ys,r),i.point(Ys,0),i.point(Ys,-r),i.point(0,-r),i.point(-Ys,-r),i.point(-Ys,0),i.point(-Ys,r);else if(bs(e[0]-t[0])>Ps){var a=e[0]<t[0]?Ys:-Ys;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Vt(e,t){var n=e[0],i=e[1],r=[Math.sin(n),-Math.cos(n),0],a=0,s=0;Mo.reset();for(var o=0,l=t.length;l>o;++o){var u=t[o],c=u.length;if(c)for(var d=u[0],f=d[0],h=d[1]/2+Ys/4,p=Math.sin(h),m=Math.cos(h),_=1;;){_===c&&(_=0),e=u[_];var g=e[0],v=e[1]/2+Ys/4,y=Math.sin(v),b=Math.cos(v),x=g-f,w=x>=0?1:-1,L=w*x,S=L>Ys,E=p*y;if(Mo.add(Math.atan2(E*w*Math.sin(L),m*b+E*Math.cos(L))),a+=S?x+w*Hs:x,S^f>=n^g>=n){var k=xt(yt(d),yt(e));St(k);var T=xt(r,k);St(T);var M=(S^x>=0?-1:1)*ae(T[2]);(i>M||i===M&&(k[0]||k[1]))&&(s+=S^x>=0?1:-1)}if(!_++)break;f=g,p=y,m=b,d=e}}return(-Ps>a||Ps>a&&0>Mo)^1&s}function zt(e){function t(e,t){return Math.cos(e)*Math.cos(t)>a}function n(e){var n,a,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(d,f){var h,p=[d,f],m=t(d,f),_=s?m?0:r(d,f):m?r(d+(0>d?Ys:-Ys),f):0;if(!n&&(u=l=m)&&e.lineStart(),m!==l&&(h=i(n,p),(kt(n,h)||kt(p,h))&&(p[0]+=Ps,p[1]+=Ps,m=t(p[0],p[1]))),m!==l)c=0,m?(e.lineStart(),h=i(p,n),e.point(h[0],h[1])):(h=i(n,p),e.point(h[0],h[1]),e.lineEnd()),n=h;else if(o&&n&&s^m){var g;_&a||!(g=i(p,n,!0))||(c=0,s?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!m||n&&kt(n,p)||e.point(p[0],p[1]),n=p,l=m,a=_},lineEnd:function(){l&&e.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function i(e,t,n){var i=yt(e),r=yt(t),s=[1,0,0],o=xt(i,r),l=bt(o,o),u=o[0],c=l-u*u;if(!c)return!n&&e;var d=a*l/c,f=-a*u/c,h=xt(s,o),p=Lt(s,d),m=Lt(o,f);wt(p,m);var _=h,g=bt(p,_),v=bt(_,_),y=g*g-v*(bt(p,p)-1);if(!(0>y)){var b=Math.sqrt(y),x=Lt(_,(-g-b)/v);if(wt(x,p),x=Et(x),!n)return x;var w,L=e[0],S=t[0],E=e[1],k=t[1];L>S&&(w=L,L=S,S=w);var T=S-L,M=bs(T-Ys)<Ps,A=M||Ps>T;if(!M&&E>k&&(w=E,E=k,k=w),A?M?E+k>0^x[1]<(bs(x[0]-L)<Ps?E:k):E<=x[1]&&x[1]<=k:T>Ys^(L<=x[0]&&x[0]<=S)){var C=Lt(_,(-g+b)/v);return wt(C,p),[x,Et(C)]}}}function r(t,n){var i=s?e:Ys-e,r=0;return-i>t?r|=1:t>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var a=Math.cos(e),s=a>0,o=bs(a)>Ps,l=yn(e,6*Vs);return Bt(t,n,l,s?[0,-e]:[-Ys,e-Ys])}function $t(e,t,n,i){return function(r){var a,s=r.a,o=r.b,l=s.x,u=s.y,c=o.x,d=o.y,f=0,h=1,p=c-l,m=d-u;if(a=e-l,p||!(a>0)){if(a/=p,0>p){if(f>a)return;h>a&&(h=a)}else if(p>0){if(a>h)return;a>f&&(f=a)}if(a=n-l,p||!(0>a)){if(a/=p,0>p){if(a>h)return;a>f&&(f=a)}else if(p>0){if(f>a)return;h>a&&(h=a)}if(a=t-u,m||!(a>0)){if(a/=m,0>m){if(f>a)return;h>a&&(h=a)}else if(m>0){if(a>h)return;a>f&&(f=a)}if(a=i-u,m||!(0>a)){if(a/=m,0>m){if(a>h)return;a>f&&(f=a)}else if(m>0){if(f>a)return;h>a&&(h=a)}return f>0&&(r.a={x:l+f*p,y:u+f*m}),1>h&&(r.b={x:l+h*p,y:u+h*m}),r}}}}}}function qt(e,t,n,i){function r(i,r){return bs(i[0]-e)<Ps?r>0?0:3:bs(i[0]-n)<Ps?r>0?2:1:bs(i[1]-t)<Ps?r>0?1:0:r>0?3:2}function a(e,t){return s(e.x,t.x)}function s(e,t){var n=r(e,1),i=r(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){function l(e){for(var t=0,n=_.length,i=e[1],r=0;n>r;++r)for(var a,s=1,o=_[r],l=o.length,u=o[0];l>s;++s)a=o[s],u[1]<=i?a[1]>i&&ie(u,a,e)>0&&++t:a[1]<=i&&ie(u,a,e)<0&&--t,u=a;return 0!==t}function u(a,o,l,u){var c=0,d=0;if(null==a||(c=r(a,l))!==(d=r(o,l))||s(a,o)<0^l>0){do u.point(0===c||3===c?e:n,c>1?i:t);while((c=(c+l+4)%4)!==d)}else u.point(o[0],o[1])}function c(r,a){return r>=e&&n>=r&&a>=t&&i>=a}function d(e,t){c(e,t)&&o.point(e,t)}function f(){A.point=p,_&&_.push(g=[]),S=!0,L=!1,x=w=0/0}function h(){m&&(p(v,y),b&&L&&T.rejoin(),m.push(T.buffer())),A.point=d,L&&o.lineEnd()}function p(e,t){e=Math.max(-jo,Math.min(jo,e)),t=Math.max(-jo,Math.min(jo,t));var n=c(e,t);if(_&&g.push([e,t]),S)v=e,y=t,b=n,S=!1,n&&(o.lineStart(),o.point(e,t));else if(n&&L)o.point(e,t);else{var i={a:{x:x,y:w},b:{x:e,y:t}};M(i)?(L||(o.lineStart(),o.point(i.a.x,i.a.y)),o.point(i.b.x,i.b.y),n||o.lineEnd(),E=!1):n&&(o.lineStart(),o.point(e,t),E=!1)}x=e,w=t,L=n}var m,_,g,v,y,b,x,w,L,S,E,k=o,T=Ut(),M=$t(e,t,n,i),A={
point:d,lineStart:f,lineEnd:h,polygonStart:function(){o=T,m=[],_=[],E=!0},polygonEnd:function(){o=k,m=ss.merge(m);var t=l([e,i]),n=E&&t,r=m.length;(n||r)&&(o.polygonStart(),n&&(o.lineStart(),u(null,null,1,o),o.lineEnd()),r&&Ot(m,a,t,u,o),o.polygonEnd()),m=_=g=null}};return A}}function Wt(e){var t=0,n=Ys/3,i=dn(e),r=i(t,n);return r.parallels=function(e){return arguments.length?i(t=e[0]*Ys/180,n=e[1]*Ys/180):[180*(t/Ys),180*(n/Ys)]},r}function Kt(e,t){function n(e,t){var n=Math.sqrt(a-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),s-n*Math.cos(e)]}var i=Math.sin(e),r=(i+Math.sin(t))/2,a=1+i*(2*r-i),s=Math.sqrt(a)/r;return n.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/r,ae((a-(e*e+n*n)*r*r)/(2*r))]},n}function Jt(){function e(e,t){zo+=r*e-i*t,i=e,r=t}var t,n,i,r;Jo.point=function(a,s){Jo.point=e,t=i=a,n=r=s},Jo.lineEnd=function(){e(t,n)}}function Xt(e,t){$o>e&&($o=e),e>Wo&&(Wo=e),qo>t&&(qo=t),t>Ko&&(Ko=t)}function Zt(){function e(e,t){s.push("M",e,",",t,a)}function t(e,t){s.push("M",e,",",t),o.point=n}function n(e,t){s.push("L",e,",",t)}function i(){o.point=e}function r(){s.push("Z")}var a=Qt(4.5),s=[],o={point:e,lineStart:function(){o.point=t},lineEnd:i,polygonStart:function(){o.lineEnd=r},polygonEnd:function(){o.lineEnd=i,o.point=e},pointRadius:function(e){return a=Qt(e),o},result:function(){if(s.length){var e=s.join("");return s=[],e}}};return o}function Qt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function en(e,t){Do+=e,Io+=t,++Oo}function tn(){function e(e,i){var r=e-t,a=i-n,s=Math.sqrt(r*r+a*a);No+=s*(t+e)/2,Fo+=s*(n+i)/2,Bo+=s,en(t=e,n=i)}var t,n;Zo.point=function(i,r){Zo.point=e,en(t=i,n=r)}}function nn(){Zo.point=en}function rn(){function e(e,t){var n=e-i,a=t-r,s=Math.sqrt(n*n+a*a);No+=s*(i+e)/2,Fo+=s*(r+t)/2,Bo+=s,s=r*e-i*t,Po+=s*(i+e),Uo+=s*(r+t),Yo+=3*s,en(i=e,r=t)}var t,n,i,r;Zo.point=function(a,s){Zo.point=e,en(t=i=a,n=r=s)},Zo.lineEnd=function(){e(t,n)}}function an(e){function t(t,n){e.moveTo(t+s,n),e.arc(t,n,s,0,Hs)}function n(t,n){e.moveTo(t,n),o.point=i}function i(t,n){e.lineTo(t,n)}function r(){o.point=t}function a(){e.closePath()}var s=4.5,o={point:t,lineStart:function(){o.point=n},lineEnd:r,polygonStart:function(){o.lineEnd=a},polygonEnd:function(){o.lineEnd=r,o.point=t},pointRadius:function(e){return s=e,o},result:L};return o}function sn(e){function t(e){return(o?i:n)(e)}function n(t){return un(t,function(n,i){n=e(n,i),t.point(n[0],n[1])})}function i(t){function n(n,i){n=e(n,i),t.point(n[0],n[1])}function i(){y=0/0,S.point=a,t.lineStart()}function a(n,i){var a=yt([n,i]),s=e(n,i);r(y,b,v,x,w,L,y=s[0],b=s[1],v=n,x=a[0],w=a[1],L=a[2],o,t),t.point(y,b)}function s(){S.point=n,t.lineEnd()}function l(){i(),S.point=u,S.lineEnd=c}function u(e,t){a(d=e,f=t),h=y,p=b,m=x,_=w,g=L,S.point=a}function c(){r(y,b,v,x,w,L,h,p,d,m,_,g,o,t),S.lineEnd=s,s()}var d,f,h,p,m,_,g,v,y,b,x,w,L,S={point:n,lineStart:i,lineEnd:s,polygonStart:function(){t.polygonStart(),S.lineStart=l},polygonEnd:function(){t.polygonEnd(),S.lineStart=i}};return S}function r(t,n,i,o,l,u,c,d,f,h,p,m,_,g){var v=c-t,y=d-n,b=v*v+y*y;if(b>4*a&&_--){var x=o+h,w=l+p,L=u+m,S=Math.sqrt(x*x+w*w+L*L),E=Math.asin(L/=S),k=bs(bs(L)-1)<Ps||bs(i-f)<Ps?(i+f)/2:Math.atan2(w,x),T=e(k,E),M=T[0],A=T[1],C=M-t,R=A-n,D=y*C-v*R;(D*D/b>a||bs((v*C+y*R)/b-.5)>.3||s>o*h+l*p+u*m)&&(r(t,n,i,o,l,u,M,A,k,x/=S,w/=S,L,_,g),g.point(M,A),r(M,A,k,x,w,L,c,d,f,h,p,m,_,g))}}var a=.5,s=Math.cos(30*Vs),o=16;return t.precision=function(e){return arguments.length?(o=(a=e*e)>0&&16,t):Math.sqrt(a)},t}function on(e){var t=sn(function(t,n){return e([t*zs,n*zs])});return function(e){return fn(t(e))}}function ln(e){this.stream=e}function un(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function cn(e){return dn(function(){return e})()}function dn(e){function t(e){return e=o(e[0]*Vs,e[1]*Vs),[e[0]*f+l,u-e[1]*f]}function n(e){return e=o.invert((e[0]-l)/f,(u-e[1])/f),e&&[e[0]*zs,e[1]*zs]}function i(){o=Dt(s=mn(g,v,y),a);var e=a(m,_);return l=h-e[0]*f,u=p+e[1]*f,r()}function r(){return c&&(c.valid=!1,c=null),t}var a,s,o,l,u,c,d=sn(function(e,t){return e=a(e,t),[e[0]*f+l,u-e[1]*f]}),f=150,h=480,p=250,m=0,_=0,g=0,v=0,y=0,b=Go,x=Re,w=null,L=null;return t.stream=function(e){return c&&(c.valid=!1),c=fn(b(s,d(x(e)))),c.valid=!0,c},t.clipAngle=function(e){return arguments.length?(b=null==e?(w=e,Go):zt((w=+e)*Vs),r()):w},t.clipExtent=function(e){return arguments.length?(L=e,x=e?qt(e[0][0],e[0][1],e[1][0],e[1][1]):Re,r()):L},t.scale=function(e){return arguments.length?(f=+e,i()):f},t.translate=function(e){return arguments.length?(h=+e[0],p=+e[1],i()):[h,p]},t.center=function(e){return arguments.length?(m=e[0]%360*Vs,_=e[1]%360*Vs,i()):[m*zs,_*zs]},t.rotate=function(e){return arguments.length?(g=e[0]%360*Vs,v=e[1]%360*Vs,y=e.length>2?e[2]%360*Vs:0,i()):[g*zs,v*zs,y*zs]},ss.rebind(t,d,"precision"),function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,i()}}function fn(e){return un(e,function(t,n){e.point(t*Vs,n*Vs)})}function hn(e,t){return[e,t]}function pn(e,t){return[e>Ys?e-Hs:-Ys>e?e+Hs:e,t]}function mn(e,t,n){return e?t||n?Dt(gn(e),vn(t,n)):gn(e):t||n?vn(t,n):pn}function _n(e){return function(t,n){return t+=e,[t>Ys?t-Hs:-Ys>t?t+Hs:t,n]}}function gn(e){var t=_n(e);return t.invert=_n(-e),t}function vn(e,t){function n(e,t){var n=Math.cos(t),o=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*i+o*r;return[Math.atan2(l*a-c*s,o*i-u*r),ae(c*a+l*s)]}var i=Math.cos(e),r=Math.sin(e),a=Math.cos(t),s=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),o=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*a-l*s;return[Math.atan2(l*a+u*s,o*i+c*r),ae(c*i-o*r)]},n}function yn(e,t){var n=Math.cos(e),i=Math.sin(e);return function(r,a,s,o){var l=s*t;null!=r?(r=bn(n,r),a=bn(n,a),(s>0?a>r:r>a)&&(r+=s*Hs)):(r=e+s*Hs,a=e-.5*l);for(var u,c=r;s>0?c>a:a>c;c-=l)o.point((u=Et([n,-i*Math.cos(c),-i*Math.sin(c)]))[0],u[1])}}function bn(e,t){var n=yt(t);n[0]-=e,St(n);var i=re(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-Ps)%(2*Math.PI)}function xn(e,t,n){var i=ss.range(e,t-Ps,n).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function wn(e,t,n){var i=ss.range(e,t-Ps,n).concat(t);return function(e){return i.map(function(t){return[t,e]})}}function Ln(e){return e.source}function Sn(e){return e.target}function En(e,t,n,i){var r=Math.cos(t),a=Math.sin(t),s=Math.cos(i),o=Math.sin(i),l=r*Math.cos(e),u=r*Math.sin(e),c=s*Math.cos(n),d=s*Math.sin(n),f=2*Math.asin(Math.sqrt(ue(i-t)+r*s*ue(n-e))),h=1/Math.sin(f),p=f?function(e){var t=Math.sin(e*=f)*h,n=Math.sin(f-e)*h,i=n*l+t*c,r=n*u+t*d,s=n*a+t*o;return[Math.atan2(r,i)*zs,Math.atan2(s,Math.sqrt(i*i+r*r))*zs]}:function(){return[e*zs,t*zs]};return p.distance=f,p}function kn(){function e(e,r){var a=Math.sin(r*=Vs),s=Math.cos(r),o=bs((e*=Vs)-t),l=Math.cos(o);Qo+=Math.atan2(Math.sqrt((o=s*Math.sin(o))*o+(o=i*a-n*s*l)*o),n*a+i*s*l),t=e,n=a,i=s}var t,n,i;el.point=function(r,a){t=r*Vs,n=Math.sin(a*=Vs),i=Math.cos(a),el.point=e},el.lineEnd=function(){el.point=el.lineEnd=L}}function Tn(e,t){function n(t,n){var i=Math.cos(t),r=Math.cos(n),a=e(i*r);return[a*r*Math.sin(t),a*Math.sin(n)]}return n.invert=function(e,n){var i=Math.sqrt(e*e+n*n),r=t(i),a=Math.sin(r),s=Math.cos(r);return[Math.atan2(e*a,i*s),Math.asin(i&&n*a/i)]},n}function Mn(e,t){function n(e,t){s>0?-js+Ps>t&&(t=-js+Ps):t>js-Ps&&(t=js-Ps);var n=s/Math.pow(r(t),a);return[n*Math.sin(a*e),s-n*Math.cos(a*e)]}var i=Math.cos(e),r=function(e){return Math.tan(Ys/4+e/2)},a=e===t?Math.sin(e):Math.log(i/Math.cos(t))/Math.log(r(t)/r(e)),s=i*Math.pow(r(e),a)/a;return a?(n.invert=function(e,t){var n=s-t,i=ne(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(s/i,1/a))-js]},n):Cn}function An(e,t){function n(e,t){var n=a-t;return[n*Math.sin(r*e),a-n*Math.cos(r*e)]}var i=Math.cos(e),r=e===t?Math.sin(e):(i-Math.cos(t))/(t-e),a=i/r+e;return bs(r)<Ps?hn:(n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,a-ne(r)*Math.sqrt(e*e+n*n)]},n)}function Cn(e,t){return[e,Math.log(Math.tan(Ys/4+t/2))]}function Rn(e){var t,n=cn(e),i=n.scale,r=n.translate,a=n.clipExtent;return n.scale=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var s=a.apply(n,arguments);if(s===n){if(t=null==e){var o=Ys*i(),l=r();a([[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]])}}else t&&(s=null);return s},n.clipExtent(null)}function Dn(e,t){return[Math.log(Math.tan(Ys/4+t/2)),-e]}function In(e){return e[0]}function On(e){return e[1]}function Nn(e){for(var t=e.length,n=[0,1],i=2,r=2;t>r;r++){for(;i>1&&ie(e[n[i-2]],e[n[i-1]],e[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Fn(e,t){return e[0]-t[0]||e[1]-t[1]}function Bn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Pn(e,t,n,i){var r=e[0],a=n[0],s=t[0]-r,o=i[0]-a,l=e[1],u=n[1],c=t[1]-l,d=i[1]-u,f=(o*(l-u)-d*(r-a))/(d*s-o*c);return[r+f*s,l+f*c]}function Un(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Yn(){oi(this),this.edge=this.site=this.circle=null}function Hn(e){var t=fl.pop()||new Yn;return t.site=e,t}function Gn(e){Zn(e),ul.remove(e),fl.push(e),oi(e)}function jn(e){var t=e.circle,n=t.x,i=t.cy,r={x:n,y:i},a=e.P,s=e.N,o=[e];Gn(e);for(var l=a;l.circle&&bs(n-l.circle.x)<Ps&&bs(i-l.circle.cy)<Ps;)a=l.P,o.unshift(l),Gn(l),l=a;o.unshift(l),Zn(l);for(var u=s;u.circle&&bs(n-u.circle.x)<Ps&&bs(i-u.circle.cy)<Ps;)s=u.N,o.push(u),Gn(u),u=s;o.push(u),Zn(u);var c,d=o.length;for(c=1;d>c;++c)u=o[c],l=o[c-1],ri(u.edge,l.site,u.site,r);l=o[0],u=o[d-1],u.edge=ni(l.site,u.site,null,r),Xn(l),Xn(u)}function Vn(e){for(var t,n,i,r,a=e.x,s=e.y,o=ul._;o;)if(i=zn(o,s)-a,i>Ps)o=o.L;else{if(r=a-$n(o,s),!(r>Ps)){i>-Ps?(t=o.P,n=o):r>-Ps?(t=o,n=o.N):t=n=o;break}if(!o.R){t=o;break}o=o.R}var l=Hn(e);if(ul.insert(t,l),t||n){if(t===n)return Zn(t),n=Hn(t.site),ul.insert(l,n),l.edge=n.edge=ni(t.site,l.site),Xn(t),Xn(n),void 0;if(!n)return l.edge=ni(t.site,l.site),void 0;Zn(t),Zn(n);var u=t.site,c=u.x,d=u.y,f=e.x-c,h=e.y-d,p=n.site,m=p.x-c,_=p.y-d,g=2*(f*_-h*m),v=f*f+h*h,y=m*m+_*_,b={x:(_*v-h*y)/g+c,y:(f*y-m*v)/g+d};ri(n.edge,u,p,b),l.edge=ni(u,e,null,b),n.edge=ni(e,p,null,b),Xn(t),Xn(n)}}function zn(e,t){var n=e.site,i=n.x,r=n.y,a=r-t;if(!a)return i;var s=e.P;if(!s)return-1/0;n=s.site;var o=n.x,l=n.y,u=l-t;if(!u)return o;var c=o-i,d=1/a-1/u,f=c/u;return d?(-f+Math.sqrt(f*f-2*d*(c*c/(-2*u)-l+u/2+r-a/2)))/d+i:(i+o)/2}function $n(e,t){var n=e.N;if(n)return zn(n,t);var i=e.site;return i.y===t?i.x:1/0}function qn(e){this.site=e,this.edges=[]}function Wn(e){for(var t,n,i,r,a,s,o,l,u,c,d=e[0][0],f=e[1][0],h=e[0][1],p=e[1][1],m=ll,_=m.length;_--;)if(a=m[_],a&&a.prepare())for(o=a.edges,l=o.length,s=0;l>s;)c=o[s].end(),i=c.x,r=c.y,u=o[++s%l].start(),t=u.x,n=u.y,(bs(i-t)>Ps||bs(r-n)>Ps)&&(o.splice(s,0,new ai(ii(a.site,c,bs(i-d)<Ps&&p-r>Ps?{x:d,y:bs(t-d)<Ps?n:p}:bs(r-p)<Ps&&f-i>Ps?{x:bs(n-p)<Ps?t:f,y:p}:bs(i-f)<Ps&&r-h>Ps?{x:f,y:bs(t-f)<Ps?n:h}:bs(r-h)<Ps&&i-d>Ps?{x:bs(n-h)<Ps?t:d,y:h}:null),a.site,null)),++l)}function Kn(e,t){return t.angle-e.angle}function Jn(){oi(this),this.x=this.y=this.arc=this.site=this.cy=null}function Xn(e){var t=e.P,n=e.N;if(t&&n){var i=t.site,r=e.site,a=n.site;if(i!==a){var s=r.x,o=r.y,l=i.x-s,u=i.y-o,c=a.x-s,d=a.y-o,f=2*(l*d-u*c);if(!(f>=-Us)){var h=l*l+u*u,p=c*c+d*d,m=(d*h-u*p)/f,_=(l*p-c*h)/f,d=_+o,g=hl.pop()||new Jn;g.arc=e,g.site=r,g.x=m+s,g.y=d+Math.sqrt(m*m+_*_),g.cy=d,e.circle=g;for(var v=null,y=dl._;y;)if(g.y<y.y||g.y===y.y&&g.x<=y.x){if(!y.L){v=y.P;break}y=y.L}else{if(!y.R){v=y;break}y=y.R}dl.insert(v,g),v||(cl=g)}}}}function Zn(e){var t=e.circle;t&&(t.P||(cl=t.N),dl.remove(t),hl.push(t),oi(t),e.circle=null)}function Qn(e){for(var t,n=ol,i=$t(e[0][0],e[0][1],e[1][0],e[1][1]),r=n.length;r--;)t=n[r],(!ei(t,e)||!i(t)||bs(t.a.x-t.b.x)<Ps&&bs(t.a.y-t.b.y)<Ps)&&(t.a=t.b=null,n.splice(r,1))}function ei(e,t){var n=e.b;if(n)return!0;var i,r,a=e.a,s=t[0][0],o=t[1][0],l=t[0][1],u=t[1][1],c=e.l,d=e.r,f=c.x,h=c.y,p=d.x,m=d.y,_=(f+p)/2,g=(h+m)/2;if(m===h){if(s>_||_>=o)return;if(f>p){if(a){if(a.y>=u)return}else a={x:_,y:l};n={x:_,y:u}}else{if(a){if(a.y<l)return}else a={x:_,y:u};n={x:_,y:l}}}else if(i=(f-p)/(m-h),r=g-i*_,-1>i||i>1)if(f>p){if(a){if(a.y>=u)return}else a={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else{if(a){if(a.y<l)return}else a={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else if(m>h){if(a){if(a.x>=o)return}else a={x:s,y:i*s+r};n={x:o,y:i*o+r}}else{if(a){if(a.x<s)return}else a={x:o,y:i*o+r};n={x:s,y:i*s+r}}return e.a=a,e.b=n,!0}function ti(e,t){this.l=e,this.r=t,this.a=this.b=null}function ni(e,t,n,i){var r=new ti(e,t);return ol.push(r),n&&ri(r,e,t,n),i&&ri(r,t,e,i),ll[e.i].edges.push(new ai(r,e,t)),ll[t.i].edges.push(new ai(r,t,e)),r}function ii(e,t,n){var i=new ti(e,null);return i.a=t,i.b=n,ol.push(i),i}function ri(e,t,n,i){e.a||e.b?e.l===n?e.b=i:e.a=i:(e.a=i,e.l=t,e.r=n)}function ai(e,t,n){var i=e.a,r=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function si(){this._=null}function oi(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function li(e,t){var n=t,i=t.R,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function ui(e,t){var n=t,i=t.L,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function ci(e){for(;e.L;)e=e.L;return e}function di(e,t){var n,i,r,a=e.sort(fi).pop();for(ol=[],ll=new Array(e.length),ul=new si,dl=new si;;)if(r=cl,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x))(a.x!==n||a.y!==i)&&(ll[a.i]=new qn(a),Vn(a),n=a.x,i=a.y),a=e.pop();else{if(!r)break;jn(r.arc)}t&&(Qn(t),Wn(t));var s={cells:ll,edges:ol};return ul=dl=ol=ll=null,s}function fi(e,t){return t.y-e.y||t.x-e.x}function hi(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function pi(e){return e.x}function mi(e){return e.y}function _i(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gi(e,t,n,i,r,a){if(!e(t,n,i,r,a)){var s=.5*(n+r),o=.5*(i+a),l=t.nodes;l[0]&&gi(e,l[0],n,i,s,o),l[1]&&gi(e,l[1],s,i,r,o),l[2]&&gi(e,l[2],n,o,s,a),l[3]&&gi(e,l[3],s,o,r,a)}}function vi(e,t,n,i,r,a,s){var o,l=1/0;return function u(e,c,d,f,h){if(!(c>a||d>s||i>f||r>h)){if(p=e.point){var p,m=t-p[0],_=n-p[1],g=m*m+_*_;if(l>g){var v=Math.sqrt(l=g);i=t-v,r=n-v,a=t+v,s=n+v,o=p}}for(var y=e.nodes,b=.5*(c+f),x=.5*(d+h),w=t>=b,L=n>=x,S=L<<1|w,E=S+4;E>S;++S)if(e=y[3&S])switch(3&S){case 0:u(e,c,d,b,x);break;case 1:u(e,b,d,f,x);break;case 2:u(e,c,x,b,h);break;case 3:u(e,b,x,f,h)}}}(e,i,r,a,s),o}function yi(e,t){e=ss.rgb(e),t=ss.rgb(t);var n=e.r,i=e.g,r=e.b,a=t.r-n,s=t.g-i,o=t.b-r;return function(e){return"#"+Se(Math.round(n+a*e))+Se(Math.round(i+s*e))+Se(Math.round(r+o*e))}}function bi(e,t){var n,i={},r={};for(n in e)n in t?i[n]=Li(e[n],t[n]):r[n]=e[n];for(n in t)n in e||(r[n]=t[n]);return function(e){for(n in i)r[n]=i[n](e);return r}}function xi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wi(e,t){var n,i,r,a=ml.lastIndex=_l.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(n=ml.exec(e))&&(i=_l.exec(t));)(r=i.index)>a&&(r=t.slice(a,r),o[s]?o[s]+=r:o[++s]=r),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:xi(n,i)})),a=_l.lastIndex;return a<t.length&&(r=t.slice(a),o[s]?o[s]+=r:o[++s]=r),o.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,i=0;t>i;++i)o[(n=l[i]).i]=n.x(e);return o.join("")})}function Li(e,t){for(var n,i=ss.interpolators.length;--i>=0&&!(n=ss.interpolators[i](e,t)););return n}function Si(e,t){var n,i=[],r=[],a=e.length,s=t.length,o=Math.min(e.length,t.length);for(n=0;o>n;++n)i.push(Li(e[n],t[n]));for(;a>n;++n)r[n]=e[n];for(;s>n;++n)r[n]=t[n];return function(e){for(n=0;o>n;++n)r[n]=i[n](e);return r}}function Ei(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function ki(e){return function(t){return 1-e(1-t)}}function Ti(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Mi(e){return e*e}function Ai(e){return e*e*e}function Ci(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Ri(e){return function(t){return Math.pow(t,e)}}function Di(e){return 1-Math.cos(e*js)}function Ii(e){return Math.pow(2,10*(e-1))}function Oi(e){return 1-Math.sqrt(1-e*e)}function Ni(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Hs*Math.asin(1/e):(e=1,n=t/4),function(i){return 1+e*Math.pow(2,-10*i)*Math.sin((i-n)*Hs/t)}}function Fi(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Bi(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Pi(e,t){e=ss.hcl(e),t=ss.hcl(t);var n=e.h,i=e.c,r=e.l,a=t.h-n,s=t.c-i,o=t.l-r;return isNaN(s)&&(s=0,i=isNaN(i)?t.c:i),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return pe(n+a*e,i+s*e,r+o*e)+""}}function Ui(e,t){e=ss.hsl(e),t=ss.hsl(t);var n=e.h,i=e.s,r=e.l,a=t.h-n,s=t.s-i,o=t.l-r;return isNaN(s)&&(s=0,i=isNaN(i)?t.s:i),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return fe(n+a*e,i+s*e,r+o*e)+""}}function Yi(e,t){e=ss.lab(e),t=ss.lab(t);var n=e.l,i=e.a,r=e.b,a=t.l-n,s=t.a-i,o=t.b-r;return function(e){return _e(n+a*e,i+s*e,r+o*e)+""}}function Hi(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Gi(e){var t=[e.a,e.b],n=[e.c,e.d],i=Vi(t),r=ji(t,n),a=Vi(zi(n,t,-r))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*zs,this.translate=[e.e,e.f],this.scale=[i,a],this.skew=a?Math.atan2(r,a)*zs:0}function ji(e,t){return e[0]*t[0]+e[1]*t[1]}function Vi(e){var t=Math.sqrt(ji(e,e));return t&&(e[0]/=t,e[1]/=t),t}function zi(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function $i(e,t){var n,i=[],r=[],a=ss.transform(e),s=ss.transform(t),o=a.translate,l=s.translate,u=a.rotate,c=s.rotate,d=a.skew,f=s.skew,h=a.scale,p=s.scale;return o[0]!=l[0]||o[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:xi(o[0],l[0])},{i:3,x:xi(o[1],l[1])})):l[0]||l[1]?i.push("translate("+l+")"):i.push(""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:xi(u,c)})):c&&i.push(i.pop()+"rotate("+c+")"),d!=f?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:xi(d,f)}):f&&i.push(i.pop()+"skewX("+f+")"),h[0]!=p[0]||h[1]!=p[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:xi(h[0],p[0])},{i:n-2,x:xi(h[1],p[1])})):(1!=p[0]||1!=p[1])&&i.push(i.pop()+"scale("+p+")"),n=r.length,function(e){for(var t,a=-1;++a<n;)i[(t=r[a]).i]=t.x(e);return i.join("")}}function qi(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Wi(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Ki(e){for(var t=e.source,n=e.target,i=Xi(t,n),r=[t];t!==i;)t=t.parent,r.push(t);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function Ji(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Xi(e,t){if(e===t)return e;for(var n=Ji(e),i=Ji(t),r=n.pop(),a=i.pop(),s=null;r===a;)s=r,r=n.pop(),a=i.pop();return s}function Zi(e){e.fixed|=2}function Qi(e){e.fixed&=-7}function er(e){e.fixed|=4,e.px=e.x,e.py=e.y}function tr(e){e.fixed&=-5}function nr(e,t,n){var i=0,r=0;if(e.charge=0,!e.leaf)for(var a,s=e.nodes,o=s.length,l=-1;++l<o;)a=s[l],null!=a&&(nr(a,t,n),e.charge+=a.charge,i+=a.charge*a.cx,r+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=t*n[e.point.index];e.charge+=e.pointCharge=u,i+=u*e.point.x,r+=u*e.point.y}e.cx=i/e.charge,e.cy=r/e.charge}function ir(e,t){return ss.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=ur,e}function rr(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(r=e.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function ar(e,t){for(var n=[e],i=[];null!=(e=n.pop());)if(i.push(e),(a=e.children)&&(r=a.length))for(var r,a,s=-1;++s<r;)n.push(a[s]);for(;null!=(e=i.pop());)t(e)}function sr(e){return e.children}function or(e){return e.value}function lr(e,t){return t.value-e.value}function ur(e){return ss.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function cr(e){return e.x}function dr(e){return e.y}function fr(e,t,n){e.y0=t,e.y=n}function hr(e){return ss.range(e.length)}function pr(e){for(var t=-1,n=e[0].length,i=[];++t<n;)i[t]=0;return i}function mr(e){for(var t,n=1,i=0,r=e[0][1],a=e.length;a>n;++n)(t=e[n][1])>r&&(i=n,r=t);return i}function _r(e){return e.reduce(gr,0)}function gr(e,t){return e+t[1]}function vr(e,t){return yr(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function yr(e,t){for(var n=-1,i=+e[0],r=(e[1]-i)/t,a=[];++n<=t;)a[n]=r*n+i;return a}function br(e){return[ss.min(e),ss.max(e)]}function xr(e,t){return e.value-t.value}function wr(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Lr(e,t){e._pack_next=t,t._pack_prev=e}function Sr(e,t){var n=t.x-e.x,i=t.y-e.y,r=e.r+t.r;return.999*r*r>n*n+i*i}function Er(e){function t(e){c=Math.min(e.x-e.r,c),d=Math.max(e.x+e.r,d),f=Math.min(e.y-e.r,f),h=Math.max(e.y+e.r,h)}if((n=e.children)&&(u=n.length)){var n,i,r,a,s,o,l,u,c=1/0,d=-1/0,f=1/0,h=-1/0;if(n.forEach(kr),i=n[0],i.x=-i.r,i.y=0,t(i),u>1&&(r=n[1],r.x=r.r,r.y=0,t(r),u>2))for(a=n[2],Ar(i,r,a),t(a),wr(i,a),i._pack_prev=a,wr(a,r),r=i._pack_next,s=3;u>s;s++){Ar(i,r,a=n[s]);var p=0,m=1,_=1;for(o=r._pack_next;o!==r;o=o._pack_next,m++)if(Sr(o,a)){p=1;break}if(1==p)for(l=i._pack_prev;l!==o._pack_prev&&!Sr(l,a);l=l._pack_prev,_++);p?(_>m||m==_&&r.r<i.r?Lr(i,r=o):Lr(i=l,r),s--):(wr(i,a),r=a,t(a))}var g=(c+d)/2,v=(f+h)/2,y=0;for(s=0;u>s;s++)a=n[s],a.x-=g,a.y-=v,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=y,n.forEach(Tr)}}function kr(e){e._pack_next=e._pack_prev=e}function Tr(e){delete e._pack_next,delete e._pack_prev}function Mr(e,t,n,i){var r=e.children;if(e.x=t+=i*e.x,e.y=n+=i*e.y,e.r*=i,r)for(var a=-1,s=r.length;++a<s;)Mr(r[a],t,n,i)}function Ar(e,t,n){var i=e.r+n.r,r=t.x-e.x,a=t.y-e.y;if(i&&(r||a)){var s=t.r+n.r,o=r*r+a*a;s*=s,i*=i;var l=.5+(i-s)/(2*o),u=Math.sqrt(Math.max(0,2*s*(i+o)-(i-=o)*i-s*s))/(2*o);n.x=e.x+l*r+u*a,n.y=e.y+l*a-u*r}else n.x=e.x+i,n.y=e.y}function Cr(e,t){return e.parent==t.parent?1:2}function Rr(e){var t=e.children;return t.length?t[0]:e.t}function Dr(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Ir(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Or(e){for(var t,n=0,i=0,r=e.children,a=r.length;--a>=0;)t=r[a],t.z+=n,t.m+=n,n+=t.s+(i+=t.c)}function Nr(e,t,n){return e.a.parent===t.parent?e.a:n}function Fr(e){return 1+ss.max(e,function(e){return e.y})}function Br(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Pr(e){var t=e.children;return t&&t.length?Pr(t[0]):e}function Ur(e){var t,n=e.children;return n&&(t=n.length)?Ur(n[t-1]):e}function Yr(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Hr(e,t){var n=e.x+t[3],i=e.y+t[0],r=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return 0>r&&(n+=r/2,r=0),0>a&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function Gr(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function jr(e){return e.rangeExtent?e.rangeExtent():Gr(e.range())}function Vr(e,t,n,i){var r=n(e[0],e[1]),a=i(t[0],t[1]);return function(e){return a(r(e))}}function zr(e,t){var n,i=0,r=e.length-1,a=e[i],s=e[r];return a>s&&(n=i,i=r,r=n,n=a,a=s,s=n),e[i]=t.floor(a),e[r]=t.ceil(s),e}function $r(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Tl}function qr(e,t,n,i){var r=[],a=[],s=0,o=Math.min(e.length,t.length)-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<=o;)r.push(n(e[s-1],e[s])),a.push(i(t[s-1],t[s]));return function(t){var n=ss.bisect(e,t,1,o)-1;return a[n](r[n](t))}}function Wr(e,t,n,i){function r(){var r=Math.min(e.length,t.length)>2?qr:Vr,l=i?Wi:qi;return s=r(e,t,l,n),o=r(t,e,l,Li),a}function a(e){return s(e)}var s,o;return a.invert=function(e){return o(e)},a.domain=function(t){return arguments.length?(e=t.map(Number),r()):e},a.range=function(e){return arguments.length?(t=e,r()):t},a.rangeRound=function(e){return a.range(e).interpolate(Hi)},a.clamp=function(e){return arguments.length?(i=e,r()):i},a.interpolate=function(e){return arguments.length?(n=e,r()):n},a.ticks=function(t){return Zr(e,t)},a.tickFormat=function(t,n){return Qr(e,t,n)},a.nice=function(t){return Jr(e,t),r()},a.copy=function(){return Wr(e,t,n,i)},r()}function Kr(e,t){return ss.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Jr(e,t){return zr(e,$r(Xr(e,t)[2]))}function Xr(e,t){null==t&&(t=10);var n=Gr(e),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),a=t/i*r;return.15>=a?r*=10:.35>=a?r*=5:.75>=a&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Zr(e,t){return ss.range.apply(ss,Xr(e,t))}function Qr(e,t,n){var i=Xr(e,t);if(n){var r=mo.exec(n);if(r.shift(),"s"===r[8]){var a=ss.formatPrefix(Math.max(bs(i[0]),bs(i[1])));return r[7]||(r[7]="."+ea(a.scale(i[2]))),r[8]="f",n=ss.format(r.join("")),function(e){return n(a.scale(e))+a.symbol}}r[7]||(r[7]="."+ta(r[8],i)),n=r.join("")}else n=",."+ea(i[2])+"f";return ss.format(n)}function ea(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function ta(e,t){var n=ea(t[2]);return e in Ml?Math.abs(n-ea(Math.max(bs(t[0]),bs(t[1]))))+ +("e"!==e):n-2*("%"===e)}function na(e,t,n,i){function r(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function s(t){return e(r(t))}return s.invert=function(t){return a(e.invert(t))},s.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((i=t.map(Number)).map(r)),s):i},s.base=function(n){return arguments.length?(t=+n,e.domain(i.map(r)),s):t},s.nice=function(){var t=zr(i.map(r),n?Math:Cl);return e.domain(t),i=t.map(a),s},s.ticks=function(){var e=Gr(i),s=[],o=e[0],l=e[1],u=Math.floor(r(o)),c=Math.ceil(r(l)),d=t%1?2:t;if(isFinite(c-u)){if(n){for(;c>u;u++)for(var f=1;d>f;f++)s.push(a(u)*f);s.push(a(u))}else for(s.push(a(u));u++<c;)for(var f=d-1;f>0;f--)s.push(a(u)*f);for(u=0;s[u]<o;u++);for(c=s.length;s[c-1]>l;c--);s=s.slice(u,c)}return s},s.tickFormat=function(e,t){if(!arguments.length)return Al;arguments.length<2?t=Al:"function"!=typeof t&&(t=ss.format(t));var i,o=Math.max(.1,e/s.ticks().length),l=n?(i=1e-12,Math.ceil):(i=-1e-12,Math.floor);return function(e){return e/a(l(r(e)+i))<=o?t(e):""}},s.copy=function(){return na(e.copy(),t,n,i)},Kr(s,e)}function ia(e,t,n){function i(t){return e(r(t))}var r=ra(t),a=ra(1/t);return i.invert=function(t){return a(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),i):n},i.ticks=function(e){return Zr(n,e)},i.tickFormat=function(e,t){return Qr(n,e,t)},i.nice=function(e){return i.domain(Jr(n,e))},i.exponent=function(s){return arguments.length?(r=ra(t=s),a=ra(1/t),e.domain(n.map(r)),i):t},i.copy=function(){return ia(e.copy(),t,n)},Kr(i,e)}function ra(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function aa(e,t){function n(n){return a[((r.get(n)||("range"===t.t?r.set(n,e.push(n)):0/0))-1)%a.length]}function i(t,n){return ss.range(e.length).map(function(e){return t+n*e})}var r,a,s;return n.domain=function(i){if(!arguments.length)return e;e=[],r=new f;for(var a,s=-1,o=i.length;++s<o;)r.has(a=i[s])||r.set(a,e.push(a));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(a=e,s=0,t={t:"range",a:arguments},n):a},n.rangePoints=function(r,o){arguments.length<2&&(o=0);var l=r[0],u=r[1],c=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+o);return a=i(l+c*o/2,c),s=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(r,o){arguments.length<2&&(o=0);var l=r[0],u=r[1],c=e.length<2?(l=u=Math.round((l+u)/2),0):0|(u-l)/(e.length-1+o);return a=i(l+Math.round(c*o/2+(u-l-(e.length-1+o)*c)/2),c),s=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(r,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var u=r[1]<r[0],c=r[u-0],d=r[1-u],f=(d-c)/(e.length-o+2*l);return a=i(c+f*l,f),u&&a.reverse(),s=f*(1-o),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var u=r[1]<r[0],c=r[u-0],d=r[1-u],f=Math.floor((d-c)/(e.length-o+2*l));return a=i(c+Math.round((d-c-(e.length-o)*f)/2),f),u&&a.reverse(),s=Math.round(f*(1-o)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return s},n.rangeExtent=function(){return Gr(t.a[0])},n.copy=function(){return aa(e,t)},n.domain(e)}function sa(e,t){function n(){var n=0,a=t.length;for(r=[];++n<a;)r[n-1]=ss.quantile(e,n/a);return i}function i(e){return isNaN(e=+e)?void 0:t[ss.bisect(r,e)]}var r;return i.domain=function(t){return arguments.length?(e=t.map(s).filter(o).sort(a),n()):e},i.range=function(e){return arguments.length?(t=e,n()):t},i.quantiles=function(){return r},i.invertExtent=function(n){return n=t.indexOf(n),0>n?[0/0,0/0]:[n>0?r[n-1]:e[0],n<r.length?r[n]:e[e.length-1]]},i.copy=function(){return sa(e,t)},n()}function oa(e,t,n){function i(t){return n[Math.max(0,Math.min(s,Math.floor(a*(t-e))))]}function r(){return a=n.length/(t-e),s=n.length-1,i}var a,s;return i.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],r()):[e,t]},i.range=function(e){return arguments.length?(n=e,r()):n},i.invertExtent=function(t){return t=n.indexOf(t),t=0>t?0/0:t/a+e,[t,t+1/a]},i.copy=function(){return oa(e,t,n)},r()}function la(e,t){function n(n){return n>=n?t[ss.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return la(e,t)},n}function ua(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Zr(e,t)},t.tickFormat=function(t,n){return Qr(e,t,n)},t.copy=function(){return ua(e)},t}function ca(){return 0}function da(e){return e.innerRadius}function fa(e){return e.outerRadius}function ha(e){return e.startAngle}function pa(e){return e.endAngle}function ma(e){return e&&e.padAngle}function _a(e,t,n,i){return(e-n)*t-(t-i)*e>0?0:1}function ga(e,t,n,i,r){var a=e[0]-t[0],s=e[1]-t[1],o=(r?i:-i)/Math.sqrt(a*a+s*s),l=o*s,u=-o*a,c=e[0]+l,d=e[1]+u,f=t[0]+l,h=t[1]+u,p=(c+f)/2,m=(d+h)/2,_=f-c,g=h-d,v=_*_+g*g,y=n-i,b=c*h-f*d,x=(0>g?-1:1)*Math.sqrt(y*y*v-b*b),w=(b*g-_*x)/v,L=(-b*_-g*x)/v,S=(b*g+_*x)/v,E=(-b*_+g*x)/v,k=w-p,T=L-m,M=S-p,A=E-m;return k*k+T*T>M*M+A*A&&(w=S,L=E),[[w-l,L-u],[w*n/y,L*n/y]]}function va(e){function t(t){function s(){u.push("M",a(e(c),o))}for(var l,u=[],c=[],d=-1,f=t.length,h=Ce(n),p=Ce(i);++d<f;)r.call(this,l=t[d],d)?c.push([+h.call(this,l,d),+p.call(this,l,d)]):c.length&&(s(),c=[]);return c.length&&s(),u.length?u.join(""):null}var n=In,i=On,r=It,a=ya,s=a.key,o=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(r=e,t):r},t.interpolate=function(e){return arguments.length?(s="function"==typeof e?a=e:(a=Fl.get(e)||ya).key,t):s},t.tension=function(e){return arguments.length?(o=e,t):o},t}function ya(e){return e.join("L")}function ba(e){return ya(e)+"Z"}function xa(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("H",(i[0]+(i=e[t])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")}function wa(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("V",(i=e[t])[1],"H",i[0]);return r.join("")}function La(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("H",(i=e[t])[0],"V",i[1]);return r.join("")}function Sa(e,t){return e.length<4?ya(e):e[1]+Ta(e.slice(1,-1),Ma(e,t))}function Ea(e,t){return e.length<3?ya(e):e[0]+Ta((e.push(e[0]),e),Ma([e[e.length-2]].concat(e,[e[1]]),t))}function ka(e,t){return e.length<3?ya(e):e[0]+Ta(e,Ma(e,t))}function Ta(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return ya(e);

var n=e.length!=t.length,i="",r=e[0],a=e[1],s=t[0],o=s,l=1;if(n&&(i+="Q"+(a[0]-2*s[0]/3)+","+(a[1]-2*s[1]/3)+","+a[0]+","+a[1],r=e[1],l=2),t.length>1){o=t[1],a=e[l],l++,i+="C"+(r[0]+s[0])+","+(r[1]+s[1])+","+(a[0]-o[0])+","+(a[1]-o[1])+","+a[0]+","+a[1];for(var u=2;u<t.length;u++,l++)a=e[l],o=t[u],i+="S"+(a[0]-o[0])+","+(a[1]-o[1])+","+a[0]+","+a[1]}if(n){var c=e[l];i+="Q"+(a[0]+2*o[0]/3)+","+(a[1]+2*o[1]/3)+","+c[0]+","+c[1]}return i}function Ma(e,t){for(var n,i=[],r=(1-t)/2,a=e[0],s=e[1],o=1,l=e.length;++o<l;)n=a,a=s,s=e[o],i.push([r*(s[0]-n[0]),r*(s[1]-n[1])]);return i}function Aa(e){if(e.length<3)return ya(e);var t=1,n=e.length,i=e[0],r=i[0],a=i[1],s=[r,r,r,(i=e[1])[0]],o=[a,a,a,i[1]],l=[r,",",a,"L",Ia(Ul,s),",",Ia(Ul,o)];for(e.push(e[n-1]);++t<=n;)i=e[t],s.shift(),s.push(i[0]),o.shift(),o.push(i[1]),Oa(l,s,o);return e.pop(),l.push("L",i),l.join("")}function Ca(e){if(e.length<4)return ya(e);for(var t,n=[],i=-1,r=e.length,a=[0],s=[0];++i<3;)t=e[i],a.push(t[0]),s.push(t[1]);for(n.push(Ia(Ul,a)+","+Ia(Ul,s)),--i;++i<r;)t=e[i],a.shift(),a.push(t[0]),s.shift(),s.push(t[1]),Oa(n,a,s);return n.join("")}function Ra(e){for(var t,n,i=-1,r=e.length,a=r+4,s=[],o=[];++i<4;)n=e[i%r],s.push(n[0]),o.push(n[1]);for(t=[Ia(Ul,s),",",Ia(Ul,o)],--i;++i<a;)n=e[i%r],s.shift(),s.push(n[0]),o.shift(),o.push(n[1]),Oa(t,s,o);return t.join("")}function Da(e,t){var n=e.length-1;if(n)for(var i,r,a=e[0][0],s=e[0][1],o=e[n][0]-a,l=e[n][1]-s,u=-1;++u<=n;)i=e[u],r=u/n,i[0]=t*i[0]+(1-t)*(a+r*o),i[1]=t*i[1]+(1-t)*(s+r*l);return Aa(e)}function Ia(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Oa(e,t,n){e.push("C",Ia(Bl,t),",",Ia(Bl,n),",",Ia(Pl,t),",",Ia(Pl,n),",",Ia(Ul,t),",",Ia(Ul,n))}function Na(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Fa(e){for(var t=0,n=e.length-1,i=[],r=e[0],a=e[1],s=i[0]=Na(r,a);++t<n;)i[t]=(s+(s=Na(r=a,a=e[t+1])))/2;return i[t]=s,i}function Ba(e){for(var t,n,i,r,a=[],s=Fa(e),o=-1,l=e.length-1;++o<l;)t=Na(e[o],e[o+1]),bs(t)<Ps?s[o]=s[o+1]=0:(n=s[o]/t,i=s[o+1]/t,r=n*n+i*i,r>9&&(r=3*t/Math.sqrt(r),s[o]=r*n,s[o+1]=r*i));for(o=-1;++o<=l;)r=(e[Math.min(l,o+1)][0]-e[Math.max(0,o-1)][0])/(6*(1+s[o]*s[o])),a.push([r||0,s[o]*r||0]);return a}function Pa(e){return e.length<3?ya(e):e[0]+Ta(e,Ba(e))}function Ua(e){for(var t,n,i,r=-1,a=e.length;++r<a;)t=e[r],n=t[0],i=t[1]-js,t[0]=n*Math.cos(i),t[1]=n*Math.sin(i);return e}function Ya(e){function t(t){function l(){m.push("M",o(e(g),d),c,u(e(_.reverse()),d),"Z")}for(var f,h,p,m=[],_=[],g=[],v=-1,y=t.length,b=Ce(n),x=Ce(r),w=n===i?function(){return h}:Ce(i),L=r===a?function(){return p}:Ce(a);++v<y;)s.call(this,f=t[v],v)?(_.push([h=+b.call(this,f,v),p=+x.call(this,f,v)]),g.push([+w.call(this,f,v),+L.call(this,f,v)])):_.length&&(l(),_=[],g=[]);return _.length&&l(),m.length?m.join(""):null}var n=In,i=In,r=0,a=On,s=It,o=ya,l=o.key,u=o,c="L",d=.7;return t.x=function(e){return arguments.length?(n=i=e,t):i},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(r=a=e,t):a},t.y0=function(e){return arguments.length?(r=e,t):r},t.y1=function(e){return arguments.length?(a=e,t):a},t.defined=function(e){return arguments.length?(s=e,t):s},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?o=e:(o=Fl.get(e)||ya).key,u=o.reverse||o,c=o.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(d=e,t):d},t}function Ha(e){return e.radius}function Ga(e){return[e.x,e.y]}function ja(e){return function(){var t=e.apply(this,arguments),n=t[0],i=t[1]-js;return[n*Math.cos(i),n*Math.sin(i)]}}function Va(){return 64}function za(){return"circle"}function $a(e){var t=Math.sqrt(e/Ys);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function qa(e){return function(){var t,n;(t=this[e])&&(n=t[t.active])&&(--t.count?(delete t[t.active],t.active+=.5):delete this[e],n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Wa(e,t,n){return Es(e,$l),e.namespace=t,e.id=n,e}function Ka(e,t,n,i){var r=e.id,a=e.namespace;return z(e,"function"==typeof n?function(e,s,o){e[a][r].tween.set(t,i(n.call(e,e.__data__,s,o)))}:(n=i(n),function(e){e[a][r].tween.set(t,n)}))}function Ja(e){return null==e&&(e=""),function(){this.textContent=e}}function Xa(e){return null==e?"__transition__":"__transition_"+e+"__"}function Za(e,t,n,i,r){var a=e[n]||(e[n]={active:0,count:0}),s=a[i];if(!s){var o=r.time;s=a[i]={tween:new f,time:o,delay:r.delay,duration:r.duration,ease:r.ease,index:t},r=null,++a.count,ss.timer(function(r){function l(n){if(a.active>i)return c();var r=a[a.active];r&&(--a.count,delete a[a.active],r.event&&r.event.interrupt.call(e,e.__data__,r.index)),a.active=i,s.event&&s.event.start.call(e,e.__data__,t),s.tween.forEach(function(n,i){(i=i.call(e,e.__data__,t))&&m.push(i)}),f=s.ease,d=s.duration,ss.timer(function(){return p.c=u(n||1)?It:u,1},0,o)}function u(n){if(a.active!==i)return 1;for(var r=n/d,o=f(r),l=m.length;l>0;)m[--l].call(e,o);return r>=1?(s.event&&s.event.end.call(e,e.__data__,t),c()):void 0}function c(){return--a.count?delete a[i]:delete e[n],1}var d,f,h=s.delay,p=fo,m=[];return p.t=h+o,r>=h?l(r-h):(p.c=l,void 0)},0,o)}}function Qa(e,t,n){e.attr("transform",function(e){var i=t(e);return"translate("+(isFinite(i)?i:n(e))+",0)"})}function es(e,t,n){e.attr("transform",function(e){var i=t(e);return"translate(0,"+(isFinite(i)?i:n(e))+")"})}function ts(e){return e.toISOString()}function ns(e,t,n){function i(t){return e(t)}function r(e,n){var i=e[1]-e[0],r=i/n,a=ss.bisect(tu,r);return a==tu.length?[t.year,Xr(e.map(function(e){return e/31536e6}),n)[2]]:a?t[r/tu[a-1]<tu[a]/r?a-1:a]:[ru,Xr(e,n)[2]]}return i.invert=function(t){return is(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(is)},i.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,is(+n+1),t).length}var a=i.domain(),s=Gr(a),o=null==e?r(s,10):"number"==typeof e&&r(s,e);return o&&(e=o[0],t=o[1]),i.domain(zr(a,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=is(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=is(+t+1);return t}}:e))},i.ticks=function(e,t){var n=Gr(i.domain()),a=null==e?r(n,10):"number"==typeof e?r(n,e):!e.range&&[{range:e},t];return a&&(e=a[0],t=a[1]),e.range(n[0],is(+n[1]+1),1>t?1:t)},i.tickFormat=function(){return n},i.copy=function(){return ns(e.copy(),t,n)},Kr(i,e)}function is(e){return new Date(e)}function rs(e){return JSON.parse(e.responseText)}function as(e){var t=us.createRange();return t.selectNode(us.body),t.createContextualFragment(e.responseText)}var ss={version:"3.5.2"};Date.now||(Date.now=function(){return+new Date});var os=[].slice,ls=function(e){return os.call(e)},us=document,cs=us.documentElement,ds=window;try{ls(cs.childNodes)[0].nodeType}catch(fs){ls=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}try{us.createElement("div").style.setProperty("opacity",0,"")}catch(hs){var ps=ds.Element.prototype,ms=ps.setAttribute,_s=ps.setAttributeNS,gs=ds.CSSStyleDeclaration.prototype,vs=gs.setProperty;ps.setAttribute=function(e,t){ms.call(this,e,t+"")},ps.setAttributeNS=function(e,t,n){_s.call(this,e,t,n+"")},gs.setProperty=function(e,t,n){vs.call(this,e,t+"",n)}}ss.ascending=a,ss.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},ss.min=function(e,t){var n,i,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=e[r])&&n>i&&(n=i)}else{for(;++r<a;)if(null!=(i=t.call(e,e[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=t.call(e,e[r],r))&&n>i&&(n=i)}return n},ss.max=function(e,t){var n,i,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=e[r])&&i>n&&(n=i)}else{for(;++r<a;)if(null!=(i=t.call(e,e[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=t.call(e,e[r],r))&&i>n&&(n=i)}return n},ss.extent=function(e,t){var n,i,r,a=-1,s=e.length;if(1===arguments.length){for(;++a<s;)if(null!=(i=e[a])&&i>=i){n=r=i;break}for(;++a<s;)null!=(i=e[a])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++a<s;)if(null!=(i=t.call(e,e[a],a))&&i>=i){n=r=i;break}for(;++a<s;)null!=(i=t.call(e,e[a],a))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},ss.sum=function(e,t){var n,i=0,r=e.length,a=-1;if(1===arguments.length)for(;++a<r;)o(n=+e[a])&&(i+=n);else for(;++a<r;)o(n=+t.call(e,e[a],a))&&(i+=n);return i},ss.mean=function(e,t){var n,i=0,r=e.length,a=-1,l=r;if(1===arguments.length)for(;++a<r;)o(n=s(e[a]))?i+=n:--l;else for(;++a<r;)o(n=s(t.call(e,e[a],a)))?i+=n:--l;return l?i/l:void 0},ss.quantile=function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),r=+e[i-1],a=n-i;return a?r+a*(e[i]-r):r},ss.median=function(e,t){var n,i=[],r=e.length,l=-1;if(1===arguments.length)for(;++l<r;)o(n=s(e[l]))&&i.push(n);else for(;++l<r;)o(n=s(t.call(e,e[l],l)))&&i.push(n);return i.length?ss.quantile(i.sort(a),.5):void 0},ss.variance=function(e,t){var n,i,r=e.length,a=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<r;)o(n=s(e[u]))&&(i=n-a,a+=i/++c,l+=i*(n-a));else for(;++u<r;)o(n=s(t.call(e,e[u],u)))&&(i=n-a,a+=i/++c,l+=i*(n-a));return c>1?l/(c-1):void 0},ss.deviation=function(){var e=ss.variance.apply(this,arguments);return e?Math.sqrt(e):e};var ys=l(a);ss.bisectLeft=ys.left,ss.bisect=ss.bisectRight=ys.right,ss.bisector=function(e){return l(1===e.length?function(t,n){return a(e(t),n)}:e)},ss.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,2>a&&(t=0));for(var i,r,a=n-t;a;)r=0|Math.random()*a--,i=e[a+t],e[a+t]=e[r+t],e[r+t]=i;return e},ss.permute=function(e,t){for(var n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i},ss.pairs=function(e){for(var t,n=0,i=e.length-1,r=e[0],a=new Array(0>i?0:i);i>n;)a[n]=[t=r,r=e[++n]];return a},ss.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,t=ss.min(arguments,u),n=new Array(t);++e<t;)for(var i,r=-1,a=n[e]=new Array(i);++r<i;)a[r]=arguments[r][e];return n},ss.transpose=function(e){return ss.zip.apply(ss,e)},ss.keys=function(e){var t=[];for(var n in e)t.push(n);return t},ss.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},ss.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},ss.merge=function(e){for(var t,n,i,r=e.length,a=-1,s=0;++a<r;)s+=e[a].length;for(n=new Array(s);--r>=0;)for(i=e[r],t=i.length;--t>=0;)n[--s]=i[t];return n};var bs=Math.abs;ss.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),1/0===(t-e)/n)throw new Error("infinite range");var i,r=[],a=c(bs(n)),s=-1;if(e*=a,t*=a,n*=a,0>n)for(;(i=e+n*++s)>t;)r.push(i/a);else for(;(i=e+n*++s)<t;)r.push(i/a);return r},ss.map=function(e,t){var n=new f;if(e instanceof f)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var i,r=-1,a=e.length;if(1===arguments.length)for(;++r<a;)n.set(r,e[r]);else for(;++r<a;)n.set(t.call(e,i=e[r],r),i)}else for(var s in e)n.set(s,e[s]);return n};var xs="__proto__",ws="\x00";d(f,{has:m,get:function(e){return this._[h(e)]},set:function(e,t){return this._[h(e)]=t},remove:_,keys:g,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:p(t),value:this._[t]});return e},size:v,empty:y,forEach:function(e){for(var t in this._)e.call(this,p(t),this._[t])}}),ss.nest=function(){function e(t,s,o){if(o>=a.length)return i?i.call(r,s):n?s.sort(n):s;for(var l,u,c,d,h=-1,p=s.length,m=a[o++],_=new f;++h<p;)(d=_.get(l=m(u=s[h])))?d.push(u):_.set(l,[u]);return t?(u=t(),c=function(n,i){u.set(n,e(t,i,o))}):(u={},c=function(n,i){u[n]=e(t,i,o)}),_.forEach(c),u}function t(e,n){if(n>=a.length)return e;var i=[],r=s[n++];return e.forEach(function(e,r){i.push({key:e,values:t(r,n)})}),r?i.sort(function(e,t){return r(e.key,t.key)}):i}var n,i,r={},a=[],s=[];return r.map=function(t,n){return e(n,t,0)},r.entries=function(n){return t(e(ss.map,n,0),0)},r.key=function(e){return a.push(e),r},r.sortKeys=function(e){return s[a.length-1]=e,r},r.sortValues=function(e){return n=e,r},r.rollup=function(e){return i=e,r},r},ss.set=function(e){var t=new b;if(e)for(var n=0,i=e.length;i>n;++n)t.add(e[n]);return t},d(b,{has:m,add:function(e){return this._[h(e+="")]=!0,e},remove:_,values:g,size:v,empty:y,forEach:function(e){for(var t in this._)e.call(this,p(t))}}),ss.behavior={},ss.rebind=function(e,t){for(var n,i=1,r=arguments.length;++i<r;)e[n=arguments[i]]=x(e,t,t[n]);return e};var Ls=["webkit","ms","moz","Moz","o","O"];ss.dispatch=function(){for(var e=new S,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=E(e);return e},S.prototype.on=function(e,t){var n=e.indexOf("."),i="";if(n>=0&&(i=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(i):this[e].on(i,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(i,null);return this}},ss.event=null,ss.requote=function(e){return e.replace(Ss,"\\$&")};var Ss=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Es={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},ks=function(e,t){return t.querySelector(e)},Ts=function(e,t){return t.querySelectorAll(e)},Ms=cs.matches||cs[w(cs,"matchesSelector")],As=function(e,t){return Ms.call(e,t)};"function"==typeof Sizzle&&(ks=function(e,t){return Sizzle(e,t)[0]||null},Ts=Sizzle,As=Sizzle.matchesSelector),ss.selection=function(){return Is};var Cs=ss.selection.prototype=[];Cs.select=function(e){var t,n,i,r,a=[];e=C(e);for(var s=-1,o=this.length;++s<o;){a.push(t=[]),t.parentNode=(i=this[s]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(t.push(n=e.call(r,r.__data__,l,s)),n&&"__data__"in r&&(n.__data__=r.__data__)):t.push(null)}return A(a)},Cs.selectAll=function(e){var t,n,i=[];e=R(e);for(var r=-1,a=this.length;++r<a;)for(var s=this[r],o=-1,l=s.length;++o<l;)(n=s[o])&&(i.push(t=ls(e.call(n,n.__data__,o,r))),t.parentNode=n);return A(i)};var Rs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ss.ns={prefix:Rs,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.slice(0,t),e=e.slice(t+1)),Rs.hasOwnProperty(n)?{space:Rs[n],local:e}:e}},Cs.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=ss.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(D(t,e[t]));return this}return this.each(D(e,t))},Cs.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),i=(e=N(e)).length,r=-1;if(t=n.classList){for(;++r<i;)if(!t.contains(e[r]))return!1}else for(t=n.getAttribute("class");++r<i;)if(!O(e[r]).test(t))return!1;return!0}for(t in e)this.each(F(t,e[t]));return this}return this.each(F(e,t))},Cs.style=function(e,t,n){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(t="");for(n in e)this.each(P(n,e[n],t));return this}if(2>i)return ds.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(P(e,t,n))},Cs.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(U(t,e[t]));return this}return this.each(U(e,t))},Cs.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Cs.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Cs.append=function(e){return e=Y(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Cs.insert=function(e,t){return e=Y(e),t=C(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Cs.remove=function(){return this.each(H)},Cs.data=function(e,t){function n(e,n){var i,r,a,s=e.length,c=n.length,d=Math.min(s,c),h=new Array(c),p=new Array(c),m=new Array(s);if(t){var _,g=new f,v=new Array(s);for(i=-1;++i<s;)g.has(_=t.call(r=e[i],r.__data__,i))?m[i]=r:g.set(_,r),v[i]=_;for(i=-1;++i<c;)(r=g.get(_=t.call(n,a=n[i],i)))?r!==!0&&(h[i]=r,r.__data__=a):p[i]=G(a),g.set(_,!0);for(i=-1;++i<s;)g.get(v[i])!==!0&&(m[i]=e[i])}else{for(i=-1;++i<d;)r=e[i],a=n[i],r?(r.__data__=a,h[i]=r):p[i]=G(a);for(;c>i;++i)p[i]=G(n[i]);for(;s>i;++i)m[i]=e[i]}p.update=h,p.parentNode=h.parentNode=m.parentNode=e.parentNode,o.push(p),l.push(h),u.push(m)}var i,r,a=-1,s=this.length;if(!arguments.length){for(e=new Array(s=(i=this[0]).length);++a<s;)(r=i[a])&&(e[a]=r.__data__);return e}var o=$([]),l=A([]),u=A([]);if("function"==typeof e)for(;++a<s;)n(i=this[a],e.call(i,i.parentNode.__data__,a));else for(;++a<s;)n(i=this[a],e);return l.enter=function(){return o},l.exit=function(){return u},l},Cs.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Cs.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=j(e));for(var a=0,s=this.length;s>a;a++){r.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var o=0,l=n.length;l>o;o++)(i=n[o])&&e.call(i,i.__data__,o,a)&&t.push(i)}return A(r)},Cs.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,i=this[e],r=i.length-1,a=i[r];--r>=0;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Cs.sort=function(e){e=V.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Cs.each=function(e){return z(this,function(t,n,i){e.call(t,t.__data__,n,i)})},Cs.call=function(e){var t=ls(arguments);return e.apply(t[0]=this,t),this},Cs.empty=function(){return!this.node()},Cs.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],i=0,r=n.length;r>i;i++){var a=n[i];if(a)return a}return null},Cs.size=function(){var e=0;return z(this,function(){++e}),e};var Ds=[];ss.selection.enter=$,ss.selection.enter.prototype=Ds,Ds.append=Cs.append,Ds.empty=Cs.empty,Ds.node=Cs.node,Ds.call=Cs.call,Ds.size=Cs.size,Ds.select=function(e){for(var t,n,i,r,a,s=[],o=-1,l=this.length;++o<l;){i=(r=this[o]).update,s.push(t=[]),t.parentNode=r.parentNode;for(var u=-1,c=r.length;++u<c;)(a=r[u])?(t.push(i[u]=n=e.call(r.parentNode,a.__data__,u,o)),n.__data__=a.__data__):t.push(null)}return A(s)},Ds.insert=function(e,t){return arguments.length<2&&(t=q(this)),Cs.insert.call(this,e,t)},ss.select=function(e){var t=["string"==typeof e?ks(e,us):e];return t.parentNode=cs,A([t])},ss.selectAll=function(e){var t=ls("string"==typeof e?Ts(e,us):e);return t.parentNode=cs,A([t])};var Is=ss.select(cs);Cs.on=function(e,t,n){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(t=!1);for(n in e)this.each(W(n,e[n],t));return this}if(2>i)return(i=this.node()["__on"+e])&&i._;n=!1}return this.each(W(e,t,n))};var Os=ss.map({mouseenter:"mouseover",mouseleave:"mouseout"});Os.forEach(function(e){"on"+e in us&&Os.remove(e)});var Ns="onselectstart"in us?null:w(cs.style,"userSelect"),Fs=0;ss.mouse=function(e){return Z(e,T())};var Bs=/WebKit/.test(ds.navigator.userAgent)?-1:0;ss.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=T().changedTouches),t)for(var i,r=0,a=t.length;a>r;++r)if((i=t[r]).identifier===n)return Z(e,i)},ss.behavior.drag=function(){function e(){this.on("mousedown.drag",r).on("touchstart.drag",a)}function t(e,t,r,a,s){return function(){function o(){var e,n,i=t(f,m);i&&(e=i[0]-y[0],n=i[1]-y[1],p|=e|n,y=i,h({type:"drag",x:i[0]+u[0],y:i[1]+u[1],dx:e,dy:n}))}function l(){t(f,m)&&(g.on(a+_,null).on(s+_,null),v(p&&ss.event.target===d),h({type:"dragend"}))}var u,c=this,d=ss.event.target,f=c.parentNode,h=n.of(c,arguments),p=0,m=e(),_=".drag"+(null==m?"":"-"+m),g=ss.select(r()).on(a+_,o).on(s+_,l),v=X(),y=t(f,m);i?(u=i.apply(c,arguments),u=[u.x-y[0],u.y-y[1]]):u=[0,0],h({type:"dragstart"})}}var n=M(e,"drag","dragstart","dragend"),i=null,r=t(L,ss.mouse,te,"mousemove","mouseup"),a=t(Q,ss.touch,ee,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},ss.rebind(e,n,"on")},ss.touches=function(e,t){return arguments.length<2&&(t=T().touches),t?ls(t).map(function(t){var n=Z(e,t);return n.identifier=t.identifier,n}):[]};var Ps=1e-6,Us=Ps*Ps,Ys=Math.PI,Hs=2*Ys,Gs=Hs-Ps,js=Ys/2,Vs=Ys/180,zs=180/Ys,$s=Math.SQRT2,qs=2,Ws=4;ss.interpolateZoom=function(e,t){function n(e){var t=e*v;if(g){var n=oe(m),s=a/(qs*f)*(n*le($s*t+m)-se(m));return[i+s*u,r+s*c,a*n/oe($s*t+m)]}return[i+e*u,r+e*c,a*Math.exp($s*t)]}var i=e[0],r=e[1],a=e[2],s=t[0],o=t[1],l=t[2],u=s-i,c=o-r,d=u*u+c*c,f=Math.sqrt(d),h=(l*l-a*a+Ws*d)/(2*a*qs*f),p=(l*l-a*a-Ws*d)/(2*l*qs*f),m=Math.log(Math.sqrt(h*h+1)-h),_=Math.log(Math.sqrt(p*p+1)-p),g=_-m,v=(g||Math.log(l/a))/$s;return n.duration=1e3*v,n},ss.behavior.zoom=function(){function e(e){e.on(C,c).on(Xs+".zoom",f).on("dblclick.zoom",h).on(I,d)}function t(e){return[(e[0]-L.x)/L.k,(e[1]-L.y)/L.k]}function n(e){return[e[0]*L.k+L.x,e[1]*L.k+L.y]}function i(e){L.k=Math.max(E[0],Math.min(E[1],e))}function r(e,t){t=n(t),L.x+=e[0]-t[0],L.y+=e[1]-t[1]}function a(t,n,a,s){t.__chart__={x:L.x,y:L.y,k:L.k},i(Math.pow(2,s)),r(m=n,a),t=ss.select(t),T>0&&(t=t.transition().duration(T)),t.call(e.event)}function s(){b&&b.domain(y.range().map(function(e){return(e-L.x)/L.k}).map(y.invert)),w&&w.domain(x.range().map(function(e){return(e-L.y)/L.k}).map(x.invert))}function o(e){A++||e({type:"zoomstart"})}function l(e){s(),e({type:"zoom",scale:L.k,translate:[L.x,L.y]})}function u(e){--A||e({type:"zoomend"}),m=null}function c(){function e(){c=1,r(ss.mouse(i),f),l(s)}function n(){d.on(R,null).on(D,null),h(c&&ss.event.target===a),u(s)}var i=this,a=ss.event.target,s=O.of(i,arguments),c=0,d=ss.select(ds).on(R,e).on(D,n),f=t(ss.mouse(i)),h=X();zl.call(i),o(s)}function d(){function e(){var e=ss.touches(p);return h=L.k,e.forEach(function(e){e.identifier in _&&(_[e.identifier]=t(e))}),e}function n(){var t=ss.event.target;ss.select(t).on(b,s).on(x,f),w.push(t);for(var n=ss.event.changedTouches,i=0,r=n.length;r>i;++i)_[n[i].identifier]=null;var o=e(),l=Date.now();if(1===o.length){if(500>l-v){var u=o[0];a(p,u,_[u.identifier],Math.floor(Math.log(L.k)/Math.LN2)+1),k()}v=l}else if(o.length>1){var u=o[0],c=o[1],d=u[0]-c[0],h=u[1]-c[1];g=d*d+h*h}}function s(){var e,t,n,a,s=ss.touches(p);zl.call(p);for(var o=0,u=s.length;u>o;++o,a=null)if(n=s[o],a=_[n.identifier]){if(t)break;e=n,t=a}if(a){var c=(c=n[0]-e[0])*c+(c=n[1]-e[1])*c,d=g&&Math.sqrt(c/g);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+a[0])/2,(t[1]+a[1])/2],i(d*h)}v=null,r(e,t),l(m)}function f(){if(ss.event.touches.length){for(var t=ss.event.changedTouches,n=0,i=t.length;i>n;++n)delete _[t[n].identifier];for(var r in _)return void e()}ss.selectAll(w).on(y,null),S.on(C,c).on(I,d),E(),u(m)}var h,p=this,m=O.of(p,arguments),_={},g=0,y=".zoom-"+ss.event.changedTouches[0].identifier,b="touchmove"+y,x="touchend"+y,w=[],S=ss.select(p),E=X();n(),o(m),S.on(C,null).on(I,n)}function f(){var e=O.of(this,arguments);g?clearTimeout(g):(p=t(m=_||ss.mouse(this)),zl.call(this),o(e)),g=setTimeout(function(){g=null,u(e)},50),k(),i(Math.pow(2,.002*Ks())*L.k),r(m,p),l(e)}function h(){var e=ss.mouse(this),n=Math.log(L.k)/Math.LN2;a(this,e,t(e),ss.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var p,m,_,g,v,y,b,x,w,L={x:0,y:0,k:1},S=[960,500],E=Js,T=250,A=0,C="mousedown.zoom",R="mousemove.zoom",D="mouseup.zoom",I="touchstart.zoom",O=M(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=O.of(this,arguments),t=L;jl?ss.select(this).transition().each("start.zoom",function(){L=this.__chart__||{x:0,y:0,k:1},o(e)}).tween("zoom:zoom",function(){var n=S[0],i=S[1],r=m?m[0]:n/2,a=m?m[1]:i/2,s=ss.interpolateZoom([(r-L.x)/L.k,(a-L.y)/L.k,n/L.k],[(r-t.x)/t.k,(a-t.y)/t.k,n/t.k]);return function(t){var i=s(t),o=n/i[2];this.__chart__=L={x:r-i[0]*o,y:a-i[1]*o,k:o},l(e)}}).each("interrupt.zoom",function(){u(e)}).each("end.zoom",function(){u(e)}):(this.__chart__=L,o(e),l(e),u(e))})},e.translate=function(t){return arguments.length?(L={x:+t[0],y:+t[1],k:L.k},s(),e):[L.x,L.y]},e.scale=function(t){return arguments.length?(L={x:L.x,y:L.y,k:+t},s(),e):L.k},e.scaleExtent=function(t){return arguments.length?(E=null==t?Js:[+t[0],+t[1]],e):E},e.center=function(t){return arguments.length?(_=t&&[+t[0],+t[1]],e):_},e.size=function(t){return arguments.length?(S=t&&[+t[0],+t[1]],e):S},e.duration=function(t){return arguments.length?(T=+t,e):T},e.x=function(t){return arguments.length?(b=t,y=t.copy(),L={x:0,y:0,k:1},e):b},e.y=function(t){return arguments.length?(w=t,x=t.copy(),L={x:0,y:0,k:1},e):w},ss.rebind(e,O,"on")};var Ks,Js=[0,1/0],Xs="onwheel"in us?(Ks=function(){return-ss.event.deltaY*(ss.event.deltaMode?120:1)},"wheel"):"onmousewheel"in us?(Ks=function(){return ss.event.wheelDelta},"mousewheel"):(Ks=function(){return-ss.event.detail},"MozMousePixelScroll");ss.color=ce,ce.prototype.toString=function(){return this.rgb()+""},ss.hsl=de;var Zs=de.prototype=new ce;Zs.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new de(this.h,this.s,this.l/e)},Zs.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new de(this.h,this.s,e*this.l)},Zs.rgb=function(){return fe(this.h,this.s,this.l)},ss.hcl=he;var Qs=he.prototype=new ce;Qs.brighter=function(e){return new he(this.h,this.c,Math.min(100,this.l+eo*(arguments.length?e:1)))},Qs.darker=function(e){return new he(this.h,this.c,Math.max(0,this.l-eo*(arguments.length?e:1)))},Qs.rgb=function(){return pe(this.h,this.c,this.l).rgb()},ss.lab=me;var eo=18,to=.95047,no=1,io=1.08883,ro=me.prototype=new ce;ro.brighter=function(e){return new me(Math.min(100,this.l+eo*(arguments.length?e:1)),this.a,this.b)},ro.darker=function(e){return new me(Math.max(0,this.l-eo*(arguments.length?e:1)),this.a,this.b)},ro.rgb=function(){return _e(this.l,this.a,this.b)},ss.rgb=xe;var ao=xe.prototype=new ce;ao.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,i=this.b,r=30;return t||n||i?(t&&r>t&&(t=r),n&&r>n&&(n=r),i&&r>i&&(i=r),new xe(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,i/e))):new xe(r,r,r)},ao.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new xe(e*this.r,e*this.g,e*this.b)},ao.hsl=function(){return ke(this.r,this.g,this.b)},ao.toString=function(){return"#"+Se(this.r)+Se(this.g)+Se(this.b)};var so=ss.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});so.forEach(function(e,t){so.set(e,we(t))}),ss.functor=Ce,ss.xhr=De(Re),ss.dsv=function(e,t){function n(e,n,a){arguments.length<3&&(a=n,n=null);var s=Ie(e,t,null==n?i:r(n),a);return s.row=function(e){return arguments.length?s.response(null==(n=e)?i:r(e)):n},s}function i(e){return n.parse(e.responseText)}function r(e){return function(t){return n.parse(t.responseText,e)}}function a(t){return t.map(s).join(e)}function s(e){return o.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var o=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return n.parse=function(e,t){var i;return n.parseRows(e,function(e,n){if(i)return i(e,n-1);var r=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");i=t?function(e,n){return t(r(e),n)}:r})},n.parseRows=function(e,t){function n(){if(c>=u)return s;if(r)return r=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var i=e.charCodeAt(n+1);return 13===i?(r=!0,10===e.charCodeAt(n+2)&&++c):10===i&&(r=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;u>c;){var i=e.charCodeAt(c++),o=1;if(10===i)r=!0;else if(13===i)r=!0,10===e.charCodeAt(c)&&(++c,++o);else if(i!==l)continue;return e.slice(t,c-o)}return e.slice(t)}for(var i,r,a={},s={},o=[],u=e.length,c=0,d=0;(i=n())!==s;){for(var f=[];i!==a&&i!==s;)f.push(i),i=n();t&&null==(f=t(f,d++))||o.push(f)}return o},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var i=new b,r=[];return t.forEach(function(e){for(var t in e)i.has(t)||r.push(i.add(t))}),[r.map(s).join(e)].concat(t.map(function(t){return r.map(function(e){return s(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(a).join("\n")},n},ss.csv=ss.dsv(",","text/csv"),ss.tsv=ss.dsv("	","text/tab-separated-values");var oo,lo,uo,co,fo,ho=ds[w(ds,"requestAnimationFrame")]||function(e){setTimeout(e,17)};ss.timer=function(e,t,n){var i=arguments.length;2>i&&(t=0),3>i&&(n=Date.now());var r=n+t,a={c:e,t:r,f:!1,n:null};lo?lo.n=a:oo=a,lo=a,uo||(co=clearTimeout(co),uo=1,ho(Fe))},ss.timer.flush=function(){Be(),Pe()},ss.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var po=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Ye);ss.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=ss.round(e,Ue(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),po[8+n/3]};var mo=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,_o=ss.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=ss.round(e,Ue(e,t))).toFixed(Math.max(0,Math.min(20,Ue(e*(1+1e-15),t))))}}),go=ss.time={},vo=Date;je.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){
return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){yo.setUTCDate.apply(this._,arguments)},setDay:function(){yo.setUTCDay.apply(this._,arguments)},setFullYear:function(){yo.setUTCFullYear.apply(this._,arguments)},setHours:function(){yo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){yo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){yo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){yo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){yo.setUTCSeconds.apply(this._,arguments)},setTime:function(){yo.setTime.apply(this._,arguments)}};var yo=Date.prototype;go.year=Ve(function(e){return e=go.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),go.years=go.year.range,go.years.utc=go.year.utc.range,go.day=Ve(function(e){var t=new vo(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),go.days=go.day.range,go.days.utc=go.day.utc.range,go.dayOfYear=function(e){var t=go.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=go[e]=Ve(function(e){return(e=go.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=go.year(e).getDay();return Math.floor((go.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});go[e+"s"]=n.range,go[e+"s"].utc=n.utc.range,go[e+"OfYear"]=function(e){var n=go.year(e).getDay();return Math.floor((go.dayOfYear(e)+(n+t)%7)/7)}}),go.week=go.sunday,go.weeks=go.sunday.range,go.weeks.utc=go.sunday.utc.range,go.weekOfYear=go.sundayOfYear;var bo={"-":"",_:" ",0:"0"},xo=/^\s*\d+/,wo=/^%/;ss.locale=function(e){return{numberFormat:He(e),timeFormat:$e(e)}};var Lo=ss.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ss.format=Lo.numberFormat,ss.geo={},ht.prototype={s:0,t:0,add:function(e){pt(e,this.t,So),pt(So.s,this.s,this),this.s?this.t+=So.t:this.s=So.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var So=new ht;ss.geo.stream=function(e,t){e&&Eo.hasOwnProperty(e.type)?Eo[e.type](e,t):mt(e,t)};var Eo={Feature:function(e,t){mt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)mt(n[i].geometry,t)}},ko={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){_t(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)_t(n[i],t,0)},Polygon:function(e,t){gt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)gt(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)mt(n[i],t)}};ss.geo.area=function(e){return To=0,ss.geo.stream(e,Ao),To};var To,Mo=new ht,Ao={sphere:function(){To+=4*Ys},point:L,lineStart:L,lineEnd:L,polygonStart:function(){Mo.reset(),Ao.lineStart=vt},polygonEnd:function(){var e=2*Mo;To+=0>e?4*Ys+e:e,Ao.lineStart=Ao.lineEnd=Ao.point=L}};ss.geo.bounds=function(){function e(e,t){y.push(b=[c=e,f=e]),d>t&&(d=t),t>h&&(h=t)}function t(t,n){var i=yt([t*Vs,n*Vs]);if(g){var r=xt(g,i),a=[r[1],-r[0],0],s=xt(a,r);St(s),s=Et(s);var l=t-p,u=l>0?1:-1,m=s[0]*zs*u,_=bs(l)>180;if(_^(m>u*p&&u*t>m)){var v=s[1]*zs;v>h&&(h=v)}else if(m=(m+360)%360-180,_^(m>u*p&&u*t>m)){var v=-s[1]*zs;d>v&&(d=v)}else d>n&&(d=n),n>h&&(h=n);_?p>t?o(c,t)>o(c,f)&&(f=t):o(t,f)>o(c,f)&&(c=t):f>=c?(c>t&&(c=t),t>f&&(f=t)):t>p?o(c,t)>o(c,f)&&(f=t):o(t,f)>o(c,f)&&(c=t)}else e(t,n);g=i,p=t}function n(){x.point=t}function i(){b[0]=c,b[1]=f,x.point=e,g=null}function r(e,n){if(g){var i=e-p;v+=bs(i)>180?i+(i>0?360:-360):i}else m=e,_=n;Ao.point(e,n),t(e,n)}function a(){Ao.lineStart()}function s(){r(m,_),Ao.lineEnd(),bs(v)>Ps&&(c=-(f=180)),b[0]=c,b[1]=f,g=null}function o(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function u(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,d,f,h,p,m,_,g,v,y,b,x={point:e,lineStart:n,lineEnd:i,polygonStart:function(){x.point=r,x.lineStart=a,x.lineEnd=s,v=0,Ao.polygonStart()},polygonEnd:function(){Ao.polygonEnd(),x.point=e,x.lineStart=n,x.lineEnd=i,0>Mo?(c=-(f=180),d=-(h=90)):v>Ps?h=90:-Ps>v&&(d=-90),b[0]=c,b[1]=f}};return function(e){h=f=-(c=d=1/0),y=[],ss.geo.stream(e,x);var t=y.length;if(t){y.sort(l);for(var n,i=1,r=y[0],a=[r];t>i;++i)n=y[i],u(n[0],r)||u(n[1],r)?(o(r[0],n[1])>o(r[0],r[1])&&(r[1]=n[1]),o(n[0],r[1])>o(r[0],r[1])&&(r[0]=n[0])):a.push(r=n);for(var s,n,p=-1/0,t=a.length-1,i=0,r=a[t];t>=i;r=n,++i)n=a[i],(s=o(r[1],n[0]))>p&&(p=s,c=n[0],f=r[1])}return y=b=null,1/0===c||1/0===d?[[0/0,0/0],[0/0,0/0]]:[[c,d],[f,h]]}}(),ss.geo.centroid=function(e){Co=Ro=Do=Io=Oo=No=Fo=Bo=Po=Uo=Yo=0,ss.geo.stream(e,Ho);var t=Po,n=Uo,i=Yo,r=t*t+n*n+i*i;return Us>r&&(t=No,n=Fo,i=Bo,Ps>Ro&&(t=Do,n=Io,i=Oo),r=t*t+n*n+i*i,Us>r)?[0/0,0/0]:[Math.atan2(n,t)*zs,ae(i/Math.sqrt(r))*zs]};var Co,Ro,Do,Io,Oo,No,Fo,Bo,Po,Uo,Yo,Ho={sphere:L,point:Tt,lineStart:At,lineEnd:Ct,polygonStart:function(){Ho.lineStart=Rt},polygonEnd:function(){Ho.lineStart=At}},Go=Bt(It,Ht,jt,[-Ys,-Ys/2]),jo=1e9;ss.geo.clipExtent=function(){var e,t,n,i,r,a,s={stream:function(e){return r&&(r.valid=!1),r=a(e),r.valid=!0,r},extent:function(o){return arguments.length?(a=qt(e=+o[0][0],t=+o[0][1],n=+o[1][0],i=+o[1][1]),r&&(r.valid=!1,r=null),s):[[e,t],[n,i]]}};return s.extent([[0,0],[960,500]])},(ss.geo.conicEqualArea=function(){return Wt(Kt)}).raw=Kt,ss.geo.albers=function(){return ss.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ss.geo.albersUsa=function(){function e(e){var a=e[0],s=e[1];return t=null,n(a,s),t||(i(a,s),t)||r(a,s),t}var t,n,i,r,a=ss.geo.albers(),s=ss.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o=ss.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=a.scale(),n=a.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?s:r>=.166&&.234>r&&i>=-.214&&-.115>i?o:a).invert(e)},e.stream=function(e){var t=a.stream(e),n=s.stream(e),i=o.stream(e);return{point:function(e,r){t.point(e,r),n.point(e,r),i.point(e,r)},sphere:function(){t.sphere(),n.sphere(),i.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},e.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),o.precision(t),e):a.precision()},e.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),o.scale(t),e.translate(a.translate())):a.scale()},e.translate=function(t){if(!arguments.length)return a.translate();var u=a.scale(),c=+t[0],d=+t[1];return n=a.translate(t).clipExtent([[c-.455*u,d-.238*u],[c+.455*u,d+.238*u]]).stream(l).point,i=s.translate([c-.307*u,d+.201*u]).clipExtent([[c-.425*u+Ps,d+.12*u+Ps],[c-.214*u-Ps,d+.234*u-Ps]]).stream(l).point,r=o.translate([c-.205*u,d+.212*u]).clipExtent([[c-.214*u+Ps,d+.166*u+Ps],[c-.115*u-Ps,d+.234*u-Ps]]).stream(l).point,e},e.scale(1070)};var Vo,zo,$o,qo,Wo,Ko,Jo={point:L,lineStart:L,lineEnd:L,polygonStart:function(){zo=0,Jo.lineStart=Jt},polygonEnd:function(){Jo.lineStart=Jo.lineEnd=Jo.point=L,Vo+=bs(zo/2)}},Xo={point:Xt,lineStart:L,lineEnd:L,polygonStart:L,polygonEnd:L},Zo={point:en,lineStart:tn,lineEnd:nn,polygonStart:function(){Zo.lineStart=rn},polygonEnd:function(){Zo.point=en,Zo.lineStart=tn,Zo.lineEnd=nn}};ss.geo.path=function(){function e(e){return e&&("function"==typeof o&&a.pointRadius(+o.apply(this,arguments)),s&&s.valid||(s=r(a)),ss.geo.stream(e,s)),a.result()}function t(){return s=null,e}var n,i,r,a,s,o=4.5;return e.area=function(e){return Vo=0,ss.geo.stream(e,r(Jo)),Vo},e.centroid=function(e){return Do=Io=Oo=No=Fo=Bo=Po=Uo=Yo=0,ss.geo.stream(e,r(Zo)),Yo?[Po/Yo,Uo/Yo]:Bo?[No/Bo,Fo/Bo]:Oo?[Do/Oo,Io/Oo]:[0/0,0/0]},e.bounds=function(e){return Wo=Ko=-($o=qo=1/0),ss.geo.stream(e,r(Xo)),[[$o,qo],[Wo,Ko]]},e.projection=function(e){return arguments.length?(r=(n=e)?e.stream||on(e):Re,t()):n},e.context=function(e){return arguments.length?(a=null==(i=e)?new Zt:new an(e),"function"!=typeof o&&a.pointRadius(o),t()):i},e.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(a.pointRadius(+t),+t),e):o},e.projection(ss.geo.albersUsa()).context(null)},ss.geo.transform=function(e){return{stream:function(t){var n=new ln(t);for(var i in e)n[i]=e[i];return n}}},ln.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ss.geo.projection=cn,ss.geo.projectionMutator=dn,(ss.geo.equirectangular=function(){return cn(hn)}).raw=hn.invert=hn,ss.geo.rotation=function(e){function t(t){return t=e(t[0]*Vs,t[1]*Vs),t[0]*=zs,t[1]*=zs,t}return e=mn(e[0]%360*Vs,e[1]*Vs,e.length>2?e[2]*Vs:0),t.invert=function(t){return t=e.invert(t[0]*Vs,t[1]*Vs),t[0]*=zs,t[1]*=zs,t},t},pn.invert=hn,ss.geo.circle=function(){function e(){var e="function"==typeof i?i.apply(this,arguments):i,t=mn(-e[0]*Vs,-e[1]*Vs,0).invert,r=[];return n(null,null,1,{point:function(e,n){r.push(e=t(e,n)),e[0]*=zs,e[1]*=zs}}),{type:"Polygon",coordinates:[r]}}var t,n,i=[0,0],r=6;return e.origin=function(t){return arguments.length?(i=t,e):i},e.angle=function(i){return arguments.length?(n=yn((t=+i)*Vs,r*Vs),e):t},e.precision=function(i){return arguments.length?(n=yn(t*Vs,(r=+i)*Vs),e):r},e.angle(90)},ss.geo.distance=function(e,t){var n,i=(t[0]-e[0])*Vs,r=e[1]*Vs,a=t[1]*Vs,s=Math.sin(i),o=Math.cos(i),l=Math.sin(r),u=Math.cos(r),c=Math.sin(a),d=Math.cos(a);return Math.atan2(Math.sqrt((n=d*s)*n+(n=u*c-l*d*o)*n),l*c+u*d*o)},ss.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return ss.range(Math.ceil(a/_)*_,r,_).map(f).concat(ss.range(Math.ceil(u/g)*g,l,g).map(h)).concat(ss.range(Math.ceil(i/p)*p,n,p).filter(function(e){return bs(e%_)>Ps}).map(c)).concat(ss.range(Math.ceil(o/m)*m,s,m).filter(function(e){return bs(e%g)>Ps}).map(d))}var n,i,r,a,s,o,l,u,c,d,f,h,p=10,m=p,_=90,g=360,v=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[f(a).concat(h(l).slice(1),f(r).reverse().slice(1),h(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],r=+t[1][0],u=+t[0][1],l=+t[1][1],a>r&&(t=a,a=r,r=t),u>l&&(t=u,u=l,l=t),e.precision(v)):[[a,u],[r,l]]},e.minorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],o=+t[0][1],s=+t[1][1],i>n&&(t=i,i=n,n=t),o>s&&(t=o,o=s,s=t),e.precision(v)):[[i,o],[n,s]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(_=+t[0],g=+t[1],e):[_,g]},e.minorStep=function(t){return arguments.length?(p=+t[0],m=+t[1],e):[p,m]},e.precision=function(t){return arguments.length?(v=+t,c=xn(o,s,90),d=wn(i,n,v),f=xn(u,l,90),h=wn(a,r,v),e):v},e.majorExtent([[-180,-90+Ps],[180,90-Ps]]).minorExtent([[-180,-80-Ps],[180,80+Ps]])},ss.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||i.apply(this,arguments),n||r.apply(this,arguments)]}}var t,n,i=Ln,r=Sn;return e.distance=function(){return ss.geo.distance(t||i.apply(this,arguments),n||r.apply(this,arguments))},e.source=function(n){return arguments.length?(i=n,t="function"==typeof n?null:n,e):i},e.target=function(t){return arguments.length?(r=t,n="function"==typeof t?null:t,e):r},e.precision=function(){return arguments.length?e:0},e},ss.geo.interpolate=function(e,t){return En(e[0]*Vs,e[1]*Vs,t[0]*Vs,t[1]*Vs)},ss.geo.length=function(e){return Qo=0,ss.geo.stream(e,el),Qo};var Qo,el={sphere:L,point:L,lineStart:kn,lineEnd:L,polygonStart:L,polygonEnd:L},tl=Tn(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(ss.geo.azimuthalEqualArea=function(){return cn(tl)}).raw=tl;var nl=Tn(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},Re);(ss.geo.azimuthalEquidistant=function(){return cn(nl)}).raw=nl,(ss.geo.conicConformal=function(){return Wt(Mn)}).raw=Mn,(ss.geo.conicEquidistant=function(){return Wt(An)}).raw=An;var il=Tn(function(e){return 1/e},Math.atan);(ss.geo.gnomonic=function(){return cn(il)}).raw=il,Cn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-js]},(ss.geo.mercator=function(){return Rn(Cn)}).raw=Cn;var rl=Tn(function(){return 1},Math.asin);(ss.geo.orthographic=function(){return cn(rl)}).raw=rl;var al=Tn(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(ss.geo.stereographic=function(){return cn(al)}).raw=al,Dn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-js]},(ss.geo.transverseMercator=function(){var e=Rn(Dn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Dn,ss.geom={},ss.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,r=Ce(n),a=Ce(i),s=e.length,o=[],l=[];for(t=0;s>t;t++)o.push([+r.call(this,e[t],t),+a.call(this,e[t],t),t]);for(o.sort(Fn),t=0;s>t;t++)l.push([o[t][0],-o[t][1]]);var u=Nn(o),c=Nn(l),d=c[0]===u[0],f=c[c.length-1]===u[u.length-1],h=[];for(t=u.length-1;t>=0;--t)h.push(e[o[u[t]][2]]);for(t=+d;t<c.length-f;++t)h.push(e[o[c[t]][2]]);return h}var n=In,i=On;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t)},ss.geom.polygon=function(e){return Es(e,sl),e};var sl=ss.geom.polygon.prototype=[];sl.area=function(){for(var e,t=-1,n=this.length,i=this[n-1],r=0;++t<n;)e=i,i=this[t],r+=e[1]*i[0]-e[0]*i[1];return.5*r},sl.centroid=function(e){var t,n,i=-1,r=this.length,a=0,s=0,o=this[r-1];for(arguments.length||(e=-1/(6*this.area()));++i<r;)t=o,o=this[i],n=t[0]*o[1]-o[0]*t[1],a+=(t[0]+o[0])*n,s+=(t[1]+o[1])*n;return[a*e,s*e]},sl.clip=function(e){for(var t,n,i,r,a,s,o=Un(e),l=-1,u=this.length-Un(this),c=this[u-1];++l<u;){for(t=e.slice(),e.length=0,r=this[l],a=t[(i=t.length-o)-1],n=-1;++n<i;)s=t[n],Bn(s,c,r)?(Bn(a,c,r)||e.push(Pn(a,s,c,r)),e.push(s)):Bn(a,c,r)&&e.push(Pn(a,s,c,r)),a=s;o&&e.push(e[0]),c=r}return e};var ol,ll,ul,cl,dl,fl=[],hl=[];qn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Kn),t.length},ai.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},si.prototype={insert:function(e,t){var n,i,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ci(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.R&&(li(this,n),e=n,n=e.U),n.C=!1,i.C=!0,ui(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.L&&(ui(this,n),e=n,n=e.U),n.C=!1,i.C=!0,li(this,i))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,i,r=e.U,a=e.L,s=e.R;if(n=a?s?ci(s):a:s,r?r.L===e?r.L=n:r.R=n:this._=n,a&&s?(i=n.C,n.C=e.C,n.L=a,a.U=n,n!==s?(r=n.U,n.U=e.U,e=n.R,r.L=e,n.R=s,s.U=n):(n.U=r,r=n,e=n.R)):(i=e.C,e=n),e&&(e.U=r),!i){if(e&&e.C)return e.C=!1,void 0;do{if(e===this._)break;if(e===r.L){if(t=r.R,t.C&&(t.C=!1,r.C=!0,li(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ui(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,li(this,r),e=this._;break}}else if(t=r.L,t.C&&(t.C=!1,r.C=!0,ui(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,li(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,ui(this,r),e=this._;break}t.C=!0,e=r,r=r.U}while(!e.C);e&&(e.C=!1)}}},ss.geom.voronoi=function(e){function t(e){var t=new Array(e.length),i=o[0][0],r=o[0][1],a=o[1][0],s=o[1][1];return di(n(e),o).cells.forEach(function(n,o){var l=n.edges,u=n.site,c=t[o]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=i&&u.x<=a&&u.y>=r&&u.y<=s?[[i,s],[a,s],[a,r],[i,r]]:[];c.point=e[o]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/Ps)*Ps,y:Math.round(s(e,t)/Ps)*Ps,i:t}})}var i=In,r=On,a=i,s=r,o=pl;return e?t(e):(t.links=function(e){return di(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return di(n(e)).cells.forEach(function(n,i){for(var r,a,s=n.site,o=n.edges.sort(Kn),l=-1,u=o.length,c=o[u-1].edge,d=c.l===s?c.r:c.l;++l<u;)r=c,a=d,c=o[l].edge,d=c.l===s?c.r:c.l,i<a.i&&i<d.i&&hi(s,a,d)<0&&t.push([e[i],e[a.i],e[d.i]])}),t},t.x=function(e){return arguments.length?(a=Ce(i=e),t):i},t.y=function(e){return arguments.length?(s=Ce(r=e),t):r},t.clipExtent=function(e){return arguments.length?(o=null==e?pl:e,t):o===pl?null:o},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):o===pl?null:o&&o[1]},t)};var pl=[[-1e6,-1e6],[1e6,1e6]];ss.geom.delaunay=function(e){return ss.geom.voronoi().triangles(e)},ss.geom.quadtree=function(e,t,n,i,r){function a(e){function a(e,t,n,i,r,a,s,o){if(!isNaN(n)&&!isNaN(i))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(bs(l-n)+bs(c-i)<.01)u(e,t,n,i,r,a,s,o);else{var d=e.point;e.x=e.y=e.point=null,u(e,d,l,c,r,a,s,o),u(e,t,n,i,r,a,s,o)}else e.x=n,e.y=i,e.point=t}else u(e,t,n,i,r,a,s,o)}function u(e,t,n,i,r,s,o,l){var u=.5*(r+o),c=.5*(s+l),d=n>=u,f=i>=c,h=f<<1|d;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=_i()),d?r=u:o=u,f?s=c:l=c,a(e,t,n,i,r,s,o,l)}var c,d,f,h,p,m,_,g,v,y=Ce(o),b=Ce(l);if(null!=t)m=t,_=n,g=i,v=r;else if(g=v=-(m=_=1/0),d=[],f=[],p=e.length,s)for(h=0;p>h;++h)c=e[h],c.x<m&&(m=c.x),c.y<_&&(_=c.y),c.x>g&&(g=c.x),c.y>v&&(v=c.y),d.push(c.x),f.push(c.y);else for(h=0;p>h;++h){var x=+y(c=e[h],h),w=+b(c,h);m>x&&(m=x),_>w&&(_=w),x>g&&(g=x),w>v&&(v=w),d.push(x),f.push(w)}var L=g-m,S=v-_;L>S?v=_+L:g=m+S;var E=_i();if(E.add=function(e){a(E,e,+y(e,++h),+b(e,h),m,_,g,v)},E.visit=function(e){gi(e,E,m,_,g,v)},E.find=function(e){return vi(E,e[0],e[1],m,_,g,v)},h=-1,null==t){for(;++h<p;)a(E,e[h],d[h],f[h],m,_,g,v);--h}else e.forEach(E.add);return d=f=e=c=null,E}var s,o=In,l=On;return(s=arguments.length)?(o=pi,l=mi,3===s&&(r=n,i=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(o=e,a):o},a.y=function(e){return arguments.length?(l=e,a):l},a.extent=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=+e[0][0],n=+e[0][1],i=+e[1][0],r=+e[1][1]),a):null==t?null:[[t,n],[i,r]]},a.size=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=n=0,i=+e[0],r=+e[1]),a):null==t?null:[i-t,r-n]},a)},ss.interpolateRgb=yi,ss.interpolateObject=bi,ss.interpolateNumber=xi,ss.interpolateString=wi;var ml=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_l=new RegExp(ml.source,"g");ss.interpolate=Li,ss.interpolators=[function(e,t){var n=typeof t;return("string"===n?so.has(t)||/^(#|rgb\(|hsl\()/.test(t)?yi:wi:t instanceof ce?yi:Array.isArray(t)?Si:"object"===n&&isNaN(t)?bi:xi)(e,t)}],ss.interpolateArray=Si;var gl=function(){return Re},vl=ss.map({linear:gl,poly:Ri,quad:function(){return Mi},cubic:function(){return Ai},sin:function(){return Di},exp:function(){return Ii},circle:function(){return Oi},elastic:Ni,back:Fi,bounce:function(){return Bi}}),yl=ss.map({"in":Re,out:ki,"in-out":Ti,"out-in":function(e){return Ti(ki(e))}});ss.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,i=t>=0?e.slice(t+1):"in";return n=vl.get(n)||gl,i=yl.get(i)||Re,Ei(i(n.apply(null,os.call(arguments,1))))},ss.interpolateHcl=Pi,ss.interpolateHsl=Ui,ss.interpolateLab=Yi,ss.interpolateRound=Hi,ss.transform=function(e){var t=us.createElementNS(ss.ns.prefix.svg,"g");return(ss.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Gi(n?n.matrix:bl)})(e)},Gi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var bl={a:1,b:0,c:0,d:1,e:0,f:0};ss.interpolateTransform=$i,ss.layout={},ss.layout.bundle=function(){return function(e){for(var t=[],n=-1,i=e.length;++n<i;)t.push(Ki(e[n]));return t}},ss.layout.chord=function(){function e(){var e,u,d,f,h,p={},m=[],_=ss.range(a),g=[];for(n=[],i=[],e=0,f=-1;++f<a;){for(u=0,h=-1;++h<a;)u+=r[f][h];m.push(u),g.push(ss.range(a)),e+=u}for(s&&_.sort(function(e,t){return s(m[e],m[t])}),o&&g.forEach(function(e,t){e.sort(function(e,n){return o(r[t][e],r[t][n])})}),e=(Hs-c*a)/e,u=0,f=-1;++f<a;){for(d=u,h=-1;++h<a;){var v=_[f],y=g[v][h],b=r[v][y],x=u,w=u+=b*e;p[v+"-"+y]={index:v,subindex:y,startAngle:x,endAngle:w,value:b}}i[v]={index:v,startAngle:d,endAngle:u,value:(u-d)/e},u+=c}for(f=-1;++f<a;)for(h=f-1;++h<a;){var L=p[f+"-"+h],S=p[h+"-"+f];(L.value||S.value)&&n.push(L.value<S.value?{source:S,target:L}:{source:L,target:S})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,i,r,a,s,o,l,u={},c=0;return u.matrix=function(e){return arguments.length?(a=(r=e)&&r.length,n=i=null,u):r},u.padding=function(e){return arguments.length?(c=e,n=i=null,u):c},u.sortGroups=function(e){return arguments.length?(s=e,n=i=null,u):s},u.sortSubgroups=function(e){return arguments.length?(o=e,n=null,u):o},u.sortChords=function(e){return arguments.length?(l=e,n&&t(),u):l},u.chords=function(){return n||e(),n},u.groups=function(){return i||e(),i},u},ss.layout.force=function(){function e(e){return function(t,n,i,r){if(t.point!==e){var a=t.cx-e.x,s=t.cy-e.y,o=r-n,l=a*a+s*s;if(l>o*o/_){if(p>l){var u=t.charge/l;e.px-=a*u,e.py-=s*u}return!0}if(t.point&&l&&p>l){var u=t.pointCharge/l;e.px-=a*u,e.py-=s*u}}return!t.charge}}function t(e){e.px=ss.event.x,e.py=ss.event.y,o.resume()}var n,i,r,a,s,o={},l=ss.dispatch("start","tick","end"),u=[1,1],c=.9,d=xl,f=wl,h=-30,p=Ll,m=.1,_=.64,g=[],v=[];return o.tick=function(){if((i*=.99)<.005)return l.end({type:"end",alpha:i=0}),!0;var t,n,o,d,f,p,_,y,b,x=g.length,w=v.length;for(n=0;w>n;++n)o=v[n],d=o.source,f=o.target,y=f.x-d.x,b=f.y-d.y,(p=y*y+b*b)&&(p=i*a[n]*((p=Math.sqrt(p))-r[n])/p,y*=p,b*=p,f.x-=y*(_=d.weight/(f.weight+d.weight)),f.y-=b*_,d.x+=y*(_=1-_),d.y+=b*_);if((_=i*m)&&(y=u[0]/2,b=u[1]/2,n=-1,_))for(;++n<x;)o=g[n],o.x+=(y-o.x)*_,o.y+=(b-o.y)*_;if(h)for(nr(t=ss.geom.quadtree(g),i,s),n=-1;++n<x;)(o=g[n]).fixed||t.visit(e(o));for(n=-1;++n<x;)o=g[n],o.fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*c,o.y-=(o.py-(o.py=o.y))*c);l.tick({type:"tick",alpha:i})},o.nodes=function(e){return arguments.length?(g=e,o):g},o.links=function(e){return arguments.length?(v=e,o):v},o.size=function(e){return arguments.length?(u=e,o):u},o.linkDistance=function(e){return arguments.length?(d="function"==typeof e?e:+e,o):d},o.distance=o.linkDistance,o.linkStrength=function(e){return arguments.length?(f="function"==typeof e?e:+e,o):f},o.friction=function(e){return arguments.length?(c=+e,o):c},o.charge=function(e){return arguments.length?(h="function"==typeof e?e:+e,o):h},o.chargeDistance=function(e){return arguments.length?(p=e*e,o):Math.sqrt(p)},o.gravity=function(e){return arguments.length?(m=+e,o):m},o.theta=function(e){return arguments.length?(_=e*e,o):Math.sqrt(_)},o.alpha=function(e){return arguments.length?(e=+e,i?i=e>0?e:0:e>0&&(l.start({type:"start",alpha:i=e}),ss.timer(o.tick)),o):i},o.start=function(){function e(e,i){if(!n){for(n=new Array(l),o=0;l>o;++o)n[o]=[];for(o=0;u>o;++o){var r=v[o];n[r.source.index].push(r.target),n[r.target.index].push(r.source)}}for(var a,s=n[t],o=-1,u=s.length;++o<u;)if(!isNaN(a=s[o][e]))return a;return Math.random()*i}var t,n,i,l=g.length,c=v.length,p=u[0],m=u[1];for(t=0;l>t;++t)(i=g[t]).index=t,i.weight=0;for(t=0;c>t;++t)i=v[t],"number"==typeof i.source&&(i.source=g[i.source]),"number"==typeof i.target&&(i.target=g[i.target]),++i.source.weight,++i.target.weight;for(t=0;l>t;++t)i=g[t],isNaN(i.x)&&(i.x=e("x",p)),isNaN(i.y)&&(i.y=e("y",m)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(r=[],"function"==typeof d)for(t=0;c>t;++t)r[t]=+d.call(this,v[t],t);else for(t=0;c>t;++t)r[t]=d;if(a=[],"function"==typeof f)for(t=0;c>t;++t)a[t]=+f.call(this,v[t],t);else for(t=0;c>t;++t)a[t]=f;if(s=[],"function"==typeof h)for(t=0;l>t;++t)s[t]=+h.call(this,g[t],t);else for(t=0;l>t;++t)s[t]=h;return o.resume()},o.resume=function(){return o.alpha(.1)},o.stop=function(){return o.alpha(0)},o.drag=function(){return n||(n=ss.behavior.drag().origin(Re).on("dragstart.force",Zi).on("drag.force",t).on("dragend.force",Qi)),arguments.length?(this.on("mouseover.force",er).on("mouseout.force",tr).call(n),void 0):n},ss.rebind(o,l,"on")};var xl=20,wl=1,Ll=1/0;ss.layout.hierarchy=function(){function e(r){var a,s=[r],o=[];for(r.depth=0;null!=(a=s.pop());)if(o.push(a),(u=n.call(e,a,a.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)s.push(c=u[l]),c.parent=a,c.depth=a.depth+1;i&&(a.value=0),a.children=u}else i&&(a.value=+i.call(e,a,a.depth)||0),delete a.children;return ar(r,function(e){var n,r;t&&(n=e.children)&&n.sort(t),i&&(r=e.parent)&&(r.value+=e.value)}),o}var t=lr,n=sr,i=or;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(i=t,e):i},e.revalue=function(t){return i&&(rr(t,function(e){e.children&&(e.value=0)}),ar(t,function(t){var n;t.children||(t.value=+i.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},ss.layout.partition=function(){function e(t,n,i,r){var a=t.children;if(t.x=n,t.y=t.depth*r,t.dx=i,t.dy=r,a&&(s=a.length)){var s,o,l,u=-1;for(i=t.value?i/t.value:0;++u<s;)e(o=a[u],n,l=o.value*i,r),n+=l}}function t(e){var n=e.children,i=0;if(n&&(r=n.length))for(var r,a=-1;++a<r;)i=Math.max(i,t(n[a]));return 1+i}function n(n,a){var s=i.call(this,n,a);return e(s[0],0,r[0],r[1]/t(s[0])),s}var i=ss.layout.hierarchy(),r=[1,1];return n.size=function(e){return arguments.length?(r=e,n):r},ir(n,i)},ss.layout.pie=function(){function e(s){var o,l=s.length,u=s.map(function(n,i){return+t.call(e,n,i)}),c=+("function"==typeof i?i.apply(this,arguments):i),d=("function"==typeof r?r.apply(this,arguments):r)-c,f=Math.min(Math.abs(d)/l,+("function"==typeof a?a.apply(this,arguments):a)),h=f*(0>d?-1:1),p=(d-l*h)/ss.sum(u),m=ss.range(l),_=[];return null!=n&&m.sort(n===Sl?function(e,t){return u[t]-u[e]}:function(e,t){return n(s[e],s[t])}),m.forEach(function(e){_[e]={data:s[e],value:o=u[e],startAngle:c,endAngle:c+=o*p+h,padAngle:f}}),_}var t=Number,n=Sl,i=0,r=Hs,a=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(i=t,e):i},e.endAngle=function(t){return arguments.length?(r=t,e):r},e.padAngle=function(t){return arguments.length?(a=t,e):a},e};var Sl={};ss.layout.stack=function(){function e(o,l){if(!(f=o.length))return o;var u=o.map(function(n,i){return t.call(e,n,i)}),c=u.map(function(t){return t.map(function(t,n){return[a.call(e,t,n),s.call(e,t,n)]})}),d=n.call(e,c,l);u=ss.permute(u,d),c=ss.permute(c,d);var f,h,p,m,_=i.call(e,c,l),g=u[0].length;for(p=0;g>p;++p)for(r.call(e,u[0][p],m=_[p],c[0][p][1]),h=1;f>h;++h)r.call(e,u[h][p],m+=c[h-1][p][1],c[h][p][1]);return o}var t=Re,n=hr,i=pr,r=fr,a=cr,s=dr;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:El.get(t)||hr,e):n},e.offset=function(t){return arguments.length?(i="function"==typeof t?t:kl.get(t)||pr,e):i},e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(s=t,e):s},e.out=function(t){return arguments.length?(r=t,e):r},e};var El=ss.map({"inside-out":function(e){var t,n,i=e.length,r=e.map(mr),a=e.map(_r),s=ss.range(i).sort(function(e,t){return r[e]-r[t]}),o=0,l=0,u=[],c=[];for(t=0;i>t;++t)n=s[t],l>o?(o+=a[n],u.push(n)):(l+=a[n],c.push(n));return c.reverse().concat(u)},reverse:function(e){return ss.range(e.length).reverse()},"default":hr}),kl=ss.map({silhouette:function(e){var t,n,i,r=e.length,a=e[0].length,s=[],o=0,l=[];for(n=0;a>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];i>o&&(o=i),s.push(i)}for(n=0;a>n;++n)l[n]=(o-s[n])/2;return l},wiggle:function(e){var t,n,i,r,a,s,o,l,u,c=e.length,d=e[0],f=d.length,h=[];for(h[0]=l=u=0,n=1;f>n;++n){for(t=0,r=0;c>t;++t)r+=e[t][n][1];for(t=0,a=0,o=d[n][0]-d[n-1][0];c>t;++t){for(i=0,s=(e[t][n][1]-e[t][n-1][1])/(2*o);t>i;++i)s+=(e[i][n][1]-e[i][n-1][1])/o;a+=s*e[t][n][1]}h[n]=l-=r?a/r*o:0,u>l&&(u=l)}for(n=0;f>n;++n)h[n]-=u;return h},expand:function(e){var t,n,i,r=e.length,a=e[0].length,s=1/r,o=[];for(n=0;a>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];if(i)for(t=0;r>t;t++)e[t][n][1]/=i;else for(t=0;r>t;t++)e[t][n][1]=s}for(n=0;a>n;++n)o[n]=0;return o},zero:pr});ss.layout.histogram=function(){function e(e,a){for(var s,o,l=[],u=e.map(n,this),c=i.call(this,u,a),d=r.call(this,c,u,a),a=-1,f=u.length,h=d.length-1,p=t?1:1/f;++a<h;)s=l[a]=[],s.dx=d[a+1]-(s.x=d[a]),s.y=0;if(h>0)for(a=-1;++a<f;)o=u[a],o>=c[0]&&o<=c[1]&&(s=l[ss.bisect(d,o,1,h)-1],s.y+=p,s.push(e[a]));return l}var t=!0,n=Number,i=br,r=vr;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(i=Ce(t),e):i},e.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return yr(e,t)}:Ce(t),e):r},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},ss.layout.pack=function(){function e(e,a){var s=n.call(this,e,a),o=s[0],l=r[0],u=r[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(o.x=o.y=0,ar(o,function(e){e.r=+c(e.value)}),ar(o,Er),i){var d=i*(t?1:Math.max(2*o.r/l,2*o.r/u))/2;ar(o,function(e){e.r+=d}),ar(o,Er),ar(o,function(e){e.r-=d})}return Mr(o,l/2,u/2,t?1:1/Math.max(2*o.r/l,2*o.r/u)),s}var t,n=ss.layout.hierarchy().sort(xr),i=0,r=[1,1];return e.size=function(t){return arguments.length?(r=t,e):r},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(i=+t,e):i},ir(e,n)},ss.layout.tree=function(){function e(e,r){var c=s.call(this,e,r),d=c[0],f=t(d);if(ar(f,n),f.parent.m=-f.z,rr(f,i),u)rr(d,a);else{var h=d,p=d,m=d;rr(d,function(e){e.x<h.x&&(h=e),e.x>p.x&&(p=e),e.depth>m.depth&&(m=e)});var _=o(h,p)/2-h.x,g=l[0]/(p.x+o(p,h)/2+_),v=l[1]/(m.depth||1);rr(d,function(e){e.x=(e.x+_)*g,e.y=e.depth*v})}return c}function t(e){for(var t,n={A:null,children:[e]},i=[n];null!=(t=i.pop());)for(var r,a=t.children,s=0,o=a.length;o>s;++s)i.push((a[s]=r={_:a[s],parent:t,children:(r=a[s].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:s}).a=r);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,i=e.i?n[e.i-1]:null;if(t.length){Or(e);var a=(t[0].z+t[t.length-1].z)/2;i?(e.z=i.z+o(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+o(e._,i._));e.parent.A=r(e,i,e.parent.A||n[0]);

}function i(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e,t,n){if(t){for(var i,r=e,a=e,s=t,l=r.parent.children[0],u=r.m,c=a.m,d=s.m,f=l.m;s=Dr(s),r=Rr(r),s&&r;)l=Rr(l),a=Dr(a),a.a=e,i=s.z+d-r.z-u+o(s._,r._),i>0&&(Ir(Nr(s,e,n),e,i),u+=i,c+=i),d+=s.m,u+=r.m,f+=l.m,c+=a.m;s&&!Dr(a)&&(a.t=s,a.m+=d-c),r&&!Rr(l)&&(l.t=r,l.m+=u-f,n=e)}return n}function a(e){e.x*=l[0],e.y=e.depth*l[1]}var s=ss.layout.hierarchy().sort(null).value(null),o=Cr,l=[1,1],u=null;return e.separation=function(t){return arguments.length?(o=t,e):o},e.size=function(t){return arguments.length?(u=null==(l=t)?a:null,e):u?null:l},e.nodeSize=function(t){return arguments.length?(u=null==(l=t)?null:a,e):u?l:null},ir(e,s)},ss.layout.cluster=function(){function e(e,a){var s,o=t.call(this,e,a),l=o[0],u=0;ar(l,function(e){var t=e.children;t&&t.length?(e.x=Br(t),e.y=Fr(t)):(e.x=s?u+=n(e,s):0,e.y=0,s=e)});var c=Pr(l),d=Ur(l),f=c.x-n(c,d)/2,h=d.x+n(d,c)/2;return ar(l,r?function(e){e.x=(e.x-l.x)*i[0],e.y=(l.y-e.y)*i[1]}:function(e){e.x=(e.x-f)/(h-f)*i[0],e.y=(1-(l.y?e.y/l.y:1))*i[1]}),o}var t=ss.layout.hierarchy().sort(null).value(null),n=Cr,i=[1,1],r=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(r=null==(i=t),e):r?null:i},e.nodeSize=function(t){return arguments.length?(r=null!=(i=t),e):r?i:null},ir(e,t)},ss.layout.treemap=function(){function e(e,t){for(var n,i,r=-1,a=e.length;++r<a;)i=(n=e[r]).value*(0>t?0:t),n.area=isNaN(i)||0>=i?0:i}function t(n){var a=n.children;if(a&&a.length){var s,o,l,u=d(n),c=[],f=a.slice(),p=1/0,m="slice"===h?u.dx:"dice"===h?u.dy:"slice-dice"===h?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(e(f,u.dx*u.dy/n.value),c.area=0;(l=f.length)>0;)c.push(s=f[l-1]),c.area+=s.area,"squarify"!==h||(o=i(c,m))<=p?(f.pop(),p=o):(c.area-=c.pop().area,r(c,m,u,!1),m=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(r(c,m,u,!0),c.length=c.area=0),a.forEach(t)}}function n(t){var i=t.children;if(i&&i.length){var a,s=d(t),o=i.slice(),l=[];for(e(o,s.dx*s.dy/t.value),l.area=0;a=o.pop();)l.push(a),l.area+=a.area,null!=a.z&&(r(l,a.z?s.dx:s.dy,s,!o.length),l.length=l.area=0);i.forEach(n)}}function i(e,t){for(var n,i=e.area,r=0,a=1/0,s=-1,o=e.length;++s<o;)(n=e[s].area)&&(a>n&&(a=n),n>r&&(r=n));return i*=i,t*=t,i?Math.max(t*r*p/i,i/(t*a*p)):1/0}function r(e,t,n,i){var r,a=-1,s=e.length,o=n.x,u=n.y,c=t?l(e.area/t):0;if(t==n.dx){for((i||c>n.dy)&&(c=n.dy);++a<s;)r=e[a],r.x=o,r.y=u,r.dy=c,o+=r.dx=Math.min(n.x+n.dx-o,c?l(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-o,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++a<s;)r=e[a],r.x=o,r.y=u,r.dx=c,u+=r.dy=Math.min(n.y+n.dy-u,c?l(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function a(i){var r=s||o(i),a=r[0];return a.x=0,a.y=0,a.dx=u[0],a.dy=u[1],s&&o.revalue(a),e([a],a.dx*a.dy/a.value),(s?n:t)(a),f&&(s=r),r}var s,o=ss.layout.hierarchy(),l=Math.round,u=[1,1],c=null,d=Yr,f=!1,h="squarify",p=.5*(1+Math.sqrt(5));return a.size=function(e){return arguments.length?(u=e,a):u},a.padding=function(e){function t(t){var n=e.call(a,t,t.depth);return null==n?Yr(t):Hr(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Hr(t,e)}if(!arguments.length)return c;var i;return d=null==(c=e)?Yr:"function"==(i=typeof e)?t:"number"===i?(e=[e,e,e,e],n):n,a},a.round=function(e){return arguments.length?(l=e?Math.round:Number,a):l!=Number},a.sticky=function(e){return arguments.length?(f=e,s=null,a):f},a.ratio=function(e){return arguments.length?(p=e,a):p},a.mode=function(e){return arguments.length?(h=e+"",a):h},ir(a,o)},ss.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return e+t*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=ss.random.normal.apply(ss,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=ss.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},ss.scale={};var Tl={floor:Re,ceil:Re};ss.scale.linear=function(){return Wr([0,1],[0,1],Li,!1)};var Ml={s:1,g:1,p:1,r:1,e:1};ss.scale.log=function(){return na(ss.scale.linear().domain([0,1]),10,!0,[1,10])};var Al=ss.format(".0e"),Cl={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};ss.scale.pow=function(){return ia(ss.scale.linear(),1,[0,1])},ss.scale.sqrt=function(){return ss.scale.pow().exponent(.5)},ss.scale.ordinal=function(){return aa([],{t:"range",a:[[]]})},ss.scale.category10=function(){return ss.scale.ordinal().range(Rl)},ss.scale.category20=function(){return ss.scale.ordinal().range(Dl)},ss.scale.category20b=function(){return ss.scale.ordinal().range(Il)},ss.scale.category20c=function(){return ss.scale.ordinal().range(Ol)};var Rl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Le),Dl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Le),Il=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Le),Ol=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Le);ss.scale.quantile=function(){return sa([],[])},ss.scale.quantize=function(){return oa(0,1,[0,1])},ss.scale.threshold=function(){return la([.5],[0,1])},ss.scale.identity=function(){return ua([0,1])},ss.svg={},ss.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+i.apply(this,arguments)),c=s.apply(this,arguments)-js,d=o.apply(this,arguments)-js,f=Math.abs(d-c),h=c>d?0:1;if(e>u&&(p=u,u=e,e=p),f>=Gs)return t(u,h)+(e?t(e,1-h):"")+"Z";var p,m,_,g,v,y,b,x,w,L,S,E,k=0,T=0,M=[];if((g=(+l.apply(this,arguments)||0)/2)&&(_=a===Nl?Math.sqrt(e*e+u*u):+a.apply(this,arguments),h||(T*=-1),u&&(T=ae(_/u*Math.sin(g))),e&&(k=ae(_/e*Math.sin(g)))),u){v=u*Math.cos(c+T),y=u*Math.sin(c+T),b=u*Math.cos(d-T),x=u*Math.sin(d-T);var A=Math.abs(d-c-2*T)<=Ys?0:1;if(T&&_a(v,y,b,x)===h^A){var C=(c+d)/2;v=u*Math.cos(C),y=u*Math.sin(C),b=x=null}}else v=y=0;if(e){w=e*Math.cos(d-k),L=e*Math.sin(d-k),S=e*Math.cos(c+k),E=e*Math.sin(c+k);var R=Math.abs(c-d+2*k)<=Ys?0:1;if(k&&_a(w,L,S,E)===1-h^R){var D=(c+d)/2;w=e*Math.cos(D),L=e*Math.sin(D),S=E=null}}else w=L=0;if((p=Math.min(Math.abs(u-e)/2,+r.apply(this,arguments)))>.001){m=u>e^h?0:1;var I=null==S?[w,L]:null==b?[v,y]:Pn([v,y],[S,E],[b,x],[w,L]),O=v-I[0],N=y-I[1],F=b-I[0],B=x-I[1],P=1/Math.sin(Math.acos((O*F+N*B)/(Math.sqrt(O*O+N*N)*Math.sqrt(F*F+B*B)))/2),U=Math.sqrt(I[0]*I[0]+I[1]*I[1]);if(null!=b){var Y=Math.min(p,(u-U)/(P+1)),H=ga(null==S?[w,L]:[S,E],[v,y],u,Y,h),G=ga([b,x],[w,L],u,Y,h);p===Y?M.push("M",H[0],"A",Y,",",Y," 0 0,",m," ",H[1],"A",u,",",u," 0 ",1-h^_a(H[1][0],H[1][1],G[1][0],G[1][1]),",",h," ",G[1],"A",Y,",",Y," 0 0,",m," ",G[0]):M.push("M",H[0],"A",Y,",",Y," 0 1,",m," ",G[0])}else M.push("M",v,",",y);if(null!=S){var j=Math.min(p,(e-U)/(P-1)),V=ga([v,y],[S,E],e,-j,h),z=ga([w,L],null==b?[v,y]:[b,x],e,-j,h);p===j?M.push("L",z[0],"A",j,",",j," 0 0,",m," ",z[1],"A",e,",",e," 0 ",h^_a(z[1][0],z[1][1],V[1][0],V[1][1]),",",1-h," ",V[1],"A",j,",",j," 0 0,",m," ",V[0]):M.push("L",z[0],"A",j,",",j," 0 0,",m," ",V[0])}else M.push("L",w,",",L)}else M.push("M",v,",",y),null!=b&&M.push("A",u,",",u," 0 ",A,",",h," ",b,",",x),M.push("L",w,",",L),null!=S&&M.push("A",e,",",e," 0 ",R,",",1-h," ",S,",",E);return M.push("Z"),M.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=da,i=fa,r=ca,a=Nl,s=ha,o=pa,l=ma;return e.innerRadius=function(t){return arguments.length?(n=Ce(t),e):n},e.outerRadius=function(t){return arguments.length?(i=Ce(t),e):i},e.cornerRadius=function(t){return arguments.length?(r=Ce(t),e):r},e.padRadius=function(t){return arguments.length?(a=t==Nl?Nl:Ce(t),e):a},e.startAngle=function(t){return arguments.length?(s=Ce(t),e):s},e.endAngle=function(t){return arguments.length?(o=Ce(t),e):o},e.padAngle=function(t){return arguments.length?(l=Ce(t),e):l},e.centroid=function(){var e=(+n.apply(this,arguments)+ +i.apply(this,arguments))/2,t=(+s.apply(this,arguments)+ +o.apply(this,arguments))/2-js;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Nl="auto";ss.svg.line=function(){return va(Re)};var Fl=ss.map({linear:ya,"linear-closed":ba,step:xa,"step-before":wa,"step-after":La,basis:Aa,"basis-open":Ca,"basis-closed":Ra,bundle:Da,cardinal:ka,"cardinal-open":Sa,"cardinal-closed":Ea,monotone:Pa});Fl.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Bl=[0,2/3,1/3,0],Pl=[0,1/3,2/3,0],Ul=[0,1/6,2/3,1/6];ss.svg.line.radial=function(){var e=va(Ua);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},wa.reverse=La,La.reverse=wa,ss.svg.area=function(){return Ya(Re)},ss.svg.area.radial=function(){var e=Ya(Ua);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},ss.svg.chord=function(){function e(e,o){var l=t(this,a,e,o),u=t(this,s,e,o);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,n,i){var r=t.call(e,n,i),a=o.call(e,r,i),s=l.call(e,r,i)-js,c=u.call(e,r,i)-js;return{r:a,a0:s,a1:c,p0:[a*Math.cos(s),a*Math.sin(s)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function i(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Ys)+",1 "+t}function r(e,t,n,i){return"Q 0,0 "+i}var a=Ln,s=Sn,o=Ha,l=ha,u=pa;return e.radius=function(t){return arguments.length?(o=Ce(t),e):o},e.source=function(t){return arguments.length?(a=Ce(t),e):a},e.target=function(t){return arguments.length?(s=Ce(t),e):s},e.startAngle=function(t){return arguments.length?(l=Ce(t),e):l},e.endAngle=function(t){return arguments.length?(u=Ce(t),e):u},e},ss.svg.diagonal=function(){function e(e,r){var a=t.call(this,e,r),s=n.call(this,e,r),o=(a.y+s.y)/2,l=[a,{x:a.x,y:o},{x:s.x,y:o},s];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=Ln,n=Sn,i=Ga;return e.source=function(n){return arguments.length?(t=Ce(n),e):t},e.target=function(t){return arguments.length?(n=Ce(t),e):n},e.projection=function(t){return arguments.length?(i=t,e):i},e},ss.svg.diagonal.radial=function(){var e=ss.svg.diagonal(),t=Ga,n=e.projection;return e.projection=function(e){return arguments.length?n(ja(t=e)):t},e},ss.svg.symbol=function(){function e(e,i){return(Yl.get(t.call(this,e,i))||$a)(n.call(this,e,i))}var t=za,n=Va;return e.type=function(n){return arguments.length?(t=Ce(n),e):t},e.size=function(t){return arguments.length?(n=Ce(t),e):n},e};var Yl=ss.map({circle:$a,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Gl)),n=t*Gl;return"M0,"+-t+"L"+n+",0"+" 0,"+t+" "+-n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Hl),n=t*Hl/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Hl),n=t*Hl/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});ss.svg.symbolTypes=Yl.keys();var Hl=Math.sqrt(3),Gl=Math.tan(30*Vs);Cs.transition=function(e){for(var t,n,i=jl||++ql,r=Xa(e),a=[],s=Vl||{time:Date.now(),ease:Ci,delay:0,duration:250},o=-1,l=this.length;++o<l;){a.push(t=[]);for(var u=this[o],c=-1,d=u.length;++c<d;)(n=u[c])&&Za(n,c,r,i,s),t.push(n)}return Wa(a,r,i)},Cs.interrupt=function(e){return this.each(null==e?zl:qa(Xa(e)))};var jl,Vl,zl=qa(Xa()),$l=[],ql=0;$l.call=Cs.call,$l.empty=Cs.empty,$l.node=Cs.node,$l.size=Cs.size,ss.transition=function(e,t){return e&&e.transition?jl?e.transition(t):e:Is.transition(e)},ss.transition.prototype=$l,$l.select=function(e){var t,n,i,r=this.id,a=this.namespace,s=[];e=C(e);for(var o=-1,l=this.length;++o<l;){s.push(t=[]);for(var u=this[o],c=-1,d=u.length;++c<d;)(i=u[c])&&(n=e.call(i,i.__data__,c,o))?("__data__"in i&&(n.__data__=i.__data__),Za(n,c,a,r,i[a][r]),t.push(n)):t.push(null)}return Wa(s,a,r)},$l.selectAll=function(e){var t,n,i,r,a,s=this.id,o=this.namespace,l=[];e=R(e);for(var u=-1,c=this.length;++u<c;)for(var d=this[u],f=-1,h=d.length;++f<h;)if(i=d[f]){a=i[o][s],n=e.call(i,i.__data__,f,u),l.push(t=[]);for(var p=-1,m=n.length;++p<m;)(r=n[p])&&Za(r,p,o,s,a),t.push(r)}return Wa(l,o,s)},$l.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=j(e));for(var a=0,s=this.length;s>a;a++){r.push(t=[]);for(var n=this[a],o=0,l=n.length;l>o;o++)(i=n[o])&&e.call(i,i.__data__,o,a)&&t.push(i)}return Wa(r,this.namespace,this.id)},$l.tween=function(e,t){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(e):z(this,null==t?function(t){t[i][n].tween.remove(e)}:function(r){r[i][n].tween.set(e,t)})},$l.attr=function(e,t){function n(){this.removeAttribute(o)}function i(){this.removeAttributeNS(o.space,o.local)}function r(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(o);return n!==e&&(t=s(n,e),function(e){this.setAttribute(o,t(e))})})}function a(e){return null==e?i:(e+="",function(){var t,n=this.getAttributeNS(o.space,o.local);return n!==e&&(t=s(n,e),function(e){this.setAttributeNS(o.space,o.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var s="transform"==e?$i:Li,o=ss.ns.qualify(e);return Ka(this,"attr."+e,t,o.local?a:r)},$l.attrTween=function(e,t){function n(e,n){var i=t.call(this,e,n,this.getAttribute(r));return i&&function(e){this.setAttribute(r,i(e))}}function i(e,n){var i=t.call(this,e,n,this.getAttributeNS(r.space,r.local));return i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}var r=ss.ns.qualify(e);return this.tween("attr."+e,r.local?i:n)},$l.style=function(e,t,n){function i(){this.style.removeProperty(e)}function r(t){return null==t?i:(t+="",function(){var i,r=ds.getComputedStyle(this,null).getPropertyValue(e);return r!==t&&(i=Li(r,t),function(t){this.style.setProperty(e,i(t),n)})})}var a=arguments.length;if(3>a){if("string"!=typeof e){2>a&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Ka(this,"style."+e,t,r)},$l.styleTween=function(e,t,n){function i(i,r){var a=t.call(this,i,r,ds.getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,i)},$l.text=function(e){return Ka(this,"text",e,Ja)},$l.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},$l.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=ss.ease.apply(ss,arguments)),z(this,function(i){i[n][t].ease=e}))},$l.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:z(this,"function"==typeof e?function(i,r,a){i[n][t].delay=+e.call(i,i.__data__,r,a)}:(e=+e,function(i){i[n][t].delay=e}))},$l.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:z(this,"function"==typeof e?function(i,r,a){i[n][t].duration=Math.max(1,e.call(i,i.__data__,r,a))}:(e=Math.max(1,e),function(i){i[n][t].duration=e}))},$l.each=function(e,t){var n=this.id,i=this.namespace;if(arguments.length<2){var r=Vl,a=jl;try{jl=n,z(this,function(t,r,a){Vl=t[i][n],e.call(t,t.__data__,r,a)})}finally{Vl=r,jl=a}}else z(this,function(r){var a=r[i][n];(a.event||(a.event=ss.dispatch("start","end","interrupt"))).on(e,t)});return this},$l.transition=function(){for(var e,t,n,i,r=this.id,a=++ql,s=this.namespace,o=[],l=0,u=this.length;u>l;l++){o.push(e=[]);for(var t=this[l],c=0,d=t.length;d>c;c++)(n=t[c])&&(i=n[s][r],Za(n,c,s,a,{time:i.time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration})),e.push(n)}return Wa(o,s,a)},ss.svg.axis=function(){function e(e){e.each(function(){var e,u=ss.select(this),c=this.__chart__||n,d=this.__chart__=n.copy(),f=null==l?d.ticks?d.ticks.apply(d,o):d.domain():l,h=null==t?d.tickFormat?d.tickFormat.apply(d,o):Re:t,p=u.selectAll(".tick").data(f,d),m=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ps),_=ss.transition(p.exit()).style("opacity",Ps).remove(),g=ss.transition(p.order()).style("opacity",1),v=Math.max(r,0)+s,y=jr(d),b=u.selectAll(".domain").data([0]),x=(b.enter().append("path").attr("class","domain"),ss.transition(b));m.append("line"),m.append("text");var w,L,S,E,k=m.select("line"),T=g.select("line"),M=p.select("text").text(h),A=m.select("text"),C=g.select("text"),R="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(e=Qa,w="x",S="y",L="x2",E="y2",M.attr("dy",0>R?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+y[0]+","+R*a+"V0H"+y[1]+"V"+R*a)):(e=es,w="y",S="x",L="y2",E="x2",M.attr("dy",".32em").style("text-anchor",0>R?"end":"start"),x.attr("d","M"+R*a+","+y[0]+"H0V"+y[1]+"H"+R*a)),k.attr(E,R*r),A.attr(S,R*v),T.attr(L,0).attr(E,R*r),C.attr(w,0).attr(S,R*v),d.rangeBand){var D=d,I=D.rangeBand()/2;c=d=function(e){return D(e)+I}}else c.rangeBand?c=d:_.call(e,d,c);m.call(e,c,d),g.call(e,d,d)})}var t,n=ss.scale.linear(),i=Wl,r=6,a=6,s=3,o=[10],l=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(i=t in Kl?t+"":Wl,e):i},e.ticks=function(){return arguments.length?(o=arguments,e):o},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(r=+t,a=+arguments[n-1],e):r},e.innerTickSize=function(t){return arguments.length?(r=+t,e):r},e.outerTickSize=function(t){return arguments.length?(a=+t,e):a},e.tickPadding=function(t){return arguments.length?(s=+t,e):s},e.tickSubdivide=function(){return arguments.length&&e},e};var Wl="bottom",Kl={top:1,right:1,bottom:1,left:1};ss.svg.brush=function(){function e(a){a.each(function(){var a=ss.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),s=a.selectAll(".background").data([0]);s.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),a.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var o=a.selectAll(".resize").data(p,Re);o.exit().remove(),o.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Jl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),o.style("display",e.empty()?"none":null);var c,d=ss.transition(a),f=ss.transition(s);l&&(c=jr(l),f.attr("x",c[0]).attr("width",c[1]-c[0]),n(d)),u&&(c=jr(u),f.attr("y",c[0]).attr("height",c[1]-c[0]),i(d)),t(d)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+c[+/e$/.test(e)]+","+d[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",c[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1]-c[0])}function i(e){e.select(".extent").attr("y",d[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function r(){function r(){32==ss.event.keyCode&&(M||(v=null,C[0]-=c[1],C[1]-=d[1],M=2),k())}function p(){32==ss.event.keyCode&&2==M&&(C[0]+=c[1],C[1]+=d[1],M=0,k())}function m(){var e=ss.mouse(b),r=!1;y&&(e[0]+=y[0],e[1]+=y[1]),M||(ss.event.altKey?(v||(v=[(c[0]+c[1])/2,(d[0]+d[1])/2]),C[0]=c[+(e[0]<v[0])],C[1]=d[+(e[1]<v[1])]):v=null),E&&_(e,l,0)&&(n(L),r=!0),T&&_(e,u,1)&&(i(L),r=!0),r&&(t(L),w({type:"brush",mode:M?"move":"resize"}))}function _(e,t,n){var i,r,o=jr(t),l=o[0],u=o[1],p=C[n],m=n?d:c,_=m[1]-m[0];return M&&(l-=p,u-=_+p),i=(n?h:f)?Math.max(l,Math.min(u,e[n])):e[n],M?r=(i+=p)+_:(v&&(p=Math.max(l,Math.min(u,2*v[n]-i))),i>p?(r=i,i=p):r=p),m[0]!=i||m[1]!=r?(n?s=null:a=null,m[0]=i,m[1]=r,!0):void 0}function g(){m(),L.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),ss.select("body").style("cursor",null),R.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),w({type:"brushend"})}var v,y,b=this,x=ss.select(ss.event.target),w=o.of(b,arguments),L=ss.select(b),S=x.datum(),E=!/^(n|s)$/.test(S)&&l,T=!/^(e|w)$/.test(S)&&u,M=x.classed("extent"),A=X(),C=ss.mouse(b),R=ss.select(ds).on("keydown.brush",r).on("keyup.brush",p);if(ss.event.changedTouches?R.on("touchmove.brush",m).on("touchend.brush",g):R.on("mousemove.brush",m).on("mouseup.brush",g),L.interrupt().selectAll("*").interrupt(),M)C[0]=c[0]-C[0],C[1]=d[0]-C[1];else if(S){var D=+/w$/.test(S),I=+/^n/.test(S);y=[c[1-D]-C[0],d[1-I]-C[1]],C[0]=c[D],C[1]=d[I]}else ss.event.altKey&&(v=C.slice());L.style("pointer-events","none").selectAll(".resize").style("display",null),ss.select("body").style("cursor",x.style("cursor")),w({type:"brushstart"}),m()}var a,s,o=M(e,"brushstart","brush","brushend"),l=null,u=null,c=[0,0],d=[0,0],f=!0,h=!0,p=Xl[0];return e.event=function(e){e.each(function(){var e=o.of(this,arguments),t={x:c,y:d,i:a,j:s},n=this.__chart__||t;this.__chart__=t,jl?ss.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,c=n.x,d=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=Si(c,t.x),i=Si(d,t.y);return a=s=null,function(r){c=t.x=n(r),d=t.y=i(r),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(l=t,p=Xl[!l<<1|!u],e):l},e.y=function(t){return arguments.length?(u=t,p=Xl[!l<<1|!u],e):u},e.clamp=function(t){return arguments.length?(l&&u?(f=!!t[0],h=!!t[1]):l?f=!!t:u&&(h=!!t),e):l&&u?[f,h]:l?f:u?h:null},e.extent=function(t){var n,i,r,o,f;return arguments.length?(l&&(n=t[0],i=t[1],u&&(n=n[0],i=i[0]),a=[n,i],l.invert&&(n=l(n),i=l(i)),n>i&&(f=n,n=i,i=f),(n!=c[0]||i!=c[1])&&(c=[n,i])),u&&(r=t[0],o=t[1],l&&(r=r[1],o=o[1]),s=[r,o],u.invert&&(r=u(r),o=u(o)),r>o&&(f=r,r=o,o=f),(r!=d[0]||o!=d[1])&&(d=[r,o])),e):(l&&(a?(n=a[0],i=a[1]):(n=c[0],i=c[1],l.invert&&(n=l.invert(n),i=l.invert(i)),n>i&&(f=n,n=i,i=f))),u&&(s?(r=s[0],o=s[1]):(r=d[0],o=d[1],u.invert&&(r=u.invert(r),o=u.invert(o)),r>o&&(f=r,r=o,o=f))),l&&u?[[n,r],[i,o]]:l?[n,i]:u&&[r,o])},e.clear=function(){return e.empty()||(c=[0,0],d=[0,0],a=s=null),e},e.empty=function(){return!!l&&c[0]==c[1]||!!u&&d[0]==d[1]},ss.rebind(e,o,"on")};var Jl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Xl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Zl=go.format=Lo.timeFormat,Ql=Zl.utc,eu=Ql("%Y-%m-%dT%H:%M:%S.%LZ");Zl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ts:eu,ts.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},ts.toString=eu.toString,go.second=Ve(function(e){return new vo(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),go.seconds=go.second.range,go.seconds.utc=go.second.utc.range,go.minute=Ve(function(e){return new vo(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),go.minutes=go.minute.range,go.minutes.utc=go.minute.utc.range,go.hour=Ve(function(e){var t=e.getTimezoneOffset()/60;return new vo(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),go.hours=go.hour.range,go.hours.utc=go.hour.utc.range,go.month=Ve(function(e){return e=go.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),go.months=go.month.range,go.months.utc=go.month.utc.range;var tu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],nu=[[go.second,1],[go.second,5],[go.second,15],[go.second,30],[go.minute,1],[go.minute,5],[go.minute,15],[go.minute,30],[go.hour,1],[go.hour,3],[go.hour,6],[go.hour,12],[go.day,1],[go.day,2],[go.week,1],[go.month,1],[go.month,3],[go.year,1]],iu=Zl.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",It]]),ru={range:function(e,t,n){return ss.range(Math.ceil(e/n)*n,+t,n).map(is)},floor:Re,ceil:Re};nu.year=go.year,go.scale=function(){return ns(ss.scale.linear(),nu,iu)};var au=nu.map(function(e){return[e[0].utc,e[1]]}),su=Ql.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",It]]);au.year=go.year.utc,go.scale.utc=function(){return ns(ss.scale.linear(),au,su)},ss.text=De(function(e){return e.responseText}),ss.json=function(e,t){return Ie(e,"application/json",rs,t)},ss.html=function(e,t){return Ie(e,"text/html",as,t)},ss.xml=De(function(e){return e.responseXML}),true?!(i=ss,r=typeof i==="function"?i.call(t,n,t,e):i,r!==undefined&&(e.exports=r)):"object"==typeof e&&e.exports&&(e.exports=ss),this.d3=ss}();e.exports=d3},function(e,t,n){var i,r;(function(){var n=this;var a=n._;var s=Array.prototype,o=Object.prototype,l=Function.prototype;var u=s.push,c=s.slice,d=o.toString,f=o.hasOwnProperty;var h=Array.isArray,p=Object.keys,m=l.bind,_=Object.create;var g=function(){};var v=function(e){if(e instanceof v)return e;if(!(this instanceof v))return new v(e);this._wrapped=e};if(true){if(typeof e!=="undefined"&&e.exports){t=e.exports=v}t._=v}else{n._=v}v.VERSION="1.8.3";var y=function(e,t,n){if(t===void 0)return e;switch(n==null?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,a){return e.call(t,n,i,r,a)}}return function(){return e.apply(t,arguments)}};var b=function(e,t,n){if(e==null)return v.identity;if(v.isFunction(e))return y(e,t,n);if(v.isObject(e))return v.matcher(e);return v.property(e)};v.iteratee=function(e,t){return b(e,t,Infinity)};var x=function(e,t){return function(n){var i=arguments.length;if(i<2||n==null)return n;for(var r=1;r<i;r++){var a=arguments[r],s=e(a),o=s.length;for(var l=0;l<o;l++){var u=s[l];if(!t||n[u]===void 0)n[u]=a[u]}}return n}};var w=function(e){if(!v.isObject(e))return{};if(_)return _(e);g.prototype=e;var t=new g;g.prototype=null;return t};var L=function(e){return function(t){return t==null?void 0:t[e]}};var S=Math.pow(2,53)-1;var E=L("length");var k=function(e){var t=E(e);return typeof t=="number"&&t>=0&&t<=S};v.each=v.forEach=function(e,t,n){t=y(t,n);var i,r;if(k(e)){for(i=0,r=e.length;i<r;i++){t(e[i],i,e)}}else{var a=v.keys(e);for(i=0,r=a.length;i<r;i++){t(e[a[i]],a[i],e)}}return e};v.map=v.collect=function(e,t,n){t=b(t,n);var i=!k(e)&&v.keys(e),r=(i||e).length,a=Array(r);for(var s=0;s<r;s++){var o=i?i[s]:s;a[s]=t(e[o],o,e)}return a};function T(e){function t(t,n,i,r,a,s){for(;a>=0&&a<s;a+=e){var o=r?r[a]:a;i=n(i,t[o],o,t)}return i}return function(n,i,r,a){i=y(i,a,4);var s=!k(n)&&v.keys(n),o=(s||n).length,l=e>0?0:o-1;if(arguments.length<3){r=n[s?s[l]:l];l+=e}return t(n,i,r,s,l,o)}}v.reduce=v.foldl=v.inject=T(1);v.reduceRight=v.foldr=T(-1);v.find=v.detect=function(e,t,n){var i;if(k(e)){i=v.findIndex(e,t,n)}else{i=v.findKey(e,t,n)}if(i!==void 0&&i!==-1)return e[i]};v.filter=v.select=function(e,t,n){var i=[];t=b(t,n);v.each(e,function(e,n,r){if(t(e,n,r))i.push(e)});return i};v.reject=function(e,t,n){return v.filter(e,v.negate(b(t)),n)};v.every=v.all=function(e,t,n){t=b(t,n);var i=!k(e)&&v.keys(e),r=(i||e).length;for(var a=0;a<r;a++){var s=i?i[a]:a;if(!t(e[s],s,e))return false}return true};v.some=v.any=function(e,t,n){t=b(t,n);var i=!k(e)&&v.keys(e),r=(i||e).length;for(var a=0;a<r;a++){var s=i?i[a]:a;if(t(e[s],s,e))return true}return false};v.contains=v.includes=v.include=function(e,t,n,i){if(!k(e))e=v.values(e);if(typeof n!="number"||i)n=0;return v.indexOf(e,t,n)>=0};v.invoke=function(e,t){var n=c.call(arguments,2);var i=v.isFunction(t);return v.map(e,function(e){var r=i?t:e[t];return r==null?r:r.apply(e,n)})};v.pluck=function(e,t){return v.map(e,v.property(t))};v.where=function(e,t){return v.filter(e,v.matcher(t))};v.findWhere=function(e,t){return v.find(e,v.matcher(t))};v.max=function(e,t,n){var i=-Infinity,r=-Infinity,a,s;if(t==null&&e!=null){e=k(e)?e:v.values(e);for(var o=0,l=e.length;o<l;o++){a=e[o];if(a>i){i=a}}}else{t=b(t,n);v.each(e,function(e,n,a){s=t(e,n,a);if(s>r||s===-Infinity&&i===-Infinity){i=e;r=s}})}return i};v.min=function(e,t,n){var i=Infinity,r=Infinity,a,s;if(t==null&&e!=null){e=k(e)?e:v.values(e);for(var o=0,l=e.length;o<l;o++){a=e[o];if(a<i){i=a}}}else{t=b(t,n);v.each(e,function(e,n,a){s=t(e,n,a);if(s<r||s===Infinity&&i===Infinity){i=e;r=s}})}return i};v.shuffle=function(e){var t=k(e)?e:v.values(e);var n=t.length;var i=Array(n);for(var r=0,a;r<n;r++){a=v.random(0,r);if(a!==r)i[r]=i[a];i[a]=t[r]}return i};v.sample=function(e,t,n){if(t==null||n){if(!k(e))e=v.values(e);return e[v.random(e.length-1)]}return v.shuffle(e).slice(0,Math.max(0,t))};v.sortBy=function(e,t,n){t=b(t,n);return v.pluck(v.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria;var i=t.criteria;if(n!==i){if(n>i||n===void 0)return 1;if(n<i||i===void 0)return-1}return e.index-t.index}),"value")};var M=function(e){return function(t,n,i){var r={};n=b(n,i);v.each(t,function(i,a){var s=n(i,a,t);e(r,i,s)});return r}};v.groupBy=M(function(e,t,n){if(v.has(e,n))e[n].push(t);else e[n]=[t]});v.indexBy=M(function(e,t,n){e[n]=t});v.countBy=M(function(e,t,n){if(v.has(e,n))e[n]++;else e[n]=1});v.toArray=function(e){if(!e)return[];if(v.isArray(e))return c.call(e);if(k(e))return v.map(e,v.identity);return v.values(e)};v.size=function(e){if(e==null)return 0;return k(e)?e.length:v.keys(e).length};v.partition=function(e,t,n){t=b(t,n);var i=[],r=[];v.each(e,function(e,n,a){(t(e,n,a)?i:r).push(e)});return[i,r]};v.first=v.head=v.take=function(e,t,n){if(e==null)return void 0;if(t==null||n)return e[0];return v.initial(e,e.length-t)};v.initial=function(e,t,n){return c.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))};v.last=function(e,t,n){if(e==null)return void 0;if(t==null||n)return e[e.length-1];return v.rest(e,Math.max(0,e.length-t))};v.rest=v.tail=v.drop=function(e,t,n){return c.call(e,t==null||n?1:t)};v.compact=function(e){return v.filter(e,v.identity)};var A=function(e,t,n,i){var r=[],a=0;for(var s=i||0,o=E(e);s<o;s++){var l=e[s];if(k(l)&&(v.isArray(l)||v.isArguments(l))){if(!t)l=A(l,t,n);var u=0,c=l.length;r.length+=c;while(u<c){r[a++]=l[u++]}}else if(!n){r[a++]=l}}return r};v.flatten=function(e,t){return A(e,t,false)};v.without=function(e){return v.difference(e,c.call(arguments,1))};v.uniq=v.unique=function(e,t,n,i){if(!v.isBoolean(t)){i=n;n=t;t=false}if(n!=null)n=b(n,i);var r=[];var a=[];for(var s=0,o=E(e);s<o;s++){var l=e[s],u=n?n(l,s,e):l;if(t){if(!s||a!==u)r.push(l);a=u}else if(n){if(!v.contains(a,u)){a.push(u);r.push(l)}}else if(!v.contains(r,l)){r.push(l)}}return r};v.union=function(){return v.uniq(A(arguments,true,true))};v.intersection=function(e){var t=[];var n=arguments.length;for(var i=0,r=E(e);i<r;i++){var a=e[i];if(v.contains(t,a))continue;

for(var s=1;s<n;s++){if(!v.contains(arguments[s],a))break}if(s===n)t.push(a)}return t};v.difference=function(e){var t=A(arguments,true,true,1);return v.filter(e,function(e){return!v.contains(t,e)})};v.zip=function(){return v.unzip(arguments)};v.unzip=function(e){var t=e&&v.max(e,E).length||0;var n=Array(t);for(var i=0;i<t;i++){n[i]=v.pluck(e,i)}return n};v.object=function(e,t){var n={};for(var i=0,r=E(e);i<r;i++){if(t){n[e[i]]=t[i]}else{n[e[i][0]]=e[i][1]}}return n};function C(e){return function(t,n,i){n=b(n,i);var r=E(t);var a=e>0?0:r-1;for(;a>=0&&a<r;a+=e){if(n(t[a],a,t))return a}return-1}}v.findIndex=C(1);v.findLastIndex=C(-1);v.sortedIndex=function(e,t,n,i){n=b(n,i,1);var r=n(t);var a=0,s=E(e);while(a<s){var o=Math.floor((a+s)/2);if(n(e[o])<r)a=o+1;else s=o}return a};function R(e,t,n){return function(i,r,a){var s=0,o=E(i);if(typeof a=="number"){if(e>0){s=a>=0?a:Math.max(a+o,s)}else{o=a>=0?Math.min(a+1,o):a+o+1}}else if(n&&a&&o){a=n(i,r);return i[a]===r?a:-1}if(r!==r){a=t(c.call(i,s,o),v.isNaN);return a>=0?a+s:-1}for(a=e>0?s:o-1;a>=0&&a<o;a+=e){if(i[a]===r)return a}return-1}}v.indexOf=R(1,v.findIndex,v.sortedIndex);v.lastIndexOf=R(-1,v.findLastIndex);v.range=function(e,t,n){if(t==null){t=e||0;e=0}n=n||1;var i=Math.max(Math.ceil((t-e)/n),0);var r=Array(i);for(var a=0;a<i;a++,e+=n){r[a]=e}return r};var D=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var a=w(e.prototype);var s=e.apply(a,r);if(v.isObject(s))return s;return a};v.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,c.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2);var i=function(){return D(e,i,t,this,n.concat(c.call(arguments)))};return i};v.partial=function(e){var t=c.call(arguments,1);var n=function(){var i=0,r=t.length;var a=Array(r);for(var s=0;s<r;s++){a[s]=t[s]===v?arguments[i++]:t[s]}while(i<arguments.length)a.push(arguments[i++]);return D(e,n,this,this,a)};return n};v.bindAll=function(e){var t,n=arguments.length,i;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++){i=arguments[t];e[i]=v.bind(e[i],e)}return e};v.memoize=function(e,t){var n=function(i){var r=n.cache;var a=""+(t?t.apply(this,arguments):i);if(!v.has(r,a))r[a]=e.apply(this,arguments);return r[a]};n.cache={};return n};v.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)};v.defer=v.partial(v.delay,v,1);v.throttle=function(e,t,n){var i,r,a;var s=null;var o=0;if(!n)n={};var l=function(){o=n.leading===false?0:v.now();s=null;a=e.apply(i,r);if(!s)i=r=null};return function(){var u=v.now();if(!o&&n.leading===false)o=u;var c=t-(u-o);i=this;r=arguments;if(c<=0||c>t){if(s){clearTimeout(s);s=null}o=u;a=e.apply(i,r);if(!s)i=r=null}else if(!s&&n.trailing!==false){s=setTimeout(l,c)}return a}};v.debounce=function(e,t,n){var i,r,a,s,o;var l=function(){var u=v.now()-s;if(u<t&&u>=0){i=setTimeout(l,t-u)}else{i=null;if(!n){o=e.apply(a,r);if(!i)a=r=null}}};return function(){a=this;r=arguments;s=v.now();var u=n&&!i;if(!i)i=setTimeout(l,t);if(u){o=e.apply(a,r);a=r=null}return o}};v.wrap=function(e,t){return v.partial(t,e)};v.negate=function(e){return function(){return!e.apply(this,arguments)}};v.compose=function(){var e=arguments;var t=e.length-1;return function(){var n=t;var i=e[t].apply(this,arguments);while(n--)i=e[n].call(this,i);return i}};v.after=function(e,t){return function(){if(--e<1){return t.apply(this,arguments)}}};v.before=function(e,t){var n;return function(){if(--e>0){n=t.apply(this,arguments)}if(e<=1)t=null;return n}};v.once=v.partial(v.before,2);var I=!{toString:null}.propertyIsEnumerable("toString");var O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function N(e,t){var n=O.length;var i=e.constructor;var r=v.isFunction(i)&&i.prototype||o;var a="constructor";if(v.has(e,a)&&!v.contains(t,a))t.push(a);while(n--){a=O[n];if(a in e&&e[a]!==r[a]&&!v.contains(t,a)){t.push(a)}}}v.keys=function(e){if(!v.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)if(v.has(e,n))t.push(n);if(I)N(e,t);return t};v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var n in e)t.push(n);if(I)N(e,t);return t};v.values=function(e){var t=v.keys(e);var n=t.length;var i=Array(n);for(var r=0;r<n;r++){i[r]=e[t[r]]}return i};v.mapObject=function(e,t,n){t=b(t,n);var i=v.keys(e),r=i.length,a={},s;for(var o=0;o<r;o++){s=i[o];a[s]=t(e[s],s,e)}return a};v.pairs=function(e){var t=v.keys(e);var n=t.length;var i=Array(n);for(var r=0;r<n;r++){i[r]=[t[r],e[t[r]]]}return i};v.invert=function(e){var t={};var n=v.keys(e);for(var i=0,r=n.length;i<r;i++){t[e[n[i]]]=n[i]}return t};v.functions=v.methods=function(e){var t=[];for(var n in e){if(v.isFunction(e[n]))t.push(n)}return t.sort()};v.extend=x(v.allKeys);v.extendOwn=v.assign=x(v.keys);v.findKey=function(e,t,n){t=b(t,n);var i=v.keys(e),r;for(var a=0,s=i.length;a<s;a++){r=i[a];if(t(e[r],r,e))return r}};v.pick=function(e,t,n){var i={},r=e,a,s;if(r==null)return i;if(v.isFunction(t)){s=v.allKeys(r);a=y(t,n)}else{s=A(arguments,false,false,1);a=function(e,t,n){return t in n};r=Object(r)}for(var o=0,l=s.length;o<l;o++){var u=s[o];var c=r[u];if(a(c,u,r))i[u]=c}return i};v.omit=function(e,t,n){if(v.isFunction(t)){t=v.negate(t)}else{var i=v.map(A(arguments,false,false,1),String);t=function(e,t){return!v.contains(i,t)}}return v.pick(e,t,n)};v.defaults=x(v.allKeys,true);v.create=function(e,t){var n=w(e);if(t)v.extendOwn(n,t);return n};v.clone=function(e){if(!v.isObject(e))return e;return v.isArray(e)?e.slice():v.extend({},e)};v.tap=function(e,t){t(e);return e};v.isMatch=function(e,t){var n=v.keys(t),i=n.length;if(e==null)return!i;var r=Object(e);for(var a=0;a<i;a++){var s=n[a];if(t[s]!==r[s]||!(s in r))return false}return true};var F=function(e,t,n,i){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return e===t;if(e instanceof v)e=e._wrapped;if(t instanceof v)t=t._wrapped;var r=d.call(e);if(r!==d.call(t))return false;switch(r){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a=r==="[object Array]";if(!a){if(typeof e!="object"||typeof t!="object")return false;var s=e.constructor,o=t.constructor;if(s!==o&&!(v.isFunction(s)&&s instanceof s&&v.isFunction(o)&&o instanceof o)&&("constructor"in e&&"constructor"in t)){return false}}n=n||[];i=i||[];var l=n.length;while(l--){if(n[l]===e)return i[l]===t}n.push(e);i.push(t);if(a){l=e.length;if(l!==t.length)return false;while(l--){if(!F(e[l],t[l],n,i))return false}}else{var u=v.keys(e),c;l=u.length;if(v.keys(t).length!==l)return false;while(l--){c=u[l];if(!(v.has(t,c)&&F(e[c],t[c],n,i)))return false}}n.pop();i.pop();return true};v.isEqual=function(e,t){return F(e,t)};v.isEmpty=function(e){if(e==null)return true;if(k(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e)))return e.length===0;return v.keys(e).length===0};v.isElement=function(e){return!!(e&&e.nodeType===1)};v.isArray=h||function(e){return d.call(e)==="[object Array]"};v.isObject=function(e){var t=typeof e;return t==="function"||t==="object"&&!!e};v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){v["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}});if(!v.isArguments(arguments)){v.isArguments=function(e){return v.has(e,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){v.isFunction=function(e){return typeof e=="function"||false}}v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))};v.isNaN=function(e){return v.isNumber(e)&&e!==+e};v.isBoolean=function(e){return e===true||e===false||d.call(e)==="[object Boolean]"};v.isNull=function(e){return e===null};v.isUndefined=function(e){return e===void 0};v.has=function(e,t){return e!=null&&f.call(e,t)};v.noConflict=function(){n._=a;return this};v.identity=function(e){return e};v.constant=function(e){return function(){return e}};v.noop=function(){};v.property=L;v.propertyOf=function(e){return e==null?function(){}:function(t){return e[t]}};v.matcher=v.matches=function(e){e=v.extendOwn({},e);return function(t){return v.isMatch(t,e)}};v.times=function(e,t,n){var i=Array(Math.max(0,e));t=y(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i};v.random=function(e,t){if(t==null){t=e;e=0}return e+Math.floor(Math.random()*(t-e+1))};v.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var P=v.invert(B);var U=function(e){var t=function(t){return e[t]};var n="(?:"+v.keys(e).join("|")+")";var i=RegExp(n);var r=RegExp(n,"g");return function(e){e=e==null?"":""+e;return i.test(e)?e.replace(r,t):e}};v.escape=U(B);v.unescape=U(P);v.result=function(e,t,n){var i=e==null?void 0:e[t];if(i===void 0){i=n}return v.isFunction(i)?i.call(e):i};var Y=0;v.uniqueId=function(e){var t=++Y+"";return e?e+t:t};v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/;var G={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var j=/\\|'|\r|\n|\u2028|\u2029/g;var V=function(e){return"\\"+G[e]};v.template=function(e,t,n){if(!t&&n)t=n;t=v.defaults({},t,v.templateSettings);var i=RegExp([(t.escape||H).source,(t.interpolate||H).source,(t.evaluate||H).source].join("|")+"|$","g");var r=0;var a="__p+='";e.replace(i,function(t,n,i,s,o){a+=e.slice(r,o).replace(j,V);r=o+t.length;if(n){a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"}else if(i){a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"}else if(s){a+="';\n"+s+"\n__p+='"}return t});a+="';\n";if(!t.variable)a="with(obj||{}){\n"+a+"}\n";a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var s=new Function(t.variable||"obj","_",a)}catch(o){o.source=a;throw o}var l=function(e){return s.call(this,e,v)};var u=t.variable||"obj";l.source="function("+u+"){\n"+a+"}";return l};v.chain=function(e){var t=v(e);t._chain=true;return t};var z=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){v.each(v.functions(e),function(t){var n=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];u.apply(e,arguments);return z(this,n.apply(v,e))}})};v.mixin(v);v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];v.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);if((e==="shift"||e==="splice")&&n.length===0)delete n[0];return z(this,n)}});v.each(["concat","join","slice"],function(e){var t=s[e];v.prototype[e]=function(){return z(this,t.apply(this._wrapped,arguments))}});v.prototype.value=function(){return this._wrapped};v.prototype.valueOf=v.prototype.toJSON=v.prototype.value;v.prototype.toString=function(){return""+this._wrapped};if(true){!(i=[],r=function(){return v}.apply(t,i),r!==undefined&&(e.exports=r))}}).call(this)},function(e,t,n){var i,r,a,s,o,l,u,c,d,f,h=[].slice;c=n(53);i=Object.getPrototypeOf;r=Object.prototype;d={},a=d.hasOwnProperty,s=d.toString;o=t.DEFAULT_DELEGATE_OPTIONS={getter:"get",setter:"set",deleter:"unset"};l=t.TOMBSTONE={};u=t.DEFAULT_NESTED_OPTIONS=p({ensure:false,tombstone:l},o);f={isMember:function(e,t){var n,i;n=c.unique([].slice.call(arguments,1));i=c.intersection(c.values(e),n);return c.isEqual(n,i)},get:function(e,t,n,i){var r;if(e==null){return}r=(i!=null?i.getter:void 8)||"get";if(typeof e[r]==="function"){return e[r](t,n,i)}else{if(e[t]!==void 8){return e[t]}else{return n}}},set:function(e,t,n,i){var r,a,s;if(e==null){return}if(t!=null&&c.isObject(t)){s=[t,n],r=s[0],i=s[1]}else{r=(s={},s[t+""]=n,s)}a=(i!=null?i.setter:void 8)||"set";if(typeof e[a]==="function"){for(t in r){n=r[t];e[a](t,n,i)}}else{for(t in r){n=r[t];e[t]=n}}return e},unset:function(e,t,n){var i,r;if(e==null){return}i=(n!=null?n.deleter:void 8)||"unset";if(typeof e[i]==="function"){return e[i](t,n)}else{return r=e[t],delete e[t],r}},getNestedMeta:function(e,t,n){var i;if(typeof t==="string"){t=t.split(".")}i=t.length-1;n=p(c.clone(u),n||{});return c.reduce(t,function(e,t,r){var a;if(e==null){return}a=f.get(e,t,void 8,n);if(a===n.tombstone){if(!ops.ensure){return}a=void 8}if(r===i){return{key:t,val:a,obj:e,opts:n}}if(a==null&&n.ensure){a={};f.set(e,t,a,n)}return a},e)},getNested:function(e,t,n,i){var r;r=f.getNestedMeta(e,t,i);if((r!=null?r.val:void 8)===void 8){return n}return r.val},setNested:function(e,t,n,i){var r,a,s;if(!(r=f.getNestedMeta(e,t,i))){return}e=r.obj,a=r.key,s=r.val,i=r.opts;f.set(e,a,n,i);return s},unsetNested:function(e,t,n){var i,r,a;if(!(i=f.getNestedMeta(e,t,n))){return}e=i.obj,r=i.key,a=i.val,n=i.opts;f.unset(e,r,n);return a},isPlainObject:function(e){var t;if(!e||s.call(e)!=="[object Object]"||e.nodeType||e.setInterval){return false}if(e.constructor&&!a.call(e,"constructor")&&!a.call(e.constructor.prototype,"isPrototypeOf")){return false}for(t in e){}return t===void 8||a.call(e,t)},remove:function(e,t){var n,i,r,a,s;n=[].slice.call(arguments,1);if(c.isArray(e)||e instanceof Array){for(a=0,s=n.length;a<s;++a){t=n[a];i=e.indexOf(t);if(i!==-1){e.splice(i,1)}}}else{for(r in e){t=e[r];if(-1!==n.indexOf(t)){delete e[r]}}}return e},items:function(e){if(c.isObject(e)&&!c.isArguments(e)){return c.map(e,function(e,t){return[t,e]})}else{return[].slice.call(e)}},merge:function(e){var t,n,i,r;e==null&&(e={});t=h.call(arguments,1);if(!(typeof e==="object"||c.isFunction(e))){e=c.isArray(t[0])?[]:{}}for(i=0,r=t.length;i<r;++i){n=t[i];if(n==null){continue}c.each(n,a)}return e;function a(t,n){var i,r;i=e[n];if(e===t){return}if(t&&(f.isPlainObject(t)||(r=c.isArray(t)))){if(r){if(!c.isArray(i)){i=[]}}else{if(!(i&&typeof i==="object")){i={}}}return f.set(e,n,f.merge(i,t))}else if(t!==void 8){return f.set(e,n,t)}}}};p(t,f);function p(e,t){var n={}.hasOwnProperty;for(var i in t)if(n.call(t,i))e[i]=t[i];return e}},function(e,t,n){(function(){var n=this;var i=n._;var r={};var a=Array.prototype,s=Object.prototype,o=Function.prototype;var l=a.slice,u=a.unshift,c=s.toString,d=s.hasOwnProperty;var f=a.forEach,h=a.map,p=a.reduce,m=a.reduceRight,_=a.filter,g=a.every,v=a.some,y=a.indexOf,b=a.lastIndexOf,x=Array.isArray,w=Object.keys,L=o.bind;var S=function(e){return new F(e)};if(true){if(typeof e!=="undefined"&&e.exports){t=e.exports=S}t._=S}else{n["_"]=S}S.VERSION="1.3.3";var E=S.each=S.forEach=function(e,t,n){if(e==null)return;if(f&&e.forEach===f){e.forEach(t,n)}else if(e.length===+e.length){for(var i=0,a=e.length;i<a;i++){if(i in e&&t.call(n,e[i],i,e)===r)return}}else{for(var s in e){if(S.has(e,s)){if(t.call(n,e[s],s,e)===r)return}}}};S.map=S.collect=function(e,t,n){var i=[];if(e==null)return i;if(h&&e.map===h)return e.map(t,n);E(e,function(e,r,a){i[i.length]=t.call(n,e,r,a)});if(e.length===+e.length)i.length=e.length;return i};S.reduce=S.foldl=S.inject=function(e,t,n,i){var r=arguments.length>2;if(e==null)e=[];if(p&&e.reduce===p){if(i)t=S.bind(t,i);return r?e.reduce(t,n):e.reduce(t)}E(e,function(e,a,s){if(!r){n=e;r=true}else{n=t.call(i,n,e,a,s)}});if(!r)throw new TypeError("Reduce of empty array with no initial value");return n};S.reduceRight=S.foldr=function(e,t,n,i){var r=arguments.length>2;if(e==null)e=[];if(m&&e.reduceRight===m){if(i)t=S.bind(t,i);return r?e.reduceRight(t,n):e.reduceRight(t)}var a=S.toArray(e).reverse();if(i&&!r)t=S.bind(t,i);return r?S.reduce(a,t,n,i):S.reduce(a,t)};S.find=S.detect=function(e,t,n){var i;k(e,function(e,r,a){if(t.call(n,e,r,a)){i=e;return true}});return i};S.filter=S.select=function(e,t,n){var i=[];if(e==null)return i;if(_&&e.filter===_)return e.filter(t,n);E(e,function(e,r,a){if(t.call(n,e,r,a))i[i.length]=e});return i};S.reject=function(e,t,n){var i=[];if(e==null)return i;E(e,function(e,r,a){if(!t.call(n,e,r,a))i[i.length]=e});return i};S.every=S.all=function(e,t,n){var i=true;if(e==null)return i;if(g&&e.every===g)return e.every(t,n);E(e,function(e,a,s){if(!(i=i&&t.call(n,e,a,s)))return r});return!!i};var k=S.some=S.any=function(e,t,n){t||(t=S.identity);var i=false;if(e==null)return i;if(v&&e.some===v)return e.some(t,n);E(e,function(e,a,s){if(i||(i=t.call(n,e,a,s)))return r});return!!i};S.include=S.contains=function(e,t){var n=false;if(e==null)return n;if(y&&e.indexOf===y)return e.indexOf(t)!=-1;n=k(e,function(e){return e===t});return n};S.invoke=function(e,t){var n=l.call(arguments,2);return S.map(e,function(e){return(S.isFunction(t)?t||e:e[t]).apply(e,n)})};S.pluck=function(e,t){return S.map(e,function(e){return e[t]})};S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-Infinity;var i={computed:-Infinity};E(e,function(e,r,a){var s=t?t.call(n,e,r,a):e;s>=i.computed&&(i={value:e,computed:s})});return i.value};S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return Infinity;var i={computed:Infinity};E(e,function(e,r,a){var s=t?t.call(n,e,r,a):e;s<i.computed&&(i={value:e,computed:s})});return i.value};S.shuffle=function(e){var t=[],n;E(e,function(e,i,r){n=Math.floor(Math.random()*(i+1));t[i]=t[n];t[n]=e});return t};S.sortBy=function(e,t,n){var i=S.isFunction(t)?t:function(e){return e[t]};return S.pluck(S.map(e,function(e,t,r){return{value:e,criteria:i.call(n,e,t,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n===void 0)return 1;if(i===void 0)return-1;return n<i?-1:n>i?1:0}),"value")};S.groupBy=function(e,t){var n={};var i=S.isFunction(t)?t:function(e){return e[t]};E(e,function(e,t){var r=i(e,t);(n[r]||(n[r]=[])).push(e)});return n};S.sortedIndex=function(e,t,n){n||(n=S.identity);var i=0,r=e.length;while(i<r){var a=i+r>>1;n(e[a])<n(t)?i=a+1:r=a}return i};S.toArray=function(e){if(!e)return[];if(S.isArray(e))return l.call(e);if(S.isArguments(e))return l.call(e);if(e.toArray&&S.isFunction(e.toArray))return e.toArray();return S.values(e)};S.size=function(e){return S.isArray(e)?e.length:S.keys(e).length};S.first=S.head=S.take=function(e,t,n){return t!=null&&!n?l.call(e,0,t):e[0]};S.initial=function(e,t,n){return l.call(e,0,e.length-(t==null||n?1:t))};S.last=function(e,t,n){if(t!=null&&!n){return l.call(e,Math.max(e.length-t,0))}else{return e[e.length-1]}};S.rest=S.tail=function(e,t,n){return l.call(e,t==null||n?1:t)};S.compact=function(e){return S.filter(e,function(e){return!!e})};S.flatten=function(e,t){return S.reduce(e,function(e,n){if(S.isArray(n))return e.concat(t?n:S.flatten(n));e[e.length]=n;return e},[])};S.without=function(e){return S.difference(e,l.call(arguments,1))};S.uniq=S.unique=function(e,t,n){var i=n?S.map(e,n):e;var r=[];if(e.length<3)t=true;S.reduce(i,function(n,i,a){if(t?S.last(n)!==i||!n.length:!S.include(n,i)){n.push(i);r.push(e[a])}return n},[]);return r};S.union=function(){return S.uniq(S.flatten(arguments,true))};S.intersection=S.intersect=function(e){var t=l.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})};S.difference=function(e){var t=S.flatten(l.call(arguments,1),true);return S.filter(e,function(e){return!S.include(t,e)})};S.zip=function(){var e=l.call(arguments);var t=S.max(S.pluck(e,"length"));var n=new Array(t);for(var i=0;i<t;i++)n[i]=S.pluck(e,""+i);return n};S.indexOf=function(e,t,n){if(e==null)return-1;var i,r;if(n){i=S.sortedIndex(e,t);return e[i]===t?i:-1}if(y&&e.indexOf===y)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(i in e&&e[i]===t)return i;return-1};S.lastIndexOf=function(e,t){if(e==null)return-1;if(b&&e.lastIndexOf===b)return e.lastIndexOf(t);var n=e.length;while(n--)if(n in e&&e[n]===t)return n;return-1};S.range=function(e,t,n){if(arguments.length<=1){t=e||0;e=0}n=arguments[2]||1;var i=Math.max(Math.ceil((t-e)/n),0);var r=0;var a=new Array(i);while(r<i){a[r++]=e;e+=n}return a};var T=function(){};S.bind=function U(e,t){var n,i;if(e.bind===L&&L)return L.apply(e,l.call(arguments,1));if(!S.isFunction(e))throw new TypeError;i=l.call(arguments,2);return n=function(){if(!(this instanceof n))return e.apply(t,i.concat(l.call(arguments)));T.prototype=e.prototype;var r=new T;var a=e.apply(r,i.concat(l.call(arguments)));if(Object(a)===a)return a;return r}};S.bindAll=function(e){var t=l.call(arguments,1);if(t.length==0)t=S.functions(e);E(t,function(t){e[t]=S.bind(e[t],e)});return e};S.memoize=function(e,t){var n={};t||(t=S.identity);return function(){var i=t.apply(this,arguments);return S.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}};S.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)};S.defer=function(e){return S.delay.apply(S,[e,1].concat(l.call(arguments,1)))};S.throttle=function(e,t){var n,i,r,a,s,o;var l=S.debounce(function(){s=a=false},t);return function(){n=this;i=arguments;var u=function(){r=null;if(s)e.apply(n,i);l()};if(!r)r=setTimeout(u,t);if(a){s=true}else{o=e.apply(n,i)}l();a=true;return o}};S.debounce=function(e,t,n){var i;return function(){var r=this,a=arguments;var s=function(){i=null;if(!n)e.apply(r,a)};if(n&&!i)e.apply(r,a);clearTimeout(i);i=setTimeout(s,t)}};S.once=function(e){var t=false,n;return function(){if(t)return n;t=true;return n=e.apply(this,arguments)}};S.wrap=function(e,t){return function(){var n=[e].concat(l.call(arguments,0));return t.apply(this,n)}};S.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--){t=[e[n].apply(this,t)]}return t[0]}};S.after=function(e,t){if(e<=0)return t();return function(){if(--e<1){return t.apply(this,arguments)}}};S.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)if(S.has(e,n))t[t.length]=n;return t};S.values=function(e){return S.map(e,S.identity)};S.functions=S.methods=function(e){var t=[];for(var n in e){if(S.isFunction(e[n]))t.push(n)}return t.sort()};S.extend=function(e){E(l.call(arguments,1),function(t){for(var n in t){e[n]=t[n]}});return e};S.pick=function(e){var t={};E(S.flatten(l.call(arguments,1)),function(n){if(n in e)t[n]=e[n]});return t};S.defaults=function(e){E(l.call(arguments,1),function(t){for(var n in t){if(e[n]==null)e[n]=t[n]}});return e};S.clone=function(e){if(!S.isObject(e))return e;return S.isArray(e)?e.slice():S.extend({},e)};S.tap=function(e,t){t(e);return e};function M(e,t,n){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;if(e._chain)e=e._wrapped;if(t._chain)t=t._wrapped;if(e.isEqual&&S.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&S.isFunction(t.isEqual))return t.isEqual(e);var i=c.call(e);if(i!=c.call(t))return false;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return false;var r=n.length;while(r--){if(n[r]==e)return true}n.push(e);var a=0,s=true;if(i=="[object Array]"){a=e.length;s=a==t.length;if(s){while(a--){if(!(s=a in e==a in t&&M(e[a],t[a],n)))break}}}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return false;for(var o in e){if(S.has(e,o)){a++;if(!(s=S.has(t,o)&&M(e[o],t[o],n)))break}}if(s){for(o in t){if(S.has(t,o)&&!a--)break}s=!a}}n.pop();return s}S.isEqual=function(e,t){return M(e,t,[])};S.isEmpty=function(e){if(e==null)return true;if(S.isArray(e)||S.isString(e))return e.length===0;for(var t in e)if(S.has(e,t))return false;return true};S.isElement=function(e){return!!(e&&e.nodeType==1)};S.isArray=x||function(e){return c.call(e)=="[object Array]"};S.isObject=function(e){return e===Object(e)};S.isArguments=function(e){return c.call(e)=="[object Arguments]"};if(!S.isArguments(arguments)){S.isArguments=function(e){return!!(e&&S.has(e,"callee"))}}S.isFunction=function(e){return c.call(e)=="[object Function]"};S.isString=function(e){return c.call(e)=="[object String]"};S.isNumber=function(e){return c.call(e)=="[object Number]"};S.isFinite=function(e){return S.isNumber(e)&&isFinite(e)};S.isNaN=function(e){return e!==e};S.isBoolean=function(e){return e===true||e===false||c.call(e)=="[object Boolean]"};S.isDate=function(e){return c.call(e)=="[object Date]"};S.isRegExp=function(e){return c.call(e)=="[object RegExp]"};S.isNull=function(e){return e===null};S.isUndefined=function(e){return e===void 0};S.has=function(e,t){return d.call(e,t)};S.noConflict=function(){n._=i;return this};S.identity=function(e){return e};S.times=function(e,t,n){for(var i=0;i<e;i++)t.call(n,i)};S.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};S.result=function(e,t){if(e==null)return null;var n=e[t];return S.isFunction(n)?n.call(e):n};S.mixin=function(e){E(S.functions(e),function(t){P(t,S[t]=e[t])})};var A=0;S.uniqueId=function(e){var t=A++;return e?e+t:t};S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/;var R={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var D in R)R[R[D]]=D;var I=/\\|'|\r|\n|\t|\u2028|\u2029/g;var O=/\\(\\|'|r|n|t|u2028|u2029)/g;var N=function(e){return e.replace(O,function(e,t){return R[t]})};S.template=function(e,t,n){n=S.defaults(n||{},S.templateSettings);var i="__p+='"+e.replace(I,function(e){return"\\"+R[e]}).replace(n.escape||C,function(e,t){return"'+\n_.escape("+N(t)+")+\n'"}).replace(n.interpolate||C,function(e,t){return"'+\n("+N(t)+")+\n'"}).replace(n.evaluate||C,function(e,t){return"';\n"+N(t)+"\n;__p+='"})+"';\n";if(!n.variable)i="with(obj||{}){\n"+i+"}\n";i="var __p='';"+"var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+i+"return __p;\n";var r=new Function(n.variable||"obj","_",i);if(t)return r(t,S);var a=function(e){return r.call(this,e,S)};a.source="function("+(n.variable||"obj")+"){\n"+i+"}";return a};S.chain=function(e){return S(e).chain()};var F=function(e){this._wrapped=e};S.prototype=F.prototype;var B=function(e,t){return t?S(e).chain():e};var P=function(e,t){F.prototype[e]=function(){var e=l.call(arguments);u.call(e,this._wrapped);return B(t.apply(S,e),this._chain)}};S.mixin(S);E(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];F.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var i=n.length;if((e=="shift"||e=="splice")&&i===0)delete n[0];return B(n,this._chain)}});E(["concat","join","slice"],function(e){var t=a[e];F.prototype[e]=function(){return B(t.apply(this._wrapped,arguments),this._chain)}});F.prototype.chain=function(){this._chain=true;return this};F.prototype.value=function(){return this._wrapped}}).call(this)},function(e,t,n){n(55)(n(56))},function(e,t){e.exports=function(e){if(typeof execScript!=="undefined")execScript(e);else eval.call(null,e)}},function(e,t){e.exports="/* big.js v3.1.3 https://github.com/MikeMcl/big.js/LICENCE */\n;(function (global) {\n    'use strict';\n\n/*\n  big.js v3.1.3\n  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\n  https://github.com/MikeMcl/big.js/\n  Copyright (c) 2014 Michael Mclaughlin <M8ch88l@gmail.com>\n  MIT Expat Licence\n*/\n\n/***************************** EDITABLE DEFAULTS ******************************/\n\n    // The default values below must be integers within the stated ranges.\n\n    /*\n     * The maximum number of decimal places of the results of operations\n     * involving division: div and sqrt, and pow with negative exponents.\n     */\n    var DP = 20,                           // 0 to MAX_DP\n\n        /*\n         * The rounding mode used when rounding to the above decimal places.\n         *\n         * 0 Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\n         * 1 To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\n         * 2 To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\n         * 3 Away from zero.                                  (ROUND_UP)\n         */\n        RM = 1,                            // 0, 1, 2 or 3\n\n        // The maximum value of DP and Big.DP.\n        MAX_DP = 1E6,                      // 0 to 1000000\n\n        // The maximum magnitude of the exponent argument to the pow method.\n        MAX_POWER = 1E6,                   // 1 to 1000000\n\n        /*\n         * The exponent value at and beneath which toString returns exponential\n         * notation.\n         * JavaScript's Number type: -7\n         * -1000000 is the minimum recommended exponent value of a Big.\n         */\n        E_NEG = -7,                   // 0 to -1000000\n\n        /*\n         * The exponent value at and above which toString returns exponential\n         * notation.\n         * JavaScript's Number type: 21\n         * 1000000 is the maximum recommended exponent value of a Big.\n         * (This limit is not enforced or checked.)\n         */\n        E_POS = 21,                   // 0 to 1000000\n\n/******************************************************************************/\n\n        // The shared prototype object.\n        P = {},\n        isValid = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i,\n        Big;\n\n\n    /*\n     * Create and return a Big constructor.\n     *\n     */\n    function bigFactory() {\n\n        /*\n         * The Big constructor and exported function.\n         * Create and return a new instance of a Big number object.\n         *\n         * n {number|string|Big} A numeric value.\n         */\n        function Big(n) {\n            var x = this;\n\n            // Enable constructor usage without new.\n            if (!(x instanceof Big)) {\n                return n === void 0 ? bigFactory() : new Big(n);\n            }\n\n            // Duplicate.\n            if (n instanceof Big) {\n                x.s = n.s;\n                x.e = n.e;\n                x.c = n.c.slice();\n            } else {\n                parse(x, n);\n            }\n\n            /*\n             * Retain a reference to this Big constructor, and shadow\n             * Big.prototype.constructor which points to Object.\n             */\n            x.constructor = Big;\n        }\n\n        Big.prototype = P;\n        Big.DP = DP;\n        Big.RM = RM;\n        Big.E_NEG = E_NEG;\n        Big.E_POS = E_POS;\n\n        return Big;\n    }\n\n\n    // Private functions\n\n\n    /*\n     * Return a string representing the value of Big x in normal or exponential\n     * notation to dp fixed decimal places or significant digits.\n     *\n     * x {Big} The Big to format.\n     * dp {number} Integer, 0 to MAX_DP inclusive.\n     * toE {number} 1 (toExponential), 2 (toPrecision) or undefined (toFixed).\n     */\n    function format(x, dp, toE) {\n        var Big = x.constructor,\n\n            // The index (normal notation) of the digit that may be rounded up.\n            i = dp - (x = new Big(x)).e,\n            c = x.c;\n\n        // Round?\n        if (c.length > ++dp) {\n            rnd(x, i, Big.RM);\n        }\n\n        if (!c[0]) {\n            ++i;\n        } else if (toE) {\n            i = dp;\n\n        // toFixed\n        } else {\n            c = x.c;\n\n            // Recalculate i as x.e may have changed if value rounded up.\n            i = x.e + i + 1;\n        }\n\n        // Append zeros?\n        for (; c.length < i; c.push(0)) {\n        }\n        i = x.e;\n\n        /*\n         * toPrecision returns exponential notation if the number of\n         * significant digits specified is less than the number of digits\n         * necessary to represent the integer part of the value in normal\n         * notation.\n         */\n        return toE === 1 || toE && (dp <= i || i <= Big.E_NEG) ?\n\n          // Exponential notation.\n          (x.s < 0 && c[0] ? '-' : '') +\n            (c.length > 1 ? c[0] + '.' + c.join('').slice(1) : c[0]) +\n              (i < 0 ? 'e' : 'e+') + i\n\n          // Normal notation.\n          : x.toString();\n    }\n\n\n    /*\n     * Parse the number or string value passed to a Big constructor.\n     *\n     * x {Big} A Big number instance.\n     * n {number|string} A numeric value.\n     */\n    function parse(x, n) {\n        var e, i, nL;\n\n        // Minus zero?\n        if (n === 0 && 1 / n < 0) {\n            n = '-0';\n\n        // Ensure n is string and check validity.\n        } else if (!isValid.test(n += '')) {\n            throwErr(NaN);\n        }\n\n        // Determine sign.\n        x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\n\n        // Decimal point?\n        if ((e = n.indexOf('.')) > -1) {\n            n = n.replace('.', '');\n        }\n\n        // Exponential form?\n        if ((i = n.search(/e/i)) > 0) {\n\n            // Determine exponent.\n            if (e < 0) {\n                e = i;\n            }\n            e += +n.slice(i + 1);\n            n = n.substring(0, i);\n\n        } else if (e < 0) {\n\n            // Integer.\n            e = n.length;\n        }\n\n        // Determine leading zeros.\n        for (i = 0; n.charAt(i) == '0'; i++) {\n        }\n\n        if (i == (nL = n.length)) {\n\n            // Zero.\n            x.c = [ x.e = 0 ];\n        } else {\n\n            // Determine trailing zeros.\n            for (; n.charAt(--nL) == '0';) {\n            }\n\n            x.e = e - i - 1;\n            x.c = [];\n\n            // Convert string to array of digits without leading/trailing zeros.\n            for (e = 0; i <= nL; x.c[e++] = +n.charAt(i++)) {\n            }\n        }\n\n        return x;\n    }\n\n\n    /*\n     * Round Big x to a maximum of dp decimal places using rounding mode rm.\n     * Called by div, sqrt and round.\n     *\n     * x {Big} The Big to round.\n     * dp {number} Integer, 0 to MAX_DP inclusive.\n     * rm {number} 0, 1, 2 or 3 (DOWN, HALF_UP, HALF_EVEN, UP)\n     * [more] {boolean} Whether the result of division was truncated.\n     */\n    function rnd(x, dp, rm, more) {\n        var u,\n            xc = x.c,\n            i = x.e + dp + 1;\n\n        if (rm === 1) {\n\n            // xc[i] is the digit after the digit that may be rounded up.\n            more = xc[i] >= 5;\n        } else if (rm === 2) {\n            more = xc[i] > 5 || xc[i] == 5 &&\n              (more || i < 0 || xc[i + 1] !== u || xc[i - 1] & 1);\n        } else if (rm === 3) {\n            more = more || xc[i] !== u || i < 0;\n        } else {\n            more = false;\n\n            if (rm !== 0) {\n                throwErr('!Big.RM!');\n            }\n        }\n\n        if (i < 1 || !xc[0]) {\n\n            if (more) {\n\n                // 1, 0.1, 0.01, 0.001, 0.0001 etc.\n                x.e = -dp;\n                x.c = [1];\n            } else {\n\n                // Zero.\n                x.c = [x.e = 0];\n            }\n        } else {\n\n            // Remove any digits after the required decimal places.\n            xc.length = i--;\n\n            // Round up?\n            if (more) {\n\n                // Rounding up may mean the previous digit has to be rounded up.\n                for (; ++xc[i] > 9;) {\n                    xc[i] = 0;\n\n                    if (!i--) {\n                        ++x.e;\n                        xc.unshift(1);\n                    }\n                }\n            }\n\n            // Remove trailing zeros.\n            for (i = xc.length; !xc[--i]; xc.pop()) {\n            }\n        }\n\n        return x;\n    }\n\n\n    /*\n     * Throw a BigError.\n     *\n     * message {string} The error message.\n     */\n    function throwErr(message) {\n        var err = new Error(message);\n        err.name = 'BigError';\n\n        throw err;\n    }\n\n\n    // Prototype/instance methods\n\n\n    /*\n     * Return a new Big whose value is the absolute value of this Big.\n     */\n    P.abs = function () {\n        var x = new this.constructor(this);\n        x.s = 1;\n\n        return x;\n    };\n\n\n    /*\n     * Return\n     * 1 if the value of this Big is greater than the value of Big y,\n     * -1 if the value of this Big is less than the value of Big y, or\n     * 0 if they have the same value.\n    */\n    P.cmp = function (y) {\n        var xNeg,\n            x = this,\n            xc = x.c,\n            yc = (y = new x.constructor(y)).c,\n            i = x.s,\n            j = y.s,\n            k = x.e,\n            l = y.e;\n\n        // Either zero?\n        if (!xc[0] || !yc[0]) {\n            return !xc[0] ? !yc[0] ? 0 : -j : i;\n        }\n\n        // Signs differ?\n        if (i != j) {\n            return i;\n        }\n        xNeg = i < 0;\n\n        // Compare exponents.\n        if (k != l) {\n            return k > l ^ xNeg ? 1 : -1;\n        }\n\n        i = -1;\n        j = (k = xc.length) < (l = yc.length) ? k : l;\n\n        // Compare digit by digit.\n        for (; ++i < j;) {\n\n            if (xc[i] != yc[i]) {\n                return xc[i] > yc[i] ^ xNeg ? 1 : -1;\n            }\n        }\n\n        // Compare lengths.\n        return k == l ? 0 : k > l ^ xNeg ? 1 : -1;\n    };\n\n\n    /*\n     * Return a new Big whose value is the value of this Big divided by the\n     * value of Big y, rounded, if necessary, to a maximum of Big.DP decimal\n     * places using rounding mode Big.RM.\n     */\n    P.div = function (y) {\n        var x = this,\n            Big = x.constructor,\n            // dividend\n            dvd = x.c,\n            //divisor\n            dvs = (y = new Big(y)).c,\n            s = x.s == y.s ? 1 : -1,\n            dp = Big.DP;\n\n        if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n            throwErr('!Big.DP!');\n        }\n\n        // Either 0?\n        if (!dvd[0] || !dvs[0]) {\n\n            // If both are 0, throw NaN\n            if (dvd[0] == dvs[0]) {\n                throwErr(NaN);\n            }\n\n            // If dvs is 0, throw +-Infinity.\n            if (!dvs[0]) {\n                throwErr(s / 0);\n            }\n\n            // dvd is 0, return +-0.\n            return new Big(s * 0);\n        }\n\n        var dvsL, dvsT, next, cmp, remI, u,\n            dvsZ = dvs.slice(),\n            dvdI = dvsL = dvs.length,\n            dvdL = dvd.length,\n            // remainder\n            rem = dvd.slice(0, dvsL),\n            remL = rem.length,\n            // quotient\n            q = y,\n            qc = q.c = [],\n            qi = 0,\n            digits = dp + (q.e = x.e - y.e) + 1;\n\n        q.s = s;\n        s = digits < 0 ? 0 : digits;\n\n        // Create version of divisor with leading zero.\n        dvsZ.unshift(0);\n\n        // Add zeros to make remainder as long as divisor.\n        for (; remL++ < dvsL; rem.push(0)) {\n        }\n\n        do {\n\n            // 'next' is how many times the divisor goes into current remainder.\n            for (next = 0; next < 10; next++) {\n\n                // Compare divisor and remainder.\n                if (dvsL != (remL = rem.length)) {\n                    cmp = dvsL > remL ? 1 : -1;\n                } else {\n\n                    for (remI = -1, cmp = 0; ++remI < dvsL;) {\n\n                        if (dvs[remI] != rem[remI]) {\n                            cmp = dvs[remI] > rem[remI] ? 1 : -1;\n                            break;\n                        }\n                    }\n                }\n\n                // If divisor < remainder, subtract divisor from remainder.\n                if (cmp < 0) {\n\n                    // Remainder can't be more than 1 digit longer than divisor.\n                    // Equalise lengths using divisor with extra leading zero?\n                    for (dvsT = remL == dvsL ? dvs : dvsZ; remL;) {\n\n                        if (rem[--remL] < dvsT[remL]) {\n                            remI = remL;\n\n                            for (; remI && !rem[--remI]; rem[remI] = 9) {\n                            }\n                            --rem[remI];\n                            rem[remL] += 10;\n                        }\n                        rem[remL] -= dvsT[remL];\n                    }\n                    for (; !rem[0]; rem.shift()) {\n                    }\n                } else {\n                    break;\n                }\n            }\n\n            // Add the 'next' digit to the result array.\n            qc[qi++] = cmp ? next : ++next;\n\n            // Update the remainder.\n            if (rem[0] && cmp) {\n                rem[remL] = dvd[dvdI] || 0;\n            } else {\n                rem = [ dvd[dvdI] ];\n            }\n\n        } while ((dvdI++ < dvdL || rem[0] !== u) && s--);\n\n        // Leading zero? Do not remove if result is simply zero (qi == 1).\n        if (!qc[0] && qi != 1) {\n\n            // There can't be more than one zero.\n            qc.shift();\n            q.e--;\n        }\n\n        // Round?\n        if (qi > digits) {\n            rnd(q, dp, Big.RM, rem[0] !== u);\n        }\n\n        return q;\n    };\n\n\n    /*\n     * Return true if the value of this Big is equal to the value of Big y,\n     * otherwise returns false.\n     */\n    P.eq = function (y) {\n        return !this.cmp(y);\n    };\n\n\n    /*\n     * Return true if the value of this Big is greater than the value of Big y,\n     * otherwise returns false.\n     */\n    P.gt = function (y) {\n        return this.cmp(y) > 0;\n    };\n\n\n    /*\n     * Return true if the value of this Big is greater than or equal to the\n     * value of Big y, otherwise returns false.\n     */\n    P.gte = function (y) {\n        return this.cmp(y) > -1;\n    };\n\n\n    /*\n     * Return true if the value of this Big is less than the value of Big y,\n     * otherwise returns false.\n     */\n    P.lt = function (y) {\n        return this.cmp(y) < 0;\n    };\n\n\n    /*\n     * Return true if the value of this Big is less than or equal to the value\n     * of Big y, otherwise returns false.\n     */\n    P.lte = function (y) {\n         return this.cmp(y) < 1;\n    };\n\n\n    /*\n     * Return a new Big whose value is the value of this Big minus the value\n     * of Big y.\n     */\n    P.sub = P.minus = function (y) {\n        var i, j, t, xLTy,\n            x = this,\n            Big = x.constructor,\n            a = x.s,\n            b = (y = new Big(y)).s;\n\n        // Signs differ?\n        if (a != b) {\n            y.s = -b;\n            return x.plus(y);\n        }\n\n        var xc = x.c.slice(),\n            xe = x.e,\n            yc = y.c,\n            ye = y.e;\n\n        // Either zero?\n        if (!xc[0] || !yc[0]) {\n\n            // y is non-zero? x is non-zero? Or both are zero.\n            return yc[0] ? (y.s = -b, y) : new Big(xc[0] ? x : 0);\n        }\n\n        // Determine which is the bigger number.\n        // Prepend zeros to equalise exponents.\n        if (a = xe - ye) {\n\n            if (xLTy = a < 0) {\n                a = -a;\n                t = xc;\n            } else {\n                ye = xe;\n                t = yc;\n            }\n\n            t.reverse();\n            for (b = a; b--; t.push(0)) {\n            }\n            t.reverse();\n        } else {\n\n            // Exponents equal. Check digit by digit.\n            j = ((xLTy = xc.length < yc.length) ? xc : yc).length;\n\n            for (a = b = 0; b < j; b++) {\n\n                if (xc[b] != yc[b]) {\n                    xLTy = xc[b] < yc[b];\n                    break;\n                }\n            }\n        }\n\n        // x < y? Point xc to the array of the bigger number.\n        if (xLTy) {\n            t = xc;\n            xc = yc;\n            yc = t;\n            y.s = -y.s;\n        }\n\n        /*\n         * Append zeros to xc if shorter. No need to add zeros to yc if shorter\n         * as subtraction only needs to start at yc.length.\n         */\n        if (( b = (j = yc.length) - (i = xc.length) ) > 0) {\n\n            for (; b--; xc[i++] = 0) {\n            }\n        }\n\n        // Subtract yc from xc.\n        for (b = i; j > a;){\n\n            if (xc[--j] < yc[j]) {\n\n                for (i = j; i && !xc[--i]; xc[i] = 9) {\n                }\n                --xc[i];\n                xc[j] += 10;\n            }\n            xc[j] -= yc[j];\n        }\n\n        // Remove trailing zeros.\n        for (; xc[--b] === 0; xc.pop()) {\n        }\n\n        // Remove leading zeros and adjust exponent accordingly.\n        for (; xc[0] === 0;) {\n            xc.shift();\n            --ye;\n        }\n\n        if (!xc[0]) {\n\n            // n - n = +0\n            y.s = 1;\n\n            // Result must be zero.\n            xc = [ye = 0];\n        }\n\n        y.c = xc;\n        y.e = ye;\n\n        return y;\n    };\n\n\n    /*\n     * Return a new Big whose value is the value of this Big modulo the\n     * value of Big y.\n     */\n    P.mod = function (y) {\n        var yGTx,\n            x = this,\n            Big = x.constructor,\n            a = x.s,\n            b = (y = new Big(y)).s;\n\n        if (!y.c[0]) {\n            throwErr(NaN);\n        }\n\n        x.s = y.s = 1;\n        yGTx = y.cmp(x) == 1;\n        x.s = a;\n        y.s = b;\n\n        if (yGTx) {\n            return new Big(x);\n        }\n\n        a = Big.DP;\n        b = Big.RM;\n        Big.DP = Big.RM = 0;\n        x = x.div(y);\n        Big.DP = a;\n        Big.RM = b;\n\n        return this.minus( x.times(y) );\n    };\n\n\n    /*\n     * Return a new Big whose value is the value of this Big plus the value\n     * of Big y.\n     */\n    P.add = P.plus = function (y) {\n        var t,\n            x = this,\n            Big = x.constructor,\n            a = x.s,\n            b = (y = new Big(y)).s;\n\n        // Signs differ?\n        if (a != b) {\n            y.s = -b;\n            return x.minus(y);\n        }\n\n        var xe = x.e,\n            xc = x.c,\n            ye = y.e,\n            yc = y.c;\n\n        // Either zero?\n        if (!xc[0] || !yc[0]) {\n\n            // y is non-zero? x is non-zero? Or both are zero.\n            return yc[0] ? y : new Big(xc[0] ? x : a * 0);\n        }\n        xc = xc.slice();\n\n        // Prepend zeros to equalise exponents.\n        // Note: Faster to use reverse then do unshifts.\n        if (a = xe - ye) {\n\n            if (a > 0) {\n                ye = xe;\n                t = yc;\n            } else {\n                a = -a;\n                t = xc;\n            }\n\n            t.reverse();\n            for (; a--; t.push(0)) {\n            }\n            t.reverse();\n        }\n\n        // Point xc to the longer array.\n        if (xc.length - yc.length < 0) {\n            t = yc;\n            yc = xc;\n            xc = t;\n        }\n        a = yc.length;\n\n        /*\n         * Only start adding at yc.length - 1 as the further digits of xc can be\n         * left as they are.\n         */\n        for (b = 0; a;) {\n            b = (xc[--a] = xc[a] + yc[a] + b) / 10 | 0;\n            xc[a] %= 10;\n        }\n\n        // No need to check for zero, as +x + +y != 0 && -x + -y != 0\n\n        if (b) {\n            xc.unshift(b);\n            ++ye;\n        }\n\n         // Remove trailing zeros.\n        for (a = xc.length; xc[--a] === 0; xc.pop()) {\n        }\n\n        y.c = xc;\n        y.e = ye;\n\n        return y;\n    };\n\n\n    /*\n     * Return a Big whose value is the value of this Big raised to the power n.\n     * If n is negative, round, if necessary, to a maximum of Big.DP decimal\n     * places using rounding mode Big.RM.\n     *\n     * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\n     */\n    P.pow = function (n) {\n        var x = this,\n            one = new x.constructor(1),\n            y = one,\n            isNeg = n < 0;\n\n        if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\n            throwErr('!pow!');\n        }\n\n        n = isNeg ? -n : n;\n\n        for (;;) {\n\n            if (n & 1) {\n                y = y.times(x);\n            }\n            n >>= 1;\n\n            if (!n) {\n                break;\n            }\n            x = x.times(x);\n        }\n\n        return isNeg ? one.div(y) : y;\n    };\n\n\n    /*\n     * Return a new Big whose value is the value of this Big rounded to a\n     * maximum of dp decimal places using rounding mode rm.\n     * If dp is not specified, round to 0 decimal places.\n     * If rm is not specified, use Big.RM.\n     *\n     * [dp] {number} Integer, 0 to MAX_DP inclusive.\n     * [rm] 0, 1, 2 or 3 (ROUND_DOWN, ROUND_HALF_UP, ROUND_HALF_EVEN, ROUND_UP)\n     */\n    P.round = function (dp, rm) {\n        var x = this,\n            Big = x.constructor;\n\n        if (dp == null) {\n            dp = 0;\n        } else if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n            throwErr('!round!');\n        }\n        rnd(x = new Big(x), dp, rm == null ? Big.RM : rm);\n\n        return x;\n    };\n\n\n    /*\n     * Return a new Big whose value is the square root of the value of this Big,\n     * rounded, if necessary, to a maximum of Big.DP decimal places using\n     * rounding mode Big.RM.\n     */\n    P.sqrt = function () {\n        var estimate, r, approx,\n            x = this,\n            Big = x.constructor,\n            xc = x.c,\n            i = x.s,\n            e = x.e,\n            half = new Big('0.5');\n\n        // Zero?\n        if (!xc[0]) {\n            return new Big(x);\n        }\n\n        // If negative, throw NaN.\n        if (i < 0) {\n            throwErr(NaN);\n        }\n\n        // Estimate.\n        i = Math.sqrt(x.toString());\n\n        // Math.sqrt underflow/overflow?\n        // Pass x to Math.sqrt as integer, then adjust the result exponent.\n        if (i === 0 || i === 1 / 0) {\n            estimate = xc.join('');\n\n            if (!(estimate.length + e & 1)) {\n                estimate += '0';\n            }\n\n            r = new Big( Math.sqrt(estimate).toString() );\n            r.e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\n        } else {\n            r = new Big(i.toString());\n        }\n\n        i = r.e + (Big.DP += 4);\n\n        // Newton-Raphson iteration.\n        do {\n            approx = r;\n            r = half.times( approx.plus( x.div(approx) ) );\n        } while ( approx.c.slice(0, i).join('') !==\n                       r.c.slice(0, i).join('') );\n\n        rnd(r, Big.DP -= 4, Big.RM);\n\n        return r;\n    };\n\n\n    /*\n     * Return a new Big whose value is the value of this Big times the value of\n     * Big y.\n     */\n    P.mul = P.times = function (y) {\n        var c,\n            x = this,\n            Big = x.constructor,\n            xc = x.c,\n            yc = (y = new Big(y)).c,\n            a = xc.length,\n            b = yc.length,\n            i = x.e,\n            j = y.e;\n\n        // Determine sign of result.\n        y.s = x.s == y.s ? 1 : -1;\n\n        // Return signed 0 if either 0.\n        if (!xc[0] || !yc[0]) {\n            return new Big(y.s * 0);\n        }\n\n        // Initialise exponent of result as x.e + y.e.\n        y.e = i + j;\n\n        // If array xc has fewer digits than yc, swap xc and yc, and lengths.\n        if (a < b) {\n            c = xc;\n            xc = yc;\n            yc = c;\n            j = a;\n            a = b;\n            b = j;\n        }\n\n        // Initialise coefficient array of result with zeros.\n        for (c = new Array(j = a + b); j--; c[j] = 0) {\n        }\n\n        // Multiply.\n\n        // i is initially xc.length.\n        for (i = b; i--;) {\n            b = 0;\n\n            // a is yc.length.\n            for (j = a + i; j > i;) {\n\n                // Current sum of products at this digit position, plus carry.\n                b = c[j] + yc[i] * xc[j - i - 1] + b;\n                c[j--] = b % 10;\n\n                // carry\n                b = b / 10 | 0;\n            }\n            c[j] = (c[j] + b) % 10;\n        }\n\n        // Increment result exponent if there is a final carry.\n        if (b) {\n            ++y.e;\n        }\n\n        // Remove any leading zero.\n        if (!c[0]) {\n            c.shift();\n        }\n\n        // Remove trailing zeros.\n        for (i = c.length; !c[--i]; c.pop()) {\n        }\n        y.c = c;\n\n        return y;\n    };\n\n\n    /*\n     * Return a string representing the value of this Big.\n     * Return exponential notation if this Big has a positive exponent equal to\n     * or greater than Big.E_POS, or a negative exponent equal to or less than\n     * Big.E_NEG.\n     */\n    P.toString = P.valueOf = P.toJSON = function () {\n        var x = this,\n            Big = x.constructor,\n            e = x.e,\n            str = x.c.join(''),\n            strL = str.length;\n\n        // Exponential notation?\n        if (e <= Big.E_NEG || e >= Big.E_POS) {\n            str = str.charAt(0) + (strL > 1 ? '.' + str.slice(1) : '') +\n              (e < 0 ? 'e' : 'e+') + e;\n\n        // Negative exponent?\n        } else if (e < 0) {\n\n            // Prepend zeros.\n            for (; ++e; str = '0' + str) {\n            }\n            str = '0.' + str;\n\n        // Positive exponent?\n        } else if (e > 0) {\n\n            if (++e > strL) {\n\n                // Append zeros.\n                for (e -= strL; e-- ; str += '0') {\n                }\n            } else if (e < strL) {\n                str = str.slice(0, e) + '.' + str.slice(e);\n            }\n\n        // Exponent zero.\n        } else if (strL > 1) {\n            str = str.charAt(0) + '.' + str.slice(1);\n        }\n\n        // Avoid '-0'\n        return x.s < 0 && x.c[0] ? '-' + str : str;\n    };\n\n\n    /*\n     ***************************************************************************\n     * If toExponential, toFixed, toPrecision and format are not required they\n     * can safely be commented-out or deleted. No redundant code will be left.\n     * format is used only by toExponential, toFixed and toPrecision.\n     ***************************************************************************\n     */\n\n\n    /*\n     * Return a string representing the value of this Big in exponential\n     * notation to dp fixed decimal places and rounded, if necessary, using\n     * Big.RM.\n     *\n     * [dp] {number} Integer, 0 to MAX_DP inclusive.\n     */\n    P.toExponential = function (dp) {\n\n        if (dp == null) {\n            dp = this.c.length - 1;\n        } else if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n            throwErr('!toExp!');\n        }\n\n        return format(this, dp, 1);\n    };\n\n\n    /*\n     * Return a string representing the value of this Big in normal notation\n     * to dp fixed decimal places and rounded, if necessary, using Big.RM.\n     *\n     * [dp] {number} Integer, 0 to MAX_DP inclusive.\n     */\n    P.toFixed = function (dp) {\n        var str,\n            x = this,\n            Big = x.constructor,\n            neg = Big.E_NEG,\n            pos = Big.E_POS;\n\n        // Prevent the possibility of exponential notation.\n        Big.E_NEG = -(Big.E_POS = 1 / 0);\n\n        if (dp == null) {\n            str = x.toString();\n        } else if (dp === ~~dp && dp >= 0 && dp <= MAX_DP) {\n            str = format(x, x.e + dp);\n\n            // (-0).toFixed() is '0', but (-0.1).toFixed() is '-0'.\n            // (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\n            if (x.s < 0 && x.c[0] && str.indexOf('-') < 0) {\n        //E.g. -0.5 if rounded to -0 will cause toString to omit the minus sign.\n                str = '-' + str;\n            }\n        }\n        Big.E_NEG = neg;\n        Big.E_POS = pos;\n\n        if (!str) {\n            throwErr('!toFix!');\n        }\n\n        return str;\n    };\n\n\n    /*\n     * Return a string representing the value of this Big rounded to sd\n     * significant digits using Big.RM. Use exponential notation if sd is less\n     * than the number of digits necessary to represent the integer part of the\n     * value in normal notation.\n     *\n     * sd {number} Integer, 1 to MAX_DP inclusive.\n     */\n    P.toPrecision = function (sd) {\n\n        if (sd == null) {\n            return this.toString();\n        } else if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n            throwErr('!toPre!');\n        }\n\n        return format(this, sd - 1, 2);\n    };\n\n\n    // Export\n\n\n    Big = bigFactory();\n\n    //AMD.\n    if (typeof define === 'function' && define.amd) {\n        define(function () {\n            return Big;\n        });\n\n    // Node and other CommonJS-like environments that support module.exports.\n    } else if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Big;\n\n    //Browser.\n    } else {\n        global.Big = Big;\n    }\n})(this);\n";

},function(module,exports,__webpack_require__){(function(process,global,setImmediate){!function(e){if(true)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Promise=e()}}(function(){var define,module,exports;return function e(t,n,i){function r(s,o){if(!n[s]){if(!t[s]){var l=typeof _dereq_=="function"&&_dereq_;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}var a=typeof _dereq_=="function"&&_dereq_;for(var s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function n(e){var n=new t(e);var i=n.promise();n.setHowMany(1);n.setUnwrap();n.init();return i}e.any=function(e){return n(e)};e.prototype.any=function(){return n(this)}}},{}],2:[function(e,t,n){"use strict";var i;try{throw new Error}catch(r){i=r}var a=e("./schedule");var s=e("./queue");var o=e("./util");function l(){this._customScheduler=false;this._isTickUsed=false;this._lateQueue=new s(16);this._normalQueue=new s(16);this._haveDrainedQueues=false;this._trampolineEnabled=true;var e=this;this.drainQueues=function(){e._drainQueues()};this._schedule=a}l.prototype.setScheduler=function(e){var t=this._schedule;this._schedule=e;this._customScheduler=true;return t};l.prototype.hasCustomScheduler=function(){return this._customScheduler};l.prototype.enableTrampoline=function(){this._trampolineEnabled=true};l.prototype.disableTrampolineIfNecessary=function(){if(o.hasDevTools){this._trampolineEnabled=false}};l.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues};l.prototype.fatalError=function(e,t){if(t){process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n");process.exit(2)}else{this.throwLater(e)}};l.prototype.throwLater=function(e,t){if(arguments.length===1){t=e;e=function(){throw t}}if(typeof setTimeout!=="undefined"){setTimeout(function(){e(t)},0)}else try{this._schedule(function(){e(t)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}};function u(e,t,n){this._lateQueue.push(e,t,n);this._queueTick()}function c(e,t,n){this._normalQueue.push(e,t,n);this._queueTick()}function d(e){this._normalQueue._pushOne(e);this._queueTick()}if(!o.hasDevTools){l.prototype.invokeLater=u;l.prototype.invoke=c;l.prototype.settlePromises=d}else{l.prototype.invokeLater=function(e,t,n){if(this._trampolineEnabled){u.call(this,e,t,n)}else{this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})}};l.prototype.invoke=function(e,t,n){if(this._trampolineEnabled){c.call(this,e,t,n)}else{this._schedule(function(){e.call(t,n)})}};l.prototype.settlePromises=function(e){if(this._trampolineEnabled){d.call(this,e)}else{this._schedule(function(){e._settlePromises()})}}}l.prototype.invokeFirst=function(e,t,n){this._normalQueue.unshift(e,t,n);this._queueTick()};l.prototype._drainQueue=function(e){while(e.length()>0){var t=e.shift();if(typeof t!=="function"){t._settlePromises();continue}var n=e.shift();var i=e.shift();t.call(n,i)}};l.prototype._drainQueues=function(){this._drainQueue(this._normalQueue);this._reset();this._haveDrainedQueues=true;this._drainQueue(this._lateQueue)};l.prototype._queueTick=function(){if(!this._isTickUsed){this._isTickUsed=true;this._schedule(this.drainQueues)}};l.prototype._reset=function(){this._isTickUsed=false};t.exports=l;t.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,i){var r=false;var a=function(e,t){this._reject(t)};var s=function(e,t){t.promiseRejectionQueued=true;t.bindingPromise._then(a,a,null,this,e)};var o=function(e,t){if((this._bitField&50397184)===0){this._resolveCallback(t.target)}};var l=function(e,t){if(!t.promiseRejectionQueued)this._reject(e)};e.prototype.bind=function(a){if(!r){r=true;e.prototype._propagateFrom=i.propagateFromFunction();e.prototype._boundValue=i.boundValueFunction()}var u=n(a);var c=new e(t);c._propagateFrom(this,1);var d=this._target();c._setBoundTo(u);if(u instanceof e){var f={promiseRejectionQueued:false,promise:c,target:d,bindingPromise:u};d._then(t,s,undefined,c,f);u._then(o,l,undefined,c,f);c._setOnCancel(u)}else{c._resolveCallback(d)}return c};e.prototype._setBoundTo=function(e){if(e!==undefined){this._bitField=this._bitField|2097152;this._boundTo=e}else{this._bitField=this._bitField&~2097152}};e.prototype._isBound=function(){return(this._bitField&2097152)===2097152};e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";var i;if(typeof Promise!=="undefined")i=Promise;function r(){try{if(Promise===a)Promise=i}catch(e){}return a}var a=e("./promise")();a.noConflict=r;t.exports=a},{"./promise":22}],5:[function(e,t,n){"use strict";var i=Object.create;if(i){var r=i(null);var a=i(null);r[" size"]=a[" size"]=0}t.exports=function(t){var n=e("./util");var i=n.canEvaluate;var s=n.isIdentifier;var o;var l;if(false){var u=function(e){return new Function("ensureMethod","                                    \n	        return function(obj) {                                               \n	            'use strict'                                                     \n	            var len = this.length;                                           \n	            ensureMethod(obj, 'methodName');                                 \n	            switch(len) {                                                    \n	                case 1: return obj.methodName(this[0]);                      \n	                case 2: return obj.methodName(this[0], this[1]);             \n	                case 3: return obj.methodName(this[0], this[1], this[2]);    \n	                case 0: return obj.methodName();                             \n	                default:                                                     \n	                    return obj.methodName.apply(obj, this);                  \n	            }                                                                \n	        };                                                                   \n	        ".replace(/methodName/g,e))(f)};var c=function(e){return new Function("obj","                                             \n	        'use strict';                                                        \n	        return obj.propertyName;                                             \n	        ".replace("propertyName",e))};var d=function(e,t,n){var i=n[e];if(typeof i!=="function"){if(!s(e)){return null}i=t(e);n[e]=i;n[" size"]++;if(n[" size"]>512){var r=Object.keys(n);for(var a=0;a<256;++a)delete n[r[a]];n[" size"]=r.length-256}}return i};o=function(e){return d(e,u,r)};l=function(e){return d(e,c,a)}}function f(e,i){var r;if(e!=null)r=e[i];if(typeof r!=="function"){var a="Object "+n.classString(e)+" has no method '"+n.toString(i)+"'";throw new t.TypeError(a)}return r}function h(e){var t=this.pop();var n=f(e,t);return n.apply(e,this)}t.prototype.call=function(e){var t=[].slice.call(arguments,1);if(false){if(i){var n=o(e);if(n!==null){return this._then(n,undefined,undefined,t,undefined)}}}t.push(e);return this._then(h,undefined,undefined,t,undefined)};function p(e){return e[this]}function m(e){var t=+this;if(t<0)t=Math.max(0,t+e.length);return e[t]}t.prototype.get=function(e){var t=typeof e==="number";var n;if(!t){if(i){var r=l(e);n=r!==null?r:p}else{n=p}}else{n=m}return this._then(n,undefined,undefined,e,undefined)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,i,r){var a=e("./util");var s=a.tryCatch;var o=a.errorObj;var l=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");var e=this;var t=e;while(e.isCancellable()){if(!e._cancelBy(t)){if(t._isFollowing()){t._followee().cancel()}else{t._cancelBranched()}break}var n=e._cancellationParent;if(n==null||!n.isCancellable()){if(e._isFollowing()){e._followee().cancel()}else{e._cancelBranched()}break}else{if(e._isFollowing())e._followee().cancel();t=e;e=n}}};t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--};t.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===undefined||this._branchesRemainingToCancel<=0};t.prototype._cancelBy=function(e){if(e===this){this._branchesRemainingToCancel=0;this._invokeOnCancel();return true}else{this._branchHasCancelled();if(this._enoughBranchesHaveCancelled()){this._invokeOnCancel();return true}}return false};t.prototype._cancelBranched=function(){if(this._enoughBranchesHaveCancelled()){this._cancel()}};t.prototype._cancel=function(){if(!this.isCancellable())return;this._setCancelled();l.invoke(this._cancelPromises,this,undefined)};t.prototype._cancelPromises=function(){if(this._length()>0)this._settlePromises()};t.prototype._unsetOnCancel=function(){this._onCancelField=undefined};t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()};t.prototype._doInvokeOnCancel=function(e,t){if(a.isArray(e)){for(var n=0;n<e.length;++n){this._doInvokeOnCancel(e[n],t)}}else if(e!==undefined){if(typeof e==="function"){if(!t){var i=s(e).call(this._boundValue());if(i===o){this._attachExtraTrace(i.e);l.throwLater(i.e)}}}else{e._resultCancelled(this)}}};t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel();l.invoke(this._doInvokeOnCancel,this,e)};t.prototype._invokeInternalOnCancel=function(){if(this.isCancellable()){this._doInvokeOnCancel(this._onCancel(),true);this._unsetOnCancel()}};t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util");var i=e("./es5").keys;var r=n.tryCatch;var a=n.errorObj;function s(e,s,o){return function(l){var u=o._boundValue();e:for(var c=0;c<e.length;++c){var d=e[c];if(d===Error||d!=null&&d.prototype instanceof Error){if(l instanceof d){return r(s).call(u,l)}}else if(typeof d==="function"){var f=r(d).call(u,l);if(f===a){return f}else if(f){return r(s).call(u,l)}}else if(n.isObject(l)){var h=i(d);for(var p=0;p<h.length;++p){var m=h[p];if(d[m]!=l[m]){continue e}}return r(s).call(u,l)}}return t}}return s}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){var t=false;var n=[];e.prototype._promiseCreated=function(){};e.prototype._pushContext=function(){};e.prototype._popContext=function(){return null};e._peekContext=e.prototype._peekContext=function(){};function i(){this._trace=new i.CapturedTrace(a())}i.prototype._pushContext=function(){if(this._trace!==undefined){this._trace._promiseCreated=null;n.push(this._trace)}};i.prototype._popContext=function(){if(this._trace!==undefined){var e=n.pop();var t=e._promiseCreated;e._promiseCreated=null;return t}return null};function r(){if(t)return new i}function a(){var e=n.length-1;if(e>=0){return n[e]}return undefined}i.CapturedTrace=null;i.create=r;i.deactivateLongStackTraces=function(){};i.activateLongStackTraces=function(){var n=e.prototype._pushContext;var r=e.prototype._popContext;var s=e._peekContext;var o=e.prototype._peekContext;var l=e.prototype._promiseCreated;i.deactivateLongStackTraces=function(){e.prototype._pushContext=n;e.prototype._popContext=r;e._peekContext=s;e.prototype._peekContext=o;e.prototype._promiseCreated=l;t=false};t=true;e.prototype._pushContext=i.prototype._pushContext;e.prototype._popContext=i.prototype._popContext;e._peekContext=e.prototype._peekContext=a;e.prototype._promiseCreated=function(){var e=this._peekContext();if(e&&e._promiseCreated==null)e._promiseCreated=this}};return i}},{}],9:[function(e,t,n){"use strict";t.exports=function(t,n){var i=t._getDomain;var r=t._async;var a=e("./errors").Warning;var s=e("./util");var o=s.canAttachTrace;var l;var u;var c=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/;var d=null;var f=null;var h=false;var p;var m=!!(s.env("BLUEBIRD_DEBUG")!=0&&(true||s.env("BLUEBIRD_DEBUG")||s.env("NODE_ENV")==="development"));var _=!!(s.env("BLUEBIRD_WARNINGS")!=0&&(m||s.env("BLUEBIRD_WARNINGS")));var g=!!(s.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(m||s.env("BLUEBIRD_LONG_STACK_TRACES")));var v=s.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(_||!!s.env("BLUEBIRD_W_FORGOTTEN_RETURN"));t.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=e._bitField&~1048576|524288};t.prototype._ensurePossibleRejectionHandled=function(){if((this._bitField&524288)!==0)return;this._setRejectionIsUnhandled();r.invokeLater(this._notifyUnhandledRejection,this,undefined)};t.prototype._notifyUnhandledRejectionIsHandled=function(){q("rejectionHandled",l,undefined,this)};t.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456};t.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0};t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified();q("unhandledRejection",u,e,this)}};t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144};t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&~262144};t.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0};t.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576};t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&~1048576;if(this._isUnhandledRejectionNotified()){this._unsetUnhandledRejectionIsNotified();this._notifyUnhandledRejectionIsHandled()}};t.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0};t.prototype._warn=function(e,t,n){return U(e,t,n||this)};t.onPossiblyUnhandledRejection=function(e){var t=i();u=typeof e==="function"?t===null?e:t.bind(e):undefined};t.onUnhandledRejectionHandled=function(e){var t=i();l=typeof e==="function"?t===null?e:t.bind(e):undefined};var y=function(){};t.longStackTraces=function(){if(r.haveItemsQueued()&&!ie.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}if(!ie.longStackTraces&&J()){var e=t.prototype._captureStackTrace;var i=t.prototype._attachExtraTrace;ie.longStackTraces=true;y=function(){if(r.haveItemsQueued()&&!ie.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}t.prototype._captureStackTrace=e;t.prototype._attachExtraTrace=i;n.deactivateLongStackTraces();r.enableTrampoline();ie.longStackTraces=false};t.prototype._captureStackTrace=N;t.prototype._attachExtraTrace=F;n.activateLongStackTraces();r.disableTrampolineIfNecessary()}};t.hasLongStackTraces=function(){return ie.longStackTraces&&J()};var b=function(){try{var e=document.createEvent("CustomEvent");e.initCustomEvent("testingtheevent",false,true,{});s.global.dispatchEvent(e);return function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent(e.toLowerCase(),false,true,t);return!s.global.dispatchEvent(n)}}catch(t){}return function(){return false}}();var x=function(){if(s.isNode){return function(){return process.emit.apply(process,arguments)}}else{if(!s.global){return function(){return false}}return function(e){var t="on"+e.toLowerCase();var n=s.global[t];if(!n)return false;n.apply(s.global,[].slice.call(arguments,1));return true}}}();function w(e,t){return{promise:t}}var L={promiseCreated:w,promiseFulfilled:w,promiseRejected:w,promiseResolved:w,promiseCancelled:w,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:w};var S=function(e){var t=false;try{t=x.apply(null,arguments)}catch(n){r.throwLater(n);t=true}var i=false;try{i=b(e,L[e].apply(null,arguments))}catch(n){r.throwLater(n);i=true}return i||t};t.config=function(e){e=Object(e);if("longStackTraces"in e){if(e.longStackTraces){t.longStackTraces()}else if(!e.longStackTraces&&t.hasLongStackTraces()){y()}}if("warnings"in e){var n=e.warnings;ie.warnings=!!n;v=ie.warnings;if(s.isObject(n)){if("wForgottenReturn"in n){v=!!n.wForgottenReturn}}}if("cancellation"in e&&e.cancellation&&!ie.cancellation){if(r.haveItemsQueued()){throw new Error("cannot enable cancellation after promises are in use")}t.prototype._clearCancellationData=C;t.prototype._propagateFrom=R;t.prototype._onCancel=M;t.prototype._setOnCancel=A;t.prototype._attachCancellationCallback=T;t.prototype._execute=k;I=R;ie.cancellation=true}if("monitoring"in e){if(e.monitoring&&!ie.monitoring){ie.monitoring=true;t.prototype._fireEvent=S}else if(!e.monitoring&&ie.monitoring){ie.monitoring=false;t.prototype._fireEvent=E}}};function E(){return false}t.prototype._fireEvent=E;t.prototype._execute=function(e,t,n){try{e(t,n)}catch(i){return i}};t.prototype._onCancel=function(){};t.prototype._setOnCancel=function(e){};t.prototype._attachCancellationCallback=function(e){};t.prototype._captureStackTrace=function(){};t.prototype._attachExtraTrace=function(){};t.prototype._clearCancellationData=function(){};t.prototype._propagateFrom=function(e,t){};function k(e,t,n){var i=this;try{e(t,n,function(e){if(typeof e!=="function"){throw new TypeError("onCancel must be a function, got: "+s.toString(e))}i._attachCancellationCallback(e)})}catch(r){return r}}function T(e){if(!this.isCancellable())return this;var t=this._onCancel();if(t!==undefined){if(s.isArray(t)){t.push(e)}else{this._setOnCancel([t,e])}}else{this._setOnCancel(e)}}function M(){return this._onCancelField}function A(e){this._onCancelField=e}function C(){this._cancellationParent=undefined;this._onCancelField=undefined}function R(e,t){if((t&1)!==0){this._cancellationParent=e;var n=e._branchesRemainingToCancel;if(n===undefined){n=0}e._branchesRemainingToCancel=n+1}if((t&2)!==0&&e._isBound()){this._setBoundTo(e._boundTo)}}function D(e,t){if((t&2)!==0&&e._isBound()){this._setBoundTo(e._boundTo)}}var I=D;function O(){var e=this._boundTo;if(e!==undefined){if(e instanceof t){if(e.isFulfilled()){return e.value()}else{return undefined}}}return e}function N(){this._trace=new te(this._peekContext())}function F(e,t){if(o(e)){var n=this._trace;if(n!==undefined){if(t)n=n._parent}if(n!==undefined){n.attachExtraTrace(e)}else if(!e.__stackCleaned__){var i=z(e);s.notEnumerableProp(e,"stack",i.message+"\n"+i.stack.join("\n"));s.notEnumerableProp(e,"__stackCleaned__",true)}}}function B(e,t,n,i,r){if(e===undefined&&t!==null&&v){if(r!==undefined&&r._returnedNonUndefined())return;if((i._bitField&65535)===0)return;if(n)n=n+" ";var a="a promise was created in a "+n+"handler but was not returned from it";i._warn(a,true,t)}}function P(e,t){var n=e+" is deprecated and will be removed in a future version.";if(t)n+=" Use "+t+" instead.";return U(n)}function U(e,n,i){if(!ie.warnings)return;var r=new a(e);var s;if(n){i._attachExtraTrace(r)}else if(ie.longStackTraces&&(s=t._peekContext())){s.attachExtraTrace(r)}else{var o=z(r);r.stack=o.message+"\n"+o.stack.join("\n")}if(!S("warning",r)){$(r,"",true)}}function Y(e,t){for(var n=0;n<t.length-1;++n){t[n].push("From previous event:");t[n]=t[n].join("\n")}if(n<t.length){t[n]=t[n].join("\n")}return e+"\n"+t.join("\n")}function H(e){for(var t=0;t<e.length;++t){if(e[t].length===0||t+1<e.length&&e[t][0]===e[t+1][0]){e.splice(t,1);t--}}}function G(e){var t=e[0];for(var n=1;n<e.length;++n){var i=e[n];var r=t.length-1;var a=t[r];var s=-1;for(var o=i.length-1;o>=0;--o){if(i[o]===a){s=o;break}}for(var o=s;o>=0;--o){var l=i[o];if(t[r]===l){t.pop();r--}else{break}}t=i}}function j(e){var t=[];for(var n=0;n<e.length;++n){var i=e[n];var r="    (No stack trace)"===i||d.test(i);var a=r&&X(i);if(r&&!a){if(h&&i.charAt(0)!==" "){i="    "+i}t.push(i)}}return t}function V(e){var t=e.stack.replace(/\s+$/g,"").split("\n");for(var n=0;n<t.length;++n){var i=t[n];if("    (No stack trace)"===i||d.test(i)){break}}if(n>0){t=t.slice(n)}return t}function z(e){var t=e.stack;var n=e.toString();t=typeof t==="string"&&t.length>0?V(e):["    (No stack trace)"];return{message:n,stack:j(t)}}function $(e,t,n){if(typeof console!=="undefined"){var i;if(s.isObject(e)){var r=e.stack;i=t+f(r,e)}else{i=t+String(e)}if(typeof p==="function"){p(i,n)}else if(typeof console.log==="function"||typeof console.log==="object"){console.log(i)}}}function q(e,t,n,i){var a=false;try{if(typeof t==="function"){a=true;if(e==="rejectionHandled"){t(i)}else{t(n,i)}}}catch(s){r.throwLater(s)}if(e==="unhandledRejection"){if(!S(e,n,i)&&!a){$(n,"Unhandled rejection ")}}else{S(e,i)}}function W(e){var t;if(typeof e==="function"){t="[function "+(e.name||"anonymous")+"]"}else{t=e&&typeof e.toString==="function"?e.toString():s.toString(e);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(t)){try{var i=JSON.stringify(e);t=i}catch(r){}}if(t.length===0){t="(empty array)"}}return"(<"+K(t)+">, no stack trace)"}function K(e){var t=41;if(e.length<t){return e}return e.substr(0,t-3)+"..."}function J(){return typeof ne==="function"}var X=function(){return false};var Z=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Q(e){var t=e.match(Z);if(t){return{fileName:t[1],line:parseInt(t[2],10)}}}function ee(e,t){if(!J())return;var n=e.stack.split("\n");var i=t.stack.split("\n");var r=-1;var a=-1;var s;var o;for(var l=0;l<n.length;++l){var u=Q(n[l]);if(u){s=u.fileName;r=u.line;break}}for(var l=0;l<i.length;++l){var u=Q(i[l]);if(u){o=u.fileName;a=u.line;break}}if(r<0||a<0||!s||!o||s!==o||r>=a){return}X=function(e){if(c.test(e))return true;var t=Q(e);if(t){if(t.fileName===s&&(r<=t.line&&t.line<=a)){return true}}return false}}function te(e){this._parent=e;this._promisesCreated=0;var t=this._length=1+(e===undefined?0:e._length);ne(this,te);if(t>32)this.uncycle()}s.inherits(te,Error);n.CapturedTrace=te;te.prototype.uncycle=function(){var e=this._length;if(e<2)return;var t=[];var n={};for(var i=0,r=this;r!==undefined;++i){t.push(r);r=r._parent}e=this._length=i;for(var i=e-1;i>=0;--i){var a=t[i].stack;if(n[a]===undefined){n[a]=i}}for(var i=0;i<e;++i){var s=t[i].stack;var o=n[s];if(o!==undefined&&o!==i){if(o>0){t[o-1]._parent=undefined;t[o-1]._length=1}t[i]._parent=undefined;t[i]._length=1;var l=i>0?t[i-1]:this;if(o<e-1){l._parent=t[o+1];l._parent.uncycle();l._length=l._parent._length+1}else{l._parent=undefined;l._length=1}var u=l._length+1;for(var c=i-2;c>=0;--c){t[c]._length=u;u++}return}}};te.prototype.attachExtraTrace=function(e){if(e.__stackCleaned__)return;this.uncycle();var t=z(e);var n=t.message;var i=[t.stack];var r=this;while(r!==undefined){i.push(j(r.stack.split("\n")));r=r._parent}G(i);H(i);s.notEnumerableProp(e,"stack",Y(n,i));s.notEnumerableProp(e,"__stackCleaned__",true)};var ne=function re(){var e=/^\s*at\s*/;var t=function(e,t){if(typeof e==="string")return e;if(t.name!==undefined&&t.message!==undefined){return t.toString()}return W(t)};if(typeof Error.stackTraceLimit==="number"&&typeof Error.captureStackTrace==="function"){Error.stackTraceLimit+=6;d=e;f=t;var n=Error.captureStackTrace;X=function(e){return c.test(e)};return function(e,t){Error.stackTraceLimit+=6;n(e,t);Error.stackTraceLimit-=6}}var i=new Error;if(typeof i.stack==="string"&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0){d=/@/;f=t;h=true;return function s(e){e.stack=(new Error).stack}}var r;try{throw new Error}catch(a){r="stack"in a}if(!("stack"in i)&&r&&typeof Error.stackTraceLimit==="number"){d=e;f=t;return function o(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6}}f=function(e,t){if(typeof e==="string")return e;if((typeof t==="object"||typeof t==="function")&&t.name!==undefined&&t.message!==undefined){return t.toString()}return W(t)};return null}([]);if(typeof console!=="undefined"&&typeof console.warn!=="undefined"){p=function(e){console.warn(e)};if(s.isNode&&process.stderr.isTTY){p=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}}else if(!s.isNode&&typeof(new Error).stack==="string"){p=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}}}var ie={warnings:_,longStackTraces:false,cancellation:false,monitoring:false};if(g)t.longStackTraces();return{longStackTraces:function(){return ie.longStackTraces},warnings:function(){return ie.warnings},cancellation:function(){return ie.cancellation},monitoring:function(){return ie.monitoring},propagateFromFunction:function(){return I},boundValueFunction:function(){return O},checkForgottenReturns:B,setBounds:ee,warn:U,deprecated:P,CapturedTrace:te,fireDomEvent:b,fireGlobalEvent:x}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(n){if(n instanceof e)n.suppressUnhandledRejections();return this._then(t,undefined,undefined,{value:n},undefined)};e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(n,undefined,undefined,{reason:e},undefined)};e.prototype.catchThrow=function(e){if(arguments.length<=1){return this._then(undefined,n,undefined,{reason:e},undefined)}else{var t=arguments[1];var i=function(){throw t};return this.caught(e,i)}};e.prototype.catchReturn=function(n){if(arguments.length<=1){if(n instanceof e)n.suppressUnhandledRejections();return this._then(undefined,t,undefined,{value:n},undefined)}else{var i=arguments[1];if(i instanceof e)i.suppressUnhandledRejections();var r=function(){return i};return this.caught(n,r)}}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.reduce;var i=e.all;function r(){return i(this)}function a(e,i){return n(e,i,t,t)}e.prototype.each=function(e){return this.mapSeries(e)._then(r,undefined,undefined,this,undefined)};e.prototype.mapSeries=function(e){return n(this,e,t,t)};e.each=function(e,t){return a(e,t)._then(r,undefined,undefined,e,undefined)};e.mapSeries=a}},{}],12:[function(e,t,n){"use strict";var i=e("./es5");var r=i.freeze;var a=e("./util");var s=a.inherits;var o=a.notEnumerableProp;function l(e,t){function n(i){if(!(this instanceof n))return new n(i);o(this,"message",typeof i==="string"?i:t);o(this,"name",e);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}else{Error.call(this)}}s(n,Error);return n}var u,c;var d=l("Warning","warning");var f=l("CancellationError","cancellation error");var h=l("TimeoutError","timeout error");var p=l("AggregateError","aggregate error");try{u=TypeError;c=RangeError}catch(m){u=l("TypeError","type error");c=l("RangeError","range error")}var _=("join pop push shift unshift slice filter forEach some "+"every map indexOf lastIndexOf reduce reduceRight sort reverse").split(" ");for(var g=0;g<_.length;++g){if(typeof Array.prototype[_[g]]==="function"){p.prototype[_[g]]=Array.prototype[_[g]]}}i.defineProperty(p.prototype,"length",{value:0,configurable:false,writable:true,enumerable:true});p.prototype["isOperational"]=true;var v=0;p.prototype.toString=function(){var e=Array(v*4+1).join(" ");var t="\n"+e+"AggregateError of:"+"\n";v++;e=Array(v*4+1).join(" ");for(var n=0;n<this.length;++n){var i=this[n]===this?"[Circular AggregateError]":this[n]+"";var r=i.split("\n");for(var a=0;a<r.length;++a){r[a]=e+r[a]}i=r.join("\n");t+=i+"\n"}v--;return t};function y(e){if(!(this instanceof y))return new y(e);o(this,"name","OperationalError");o(this,"message",e);this.cause=e;this["isOperational"]=true;if(e instanceof Error){o(this,"message",e.message);o(this,"stack",e.stack)}else if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}}s(y,Error);var b=Error["__BluebirdErrorTypes__"];if(!b){b=r({CancellationError:f,TimeoutError:h,OperationalError:y,RejectionError:y,AggregateError:p});i.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:false,enumerable:false,configurable:false})}t.exports={Error:Error,TypeError:u,RangeError:c,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:d}},{"./es5":13,"./util":36}],13:[function(e,t,n){var i=function(){"use strict";return this===undefined}();if(i){t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:i,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!!(!n||n.writable||n.set)}}}else{var r={}.hasOwnProperty;var a={}.toString;var s={}.constructor.prototype;var o=function(e){var t=[];for(var n in e){if(r.call(e,n)){t.push(n)}}return t};var l=function(e,t){return{value:e[t]}};var u=function(e,t,n){e[t]=n.value;return e};var c=function(e){return e};var d=function(e){try{return Object(e).constructor.prototype}catch(t){return s}};var f=function(e){try{return a.call(e)==="[object Array]"}catch(t){return false}};t.exports={isArray:f,keys:o,names:o,defineProperty:u,getDescriptor:l,freeze:c,getPrototypeOf:d,isES5:i,propertyIsWritable:function(){return true}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,i){return n(this,e,i,t)};e.filter=function(e,i,r){return n(e,i,r,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n){var i=e("./util");var r=t.CancellationError;var a=i.errorObj;function s(e,t,n){this.promise=e;this.type=t;this.handler=n;this.called=false;this.cancelPromise=null}s.prototype.isFinallyHandler=function(){return this.type===0};function o(e){this.finallyHandler=e}o.prototype._resultCancelled=function(){l(this.finallyHandler)};function l(e,t){if(e.cancelPromise!=null){if(arguments.length>1){e.cancelPromise._reject(t)}else{e.cancelPromise._cancel()}e.cancelPromise=null;return true}return false}function u(){return d.call(this,this.promise._target()._settledValue())}function c(e){if(l(this,e))return;a.e=e;return a}function d(e){var i=this.promise;var s=this.handler;if(!this.called){this.called=true;var d=this.isFinallyHandler()?s.call(i._boundValue()):s.call(i._boundValue(),e);if(d!==undefined){i._setReturnedNonUndefined();var f=n(d,i);if(f instanceof t){if(this.cancelPromise!=null){if(f.isCancelled()){var h=new r("late cancellation observer");i._attachExtraTrace(h);a.e=h;return a}else if(f.isPending()){f._attachCancellationCallback(new o(this))}}return f._then(u,c,undefined,this,undefined)}}}if(i.isRejected()){l(this);a.e=e;return a}else{l(this);return e}}t.prototype._passThrough=function(e,t,n,i){if(typeof e!=="function")return this.then();return this._then(n,i,undefined,new s(this,t,e),undefined)};t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,d,d)};t.prototype.tap=function(e){return this._passThrough(e,1,d)};return s}},{"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,i,r,a,s){var o=e("./errors");var l=o.TypeError;var u=e("./util");var c=u.errorObj;var d=u.tryCatch;var f=[];function h(e,n,i){for(var a=0;a<n.length;++a){i._pushContext();var s=d(n[a])(e);i._popContext();if(s===c){i._pushContext();var o=t.reject(c.e);i._popContext();return o}var l=r(s,i);if(l instanceof t)return l}return null}function p(e,n,r,a){if(s.cancellation()){var o=new t(i);var l=this._finallyPromise=new t(i);this._promise=o.lastly(function(){return l});o._captureStackTrace();o._setOnCancel(this)}else{var u=this._promise=new t(i);u._captureStackTrace()}this._stack=a;this._generatorFunction=e;this._receiver=n;this._generator=undefined;this._yieldHandlers=typeof r==="function"?[r].concat(f):f;this._yieldedPromise=null;this._cancellationPhase=false}u.inherits(p,a);p.prototype._isResolved=function(){return this._promise===null};p.prototype._cleanup=function(){this._promise=this._generator=null;if(s.cancellation()&&this._finallyPromise!==null){this._finallyPromise._fulfill();this._finallyPromise=null;

}};p.prototype._promiseCancelled=function(){if(this._isResolved())return;var e=typeof this._generator["return"]!=="undefined";var n;if(!e){var i=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=i;this._promise._attachExtraTrace(i);this._promise._pushContext();n=d(this._generator["throw"]).call(this._generator,i);this._promise._popContext()}else{this._promise._pushContext();n=d(this._generator["return"]).call(this._generator,undefined);this._promise._popContext()}this._cancellationPhase=true;this._yieldedPromise=null;this._continue(n)};p.prototype._promiseFulfilled=function(e){this._yieldedPromise=null;this._promise._pushContext();var t=d(this._generator.next).call(this._generator,e);this._promise._popContext();this._continue(t)};p.prototype._promiseRejected=function(e){this._yieldedPromise=null;this._promise._attachExtraTrace(e);this._promise._pushContext();var t=d(this._generator["throw"]).call(this._generator,e);this._promise._popContext();this._continue(t)};p.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null;e.cancel()}};p.prototype.promise=function(){return this._promise};p.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=undefined;this._promiseFulfilled(undefined)};p.prototype._continue=function(e){var n=this._promise;if(e===c){this._cleanup();if(this._cancellationPhase){return n.cancel()}else{return n._rejectCallback(e.e,false)}}var i=e.value;if(e.done===true){this._cleanup();if(this._cancellationPhase){return n.cancel()}else{return n._resolveCallback(i)}}else{var a=r(i,this._promise);if(!(a instanceof t)){a=h(a,this._yieldHandlers,this._promise);if(a===null){this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",i)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));return}}a=a._target();var s=a._bitField;if((s&50397184)===0){this._yieldedPromise=a;a._proxy(this,null)}else if((s&33554432)!==0){this._promiseFulfilled(a._value())}else if((s&16777216)!==0){this._promiseRejected(a._reason())}else{this._promiseCancelled()}}};t.coroutine=function(e,t){if(typeof e!=="function"){throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n")}var n=Object(t).yieldHandler;var i=p;var r=(new Error).stack;return function(){var t=e.apply(this,arguments);var a=new i(undefined,undefined,n,r);var s=a.promise();a._generator=t;a._promiseFulfilled(undefined);return s}};t.coroutine.addYieldHandler=function(e){if(typeof e!=="function"){throw new l("expecting a function but got "+u.classString(e))}f.push(e)};t.spawn=function(e){s.deprecated("Promise.spawn()","Promise.coroutine()");if(typeof e!=="function"){return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n")}var i=new p(e,this);var r=i.promise();i._run(t.spawn);return r}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,i,r){var a=e("./util");var s=a.canEvaluate;var o=a.tryCatch;var l=a.errorObj;var u;if(false){if(s){var c=function(e){return new Function("value","holder","                             \n	            'use strict';                                                    \n	            holder.pIndex = value;                                           \n	            holder.checkFulfillment(this);                                   \n	            ".replace(/Index/g,e))};var d=function(e){return new Function("promise","holder","                           \n	            'use strict';                                                    \n	            holder.pIndex = promise;                                         \n	            ".replace(/Index/g,e))};var f=function(e){var n=new Array(e);for(var i=0;i<n.length;++i){n[i]="this.p"+(i+1)}var r=n.join(" = ")+" = null;";var a="var promise;\n"+n.map(function(e){return"                                                         \n	                promise = "+e+";                                      \n	                if (promise instanceof Promise) {                            \n	                    promise.cancel();                                        \n	                }                                                            \n	            "}).join("\n");var s=n.join(", ");var u="Holder$"+e;var c="return function(tryCatch, errorObj, Promise) {           \n	            'use strict';                                                    \n	            function [TheName](fn) {                                         \n	                [TheProperties]                                              \n	                this.fn = fn;                                                \n	                this.now = 0;                                                \n	            }                                                                \n	            [TheName].prototype.checkFulfillment = function(promise) {       \n	                var now = ++this.now;                                        \n	                if (now === [TheTotal]) {                                    \n	                    promise._pushContext();                                  \n	                    var callback = this.fn;                                  \n	                    var ret = tryCatch(callback)([ThePassedArguments]);      \n	                    promise._popContext();                                   \n	                    if (ret === errorObj) {                                  \n	                        promise._rejectCallback(ret.e, false);               \n	                    } else {                                                 \n	                        promise._resolveCallback(ret);                       \n	                    }                                                        \n	                }                                                            \n	            };                                                               \n	                                                                             \n	            [TheName].prototype._resultCancelled = function() {              \n	                [CancellationCode]                                           \n	            };                                                               \n	                                                                             \n	            return [TheName];                                                \n	        }(tryCatch, errorObj, Promise);                                      \n	        ";c=c.replace(/\[TheName\]/g,u).replace(/\[TheTotal\]/g,e).replace(/\[ThePassedArguments\]/g,s).replace(/\[TheProperties\]/g,r).replace(/\[CancellationCode\]/g,a);return new Function("tryCatch","errorObj","Promise",c)(o,l,t)};var h=[];var p=[];var m=[];for(var _=0;_<8;++_){h.push(f(_+1));p.push(c(_+1));m.push(d(_+1))}u=function(e){this._reject(e)}}}t.join=function(){var e=arguments.length-1;var a;if(e>0&&typeof arguments[e]==="function"){a=arguments[e];if(false){if(e<=8&&s){var o=new t(r);o._captureStackTrace();var l=h[e-1];var c=new l(a);var d=p;for(var f=0;f<e;++f){var _=i(arguments[f],o);if(_ instanceof t){_=_._target();var g=_._bitField;if((g&50397184)===0){_._then(d[f],u,undefined,o,c);m[f](_,c)}else if((g&33554432)!==0){d[f].call(o,_._value(),c)}else if((g&16777216)!==0){o._reject(_._reason())}else{o._cancel()}}else{d[f].call(o,_,c)}}if(!o._isFateSealed()){o._setAsyncGuaranteed();o._setOnCancel(c)}return o}}}var v=[].slice.call(arguments);if(a)v.pop();var o=new n(v).promise();return a!==undefined?o.spread(a):o}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,i,r,a,s){var o=t._getDomain;var l=e("./util");var u=l.tryCatch;var c=l.errorObj;var d=[];function f(e,t,n,i){this.constructor$(e);this._promise._captureStackTrace();var r=o();this._callback=r===null?t:r.bind(t);this._preservedValues=i===a?new Array(this.length()):null;this._limit=n;this._inFlight=0;this._queue=n>=1?[]:d;this._init$(undefined,-2)}l.inherits(f,n);f.prototype._init=function(){};f.prototype._promiseFulfilled=function(e,n){var i=this._values;var a=this.length();var o=this._preservedValues;var l=this._limit;if(n<0){n=n*-1-1;i[n]=e;if(l>=1){this._inFlight--;this._drainQueue();if(this._isResolved())return true}}else{if(l>=1&&this._inFlight>=l){i[n]=e;this._queue.push(n);return false}if(o!==null)o[n]=e;var d=this._promise;var f=this._callback;var h=d._boundValue();d._pushContext();var p=u(f).call(h,e,n,a);var m=d._popContext();s.checkForgottenReturns(p,m,o!==null?"Promise.filter":"Promise.map",d);if(p===c){this._reject(p.e);return true}var _=r(p,this._promise);if(_ instanceof t){_=_._target();var g=_._bitField;if((g&50397184)===0){if(l>=1)this._inFlight++;i[n]=_;_._proxy(this,(n+1)*-1);return false}else if((g&33554432)!==0){p=_._value()}else if((g&16777216)!==0){this._reject(_._reason());return true}else{this._cancel();return true}}i[n]=p}var v=++this._totalResolved;if(v>=a){if(o!==null){this._filter(i,o)}else{this._resolve(i)}return true}return false};f.prototype._drainQueue=function(){var e=this._queue;var t=this._limit;var n=this._values;while(e.length>0&&this._inFlight<t){if(this._isResolved())return;var i=e.pop();this._promiseFulfilled(n[i],i)}};f.prototype._filter=function(e,t){var n=t.length;var i=new Array(n);var r=0;for(var a=0;a<n;++a){if(e[a])i[r++]=t[a]}i.length=r;this._resolve(i)};f.prototype.preservedValues=function(){return this._preservedValues};function h(e,n,r,a){if(typeof n!=="function"){return i("expecting a function but got "+l.classString(n))}var s=0;if(r!==undefined){if(typeof r==="object"&&r!==null){if(typeof r.concurrency!=="number"){return t.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(r.concurrency)))}s=r.concurrency}else{return t.reject(new TypeError("options argument must be an object but it is "+l.classString(r)))}}s=typeof s==="number"&&isFinite(s)&&s>=1?s:0;return new f(e,n,s,a).promise()}t.prototype.map=function(e,t){return h(this,e,t,null)};t.map=function(e,t,n,i){return h(e,t,n,i)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,i,r,a){var s=e("./util");var o=s.tryCatch;t.method=function(e){if(typeof e!=="function"){throw new t.TypeError("expecting a function but got "+s.classString(e))}return function(){var i=new t(n);i._captureStackTrace();i._pushContext();var r=o(e).apply(this,arguments);var s=i._popContext();a.checkForgottenReturns(r,s,"Promise.method",i);i._resolveFromSyncValue(r);return i}};t.attempt=t["try"]=function(e){if(typeof e!=="function"){return r("expecting a function but got "+s.classString(e))}var i=new t(n);i._captureStackTrace();i._pushContext();var l;if(arguments.length>1){a.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1];var c=arguments[2];l=s.isArray(u)?o(e).apply(c,u):o(e).call(c,u)}else{l=o(e)()}var d=i._popContext();a.checkForgottenReturns(l,d,"Promise.try",i);i._resolveFromSyncValue(l);return i};t.prototype._resolveFromSyncValue=function(e){if(e===s.errorObj){this._rejectCallback(e.e,false)}else{this._resolveCallback(e,true)}}}},{"./util":36}],20:[function(e,t,n){"use strict";var i=e("./util");var r=i.maybeWrapAsError;var a=e("./errors");var s=a.OperationalError;var o=e("./es5");function l(e){return e instanceof Error&&o.getPrototypeOf(e)===Error.prototype}var u=/^(?:name|message|stack|cause)$/;function c(e){var t;if(l(e)){t=new s(e);t.name=e.name;t.message=e.message;t.stack=e.stack;var n=o.keys(e);for(var r=0;r<n.length;++r){var a=n[r];if(!u.test(a)){t[a]=e[a]}}return t}i.markAsOriginatingFromRejection(e);return e}function d(e,t){return function(n,i){if(e===null)return;if(n){var a=c(r(n));e._attachExtraTrace(a);e._reject(a)}else if(!t){e._fulfill(i)}else{var s=[].slice.call(arguments,1);e._fulfill(s)}e=null}}t.exports=d},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util");var i=t._async;var r=n.tryCatch;var a=n.errorObj;function s(e,t){var s=this;if(!n.isArray(e))return o.call(s,e,t);var l=r(t).apply(s._boundValue(),[null].concat(e));if(l===a){i.throwLater(l.e)}}function o(e,t){var n=this;var s=n._boundValue();var o=e===undefined?r(t).call(s,null):r(t).call(s,null,e);if(o===a){i.throwLater(o.e)}}function l(e,t){var n=this;if(!e){var s=new Error(e+"");s.cause=e;e=s}var o=r(t).call(n._boundValue(),e);if(o===a){i.throwLater(o.e)}}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if(typeof e=="function"){var n=o;if(t!==undefined&&Object(t).spread){n=s}this._then(n,l,undefined,this,e)}return this}}},{"./util":36}],22:[function(e,t,n){"use strict";t.exports=function(){var n=function(){return new h("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")};var i=function(){return new C.PromiseInspection(this._target())};var r=function(e){return C.reject(new h(e))};function a(){}var s={};var o=e("./util");var l;if(o.isNode){l=function(){var e=process.domain;if(e===undefined)e=null;return e}}else{l=function(){return null}}o.notEnumerableProp(C,"_getDomain",l);var u=e("./es5");var c=e("./async");var d=new c;u.defineProperty(C,"_async",{value:d});var f=e("./errors");var h=C.TypeError=f.TypeError;C.RangeError=f.RangeError;var p=C.CancellationError=f.CancellationError;C.TimeoutError=f.TimeoutError;C.OperationalError=f.OperationalError;C.RejectionError=f.OperationalError;C.AggregateError=f.AggregateError;var m=function(){};var _={};var g={};var v=e("./thenables")(C,m);var y=e("./promise_array")(C,m,v,r,a);var b=e("./context")(C);var x=b.create;var w=e("./debuggability")(C,b);var L=w.CapturedTrace;var S=e("./finally")(C,v);var E=e("./catch_filter")(g);var k=e("./nodeback");var T=o.errorObj;var M=o.tryCatch;function A(e,t){if(typeof t!=="function"){throw new h("expecting a function but got "+o.classString(t))}if(e.constructor!==C){throw new h("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}}function C(e){this._bitField=0;this._fulfillmentHandler0=undefined;this._rejectionHandler0=undefined;this._promise0=undefined;this._receiver0=undefined;if(e!==m){A(this,e);this._resolveFromExecutor(e)}this._promiseCreated();this._fireEvent("promiseCreated",this)}C.prototype.toString=function(){return"[object Promise]"};C.prototype.caught=C.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n=new Array(t-1),i=0,a;for(a=0;a<t-1;++a){var s=arguments[a];if(o.isObject(s)){n[i++]=s}else{return r("expecting an object but got "+o.classString(s))}}n.length=i;e=arguments[a];return this.then(undefined,E(n,e,this))}return this.then(undefined,e)};C.prototype.reflect=function(){return this._then(i,i,undefined,this,undefined)};C.prototype.then=function(e,t){if(w.warnings()&&arguments.length>0&&typeof e!=="function"&&typeof t!=="function"){var n=".then() only accepts functions but was passed: "+o.classString(e);if(arguments.length>1){n+=", "+o.classString(t)}this._warn(n)}return this._then(e,t,undefined,undefined,undefined)};C.prototype.done=function(e,t){var n=this._then(e,t,undefined,undefined,undefined);n._setIsFinal()};C.prototype.spread=function(e){if(typeof e!=="function"){return r("expecting a function but got "+o.classString(e))}return this.all()._then(e,undefined,undefined,_,undefined)};C.prototype.toJSON=function(){var e={isFulfilled:false,isRejected:false,fulfillmentValue:undefined,rejectionReason:undefined};if(this.isFulfilled()){e.fulfillmentValue=this.value();e.isFulfilled=true}else if(this.isRejected()){e.rejectionReason=this.reason();e.isRejected=true}return e};C.prototype.all=function(){if(arguments.length>0){this._warn(".all() was passed arguments but it does not take any")}return new y(this).promise()};C.prototype.error=function(e){return this.caught(o.originatesFromRejection,e)};C.getNewLibraryCopy=t.exports;C.is=function(e){return e instanceof C};C.fromNode=C.fromCallback=function(e){var t=new C(m);t._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:false;var i=M(e)(k(t,n));if(i===T){t._rejectCallback(i.e,true)}if(!t._isFateSealed())t._setAsyncGuaranteed();return t};C.all=function(e){return new y(e).promise()};C.cast=function(e){var t=v(e);if(!(t instanceof C)){t=new C(m);t._captureStackTrace();t._setFulfilled();t._rejectionHandler0=e}return t};C.resolve=C.fulfilled=C.cast;C.reject=C.rejected=function(e){var t=new C(m);t._captureStackTrace();t._rejectCallback(e,true);return t};C.setScheduler=function(e){if(typeof e!=="function"){throw new h("expecting a function but got "+o.classString(e))}return d.setScheduler(e)};C.prototype._then=function(e,t,n,i,r){var a=r!==undefined;var s=a?r:new C(m);var o=this._target();var u=o._bitField;if(!a){s._propagateFrom(this,3);s._captureStackTrace();if(i===undefined&&(this._bitField&2097152)!==0){if(!((u&50397184)===0)){i=this._boundValue()}else{i=o===this?undefined:this._boundTo}}this._fireEvent("promiseChained",this,s)}var c=l();if(!((u&50397184)===0)){var f,h,_=o._settlePromiseCtx;if((u&33554432)!==0){h=o._rejectionHandler0;f=e}else if((u&16777216)!==0){h=o._fulfillmentHandler0;f=t;o._unsetRejectionIsUnhandled()}else{_=o._settlePromiseLateCancellationObserver;h=new p("late cancellation observer");o._attachExtraTrace(h);f=t}d.invoke(_,o,{handler:c===null?f:typeof f==="function"&&c.bind(f),promise:s,receiver:i,value:h})}else{o._addCallbacks(e,t,s,i,c)}return s};C.prototype._length=function(){return this._bitField&65535};C.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0};C.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864};C.prototype._setLength=function(e){this._bitField=this._bitField&-65536|e&65535};C.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432;this._fireEvent("promiseFulfilled",this)};C.prototype._setRejected=function(){this._bitField=this._bitField|16777216;this._fireEvent("promiseRejected",this)};C.prototype._setFollowing=function(){this._bitField=this._bitField|67108864;this._fireEvent("promiseResolved",this)};C.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304};C.prototype._isFinal=function(){return(this._bitField&4194304)>0};C.prototype._unsetCancelled=function(){this._bitField=this._bitField&~65536};C.prototype._setCancelled=function(){this._bitField=this._bitField|65536;this._fireEvent("promiseCancelled",this)};C.prototype._setAsyncGuaranteed=function(){if(d.hasCustomScheduler())return;this._bitField=this._bitField|134217728};C.prototype._receiverAt=function(e){var t=e===0?this._receiver0:this[e*4-4+3];if(t===s){return undefined}else if(t===undefined&&this._isBound()){return this._boundValue()}return t};C.prototype._promiseAt=function(e){return this[e*4-4+2]};C.prototype._fulfillmentHandlerAt=function(e){return this[e*4-4+0]};C.prototype._rejectionHandlerAt=function(e){return this[e*4-4+1]};C.prototype._boundValue=function(){};C.prototype._migrateCallback0=function(e){var t=e._bitField;var n=e._fulfillmentHandler0;var i=e._rejectionHandler0;var r=e._promise0;var a=e._receiverAt(0);if(a===undefined)a=s;this._addCallbacks(n,i,r,a,null)};C.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t);var i=e._rejectionHandlerAt(t);var r=e._promiseAt(t);var a=e._receiverAt(t);if(a===undefined)a=s;this._addCallbacks(n,i,r,a,null)};C.prototype._addCallbacks=function(e,t,n,i,r){var a=this._length();if(a>=65535-4){a=0;this._setLength(0)}if(a===0){this._promise0=n;this._receiver0=i;if(typeof e==="function"){this._fulfillmentHandler0=r===null?e:r.bind(e)}if(typeof t==="function"){this._rejectionHandler0=r===null?t:r.bind(t)}}else{var s=a*4-4;this[s+2]=n;this[s+3]=i;if(typeof e==="function"){this[s+0]=r===null?e:r.bind(e)}if(typeof t==="function"){this[s+1]=r===null?t:r.bind(t)}}this._setLength(a+1);return a};C.prototype._proxy=function(e,t){this._addCallbacks(undefined,undefined,t,e,null)};C.prototype._resolveCallback=function(e,t){if((this._bitField&117506048)!==0)return;if(e===this)return this._rejectCallback(n(),false);var i=v(e,this);if(!(i instanceof C))return this._fulfill(e);if(t)this._propagateFrom(i,2);var r=i._target();if(r===this){this._reject(n());return}var a=r._bitField;if((a&50397184)===0){var s=this._length();if(s>0)r._migrateCallback0(this);for(var o=1;o<s;++o){r._migrateCallbackAt(this,o)}this._setFollowing();this._setLength(0);this._setFollowee(r)}else if((a&33554432)!==0){this._fulfill(r._value())}else if((a&16777216)!==0){this._reject(r._reason())}else{var l=new p("late cancellation observer");r._attachExtraTrace(l);this._reject(l)}};C.prototype._rejectCallback=function(e,t,n){var i=o.ensureErrorObject(e);var r=i===e;if(!r&&!n&&w.warnings()){var a="a promise was rejected with a non-error: "+o.classString(e);this._warn(a,true)}this._attachExtraTrace(i,t?r:false);this._reject(e)};C.prototype._resolveFromExecutor=function(e){var t=this;this._captureStackTrace();this._pushContext();var n=true;var i=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=false;this._popContext();if(i!==undefined){t._rejectCallback(i,true)}};C.prototype._settlePromiseFromHandler=function(e,t,n,i){var r=i._bitField;if((r&65536)!==0)return;i._pushContext();var a;if(t===_){if(!n||typeof n.length!=="number"){a=T;a.e=new h("cannot .spread() a non-array: "+o.classString(n))}else{a=M(e).apply(this._boundValue(),n)}}else{a=M(e).call(t,n)}var s=i._popContext();r=i._bitField;if((r&65536)!==0)return;if(a===g){i._reject(n)}else if(a===T){i._rejectCallback(a.e,false)}else{w.checkForgottenReturns(a,s,"",i,this);i._resolveCallback(a)}};C.prototype._target=function(){var e=this;while(e._isFollowing())e=e._followee();return e};C.prototype._followee=function(){return this._rejectionHandler0};C.prototype._setFollowee=function(e){this._rejectionHandler0=e};C.prototype._settlePromise=function(e,t,n,r){var s=e instanceof C;var o=this._bitField;var l=(o&134217728)!==0;if((o&65536)!==0){if(s)e._invokeInternalOnCancel();if(n instanceof S&&n.isFinallyHandler()){n.cancelPromise=e;if(M(t).call(n,r)===T){e._reject(T.e)}}else if(t===i){e._fulfill(i.call(n))}else if(n instanceof a){n._promiseCancelled(e)}else if(s||e instanceof y){e._cancel()}else{n.cancel()}}else if(typeof t==="function"){if(!s){t.call(n,r,e)}else{if(l)e._setAsyncGuaranteed();this._settlePromiseFromHandler(t,n,r,e)}}else if(n instanceof a){if(!n._isResolved()){if((o&33554432)!==0){n._promiseFulfilled(r,e)}else{n._promiseRejected(r,e)}}}else if(s){if(l)e._setAsyncGuaranteed();if((o&33554432)!==0){e._fulfill(r)}else{e._reject(r)}}};C.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler;var n=e.promise;var i=e.receiver;var r=e.value;if(typeof t==="function"){if(!(n instanceof C)){t.call(i,r,n)}else{this._settlePromiseFromHandler(t,i,r,n)}}else if(n instanceof C){n._reject(r)}};C.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)};C.prototype._settlePromise0=function(e,t,n){var i=this._promise0;var r=this._receiverAt(0);this._promise0=undefined;this._receiver0=undefined;this._settlePromise(i,e,r,t)};C.prototype._clearCallbackDataAtIndex=function(e){var t=e*4-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=undefined};C.prototype._fulfill=function(e){var t=this._bitField;if((t&117506048)>>>16)return;if(e===this){var i=n();this._attachExtraTrace(i);return this._reject(i)}this._setFulfilled();this._rejectionHandler0=e;if((t&65535)>0){if((t&134217728)!==0){this._settlePromises()}else{d.settlePromises(this)}}};C.prototype._reject=function(e){var t=this._bitField;if((t&117506048)>>>16)return;this._setRejected();this._fulfillmentHandler0=e;if(this._isFinal()){return d.fatalError(e,o.isNode)}if((t&65535)>0){d.settlePromises(this)}else{this._ensurePossibleRejectionHandled()}};C.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var i=this._fulfillmentHandlerAt(n);var r=this._promiseAt(n);var a=this._receiverAt(n);this._clearCallbackDataAtIndex(n);this._settlePromise(r,i,a,t)}};C.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var i=this._rejectionHandlerAt(n);var r=this._promiseAt(n);var a=this._receiverAt(n);this._clearCallbackDataAtIndex(n);this._settlePromise(r,i,a,t)}};C.prototype._settlePromises=function(){var e=this._bitField;var t=e&65535;if(t>0){if((e&16842752)!==0){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e);this._rejectPromises(t,n)}else{var i=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,i,e);this._fulfillPromises(t,i)}this._setLength(0)}this._clearCancellationData()};C.prototype._settledValue=function(){var e=this._bitField;if((e&33554432)!==0){return this._rejectionHandler0}else if((e&16777216)!==0){return this._fulfillmentHandler0}};function R(e){this.promise._resolveCallback(e)}function D(e){this.promise._rejectCallback(e,false)}C.defer=C.pending=function(){w.deprecated("Promise.defer","new Promise");var e=new C(m);return{promise:e,resolve:R,reject:D}};o.notEnumerableProp(C,"_makeSelfResolutionError",n);e("./method")(C,m,v,r,w);e("./bind")(C,m,v,w);e("./cancel")(C,y,r,w);e("./direct_resolve")(C);e("./synchronous_inspection")(C);e("./join")(C,y,v,m,w);C.Promise=C;C.version="3.4.0";e("./map.js")(C,y,r,v,m,w);e("./call_get.js")(C);e("./using.js")(C,r,v,x,m,w);e("./timers.js")(C,m,w);e("./generators.js")(C,r,m,v,a,w);e("./nodeify.js")(C);e("./promisify.js")(C,m);e("./props.js")(C,y,v,r);e("./race.js")(C,m,v,r);e("./reduce.js")(C,y,r,v,m,w);e("./settle.js")(C,y,w);e("./some.js")(C,y,r);e("./filter.js")(C,m);e("./each.js")(C,m);e("./any.js")(C);o.toFastProperties(C);o.toFastProperties(C.prototype);function I(e){var t=new C(m);t._fulfillmentHandler0=e;t._rejectionHandler0=e;t._promise0=e;t._receiver0=e}I({a:1});I({b:2});I({c:3});I(1);I(function(){});I(undefined);I(false);I(new C(m));w.setBounds(c.firstLineError,o.lastLineError);return C}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,i,r,a){var s=e("./util");var o=s.isArray;function l(e){switch(e){case-2:return[];case-3:return{}}}function u(e){var i=this._promise=new t(n);if(e instanceof t){i._propagateFrom(e,3)}i._setOnCancel(this);this._values=e;this._length=0;this._totalResolved=0;this._init(undefined,-2)}s.inherits(u,a);u.prototype.length=function(){return this._length};u.prototype.promise=function(){return this._promise};u.prototype._init=function c(e,n){var a=i(this._values,this._promise);if(a instanceof t){a=a._target();var o=a._bitField;this._values=a;if((o&50397184)===0){this._promise._setAsyncGuaranteed();return a._then(c,this._reject,undefined,this,n)}else if((o&33554432)!==0){a=a._value()}else if((o&16777216)!==0){return this._reject(a._reason())}else{return this._cancel()}}a=s.asArray(a);if(a===null){var u=r("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(u,false);return}if(a.length===0){if(n===-5){this._resolveEmptyArray()}else{this._resolve(l(n))}return}this._iterate(a)};u.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n;this._values=this.shouldCopyValues()?new Array(n):this._values;var r=this._promise;var a=false;var s=null;for(var o=0;o<n;++o){var l=i(e[o],r);if(l instanceof t){l=l._target();s=l._bitField}else{s=null}if(a){if(s!==null){l.suppressUnhandledRejections()}}else if(s!==null){if((s&50397184)===0){l._proxy(this,o);this._values[o]=l}else if((s&33554432)!==0){a=this._promiseFulfilled(l._value(),o)}else if((s&16777216)!==0){a=this._promiseRejected(l._reason(),o)}else{a=this._promiseCancelled(o)}}else{a=this._promiseFulfilled(l,o)}}if(!a)r._setAsyncGuaranteed()};u.prototype._isResolved=function(){return this._values===null};u.prototype._resolve=function(e){this._values=null;this._promise._fulfill(e)};u.prototype._cancel=function(){if(this._isResolved()||!this._promise.isCancellable())return;this._values=null;this._promise._cancel()};u.prototype._reject=function(e){this._values=null;this._promise._rejectCallback(e,false)};u.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){this._resolve(this._values);return true}return false};u.prototype._promiseCancelled=function(){this._cancel();return true};u.prototype._promiseRejected=function(e){this._totalResolved++;this._reject(e);return true};u.prototype._resultCancelled=function(){if(this._isResolved())return;var e=this._values;this._cancel();if(e instanceof t){e.cancel()}else{for(var n=0;n<e.length;++n){if(e[n]instanceof t){e[n].cancel()}}}};u.prototype.shouldCopyValues=function(){return true};u.prototype.getActualLength=function(e){return e};return u}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){var i={};var r=e("./util");var a=e("./nodeback");var s=r.withAppended;var o=r.maybeWrapAsError;var l=r.canEvaluate;var u=e("./errors").TypeError;var c="Async";var d={__isPromisified__:true};var f=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"];var h=new RegExp("^(?:"+f.join("|")+")$");var p=function(e){return r.isIdentifier(e)&&e.charAt(0)!=="_"&&e!=="constructor"};function m(e){return!h.test(e)}function _(e){try{return e.__isPromisified__===true}catch(t){return false}}function g(e,t,n){var i=r.getDataPropertyOrDefault(e,t+n,d);return i?_(i):false}function v(e,t,n){for(var i=0;i<e.length;i+=2){var r=e[i];if(n.test(r)){var a=r.replace(n,"");for(var s=0;s<e.length;s+=2){if(e[s]===a){throw new u("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}}}}function y(e,t,n,i){var a=r.inheritedDataKeys(e);var s=[];for(var o=0;o<a.length;++o){var l=a[o];var u=e[l];var c=i===p?true:p(l,u,e);if(typeof u==="function"&&!_(u)&&!g(e,l,t)&&i(l,u,e,c)){s.push(l,u)}}v(s,t,n);return s}var b=function(e){return e.replace(/([$])/,"\\$")};var x;if(false){var w=function(e){var t=[e];var n=Math.max(0,e-1-3);for(var i=e-1;i>=n;--i){t.push(i)}for(var i=e+1;i<=3;++i){t.push(i)}return t};var L=function(e){return r.filledRange(e,"_arg","")};var S=function(e){return r.filledRange(Math.max(e,3),"_arg","")};var E=function(e){if(typeof e.length==="number"){return Math.max(Math.min(e.length,1023+1),0)}return 0};x=function(e,l,u,c,d,f){var h=Math.max(0,E(c)-1);var p=w(h);var m=typeof e==="string"||l===i;function _(e){var t=L(e).join(", ");var n=e>0?", ":"";var i;if(m){i="ret = callback.call(this, {{args}}, nodeback); break;\n"}else{i=l===undefined?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n"}return i.replace("{{args}}",t).replace(", ",n)}function g(){var e="";for(var t=0;t<p.length;++t){e+="case "+p[t]+":"+_(p[t])}e+="                                                             \n	        default:                                                             \n	            var args = new Array(len + 1);                                   \n	            var i = 0;                                                       \n	            for (var i = 0; i < len; ++i) {                                  \n	               args[i] = arguments[i];                                       \n	            }                                                                \n	            args[i] = nodeback;                                              \n	            [CodeForCall]                                                    \n	            break;                                                           \n	        ".replace("[CodeForCall]",m?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n");

return e}var v=typeof e==="string"?"this != null ? this['"+e+"'] : fn":"fn";var y="'use strict';                                                \n	        var ret = function (Parameters) {                                    \n	            'use strict';                                                    \n	            var len = arguments.length;                                      \n	            var promise = new Promise(INTERNAL);                             \n	            promise._captureStackTrace();                                    \n	            var nodeback = nodebackForPromise(promise, "+f+");   \n	            var ret;                                                         \n	            var callback = tryCatch([GetFunctionCode]);                      \n	            switch(len) {                                                    \n	                [CodeForSwitchCase]                                          \n	            }                                                                \n	            if (ret === errorObj) {                                          \n	                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n	            }                                                                \n	            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \n	            return promise;                                                  \n	        };                                                                   \n	        notEnumerableProp(ret, '__isPromisified__', true);                   \n	        return ret;                                                          \n	    ".replace("[CodeForSwitchCase]",g()).replace("[GetFunctionCode]",v);y=y.replace("Parameters",S(h));return new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",y)(t,c,l,s,o,a,r.tryCatch,r.errorObj,r.notEnumerableProp,n)}}function k(e,l,u,c,d,f){var h=function(){return this}();var p=e;if(typeof p==="string"){e=c}function m(){var r=l;if(l===i)r=this;var u=new t(n);u._captureStackTrace();var c=typeof p==="string"&&this!==h?this[p]:e;var d=a(u,f);try{c.apply(r,s(arguments,d))}catch(m){u._rejectCallback(o(m),true,true)}if(!u._isFateSealed())u._setAsyncGuaranteed();return u}r.notEnumerableProp(m,"__isPromisified__",true);return m}var T=l?x:k;function M(e,t,n,a,s){var o=new RegExp(b(t)+"$");var l=y(e,t,o,n);for(var u=0,c=l.length;u<c;u+=2){var d=l[u];var f=l[u+1];var h=d+t;if(a===T){e[h]=T(d,i,d,f,t,s)}else{var p=a(f,function(){return T(d,i,d,f,t,s)});r.notEnumerableProp(p,"__isPromisified__",true);e[h]=p}}r.toFastProperties(e);return e}function A(e,t,n){return T(e,t,undefined,e,null,n)}t.promisify=function(e,t){if(typeof e!=="function"){throw new u("expecting a function but got "+r.classString(e))}if(_(e)){return e}t=Object(t);var n=t.context===undefined?i:t.context;var a=!!t.multiArgs;var s=A(e,n,a);r.copyDescriptors(e,s,m);return s};t.promisifyAll=function(e,t){if(typeof e!=="function"&&typeof e!=="object"){throw new u("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n")}t=Object(t);var n=!!t.multiArgs;var i=t.suffix;if(typeof i!=="string")i=c;var a=t.filter;if(typeof a!=="function")a=p;var s=t.promisifier;if(typeof s!=="function")s=T;if(!r.isIdentifier(i)){throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n")}var o=r.inheritedDataKeys(e);for(var l=0;l<o.length;++l){var d=e[o[l]];if(o[l]!=="constructor"&&r.isClass(d)){M(d.prototype,i,a,s,n);M(d,i,a,s,n)}}return M(e,i,a,s,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,i,r){var a=e("./util");var s=a.isObject;var o=e("./es5");var l;if(typeof Map==="function")l=Map;var u=function(){var e=0;var t=0;function n(n,i){this[e]=n;this[e+t]=i;e++}return function i(r){t=r.size;e=0;var a=new Array(r.size*2);r.forEach(n,a);return a}}();var c=function(e){var t=new l;var n=e.length/2|0;for(var i=0;i<n;++i){var r=e[n+i];var a=e[i];t.set(r,a)}return t};function d(e){var t=false;var n;if(l!==undefined&&e instanceof l){n=u(e);t=true}else{var i=o.keys(e);var r=i.length;n=new Array(r*2);for(var a=0;a<r;++a){var s=i[a];n[a]=e[s];n[a+r]=s}}this.constructor$(n);this._isMap=t;this._init$(undefined,-3)}a.inherits(d,n);d.prototype._init=function(){};d.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){var i;if(this._isMap){i=c(this._values)}else{i={};var r=this.length();for(var a=0,s=this.length();a<s;++a){i[this._values[a+r]]=this._values[a]}}this._resolve(i);return true}return false};d.prototype.shouldCopyValues=function(){return false};d.prototype.getActualLength=function(e){return e>>1};function f(e){var n;var a=i(e);if(!s(a)){return r("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}else if(a instanceof t){n=a._then(t.props,undefined,undefined,undefined,undefined)}else{n=new d(a).promise()}if(a instanceof t){n._propagateFrom(a,2)}return n}t.prototype.props=function(){return f(this)};t.props=function(e){return f(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function i(e,t,n,i,r){for(var a=0;a<r;++a){n[a+i]=e[a+t];e[a+t]=void 0}}function r(e){this._capacity=e;this._length=0;this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e};r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e;this._length=t+1};r.prototype._unshiftOne=function(e){var t=this._capacity;this._checkCapacity(this.length()+1);var n=this._front;var i=(n-1&t-1^t)-t;this[i]=e;this._front=i;this._length=this.length()+1};r.prototype.unshift=function(e,t,n){this._unshiftOne(n);this._unshiftOne(t);this._unshiftOne(e)};r.prototype.push=function(e,t,n){var i=this.length()+3;if(this._willBeOverCapacity(i)){this._pushOne(e);this._pushOne(t);this._pushOne(n);return}var r=this._front+i-3;this._checkCapacity(i);var a=this._capacity-1;this[r+0&a]=e;this[r+1&a]=t;this[r+2&a]=n;this._length=i};r.prototype.shift=function(){var e=this._front,t=this[e];this[e]=undefined;this._front=e+1&this._capacity-1;this._length--;return t};r.prototype.length=function(){return this._length};r.prototype._checkCapacity=function(e){if(this._capacity<e){this._resizeTo(this._capacity<<1)}};r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var n=this._front;var r=this._length;var a=n+r&t-1;i(this,0,this,t,a)};t.exports=r},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,i,r){var a=e("./util");var s=function(e){return e.then(function(t){return o(t,e)})};function o(e,o){var l=i(e);if(l instanceof t){return s(l)}else{e=a.asArray(e);if(e===null)return r("expecting an array or an iterable object but got "+a.classString(e))}var u=new t(n);if(o!==undefined){u._propagateFrom(o,3)}var c=u._fulfill;var d=u._reject;for(var f=0,h=e.length;f<h;++f){var p=e[f];if(p===undefined&&!(f in e)){continue}t.cast(p)._then(c,d,undefined,u,null)}return u}t.race=function(e){return o(e,undefined)};t.prototype.race=function(){return o(this,undefined)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,i,r,a,s){var o=t._getDomain;var l=e("./util");var u=l.tryCatch;function c(e,n,i,r){this.constructor$(e);var s=o();this._fn=s===null?n:s.bind(n);if(i!==undefined){i=t.resolve(i);i._attachCancellationCallback(this)}this._initialValue=i;this._currentCancellable=null;this._eachValues=r===a?[]:undefined;this._promise._captureStackTrace();this._init$(undefined,-5)}l.inherits(c,n);c.prototype._gotAccum=function(e){if(this._eachValues!==undefined&&e!==a){this._eachValues.push(e)}};c.prototype._eachComplete=function(e){this._eachValues.push(e);return this._eachValues};c.prototype._init=function(){};c.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==undefined?this._eachValues:this._initialValue)};c.prototype.shouldCopyValues=function(){return false};c.prototype._resolve=function(e){this._promise._resolveCallback(e);this._values=null};c.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();if(this._isResolved())return;this._resultCancelled$();if(this._currentCancellable instanceof t){this._currentCancellable.cancel()}if(this._initialValue instanceof t){this._initialValue.cancel()}};c.prototype._iterate=function(e){this._values=e;var n;var i;var r=e.length;if(this._initialValue!==undefined){n=this._initialValue;i=0}else{n=t.resolve(e[0]);i=1}this._currentCancellable=n;if(!n.isRejected()){for(;i<r;++i){var a={accum:null,value:e[i],index:i,length:r,array:this};n=n._then(h,undefined,undefined,a,undefined)}}if(this._eachValues!==undefined){n=n._then(this._eachComplete,undefined,undefined,this,undefined)}n._then(d,d,undefined,n,this)};t.prototype.reduce=function(e,t){return f(this,e,t,null)};t.reduce=function(e,t,n,i){return f(e,t,n,i)};function d(e,t){if(this.isFulfilled()){t._resolve(e)}else{t._reject(e)}}function f(e,t,n,r){if(typeof t!=="function"){return i("expecting a function but got "+l.classString(t))}var a=new c(e,t,n,r);return a.promise()}function h(e){this.accum=e;this.array._gotAccum(e);var n=r(this.value,this.array._promise);if(n instanceof t){this.array._currentCancellable=n;return n._then(p,undefined,undefined,this,undefined)}else{return p.call(this,n)}}function p(e){var n=this.array;var i=n._promise;var r=u(n._fn);i._pushContext();var a;if(n._eachValues!==undefined){a=r.call(i._boundValue(),e,this.index,this.length)}else{a=r.call(i._boundValue(),this.accum,e,this.index,this.length)}if(a instanceof t){n._currentCancellable=a}var o=i._popContext();s.checkForgottenReturns(a,o,n._eachValues!==undefined?"Promise.each":"Promise.reduce",i);return a}}},{"./util":36}],29:[function(e,t,n){"use strict";var i=e("./util");var r;var a=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};var s=i.getNativePromise();if(i.isNode&&typeof MutationObserver==="undefined"){var o=global.setImmediate;var l=process.nextTick;r=i.isRecentNode?function(e){o.call(global,e)}:function(e){l.call(process,e)}}else if(typeof s==="function"){var u=s.resolve();r=function(e){u.then(e)}}else if(typeof MutationObserver!=="undefined"&&!(typeof window!=="undefined"&&window.navigator&&window.navigator.standalone)){r=function(){var e=document.createElement("div");var t={attributes:true};var n=false;var i=document.createElement("div");var r=new MutationObserver(function(){e.classList.toggle("foo");n=false});r.observe(i,t);var a=function(){if(n)return;n=true;i.classList.toggle("foo")};return function s(n){var i=new MutationObserver(function(){i.disconnect();n()});i.observe(e,t);a()}}()}else if(typeof setImmediate!=="undefined"){r=function(e){setImmediate(e)}}else if(typeof setTimeout!=="undefined"){r=function(e){setTimeout(e,0)}}else{r=a}t.exports=r},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,i){var r=t.PromiseInspection;var a=e("./util");function s(e){this.constructor$(e)}a.inherits(s,n);s.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){this._resolve(this._values);return true}return false};s.prototype._promiseFulfilled=function(e,t){var n=new r;n._bitField=33554432;n._settledValueField=e;return this._promiseResolved(t,n)};s.prototype._promiseRejected=function(e,t){var n=new r;n._bitField=16777216;n._settledValueField=e;return this._promiseResolved(t,n)};t.settle=function(e){i.deprecated(".settle()",".reflect()");return new s(e).promise()};t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,i){var r=e("./util");var a=e("./errors").RangeError;var s=e("./errors").AggregateError;var o=r.isArray;var l={};function u(e){this.constructor$(e);this._howMany=0;this._unwrap=false;this._initialized=false}r.inherits(u,n);u.prototype._init=function(){if(!this._initialized){return}if(this._howMany===0){this._resolve([]);return}this._init$(undefined,-5);var e=o(this._values);if(!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()){this._reject(this._getRangeError(this.length()))}};u.prototype.init=function(){this._initialized=true;this._init()};u.prototype.setUnwrap=function(){this._unwrap=true};u.prototype.howMany=function(){return this._howMany};u.prototype.setHowMany=function(e){this._howMany=e};u.prototype._promiseFulfilled=function(e){this._addFulfilled(e);if(this._fulfilled()===this.howMany()){this._values.length=this.howMany();if(this.howMany()===1&&this._unwrap){this._resolve(this._values[0])}else{this._resolve(this._values)}return true}return false};u.prototype._promiseRejected=function(e){this._addRejected(e);return this._checkOutcome()};u.prototype._promiseCancelled=function(){if(this._values instanceof t||this._values==null){return this._cancel()}this._addRejected(l);return this._checkOutcome()};u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){var e=new s;for(var t=this.length();t<this._values.length;++t){if(this._values[t]!==l){e.push(this._values[t])}}if(e.length>0){this._reject(e)}else{this._cancel()}return true}return false};u.prototype._fulfilled=function(){return this._totalResolved};u.prototype._rejected=function(){return this._values.length-this.length()};u.prototype._addRejected=function(e){this._values.push(e)};u.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e};u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()};u.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new a(t)};u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function c(e,t){if((t|0)!==t||t<0){return i("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n")}var n=new u(e);var r=n.promise();n.setHowMany(t);n.init();return r}t.some=function(e,t){return c(e,t)};t.prototype.some=function(e){return c(this,e)};t._SomePromiseArray=u}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){if(e!==undefined){e=e._target();this._bitField=e._bitField;this._settledValueField=e._isFateSealed()?e._settledValue():undefined}else{this._bitField=0;this._settledValueField=undefined}}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()};var i=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()};var r=t.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0};var a=t.prototype.isRejected=function(){return(this._bitField&16777216)!==0};var s=t.prototype.isPending=function(){return(this._bitField&50397184)===0};var o=t.prototype.isResolved=function(){return(this._bitField&50331648)!==0};t.prototype.isCancelled=e.prototype._isCancelled=function(){return(this._bitField&65536)===65536};e.prototype.isCancelled=function(){return this._target()._isCancelled()};e.prototype.isPending=function(){return s.call(this._target())};e.prototype.isRejected=function(){return a.call(this._target())};e.prototype.isFulfilled=function(){return r.call(this._target())};e.prototype.isResolved=function(){return o.call(this._target())};e.prototype.value=function(){return n.call(this._target())};e.prototype.reason=function(){var e=this._target();e._unsetRejectionIsUnhandled();return i.call(e)};e.prototype._value=function(){return this._settledValue()};e.prototype._reason=function(){this._unsetRejectionIsUnhandled();return this._settledValue()};e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){var i=e("./util");var r=i.errorObj;var a=i.isObject;function s(e,i){if(a(e)){if(e instanceof t)return e;var s=l(e);if(s===r){if(i)i._pushContext();var o=t.reject(s.e);if(i)i._popContext();return o}else if(typeof s==="function"){if(c(e)){var o=new t(n);e._then(o._fulfill,o._reject,undefined,o,null);return o}return d(e,s,i)}}return e}function o(e){return e.then}function l(e){try{return o(e)}catch(t){r.e=t;return r}}var u={}.hasOwnProperty;function c(e){try{return u.call(e,"_promise0")}catch(t){return false}}function d(e,a,s){var o=new t(n);var l=o;if(s)s._pushContext();o._captureStackTrace();if(s)s._popContext();var u=true;var c=i.tryCatch(a).call(e,d,f);u=false;if(o&&c===r){o._rejectCallback(c.e,true,true);o=null}function d(e){if(!o)return;o._resolveCallback(e);o=null}function f(e){if(!o)return;o._rejectCallback(e,u,true);o=null}return l}return s}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n,i){var r=e("./util");var a=t.TimeoutError;function s(e){this.handle=e}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var o=function(e){return l(+this).thenReturn(e)};var l=t.delay=function(e,r){var a;var l;if(r!==undefined){a=t.resolve(r)._then(o,null,null,e,undefined);if(i.cancellation()&&r instanceof t){a._setOnCancel(r)}}else{a=new t(n);l=setTimeout(function(){a._fulfill()},+e);if(i.cancellation()){a._setOnCancel(new s(l))}}a._setAsyncGuaranteed();return a};t.prototype.delay=function(e){return l(e,this)};var u=function(e,t,n){var i;if(typeof t!=="string"){if(t instanceof Error){i=t}else{i=new a("operation timed out")}}else{i=new a(t)}r.markAsOriginatingFromRejection(i);e._attachExtraTrace(i);e._reject(i);if(n!=null){n.cancel()}};function c(e){clearTimeout(this.handle);return e}function d(e){clearTimeout(this.handle);throw e}t.prototype.timeout=function(e,t){e=+e;var n,r;var a=new s(setTimeout(function o(){if(n.isPending()){u(n,t,r)}},e));if(i.cancellation()){r=this.then();n=r._then(c,d,undefined,a,undefined);n._setOnCancel(a)}else{n=this._then(c,d,undefined,a,undefined)}return n}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,i,r,a,s){var o=e("./util");var l=e("./errors").TypeError;var u=e("./util").inherits;var c=o.errorObj;var d=o.tryCatch;var f={};function h(e){setTimeout(function(){throw e},0)}function p(e){var t=i(e);if(t!==e&&typeof e._isDisposable==="function"&&typeof e._getDisposer==="function"&&e._isDisposable()){t._setDisposable(e._getDisposer())}return t}function m(e,n){var r=0;var s=e.length;var o=new t(a);function l(){if(r>=s)return o._fulfill();var a=p(e[r++]);if(a instanceof t&&a._isDisposable()){try{a=i(a._getDisposer().tryDispose(n),e.promise)}catch(u){return h(u)}if(a instanceof t){return a._then(l,h,null,null,null)}}l()}l();return o}function _(e,t,n){this._data=e;this._promise=t;this._context=n}_.prototype.data=function(){return this._data};_.prototype.promise=function(){return this._promise};_.prototype.resource=function(){if(this.promise().isFulfilled()){return this.promise().value()}return f};_.prototype.tryDispose=function(e){var t=this.resource();var n=this._context;if(n!==undefined)n._pushContext();var i=t!==f?this.doDispose(t,e):null;if(n!==undefined)n._popContext();this._promise._unsetDisposable();this._data=null;return i};_.isDisposer=function(e){return e!=null&&typeof e.resource==="function"&&typeof e.tryDispose==="function"};function g(e,t,n){this.constructor$(e,t,n)}u(g,_);g.prototype.doDispose=function(e,t){var n=this.data();return n.call(e,e,t)};function v(e){if(_.isDisposer(e)){this.resources[this.index]._setDisposable(e);return e.promise()}return e}function y(e){this.length=e;this.promise=null;this[e-1]=null}y.prototype._resultCancelled=function(){var e=this.length;for(var n=0;n<e;++n){var i=this[n];if(i instanceof t){i.cancel()}}};t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var r=arguments[e-1];if(typeof r!=="function"){return n("expecting a function but got "+o.classString(r))}var a;var l=true;if(e===2&&Array.isArray(arguments[0])){a=arguments[0];e=a.length;l=false}else{a=arguments;e--}var u=new y(e);for(var f=0;f<e;++f){var h=a[f];if(_.isDisposer(h)){var p=h;h=h.promise();h._setDisposable(p)}else{var g=i(h);if(g instanceof t){h=g._then(v,null,null,{resources:u,index:f},undefined)}}u[f]=h}var b=new Array(u.length);for(var f=0;f<b.length;++f){b[f]=t.resolve(u[f]).reflect()}var x=t.all(b).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected()){c.e=n.error();return c}else if(!n.isFulfilled()){x.cancel();return}e[t]=n.value()}w._pushContext();r=d(r);var i=l?r.apply(undefined,e):r(e);var a=w._popContext();s.checkForgottenReturns(i,a,"Promise.using",w);return i});var w=x.lastly(function(){var e=new t.PromiseInspection(x);return m(u,e)});u.promise=w;w._setOnCancel(u);return w};t.prototype._setDisposable=function(e){this._bitField=this._bitField|131072;this._disposer=e};t.prototype._isDisposable=function(){return(this._bitField&131072)>0};t.prototype._getDisposer=function(){return this._disposer};t.prototype._unsetDisposable=function(){this._bitField=this._bitField&~131072;this._disposer=undefined};t.prototype.disposer=function(e){if(typeof e==="function"){return new g(e,this,r())}throw new l}}},{"./errors":12,"./util":36}],36:[function(_dereq_,module,exports){"use strict";var es5=_dereq_("./es5");var canEvaluate=typeof navigator=="undefined";var errorObj={e:{}};var tryCatchTarget;var globalObject=typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:this!==undefined?this:null;function tryCatcher(){try{var e=tryCatchTarget;tryCatchTarget=null;return e.apply(this,arguments)}catch(t){errorObj.e=t;return errorObj}}function tryCatch(e){tryCatchTarget=e;return tryCatcher}var inherits=function(e,t){var n={}.hasOwnProperty;function i(){this.constructor=e;this.constructor$=t;for(var i in t.prototype){if(n.call(t.prototype,i)&&i.charAt(i.length-1)!=="$"){this[i+"$"]=t.prototype[i]}}}i.prototype=t.prototype;e.prototype=new i;return e.prototype};function isPrimitive(e){return e==null||e===true||e===false||typeof e==="string"||typeof e==="number"}function isObject(e){return typeof e==="function"||typeof e==="object"&&e!==null}function maybeWrapAsError(e){if(!isPrimitive(e))return e;return new Error(safeToString(e))}function withAppended(e,t){var n=e.length;var i=new Array(n+1);var r;for(r=0;r<n;++r){i[r]=e[r]}i[r]=t;return i}function getDataPropertyOrDefault(e,t,n){if(es5.isES5){var i=Object.getOwnPropertyDescriptor(e,t);if(i!=null){return i.get==null&&i.set==null?i.value:n}}else{return{}.hasOwnProperty.call(e,t)?e[t]:undefined}}function notEnumerableProp(e,t,n){if(isPrimitive(e))return e;var i={value:n,configurable:true,enumerable:false,writable:true};es5.defineProperty(e,t,i);return e}function thrower(e){throw e}var inheritedDataKeys=function(){var e=[Array.prototype,Object.prototype,Function.prototype];var t=function(t){for(var n=0;n<e.length;++n){if(e[n]===t){return true}}return false};if(es5.isES5){var n=Object.getOwnPropertyNames;return function(e){var i=[];var r=Object.create(null);while(e!=null&&!t(e)){var a;try{a=n(e)}catch(s){return i}for(var o=0;o<a.length;++o){var l=a[o];if(r[l])continue;r[l]=true;var u=Object.getOwnPropertyDescriptor(e,l);if(u!=null&&u.get==null&&u.set==null){i.push(l)}}e=es5.getPrototypeOf(e)}return i}}else{var i={}.hasOwnProperty;return function(n){if(t(n))return[];var r=[];e:for(var a in n){if(i.call(n,a)){r.push(a)}else{for(var s=0;s<e.length;++s){if(i.call(e[s],a)){continue e}}r.push(a)}}return r}}}();var thisAssignmentPattern=/this\s*\.\s*\S+\s*=/;function isClass(e){try{if(typeof e==="function"){var t=es5.names(e.prototype);var n=es5.isES5&&t.length>1;var i=t.length>0&&!(t.length===1&&t[0]==="constructor");var r=thisAssignmentPattern.test(e+"")&&es5.names(e).length>0;if(n||i||r){return true}}return false}catch(a){return false}}function toFastProperties(obj){function FakeConstructor(){}FakeConstructor.prototype=obj;var l=8;while(l--)new FakeConstructor;return obj;eval(obj)}var rident=/^[a-z$_][a-z$_0-9]*$/i;function isIdentifier(e){return rident.test(e)}function filledRange(e,t,n){var i=new Array(e);for(var r=0;r<e;++r){i[r]=t+r+n}return i}function safeToString(e){try{return e+""}catch(t){return"[no string representation]"}}function isError(e){return e!==null&&typeof e==="object"&&typeof e.message==="string"&&typeof e.name==="string"}function markAsOriginatingFromRejection(e){try{notEnumerableProp(e,"isOperational",true)}catch(t){}}function originatesFromRejection(e){if(e==null)return false;return e instanceof Error["__BluebirdErrorTypes__"].OperationalError||e["isOperational"]===true}function canAttachTrace(e){return isError(e)&&es5.propertyIsWritable(e,"stack")}var ensureErrorObject=function(){if(!("stack"in new Error)){return function(e){if(canAttachTrace(e))return e;try{throw new Error(safeToString(e))}catch(t){return t}}}else{return function(e){if(canAttachTrace(e))return e;return new Error(safeToString(e))}}}();function classString(e){return{}.toString.call(e)}function copyDescriptors(e,t,n){var i=es5.names(e);for(var r=0;r<i.length;++r){var a=i[r];if(n(a)){try{es5.defineProperty(t,a,es5.getDescriptor(e,a))}catch(s){}}}}var asArray=function(e){if(es5.isArray(e)){return e}return null};if(typeof Symbol!=="undefined"&&Symbol.iterator){var ArrayFrom=typeof Array.from==="function"?function(e){return Array.from(e)}:function(e){var t=[];var n=e[Symbol.iterator]();var i;while(!(i=n.next()).done){t.push(i.value)}return t};asArray=function(e){if(es5.isArray(e)){return e}else if(e!=null&&typeof e[Symbol.iterator]==="function"){return ArrayFrom(e)}return null}}var isNode=typeof process!=="undefined"&&classString(process).toLowerCase()==="[object process]";function env(e,t){return isNode?process.env[e]:t}function getNativePromise(){if(typeof Promise==="function"){try{var e=new Promise(function(){});if({}.toString.call(e)==="[object Promise]"){return Promise}}catch(t){}}}var ret={isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,asArray:asArray,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,isError:isError,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch:tryCatch,inherits:inherits,withAppended:withAppended,maybeWrapAsError:maybeWrapAsError,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,canAttachTrace:canAttachTrace,ensureErrorObject:ensureErrorObject,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,classString:classString,copyDescriptors:copyDescriptors,hasDevTools:typeof chrome!=="undefined"&&chrome&&typeof chrome.loadTimes==="function",isNode:isNode,env:env,global:globalObject,getNativePromise:getNativePromise};ret.isRecentNode=ret.isNode&&function(){var e=process.versions.node.split(".").map(Number);return e[0]===0&&e[1]>10||e[0]>0}();if(ret.isNode)ret.toFastProperties(process);try{throw new Error}catch(e){ret.lastLineError=e}module.exports=ret},{"./es5":13}]},{},[4])(4)});if(typeof window!=="undefined"&&window!==null){window.P=window.Promise}else if(typeof self!=="undefined"&&self!==null){self.P=self.Promise}}).call(exports,__webpack_require__(58),function(){return this}(),__webpack_require__(59).setImmediate)},function(e,t){var n=e.exports={};var i;var r;function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){i=setTimeout}else{i=a}}catch(e){i=a}try{if(typeof clearTimeout==="function"){r=clearTimeout}else{r=s}}catch(e){r=s}})();function o(e){if(i===setTimeout){return setTimeout(e,0)}if((i===a||!i)&&setTimeout){i=setTimeout;return setTimeout(e,0)}try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function l(e){if(r===clearTimeout){return clearTimeout(e)}if((r===s||!r)&&clearTimeout){r=clearTimeout;return clearTimeout(e)}try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}var u=[];var c=false;var d;var f=-1;function h(){if(!c||!d){return}c=false;if(d.length){u=d.concat(u)}else{f=-1}if(u.length){p()}}function p(){if(c){return}var e=o(h);c=true;var t=u.length;while(t){d=u;u=[];while(++f<t){if(d){d[f].run()}}f=-1;t=u.length}d=null;c=false;l(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}}u.push(new m(e,t));if(u.length===1&&!c){o(p)}};function m(e,t){this.fun=e;this.array=t}m.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function _(){}n.on=_;n.addListener=_;n.once=_;n.off=_;n.removeListener=_;n.removeAllListeners=_;n.emit=_;n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},function(e,t,n){(function(e,i){var r=n(58).nextTick;var a=Function.prototype.apply;var s=Array.prototype.slice;var o={};var l=0;t.setTimeout=function(){return new u(a.call(setTimeout,window,arguments),clearTimeout)};t.setInterval=function(){return new u(a.call(setInterval,window,arguments),clearInterval)};t.clearTimeout=t.clearInterval=function(e){e.close()};function u(e,t){this._id=e;this._clearFn=t}u.prototype.unref=u.prototype.ref=function(){};u.prototype.close=function(){this._clearFn.call(window,this._id)};t.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};t.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;if(t>=0){e._idleTimeoutId=setTimeout(function n(){if(e._onTimeout)e._onTimeout()},t)}};t.setImmediate=typeof e==="function"?e:function(e){var n=l++;var i=arguments.length<2?false:s.call(arguments,1);o[n]=true;r(function a(){if(o[n]){if(i){e.apply(null,i)}else{e.call(null)}t.clearImmediate(n)}});return n};t.clearImmediate=typeof i==="function"?i:function(e){delete o[e]}}).call(t,n(59).setImmediate,n(59).clearImmediate)},function(e,t,n){(function(e){(function(t,n){true?e.exports=n():typeof define==="function"&&define.amd?define(n):t.moment=n()})(this,function(){"use strict";var t;function i(){return t.apply(null,arguments)}function r(e){t=e}function a(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function s(e){return Object.prototype.toString.call(e)==="[object Object]"}function o(e){var t;for(t in e){return false}return true}function l(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function u(e,t){var n=[],i;for(i=0;i<e.length;++i){n.push(t(e[i],i))}return n}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){for(var n in t){if(c(t,n)){e[n]=t[n]}}if(c(t,"toString")){e.toString=t.toString}if(c(t,"valueOf")){e.valueOf=t.valueOf}return e}function f(e,t,n,i){return Fn(e,t,n,i,true).utc()}function h(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null}}function p(e){if(e._pf==null){e._pf=h()}return e._pf}var m;if(Array.prototype.some){m=Array.prototype.some}else{m=function(e){var t=Object(this);var n=t.length>>>0;for(var i=0;i<n;i++){if(i in t&&e.call(this,t[i],i,t)){return true}}return false}}function _(e){if(e._isValid==null){var t=p(e);var n=m.call(t.parsedDateParts,function(e){return e!=null});e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict){e._isValid=e._isValid&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined;

}}return e._isValid}function g(e){var t=f(NaN);if(e!=null){d(p(t),e)}else{p(t).userInvalidated=true}return t}function v(e){return e===void 0}var y=i.momentProperties=[];function b(e,t){var n,i,r;if(!v(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!v(t._i)){e._i=t._i}if(!v(t._f)){e._f=t._f}if(!v(t._l)){e._l=t._l}if(!v(t._strict)){e._strict=t._strict}if(!v(t._tzm)){e._tzm=t._tzm}if(!v(t._isUTC)){e._isUTC=t._isUTC}if(!v(t._offset)){e._offset=t._offset}if(!v(t._pf)){e._pf=p(t)}if(!v(t._locale)){e._locale=t._locale}if(y.length>0){for(n in y){i=y[n];r=t[i];if(!v(r)){e[i]=r}}}return e}var x=false;function w(e){b(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(x===false){x=true;i.updateOffset(this);x=false}}function L(e){return e instanceof w||e!=null&&e._isAMomentObject!=null}function S(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}function E(e){var t=+e,n=0;if(t!==0&&isFinite(t)){n=S(t)}return n}function k(e,t,n){var i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0,s;for(s=0;s<i;s++){if(n&&e[s]!==t[s]||!n&&E(e[s])!==E(t[s])){a++}}return a+r}function T(e){if(i.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function M(e,t){var n=true;return d(function(){if(i.deprecationHandler!=null){i.deprecationHandler(null,e)}if(n){T(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack);n=false}return t.apply(this,arguments)},t)}var A={};function C(e,t){if(i.deprecationHandler!=null){i.deprecationHandler(e,t)}if(!A[e]){T(t);A[e]=true}}i.suppressDeprecationWarnings=false;i.deprecationHandler=null;function R(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function D(e){var t,n;for(n in e){t=e[n];if(R(t)){this[n]=t}else{this["_"+n]=t}}this._config=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function I(e,t){var n=d({},e),i;for(i in t){if(c(t,i)){if(s(e[i])&&s(t[i])){n[i]={};d(n[i],e[i]);d(n[i],t[i])}else if(t[i]!=null){n[i]=t[i]}else{delete n[i]}}}for(i in e){if(c(e,i)&&!c(t,i)&&s(e[i])){n[i]=d({},n[i])}}return n}function O(e){if(e!=null){this.set(e)}}var N;if(Object.keys){N=Object.keys}else{N=function(e){var t,n=[];for(t in e){if(c(e,t)){n.push(t)}}return n}}var F={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function B(e,t,n){var i=this._calendar[e]||this._calendar["sameElse"];return R(i)?i.call(t,n):i}var P={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function U(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];if(t||!n){return t}this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});return this._longDateFormat[e]}var Y="Invalid date";function H(){return this._invalidDate}var G="%d";var j=/\d{1,2}/;function V(e){return this._ordinal.replace("%d",e)}var z={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function $(e,t,n,i){var r=this._relativeTime[n];return R(r)?r(e,t,n,i):r.replace(/%d/i,e)}function q(e,t){var n=this._relativeTime[e>0?"future":"past"];return R(n)?n(t):n.replace(/%s/i,t)}var W={};function K(e,t){var n=e.toLowerCase();W[n]=W[n+"s"]=W[t]=e}function J(e){return typeof e==="string"?W[e]||W[e.toLowerCase()]:undefined}function X(e){var t={},n,i;for(i in e){if(c(e,i)){n=J(i);if(n){t[n]=e[i]}}}return t}var Z={};function Q(e,t){Z[e]=t}function ee(e){var t=[];for(var n in e){t.push({unit:n,priority:Z[n]})}t.sort(function(e,t){return e.priority-t.priority});return t}function te(e,t){return function(n){if(n!=null){ie(this,e,n);i.updateOffset(this,t);return this}else{return ne(this,e)}}}function ne(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function ie(e,t,n){if(e.isValid()){e._d["set"+(e._isUTC?"UTC":"")+t](n)}}function re(e){e=J(e);if(R(this[e])){return this[e]()}return this}function ae(e,t){if(typeof e==="object"){e=X(e);var n=ee(e);for(var i=0;i<n.length;i++){this[n[i].unit](e[n[i].unit])}}else{e=J(e);if(R(this[e])){return this[e](t)}}return this}function se(e,t,n){var i=""+Math.abs(e),r=t-i.length,a=e>=0;return(a?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var oe=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var le=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var ue={};var ce={};function de(e,t,n,i){var r=i;if(typeof i==="string"){r=function(){return this[i]()}}if(e){ce[e]=r}if(t){ce[t[0]]=function(){return se(r.apply(this,arguments),t[1],t[2])}}if(n){ce[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)}}}function fe(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function he(e){var t=e.match(oe),n,i;for(n=0,i=t.length;n<i;n++){if(ce[t[n]]){t[n]=ce[t[n]]}else{t[n]=fe(t[n])}}return function(n){var r="",a;for(a=0;a<i;a++){r+=t[a]instanceof Function?t[a].call(n,e):t[a]}return r}}function pe(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=me(t,e.localeData());ue[t]=ue[t]||he(t);return ue[t](e)}function me(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}le.lastIndex=0;while(n>=0&&le.test(e)){e=e.replace(le,i);le.lastIndex=0;n-=1}return e}var _e=/\d/;var ge=/\d\d/;var ve=/\d{3}/;var ye=/\d{4}/;var be=/[+-]?\d{6}/;var xe=/\d\d?/;var we=/\d\d\d\d?/;var Le=/\d\d\d\d\d\d?/;var Se=/\d{1,3}/;var Ee=/\d{1,4}/;var ke=/[+-]?\d{1,6}/;var Te=/\d+/;var Me=/[+-]?\d+/;var Ae=/Z|[+-]\d\d:?\d\d/gi;var Ce=/Z|[+-]\d\d(?::?\d\d)?/gi;var Re=/[+-]?\d+(\.\d{1,3})?/;var De=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var Ie={};function Oe(e,t,n){Ie[e]=R(t)?t:function(e,i){return e&&n?n:t}}function Ne(e,t){if(!c(Ie,e)){return new RegExp(Fe(e))}return Ie[e](t._strict,t._locale)}function Fe(e){return Be(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r}))}function Be(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Pe={};function Ue(e,t){var n,i=t;if(typeof e==="string"){e=[e]}if(typeof t==="number"){i=function(e,n){n[t]=E(e)}}for(n=0;n<e.length;n++){Pe[e[n]]=i}}function Ye(e,t){Ue(e,function(e,n,i,r){i._w=i._w||{};t(e,i._w,i,r)})}function He(e,t,n){if(t!=null&&c(Pe,e)){Pe[e](t,n._a,n,e)}}var Ge=0;var je=1;var Ve=2;var ze=3;var $e=4;var qe=5;var We=6;var Ke=7;var Je=8;var Xe;if(Array.prototype.indexOf){Xe=Array.prototype.indexOf}else{Xe=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}function Ze(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}de("M",["MM",2],"Mo",function(){return this.month()+1});de("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});de("MMMM",0,0,function(e){return this.localeData().months(this,e)});K("month","M");Q("month",8);Oe("M",xe);Oe("MM",xe,ge);Oe("MMM",function(e,t){return t.monthsShortRegex(e)});Oe("MMMM",function(e,t){return t.monthsRegex(e)});Ue(["M","MM"],function(e,t){t[je]=E(e)-1});Ue(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);if(r!=null){t[je]=r}else{p(n).invalidMonth=e}});var Qe=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/;var et="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function tt(e,t){return a(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Qe).test(t)?"format":"standalone"][e.month()]}var nt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function it(e,t){return a(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Qe.test(t)?"format":"standalone"][e.month()]}function rt(e,t,n){var i,r,a,s=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(i=0;i<12;++i){a=f([2e3,i]);this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase();this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase()}}if(n){if(t==="MMM"){r=Xe.call(this._shortMonthsParse,s);return r!==-1?r:null}else{r=Xe.call(this._longMonthsParse,s);return r!==-1?r:null}}else{if(t==="MMM"){r=Xe.call(this._shortMonthsParse,s);if(r!==-1){return r}r=Xe.call(this._longMonthsParse,s);return r!==-1?r:null}else{r=Xe.call(this._longMonthsParse,s);if(r!==-1){return r}r=Xe.call(this._shortMonthsParse,s);return r!==-1?r:null}}}function at(e,t,n){var i,r,a;if(this._monthsParseExact){return rt.call(this,e,t,n)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(i=0;i<12;i++){r=f([2e3,i]);if(n&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")}if(!n&&!this._monthsParse[i]){a="^"+this.months(r,"")+"|^"+this.monthsShort(r,"");this._monthsParse[i]=new RegExp(a.replace(".",""),"i")}if(n&&t==="MMMM"&&this._longMonthsParse[i].test(e)){return i}else if(n&&t==="MMM"&&this._shortMonthsParse[i].test(e)){return i}else if(!n&&this._monthsParse[i].test(e)){return i}}}function st(e,t){var n;if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=E(t)}else{t=e.localeData().monthsParse(t);if(typeof t!=="number"){return e}}}n=Math.min(e.date(),Ze(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n);return e}function ot(e){if(e!=null){st(this,e);i.updateOffset(this,true);return this}else{return ne(this,"Month")}}function lt(){return Ze(this.year(),this.month())}var ut=De;function ct(e){if(this._monthsParseExact){if(!c(this,"_monthsRegex")){ht.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!c(this,"_monthsShortRegex")){this._monthsShortRegex=ut}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}var dt=De;function ft(e){if(this._monthsParseExact){if(!c(this,"_monthsRegex")){ht.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!c(this,"_monthsRegex")){this._monthsRegex=dt}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function ht(){function e(e,t){return t.length-e.length}var t=[],n=[],i=[],r,a;for(r=0;r<12;r++){a=f([2e3,r]);t.push(this.monthsShort(a,""));n.push(this.months(a,""));i.push(this.months(a,""));i.push(this.monthsShort(a,""))}t.sort(e);n.sort(e);i.sort(e);for(r=0;r<12;r++){t[r]=Be(t[r]);n[r]=Be(n[r])}for(r=0;r<24;r++){i[r]=Be(i[r])}this._monthsRegex=new RegExp("^("+i.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}de("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e});de(0,["YY",2],0,function(){return this.year()%100});de(0,["YYYY",4],0,"year");de(0,["YYYYY",5],0,"year");de(0,["YYYYYY",6,true],0,"year");K("year","y");Q("year",1);Oe("Y",Me);Oe("YY",xe,ge);Oe("YYYY",Ee,ye);Oe("YYYYY",ke,be);Oe("YYYYYY",ke,be);Ue(["YYYYY","YYYYYY"],Ge);Ue("YYYY",function(e,t){t[Ge]=e.length===2?i.parseTwoDigitYear(e):E(e)});Ue("YY",function(e,t){t[Ge]=i.parseTwoDigitYear(e)});Ue("Y",function(e,t){t[Ge]=parseInt(e,10)});function pt(e){return mt(e)?366:365}function mt(e){return e%4===0&&e%100!==0||e%400===0}i.parseTwoDigitYear=function(e){return E(e)+(E(e)>68?1900:2e3)};var _t=te("FullYear",true);function gt(){return mt(this.year())}function vt(e,t,n,i,r,a,s){var o=new Date(e,t,n,i,r,a,s);if(e<100&&e>=0&&isFinite(o.getFullYear())){o.setFullYear(e)}return o}function yt(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<100&&e>=0&&isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}return t}function bt(e,t,n){var i=7+t-n,r=(7+yt(e,0,i).getUTCDay()-t)%7;return-r+i-1}function xt(e,t,n,i,r){var a=(7+n-i)%7,s=bt(e,i,r),o=1+7*(t-1)+a+s,l,u;if(o<=0){l=e-1;u=pt(l)+o}else if(o>pt(e)){l=e+1;u=o-pt(e)}else{l=e;u=o}return{year:l,dayOfYear:u}}function wt(e,t,n){var i=bt(e.year(),t,n),r=Math.floor((e.dayOfYear()-i-1)/7)+1,a,s;if(r<1){s=e.year()-1;a=r+Lt(s,t,n)}else if(r>Lt(e.year(),t,n)){a=r-Lt(e.year(),t,n);s=e.year()+1}else{s=e.year();a=r}return{week:a,year:s}}function Lt(e,t,n){var i=bt(e,t,n),r=bt(e+1,t,n);return(pt(e)-i+r)/7}de("w",["ww",2],"wo","week");de("W",["WW",2],"Wo","isoWeek");K("week","w");K("isoWeek","W");Q("week",5);Q("isoWeek",5);Oe("w",xe);Oe("ww",xe,ge);Oe("W",xe);Oe("WW",xe,ge);Ye(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=E(e)});function St(e){return wt(e,this._week.dow,this._week.doy).week}var Et={dow:0,doy:6};function kt(){return this._week.dow}function Tt(){return this._week.doy}function Mt(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function At(e){var t=wt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}de("d",0,"do","day");de("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});de("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});de("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});de("e",0,0,"weekday");de("E",0,0,"isoWeekday");K("day","d");K("weekday","e");K("isoWeekday","E");Q("day",11);Q("weekday",11);Q("isoWeekday",11);Oe("d",xe);Oe("e",xe);Oe("E",xe);Oe("dd",function(e,t){return t.weekdaysMinRegex(e)});Oe("ddd",function(e,t){return t.weekdaysShortRegex(e)});Oe("dddd",function(e,t){return t.weekdaysRegex(e)});Ye(["dd","ddd","dddd"],function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);if(r!=null){t.d=r}else{p(n).invalidWeekday=e}});Ye(["d","e","E"],function(e,t,n,i){t[i]=E(e)});function Ct(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function Rt(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}var Dt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function It(e,t){return a(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}var Ot="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function Nt(e){return this._weekdaysShort[e.day()]}var Ft="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Bt(e){return this._weekdaysMin[e.day()]}function Pt(e,t,n){var i,r,a,s=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(i=0;i<7;++i){a=f([2e3,1]).day(i);this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase();this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase();this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase()}}if(n){if(t==="dddd"){r=Xe.call(this._weekdaysParse,s);return r!==-1?r:null}else if(t==="ddd"){r=Xe.call(this._shortWeekdaysParse,s);return r!==-1?r:null}else{r=Xe.call(this._minWeekdaysParse,s);return r!==-1?r:null}}else{if(t==="dddd"){r=Xe.call(this._weekdaysParse,s);if(r!==-1){return r}r=Xe.call(this._shortWeekdaysParse,s);if(r!==-1){return r}r=Xe.call(this._minWeekdaysParse,s);return r!==-1?r:null}else if(t==="ddd"){r=Xe.call(this._shortWeekdaysParse,s);if(r!==-1){return r}r=Xe.call(this._weekdaysParse,s);if(r!==-1){return r}r=Xe.call(this._minWeekdaysParse,s);return r!==-1?r:null}else{r=Xe.call(this._minWeekdaysParse,s);if(r!==-1){return r}r=Xe.call(this._weekdaysParse,s);if(r!==-1){return r}r=Xe.call(this._shortWeekdaysParse,s);return r!==-1?r:null}}}function Ut(e,t,n){var i,r,a;if(this._weekdaysParseExact){return Pt.call(this,e,t,n)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(i=0;i<7;i++){r=f([2e3,1]).day(i);if(n&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i");this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[i]){a="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,"");this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")}if(n&&t==="dddd"&&this._fullWeekdaysParse[i].test(e)){return i}else if(n&&t==="ddd"&&this._shortWeekdaysParse[i].test(e)){return i}else if(n&&t==="dd"&&this._minWeekdaysParse[i].test(e)){return i}else if(!n&&this._weekdaysParse[i].test(e)){return i}}}function Yt(e){if(!this.isValid()){return e!=null?this:NaN}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=Ct(e,this.localeData());return this.add(e-t,"d")}else{return t}}function Ht(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Gt(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=Rt(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}var jt=De;function Vt(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Kt.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!c(this,"_weekdaysRegex")){this._weekdaysRegex=jt}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}var zt=De;function $t(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Kt.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!c(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=zt}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var qt=De;function Wt(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Kt.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!c(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=qt}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function Kt(){function e(e,t){return t.length-e.length}var t=[],n=[],i=[],r=[],a,s,o,l,u;for(a=0;a<7;a++){s=f([2e3,1]).day(a);o=this.weekdaysMin(s,"");l=this.weekdaysShort(s,"");u=this.weekdays(s,"");t.push(o);n.push(l);i.push(u);r.push(o);r.push(l);r.push(u)}t.sort(e);n.sort(e);i.sort(e);r.sort(e);for(a=0;a<7;a++){n[a]=Be(n[a]);i[a]=Be(i[a]);r[a]=Be(r[a])}this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Jt(){return this.hours()%12||12}function Xt(){return this.hours()||24}de("H",["HH",2],0,"hour");de("h",["hh",2],0,Jt);de("k",["kk",2],0,Xt);de("hmm",0,0,function(){return""+Jt.apply(this)+se(this.minutes(),2)});de("hmmss",0,0,function(){return""+Jt.apply(this)+se(this.minutes(),2)+se(this.seconds(),2)});de("Hmm",0,0,function(){return""+this.hours()+se(this.minutes(),2)});de("Hmmss",0,0,function(){return""+this.hours()+se(this.minutes(),2)+se(this.seconds(),2)});function Zt(e,t){de(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Zt("a",true);Zt("A",false);K("hour","h");Q("hour",13);function Qt(e,t){return t._meridiemParse}Oe("a",Qt);Oe("A",Qt);Oe("H",xe);Oe("h",xe);Oe("HH",xe,ge);Oe("hh",xe,ge);Oe("hmm",we);Oe("hmmss",Le);Oe("Hmm",we);Oe("Hmmss",Le);Ue(["H","HH"],ze);Ue(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e);n._meridiem=e});Ue(["h","hh"],function(e,t,n){t[ze]=E(e);p(n).bigHour=true});Ue("hmm",function(e,t,n){var i=e.length-2;t[ze]=E(e.substr(0,i));t[$e]=E(e.substr(i));p(n).bigHour=true});Ue("hmmss",function(e,t,n){var i=e.length-4;var r=e.length-2;t[ze]=E(e.substr(0,i));t[$e]=E(e.substr(i,2));t[qe]=E(e.substr(r));p(n).bigHour=true});Ue("Hmm",function(e,t,n){var i=e.length-2;t[ze]=E(e.substr(0,i));t[$e]=E(e.substr(i))});Ue("Hmmss",function(e,t,n){var i=e.length-4;var r=e.length-2;t[ze]=E(e.substr(0,i));t[$e]=E(e.substr(i,2));t[qe]=E(e.substr(r))});function en(e){return(e+"").toLowerCase().charAt(0)==="p"}var tn=/[ap]\.?m?\.?/i;function nn(e,t,n){if(e>11){return n?"pm":"PM"}else{return n?"am":"AM"}}var rn=te("Hours",true);var an={calendar:F,longDateFormat:P,invalidDate:Y,ordinal:G,ordinalParse:j,relativeTime:z,months:et,monthsShort:nt,week:Et,weekdays:Dt,weekdaysMin:Ft,weekdaysShort:Ot,meridiemParse:tn};var sn={};var on;function ln(e){return e?e.toLowerCase().replace("_","-"):e}function un(e){var t=0,n,i,r,a;while(t<e.length){a=ln(e[t]).split("-");n=a.length;i=ln(e[t+1]);i=i?i.split("-"):null;while(n>0){r=cn(a.slice(0,n).join("-"));if(r){return r}if(i&&i.length>=n&&k(a,i,true)>=n-1){break}n--}t++}return null}function cn(t){var i=null;if(!sn[t]&&typeof e!=="undefined"&&e&&e.exports){try{i=on._abbr;n(62)("./"+t);dn(i)}catch(r){}}return sn[t]}function dn(e,t){var n;if(e){if(v(t)){n=pn(e)}else{n=fn(e,t)}if(n){on=n}}return on._abbr}function fn(e,t){if(t!==null){var n=an;t.abbr=e;if(sn[e]!=null){C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");n=sn[e]._config}else if(t.parentLocale!=null){if(sn[t.parentLocale]!=null){n=sn[t.parentLocale]._config}else{C("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")}}sn[e]=new O(I(n,t));dn(e);return sn[e]}else{delete sn[e];return null}}function hn(e,t){if(t!=null){var n,i=an;if(sn[e]!=null){i=sn[e]._config}t=I(i,t);n=new O(t);n.parentLocale=sn[e];sn[e]=n;dn(e)}else{if(sn[e]!=null){if(sn[e].parentLocale!=null){sn[e]=sn[e].parentLocale}else if(sn[e]!=null){delete sn[e]}}}return sn[e]}function pn(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return on}if(!a(e)){t=cn(e);if(t){return t}e=[e]}return un(e)}function mn(){return N(sn)}function _n(e){var t;var n=e._a;if(n&&p(e).overflow===-2){t=n[je]<0||n[je]>11?je:n[Ve]<1||n[Ve]>Ze(n[Ge],n[je])?Ve:n[ze]<0||n[ze]>24||n[ze]===24&&(n[$e]!==0||n[qe]!==0||n[We]!==0)?ze:n[$e]<0||n[$e]>59?$e:n[qe]<0||n[qe]>59?qe:n[We]<0||n[We]>999?We:-1;if(p(e)._overflowDayOfYear&&(t<Ge||t>Ve)){t=Ve}if(p(e)._overflowWeeks&&t===-1){t=Ke}if(p(e)._overflowWeekday&&t===-1){t=Je}p(e).overflow=t}return e}var gn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;var vn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;var yn=/Z|[+-]\d\d(?::?\d\d)?/;var bn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var xn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var wn=/^\/?Date\((\-?\d+)/i;function Ln(e){var t,n,i=e._i,r=gn.exec(i)||vn.exec(i),a,s,o,l;if(r){p(e).iso=true;for(t=0,n=bn.length;t<n;t++){if(bn[t][1].exec(r[1])){s=bn[t][0];a=bn[t][2]!==false;break}}if(s==null){e._isValid=false;return}if(r[3]){for(t=0,n=xn.length;t<n;t++){if(xn[t][1].exec(r[3])){o=(r[2]||" ")+xn[t][0];break}}if(o==null){e._isValid=false;return}}if(!a&&o!=null){e._isValid=false;return}if(r[4]){if(yn.exec(r[4])){l="Z"}else{e._isValid=false;return}}e._f=s+(o||"")+(l||"");An(e)}else{e._isValid=false}}function Sn(e){var t=wn.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}Ln(e);if(e._isValid===false){delete e._isValid;i.createFromInputFallback(e)}}i.createFromInputFallback=M("moment construction falls back to js Date. This is "+"discouraged and will be removed in upcoming major "+"release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function En(e,t,n){if(e!=null){return e}if(t!=null){return t}return n}function kn(e){var t=new Date(i.now());if(e._useUTC){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]}return[t.getFullYear(),t.getMonth(),t.getDate()]}function Tn(e){var t,n,i=[],r,a;if(e._d){return}r=kn(e);if(e._w&&e._a[Ve]==null&&e._a[je]==null){Mn(e)}if(e._dayOfYear){a=En(e._a[Ge],r[Ge]);if(e._dayOfYear>pt(a)){p(e)._overflowDayOfYear=true}n=yt(a,0,e._dayOfYear);e._a[je]=n.getUTCMonth();e._a[Ve]=n.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=i[t]=r[t]}for(;t<7;t++){e._a[t]=i[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[ze]===24&&e._a[$e]===0&&e._a[qe]===0&&e._a[We]===0){e._nextDay=true;e._a[ze]=0}e._d=(e._useUTC?yt:vt).apply(null,i);if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[ze]=24}}function Mn(e){var t,n,i,r,a,s,o,l;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){a=1;s=4;n=En(t.GG,e._a[Ge],wt(Bn(),1,4).year);i=En(t.W,1);r=En(t.E,1);if(r<1||r>7){l=true}}else{a=e._locale._week.dow;s=e._locale._week.doy;n=En(t.gg,e._a[Ge],wt(Bn(),a,s).year);i=En(t.w,1);if(t.d!=null){r=t.d;if(r<0||r>6){l=true}}else if(t.e!=null){r=t.e+a;if(t.e<0||t.e>6){l=true}}else{r=a}}if(i<1||i>Lt(n,a,s)){p(e)._overflowWeeks=true}else if(l!=null){p(e)._overflowWeekday=true}else{o=xt(n,i,r,a,s);e._a[Ge]=o.year;e._dayOfYear=o.dayOfYear}}i.ISO_8601=function(){};function An(e){if(e._f===i.ISO_8601){Ln(e);return}e._a=[];p(e).empty=true;var t=""+e._i,n,r,a,s,o,l=t.length,u=0;a=me(e._f,e._locale).match(oe)||[];for(n=0;n<a.length;n++){s=a[n];r=(t.match(Ne(s,e))||[])[0];if(r){o=t.substr(0,t.indexOf(r));if(o.length>0){p(e).unusedInput.push(o)}t=t.slice(t.indexOf(r)+r.length);u+=r.length}if(ce[s]){if(r){p(e).empty=false}else{p(e).unusedTokens.push(s)}He(s,r,e)}else if(e._strict&&!r){p(e).unusedTokens.push(s)}}p(e).charsLeftOver=l-u;if(t.length>0){p(e).unusedInput.push(t)}if(e._a[ze]<=12&&p(e).bigHour===true&&e._a[ze]>0){p(e).bigHour=undefined}p(e).parsedDateParts=e._a.slice(0);p(e).meridiem=e._meridiem;e._a[ze]=Cn(e._locale,e._a[ze],e._meridiem);Tn(e);_n(e)}function Cn(e,t,n){var i;if(n==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,n)}else if(e.isPM!=null){i=e.isPM(n);if(i&&t<12){t+=12}if(!i&&t===12){t=0}return t}else{return t}}function Rn(e){var t,n,i,r,a;if(e._f.length===0){p(e).invalidFormat=true;e._d=new Date(NaN);return}for(r=0;r<e._f.length;r++){a=0;t=b({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[r];An(t);if(!_(t)){continue}a+=p(t).charsLeftOver;a+=p(t).unusedTokens.length*10;p(t).score=a;if(i==null||a<i){i=a;n=t}}d(e,n||t)}function Dn(e){if(e._d){return}var t=X(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)});Tn(e)}function In(e){var t=new w(_n(On(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function On(e){var t=e._i,n=e._f;e._locale=e._locale||pn(e._l);if(t===null||n===undefined&&t===""){return g({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(L(t)){return new w(_n(t))}else if(a(n)){Rn(e)}else if(l(t)){e._d=t}else if(n){An(e)}else{Nn(e)}if(!_(e)){e._d=null}return e}function Nn(e){var t=e._i;if(t===undefined){e._d=new Date(i.now())}else if(l(t)){e._d=new Date(t.valueOf())}else if(typeof t==="string"){Sn(e)}else if(a(t)){e._a=u(t.slice(0),function(e){return parseInt(e,10)});Tn(e)}else if(typeof t==="object"){Dn(e)}else if(typeof t==="number"){e._d=new Date(t)}else{i.createFromInputFallback(e)}}function Fn(e,t,n,i,r){var l={};if(typeof n==="boolean"){i=n;n=undefined}if(s(e)&&o(e)||a(e)&&e.length===0){e=undefined}l._isAMomentObject=true;l._useUTC=l._isUTC=r;l._l=n;l._i=e;l._f=t;l._strict=i;return In(l)}function Bn(e,t,n,i){return Fn(e,t,n,i,false)}var Pn=M("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Bn.apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return g()}});var Un=M("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Bn.apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return g()}});function Yn(e,t){var n,i;if(t.length===1&&a(t[0])){t=t[0]}if(!t.length){return Bn()}n=t[0];for(i=1;i<t.length;++i){if(!t[i].isValid()||t[i][e](n)){n=t[i]}}return n}function Hn(){var e=[].slice.call(arguments,0);return Yn("isBefore",e)}function Gn(){var e=[].slice.call(arguments,0);return Yn("isAfter",e)}var jn=function(){return Date.now?Date.now():+new Date};function Vn(e){var t=X(e),n=t.year||0,i=t.quarter||0,r=t.month||0,a=t.week||0,s=t.day||0,o=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+u*1e3+l*6e4+o*1e3*60*60;this._days=+s+a*7;this._months=+r+i*3+n*12;this._data={};this._locale=pn();this._bubble()}function zn(e){return e instanceof Vn}function $n(e,t){de(e,0,0,function(){var e=this.utcOffset();var n="+";if(e<0){e=-e;n="-"}return n+se(~~(e/60),2)+t+se(~~e%60,2)})}$n("Z",":");$n("ZZ","");Oe("Z",Ce);Oe("ZZ",Ce);Ue(["Z","ZZ"],function(e,t,n){n._useUTC=true;n._tzm=Wn(Ce,e)});var qn=/([\+\-]|\d\d)/gi;function Wn(e,t){var n=(t||"").match(e)||[];var i=n[n.length-1]||[];var r=(i+"").match(qn)||["-",0,0];var a=+(r[1]*60)+E(r[2]);return r[0]==="+"?a:-a}function Kn(e,t){var n,r;if(t._isUTC){n=t.clone();r=(L(e)||l(e)?e.valueOf():Bn(e).valueOf())-n.valueOf();n._d.setTime(n._d.valueOf()+r);i.updateOffset(n,false);return n}else{return Bn(e).local()}}function Jn(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}i.updateOffset=function(){};function Xn(e,t){var n=this._offset||0,r;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=Wn(Ce,e)}else if(Math.abs(e)<16){e=e*60}if(!this._isUTC&&t){r=Jn(this)}this._offset=e;this._isUTC=true;if(r!=null){this.add(r,"m")}if(n!==e){if(!t||this._changeInProgress){_i(this,ci(e-n,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;i.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?n:Jn(this)}}function Zn(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function Qn(e){return this.utcOffset(0,e)}function ei(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(Jn(this),"m")}}return this}function ti(){if(this._tzm){this.utcOffset(this._tzm)}else if(typeof this._i==="string"){this.utcOffset(Wn(Ae,this._i))}return this}function ni(e){if(!this.isValid()){return false}e=e?Bn(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function ii(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function ri(){if(!v(this._isDSTShifted)){return this._isDSTShifted}var e={};b(e,this);e=On(e);if(e._a){var t=e._isUTC?f(e._a):Bn(e._a);this._isDSTShifted=this.isValid()&&k(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function ai(){return this.isValid()?!this._isUTC:false}function si(){return this.isValid()?this._isUTC:false}function oi(){return this.isValid()?this._isUTC&&this._offset===0:false}var li=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/;var ui=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function ci(e,t){var n=e,i=null,r,a,s;if(zn(e)){n={ms:e._milliseconds,d:e._days,M:e._months}}else if(typeof e==="number"){n={};if(t){
n[t]=e}else{n.milliseconds=e}}else if(!!(i=li.exec(e))){r=i[1]==="-"?-1:1;n={y:0,d:E(i[Ve])*r,h:E(i[ze])*r,m:E(i[$e])*r,s:E(i[qe])*r,ms:E(i[We])*r}}else if(!!(i=ui.exec(e))){r=i[1]==="-"?-1:1;n={y:di(i[2],r),M:di(i[3],r),w:di(i[4],r),d:di(i[5],r),h:di(i[6],r),m:di(i[7],r),s:di(i[8],r)}}else if(n==null){n={}}else if(typeof n==="object"&&("from"in n||"to"in n)){s=hi(Bn(n.from),Bn(n.to));n={};n.ms=s.milliseconds;n.M=s.months}a=new Vn(n);if(zn(e)&&c(e,"_locale")){a._locale=e._locale}return a}ci.fn=Vn.prototype;function di(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function fi(e,t){var n={milliseconds:0,months:0};n.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(n.months,"M").isAfter(t)){--n.months}n.milliseconds=+t-+e.clone().add(n.months,"M");return n}function hi(e,t){var n;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=Kn(t,e);if(e.isBefore(t)){n=fi(e,t)}else{n=fi(t,e);n.milliseconds=-n.milliseconds;n.months=-n.months}return n}function pi(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}function mi(e,t){return function(n,i){var r,a;if(i!==null&&!isNaN(+i)){C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");a=n;n=i;i=a}n=typeof n==="string"?+n:n;r=ci(n,i);_i(this,r,e);return this}}function _i(e,t,n,r){var a=t._milliseconds,s=pi(t._days),o=pi(t._months);if(!e.isValid()){return}r=r==null?true:r;if(a){e._d.setTime(e._d.valueOf()+a*n)}if(s){ie(e,"Date",ne(e,"Date")+s*n)}if(o){st(e,ne(e,"Month")+o*n)}if(r){i.updateOffset(e,s||o)}}var gi=mi(1,"add");var vi=mi(-1,"subtract");function yi(e,t){var n=e.diff(t,"days",true);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function bi(e,t){var n=e||Bn(),r=Kn(n,this).startOf("day"),a=i.calendarFormat(this,r)||"sameElse";var s=t&&(R(t[a])?t[a].call(this,n):t[a]);return this.format(s||this.localeData().calendar(a,this,Bn(n)))}function xi(){return new w(this)}function wi(e,t){var n=L(e)?e:Bn(e);if(!(this.isValid()&&n.isValid())){return false}t=J(!v(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()>n.valueOf()}else{return n.valueOf()<this.clone().startOf(t).valueOf()}}function Li(e,t){var n=L(e)?e:Bn(e);if(!(this.isValid()&&n.isValid())){return false}t=J(!v(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()<n.valueOf()}else{return this.clone().endOf(t).valueOf()<n.valueOf()}}function Si(e,t,n,i){i=i||"()";return(i[0]==="("?this.isAfter(e,n):!this.isBefore(e,n))&&(i[1]===")"?this.isBefore(t,n):!this.isAfter(t,n))}function Ei(e,t){var n=L(e)?e:Bn(e),i;if(!(this.isValid()&&n.isValid())){return false}t=J(t||"millisecond");if(t==="millisecond"){return this.valueOf()===n.valueOf()}else{i=n.valueOf();return this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()}}function ki(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Ti(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Mi(e,t,n){var i,r,a,s;if(!this.isValid()){return NaN}i=Kn(e,this);if(!i.isValid()){return NaN}r=(i.utcOffset()-this.utcOffset())*6e4;t=J(t);if(t==="year"||t==="month"||t==="quarter"){s=Ai(this,i);if(t==="quarter"){s=s/3}else if(t==="year"){s=s/12}}else{a=this-i;s=t==="second"?a/1e3:t==="minute"?a/6e4:t==="hour"?a/36e5:t==="day"?(a-r)/864e5:t==="week"?(a-r)/6048e5:a}return n?s:S(s)}function Ai(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),i=e.clone().add(n,"months"),r,a;if(t-i<0){r=e.clone().add(n-1,"months");a=(t-i)/(i-r)}else{r=e.clone().add(n+1,"months");a=(t-i)/(r-i)}return-(n+a)||0}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Ci(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Ri(){var e=this.clone().utc();if(0<e.year()&&e.year()<=9999){if(R(Date.prototype.toISOString)){return this.toDate().toISOString()}else{return pe(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return pe(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}function Di(e){if(!e){e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat}var t=pe(this,e);return this.localeData().postformat(t)}function Ii(e,t){if(this.isValid()&&(L(e)&&e.isValid()||Bn(e).isValid())){return ci({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Oi(e){return this.from(Bn(),e)}function Ni(e,t){if(this.isValid()&&(L(e)&&e.isValid()||Bn(e).isValid())){return ci({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Fi(e){return this.to(Bn(),e)}function Bi(e){var t;if(e===undefined){return this._locale._abbr}else{t=pn(e);if(t!=null){this._locale=t}return this}}var Pi=M("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}});function Ui(){return this._locale}function Yi(e){e=J(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}if(e==="isoWeek"){this.isoWeekday(1)}if(e==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function Hi(e){e=J(e);if(e===undefined||e==="millisecond"){return this}if(e==="date"){e="day"}return this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function Gi(){return this._d.valueOf()-(this._offset||0)*6e4}function ji(){return Math.floor(this.valueOf()/1e3)}function Vi(){return new Date(this.valueOf())}function zi(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function $i(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function qi(){return this.isValid()?this.toISOString():null}function Wi(){return _(this)}function Ki(){return d({},p(this))}function Ji(){return p(this).overflow}function Xi(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}de(0,["gg",2],0,function(){return this.weekYear()%100});de(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Zi(e,t){de(0,[e,e.length],0,t)}Zi("gggg","weekYear");Zi("ggggg","weekYear");Zi("GGGG","isoWeekYear");Zi("GGGGG","isoWeekYear");K("weekYear","gg");K("isoWeekYear","GG");Q("weekYear",1);Q("isoWeekYear",1);Oe("G",Me);Oe("g",Me);Oe("GG",xe,ge);Oe("gg",xe,ge);Oe("GGGG",Ee,ye);Oe("gggg",Ee,ye);Oe("GGGGG",ke,be);Oe("ggggg",ke,be);Ye(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=E(e)});Ye(["gg","GG"],function(e,t,n,r){t[r]=i.parseTwoDigitYear(e)});function Qi(e){return ir.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function er(e){return ir.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function tr(){return Lt(this.year(),1,4)}function nr(){var e=this.localeData()._week;return Lt(this.year(),e.dow,e.doy)}function ir(e,t,n,i,r){var a;if(e==null){return wt(this,i,r).year}else{a=Lt(e,i,r);if(t>a){t=a}return rr.call(this,e,t,n,i,r)}}function rr(e,t,n,i,r){var a=xt(e,t,n,i,r),s=yt(a.year,0,a.dayOfYear);this.year(s.getUTCFullYear());this.month(s.getUTCMonth());this.date(s.getUTCDate());return this}de("Q",0,"Qo","quarter");K("quarter","Q");Q("quarter",7);Oe("Q",_e);Ue("Q",function(e,t){t[je]=(E(e)-1)*3});function ar(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}de("D",["DD",2],"Do","date");K("date","D");Q("date",9);Oe("D",xe);Oe("DD",xe,ge);Oe("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient});Ue(["D","DD"],Ve);Ue("Do",function(e,t){t[Ve]=E(e.match(xe)[0],10)});var sr=te("Date",true);de("DDD",["DDDD",3],"DDDo","dayOfYear");K("dayOfYear","DDD");Q("dayOfYear",4);Oe("DDD",Se);Oe("DDDD",ve);Ue(["DDD","DDDD"],function(e,t,n){n._dayOfYear=E(e)});function or(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}de("m",["mm",2],0,"minute");K("minute","m");Q("minute",14);Oe("m",xe);Oe("mm",xe,ge);Ue(["m","mm"],$e);var lr=te("Minutes",false);de("s",["ss",2],0,"second");K("second","s");Q("second",15);Oe("s",xe);Oe("ss",xe,ge);Ue(["s","ss"],qe);var ur=te("Seconds",false);de("S",0,0,function(){return~~(this.millisecond()/100)});de(0,["SS",2],0,function(){return~~(this.millisecond()/10)});de(0,["SSS",3],0,"millisecond");de(0,["SSSS",4],0,function(){return this.millisecond()*10});de(0,["SSSSS",5],0,function(){return this.millisecond()*100});de(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});de(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});de(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});de(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});K("millisecond","ms");Q("millisecond",16);Oe("S",Se,_e);Oe("SS",Se,ge);Oe("SSS",Se,ve);var cr;for(cr="SSSS";cr.length<=9;cr+="S"){Oe(cr,Te)}function dr(e,t){t[We]=E(("0."+e)*1e3)}for(cr="S";cr.length<=9;cr+="S"){Ue(cr,dr)}var fr=te("Milliseconds",false);de("z",0,0,"zoneAbbr");de("zz",0,0,"zoneName");function hr(){return this._isUTC?"UTC":""}function pr(){return this._isUTC?"Coordinated Universal Time":""}var mr=w.prototype;mr.add=gi;mr.calendar=bi;mr.clone=xi;mr.diff=Mi;mr.endOf=Hi;mr.format=Di;mr.from=Ii;mr.fromNow=Oi;mr.to=Ni;mr.toNow=Fi;mr.get=re;mr.invalidAt=Ji;mr.isAfter=wi;mr.isBefore=Li;mr.isBetween=Si;mr.isSame=Ei;mr.isSameOrAfter=ki;mr.isSameOrBefore=Ti;mr.isValid=Wi;mr.lang=Pi;mr.locale=Bi;mr.localeData=Ui;mr.max=Un;mr.min=Pn;mr.parsingFlags=Ki;mr.set=ae;mr.startOf=Yi;mr.subtract=vi;mr.toArray=zi;mr.toObject=$i;mr.toDate=Vi;mr.toISOString=Ri;mr.toJSON=qi;mr.toString=Ci;mr.unix=ji;mr.valueOf=Gi;mr.creationData=Xi;mr.year=_t;mr.isLeapYear=gt;mr.weekYear=Qi;mr.isoWeekYear=er;mr.quarter=mr.quarters=ar;mr.month=ot;mr.daysInMonth=lt;mr.week=mr.weeks=Mt;mr.isoWeek=mr.isoWeeks=At;mr.weeksInYear=nr;mr.isoWeeksInYear=tr;mr.date=sr;mr.day=mr.days=Yt;mr.weekday=Ht;mr.isoWeekday=Gt;mr.dayOfYear=or;mr.hour=mr.hours=rn;mr.minute=mr.minutes=lr;mr.second=mr.seconds=ur;mr.millisecond=mr.milliseconds=fr;mr.utcOffset=Xn;mr.utc=Qn;mr.local=ei;mr.parseZone=ti;mr.hasAlignedHourOffset=ni;mr.isDST=ii;mr.isLocal=ai;mr.isUtcOffset=si;mr.isUtc=oi;mr.isUTC=oi;mr.zoneAbbr=hr;mr.zoneName=pr;mr.dates=M("dates accessor is deprecated. Use date instead.",sr);mr.months=M("months accessor is deprecated. Use month instead",ot);mr.years=M("years accessor is deprecated. Use year instead",_t);mr.zone=M("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Zn);mr.isDSTShifted=M("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",ri);var _r=mr;function gr(e){return Bn(e*1e3)}function vr(){return Bn.apply(null,arguments).parseZone()}function yr(e){return e}var br=O.prototype;br.calendar=B;br.longDateFormat=U;br.invalidDate=H;br.ordinal=V;br.preparse=yr;br.postformat=yr;br.relativeTime=$;br.pastFuture=q;br.set=D;br.months=tt;br.monthsShort=it;br.monthsParse=at;br.monthsRegex=ft;br.monthsShortRegex=ct;br.week=St;br.firstDayOfYear=Tt;br.firstDayOfWeek=kt;br.weekdays=It;br.weekdaysMin=Bt;br.weekdaysShort=Nt;br.weekdaysParse=Ut;br.weekdaysRegex=Vt;br.weekdaysShortRegex=$t;br.weekdaysMinRegex=Wt;br.isPM=en;br.meridiem=nn;function xr(e,t,n,i){var r=pn();var a=f().set(i,t);return r[n](a,e)}function wr(e,t,n){if(typeof e==="number"){t=e;e=undefined}e=e||"";if(t!=null){return xr(e,t,n,"month")}var i;var r=[];for(i=0;i<12;i++){r[i]=xr(e,i,n,"month")}return r}function Lr(e,t,n,i){if(typeof e==="boolean"){if(typeof t==="number"){n=t;t=undefined}t=t||""}else{t=e;n=t;e=false;if(typeof t==="number"){n=t;t=undefined}t=t||""}var r=pn(),a=e?r._week.dow:0;if(n!=null){return xr(t,(n+a)%7,i,"day")}var s;var o=[];for(s=0;s<7;s++){o[s]=xr(t,(s+a)%7,i,"day")}return o}function Sr(e,t){return wr(e,t,"months")}function Er(e,t){return wr(e,t,"monthsShort")}function kr(e,t,n){return Lr(e,t,n,"weekdays")}function Tr(e,t,n){return Lr(e,t,n,"weekdaysShort")}function Mr(e,t,n){return Lr(e,t,n,"weekdaysMin")}dn("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=E(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});i.lang=M("moment.lang is deprecated. Use moment.locale instead.",dn);i.langData=M("moment.langData is deprecated. Use moment.localeData instead.",pn);var Ar=Math.abs;function Cr(){var e=this._data;this._milliseconds=Ar(this._milliseconds);this._days=Ar(this._days);this._months=Ar(this._months);e.milliseconds=Ar(e.milliseconds);e.seconds=Ar(e.seconds);e.minutes=Ar(e.minutes);e.hours=Ar(e.hours);e.months=Ar(e.months);e.years=Ar(e.years);return this}function Rr(e,t,n,i){var r=ci(t,n);e._milliseconds+=i*r._milliseconds;e._days+=i*r._days;e._months+=i*r._months;return e._bubble()}function Dr(e,t){return Rr(this,e,t,1)}function Ir(e,t){return Rr(this,e,t,-1)}function Or(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function Nr(){var e=this._milliseconds;var t=this._days;var n=this._months;var i=this._data;var r,a,s,o,l;if(!(e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0)){e+=Or(Br(n)+t)*864e5;t=0;n=0}i.milliseconds=e%1e3;r=S(e/1e3);i.seconds=r%60;a=S(r/60);i.minutes=a%60;s=S(a/60);i.hours=s%24;t+=S(s/24);l=S(Fr(t));n+=l;t-=Or(Br(l));o=S(n/12);n%=12;i.days=t;i.months=n;i.years=o;return this}function Fr(e){return e*4800/146097}function Br(e){return e*146097/4800}function Pr(e){var t;var n;var i=this._milliseconds;e=J(e);if(e==="month"||e==="year"){t=this._days+i/864e5;n=this._months+Fr(t);return e==="month"?n:n/12}else{t=this._days+Math.round(Br(this._months));switch(e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return t*24+i/36e5;case"minute":return t*1440+i/6e4;case"second":return t*86400+i/1e3;case"millisecond":return Math.floor(t*864e5)+i;default:throw new Error("Unknown unit "+e)}}}function Ur(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+E(this._months/12)*31536e6}function Yr(e){return function(){return this.as(e)}}var Hr=Yr("ms");var Gr=Yr("s");var jr=Yr("m");var Vr=Yr("h");var zr=Yr("d");var $r=Yr("w");var qr=Yr("M");var Wr=Yr("y");function Kr(e){e=J(e);return this[e+"s"]()}function Jr(e){return function(){return this._data[e]}}var Xr=Jr("milliseconds");var Zr=Jr("seconds");var Qr=Jr("minutes");var ea=Jr("hours");var ta=Jr("days");var na=Jr("months");var ia=Jr("years");function ra(){return S(this.days()/7)}var aa=Math.round;var sa={s:45,m:45,h:22,d:26,M:11};function oa(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function la(e,t,n){var i=ci(e).abs();var r=aa(i.as("s"));var a=aa(i.as("m"));var s=aa(i.as("h"));var o=aa(i.as("d"));var l=aa(i.as("M"));var u=aa(i.as("y"));var c=r<sa.s&&["s",r]||a<=1&&["m"]||a<sa.m&&["mm",a]||s<=1&&["h"]||s<sa.h&&["hh",s]||o<=1&&["d"]||o<sa.d&&["dd",o]||l<=1&&["M"]||l<sa.M&&["MM",l]||u<=1&&["y"]||["yy",u];c[2]=t;c[3]=+e>0;c[4]=n;return oa.apply(null,c)}function ua(e){if(e===undefined){return aa}if(typeof e==="function"){aa=e;return true}return false}function ca(e,t){if(sa[e]===undefined){return false}if(t===undefined){return sa[e]}sa[e]=t;return true}function da(e){var t=this.localeData();var n=la(this,!e,t);if(e){n=t.pastFuture(+this,n)}return t.postformat(n)}var fa=Math.abs;function ha(){var e=fa(this._milliseconds)/1e3;var t=fa(this._days);var n=fa(this._months);var i,r,a;i=S(e/60);r=S(i/60);e%=60;i%=60;a=S(n/12);n%=12;var s=a;var o=n;var l=t;var u=r;var c=i;var d=e;var f=this.asSeconds();if(!f){return"P0D"}return(f<0?"-":"")+"P"+(s?s+"Y":"")+(o?o+"M":"")+(l?l+"D":"")+(u||c||d?"T":"")+(u?u+"H":"")+(c?c+"M":"")+(d?d+"S":"")}var pa=Vn.prototype;pa.abs=Cr;pa.add=Dr;pa.subtract=Ir;pa.as=Pr;pa.asMilliseconds=Hr;pa.asSeconds=Gr;pa.asMinutes=jr;pa.asHours=Vr;pa.asDays=zr;pa.asWeeks=$r;pa.asMonths=qr;pa.asYears=Wr;pa.valueOf=Ur;pa._bubble=Nr;pa.get=Kr;pa.milliseconds=Xr;pa.seconds=Zr;pa.minutes=Qr;pa.hours=ea;pa.days=ta;pa.weeks=ra;pa.months=na;pa.years=ia;pa.humanize=da;pa.toISOString=ha;pa.toString=ha;pa.toJSON=ha;pa.locale=Bi;pa.localeData=Ui;pa.toIsoString=M("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ha);pa.lang=Pi;de("X",0,0,"unix");de("x",0,0,"valueOf");Oe("x",Me);Oe("X",Re);Ue("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)});Ue("x",function(e,t,n){n._d=new Date(E(e))});i.version="2.14.1";r(Bn);i.fn=_r;i.min=Hn;i.max=Gn;i.now=jn;i.utc=f;i.unix=gr;i.months=Sr;i.isDate=l;i.locale=dn;i.invalid=g;i.duration=ci;i.isMoment=L;i.weekdays=kr;i.parseZone=vr;i.localeData=pn;i.isDuration=zn;i.monthsShort=Er;i.weekdaysMin=Mr;i.defineLocale=fn;i.updateLocale=hn;i.locales=mn;i.weekdaysShort=Tr;i.normalizeUnits=J;i.relativeTimeRounding=ua;i.relativeTimeThreshold=ca;i.calendarFormat=yi;i.prototype=_r;var ma=i;return ma})}).call(t,n(61)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){e.deprecate=function(){};e.paths=[];e.children=[];e.webpackPolyfill=1}return e}},function(e,t,n){var i={"./af":63,"./af.js":63,"./ar":64,"./ar-ma":65,"./ar-ma.js":65,"./ar-sa":66,"./ar-sa.js":66,"./ar-tn":67,"./ar-tn.js":67,"./ar.js":64,"./az":68,"./az.js":68,"./be":69,"./be.js":69,"./bg":70,"./bg.js":70,"./bn":71,"./bn.js":71,"./bo":72,"./bo.js":72,"./br":73,"./br.js":73,"./bs":74,"./bs.js":74,"./ca":75,"./ca.js":75,"./cs":76,"./cs.js":76,"./cv":77,"./cv.js":77,"./cy":78,"./cy.js":78,"./da":79,"./da.js":79,"./de":80,"./de-at":81,"./de-at.js":81,"./de.js":80,"./dv":82,"./dv.js":82,"./el":83,"./el.js":83,"./en-au":84,"./en-au.js":84,"./en-ca":85,"./en-ca.js":85,"./en-gb":86,"./en-gb.js":86,"./en-ie":87,"./en-ie.js":87,"./en-nz":88,"./en-nz.js":88,"./eo":89,"./eo.js":89,"./es":90,"./es-do":91,"./es-do.js":91,"./es.js":90,"./et":92,"./et.js":92,"./eu":93,"./eu.js":93,"./fa":94,"./fa.js":94,"./fi":95,"./fi.js":95,"./fo":96,"./fo.js":96,"./fr":97,"./fr-ca":98,"./fr-ca.js":98,"./fr-ch":99,"./fr-ch.js":99,"./fr.js":97,"./fy":100,"./fy.js":100,"./gd":101,"./gd.js":101,"./gl":102,"./gl.js":102,"./he":103,"./he.js":103,"./hi":104,"./hi.js":104,"./hr":105,"./hr.js":105,"./hu":106,"./hu.js":106,"./hy-am":107,"./hy-am.js":107,"./id":108,"./id.js":108,"./is":109,"./is.js":109,"./it":110,"./it.js":110,"./ja":111,"./ja.js":111,"./jv":112,"./jv.js":112,"./ka":113,"./ka.js":113,"./kk":114,"./kk.js":114,"./km":115,"./km.js":115,"./ko":116,"./ko.js":116,"./ky":117,"./ky.js":117,"./lb":118,"./lb.js":118,"./lo":119,"./lo.js":119,"./lt":120,"./lt.js":120,"./lv":121,"./lv.js":121,"./me":122,"./me.js":122,"./mk":123,"./mk.js":123,"./ml":124,"./ml.js":124,"./mr":125,"./mr.js":125,"./ms":126,"./ms-my":127,"./ms-my.js":127,"./ms.js":126,"./my":128,"./my.js":128,"./nb":129,"./nb.js":129,"./ne":130,"./ne.js":130,"./nl":131,"./nl.js":131,"./nn":132,"./nn.js":132,"./pa-in":133,"./pa-in.js":133,"./pl":134,"./pl.js":134,"./pt":135,"./pt-br":136,"./pt-br.js":136,"./pt.js":135,"./ro":137,"./ro.js":137,"./ru":138,"./ru.js":138,"./se":139,"./se.js":139,"./si":140,"./si.js":140,"./sk":141,"./sk.js":141,"./sl":142,"./sl.js":142,"./sq":143,"./sq.js":143,"./sr":144,"./sr-cyrl":145,"./sr-cyrl.js":145,"./sr.js":144,"./ss":146,"./ss.js":146,"./sv":147,"./sv.js":147,"./sw":148,"./sw.js":148,"./ta":149,"./ta.js":149,"./te":150,"./te.js":150,"./th":151,"./th.js":151,"./tl-ph":152,"./tl-ph.js":152,"./tlh":153,"./tlh.js":153,"./tr":154,"./tr.js":154,"./tzl":155,"./tzl.js":155,"./tzm":156,"./tzm-latn":157,"./tzm-latn.js":157,"./tzm.js":156,"./uk":158,"./uk.js":158,"./uz":159,"./uz.js":159,"./vi":160,"./vi.js":160,"./x-pseudo":161,"./x-pseudo.js":161,"./zh-cn":162,"./zh-cn.js":162,"./zh-tw":163,"./zh-tw.js":163};function r(e){return n(a(e))}function a(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}r.keys=function s(){return Object.keys(i)};r.resolve=a;e.exports=r;r.id=62},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){if(e<12){return n?"vm":"VM"}else{return n?"nm":"NM"}},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(e===1||e===8||e>=20?"ste":"de")},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},i=function(e){return e===0?0:e===1?1:e===2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},r={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},a=function(e){return function(t,n,a,s){var o=i(t),l=r[e][i(t)];if(o===2){l=l[n?0:1]}return l.replace(/%d/i,t)}},s=["  "," "," "," "," "," "," "," "," ","  ","  ","  "];var o=e.defineLocale("ar",{months:s,monthsShort:s,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){if(e<12){return""}else{return""}},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:a("s"),m:a("m"),mm:a("m"),h:a("h"),hh:a("h"),d:a("d"),dd:a("d"),M:a("M"),MM:a("M"),y:a("y"),yy:a("y")},preparse:function(e){return e.replace(/\u200f/g,"").replace(/[]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},week:{dow:6,doy:12}});return o})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var i=e.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){if(e<12){return""}else{return""}},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},week:{dow:6,doy:12}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};var n=e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniyy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(e){return/^(gndz|axam)$/.test(e)},meridiem:function(e,t,n){if(e<4){return"gec"}else if(e<12){return"shr"}else if(e<17){return"gndz"}else{return"axam"}},ordinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(e){if(e===0){return e+"-nc"}var n=e%10,i=e%100-n,r=e>=100?100:null;return e+(t[n]||t[i]||t[r])},week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,i){var r={mm:n?"__":"__",hh:n?"__":"__",dd:"__",MM:"__",yy:"__"};if(i==="m"){return n?"":""}else if(i==="h"){return n?"":""}else{return e+" "+t(r[i],+e)}}var i=e.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:n,hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){if(e<4){return""}else if(e<12){return""}else if(e<17){return""}else{return""}},ordinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return(e%10===2||e%10===3)&&(e%100!==12&&e%100!==13)?e+"-":e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";

case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;if(e===0){return e+"-"}else if(n===0){return e+"-"}else if(n>10&&n<20){return e+"-"}else if(t===1){return e+"-"}else if(t===2){return e+"-"}else if(t===7||t===8){return e+"-"}else{return e+"-"}},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var i=e.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/||||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""&&e>=4||t===""&&e<5||t===""){return e+12}else{return e}},meridiem:function(e,t,n){if(e<4){return""}else if(e<10){return""}else if(e<17){return""}else if(e<20){return""}else{return""}},week:{dow:0,doy:6}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var i=e.defineLocale("bo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/||||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""&&e>=4||t===""&&e<5||t===""){return e+12}else{return e}},meridiem:function(e,t,n){if(e<4){return""}else if(e<10){return""}else if(e<17){return""}else if(e<20){return""}else{return""}},week:{dow:0,doy:6}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n){var i={mm:"munutenn",MM:"miz",dd:"devezh"};return e+" "+r(i[n],e)}function n(e){switch(i(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}function i(e){if(e>9){return i(e%10)}return e}function r(e,t){if(t===2){return a(e)}return e}function a(e){var t={m:"v",b:"v",d:"z"};if(t[e.charAt(0)]===undefined){return e}return t[e.charAt(0)]+e.substring(1)}var s=e.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:n},ordinalParse:/\d{1,2}(a|vet)/,ordinal:function(e){var t=e===1?"a":"vet";return e+t},week:{dow:1,doy:4}});return s})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n){var i=e+" ";switch(n){case"m":return t?"jedna minuta":"jedne minute";case"mm":if(e===1){i+="minuta"}else if(e===2||e===3||e===4){i+="minute"}else{i+="minuta"}return i;case"h":return t?"jedan sat":"jednog sata";case"hh":if(e===1){i+="sat"}else if(e===2||e===3||e===4){i+="sata"}else{i+="sati"}return i;case"dd":if(e===1){i+="dan"}else{i+="dana"}return i;case"MM":if(e===1){i+="mjesec"}else if(e===2||e===3||e===4){i+="mjeseca"}else{i+="mjeseci"}return i;case"yy":if(e===1){i+="godina"}else if(e===2||e===3||e===4){i+="godine"}else{i+="godina"}return i}}var n=e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:true,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ca",{months:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:true,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[avui a "+(this.hours()!==1?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(this.hours()!==1?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(this.hours()!==1?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(this.hours()!==1?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(this.hours()!==1?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,t){var n=e===1?"r":e===2?"n":e===3?"r":e===4?"t":"";if(t==="w"||t==="W"){n="a"}return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),n="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_");function i(e){return e>1&&e<5&&~~(e/10)!==1}function r(e,t,n,r){var a=e+" ";switch(n){case"s":return t||r?"pr sekund":"pr sekundami";case"m":return t?"minuta":r?"minutu":"minutou";case"mm":if(t||r){return a+(i(e)?"minuty":"minut")}else{return a+"minutami"}break;case"h":return t?"hodina":r?"hodinu":"hodinou";case"hh":if(t||r){return a+(i(e)?"hodiny":"hodin")}else{return a+"hodinami"}break;case"d":return t||r?"den":"dnem";case"dd":if(t||r){return a+(i(e)?"dny":"dn")}else{return a+"dny"}break;case"M":return t||r?"msc":"mscem";case"MM":if(t||r){return a+(i(e)?"msce":"msc")}else{return a+"msci"}break;case"y":return t||r?"rok":"rokem";case"yy":if(t||r){return a+(i(e)?"roky":"let")}else{return a+"lety"}break}}var a=e.defineLocale("cs",{months:t,monthsShort:n,monthsParse:function(e,t){var n,i=[];for(n=0;n<12;n++){i[n]=new RegExp("^"+e[n]+"$|^"+t[n]+"$","i")}return i}(t,n),shortMonthsParse:function(e){var t,n=[];for(t=0;t<12;t++){n[t]=new RegExp("^"+e[t]+"$","i")}return n}(n),longMonthsParse:function(e){var t,n=[];for(t=0;t<12;t++){n[t]=new RegExp("^"+e[t]+"$","i")}return n}(t),weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return a})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(e){var t=/$/i.exec(e)?"":/$/i.exec(e)?"":"";return e+t},past:"%s ",s:"- ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t=e,n="",i=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];if(t>20){if(t===40||t===50||t===60||t===80||t===100){n="fed"}else{n="ain"}}else if(t>0){n=i[t]}return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I gr kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?r[n][0]:r[n][1]}var n=e.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:true,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?r[n][0]:r[n][1]}var n=e.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:true,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=["","","","","","","","","","","",""],n=["","","","","","",""];var i=e.defineLocale("dv",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){if(e<12){return""}else{return""}},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:7,doy:12}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}var n=e.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(e,t){if(/D/.test(t.substring(0,t.indexOf("MMMM")))){return this._monthsGenitiveEl[e.month()]}else{return this._monthsNominativeEl[e.month()]}},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(e,t,n){if(e>11){return n?"":""}else{return n?"":""}},isPM:function(e){return(e+"").toLowerCase()[0]===""},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,n){var i=this._calendarEl[e],r=n&&n.hours();if(t(i)){i=i.apply(n)}return i.replace("{}",r%12===1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"Dimano_Lundo_Mardo_Merkredo_ado_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_a_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_a_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-an de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return e.charAt(0).toLowerCase()==="p"},meridiem:function(e,t,n){if(e>11){return n?"p.t.m.":"P.T.M."}else{return n?"a.t.m.":"A.T.M."}},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"anta %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");var i=e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){if(/-MMM-/.test(i)){return n[e.month()]}else{return t[e.month()]}},monthsParseExact:true,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(this.hours()!==1?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(this.hours()!==1?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(this.hours()!==1?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");var i=e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){if(/-MMM-/.test(i)){return n[e.month()]}else{return t[e.month()]}},monthsParseExact:true,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(this.hours()!==1?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(this.hours()!==1?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(this.hours()!==1?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n,i){
var r={s:["mne sekundi","mni sekund","paar sekundit"],m:["he minuti","ks minut"],mm:[e+" minuti",e+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[e+" tunni",e+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[e+" kuu",e+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[e+" aasta",e+" aastat"]};if(t){return r[n][2]?r[n][2]:r[n][1]}return i?r[n][0]:r[n][1]}var n=e.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d peva",M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:true,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var i=e.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(e){return/  /.test(e)},meridiem:function(e,t,n){if(e<12){return"  "}else{return"  "}},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[-]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),n=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",t[7],t[8],t[9]];function i(e,t,n,i){var a="";switch(n){case"s":return i?"muutaman sekunnin":"muutama sekunti";case"m":return i?"minuutin":"minuutti";case"mm":a=i?"minuutin":"minuuttia";break;case"h":return i?"tunnin":"tunti";case"hh":a=i?"tunnin":"tuntia";break;case"d":return i?"pivn":"piv";case"dd":a=i?"pivn":"piv";break;case"M":return i?"kuukauden":"kuukausi";case"MM":a=i?"kuukauden":"kuukautta";break;case"y":return i?"vuoden":"vuosi";case"yy":a=i?"vuoden":"vuotta";break}a=r(e,i)+" "+a;return a}function r(e,i){return e<10?i?n[e]:t[e]:e}var a=e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return a})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnai",MM:"%d mnair",y:"eitt r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:true,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(e){return e+(e===1?"er":"")},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:true,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(e){return e+(e===1?"er":"e")}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:true,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(e){return e+(e===1?"er":"e")},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");var i=e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,i){if(/-MMM-/.test(i)){return n[e.month()]}else{return t[e.month()]}},monthsParseExact:true,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(e===1||e===8||e>=20?"ste":"de")},week:{dow:1,doy:4}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"];var n=["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"];var i=["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"];var r=["Did","Dil","Dim","Dic","Dia","Dih","Dis"];var a=["D","Lu","M","Ci","Ar","Ha","Sa"];var s=e.defineLocale("gd",{months:t,monthsShort:n,monthsParseExact:true,weekdays:i,weekdaysShort:r,weekdaysMin:a,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},ordinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){var t=e===1?"d":e%10===2?"na":"mh";return e+t},week:{dow:1,doy:4}});return s})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuo_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xu._Xul._Ago._Set._Out._Nov._Dec.".split("_"),monthsParseExact:true,weekdays:"Domingo_Luns_Martes_Mrcores_Xoves_Venres_Sbado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mr._Xov._Ven._Sb.".split("_"),weekdaysMin:"Do_Lu_Ma_M_Xo_Ve_S".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[ma "+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(this.hours()!==1?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(this.hours()!==1?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(this.hours()!==1?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){if(e==="uns segundos"){return"nuns segundos"}return"en "+e},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:function(e){if(e===2){return""}return e+" "},d:"",dd:function(e){if(e===2){return""}return e+" "},M:"",MM:function(e){if(e===2){return""}return e+" "},y:"",yy:function(e){if(e===2){return""}else if(e%10===0&&e!==10){return e+" "}return e+" "}},meridiemParse:/"|"| | | ||/i,isPM:function(e){return/^("| |)$/.test(e)},meridiem:function(e,t,n){if(e<5){return" "}else if(e<10){return""}else if(e<12){return n?'"':" "}else if(e<18){return n?'"':" "}else{return""}}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var i=e.defineLocale("hi",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""){return e<4?e:e+12}else if(t===""){return e}else if(t===""){return e>=10?e:e+12}else if(t===""){return e+12}},meridiem:function(e,t,n){if(e<4){return""}else if(e<10){return""}else if(e<17){return""}else if(e<20){return""}else{return""}},week:{dow:0,doy:6}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n){var i=e+" ";switch(n){case"m":return t?"jedna minuta":"jedne minute";case"mm":if(e===1){i+="minuta"}else if(e===2||e===3||e===4){i+="minute"}else{i+="minuta"}return i;case"h":return t?"jedan sat":"jednog sata";case"hh":if(e===1){i+="sat"}else if(e===2||e===3||e===4){i+="sata"}else{i+="sati"}return i;case"dd":if(e===1){i+="dan"}else{i+="dana"}return i;case"MM":if(e===1){i+="mjesec"}else if(e===2||e===3||e===4){i+="mjeseca"}else{i+="mjeseci"}return i;case"yy":if(e===1){i+="godina"}else if(e===2||e===3||e===4){i+="godine"}else{i+="godina"}return i}}var n=e.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:true,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");function n(e,t,n,i){var r=e,a;switch(n){case"s":return i||t?"nhny msodperc":"nhny msodperce";case"m":return"egy"+(i||t?" perc":" perce");case"mm":return r+(i||t?" perc":" perce");case"h":return"egy"+(i||t?" ra":" rja");case"hh":return r+(i||t?" ra":" rja");case"d":return"egy"+(i||t?" nap":" napja");case"dd":return r+(i||t?" nap":" napja");case"M":return"egy"+(i||t?" hnap":" hnapja");case"MM":return r+(i||t?" hnap":" hnapja");case"y":return"egy"+(i||t?" v":" ve");case"yy":return r+(i||t?" v":" ve")}return""}function i(e){return(e?"":"[mlt] ")+"["+t[this.day()]+"] LT[-kor]"}var r=e.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return e.charAt(1).toLowerCase()==="u"},meridiem:function(e,t,n){if(e<12){return n===true?"de":"DE"}else{return n===true?"du":"DU"}},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return i.call(this,true)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return i.call(this,false)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return r})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e){if(e<4){return""}else if(e<12){return""}else if(e<17){return""}else{return""}},ordinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":if(e===1){return e+"-"}return e+"-";default:return e}},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){if(e===12){e=0}if(t==="pagi"){return e}else if(t==="siang"){return e>=11?e:e+12}else if(t==="sore"||t==="malam"){return e+12}},meridiem:function(e,t,n){if(e<11){return"pagi"}else if(e<15){return"siang"}else if(e<19){return"sore"}else{return"malam"}},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e){if(e%100===11){return true}else if(e%10===1){return false}return true}function n(e,n,i,r){var a=e+" ";switch(i){case"s":return n||r?"nokkrar sekndur":"nokkrum sekndum";case"m":return n?"mnta":"mntu";case"mm":if(t(e)){return a+(n||r?"mntur":"mntum")}else if(n){return a+"mnta"}return a+"mntu";case"hh":if(t(e)){return a+(n||r?"klukkustundir":"klukkustundum")}return a+"klukkustund";case"d":if(n){return"dagur"}return r?"dag":"degi";case"dd":if(t(e)){if(n){return a+"dagar"}return a+(r?"daga":"dgum")}else if(n){return a+"dagur"}return a+(r?"dag":"degi");case"M":if(n){return"mnuur"}return r?"mnu":"mnui";case"MM":if(t(e)){if(n){return a+"mnuir"}return a+(r?"mnui":"mnuum")}else if(n){return a+"mnuur"}return a+(r?"mnu":"mnui");case"y":return n||r?"r":"ri";case"yy":if(t(e)){return a+(n||r?"r":"rum")}return a+(n||r?"r":"ri")}}var i=e.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"Do_Lu_Ma_Me_Gi_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ja",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahm",LTS:"Ahms",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhm",LLLL:"YYYYMDAhm dddd"},meridiemParse:/|/i,isPM:function(e){return e===""},meridiem:function(e,t,n){if(e<12){return""}else{return""}},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},ordinalParse:/\d{1,2}/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){if(e===12){e=0}if(t==="enjing"){return e}else if(t==="siyang"){return e>=11?e:e+12}else if(t==="sonten"||t==="ndalu"){return e+12}},meridiem:function(e,t,n){if(e<11){return"enjing"}else if(e<15){return"siyang"}else if(e<19){return"sonten"}else{return"ndalu"}},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ka",{months:{standalone:"___________".split("_"),format:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",
lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(e){return/(|||)/.test(e)?e.replace(/$/,""):e+""},past:function(e){if(/(||||)/.test(e)){return e.replace(/(|)$/," ")}if(//.test(e)){return e.replace(/$/," ")}},s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(e){if(e===0){return e}if(e===1){return e+"-"}if(e<20||e<=100&&e%20===0||e%100===0){return"-"+e}return e+"-"},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};var n=e.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-(|)/,ordinal:function(e){var n=e%10,i=e>=100?100:null;return e+(t[e]||t[n]||t[i])},week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h m",LTS:"A h m s",L:"YYYY.MM.DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h m",LLLL:"YYYY MMMM D dddd A h m"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d",m:"",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|/,isPM:function(e){return e===""},meridiem:function(e,t,n){return e<12?"":""}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};var n=e.defineLocale("ky",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-(|||)/,ordinal:function(e){var n=e%10,i=e>=100?100:null;return e+(t[e]||t[n]||t[i])},week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n,i){var r={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?r[n][0]:r[n][1]}function n(e){var t=e.substr(0,e.indexOf(" "));if(r(t)){return"a "+e}return"an "+e}function i(e){var t=e.substr(0,e.indexOf(" "));if(r(t)){return"viru "+e}return"virun "+e}function r(e){e=parseInt(e,10);if(isNaN(e)){return false}if(e<0){return true}else if(e<10){if(4<=e&&e<=7){return true}return false}else if(e<100){var t=e%10,n=e/10;if(t===0){return r(n)}return r(t)}else if(e<1e4){while(e>=10){e=e/10}return r(e)}else{e=e/1e3;return r(e)}}var a=e.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:true,weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:n,past:i,s:"e puer Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Mint",y:t,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return a})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return e===""},meridiem:function(e,t,n){if(e<12){return""}else{return""}},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},ordinalParse:/()\d{1,2}/,ordinal:function(e){return""+e}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"};function n(e,t,n,i){if(t){return"kelios sekunds"}else{return i?"keli sekundi":"kelias sekundes"}}function i(e,t,n,i){return t?a(n)[0]:i?a(n)[1]:a(n)[2]}function r(e){return e%10===0||e>10&&e<20}function a(e){return t[e].split("_")}function s(e,t,n,s){var o=e+" ";if(e===1){return o+i(e,t,n[0],s)}else if(t){return o+(r(e)?a(n)[1]:a(n)[0])}else{if(s){return o+a(n)[1]}else{return o+(r(e)?a(n)[1]:a(n)[2])}}}var o=e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?|MMMM?(\[[^\[\]]*\]|\s+)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:n,m:i,mm:s,h:i,hh:s,d:i,dd:s,M:i,MM:s,y:i,yy:s},ordinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}});return o})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(e,t,n){if(n){return t%10===1&&t%100!==11?e[2]:e[3]}else{return t%10===1&&t%100!==11?e[0]:e[1]}}function i(e,i,r){return e+" "+n(t[r],e,i)}function r(e,i,r){return n(t[r],e,i)}function a(e,t){return t?"daas sekundes":"dam sekundm"}var s=e.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:a,m:r,mm:i,h:r,hh:i,d:r,dd:i,M:r,MM:i,y:r,yy:i},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return s})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={words:{m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return e===1?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,i){var r=t.words[i];if(i.length===1){return n?r[0]:r[1]}else{return e+" "+t.correctGrammaticalCase(e,r)}}};var n=e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:true,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){var e=["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"];return e[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mjesec",MM:t.translate,y:"godinu",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;if(e===0){return e+"-"}else if(n===0){return e+"-"}else if(n>10&&n<20){return e+"-"}else if(t===1){return e+"-"}else if(t===2){return e+"-"}else if(t===7||t===8){return e+"-"}else{return e+"-"}},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,meridiemHour:function(e,t){if(e===12){e=0}if(t===""&&e>=4||t===" "||t===""){return e+12}else{return e}},meridiem:function(e,t,n){if(e<4){return""}else if(e<12){return""}else if(e<17){return" "}else if(e<20){return""}else{return""}}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function i(e,t,n,i){var r="";if(t){switch(n){case"s":r=" ";break;case"m":r=" ";break;case"mm":r="%d ";break;case"h":r=" ";break;case"hh":r="%d ";break;case"d":r=" ";break;case"dd":r="%d ";break;case"M":r=" ";break;case"MM":r="%d ";break;case"y":r=" ";break;case"yy":r="%d ";break}}else{switch(n){case"s":r=" ";break;case"m":r=" ";break;case"mm":r="%d ";break;case"h":r=" ";break;case"hh":r="%d ";break;case"d":r=" ";break;case"dd":r="%d ";break;case"M":r=" ";break;case"MM":r="%d ";break;case"y":r=" ";break;case"yy":r="%d ";break}}return r.replace(/%d/i,e)}var r=e.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""){return e<4?e:e+12}else if(t===""){return e}else if(t===""){return e>=10?e:e+12}else if(t===""){return e+12}},meridiem:function(e,t,n){if(e<4){return""}else if(e<10){return""}else if(e<17){return""}else if(e<20){return""}else{return""}},week:{dow:0,doy:6}});return r})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){if(e===12){e=0}if(t==="pagi"){return e}else if(t==="tengahari"){return e>=11?e:e+12}else if(t==="petang"||t==="malam"){return e+12}},meridiem:function(e,t,n){if(e<11){return"pagi"}else if(e<15){return"tengahari"}else if(e<19){return"petang"}else{return"malam"}},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){if(e===12){e=0}if(t==="pagi"){return e}else if(t==="tengahari"){return e>=11?e:e+12}else if(t==="petang"||t==="malam"){return e+12}},meridiem:function(e,t,n){if(e<11){return"pagi"}else if(e<15){return"tengahari"}else if(e<19){return"petang"}else{return"malam"}},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var i=e.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},week:{dow:1,doy:4}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:true,weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var i=e.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""){return e<4?e:e+12}else if(t===""){return e}else if(t===""){return e>=10?e:e+12}else if(t===""){return e+12}},meridiem:function(e,t,n){if(e<3){return""}else if(e<12){return""}else if(e<16){return""}else if(e<20){return""}else{return""}},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");var i=e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){if(/-MMM-/.test(i)){return n[e.month()]}else{return t[e.month()]}},monthsParseExact:true,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(e===1||e===8||e>=20?"ste":"de")},week:{dow:1,doy:4}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var i=e.defineLocale("pa-in",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""){return e<4?e:e+12}else if(t===""){return e}else if(t===""){return e>=10?e:e+12}else if(t===""){return e+12}},meridiem:function(e,t,n){if(e<4){return""}else if(e<10){return""}else if(e<17){return""}else if(e<20){return""}else{return""}},week:{dow:0,doy:6}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");function i(e){return e%10<5&&e%10>1&&~~(e/10)%10!==1}function r(e,t,n){var r=e+" ";switch(n){case"m":return t?"minuta":"minut";case"mm":return r+(i(e)?"minuty":"minut");case"h":return t?"godzina":"godzin";case"hh":return r+(i(e)?"godziny":"godzin");case"MM":return r+(i(e)?"miesice":"miesicy");case"yy":
return r+(i(e)?"lata":"lat")}}var a=e.defineLocale("pl",{months:function(e,i){if(i===""){return"("+n[e.month()]+"|"+t[e.month()]+")"}else if(/D MMMM/.test(i)){return n[e.month()]}else{return t[e.month()]}},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"nie_pon_wt_r_czw_pt_sb".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:r,mm:r,h:r,hh:r,d:"1 dzie",dd:"%d dni",M:"miesic",MM:r,y:"rok",yy:r},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return a})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("pt",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Tera-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Dom_2_3_4_5_6_Sb".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return this.day()===0||this.day()===6?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Dom_2_3_4_5_6_Sb".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return this.day()===0||this.day()===6?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrs",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d"});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n){var i={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},r=" ";if(e%100>=20||e>=100&&e%100===0){r=" de "}return e+r+i[n]}var n=e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:true,weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",m:"un minut",mm:t,h:"o or",hh:t,d:"o zi",dd:t,M:"o lun",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,i){var r={mm:n?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"};if(i==="m"){return n?"":""}else{return e+" "+t(r[i],+e)}}var i=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];var r=e.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:i,longMonthsParse:i,shortMonthsParse:i,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(e){if(e.week()!==this.week()){switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}}else{if(this.day()===2){return"[] dddd [] LT"}else{return"[] dddd [] LT"}}},lastWeek:function(e){if(e.week()!==this.week()){switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}}else{if(this.day()===2){return"[] dddd [] LT"}else{return"[] dddd [] LT"}}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:"",hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/i,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){if(e<4){return""}else if(e<12){return""}else if(e<17){return""}else{return""}},ordinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-";case"D":return e+"-";case"w":case"W":return e+"-";default:return e}},week:{dow:1,doy:7}});return r})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},ordinalParse:/\d{1,2} /,ordinal:function(e){return e+" "},meridiemParse:/ | |.|../,isPM:function(e){return e===".."||e===" "},meridiem:function(e,t,n){if(e>11){return n?"..":" "}else{return n?"..":" "}}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),n="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");function i(e){return e>1&&e<5}function r(e,t,n,r){var a=e+" ";switch(n){case"s":return t||r?"pr seknd":"pr sekundami";case"m":return t?"minta":r?"mintu":"mintou";case"mm":if(t||r){return a+(i(e)?"minty":"mint")}else{return a+"mintami"}break;case"h":return t?"hodina":r?"hodinu":"hodinou";case"hh":if(t||r){return a+(i(e)?"hodiny":"hodn")}else{return a+"hodinami"}break;case"d":return t||r?"de":"dom";case"dd":if(t||r){return a+(i(e)?"dni":"dn")}else{return a+"dami"}break;case"M":return t||r?"mesiac":"mesiacom";case"MM":if(t||r){return a+(i(e)?"mesiace":"mesiacov")}else{return a+"mesiacmi"}break;case"y":return t||r?"rok":"rokom";case"yy":if(t||r){return a+(i(e)?"roky":"rokov")}else{return a+"rokmi"}break}}var a=e.defineLocale("sk",{months:t,monthsShort:n,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return a})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n,i){var r=e+" ";switch(n){case"s":return t||i?"nekaj sekund":"nekaj sekundami";case"m":return t?"ena minuta":"eno minuto";case"mm":if(e===1){r+=t?"minuta":"minuto"}else if(e===2){r+=t||i?"minuti":"minutama"}else if(e<5){r+=t||i?"minute":"minutami"}else{r+=t||i?"minut":"minutami"}return r;case"h":return t?"ena ura":"eno uro";case"hh":if(e===1){r+=t?"ura":"uro"}else if(e===2){r+=t||i?"uri":"urama"}else if(e<5){r+=t||i?"ure":"urami"}else{r+=t||i?"ur":"urami"}return r;case"d":return t||i?"en dan":"enim dnem";case"dd":if(e===1){r+=t||i?"dan":"dnem"}else if(e===2){r+=t||i?"dni":"dnevoma"}else{r+=t||i?"dni":"dnevi"}return r;case"M":return t||i?"en mesec":"enim mesecem";case"MM":if(e===1){r+=t||i?"mesec":"mesecem"}else if(e===2){r+=t||i?"meseca":"mesecema"}else if(e<5){r+=t||i?"mesece":"meseci"}else{r+=t||i?"mesecev":"meseci"}return r;case"y":return t||i?"eno leto":"enim letom";case"yy":if(e===1){r+=t||i?"leto":"letom"}else if(e===2){r+=t||i?"leti":"letoma"}else if(e<5){r+=t||i?"leta":"leti"}else{r+=t||i?"let":"leti"}return r}}var n=e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:true,weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),weekdaysParseExact:true,meridiemParse:/PD|MD/,isPM:function(e){return e.charAt(0)==="M"},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return e===1?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,i){var r=t.words[i];if(i.length===1){return n?r[0]:r[1]}else{return e+" "+t.correctGrammaticalCase(e,r)}}};var n=e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:true,weekdays:"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){var e=["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"];return e[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mesec",MM:t.translate,y:"godinu",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={words:{m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(e,t){return e===1?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,i){var r=t.words[i];if(i.length===1){return n?r[0]:r[1]}else{return e+" "+t.correctGrammaticalCase(e,r)}}};var n=e.defineLocale("sr-cyrl",{months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){var e=["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"];return e[this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"",dd:t.translate,M:"",MM:t.translate,y:"",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,n){if(e<11){return"ekuseni"}else if(e<15){return"emini"}else if(e<19){return"entsambama"}else{return"ebusuku"}},meridiemHour:function(e,t){if(e===12){e=0}if(t==="ekuseni"){return e}else if(t==="emini"){return e>=11?e:e+12}else if(t==="entsambama"||t==="ebusuku"){if(e===0){return 0}return e+12}},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"e":t===1?"a":t===2?"a":t===3?"e":"e";return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var i=e.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:function(e){return e+""},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||||/,meridiem:function(e,t,n){if(e<2){return" "}else if(e<6){return" "}else if(e<10){return" "}else if(e<14){return" "}else if(e<18){return" "}else if(e<22){return" "}else{return" "}},meridiemHour:function(e,t){if(e===12){e=0}if(t===""){return e<2?e:e+12}else if(t===""||t===""){return e}else if(t===""){return e>=10?e:e+12}else{return e+12}},week:{dow:0,doy:6}});return i})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""){return e<4?e:e+12}else if(t===""){return e}else if(t===""){return e>=10?e:e+12}else if(t===""){return e+12}},meridiem:function(e,t,n){if(e<4){return""}else if(e<10){return""}else if(e<17){return""}else if(e<20){return""}else{return""}},week:{dow:0,doy:6}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("th",{months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H  m ",LTS:"H  m  s ",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H  m ",LLLL:"dddd D MMMM YYYY  H  m "},meridiemParse:/|/,isPM:function(e){return e===""},meridiem:function(e,t,n){if(e<12){return""}else{return""}},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(e){var t=e;t=e.indexOf("jaj")!==-1?t.slice(0,-3)+"leS":e.indexOf("jar")!==-1?t.slice(0,-3)+"waQ":e.indexOf("DIS")!==-1?t.slice(0,-3)+"nem":t+" pIq";return t}function i(e){var t=e;t=e.indexOf("jaj")!==-1?t.slice(0,-3)+"Hu":e.indexOf("jar")!==-1?t.slice(0,-3)+"wen":e.indexOf("DIS")!==-1?t.slice(0,-3)+"ben":t+" ret";return t}function r(e,t,n,i){var r=a(e);switch(n){case"mm":return r+" tup";case"hh":return r+" rep";case"dd":return r+" jaj";case"MM":return r+" jar";case"yy":return r+" DIS"}}function a(e){var n=Math.floor(e%1e3/100),i=Math.floor(e%100/10),r=e%10,a="";if(n>0){a+=t[n]+"vatlh"}if(i>0){a+=(a!==""?" ":"")+t[i]+"maH"}if(r>0){a+=(a!==""?" ":"")+t[r]}return a===""?"pagh":a}var s=e.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),monthsParseExact:true,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",
LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:n,past:i,s:"puS lup",m:"wa tup",mm:r,h:"wa rep",hh:r,d:"wa jaj",dd:r,M:"wa jar",MM:r,y:"wa DIS",yy:r},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return s})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};var n=e.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinalParse:/\d{1,2}'(inci|nci|nc|nc|uncu|nc)/,ordinal:function(e){if(e===0){return e+"'nc"}var n=e%10,i=e%100-n,r=e>=100?100:null;return e+(t[n]||t[i]||t[r])},week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,n){if(e>11){return n?"d'o":"D'O"}else{return n?"d'a":"D'A"}},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});function n(e,t,n,i){var r={s:["viensas secunds","'iensas secunds"],m:["'n mut","'iens mut"],mm:[e+" muts",""+e+" muts"],h:["'n ora","'iensa ora"],hh:[e+" oras",""+e+" oras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",""+e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",""+e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",""+e+" ars"]};return i?r[n][0]:t?r[n][0]:r[n][1]}return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,i){var r={mm:n?"__":"__",hh:n?"__":"__",dd:"__",MM:"__",yy:"__"};if(i==="m"){return n?"":""}else if(i==="h"){return n?"":""}else{return e+" "+t(r[i],+e)}}function i(e,t){var n={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")},i=/(\[[]\]) ?dddd/.test(t)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(t)?"genitive":"nominative";return n[i][e.day()]}function r(e){return function(){return e+""+(this.hours()===11?"":"")+"] LT"}}var a=e.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:i,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:r("[ "),nextDay:r("[ "),lastDay:r("[ "),nextWeek:r("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return r("[] dddd [").call(this);case 1:case 2:case 4:return r("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:"",hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){if(e<4){return""}else if(e<12){return""}else if(e<17){return""}else{return""}},ordinalParse:/\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}});return a})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:true,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:true,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,n){if(e<12){return n?"sa":"SA"}else{return n?"ch":"CH"}},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},ordinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("x-pseudo",{months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),monthsParseExact:true,weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~d~ t] LT",nextDay:"[T~m~rr~w t] LT",nextWeek:"dddd [t] LT",lastDay:"[~st~rd~ t] LT",lastWeek:"[L~st] dddd [t] LT",sameElse:"L"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"},ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYY-MM-DD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYY-MM-DD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"},meridiemParse:/|||||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""||t===""||t===""){return e}else if(t===""||t===""){return e+12}else{return e>=11?e:e+12}},meridiem:function(e,t,n){var i=e*100+t;if(i<600){return""}else if(i<900){return""}else if(i<1130){return""}else if(i<1230){return""}else if(i<1800){return""}else{return""}},calendar:{sameDay:function(){return this.minutes()===0?"[]Ah[]":"[]LT"},nextDay:function(){return this.minutes()===0?"[]Ah[]":"[]LT"},lastDay:function(){return this.minutes()===0?"[]Ah[]":"[]LT"},nextWeek:function(){var t,n;t=e().startOf("week");n=this.diff(t,"days")>=7?"[]":"[]";return this.minutes()===0?n+"dddAh":n+"dddAhmm"},lastWeek:function(){var t,n;t=e().startOf("week");n=this.unix()<t.unix()?"[]":"[]";return this.minutes()===0?n+"dddAh":n+"dddAhmm"},sameElse:"LL"},ordinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(60)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"},meridiemParse:/|||||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""||t===""||t===""){return e}else if(t===""){return e>=11?e:e+12}else if(t===""||t===""){return e+12}},meridiem:function(e,t,n){var i=e*100+t;if(i<600){return""}else if(i<900){return""}else if(i<1130){return""}else if(i<1230){return""}else if(i<1800){return""}else{return""}},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}});return t})},function(e,t,n){var i,r;(function(n,a){(function(){var s={};var o,l;o=this;if(o!=null){l=o.async}s.noConflict=function(){o.async=l;return s};function u(e){var t=false;return function(){if(t)throw new Error("Callback was already called.");t=true;e.apply(o,arguments)}}var c=Object.prototype.toString;var d=Array.isArray||function(e){return c.call(e)==="[object Array]"};var f=function(e,t){if(e.forEach){return e.forEach(t)}for(var n=0;n<e.length;n+=1){t(e[n],n,e)}};var h=function(e,t){if(e.map){return e.map(t)}var n=[];f(e,function(e,i,r){n.push(t(e,i,r))});return n};var p=function(e,t,n){if(e.reduce){return e.reduce(t,n)}f(e,function(e,i,r){n=t(n,e,i,r)});return n};var m=function(e){if(Object.keys){return Object.keys(e)}var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(n)}}return t};if(typeof n==="undefined"||!n.nextTick){if(typeof a==="function"){s.nextTick=function(e){a(e)};s.setImmediate=s.nextTick}else{s.nextTick=function(e){setTimeout(e,0)};s.setImmediate=s.nextTick}}else{s.nextTick=n.nextTick;if(typeof a!=="undefined"){s.setImmediate=function(e){a(e)}}else{s.setImmediate=s.nextTick}}s.each=function(e,t,n){n=n||function(){};if(!e.length){return n()}var i=0;f(e,function(e){t(e,u(r))});function r(t){if(t){n(t);n=function(){}}else{i+=1;if(i>=e.length){n()}}}};s.forEach=s.each;s.eachSeries=function(e,t,n){n=n||function(){};if(!e.length){return n()}var i=0;var r=function(){t(e[i],function(t){if(t){n(t);n=function(){}}else{i+=1;if(i>=e.length){n()}else{r()}}})};r()};s.forEachSeries=s.eachSeries;s.eachLimit=function(e,t,n,i){var r=_(t);r.apply(null,[e,n,i])};s.forEachLimit=s.eachLimit;var _=function(e){return function(t,n,i){i=i||function(){};if(!t.length||e<=0){return i()}var r=0;var a=0;var s=0;(function o(){if(r>=t.length){return i()}while(s<e&&a<t.length){a+=1;s+=1;n(t[a-1],function(e){if(e){i(e);i=function(){}}else{r+=1;s-=1;if(r>=t.length){i()}else{o()}}})}})()}};var g=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.each].concat(t))}};var v=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[_(e)].concat(n))}};var y=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.eachSeries].concat(t))}};var b=function(e,t,n,i){t=h(t,function(e,t){return{index:t,value:e}});if(!i){e(t,function(e,t){n(e.value,function(e){t(e)})})}else{var r=[];e(t,function(e,t){n(e.value,function(n,i){r[e.index]=i;t(n)})},function(e){i(e,r)})}};s.map=g(b);s.mapSeries=y(b);s.mapLimit=function(e,t,n,i){return x(t)(e,n,i)};var x=function(e){return v(e,b)};s.reduce=function(e,t,n,i){s.eachSeries(e,function(e,i){n(t,e,function(e,n){t=n;i(e)})},function(e){i(e,t)})};s.inject=s.reduce;s.foldl=s.reduce;s.reduceRight=function(e,t,n,i){var r=h(e,function(e){return e}).reverse();s.reduce(r,t,n,i)};s.foldr=s.reduceRight;var w=function(e,t,n,i){var r=[];t=h(t,function(e,t){return{index:t,value:e}});e(t,function(e,t){n(e.value,function(n){if(n){r.push(e)}t()})},function(e){i(h(r.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.filter=g(w);s.filterSeries=y(w);s.select=s.filter;s.selectSeries=s.filterSeries;var L=function(e,t,n,i){var r=[];t=h(t,function(e,t){return{index:t,value:e}});e(t,function(e,t){n(e.value,function(n){if(!n){r.push(e)}t()})},function(e){i(h(r.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.reject=g(L);s.rejectSeries=y(L);var S=function(e,t,n,i){e(t,function(e,t){n(e,function(n){if(n){i(e);i=function(){}}else{t()}})},function(e){i()})};s.detect=g(S);s.detectSeries=y(S);s.some=function(e,t,n){s.each(e,function(e,i){t(e,function(e){if(e){n(true);n=function(){}}i()})},function(e){n(false)})};s.any=s.some;s.every=function(e,t,n){s.each(e,function(e,i){t(e,function(e){if(!e){n(false);n=function(){}}i()})},function(e){n(true)})};s.all=s.every;s.sortBy=function(e,t,n){s.map(e,function(e,n){t(e,function(t,i){if(t){n(t)}else{n(null,{value:e,criteria:i})}})},function(e,t){if(e){return n(e)}else{var i=function(e,t){var n=e.criteria,i=t.criteria;return n<i?-1:n>i?1:0};n(null,h(t.sort(i),function(e){return e.value}))}})};s.auto=function(e,t){t=t||function(){};var n=m(e);var i=n.length;if(!i){return t()}var r={};var a=[];var o=function(e){a.unshift(e)};var l=function(e){for(var t=0;t<a.length;t+=1){if(a[t]===e){a.splice(t,1);return}}};var u=function(){i--;f(a.slice(0),function(e){e()})};o(function(){if(!i){var e=t;t=function(){};e(null,r)}});f(n,function(n){var i=d(e[n])?e[n]:[e[n]];var a=function(e){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1){i=i[0]}if(e){var a={};f(m(r),function(e){a[e]=r[e]});a[n]=i;t(e,a);t=function(){}}else{r[n]=i;s.setImmediate(u)}};var c=i.slice(0,Math.abs(i.length-1))||[];var h=function(){return p(c,function(e,t){return e&&r.hasOwnProperty(t)},true)&&!r.hasOwnProperty(n)};if(h()){i[i.length-1](a,r)}else{var _=function(){if(h()){l(_);i[i.length-1](a,r)}};o(_)}})};s.retry=function(e,t,n){var i=5;var r=[];if(typeof e==="function"){n=t;t=e;e=i}e=parseInt(e,10)||i;var a=function(i,a){var o=function(e,t){return function(n){e(function(e,i){n(!e||t,{err:e,result:i})},a)}};while(e){r.push(o(t,!(e-=1)))}s.series(r,function(e,t){t=t[t.length-1];(i||n)(t.err,t.result)})};return n?a():a};s.waterfall=function(e,t){t=t||function(){};if(!d(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length){return t()}var i=function(e){return function(n){if(n){t.apply(null,arguments);t=function(){}}else{var r=Array.prototype.slice.call(arguments,1);var a=e.next();if(a){r.push(i(a))}else{r.push(t)}s.setImmediate(function(){e.apply(null,r)})}}};i(s.iterator(e))()};var E=function(e,t,n){n=n||function(){};if(d(t)){e.map(t,function(e,t){if(e){e(function(e){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1){n=n[0]}t.call(null,e,n)})}},n)}else{var i={};e.each(m(t),function(e,n){t[e](function(t){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1){r=r[0]}i[e]=r;n(t)})},function(e){n(e,i)})}};s.parallel=function(e,t){E({map:s.map,each:s.each},e,t)};s.parallelLimit=function(e,t,n){E({map:x(t),each:_(t)},e,n)};s.series=function(e,t){t=t||function(){};if(d(e)){s.mapSeries(e,function(e,t){if(e){e(function(e){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1){n=n[0]}t.call(null,e,n)})}},t)}else{var n={};s.eachSeries(m(e),function(t,i){e[t](function(e){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1){r=r[0]}n[t]=r;i(e)})},function(e){t(e,n)})}};s.iterator=function(e){var t=function(n){var i=function(){if(e.length){e[n].apply(null,arguments)}return i.next()};i.next=function(){return n<e.length-1?t(n+1):null};return i};return t(0)};s.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var k=function(e,t,n,i){var r=[];e(t,function(e,t){n(e,function(e,n){r=r.concat(n||[]);t(e)})},function(e){i(e,r)})};s.concat=g(k);s.concatSeries=y(k);s.whilst=function(e,t,n){if(e()){t(function(i){if(i){return n(i)}s.whilst(e,t,n)})}else{n()}};s.doWhilst=function(e,t,n){e(function(i){if(i){return n(i)}var r=Array.prototype.slice.call(arguments,1);if(t.apply(null,r)){s.doWhilst(e,t,n)}else{n()}})};s.until=function(e,t,n){if(!e()){t(function(i){if(i){return n(i)}s.until(e,t,n)})}else{n()}};s.doUntil=function(e,t,n){e(function(i){if(i){return n(i)}var r=Array.prototype.slice.call(arguments,1);if(!t.apply(null,r)){s.doUntil(e,t,n)}else{n()}})};s.queue=function(e,t){if(t===undefined){t=1}function n(e,t,n,i){if(!e.started){e.started=true}if(!d(t)){t=[t]}if(t.length==0){return s.setImmediate(function(){if(e.drain){e.drain()}})}f(t,function(t){var r={data:t,callback:typeof i==="function"?i:null};if(n){e.tasks.unshift(r)}else{e.tasks.push(r)}if(e.saturated&&e.tasks.length===e.concurrency){e.saturated()}s.setImmediate(e.process)})}var i=0;var r={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:false,paused:false,push:function(e,t){n(r,e,false,t)},kill:function(){r.drain=null;r.tasks=[]},unshift:function(e,t){n(r,e,true,t)},process:function(){if(!r.paused&&i<r.concurrency&&r.tasks.length){var t=r.tasks.shift();if(r.empty&&r.tasks.length===0){r.empty()}i+=1;var n=function(){i-=1;if(t.callback){t.callback.apply(t,arguments)}if(r.drain&&r.tasks.length+i===0){r.drain()}r.process()};var a=u(n);e(t.data,a)}},length:function(){return r.tasks.length},running:function(){return i},idle:function(){return r.tasks.length+i===0},pause:function(){if(r.paused===true){return}r.paused=true;r.process()},resume:function(){if(r.paused===false){return}r.paused=false;r.process()}};return r};s.priorityQueue=function(e,t){function n(e,t){return e.priority-t.priority}function i(e,t,n){var i=-1,r=e.length-1;while(i<r){var a=i+(r-i+1>>>1);if(n(t,e[a])>=0){i=a}else{r=a-1}}return i}function r(e,t,r,a){if(!e.started){e.started=true}if(!d(t)){t=[t]}if(t.length==0){return s.setImmediate(function(){if(e.drain){e.drain()}})}f(t,function(t){var o={data:t,priority:r,callback:typeof a==="function"?a:null};e.tasks.splice(i(e.tasks,o,n)+1,0,o);if(e.saturated&&e.tasks.length===e.concurrency){e.saturated()}s.setImmediate(e.process)})}var a=s.queue(e,t);a.push=function(e,t,n){r(a,e,t,n)};delete a.unshift;return a};s.cargo=function(e,t){var n=false,i=[];var r={tasks:i,payload:t,saturated:null,empty:null,drain:null,drained:true,push:function(e,n){if(!d(e)){e=[e]}f(e,function(e){i.push({data:e,callback:typeof n==="function"?n:null});r.drained=false;if(r.saturated&&i.length===t){r.saturated()}});s.setImmediate(r.process)},process:function a(){if(n)return;if(i.length===0){if(r.drain&&!r.drained)r.drain();r.drained=true;return}var s=typeof t==="number"?i.splice(0,t):i.splice(0,i.length);var o=h(s,function(e){return e.data});if(r.empty)r.empty();n=true;e(o,function(){n=false;var e=arguments;f(s,function(t){if(t.callback){t.callback.apply(null,e)}});a()})},length:function(){return i.length},running:function(){return n}};return r};var T=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(t){if(console.error){console.error(t)}}else if(console[e]){f(n,function(t){console[e](t)})}}}]))}};s.log=T("log");s.dir=T("dir");s.memoize=function(e,t){var n={};var i={};t=t||function(e){return e};var r=function(){var r=Array.prototype.slice.call(arguments);var a=r.pop();var o=t.apply(null,r);if(o in n){s.nextTick(function(){a.apply(null,n[o])})}else if(o in i){i[o].push(a)}else{i[o]=[a];e.apply(null,r.concat([function(){n[o]=arguments;var e=i[o];delete i[o];for(var t=0,r=e.length;t<r;t++){e[t].apply(null,arguments)}}]))}};r.memo=n;r.unmemoized=e;return r};s.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}};s.times=function(e,t,n){var i=[];for(var r=0;r<e;r++){i.push(r)}return s.map(i,t,n)};s.timesSeries=function(e,t,n){var i=[];for(var r=0;r<e;r++){i.push(r)}return s.mapSeries(i,t,n)};s.seq=function(){var e=arguments;return function(){var t=this;var n=Array.prototype.slice.call(arguments);var i=n.pop();s.reduce(e,n,function(e,n,i){n.apply(t,e.concat([function(){var e=arguments[0];var t=Array.prototype.slice.call(arguments,1);i(e,t)}]))},function(e,n){i.apply(t,[e].concat(n))})}};s.compose=function(){return s.seq.apply(null,Array.prototype.reverse.call(arguments))};var M=function(e,t){var n=function(){var n=this;var i=Array.prototype.slice.call(arguments);var r=i.pop();return e(t,function(e,t){e.apply(n,i.concat([t]))},r)};if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return n.apply(this,i)}else{return n}};s.applyEach=g(M);s.applyEachSeries=y(M);s.forever=function(e,t){function n(i){if(i){if(t){return t(i)}throw i}e(n)}n()};if(typeof e!=="undefined"&&e.exports){e.exports=s}else if(true){!(i=[],r=function(){return s}.apply(t,i),r!==undefined&&(e.exports=r))}else{o.async=s}})()}).call(t,n(58),n(59).setImmediate)},function(e,t,n){var i,r;(function(a){(function(a){var s={},o=a.document,l="localStorage",u;s.disabled=false;s.set=function(e,t){};s.get=function(e){};s.remove=function(e){};s.clear=function(){};s.transact=function(e,t,n){var i=s.get(e);if(n==null){n=t;t=null}if(typeof i=="undefined"){i=t||{}}n(i);s.set(e,i)};s.getAll=function(){};s.forEach=function(){};s.serialize=function(e){return JSON.stringify(e)};s.deserialize=function(e){if(typeof e!="string"){return undefined}try{return JSON.parse(e)}catch(t){return e||undefined}};function c(){try{return l in a&&a[l]}catch(e){return false}}if(c()){u=a[l];s.set=function(e,t){u.setItem(e,s.serialize(t));return t};s.get=function(e){return s.deserialize(u.getItem(e))};s.remove=function(e){u.removeItem(e)};s.clear=function(){u.clear()};s.getAll=function(){var e={};s.forEach(function(t,n){e[t]=n});return e};s.forEach=function(e){for(var t=0;t<u.length;t++){var n=u.key(t);e(n,s.get(n))}}}else if(o.documentElement.addBehavior){var d,f;try{f=new ActiveXObject("htmlfile");f.open();f.write("<s"+"cript>document.w=window</s"+'cript><iframe src="/favicon.ico"></iframe>');f.close();d=f.w.frames[0].document;u=d.createElement("div")}catch(h){u=o.createElement("div");d=o.body}function p(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(u);d.appendChild(u);u.addBehavior("#default#userData");u.load(l);var n=e.apply(s,t);d.removeChild(u);return n}}var m=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function _(e){return e.replace(m,"___")}s.set=p(function(e,t,n){t=_(t);if(n===undefined){return s.remove(t)}e.setAttribute(t,s.serialize(n));e.save(l);return n});s.get=p(function(e,t){t=_(t);return s.deserialize(e.getAttribute(t))});s.remove=p(function(e,t){t=_(t);e.removeAttribute(t);e.save(l)});s.clear=p(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(l);for(var n=0,i;i=t[n];n++){e.removeAttribute(i.name)}e.save(l)});s.getAll=p(function(e){var t={};s.forEach(function(e,n){t[e]=n});return t});s.forEach=p(function(e,t){var n=e.XMLDocument.documentElement.attributes;for(var i=0,r;r=n[i];++i){var a=_(r.name);t(ret[r.name],s.deserialize(e.getAttribute(a)))}})}try{var g="__storejs__";s.set(g,g);if(s.get(g)!=g){s.disabled=true}s.remove(g)}catch(h){s.disabled=true}s.enabled=!s.disabled;if(typeof e!="undefined"&&e.exports){e.exports=s}else if(true){!(i=s,r=typeof i==="function"?i.call(t,n,t,e):i,r!==undefined&&(e.exports=r))}else{a.store=s}s.cut=s.remove;s.deserialize=function(e){if(typeof e!=="string"){return undefined}try{return JSON.parse(e)}catch(t){return undefined}};s.has=function(e){return window.localStorage.getItem(e)!==null};a.stash=s;if(s.enabled)return;u={getItem:function(e){return this[e]},setItem:function(e,t){this[e]=String(t)},removeItem:function(e){delete this[e]},clear:function(){for(var e in this){if(typeof this[e]!=="function"){delete this[e]}}}}})(this.window||a);e.exports=stash}).call(t,function(){return this}())},function(e,t){(function(){if(this.JpegMeta){throw Error("Library included multiple times")}var e={};e.parseNum=function t(e,n,i,r){var a;var s;var o=e===">";if(i===undefined)i=0;if(r===undefined)r=n.length-i;for(o?a=i:a=i+r-1;o?a<i+r:a>=i;o?a++:a--){s<<=8;s+=n.charCodeAt(a)}return s};e.parseSnum=function n(e,t,i,r){var a;var s;var o;var l=e===">";if(i===undefined)i=0;if(r===undefined)r=t.length-i;for(l?a=i:a=i+r-1;l?a<i+r:a>=i;l?a++:a--){if(o===undefined){o=(t.charCodeAt(a)&128)===128}s<<=8;s+=o?~t.charCodeAt(a)&255:t.charCodeAt(a)}if(o){s+=1;s*=-1}return s};e.Rational=function i(e,t){this.num=e;this.den=t||1;return this};e.Rational.prototype.toString=function r(){if(this.num===0){return""+this.num}if(this.den===1){return""+this.num}if(this.num===1){return this.num+" / "+this.den}return this.num/this.den};e.Rational.prototype.asFloat=function a(){return this.num/this.den};e.MetaGroup=function s(e,t){this.fieldName=e;this.description=t;this.metaProps={};return this};e.MetaGroup.prototype._addProperty=function o(t,n,i){var r=new e.MetaProp(t,n,i);this[r.fieldName]=r;this.metaProps[r.fieldName]=r};e.MetaGroup.prototype.toString=function l(){return"[MetaGroup "+this.description+"]"};e.MetaProp=function u(e,t,n){this.fieldName=e;this.description=t;this.value=n;return this};e.MetaProp.prototype.toString=function c(){return""+this.value};this.JpegMeta=e;this.JpegMeta.JpegFile=function d(t,n){var i=this._SOS;this.metaGroups={};this._binary_data=t;this.filename=n;var r=0;var a=0;var s;var o;var l;var u;var c;var d;var f;if(this._binary_data.slice(0,2)!==this._SOI_MARKER){throw new Error("Doesn't look like a JPEG file. First two bytes are "+this._binary_data.charCodeAt(0)+","+this._binary_data.charCodeAt(1)+".")}r+=2;while(r<this._binary_data.length){s=this._binary_data.charCodeAt(r++);o=this._binary_data.charCodeAt(r++);

a=r;if(s!=this._DELIM){break}if(o===i){break}c=e.parseNum(">",this._binary_data,r,2);r+=c;while(r<this._binary_data.length){s=this._binary_data.charCodeAt(r++);if(s==this._DELIM){l=this._binary_data.charCodeAt(r++);if(l!=0){r-=2;break}}}u=r-a;if(this._markers[o]){d=this._markers[o][0];f=this._markers[o][1]}else{d="UNKN";f=undefined}if(f){this[f](o,a+2)}}if(this.general===undefined){throw Error("Invalid JPEG file.")}return this};this.JpegMeta.JpegFile.prototype.toString=function(){return"[JpegFile "+this.filename+" "+this.general.type+" "+this.general.pixelWidth+"x"+this.general.pixelHeight+" Depth: "+this.general.depth+"]"};this.JpegMeta.JpegFile.prototype._SOI_MARKER="";this.JpegMeta.JpegFile.prototype._DELIM=255;this.JpegMeta.JpegFile.prototype._EOI=217;this.JpegMeta.JpegFile.prototype._SOS=218;this.JpegMeta.JpegFile.prototype._sofHandler=function f(t,n){if(this.general!==undefined){throw Error("Unexpected multiple-frame image")}this._addMetaGroup("general","General");this.general._addProperty("depth","Depth",e.parseNum(">",this._binary_data,n,1));this.general._addProperty("pixelHeight","Pixel Height",e.parseNum(">",this._binary_data,n+1,2));this.general._addProperty("pixelWidth","Pixel Width",e.parseNum(">",this._binary_data,n+3,2));this.general._addProperty("type","Type",this._markers[t][2])};this.JpegMeta.JpegFile.prototype._JFIF_IDENT="JFIF\x00";this.JpegMeta.JpegFile.prototype._JFXX_IDENT="JFXX\x00";this.JpegMeta.JpegFile.prototype._EXIF_IDENT="Exif\x00";this.JpegMeta.JpegFile.prototype._types={1:["BYTE",1],2:["ASCII",1],3:["SHORT",2],4:["LONG",4],5:["RATIONAL",8],6:["SBYTE",1],7:["UNDEFINED",1],8:["SSHORT",2],9:["SLONG",4],10:["SRATIONAL",8],11:["FLOAT",4],12:["DOUBLE",8]};this.JpegMeta.JpegFile.prototype._tifftags={256:["Image width","ImageWidth"],257:["Image height","ImageLength"],258:["Number of bits per component","BitsPerSample"],259:["Compression scheme","Compression",{1:"uncompressed",6:"JPEG compression"}],262:["Pixel composition","PhotmetricInerpretation",{2:"RGB",6:"YCbCr"}],274:["Orientation of image","Orientation",{1:"Normal",2:"Reverse?",3:"Upside-down",4:"Upside-down Reverse",5:"90 degree CW",6:"90 degree CW reverse",7:"90 degree CCW",8:"90 degree CCW reverse"}],277:["Number of components","SamplesPerPixel"],284:["Image data arrangement","PlanarConfiguration",{1:"chunky format",2:"planar format"}],530:["Subsampling ratio of Y to C","YCbCrSubSampling"],531:["Y and C positioning","YCbCrPositioning",{1:"centered",2:"co-sited"}],282:["X Resolution","XResolution"],283:["Y Resolution","YResolution"],296:["Resolution Unit","ResolutionUnit",{2:"inches",3:"centimeters"}],273:["Image data location","StripOffsets"],278:["Number of rows per strip","RowsPerStrip"],279:["Bytes per compressed strip","StripByteCounts"],513:["Offset to JPEG SOI","JPEGInterchangeFormat"],514:["Bytes of JPEG Data","JPEGInterchangeFormatLength"],301:["Transfer function","TransferFunction"],318:["White point chromaticity","WhitePoint"],319:["Chromaticities of primaries","PrimaryChromaticities"],529:["Color space transformation matrix coefficients","YCbCrCoefficients"],532:["Pair of black and white reference values","ReferenceBlackWhite"],306:["Date and time","DateTime"],270:["Image title","ImageDescription"],271:["Make","Make"],272:["Model","Model"],305:["Software","Software"],315:["Person who created the image","Artist"],316:["Host Computer","HostComputer"],33432:["Copyright holder","Copyright"],34665:["Exif tag","ExifIfdPointer"],34853:["GPS tag","GPSInfoIfdPointer"]};this.JpegMeta.JpegFile.prototype._exiftags={36864:["Exif Version","ExifVersion"],40960:["FlashPix Version","FlashpixVersion"],40961:["Color Space","ColorSpace"],37121:["Meaning of each component","ComponentsConfiguration"],37122:["Compressed Bits Per Pixel","CompressedBitsPerPixel"],40962:["Pixel X Dimension","PixelXDimension"],40963:["Pixel Y Dimension","PixelYDimension"],37500:["Manufacturer notes","MakerNote"],37510:["User comments","UserComment"],40964:["Related audio file","RelatedSoundFile"],36867:["Date Time Original","DateTimeOriginal"],36868:["Date Time Digitized","DateTimeDigitized"],37520:["DateTime subseconds","SubSecTime"],37521:["DateTimeOriginal subseconds","SubSecTimeOriginal"],37522:["DateTimeDigitized subseconds","SubSecTimeDigitized"],33434:["Exposure time","ExposureTime"],33437:["FNumber","FNumber"],34850:["Exposure program","ExposureProgram"],34852:["Spectral sensitivity","SpectralSensitivity"],34855:["ISO Speed Ratings","ISOSpeedRatings"],34856:["Optoelectric coefficient","OECF"],37377:["Shutter Speed","ShutterSpeedValue"],37378:["Aperture Value","ApertureValue"],37379:["Brightness","BrightnessValue"],37380:["Exposure Bias Value","ExposureBiasValue"],37381:["Max Aperture Value","MaxApertureValue"],37382:["Subject Distance","SubjectDistance"],37383:["Metering Mode","MeteringMode"],37384:["Light Source","LightSource"],37385:["Flash","Flash"],37386:["Focal Length","FocalLength"],37396:["Subject Area","SubjectArea"],41483:["Flash Energy","FlashEnergy"],41484:["Spatial Frequency Response","SpatialFrequencyResponse"],41486:["Focal Plane X Resolution","FocalPlaneXResolution"],41487:["Focal Plane Y Resolution","FocalPlaneYResolution"],41488:["Focal Plane Resolution Unit","FocalPlaneResolutionUnit"],41492:["Subject Location","SubjectLocation"],41493:["Exposure Index","ExposureIndex"],41495:["Sensing Method","SensingMethod"],41728:["File Source","FileSource"],41729:["Scene Type","SceneType"],41730:["CFA Pattern","CFAPattern"],41985:["Custom Rendered","CustomRendered"],41986:["Exposure Mode","Exposure Mode"],41987:["White Balance","WhiteBalance"],41988:["Digital Zoom Ratio","DigitalZoomRatio"],41990:["Scene Capture Type","SceneCaptureType"],41991:["Gain Control","GainControl"],41992:["Contrast","Contrast"],41993:["Saturation","Saturation"],41994:["Sharpness","Sharpness"],41995:["Device settings description","DeviceSettingDescription"],41996:["Subject distance range","SubjectDistanceRange"],42016:["Unique image ID","ImageUniqueID"],40965:["Interoperability tag","InteroperabilityIFDPointer"]};this.JpegMeta.JpegFile.prototype._gpstags={0:["GPS tag version","GPSVersionID"],1:["North or South Latitude","GPSLatitudeRef"],2:["Latitude","GPSLatitude"],3:["East or West Longitude","GPSLongitudeRef"],4:["Longitude","GPSLongitude"],5:["Altitude reference","GPSAltitudeRef"],6:["Altitude","GPSAltitude"],7:["GPS time (atomic clock)","GPSTimeStamp"],8:["GPS satellites usedd for measurement","GPSSatellites"],9:["GPS receiver status","GPSStatus"],10:["GPS mesaurement mode","GPSMeasureMode"],11:["Measurement precision","GPSDOP"],12:["Speed unit","GPSSpeedRef"],13:["Speed of GPS receiver","GPSSpeed"],14:["Reference for direction of movement","GPSTrackRef"],15:["Direction of movement","GPSTrack"],16:["Reference for direction of image","GPSImgDirectionRef"],17:["Direction of image","GPSImgDirection"],18:["Geodetic survey data used","GPSMapDatum"],19:["Reference for latitude of destination","GPSDestLatitudeRef"],20:["Latitude of destination","GPSDestLatitude"],21:["Reference for longitude of destination","GPSDestLongitudeRef"],22:["Longitude of destination","GPSDestLongitude"],23:["Reference for bearing of destination","GPSDestBearingRef"],24:["Bearing of destination","GPSDestBearing"],25:["Reference for distance to destination","GPSDestDistanceRef"],26:["Distance to destination","GPSDestDistance"],27:["Name of GPS processing method","GPSProcessingMethod"],28:["Name of GPS area","GPSAreaInformation"],29:["GPS Date","GPSDateStamp"],30:["GPS differential correction","GPSDifferential"]};this.JpegMeta.JpegFile.prototype._markers={192:["SOF0","_sofHandler","Baseline DCT"],193:["SOF1","_sofHandler","Extended sequential DCT"],194:["SOF2","_sofHandler","Progressive DCT"],195:["SOF3","_sofHandler","Lossless (sequential)"],197:["SOF5","_sofHandler","Differential sequential DCT"],198:["SOF6","_sofHandler","Differential progressive DCT"],199:["SOF7","_sofHandler","Differential lossless (sequential)"],200:["JPG",null,"Reserved for JPEG extensions"],201:["SOF9","_sofHandler","Extended sequential DCT"],202:["SOF10","_sofHandler","Progressive DCT"],203:["SOF11","_sofHandler","Lossless (sequential)"],205:["SOF13","_sofHandler","Differential sequential DCT"],206:["SOF14","_sofHandler","Differential progressive DCT"],207:["SOF15","_sofHandler","Differential lossless (sequential)"],196:["DHT",null,"Define Huffman table(s)"],204:["DAC",null,"Define arithmetic coding conditioning(s)"],208:["RST0",null,"Restart with modulo 8 count 0"],209:["RST1",null,"Restart with modulo 8 count 1"],210:["RST2",null,"Restart with modulo 8 count 2"],211:["RST3",null,"Restart with modulo 8 count 3"],212:["RST4",null,"Restart with modulo 8 count 4"],213:["RST5",null,"Restart with modulo 8 count 5"],214:["RST6",null,"Restart with modulo 8 count 6"],215:["RST7",null,"Restart with modulo 8 count 7"],216:["SOI",null,"Start of image"],217:["EOI",null,"End of image"],218:["SOS",null,"Start of scan"],219:["DQT",null,"Define quantization table(s)"],220:["DNL",null,"Define number of lines"],221:["DRI",null,"Define restart interval"],222:["DHP",null,"Define hierarchical progression"],223:["EXP",null,"Expand reference component(s)"],224:["APP0","_app0Handler","Reserved for application segments"],225:["APP1","_app1Handler"],226:["APP2",null],227:["APP3",null],228:["APP4",null],229:["APP5",null],230:["APP6",null],231:["APP7",null],232:["APP8",null],233:["APP9",null],234:["APP10",null],235:["APP11",null],236:["APP12",null],237:["APP13",null],238:["APP14",null],239:["APP15",null],240:["JPG0",null],241:["JPG1",null],242:["JPG2",null],243:["JPG3",null],244:["JPG4",null],245:["JPG5",null],246:["JPG6",null],247:["JPG7",null],248:["JPG8",null],249:["JPG9",null],250:["JPG10",null],251:["JPG11",null],252:["JPG12",null],253:["JPG13",null],254:["COM",null],1:["JPG13",null]};this.JpegMeta.JpegFile.prototype._addMetaGroup=function h(t,n){var i=new e.MetaGroup(t,n);this[i.fieldName]=i;this.metaGroups[i.fieldName]=i;return i};this.JpegMeta.JpegFile.prototype._parseIfd=function p(t,n,i,r,a,s,o){var l=e.parseNum(t,n,i+r,2);var u,c;var d;var f;var h,p,m;var _;var g;var v;var y;var b;var x;var w;w=this._addMetaGroup(s,o);for(var u=0;u<l;u++){d=i+r+2+u*12;f=e.parseNum(t,n,d,2);p=e.parseNum(t,n,d+2,2);_=e.parseNum(t,n,d+4,4);g=e.parseNum(t,n,d+8,4);if(this._types[p]===undefined){continue}h=this._types[p][0];m=this._types[p][1];if(m*_<=4){g=d+8}else{g=i+g}if(h=="UNDEFINED"){v=n.slice(g,g+_)}else if(h=="ASCII"){v=n.slice(g,g+_);v=v.split("\x00")[0]}else{v=new Array;for(c=0;c<_;c++,g+=m){if(h=="BYTE"||h=="SHORT"||h=="LONG"){v.push(e.parseNum(t,n,g,m))}if(h=="SBYTE"||h=="SSHORT"||h=="SLONG"){v.push(e.parseSnum(t,n,g,m))}if(h=="RATIONAL"){b=e.parseNum(t,n,g,4);x=e.parseNum(t,n,g+4,4);v.push(new e.Rational(b,x))}if(h=="SRATIONAL"){b=e.parseSnum(t,n,g,4);x=e.parseSnum(t,n,g+4,4);v.push(new e.Rational(b,x))}v.push()}if(_===1){v=v[0]}}w._addProperty(a[f][1],a[f][0],v)}};this.JpegMeta.JpegFile.prototype._jfifHandler=function m(t,n){if(this.jfif!==undefined){throw Error("Multiple JFIF segments found")}this._addMetaGroup("jfif","JFIF");this.jfif._addProperty("version_major","Version Major",this._binary_data.charCodeAt(n+5));this.jfif._addProperty("version_minor","Version Minor",this._binary_data.charCodeAt(n+6));this.jfif._addProperty("version","JFIF Version",this.jfif.version_major.value+"."+this.jfif.version_minor.value);this.jfif._addProperty("units","Density Unit",this._binary_data.charCodeAt(n+7));this.jfif._addProperty("Xdensity","X density",e.parseNum(">",this._binary_data,n+8,2));this.jfif._addProperty("Ydensity","Y Density",e.parseNum(">",this._binary_data,n+10,2));this.jfif._addProperty("Xthumbnail","X Thumbnail",e.parseNum(">",this._binary_data,n+12,1));this.jfif._addProperty("Ythumbnail","Y Thumbnail",e.parseNum(">",this._binary_data,n+13,1))};this.JpegMeta.JpegFile.prototype._app0Handler=function _(e,t){var n=this._binary_data.slice(t,t+5);if(n==this._JFIF_IDENT){this._jfifHandler(e,t)}else if(n==this._JFXX_IDENT){}else{}};this.JpegMeta.JpegFile.prototype._app1Handler=function g(e,t){var n=this._binary_data.slice(t,t+5);if(n==this._EXIF_IDENT){this._exifHandler(e,t+6)}else{}};e.JpegFile.prototype._exifHandler=function v(t,n){if(this.exif!==undefined){throw new Error("Multiple JFIF segments found")}var i;var r;var a;var s,o,l;var u=this._binary_data.slice(n,n+2);if(u==="II"){i="<"}else if(u==="MM"){i=">"}else{throw new Error("Malformed TIFF meta-data. Unknown endianess: "+u)}r=e.parseNum(i,this._binary_data,n+2,2);if(r!==42){throw new Error("Malformed TIFF meta-data. Bad magic: "+r)}a=e.parseNum(i,this._binary_data,n+4,4);this._parseIfd(i,this._binary_data,n,a,this._tifftags,"tiff","TIFF");if(this.tiff.ExifIfdPointer){this._parseIfd(i,this._binary_data,n,this.tiff.ExifIfdPointer.value,this._exiftags,"exif","Exif")}if(this.tiff.GPSInfoIfdPointer){this._parseIfd(i,this._binary_data,n,this.tiff.GPSInfoIfdPointer.value,this._gpstags,"gps","GPS");if(this.gps.GPSLatitude){var c;c=this.gps.GPSLatitude.value[0].asFloat()+1/60*this.gps.GPSLatitude.value[1].asFloat()+1/3600*this.gps.GPSLatitude.value[2].asFloat();if(this.gps.GPSLatitudeRef.value==="S"){c=-c}this.gps._addProperty("latitude","Dec. Latitude",c)}if(this.gps.GPSLongitude){var d;d=this.gps.GPSLongitude.value[0].asFloat()+1/60*this.gps.GPSLongitude.value[1].asFloat()+1/3600*this.gps.GPSLongitude.value[2].asFloat();if(this.gps.GPSLongitudeRef.value==="W"){d=-d}this.gps._addProperty("longitude","Dec. Longitude",d)}}}}).call(window);e.exports=JpegMeta},function(e,t,n){var i,r;(function(){function n(e){var t=e.naturalWidth,n=e.naturalHeight;if(t*n>1024*1024){var i=document.createElement("canvas");i.width=i.height=1;var r=i.getContext("2d");r.drawImage(e,-t+1,0);return r.getImageData(0,0,1,1).data[3]===0}else{return false}}function a(e,t,n){var i=document.createElement("canvas");i.width=1;i.height=n;var r=i.getContext("2d");r.drawImage(e,0,0);var a=r.getImageData(0,0,1,n).data;var s=0;var o=n;var l=n;while(l>s){var u=a[(l-1)*4+3];if(u===0){o=l}else{s=l}l=o+s>>1}var c=l/n;return c===0?1:c}function s(e,t){var n=document.createElement("canvas");o(e,n,t);return n.toDataURL("image/jpeg",t.quality||.8)}function o(e,t,i){var r=e.naturalWidth,s=e.naturalHeight;var o=i.width,u=i.height;var c=t.getContext("2d");c.save();l(t,o,u,i.orientation);var d=n(e);if(d){r/=2;s/=2}var f=1024;var h=document.createElement("canvas");h.width=h.height=f;var p=h.getContext("2d");var m=a(e,r,s);var _=0;while(_<s){var g=_+f>s?s-_:f;var v=0;while(v<r){var y=v+f>r?r-v:f;p.clearRect(0,0,f,f);p.drawImage(e,-v,-_);var b=v*o/r<<0;var x=Math.ceil(y*o/r);var w=_*u/s/m<<0;var L=Math.ceil(g*u/s/m);c.drawImage(h,0,0,y,g,b,w,x,L);v+=f}_+=f}c.restore();h=p=null}function l(e,t,n,i){switch(i){case 5:case 6:case 7:case 8:e.width=n;e.height=t;break;default:e.width=t;e.height=n}var r=e.getContext("2d");switch(i){case 2:r.translate(t,0);r.scale(-1,1);break;case 3:r.translate(t,n);r.rotate(Math.PI);break;case 4:r.translate(0,n);r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI);r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI);r.translate(0,-n);break;case 7:r.rotate(.5*Math.PI);r.translate(t,-n);r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI);r.translate(-t,0);break;default:break}}function u(e){if(e instanceof Blob){var t=new Image;var n=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!n){throw Error("No createObjectURL function found to create blob url")}t.src=n.createObjectURL(e);e=t}if(!e.naturalWidth&&!e.naturalHeight){var i=this;e.onload=function(){var e=i.imageLoadListeners;if(e){i.imageLoadListeners=null;for(var t=0,n=e.length;t<n;t++){e[t]()}}};this.imageLoadListeners=[]}this.srcImage=e}u.prototype.render=function(e,t){if(this.imageLoadListeners){var n=this;this.imageLoadListeners.push(function(){n.render(e,t)});return}t=t||{};var i=this.srcImage.naturalWidth,r=this.srcImage.naturalHeight,a=t.width,l=t.height,u=t.maxWidth,c=t.maxHeight;if(a&&!l){l=r*a/i<<0}else if(l&&!a){a=i*l/r<<0}else{a=i;l=r}if(u&&a>u){a=u;l=r*a/i<<0}if(c&&l>c){l=c;a=i*l/r<<0}var d={width:a,height:l};for(var f in t)d[f]=t[f];var h=e.tagName.toLowerCase();if(h==="img"){e.src=s(this.srcImage,d)}else if(h==="canvas"){o(this.srcImage,e,d)}if(typeof this.onrender==="function"){this.onrender(e)}};if(true){!(i=[],r=function(){return u}.apply(t,i),r!==undefined&&(e.exports=r))}else{this.MegaPixImage=u}})()},function(e,t){function n(e){var t=this;var n=Math.round;var i=Math.floor;var r=new Array(64);var a=new Array(64);var s=new Array(64);var o=new Array(64);var l;var u;var c;var d;var f=new Array(65535);var h=new Array(65535);var p=new Array(64);var m=new Array(64);var _=[];var g=0;var v=7;var y=new Array(64);var b=new Array(64);var x=new Array(64);var w=new Array(256);var L=new Array(2048);var S;var E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63];var k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];var T=[0,1,2,3,4,5,6,7,8,9,10,11];var M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125];var A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250];var C=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];var R=[0,1,2,3,4,5,6,7,8,9,10,11];var D=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119];var I=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function O(e){var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];for(var n=0;n<64;n++){var l=i((t[n]*e+50)/100);if(l<1){l=1}else if(l>255){l=255}r[E[n]]=l}var u=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(var c=0;c<64;c++){var d=i((u[c]*e+50)/100);if(d<1){d=1}else if(d>255){d=255}a[E[c]]=d}var f=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379];var h=0;for(var p=0;p<8;p++){for(var m=0;m<8;m++){s[h]=1/(r[E[h]]*f[p]*f[m]*8);o[h]=1/(a[E[h]]*f[p]*f[m]*8);h++}}}function N(e,t){var n=0;var i=0;var r=new Array;for(var a=1;a<=16;a++){for(var s=1;s<=e[a];s++){r[t[i]]=[];r[t[i]][0]=n;r[t[i]][1]=a;i++;n++}n*=2}return r}function F(){l=N(k,T);u=N(C,R);c=N(M,A);d=N(D,I)}function B(){var e=1;var t=2;for(var n=1;n<=15;n++){for(var i=e;i<t;i++){h[32767+i]=n;f[32767+i]=[];f[32767+i][1]=n;f[32767+i][0]=i}for(var r=-(t-1);r<=-e;r++){h[32767+r]=n;f[32767+r]=[];f[32767+r][1]=n;f[32767+r][0]=t-1+r}e<<=1;t<<=1}}function P(){for(var e=0;e<256;e++){L[e]=19595*e;L[e+256>>0]=38470*e;L[e+512>>0]=7471*e+32768;L[e+768>>0]=-11059*e;L[e+1024>>0]=-21709*e;L[e+1280>>0]=32768*e+8421375;L[e+1536>>0]=-27439*e;L[e+1792>>0]=-5329*e}}function U(e){var t=e[0];var n=e[1]-1;while(n>=0){if(t&1<<n){g|=1<<v}n--;v--;if(v<0){if(g==255){Y(255);Y(0)}else{Y(g)}v=7;g=0}}}function Y(e){_.push(w[e])}function H(e){Y(e>>8&255);Y(e&255)}function G(e,t){var n,i,r,a,s,o,l,u;var c=0;var d;const f=8;const h=64;for(d=0;d<f;++d){n=e[c];i=e[c+1];r=e[c+2];a=e[c+3];s=e[c+4];o=e[c+5];l=e[c+6];u=e[c+7];var m=n+u;var _=n-u;var g=i+l;var v=i-l;var y=r+o;var b=r-o;var x=a+s;var w=a-s;var L=m+x;var S=m-x;var E=g+y;var k=g-y;e[c]=L+E;e[c+4]=L-E;var T=(k+S)*.707106781;e[c+2]=S+T;e[c+6]=S-T;L=w+b;E=b+v;k=v+_;var M=(L-k)*.382683433;var A=.5411961*L+M;var C=1.306562965*k+M;var R=E*.707106781;var D=_+R;var I=_-R;e[c+5]=I+A;e[c+3]=I-A;e[c+1]=D+C;e[c+7]=D-C;c+=8}c=0;for(d=0;d<f;++d){n=e[c];i=e[c+8];r=e[c+16];a=e[c+24];s=e[c+32];o=e[c+40];l=e[c+48];u=e[c+56];var O=n+u;var N=n-u;var F=i+l;var B=i-l;var P=r+o;var U=r-o;var Y=a+s;var H=a-s;var G=O+Y;var j=O-Y;var V=F+P;var z=F-P;e[c]=G+V;e[c+32]=G-V;var $=(z+j)*.707106781;e[c+16]=j+$;e[c+48]=j-$;G=H+U;V=U+B;z=B+N;var q=(G-z)*.382683433;var W=.5411961*G+q;var K=1.306562965*z+q;var J=V*.707106781;var X=N+J;var Z=N-J;e[c+40]=Z+W;e[c+24]=Z-W;e[c+8]=X+K;e[c+56]=X-K;c++}var Q;for(d=0;d<h;++d){Q=e[d]*t[d];p[d]=Q>0?Q+.5|0:Q-.5|0}return p}function j(){H(65504);H(16);Y(74);Y(70);Y(73);Y(70);Y(0);Y(1);Y(1);Y(0);H(1);H(1);Y(0);Y(0)}function V(e,t){H(65472);H(17);Y(8);H(t);H(e);Y(3);Y(1);Y(17);Y(0);Y(2);Y(17);Y(1);Y(3);Y(17);Y(1)}function z(){H(65499);H(132);Y(0);for(var e=0;e<64;e++){Y(r[e])}Y(1);for(var t=0;t<64;t++){Y(a[t])}}function $(){H(65476);H(418);Y(0);for(var e=0;e<16;e++){Y(k[e+1])}for(var t=0;t<=11;t++){Y(T[t])}Y(16);for(var n=0;n<16;n++){Y(M[n+1])}for(var i=0;i<=161;i++){Y(A[i])}Y(1);for(var r=0;r<16;r++){Y(C[r+1])}for(var a=0;a<=11;a++){Y(R[a])}Y(17);for(var s=0;s<16;s++){Y(D[s+1])}for(var o=0;o<=161;o++){Y(I[o])}}function q(){H(65498);H(12);Y(3);Y(1);Y(0);Y(2);Y(17);Y(3);Y(17);Y(0);Y(63);Y(0)}function W(e,t,n,i,r){var a=r[0];var s=r[240];var o;const l=16;const u=63;const c=64;var d=G(e,t);for(var p=0;p<c;++p){m[E[p]]=d[p]}var _=m[0]-n;n=m[0];if(_==0){U(i[0])}else{o=32767+_;U(i[h[o]]);U(f[o])}var g=63;for(;g>0&&m[g]==0;g--){}if(g==0){U(a);return n}var v=1;var y;while(v<=g){var b=v;for(;m[v]==0&&v<=g;++v){}var x=v-b;if(x>=l){y=x>>4;for(var w=1;w<=y;++w)U(s);x=x&15}o=32767+m[v];U(r[(x<<4)+h[o]]);U(f[o]);v++}if(g!=u){U(a)}return n}function K(){var e=String.fromCharCode;for(var t=0;t<256;t++){w[t]=e(t)}}this.encode=function(e,t){var n=(new Date).getTime();if(t)J(t);_=new Array;g=0;v=7;H(65496);j();z();V(e.width,e.height);$();q();var i=0;var r=0;var a=0;g=0;v=7;this.encode.displayName="_encode_";var f=e.data;var h=e.width;var p=e.height;var m=h*4;var w=h*3;var S,E=0;var k,T,M;var A,C,R,D,I;while(E<p){S=0;while(S<m){A=m*E+S;C=A;R=-1;D=0;for(I=0;I<64;I++){D=I>>3;R=(I&7)*4;C=A+D*m+R;if(E+D>=p){C-=m*(E+1+D-p)}if(S+R>=m){C-=S+R-m+4}k=f[C++];T=f[C++];M=f[C++];y[I]=(L[k]+L[T+256>>0]+L[M+512>>0]>>16)-128;b[I]=(L[k+768>>0]+L[T+1024>>0]+L[M+1280>>0]>>16)-128;x[I]=(L[k+1280>>0]+L[T+1536>>0]+L[M+1792>>0]>>16)-128}i=W(y,s,i,l,c);r=W(b,o,r,u,d);a=W(x,o,a,u,d);S+=32}E+=8}if(v>=0){var O=[];O[1]=v+1;O[0]=(1<<v+1)-1;U(O)}H(65497);var N="data:image/jpeg;base64,"+btoa(_.join(""));_=[];var F=(new Date).getTime()-n;return N};function J(e){if(e<=0){e=1}if(e>100){e=100}if(S==e)return;var t=0;if(e<50){t=Math.floor(5e3/e)}else{t=Math.floor(200-e*2)}O(t);S=e}function X(){var t=(new Date).getTime();if(!e)e=50;K();F();B();P();J(e);var n=(new Date).getTime()-t}X()}function i(e){var t=typeof e=="string"?document.getElementById(e):e;var n=document.createElement("canvas");n.width=t.width;n.height=t.height;var i=n.getContext("2d");i.drawImage(t,0,0);return i.getImageData(0,0,n.width,n.height)}e.exports=n},function(e,t,n){var i;(function(){"use strict";function r(e,t){var n;t=t||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=t.touchBoundary||10;this.layer=e;this.tapDelay=t.tapDelay||200;this.tapTimeout=t.tapTimeout||700;if(r.notNeeded(e)){return}function i(e,t){return function(){return e.apply(t,arguments)}}var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"];var o=this;for(var l=0,u=a.length;l<u;l++){o[a[l]]=i(o[a[l]],o)}if(s){e.addEventListener("mouseover",this.onMouse,true);e.addEventListener("mousedown",this.onMouse,true);e.addEventListener("mouseup",this.onMouse,true)}e.addEventListener("click",this.onClick,true);e.addEventListener("touchstart",this.onTouchStart,false);e.addEventListener("touchmove",this.onTouchMove,false);e.addEventListener("touchend",this.onTouchEnd,false);e.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){e.removeEventListener=function(t,n,i){var r=Node.prototype.removeEventListener;if(t==="click"){r.call(e,t,n.hijacked||n,i)}else{r.call(e,t,n,i)}};e.addEventListener=function(t,n,i){var r=Node.prototype.addEventListener;if(t==="click"){r.call(e,t,n.hijacked||(n.hijacked=function(e){if(!e.propagationStopped){n(e)}}),i)}else{r.call(e,t,n,i)}}}if(typeof e.onclick==="function"){n=e.onclick;e.addEventListener("click",function(e){n(e)},false);e.onclick=null}}var a=navigator.userAgent.indexOf("Windows Phone")>=0;var s=navigator.userAgent.indexOf("Android")>0&&!a;var o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!a;var l=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent);var u=o&&/OS [6-7]_\d/.test(navigator.userAgent);var c=navigator.userAgent.indexOf("BB10")>0;r.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled){return true}break;case"input":if(o&&e.type==="file"||e.disabled){return true}break;case"label":case"iframe":case"video":return true}return/\bneedsclick\b/.test(e.className)};r.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return true;case"select":return!s;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}};r.prototype.sendClick=function(e,t){var n,i;if(document.activeElement&&document.activeElement!==e){document.activeElement.blur()}i=t.changedTouches[0];n=document.createEvent("MouseEvents");n.initMouseEvent(this.determineEventType(e),true,true,window,1,i.screenX,i.screenY,i.clientX,i.clientY,false,false,false,false,0,null);n.forwardedTouchEvent=true;e.dispatchEvent(n)};r.prototype.determineEventType=function(e){if(s&&e.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};r.prototype.focus=function(e){var t;if(o&&e.setSelectionRange&&e.type.indexOf("date")!==0&&e.type!=="time"&&e.type!=="month"){t=e.value.length;e.setSelectionRange(t,t)}else{e.focus()}};r.prototype.updateScrollParent=function(e){var t,n;t=e.fastClickScrollParent;if(!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n;e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}if(t){t.fastClickLastScrollTop=t.scrollTop}};r.prototype.getTargetElementFromEventTarget=function(e){if(e.nodeType===Node.TEXT_NODE){return e.parentNode}return e};r.prototype.onTouchStart=function(e){var t,n,i;if(e.targetTouches.length>1){return true}t=this.getTargetElementFromEventTarget(e.target);n=e.targetTouches[0];if(o){i=window.getSelection();if(i.rangeCount&&!i.isCollapsed){return true}if(!l){if(n.identifier&&n.identifier===this.lastTouchIdentifier){e.preventDefault();return false}this.lastTouchIdentifier=n.identifier;this.updateScrollParent(t)}}this.trackingClick=true;this.trackingClickStart=e.timeStamp;this.targetElement=t;this.touchStartX=n.pageX;this.touchStartY=n.pageY;if(e.timeStamp-this.lastClickTime<this.tapDelay){e.preventDefault()}return true};r.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;if(Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n){return true}return false};r.prototype.onTouchMove=function(e){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e)){this.trackingClick=false;this.targetElement=null}return true};r.prototype.findControl=function(e){if(e.control!==undefined){return e.control}if(e.htmlFor){return document.getElementById(e.htmlFor)}return e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};r.prototype.onTouchEnd=function(e){var t,n,i,r,a,c=this.targetElement;if(!this.trackingClick){return true}if(e.timeStamp-this.lastClickTime<this.tapDelay){this.cancelNextClick=true;return true}if(e.timeStamp-this.trackingClickStart>this.tapTimeout){return true}this.cancelNextClick=false;this.lastClickTime=e.timeStamp;n=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(u){a=e.changedTouches[0];c=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset)||c;c.fastClickScrollParent=this.targetElement.fastClickScrollParent}i=c.tagName.toLowerCase();if(i==="label"){t=this.findControl(c);if(t){this.focus(c);if(s){return false}c=t}}else if(this.needsFocus(c)){if(e.timeStamp-n>100||o&&window.top!==window&&i==="input"){this.targetElement=null;return false}this.focus(c);this.sendClick(c,e);if(!o||i!=="select"){this.targetElement=null;e.preventDefault()}return false}if(o&&!l){r=c.fastClickScrollParent;if(r&&r.fastClickLastScrollTop!==r.scrollTop){return true}}if(!this.needsClick(c)){e.preventDefault();this.sendClick(c,e)}return false};r.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};r.prototype.onMouse=function(e){if(!this.targetElement){return true}if(e.forwardedTouchEvent){return true}if(!e.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(e.stopImmediatePropagation){e.stopImmediatePropagation()}else{e.propagationStopped=true}e.stopPropagation();e.preventDefault();return false}return true};r.prototype.onClick=function(e){var t;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(e.target.type==="submit"&&e.detail===0){return true}t=this.onMouse(e);if(!t){this.targetElement=null}return t};r.prototype.destroy=function(){var e=this.layer;if(s){e.removeEventListener("mouseover",this.onMouse,true);e.removeEventListener("mousedown",this.onMouse,true);e.removeEventListener("mouseup",this.onMouse,true)}e.removeEventListener("click",this.onClick,true);e.removeEventListener("touchstart",this.onTouchStart,false);e.removeEventListener("touchmove",this.onTouchMove,false);e.removeEventListener("touchend",this.onTouchEnd,false);e.removeEventListener("touchcancel",this.onTouchCancel,false)};r.notNeeded=function(e){var t;var n;var i;var r;if(typeof window.ontouchstart==="undefined"){return true}n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(n){if(s){t=document.querySelector("meta[name=viewport]");if(t){if(t.content.indexOf("user-scalable=no")!==-1){return true}if(n>31&&document.documentElement.scrollWidth<=window.outerWidth){return true}}}else{return true}}if(c){i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(i[1]>=10&&i[2]>=3){t=document.querySelector("meta[name=viewport]");if(t){if(t.content.indexOf("user-scalable=no")!==-1){return true}if(document.documentElement.scrollWidth<=window.outerWidth){return true}}}}if(e.style.msTouchAction==="none"||e.style.touchAction==="manipulation"){return true}r=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(r>=27){t=document.querySelector("meta[name=viewport]");if(t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)){return true}}if(e.style.touchAction==="none"||e.style.touchAction==="manipulation"){return true}return false};r.attach=function(e,t){return new r(e,t)};if(true){!(i=function(){return r}.call(t,n,t,e),i!==undefined&&(e.exports=i))}else if(typeof e!=="undefined"&&e.exports){e.exports=r.attach;e.exports.FastClick=r}else{window.FastClick=r}})()},function(e,t){var n;(function(){n=function(e,t){this.__callback=e;this.options={scrollingX:true,
scrollingY:true,animating:true,animationDuration:250,bouncing:true,locking:true,paging:false,snapping:false,zooming:false,minZoom:.5,maxZoom:3,speedMultiplier:1};for(var n in t){this.options[n]=t[n]}};var e=function(e){return Math.pow(e-1,3)+1};var t=function(e){if((e/=.5)<1){return.5*Math.pow(e,3)}return.5*(Math.pow(e-2,3)+2)};var i={__isSingleTouch:false,__isTracking:false,__isGesturing:false,__isDragging:false,__isDecelerating:false,__isAnimating:false,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:false,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(e,t,n,i){var r=this;if(e===+e){r.__clientWidth=e}if(t===+t){r.__clientHeight=t}if(n===+n){r.__contentWidth=n}if(i===+i){r.__contentHeight=i}r.__computeScrollMax();r.scrollTo(r.__scrollLeft,r.__scrollTop,true)},setPosition:function(e,t){var n=this;n.__clientLeft=e||0;n.__clientTop=t||0},setSnapSize:function(e,t){var n=this;n.__snapWidth=e;n.__snapHeight=t},activatePullToRefresh:function(e,t,n,i){var r=this;r.__refreshHeight=e;r.__refreshActivate=t;r.__refreshDeactivate=n;r.__refreshStart=i},finishPullToRefresh:function(){var e=this;e.__refreshActive=false;if(e.__refreshDeactivate){e.__refreshDeactivate()}e.scrollTo(e.__scrollLeft,e.__scrollTop,true)},getValues:function(){var e=this;return{left:e.__scrollLeft,top:e.__scrollTop,zoom:e.__zoomLevel}},getScrollMax:function(){var e=this;return{left:e.__maxScrollLeft,top:e.__maxScrollTop}},zoomTo:function(e,t,n,i){var r=this;if(!r.options.zooming){throw new Error("Zooming is not enabled!")}if(r.__isDecelerating){core.effect.Animate.stop(r.__isDecelerating);r.__isDecelerating=false}var a=r.__zoomLevel;if(n==null){n=r.__clientWidth/2}if(i==null){i=r.__clientHeight/2}e=Math.max(Math.min(e,r.options.maxZoom),r.options.minZoom);r.__computeScrollMax(e);var s=(n+r.__scrollLeft)*e/a-n;var o=(i+r.__scrollTop)*e/a-i;if(s>r.__maxScrollLeft){s=r.__maxScrollLeft}else if(s<0){s=0}if(o>r.__maxScrollTop){o=r.__maxScrollTop}else if(o<0){o=0}r.__publish(s,o,e,t)},zoomBy:function(e,t,n,i){var r=this;r.zoomTo(r.__zoomLevel*e,t,n,i)},scrollTo:function(e,t,n,i){var r=this;if(r.__isDecelerating){core.effect.Animate.stop(r.__isDecelerating);r.__isDecelerating=false}if(i!=null&&i!==r.__zoomLevel){if(!r.options.zooming){throw new Error("Zooming is not enabled!")}e*=i;t*=i;r.__computeScrollMax(i)}else{i=r.__zoomLevel}if(!r.options.scrollingX){e=r.__scrollLeft}else{if(r.options.paging){e=Math.round(e/r.__clientWidth)*r.__clientWidth}else if(r.options.snapping){e=Math.round(e/r.__snapWidth)*r.__snapWidth}}if(!r.options.scrollingY){t=r.__scrollTop}else{if(r.options.paging){t=Math.round(t/r.__clientHeight)*r.__clientHeight}else if(r.options.snapping){t=Math.round(t/r.__snapHeight)*r.__snapHeight}}e=Math.max(Math.min(r.__maxScrollLeft,e),0);t=Math.max(Math.min(r.__maxScrollTop,t),0);if(e===r.__scrollLeft&&t===r.__scrollTop){n=false}r.__publish(e,t,i,n)},scrollBy:function(e,t,n){var i=this;var r=i.__isAnimating?i.__scheduledLeft:i.__scrollLeft;var a=i.__isAnimating?i.__scheduledTop:i.__scrollTop;i.scrollTo(r+(e||0),a+(t||0),n)},doMouseZoom:function(e,t,n,i){var r=this;var a=e>0?.97:1.03;return r.zoomTo(r.__zoomLevel*a,false,n-r.__clientLeft,i-r.__clientTop)},doTouchStart:function(e,t){if(e.length==null){throw new Error("Invalid touch list: "+e)}if(t instanceof Date){t=t.valueOf()}if(typeof t!=="number"){throw new Error("Invalid timestamp value: "+t)}var n=this;if(n.__isDecelerating){core.effect.Animate.stop(n.__isDecelerating);n.__isDecelerating=false}if(n.__isAnimating){core.effect.Animate.stop(n.__isAnimating);n.__isAnimating=false}var i,r;var a=e.length===1;if(a){i=e[0].pageX;r=e[0].pageY}else{i=Math.abs(e[0].pageX+e[1].pageX)/2;r=Math.abs(e[0].pageY+e[1].pageY)/2}n.__initialTouchLeft=i;n.__initialTouchTop=r;n.__zoomLevelStart=n.__zoomLevel;n.__lastTouchLeft=i;n.__lastTouchTop=r;n.__lastTouchMove=t;n.__lastScale=1;n.__enableScrollX=!a&&n.options.scrollingX;n.__enableScrollY=!a&&n.options.scrollingY;n.__isTracking=true;n.__isDragging=!a;n.__isSingleTouch=a;n.__positions=[]},doTouchMove:function(e,t,n){if(e.length==null){throw new Error("Invalid touch list: "+e)}if(t instanceof Date){t=t.valueOf()}if(typeof t!=="number"){throw new Error("Invalid timestamp value: "+t)}var i=this;if(!i.__isTracking){return}var r,a;if(e.length===2){r=Math.abs(e[0].pageX+e[1].pageX)/2;a=Math.abs(e[0].pageY+e[1].pageY)/2}else{r=e[0].pageX;a=e[0].pageY}var s=i.__positions;if(i.__isDragging){var o=r-i.__lastTouchLeft;var l=a-i.__lastTouchTop;var u=i.__scrollLeft;var c=i.__scrollTop;var d=i.__zoomLevel;if(n!=null&&i.options.zooming){var f=d;d=d/i.__lastScale*n;d=Math.max(Math.min(d,i.options.maxZoom),i.options.minZoom);if(f!==d){var h=r-i.__clientLeft;var p=a-i.__clientTop;u=(h+u)*d/f-h;c=(p+c)*d/f-p;i.__computeScrollMax(d)}}if(i.__enableScrollX){u-=o*this.options.speedMultiplier;var m=i.__maxScrollLeft;if(u>m||u<0){if(i.options.bouncing){u+=o/2*this.options.speedMultiplier}else if(u>m){u=m}else{u=0}}}if(i.__enableScrollY){c-=l*this.options.speedMultiplier;var _=i.__maxScrollTop;if(c>_||c<0){if(i.options.bouncing){c+=l/2*this.options.speedMultiplier;if(!i.__enableScrollX&&i.__refreshHeight!=null){if(!i.__refreshActive&&c<=-i.__refreshHeight){i.__refreshActive=true;if(i.__refreshActivate){i.__refreshActivate()}}else if(i.__refreshActive&&c>-i.__refreshHeight){i.__refreshActive=false;if(i.__refreshDeactivate){i.__refreshDeactivate()}}}}else if(c>_){c=_}else{c=0}}}if(s.length>60){s.splice(0,30)}s.push(u,c,t);i.__publish(u,c,d)}else{var g=i.options.locking?3:0;var v=5;var y=Math.abs(r-i.__initialTouchLeft);var b=Math.abs(a-i.__initialTouchTop);i.__enableScrollX=i.options.scrollingX&&y>=g;i.__enableScrollY=i.options.scrollingY&&b>=g;s.push(i.__scrollLeft,i.__scrollTop,t);i.__isDragging=(i.__enableScrollX||i.__enableScrollY)&&(y>=v||b>=v)}i.__lastTouchLeft=r;i.__lastTouchTop=a;i.__lastTouchMove=t;i.__lastScale=n},doTouchEnd:function(e){if(e instanceof Date){e=e.valueOf()}if(typeof e!=="number"){throw new Error("Invalid timestamp value: "+e)}var t=this;if(!t.__isTracking){return}t.__isTracking=false;if(t.__isDragging){t.__isDragging=false;if(t.__isSingleTouch&&t.options.animating&&e-t.__lastTouchMove<=100){var n=t.__positions;var i=n.length-1;var r=i;for(var a=i;a>0&&n[a]>t.__lastTouchMove-100;a-=3){r=a}if(r!==i){var s=n[i]-n[r];var o=t.__scrollLeft-n[r-2];var l=t.__scrollTop-n[r-1];t.__decelerationVelocityX=o/s*(1e3/60);t.__decelerationVelocityY=l/s*(1e3/60);var u=t.options.paging||t.options.snapping?4:1;if(Math.abs(t.__decelerationVelocityX)>u||Math.abs(t.__decelerationVelocityY)>u){if(!t.__refreshActive){t.__startDeceleration(e)}}}}}if(!t.__isDecelerating){if(t.__refreshActive&&t.__refreshStart){t.__publish(t.__scrollLeft,-t.__refreshHeight,t.__zoomLevel,true);if(t.__refreshStart){t.__refreshStart()}}else{t.scrollTo(t.__scrollLeft,t.__scrollTop,true,t.__zoomLevel);if(t.__refreshActive){t.__refreshActive=false;if(t.__refreshDeactivate){t.__refreshDeactivate()}}}}t.__positions.length=0},__publish:function(n,i,r,a){var s=this;var o=s.__isAnimating;if(o){core.effect.Animate.stop(o);s.__isAnimating=false}if(a&&s.options.animating){s.__scheduledLeft=n;s.__scheduledTop=i;s.__scheduledZoom=r;var l=s.__scrollLeft;var u=s.__scrollTop;var c=s.__zoomLevel;var d=n-l;var f=i-u;var h=r-c;var p=function(e,t,n){if(n){s.__scrollLeft=l+d*e;s.__scrollTop=u+f*e;s.__zoomLevel=c+h*e;if(s.__callback){s.__callback(s.__scrollLeft,s.__scrollTop,s.__zoomLevel)}}};var m=function(e){return s.__isAnimating===e};var _=function(e,t,n){if(t===s.__isAnimating){s.__isAnimating=false}if(s.options.zooming){s.__computeScrollMax()}};s.__isAnimating=core.effect.Animate.start(p,m,_,s.options.animationDuration,o?e:t)}else{s.__scheduledLeft=s.__scrollLeft=n;s.__scheduledTop=s.__scrollTop=i;s.__scheduledZoom=s.__zoomLevel=r;if(s.__callback){s.__callback(n,i,r)}if(s.options.zooming){s.__computeScrollMax()}}},__computeScrollMax:function(e){var t=this;if(e==null){e=t.__zoomLevel}t.__maxScrollLeft=Math.max(t.__contentWidth*e-t.__clientWidth,0);t.__maxScrollTop=Math.max(t.__contentHeight*e-t.__clientHeight,0)},__startDeceleration:function(e){var t=this;if(t.options.paging){var n=Math.max(Math.min(t.__scrollLeft,t.__maxScrollLeft),0);var i=Math.max(Math.min(t.__scrollTop,t.__maxScrollTop),0);var r=t.__clientWidth;var a=t.__clientHeight;t.__minDecelerationScrollLeft=Math.floor(n/r)*r;t.__minDecelerationScrollTop=Math.floor(i/a)*a;t.__maxDecelerationScrollLeft=Math.ceil(n/r)*r;t.__maxDecelerationScrollTop=Math.ceil(i/a)*a}else{t.__minDecelerationScrollLeft=0;t.__minDecelerationScrollTop=0;t.__maxDecelerationScrollLeft=t.__maxScrollLeft;t.__maxDecelerationScrollTop=t.__maxScrollTop}var s=function(e,n,i){t.__stepThroughDeceleration(i)};var o=t.options.snapping?4:.1;var l=function(){return Math.abs(t.__decelerationVelocityX)>=o||Math.abs(t.__decelerationVelocityY)>=o};var u=function(e,n,i){t.__isDecelerating=false;t.scrollTo(t.__scrollLeft,t.__scrollTop,t.options.snapping)};t.__isDecelerating=core.effect.Animate.start(s,l,u)},__stepThroughDeceleration:function(e){var t=this;var n=t.__scrollLeft+t.__decelerationVelocityX;var i=t.__scrollTop+t.__decelerationVelocityY;if(!t.options.bouncing){var r=Math.max(Math.min(t.__maxDecelerationScrollLeft,n),t.__minDecelerationScrollLeft);if(r!==n){n=r;t.__decelerationVelocityX=0}var a=Math.max(Math.min(t.__maxDecelerationScrollTop,i),t.__minDecelerationScrollTop);if(a!==i){i=a;t.__decelerationVelocityY=0}}if(e){t.__publish(n,i,t.__zoomLevel)}else{t.__scrollLeft=n;t.__scrollTop=i}if(!t.options.paging){var s=.95;t.__decelerationVelocityX*=s;t.__decelerationVelocityY*=s}if(t.options.bouncing){var o=0;var l=0;var u=.03;var c=.08;if(n<t.__minDecelerationScrollLeft){o=t.__minDecelerationScrollLeft-n}else if(n>t.__maxDecelerationScrollLeft){o=t.__maxDecelerationScrollLeft-n}if(i<t.__minDecelerationScrollTop){l=t.__minDecelerationScrollTop-i}else if(i>t.__maxDecelerationScrollTop){l=t.__maxDecelerationScrollTop-i}if(o!==0){if(o*t.__decelerationVelocityX<=0){t.__decelerationVelocityX+=o*u}else{t.__decelerationVelocityX=o*c}}if(l!==0){if(l*t.__decelerationVelocityY<=0){t.__decelerationVelocityY+=l*u}else{t.__decelerationVelocityY=l*c}}}}};for(var r in i){n.prototype[r]=i[r]}})();e.exports=n},function(e,t){var n=function(e,t,i){this.content=e;this.container=t;this.options=i||{};var r=this;this.scroller=new Scroller(function(e,t,n){r.render(e,t,n)},i);this.bindEvents();this.content.style[n.vendorPrefix+"TransformOrigin"]="left top";this.reflow()};n.prototype.render=function(){var e=document.documentElement.style;var t;if(window.opera&&Object.prototype.toString.call(opera)==="[object Opera]"){t="presto"}else if("MozAppearance"in e){t="gecko"}else if("WebkitAppearance"in e){t="webkit"}else if(typeof navigator.cpuClass==="string"){t="trident"}var i=n.vendorPrefix={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[t];var r=document.createElement("div");var a;var s=i+"Perspective";var o=i+"Transform";if(r.style[s]!==a){return function(e,t,n){if(this.content){this.content.style[o]="translate3d("+-e+"px,"+-t+"px,0) scale("+n+")"}}}else if(r.style[o]!==a){return function(e,t,n){if(this.content){this.content.style[o]="translate("+-e+"px,"+-t+"px) scale("+n+")"}}}else{return function(e,t,n){this.content.style.marginLeft=e?-e/n+"px":"";this.content.style.marginTop=t?-t/n+"px":"";this.content.style.zoom=n||""}}}();n.prototype.reflow=function(){if(!this.container){return}this.scroller.setDimensions(this.container.clientWidth,this.container.clientHeight,this.content.offsetWidth,this.content.offsetHeight);var e=this.container.getBoundingClientRect();this.scroller.setPosition(e.left+this.container.clientLeft,e.top+this.container.clientTop)};n.prototype.destroy=function(){$(window).off("resize.zynga");if("ontouchstart"in window){$(this.container).off("touchstart.zynga");$(this.container).off("touchmove.zynga");$(this.container).off("touchend.zynga");$(this.container).off("touchcancel.zynga")}else{$(this.container).off("mousedown.zynga");$(this.container).off("mousemove.zynga");$(this.container).off("mouseup.zynga");$(this.container).off("mousewheel.zynga")}this.content=null;this.container=null};n.prototype.bindEvents=function(){var e=this;if("ontouchstart"in window){$(this.container).on("touchstart.zynga",function(t){if(t.touches[0]&&t.touches[0].target&&t.touches[0].target.tagName&&t.touches[0].target.tagName.match(/input|textarea|select/i)){return}e.scroller.doTouchStart(t.touches,t.timeStamp)},false);$(this.container).on("touchmove.zynga",function(t){t.preventDefault();if($.__swipeHelper.swipeOrientation==="vertical"){e.scroller.doTouchMove(t.touches,t.timeStamp,t.scale)}},false);$(this.container).on("touchend.zynga",function(t){e.scroller.doTouchEnd(t.timeStamp)},false);$(this.container).on("touchcancel.zynga",function(t){e.scroller.doTouchEnd(t.timeStamp)},false)}else{var t=false;$(this.container).on("mousedown.zynga",function(n){if(n.target.tagName.match(/input|textarea|select/i)){return}e.scroller.doTouchStart([{pageX:n.pageX,pageY:n.pageY}],n.timeStamp);t=true;n.preventDefault()},false);$(this.container).on("mousemove.zynga",function(n){if(!t){return}e.scroller.doTouchMove([{pageX:n.pageX,pageY:n.pageY}],n.timeStamp);t=true},false);$(this.container).on("mouseup.zynga",function(n){if(!t){return}e.scroller.doTouchEnd(n.timeStamp);t=false},false);$(this.container).on("mousewheel.zynga",function(t){if(e.options.zooming){e.scroller.doMouseZoom(t.wheelDelta,t.timeStamp,t.pageX,t.pageY);t.preventDefault()}},false)}};document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("[data-scrollable],[data-zoomable]"),t;for(var i=0;i<e.length;i++){t=e[i];var r=t.dataset.scrollable;var a=t.dataset.zoomable||"";var s=a.split("-");var o=s.length>1&&parseFloat(s[0]);var l=s.length>1&&parseFloat(s[1]);new n(t,{scrollingX:r==="true"||r==="x",scrollingY:r==="true"||r==="y",zooming:a==="true"||s.length>1,minZoom:o,maxZoom:l})}},false);e.exports=n},function(e,t,n){var i,r;(function(n,a){"use strict";var s={remoteFetching:false,collectWindowErrors:true,linesOfContext:7};var o=[].slice;var l="?";s.wrap=function j(e){function t(){try{return e.apply(this,arguments)}catch(t){s.report(t);throw t}}return t};s.report=function V(){var e=[],t=null,i=null,r=null;function l(t){m();e.push(t)}function u(t){for(var n=e.length-1;n>=0;--n){if(e[n]===t){e.splice(n,1)}}}function c(){_();e=[]}function d(t,n){var i=null;if(n&&!s.collectWindowErrors){return}for(var r in e){if(M(e,r)){try{e[r].apply(null,[t].concat(o.call(arguments,2)))}catch(a){i=a}}}if(i){throw i}}var f,h;function p(e,t,n,i,a){var o=null;if(r){s.computeStackTrace.augmentStackTraceWithInitialElement(r,t,n,e);g()}else if(a){o=s.computeStackTrace(a);d(o,true)}else{var l={url:t,line:n,column:i};l.func=s.computeStackTrace.guessFunctionName(l.url,l.line);l.context=s.computeStackTrace.gatherContext(l.url,l.line);o={message:e,url:document.location.href,stack:[l]};d(o,true)}if(f){return f.apply(this,arguments)}return false}function m(){if(h){return}f=n.onerror;n.onerror=p;h=true}function _(){if(!h){return}n.onerror=f;h=false;f=a}function g(){var e=r,n=t;t=null;r=null;i=null;d.apply(null,[e,false].concat(n))}function v(e,a){var l=o.call(arguments,1);if(r){if(i===e){return}else{g()}}var u=s.computeStackTrace(e);r=u;i=e;t=l;n.setTimeout(function(){if(i===e){g()}},u.incomplete?2e3:0);if(a!==false){throw e}}v.subscribe=l;v.unsubscribe=u;v.uninstall=c;return v}();s.computeStackTrace=function z(){var e=false,t={};function i(e){if(!s.remoteFetching){return""}try{var t=function(){try{return new n.XMLHttpRequest}catch(e){return new n.ActiveXObject("Microsoft.XMLHTTP")}};var i=t();i.open("GET",e,false);i.send("");return i.responseText}catch(r){return""}}function r(e){if(!k(e))return[];if(!M(t,e)){var n="";if(e.indexOf(document.domain)!==-1){n=i(e)}t[e]=n?n.split("\n"):[]}return t[e]}function a(e,t){var n=/function ([^(]*)\(([^)]*)\)/,i=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,a="",s=10,o=r(e),u;if(!o.length){return l}for(var c=0;c<s;++c){a=o[t-c]+a;if(!S(a)){if(u=i.exec(a)){return u[1]}else if(u=n.exec(a)){return u[1]}}}return l}function o(e,t){var n=r(e);if(!n.length){return null}var i=[],a=Math.floor(s.linesOfContext/2),o=a+s.linesOfContext%2,l=Math.max(0,t-a-1),u=Math.min(n.length,t+o-1);t-=1;for(var c=l;c<u;++c){if(!S(n[c])){i.push(n[c])}}return i.length>0?i:null}function u(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function c(e){return u(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function d(e,t){var n,i;for(var a=0,s=t.length;a<s;++a){if((n=r(t[a])).length){n=n.join("\n");if(i=e.exec(n)){return{url:t[a],line:n.substring(0,i.index).split("\n").length,column:i.index-n.lastIndexOf("\n",i.index)-1}}}}return null}function f(e,t,n){var i=r(t),a=new RegExp("\\b"+u(e)+"\\b"),s;n-=1;if(i&&i.length>n&&(s=a.exec(i[n]))){return s.index}return null}function h(e){var t=[n.location.href],i=document.getElementsByTagName("script"),r,a=""+e,s=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,o=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,l,f,h;for(var p=0;p<i.length;++p){var m=i[p];if(m.src){t.push(m.src)}}if(!(f=s.exec(a))){l=new RegExp(u(a).replace(/\s+/g,"\\s+"))}else{var _=f[1]?"\\s+"+f[1]:"",g=f[2].split(",").join("\\s*,\\s*");r=u(f[3]).replace(/;$/,";?");l=new RegExp("function"+_+"\\s*\\(\\s*"+g+"\\s*\\)\\s*{\\s*"+r+"\\s*}")}if(h=d(l,t)){return h}if(f=o.exec(a)){var v=f[1];r=c(f[2]);l=new RegExp("on"+v+"=[\\'\"]\\s*"+r+"\\s*[\\'\"]","i");if(h=d(l,t[0])){return h}l=new RegExp(r);if(h=d(l,t)){return h}}return null}function p(e){if(!e.stack){return null}var t=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|https?):.*?):(\d+)(?::(\d+))?\)?\s*$/i,n=/^\s*(\S*)(?:\((.*?)\))?@((?:file|https?).*?):(\d+)(?::(\d+))?\s*$/i,i=e.stack.split("\n"),r=[],s,u,c=/^(.*) is undefined$/.exec(e.message);for(var d=0,h=i.length;d<h;++d){if(s=n.exec(i[d])){u={url:s[3],func:s[1]||l,args:s[2]?s[2].split(","):"",line:+s[4],column:s[5]?+s[5]:null}}else if(s=t.exec(i[d])){u={url:s[2],func:s[1]||l,line:+s[3],column:s[4]?+s[4]:null}}else{continue}if(!u.func&&u.line){u.func=a(u.url,u.line)}if(u.line){u.context=o(u.url,u.line)}r.push(u)}if(!r.length){return null}if(r[0].line&&!r[0].column&&c){r[0].column=f(c[1],r[0].url,r[0].line)}else if(!r[0].column&&!S(e.columnNumber)){r[0].column=e.columnNumber+1}return{name:e.name,message:e.message,url:document.location.href,stack:r}}function m(e){var t=e.stacktrace;var n=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,i=t.split("\n"),r=[],s;for(var l=0,u=i.length;l<u;l+=2){if(s=n.exec(i[l])){var c={line:+s[1],column:+s[2],func:s[3]||s[4],args:s[5]?s[5].split(","):[],url:s[6]};if(!c.func&&c.line){c.func=a(c.url,c.line)}if(c.line){try{c.context=o(c.url,c.line)}catch(d){}}if(!c.context){c.context=[i[l+1]]}r.push(c)}}if(!r.length){return null}return{name:e.name,message:e.message,url:document.location.href,stack:r}}function _(e){var t=e.message.split("\n");if(t.length<4){return null}var i=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,s=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,l=/^\s*Line (\d+) of function script\s*$/i,u=[],f=document.getElementsByTagName("script"),h=[],p,m,_,g;for(m in f){if(M(f,m)&&!f[m].src){h.push(f[m])}}for(m=2,_=t.length;m<_;m+=2){var v=null;if(p=i.exec(t[m])){v={url:p[2],func:p[3],line:+p[1]}}else if(p=s.exec(t[m])){v={url:p[3],func:p[4]};var y=+p[1];var b=h[p[2]-1];if(b){g=r(v.url);if(g){g=g.join("\n");var x=g.indexOf(b.innerText);if(x>=0){v.line=y+g.substring(0,x).split("\n").length}}}}else if(p=l.exec(t[m])){var w=n.location.href.replace(/#.*$/,""),L=p[1];var S=new RegExp(c(t[m+1]));g=d(S,[w]);v={url:w,line:g?g.line:L,func:""}}if(v){if(!v.func){v.func=a(v.url,v.line)}var E=o(v.url,v.line);var k=E?E[Math.floor(E.length/2)]:null;if(E&&k.replace(/^\s*/,"")===t[m+1].replace(/^\s*/,"")){v.context=E}else{v.context=[t[m+1]]}u.push(v)}}if(!u.length){return null}return{name:e.name,message:t[0],url:document.location.href,stack:u}}function g(e,t,n,i){var r={url:t,line:n};if(r.url&&r.line){e.incomplete=false;if(!r.func){r.func=a(r.url,r.line)}if(!r.context){r.context=o(r.url,r.line)}var s=/ '([^']+)' /.exec(i);if(s){r.column=f(s[1],r.url,r.line)}if(e.stack.length>0){if(e.stack[0].url===r.url){if(e.stack[0].line===r.line){return false}else if(!e.stack[0].line&&e.stack[0].func===r.func){e.stack[0].line=r.line;e.stack[0].context=r.context;return false}}}e.stack.unshift(r);e.partial=true;return true}else{e.incomplete=true}return false}function v(e,t){var n=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,i=[],r={},o=false,u,c,d;for(var p=v.caller;p&&!o;p=p.caller){if(p===y||p===s.report){continue}c={url:null,func:l,line:null,column:null};if(p.name){c.func=p.name}else if(u=n.exec(p.toString())){c.func=u[1]}if(d=h(p)){c.url=d.url;c.line=d.line;if(c.func===l){c.func=a(c.url,c.line)}var m=/ '([^']+)' /.exec(e.message||e.description);if(m){c.column=f(m[1],d.url,d.line)}}if(r[""+p]){o=true}else{r[""+p]=true}i.push(c)}if(t){i.splice(0,t)}var _={name:e.name,message:e.message,url:document.location.href,stack:i};g(_,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description);return _}function y(t,n){var i=null;n=n==null?0:+n;try{i=m(t);if(i){return i}}catch(r){if(e){throw r}}try{i=p(t);if(i){return i}}catch(r){if(e){throw r}}try{i=_(t);if(i){return i}}catch(r){if(e){throw r}}try{i=v(t,n+1);if(i){return i}}catch(r){if(e){throw r}}return{}}function b(e){e=(e==null?0:+e)+1;try{throw new Error}catch(t){return y(t,e+1)}}y.augmentStackTraceWithInitialElement=g;y.guessFunctionName=a;y.gatherContext=o;y.ofCaller=b;return y}();"use strict";var u=n.Raven,c=!!(n.JSON&&n.JSON.stringify),d,f,h,p,m,_,g={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],collectWindowErrors:true,tags:{},extra:{}};var v={VERSION:"1.1.11",TraceKit:s,afterLoad:function(){var e=n.RavenConfig;if(e){this.config(e.dsn,e.config).install()}},noConflict:function(){n.Raven=u;return v},config:function(e,t){if(!e)return v;var n=L(e),i=n.path.lastIndexOf("/"),r=n.path.substr(1,i);if(t){A(t,function(e,t){g[e]=t})}g.ignoreErrors.push("Script error.");g.ignoreErrors.push("Script error");g.ignoreErrors=H(g.ignoreErrors);g.ignoreUrls=g.ignoreUrls.length?H(g.ignoreUrls):false;g.whitelistUrls=g.whitelistUrls.length?H(g.whitelistUrls):false;g.includePaths=H(g.includePaths);m=n.user;_=n.path.substr(i+1);h="//"+n.host+(n.port?":"+n.port:"")+"/"+r+"api/"+_+"/store/";if(n.protocol){h=n.protocol+":"+h}if(g.fetchContext){s.remoteFetching=true}if(g.linesOfContext){s.linesOfContext=g.linesOfContext}s.collectWindowErrors=!!g.collectWindowErrors;return v},install:function(){if(Y()){s.report.subscribe(D)}return v},context:function(e,t,n){if(E(e)){n=t||[];t=e;e=a}return v.wrap(e,t).apply(this,n)},wrap:function(e,t){if(S(t)&&!E(e)){return e}if(E(e)){t=e;e=a}if(!E(t)){return t}if(t.__raven__){return t}function n(){var n=[],i=arguments.length,r=!e||e&&e.deep!==false;while(i--)n[i]=r?v.wrap(e,arguments[i]):arguments[i];try{return t.apply(this,n)}catch(a){v.captureException(a,e);throw a}}for(var i in t){if(t.hasOwnProperty(i)){n[i]=t[i]}}n.__raven__=true;return n},uninstall:function(){s.report.uninstall();return v},captureException:function(e,t){if(k(e))return v.captureMessage(e,t);d=e;try{s.report(e,t)}catch(n){if(e!==n){throw n}}return v},captureMessage:function(e,t){P(F({message:e},t));return v},setUser:function(e){p=e;return v},lastException:function(){return d},lastEventId:function(){return f}};function y(e,t){var n,i;t=t||{};e="raven"+e.substr(0,1).toUpperCase()+e.substr(1);if(document.createEvent){n=document.createEvent("HTMLEvents");n.initEvent(e,true,true)}else{n=document.createEventObject();n.eventType=e}for(i in t)if(t.hasOwnProperty(i)){n[i]=t[i]}if(document.createEvent){document.dispatchEvent(n)}else{try{document.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(r){}}}var b="source protocol user pass host port path".split(" "),x=/^(?:(\w+):)?\/\/(\w+)(:\w+)?@([\w\.-]+)(?::(\d+))?(\/.*)/;function w(e){this.name="RavenConfigError";this.message=e}w.prototype=new Error;w.prototype.constructor=w;function L(e){var t=x.exec(e),n={},i=7;try{while(i--)n[b[i]]=t[i]||""}catch(r){throw new w("Invalid DSN: "+e)}if(n.pass)throw new w("Do not specify your private key in the DSN!");return n}function S(e){return typeof e==="undefined"}function E(e){return typeof e==="function"}function k(e){return typeof e==="string"}function T(e){for(var t in e)return false;return true}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function A(e,t){var n,i;if(S(e.length)){for(n in e){if(e.hasOwnProperty(n)){t.call(null,n,e[n])}}}else{i=e.length;if(i){for(n=0;n<i;n++){t.call(null,n,e[n])}}}}var C;function R(){if(C)return C;var e=["sentry_version=4","sentry_client=raven-js/"+v.VERSION];if(m){e.push("sentry_key="+m)}C="?"+e.join("&");return C}function D(e,t){var n=[];if(e.stack&&e.stack.length){A(e.stack,function(e,t){var i=I(t);if(i){n.push(i)}})}y("handle",{stackInfo:e,options:t});N(e.name,e.message,e.url,e.lineno,n,t)}function I(e){if(!e.url)return;var t={filename:e.url,lineno:e.line,colno:e.column,"function":e.func||"?"},n=O(e),i;if(n){var r=["pre_context","context_line","post_context"];i=3;while(i--)t[r[i]]=n[i]}t.in_app=!(!g.includePaths.test(t.filename)||/(Raven|TraceKit)\./.test(t["function"])||/raven\.(min\.)js$/.test(t.filename));return t}function O(e){if(!e.context||!g.fetchContext)return;var t=e.context,n=~~(t.length/2),i=t.length,r=false;while(i--){if(t[i].length>300){r=true;break}}if(r){if(S(e.column))return;return[[],t[n].substr(e.column,50),[]]}return[t.slice(0,n),t[n],t.slice(n+1)]}function N(e,t,n,i,r,a){var s,o,l;if(!t)return;if(g.ignoreErrors.test(t))return;if(r&&r.length){n=r[0].filename||n;r.reverse();s={frames:r}}else if(n){s={frames:[{filename:n,lineno:i}]}}if(g.ignoreUrls&&g.ignoreUrls.test(n))return;if(g.whitelistUrls&&!g.whitelistUrls.test(n))return;o=i?t+" at "+i:t;P(F({exception:{type:e,value:t},stacktrace:s,culprit:n,message:o},a))}function F(e,t){if(!t){return e}A(t,function(t,n){e[t]=n});return e}function B(){var e={url:document.location.href,headers:{"User-Agent":navigator.userAgent}};if(document.referrer){e.headers.Referer=document.referrer}return e}function P(e){if(!Y())return;e=F({project:_,logger:g.logger,site:g.site,platform:"javascript",request:B()},e);e.tags=F(g.tags,e.tags);e.extra=F(g.extra,e.extra);if(T(e.tags))delete e.tags;if(T(e.extra))delete e.extra;if(p){e.user=p}if(E(g.dataCallback)){e=g.dataCallback(e)}if(E(g.shouldSendCallback)&&!g.shouldSendCallback(e)){return}f=e.event_id||(e.event_id=G());U(e)}function U(e){var t=new Image,n=h+R()+"&sentry_data="+encodeURIComponent(JSON.stringify(e));t.onload=function i(){y("success",{data:e,src:n})};t.onerror=t.onabort=function r(){y("failure",{data:e,src:n})};t.src=n}function Y(){if(!c)return false;if(!h){if(n.console&&console.error){console.error("Error: Raven has not been configured.")}return false}return true}function H(e){var t=[],n=0,i=e.length,r;for(;n<i;n++){r=e[n];if(k(r)){t.push(r.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"))}else if(r&&r.source){t.push(r.source)}}return new RegExp(t.join("|"),"i")}function G(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}v.afterLoad();n.Raven=v;if(true){!(i=[],r=function(){return v}.apply(t,i),r!==a&&(e.exports=r))}})(window);e.exports=Raven},function(e,t){(function(){var e=window.nv||{};e.version="0.0.1a";e.dev=false;window.nv=e;e.tooltip={};e.utils={};e.models={};e.charts={};e.graphs=[];e.logs={};e.dispatch=d3.dispatch("render_start","render_end");if(e.dev){e.dispatch.on("render_start",function(t){e.logs.startTime=+new Date});e.dispatch.on("render_end",function(t){e.logs.endTime=+new Date;e.logs.totalTime=e.logs.endTime-e.logs.startTime;e.log("total",e.logs.totalTime)})}e.log=function(){if(e.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(e.dev&&console.log&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]};e.render=function i(t){t=t||1;e.render.active=true;e.dispatch.render_start();setTimeout(function(){var n,i;for(var r=0;r<t&&(i=e.render.queue[r]);r++){n=i.generate();if(typeof i.callback==typeof Function)i.callback(n);e.graphs.push(n)}e.render.queue.splice(0,r);if(e.render.queue.length)setTimeout(arguments.callee,0);else{e.render.active=false;e.dispatch.render_end()}},0)};e.render.active=false;e.render.queue=[];e.addGraph=function(t){if(typeof arguments[0]===typeof Function)t={generate:arguments[0],callback:arguments[1]};e.render.queue.push(t);if(!e.render.active)e.render()};e.identity=function(e){return e};e.strip=function(e){return e.replace(/(\s|&)/g,"")};function t(e,t){return new Date(t,e+1,0).getDate()}function n(e,t,n){return function(i,r,a){var s=e(i),o=[];if(s<i)t(s);if(a>1){while(s<r){var l=new Date(+s);if(n(l)%a===0)o.push(l);t(s)}}else{while(s<r){o.push(new Date(+s));t(s)}}return o}}d3.time.monthEnd=function(e){return new Date(e.getFullYear(),e.getMonth(),0)};d3.time.monthEnds=n(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1);e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(e){return e.getMonth()});d3.svg.axisStatic=function(){var e=d3.scale.linear(),t=c,n=6,i=6,r=6,a=3,s=[10],o=null,l,u=0;var c="bottom",d={top:1,right:1,bottom:1,left:1};function f(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function h(e){return e.rangeExtent?e.rangeExtent():f(e.range())}function p(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function m(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function _(e,t,n){r=[];if(n&&t.length>1){var i=f(e.domain()),r,a=-1,s=t.length,o=(t[1]-t[0])/++n,l,u;while(++a<s){for(l=n;--l>0;){if((u=+t[a]-l*o)>=i[0]){r.push(u)}}}for(--a,l=0;++l<n&&(u=+t[a]+l*o)<i[1];){r.push(u)}}return r}function g(c){c.each(function(){var c=d3.select(this);var d=o==null?e.ticks?e.ticks.apply(e,s):e.domain():o,f=l==null?e.tickFormat?e.tickFormat.apply(e,s):String:l;var g=_(e,d,u),v=c.selectAll(".tick.minor").data(g,String),y=v.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1),b=v.exit().remove(),x=v.style("opacity",1);var w=c.selectAll(".tick.major").data(d,String),L=w.enter().insert("g","path").attr("class","tick major").style("opacity",1),S=w.exit().remove(),E=w.style("opacity",1),k;var T=h(e),M=c.selectAll(".domain").data([0]),A=(M.enter().append("path").attr("class","domain"),M);var C=e.copy();L.append("line");L.append("text");var R=L.select("line"),D=E.select("line"),I=w.select("text").text(f),O=L.select("text"),N=E.select("text");switch(t){case"bottom":{k=p;y.attr("y2",i);x.attr("x2",0).attr("y2",i);R.attr("y2",n);O.attr("y",Math.max(n,0)+a);D.attr("x2",0).attr("y2",n);N.attr("x",0).attr("y",Math.max(n,0)+a);I.attr("dy",".71em").style("text-anchor","middle");A.attr("d","M"+T[0]+","+r+"V0H"+T[1]+"V"+r);break}case"top":{k=p;y.attr("y2",-i);x.attr("x2",0).attr("y2",-i);R.attr("y2",-n);O.attr("y",-(Math.max(n,0)+a));D.attr("x2",0).attr("y2",-n);N.attr("x",0).attr("y",-(Math.max(n,0)+a));I.attr("dy","0em").style("text-anchor","middle");A.attr("d","M"+T[0]+","+-r+"V0H"+T[1]+"V"+-r);

break}case"left":{k=m;y.attr("x2",-i);x.attr("x2",-i).attr("y2",0);R.attr("x2",-n);O.attr("x",-(Math.max(n,0)+a));D.attr("x2",-n).attr("y2",0);N.attr("x",-(Math.max(n,0)+a)).attr("y",0);I.attr("dy",".32em").style("text-anchor","end");A.attr("d","M"+-r+","+T[0]+"H0V"+T[1]+"H"+-r);break}case"right":{k=m;y.attr("x2",i);x.attr("x2",i).attr("y2",0);R.attr("x2",n);O.attr("x",Math.max(n,0)+a);D.attr("x2",n).attr("y2",0);N.attr("x",Math.max(n,0)+a).attr("y",0);I.attr("dy",".32em").style("text-anchor","start");A.attr("d","M"+r+","+T[0]+"H0V"+T[1]+"H"+r);break}}if(e.ticks){L.call(k,C);E.call(k,C);S.call(k,C);y.call(k,C);x.call(k,C);b.call(k,C)}else{var F=C.rangeBand()/2,B=function(e){return C(e)+F};L.call(k,B);E.call(k,B)}})}g.scale=function(t){if(!arguments.length)return e;e=t;return g};g.orient=function(e){if(!arguments.length)return t;t=e in d?e+"":c;return g};g.ticks=function(){if(!arguments.length)return s;s=arguments;return g};g.tickValues=function(e){if(!arguments.length)return o;o=e;return g};g.tickFormat=function(e){if(!arguments.length)return l;l=e;return g};g.tickSize=function(e,t){if(!arguments.length)return n;var a=arguments.length-1;n=+e;i=a>1?+t:n;r=a>0?+arguments[a]:n;return g};g.tickPadding=function(e){if(!arguments.length)return a;a=+e;return g};g.tickSubdivide=function(e){if(!arguments.length)return u;u=+e;return g};return g};(function(){var e=window.nv.tooltip={};e.show=function(t,n,i,r,a,s){var o=document.createElement("div"),l=document.createElement("div"),u=document.createElement("div");i=i||"s";r=r||5;l.className="tooltip-inner";u.className="tooltip-arrow";l.innerHTML=n;o.style.left=0;o.style.top=-1e3;o.style.opacity=0;o.className="tooltip xy-tooltip in";o.appendChild(l);o.appendChild(u);a.appendChild(o);e.position(a,o,t,i,r);o.style.opacity=1;return o};e.cleanup=function(){var e=document.getElementsByClassName("tooltip"),t=[],n=e.length;while(n>0){n-=1;if(e[n].className.indexOf("xy-tooltip")!==-1){t.push(e[n]);e[n].style.transitionDelay="0 !important";e[n].style.opacity=0;e[n].className="nvtooltip-pending-removal out"}}setTimeout(function(){var e;while(t.length){e=t.pop();e.parentNode.removeChild(e)}},500)};e.position=function(e,t,n,i,r){i=i||"s";r=r||5;var a=e.getBoundingClientRect();var s=[n.clientX-a.left,n.clientY-a.top];var o=parseInt(t.offsetWidth,10),l=parseInt(t.offsetHeight,10),u=e.clientWidth,c=e.clientHeight,d=e.scrollLeft,f=e.scrollTop,h=t.className.replace(/ top| right| bottom| left/g,""),p,m;function _(){var e=s[0]-o/2;if(e<d)e=d;if(e+o>u)e=u-o;return e}function g(){var e=s[1]-l/2;if(e<f)e=f;if(e+l>f+c)e=f-l;return e}function v(e){var n=s[0]-o/2-e-5,i=t.getElementsByClassName("tooltip-arrow")[0];i.style.marginLeft=n+"px"}function y(e){var n=s[1]-l/2-e-5,i=t.getElementsByClassName("tooltip-arrow")[0];i.style.marginTop=n+"px"}switch(i){case"e":m=g();p=s[0]-o-r;y(m);if(p<d){p=s[0]+r;h+=" right"}else{h+=" left"}break;case"w":m=g();p=s[0]+r;y(m);if(p+o>u){p=s[0]-o-r;h+=" left"}else{h+=" right"}break;case"n":p=_();m=s[1]+r;v(p);if(m+l>f+c){m=s[1]-l-r;h+=" top"}else{h+=" bottom"}break;case"s":p=_();m=s[1]-l-r;v(p);if(f>m){m=s[1]+r;h+=" bottom"}else{h+=" top"}break}t.style.left=p+"px";t.style.top=m+"px";t.className=h}})();e.utils.windowSize=function(){var e={width:640,height:480};if(document.body&&document.body.offsetWidth){e.width=document.body.offsetWidth;e.height=document.body.offsetHeight}if(document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){e.width=document.documentElement.offsetWidth;e.height=document.documentElement.offsetHeight}if(window.innerWidth&&window.innerHeight){e.width=window.innerWidth;e.height=window.innerHeight}return e};e.utils.windowResize=function(e){if(window.attachEvent){window.attachEvent("onresize",e)}else if(window.addEventListener){window.addEventListener("resize",e,true)}else{}};e.utils.windowUnResize=function(e){if(window.detachEvent){window.detachEvent("onresize",e)}else if(window.removeEventListener){window.removeEventListener("resize",e,true)}else{}};e.utils.resizeOnPrint=function(e){if(window.matchMedia){var t=window.matchMedia("print");t.addListener(function(t){if(t.matches){e()}})}else if(window.attachEvent){window.attachEvent("onbeforeprint",e)}else{window.onbeforeprint=e}};e.utils.unResizeOnPrint=function(e){if(window.matchMedia){var t=window.matchMedia("print");t.removeListener(function(t){if(t.matches){e()}})}else if(window.detachEvent){window.detachEvent("onbeforeprint",e)}else{window.onbeforeprint=null}};e.utils.getColor=function(t){if(!arguments.length){return e.utils.defaultColor()}if(Object.prototype.toString.call(t)==="[object Array]"){return function(e,n){return e.color||t[n%t.length]}}else{return t}};e.utils.defaultColor=function(){var e=d3.scale.category20().range();return function(t,n){return t.color||e[n%e.length]}};e.utils.customTheme=function(e,t,n){t=t||function(e){return e.key};n=n||d3.scale.category20().range();var i=n.length;return function(r,a){var s=t(r);if(!i)i=n.length;if(typeof e[s]!=="undefined"){return typeof e[s]==="function"?e[s]():e[s]}else{return n[--i]}}};e.utils.pjax=function(t,n){d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href);i(this.href);d3.event.preventDefault()});function i(i){d3.html(i,function(i){var r=d3.select(n).node();r.parentNode.replaceChild(d3.select(i).select(n).node(),r);e.utils.pjax(t,n)})}d3.select(window).on("popstate",function(){if(d3.event.state){i(d3.event.state)}})};e.utils.NaNtoZero=function(e){if(typeof e!=="number"||isNaN(e)||e===null||e===Infinity)return 0;return e};e.utils.optionsFunc=function(e){if(e){d3.map(e).forEach(function(e,t){if(typeof this[e]==="function"){this[e](t)}}.bind(this))}return this};e.utils.colorLinearGradient=function(t,n,i,r,a){var s="lg_gradient_"+n,o=a.select("#"+s);if(o.empty()){if(i.position==="middle"){e.utils.createLinearGradient(s,i,a,[{offset:"0%","stop-color":d3.rgb(r).darker().toString(),"stop-opacity":1},{offset:"20%","stop-color":d3.rgb(r).toString(),"stop-opacity":1},{offset:"50%","stop-color":d3.rgb(r).brighter().toString(),"stop-opacity":1},{offset:"80%","stop-color":d3.rgb(r).toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(r).darker().toString(),"stop-opacity":1}])}else{e.utils.createLinearGradient(s,i,a,[{offset:"0%","stop-color":d3.rgb(r).darker().toString(),"stop-opacity":1},{offset:"50%","stop-color":d3.rgb(r).toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(r).brighter().toString(),"stop-opacity":1}])}}return"url(#"+s+")"};e.utils.createLinearGradient=function(e,t,n,i){var r=t.orientation==="horizontal"?"0%":"100%",a=t.orientation==="horizontal"?"100%":"0%",s=n.append("linearGradient").attr("id",e).attr("x1","0%").attr("y1","0%").attr("x2",r).attr("y2",a).attr("spreadMethod","pad");for(var o=0;o<i.length;o+=1){var l=i[o],u=s.append("stop");for(var c in l){if(l.hasOwnProperty(c)){u.attr(c,l[c])}}}};e.utils.colorRadialGradient=function(t,n,i,r,a){var s="rg_gradient_"+n,o=a.select("#"+s);if(o.empty()){e.utils.createRadialGradient(s,i,a,[{offset:i.s,"stop-color":d3.rgb(r).brighter().toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(r).darker().toString(),"stop-opacity":1}])}return"url(#"+s+")"};e.utils.createRadialGradient=function(e,t,n,i){var r=n.append("radialGradient").attr("id",e).attr("r",t.r).attr("cx",t.x).attr("cy",t.y).attr("gradientUnits",t.u).attr("spreadMethod","pad");for(var a=0;a<i.length;a+=1){var s=i[a],o=r.append("stop");for(var l in s){if(s.hasOwnProperty(l)){o.attr(l,s[l])}}}};e.utils.getAbsoluteXY=function(e){var t=document.documentElement,n=e.getBoundingClientRect(),i=t.scrollLeft+document.body.scrollLeft,r=t.scrollTop+document.body.scrollTop,a=n.left+i,s=n.top+r;return{left:a,top:s}};e.utils.roundedRectangle=function(e,t,n,i,r){return"M"+e+","+t+"h"+(n-r*2)+"a"+r+","+r+" 0 0 1 "+r+","+r+"v"+(i-2-r*2)+"a"+r+","+r+" 0 0 1 "+-r+","+r+"h"+(r*2-n)+"a"+-r+","+r+" 0 0 1 "+-r+","+-r+"v"+(-i+r*2+2)+"a"+r+","+r+" 0 0 1 "+r+","+-r+"z"};e.utils.dropShadow=function(e,t,n){var i=n||{},r=i.height||"130%",a=i.offset||2,s=i.blur||1;if(t.select("#"+e).empty()){var o=t.append("filter").attr("id",e).attr("height",r);var l=o.append("feOffset").attr("in","SourceGraphic").attr("result","offsetBlur").attr("dx",a).attr("dy",a);var u=o.append("feColorMatrix").attr("in","offsetBlur").attr("result","matrixOut").attr("type","matrix").attr("values","1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0");var c=o.append("feGaussianBlur").attr("in","matrixOut").attr("result","blurOut").attr("stdDeviation",s);var d=o.append("feMerge");d.append("feMergeNode");d.append("feMergeNode").attr("in","SourceGraphic")}return"url(#"+e+")"};e.utils.stringSetLengths=function(e,t,n,i,r){var a=[],s=t.select(".tmp-text-strings").select("text");if(s.empty()){s=t.append("g").attr("class","tmp-text-strings").append("text")}s.classed(i,true);s.style("display","inline");e.forEach(function(e,t){s.text(n(e,t));a.push(s.node().getBoundingClientRect().width)});s.text("").attr("class","tmp-text-strings").style("display","none");return a};e.utils.stringSetThickness=function(e,t,n,i,r){var a=[],s=t.select(".tmp-text-strings").select("text");if(s.empty()){s=t.append("g").attr("class","tmp-text-strings").append("text")}s.classed(i,true);s.style("display","inline");e.forEach(function(e,t){s.text(n(e,t));a.push(s.node().getBoundingClientRect().height)});s.text("").attr("class","tmp-text-strings").style("display","none");return a};e.utils.maxStringSetLength=function(t,n,i){var r=e.utils.stringSetLengths(t,n,i);return d3.max(r)};e.utils.stringEllipsify=function(e,t,n){var i=t.select(".tmp-text-strings").select("text"),r=e,a=0,s=0,o=0;if(i.empty()){i=t.append("g").attr("class","tmp-text-strings").append("text")}i.style("display","inline");i.text("...");s=i.node().getBoundingClientRect().width;i.text(r);a=i.node().getBoundingClientRect().width;o=a;while(a>n&&a>30){r=r.slice(0,-1);i.text(r);a=i.node().getBoundingClientRect().width+s}i.text("");return r+(o>n?"...":"")};e.utils.getTextBBox=function(e,t){var n=e.node().getBoundingClientRect(),i={width:t?n.width:parseInt(n.width,10),height:t?n.height:parseInt(n.height,10)};return i};e.utils.getTextContrast=function(e,t,n){var i=e,r=d3.lab(i),a=r.l,s=a>60?r.darker(4+(a-75)/25).l:r.brighter(4+(18-a)/25).l,o=d3.lab(s,0,0),l=o.toString();if(n){n(r,o)}return l};e.utils.isRTLChar=function(e){var t="---",n=new RegExp("["+t+"]");return n.test(e)};e.utils.polarToCartesian=function(t,n,i,r){var a=e.utils.angleToRadians(r);var s=t+i*Math.cos(a);var o=n+i*Math.sin(a);return[s,o]};e.utils.angleToRadians=function(e){return e*Math.PI/180};e.utils.angleToDegrees=function(e){return e*180/Math.PI};e.utils.createTexture=function(e,t,n,i){var r="#nv-diagonalHatch-"+t,a="#nv-textureMask-"+t;e.append("pattern").attr("id","nv-diagonalHatch-"+t).attr("patternUnits","userSpaceOnUse").attr("width",8).attr("height",8).append("path").attr("d","M-1,1 l2,-2 M0,8 l8,-8 M7,9 l1,-1").attr("class","texture-line").attr("stroke","#fff").attr("stroke-linecap","square");e.append("mask").attr("id","nv-textureMask-"+t).attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").append("rect").attr("x",n||0).attr("y",i||-1).attr("width","100%").attr("height","100%").attr("fill","url("+r+")");return a};e.utils.numberFormatSI=function(e,t,n,i){var r,a,s;if(isNaN(e)){return e}t=typeof t==="undefined"?2:t;n=typeof n==="undefined"?false:!!n;r=typeof i==="undefined"?d3.format:d3.locale(i).numberFormat;e=d3.round(e,t);a=n?"$,":",";if(n&&e<1e3&&e!==parseInt(e,10)){a+=".2f"}if(e<1&&e>-1){return r(a)(e)}s=d3.formatPrefix(e);return r(a)(d3.round(s.scale(e),t))+s.symbol};e.utils.numberFormatRound=function(e,t,n,i){var r,a;if(isNaN(e)){return e}n=typeof n==="undefined"?false:!!n;t=typeof t==="undefined"?n?2:0:t;r=typeof i==="undefined"?d3.format:d3.locale(i).numberFormat;a=n?"$,."+t+"f":",";return r(a)(t?d3.round(e,t):e)};e.utils.isValidDate=function(e){var t;if(!e){return false}t=new Date(e);return t instanceof Date&&!isNaN(t.valueOf())};e.utils.dateFormat=function(t,n,i){var r,a,s,o;r=new Date(t);if(!(r instanceof Date)||isNaN(r.valueOf())){return t}if(i&&i.hasOwnProperty("timeFormat")){s=n.indexOf("%")!==-1?n:"%x";o=i.timeFormat}else{a=e.utils.buildLocality(i);s=n.indexOf("%")!==-1?n:a[n]||"%x";o=d3.locale(a).timeFormat}return o(s)(r)};e.utils.buildLocality=function(e,t){var n=e||{},i=!!t,r=function(e){return e.join("|").split("|").map(function(e){return!e?"":isNaN(e)?e:+e})},a={decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%B %-d, %Y at %X %p GMT%Z",date:"%b %-d, %Y",time:"%-I:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],full:"%A, %c","long":"%c",medium:"%x, %X %p","short":"%-m/%-d/%y, %-I:%M %p",yMMMEd:"%a, %x",yMEd:"%a, %-m/%-d/%Y",yMMMMd:"%B %-d, %Y",yMMMd:"%x",yMd:"%-m/%-d/%Y",yMMMM:"%B %Y",yMMM:"%b %Y",MMMd:"%b %-d",MMMM:"%B",MMM:"%b",y:"%Y"};for(var s in n){var t;if(e.hasOwnProperty(s)){t=n[s];a[s]=!i||!Array.isArray(t)?t:r(t)}}return a};e.models.axis=function(){var t=d3.scale.linear(),n=null,i=true,r=true,a="ltr",s=false,o=false,l=30,u=false,c=true,d=false,f=null,h=null,p=function(e){return e},m=8;var _={top:0,right:0,bottom:0,left:0},g=0;var v=d3.svg.axisStatic().scale(t).orient("bottom").tickFormat(function(e){return p(e)});var y;function b(u){u.each(function(u){var p=d3.select(this);var x=v.scale().copy();var w={top:0,right:0,bottom:0,left:0};var L=ee();var S=Math.abs(L[1]-L[0]);y=y||v.scale();var E=v.orient()==="left"||v.orient()==="right"?true:false,k=v.orient()==="left"||v.orient()==="top"?-1:1,T=0,M=0,A=6,C=0,R=0;var D=[],I={},O=[],N={},F={};g=0;if(h!==null){v.ticks(h)}else if(E){v.ticks(Math.ceil(S/48))}else{v.ticks(Math.ceil(S/100))}if(l&&!isFinite(String(l))){l=30}if(d){i=false}var B=p.selectAll("g.nv-wrap.nv-axis").data([u]),P=B.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g").attr("class","nv-axis-inner"),U=B.select(".nv-axis-inner");U.call(v);var Y=U.selectAll("g.tick");var H=i?d3.extent(t.domain()):[];var G=U.selectAll("g.nv-axisMaxMin").data(H);var j=G.enter().append("g").attr("class","nv-axisMaxMin");j.append("text").style("opacity",0);j.append("line").style("opacity",0);G.exit().remove();if(i){G.select("text").text(function(e,t){return v.tickFormat()(e,t,false)})}var V=U.selectAll("g.tick, g.nv-axisMaxMin").select("text").filter(function(e){return this.getBoundingClientRect().width});V.each(function(e,t){O.push(d3.select(this).text())});var z=!!n?[n]:[];var $=B.selectAll("text.nv-axislabel").data(z);$.enter().append("text").attr("class","nv-axislabel").text(function(e){return e});$.exit().remove();var q=false,W=false,K=false;if(E){fe();V.style("text-anchor",ae(f||(se()?"start":"end")))}else{fe();de();if(ce(1)){if(s){fe();he();de();he();if(!ce(1)){q=true}}if(!q&&o){fe();pe();de();pe();if(!ce(2)){W=true}}if(!q&&!W){if(!l){l=30}fe();me(l);de(l);me(l);K=true}}}if(i){G.select("line").attr("x1",0).attr("y1",0).attr("y2",E?0:(v.tickSize()-w.bottom)*k).attr("x2",E?v.tickSize()*k:0).style("opacity",function(e,t){return se()?t?0:1:t?1:0});Y.each(function(e,t){var n=d3.select(this),i=I["key-"+e.toString()],r=false;if(E){r=i.bottom>N.top||i.top<F.bottom;n.select("line").style("opacity",1-r)}else if(K){r=false}else if(W){r=(i.left<N.right+A||i.right>F.left+A)&&(i.bottom<N.top||i.top>F.bottom)}else{r=i.left<N.right+A||i.right>F.left+A}n.select("text").style("opacity",1-r)})}else{Y.filter(function(e){return x(e)===L[0+se()]}).classed("zero",r);Y.select("line").style("opacity",function(e,t){return x(e)===L[0+se()]?0:1})}if(!!n){var J=E?c?S/-2:(g+m)*k:S/2;var X=E?c?(g+m)*k:S/2:(g+m)*k;$.attr("x",J).attr("y",X).attr("dy",.355+.355*k+"em").attr("transform",E&&c?"rotate(-90)":"").style("text-anchor",E&&!c?ae("end"):"middle");$.each(function(e,t){R+=E?parseInt(this.getBoundingClientRect().width/1.3,10):parseInt(this.getBoundingClientRect().height/1.3,10)});g+=R+m}y=t.copy();_={top:w.top,right:w.right,bottom:w.bottom,left:w.left};_[v.orient()]=g;function Z(){return x.range().length>1?Math.abs(x.range()[1]-x.range()[0]):0}function Q(){return x.range().length>1?Math.max(.25,1-d3.round(x.rangeBand()/Z(),2)):0}function ee(){return typeof x.rangeExtent==="function"?x.rangeExtent():x.range()}function te(){return d?x.rangeBand():0}function ne(){return d?x.range()[0]:0}function ie(){return ne()/re()}function re(){var e=0,t;if(d){e=x.range().length>1?Math.abs(x.range()[1]-x.range()[0]):d3.max(ee())/2}else{t=x.ticks(Y.size());e=x(t[t.length-1])-x(t[t.length-2])}return e}function ae(e){if(a==="rtl"){if(e==="start"){return"end"}else if(e==="end"){return"start"}}return e}function se(){return v.orient()!=="left"&&v.orient()!=="bottom"}function oe(e){e=e||1;g=v.tickPadding()+(E?T:M)*e}function le(){ue();T=d3.max(D,function(e){return e.width});M=d3.max(D,function(e){return e.height})}function ue(){D=[];I={};if(i){G.style("opacity",1).attr("transform",function(e,t){var n=E?"0,"+x(e):x(e)+",0";return"translate("+n+")"})}V.each(function(e,t){var n=this.getBoundingClientRect();if(n.width>0){D.push({key:e,width:parseInt(n.width,10),height:parseInt(n.height/1.2,10),left:n.left,right:n.right,top:n.top,bottom:n.bottom})}});D.sort(function(e,t){return e.key-t.key}).forEach(function(e,t){e.index=t;I["key-"+e.key.toString()]=e});N=D[0];F=D[D.length-1]}function ce(e){ue();var t=i?2:e||1;for(var n=i?1:0,r=D.length-t;n<r;n+=1){if(D[n].right+A>D[n+e].left){return true}}return false}function de(e){var t=e?(e+180)%180:0,n=t>90,i=null,r=null;D.forEach(function(e,a){var s=i===null||e.left<=i,o=r===null||e.right>=r,l=0,u=0,c=0,l=0;if(!s&&!o){return}l=t?e.width-6:e.width/2;u=x(e.key)+d*te()/2;if(s&&(!t||n)){i=e.left;c=Math.abs(L[0]-u);w.left=Math.max(l-c,0)}if(o&&(!t||!n)){r=e.right;c=Math.abs(L[1]-u);w.right=Math.max(l-c,0)}});if(!d){var a=_.right-Math.max(_.right,w.right);a+=_.left-Math.max(_.left,w.left);var s=[L[0],L[1]+a];x.range(s);L=ee();S=Math.abs(L[1]-L[0]);v.scale(x);U.call(v)}}function fe(){w={top:0,right:0,bottom:0,left:0};x=t.copy();L=ee();S=Math.abs(L[1]-L[0]);v.scale(t);U.call(v);V.selectAll("tspan").remove();V.attr("dy",E?".32em":.355+.355*k+"em").attr("x",E?v.tickPadding()*k:0).attr("y",E?0:v.tickPadding()*k).attr("transform","translate(0,0)").text(function(e,t){return O[t]}).style("text-anchor","middle").style("opacity",1);le();oe()}function he(){C=re();V.each(function(t,n){var i=v.tickFormat()(t,n,true),r=d3.select(this),a=e.utils.isValidDate(i),s=(i&&i!==""?a?i.toString():i.toString().replace("/","/ "):"").split(" "),n=0,o=s.length,l=k===1?.71:-1;this.textContent="";var u,c=r.append("tspan").text(s[n]+" ").attr("dy",l+"em").attr("x",0);n+=1;l=1;while(n<o){c=r.append("tspan").text(s[n]+" ").attr("dy",l+"em").attr("x",0);n+=1;while(n<o){u=c.text();c.text(u+" "+s[n]);if(this.getBoundingClientRect().width<=C){n+=1}else{c.text(u);break}}}});le();oe()}function pe(){V.attr("transform",function(e,t){var n=I["key-"+e.toString()].index%2*(M+2);return"translate(0,"+n+")"});le();oe(2)}function me(e){var t=(e+180)%180,n=t>90,i=(t-(n?180:0))*k,r=ae(n?"end":"start"),a=Math.abs(Math.cos(e*Math.PI/180));V.attr("transform",function(e,t,n){return"translate(0,"+v.tickPadding()*k+") rotate("+i+")"}).attr("y","0").style("text-anchor",r);le();oe();g+=a*11}b.resizeTickLines=function(e){U.selectAll("g.tick, g.nv-axisMaxMin").select("line").attr(E?"x2":"y2",e*k)};b.labelThickness=function(){return R}});return b}b.axis=v;d3.rebind(b,v,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat");d3.rebind(b,t,"domain","range","rangeBand","rangeBands");b.width=function(e){if(!arguments.length){return g}return b};b.height=function(e){if(!arguments.length){return g}return b};b.margin=function(e){if(!arguments.length){return _}_=e;return b};b.ticks=function(e){if(!arguments.length){return h}h=e;return b};b.valueFormat=function(e){if(!arguments.length){return p}p=e;return b};b.axisLabel=function(e){if(!arguments.length){return n}n=e;return b};b.showMaxMin=function(e){if(!arguments.length){return i}i=e;return b};b.highlightZero=function(e){if(!arguments.length){return r}r=e;return b};b.scale=function(e){if(!arguments.length){return t}t=e;v.scale(t);d=typeof t.rangeBands==="function";d3.rebind(b,t,"domain","range","rangeBand","rangeBands");return b};b.wrapTicks=function(e){if(!arguments.length){return s}s=e;return b};b.rotateTicks=function(e){if(!arguments.length){return l}l=e;return b};b.staggerTicks=function(e){if(!arguments.length){return o}o=e;return b};b.reduceXTicks=function(e){if(!arguments.length){return u}u=e;return b};b.rotateYLabel=function(e){if(!arguments.length){return c}c=e;return b};b.axisLabelDistance=function(e){if(!arguments.length){return m}m=e;return b};b.maxLabelWidth=function(e){if(!arguments.length){return maxLabelWidth}maxLabelWidth=e;return b};b.textAnchor=function(e){if(!arguments.length){return f}f=e;return b};b.direction=function(e){if(!arguments.length){return a}a=e;return b};return b};e.models.legend=function(){var t={top:10,right:10,bottom:15,left:10},n=0,i=0,r="right",a="ltr",s="start",o=6,l=o*2,u=10,c=12,d=5,f=true,h=false,p=false,m=false,_=3,g=false,v={close:"Hide legend",type:"Show legend",noLabel:"undefined"},y=Math.floor(Math.random()*1e4),b=function(e){return e.key.length>0||!isNaN(parseFloat(e.key))&&isFinite(e.key)?e.key:A.strings().noLabel},x=function(t,n){return e.utils.defaultColor()(t,n)},w=function(e,t){return""},L=d3.dispatch("legendClick","legendMouseover","legendMouseout","toggleMenu","closeMenu");var S=0;var E=false,k=true,T=0,M=function(e){return};function A(v){v.each(function(v){var C=d3.select(this),R=n,D=i,I=[],O=0,N=0,F="",B=s==="start"?true:false,P=a==="rtl"?true:false,U=c*(B?1:.6),Y=u+(B?l+d:0);if(!v||!v.length||!v.filter(function(e){return!e.values||e.values.length}).length){return A}var H=v.filter(function(e){return e.hasOwnProperty("series")}).length;v.filter(function(e){return!e.hasOwnProperty("series")}).map(function(e,t){e.series=H;H+=1});g=true;F=!v[0].type||v[0].type==="bar"?"bar":"line";r=P&&r!=="center"?r==="left"?"right":"left":r;var G=C.selectAll("g.nv-chart-legend").data([v]);var j=G.enter().append("g").attr("class","nv-chart-legend");j.append("defs").append("clipPath").attr("id","nv-edge-clip-"+y).append("rect");var V=G.select("defs");var z=G.select("#nv-edge-clip-"+y+" rect");j.append("rect").attr("class","nv-legend-background");var $=G.select(".nv-legend-background");var q=e.utils.dropShadow("legend_back_"+y,V,{blur:2});j.append("text").attr("class","nv-legend-link");var W=G.select(".nv-legend-link");j.append("g").attr("class","nv-legend-mask").append("g").attr("class","nv-legend");var K=G.select(".nv-legend-mask");var J=G.select("g.nv-legend");J.attr("transform","translate(0,0)");var X=J.selectAll(".nv-series").data(e.identity,function(e){return e.key});X.exit().remove();var Z=X.enter().append("g").attr("class","nv-series").on("mouseover",function(e,t){L.legendMouseover(e,t)}).on("mouseout",function(e,t){L.legendMouseout(e,t)}).on("click",function(e,t){d3.event.preventDefault();d3.event.stopPropagation();L.legendClick(e,t)});var Q=J.selectAll(".nv-series");Z.append("rect").attr("x",(l+d)/-2).attr("y",(l+U)/-2).attr("width",l+d).attr("height",l+U).style("fill","#FFE").style("opacity",.1);var ee=X.selectAll("circle").data(function(e){return F==="line"?[e,e]:[e]});ee.exit().remove();ee.enter().append("circle").attr("r",o).attr("stroke","#fff").style("stroke-width",2);if(F==="line"){var te=X.selectAll("line").data(function(e){return[e]});te.exit().remove();te.enter().append("line").attr("x0",0).attr("y0",0).attr("y1",0).style("stroke-width","4px")}Z.append("text").attr("dy",B?".36em":".71em").attr("dx",0);z.attr("x",.5).attr("y",.5).attr("width",0).attr("height",0);$.attr("x",.5).attr("y",.5).attr("width",0).attr("height",0).style("opacity",0).style("pointer-events","all").on("click",function(e,t){d3.event.stopPropagation()});W.text(S===1?A.strings().close:A.strings().open).attr("text-anchor",r==="left"?P?"end":"start":P?"start":"end").attr("dy",".36em").attr("dx",0).style("opacity",0).on("click",function(e,t){d3.event.preventDefault();d3.event.stopPropagation();L.toggleMenu(e,t)});Q.selectAll("circle").attr("class",function(e,t){return w(e,t)}).attr("fill",function(e,t){return x(e,t)}).attr("stroke",function(e,t){return x(e,t)});Q.select("line").attr("class",function(e,t){return w(e,t)}).attr("stroke",function(e,t){return x(e,t)});Q.select("text").text(b);Q.classed("disabled",function(e){return e.disabled});A.calculateWidth=function(){I=[];J.style("display","inline");Q.select("text").each(function(e,t){var n=d3.select(this).node().getBoundingClientRect().width;I.push(Math.max(Math.floor(n),F==="line"?50:20))});A.width(d3.sum(I)+I.length*Y-u);return A.width()};A.getLineHeight=function(){J.style("display","inline");var e=Math.floor(Q.select("text").node().getBoundingClientRect().height);return e};A.arrange=function(e){if(I.length===0){this.calculateWidth()}function n(e){return I[e]+Y}function i(e){return I[e]+Y-u}function a(e){return e?1:-1}var g=I.length,v=1,b=g,x=[],w=[],L=e-t.left-t.right,C=0,R=0,H=this.getLineHeight(),G=l+(B?0:H)+U,j={top:7,right:7,bottom:7,left:7},V=0,X=0,Z,ee,te;if(f){while(b>0){x=[];for(Z=0;Z<g;Z+=1){if(n(Z)>(x[Z%b]||0)){x[Z%b]=n(Z)}}if(d3.sum(x)-u<L){break}b-=1}b=b||1;v=Math.ceil(g/b);C=d3.sum(x)-u;for(Z=0;Z<g;Z+=1){ee=Z%b;if(B){if(ee===0){V=P?C:0}else{V+=x[ee-1]*a(!P)}}else{if(ee===0){V=(P?C:0)+(x[ee]-u)/2*a(!P)}else{V+=(x[ee-1]+x[ee])/2*a(!P)}}X=Math.floor(Z/b)*G;w[Z]={x:V,y:X}}}else{if(P){V=L;for(Z=0;Z<g;Z+=1){if(V-i(Z)<0){C=Math.max(C,i(Z));V=L;if(Z){v+=1}}if(V-i(Z)>C){C=V-i(Z)}w[Z]={x:V,y:(v-1)*(U+l)};V-=n(Z)}}else{V=0;for(Z=0;Z<g;Z+=1){if(Z&&V+i(Z)>L){V=0;v+=1}if(V+i(Z)>C){C=V+i(Z)}w[Z]={x:V,y:(v-1)*(U+l)};V+=n(Z)}}}if(!p&&(h||v<=_)){S=0;m=false;E=false;A.width(t.left+C+t.right).height(t.top+v*G-U+t.bottom);switch(r){case"left":te=0;break;case"center":te=(e-A.width())/2;break;case"right":te=0;break}z.attr("y",0).attr("width",A.width()).attr("height",A.height());$.attr("x",te).attr("width",A.width()).attr("height",A.height()).attr("rx",0).attr("ry",0).attr("filter","none").style("display","inline").style("opacity",0);K.attr("clip-path","none").attr("transform",function(e,n){var i=te+t.left+(B?o*a(!P):0),r=t.top+j.top;return"translate("+i+","+r+")"});J.style("opacity",1).style("display","inline");Q.attr("transform",function(e){var t=w[e.series];return"translate("+t.x+","+t.y+")"});Q.select("rect").attr("x",function(e){var t=0;if(B){t=(l+u)/2*a(P);t-=P?n(e.series):0}else{t=n(e.series)/-2}return t}).attr("width",function(e){return n(e.series)}).attr("height",G);Q.selectAll("circle").attr("r",function(e){return e.type==="dash"?0:o}).attr("transform",function(e,t){var n=B||F==="bar"?0:o*3*a(t);return"translate("+n+",0)"});Q.select("line").attr("x1",function(e){return e.type==="dash"?o*8:o*4}).attr("transform",function(e){var t=o*(e.type==="dash"?-4:-2);return"translate("+t+",0)"}).style("stroke-dasharray",function(e){return e.type==="dash"?"8, 8":"none"}).style("stroke-dashoffset",-4);Q.select("text").attr("dy",B?".36em":".71em").attr("text-anchor",s).attr("transform",function(e){var t=B?(o+d)*a(!P):0,n=B?0:(l+U)/2;return"translate("+t+","+n+")"})}else{m=true;E=true;A.width(j.left+d3.max(I)+l+d+j.right).height(t.top+l+t.top);O=j.top+l*g+c*(g-1)+j.bottom;N=Math.min(D-A.height(),O);z.attr("x",.5-j.top-o).attr("y",.5-j.top-o).attr("width",A.width()).attr("height",N);$.attr("x",.5).attr("y",.5+A.height()).attr("width",A.width()).attr("height",N).attr("rx",2).attr("ry",2).attr("filter",q).style("opacity",S*.9).style("display",S?"inline":"none");W.attr("transform",function(e,n){var i=r==="left"?.5:.5+A.width(),a=t.top+o;return"translate("+i+","+a+")"}).style("opacity",1);K.attr("clip-path","url(#nv-edge-clip-"+y+")").attr("transform",function(e,t){var n=j.left+o,i=A.height()+j.top+o;return"translate("+n+","+i+")"});J.style("opacity",S).style("display",S?"inline":"none").attr("transform",function(e,t){var n=P?d3.max(I)+o:0;return"translate("+n+",0)"});Q.attr("transform",function(e,t){var n=t*(l+c);return"translate(0,"+n+")"});Q.select("rect").attr("x",function(e){var t=(l+u)/2*a(P);t-=P?n(e.series):0;return t}).attr("width",function(e){return n(e.series)}).attr("height",l+U);Q.selectAll("circle").attr("r",function(e){return e.type==="dash"?0:e.type==="line"?o-2:o}).attr("transform","");Q.select("line").attr("x1",16).attr("transform","translate(-8,0)").style("stroke-dasharray",function(e){return e.type==="dash"?"6, 4, 6":"none"}).style("stroke-dashoffset",0);Q.select("text").attr("text-anchor","start").attr("dy",".36em").attr("transform",function(e){var t=(o+d)*a(!P);return"translate("+t+",0)"})}if(k){var ne=N-O;var ie=function(e){if(e){var t=d3.behavior.zoom().on("zoom",re);var n=d3.behavior.drag().origin(function(e){return e}).on("drag",re);$.call(t);J.call(t);$.call(n);J.call(n)}else{$.on("mousedown.zoom",null).on("mousewheel.zoom",null).on("mousemove.zoom",null).on("DOMMouseScroll.zoom",null).on("dblclick.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null).on("wheel.zoom",null);J.on("mousedown.zoom",null).on("mousewheel.zoom",null).on("mousemove.zoom",null).on("DOMMouseScroll.zoom",null).on("dblclick.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null).on("wheel.zoom",null);$.on("mousedown.drag",null).on("mousewheel.drag",null).on("mousemove.drag",null).on("DOMMouseScroll.drag",null).on("dblclick.drag",null).on("touchstart.drag",null).on("touchmove.drag",null).on("touchend.drag",null).on("wheel.drag",null);J.on("mousedown.drag",null).on("mousewheel.drag",null).on("mousemove.drag",null).on("DOMMouseScroll.drag",null).on("dblclick.drag",null).on("touchstart.drag",null).on("touchmove.drag",null).on("touchend.drag",null).on("wheel.drag",null)}};var re=function(){var e=0,t=0,n="",i=0,r=0;if(d3.event){if(d3.event.type==="zoom"&&d3.event.sourceEvent){i=d3.event.sourceEvent.deltaX||0;r=d3.event.sourceEvent.deltaY||0;e=(Math.abs(i)>Math.abs(r)?i:r)*-1}else if(d3.event.type==="drag"){i=d3.event.dx||0;r=d3.event.dy||0;e=r}else if(d3.event.type!=="click"){return 0}t=Math.abs(r)>Math.abs(i)?r:0}T=Math.min(Math.max(T+e,ne),0);n="translate("+(P?d3.max(I)+o:0)+","+T+")";if(T+e>0||T+e<ne){M(t)}J.attr("transform",n)};ie(E)}};function ne(){$.style("opacity",S*.9).style("display",S?"inline":"none");J.style("opacity",S).style("display",S?"inline":"none");W.text(S===1?A.strings().close:A.strings().open)}L.on("toggleMenu",function(e){d3.event.stopPropagation();S=1-S;ne()});L.on("closeMenu",function(e){if(S===1){S=0;ne()}})});return A}A.dispatch=L;A.margin=function(e){if(!arguments.length){return t}t.top=typeof e.top!=="undefined"?e.top:t.top;t.right=typeof e.right!=="undefined"?e.right:t.right;t.bottom=typeof e.bottom!=="undefined"?e.bottom:t.bottom;t.left=typeof e.left!=="undefined"?e.left:t.left;return A};A.width=function(e){if(!arguments.length){return n}n=Math.round(e);return A};A.height=function(e){if(!arguments.length){return i}i=Math.round(e);return A};A.id=function(e){if(!arguments.length){return y}y=e;return A};A.key=function(e){if(!arguments.length){return b}b=e;return A};A.color=function(t){if(!arguments.length){return x}x=e.utils.getColor(t);return A};A.classes=function(e){if(!arguments.length){return w}w=e;return A};A.align=function(e){if(!arguments.length){return r}r=e;return A};A.position=function(e){if(!arguments.length){return s}s=e;return A};A.showAll=function(e){if(!arguments.length){return h}h=e;return A};A.showMenu=function(e){if(!arguments.length){return p}p=e;return A};A.collapsed=function(e){return m};A.rowsCount=function(e){if(!arguments.length){return _}_=e;return A};A.spacing=function(e){if(!arguments.length){return c}c=e;return A};A.gutter=function(e){
if(!arguments.length){return u}u=e;return A};A.radius=function(e){if(!arguments.length){return o}o=e;return A};A.strings=function(e){if(!arguments.length){return v}v=e;return A};A.equalColumns=function(e){if(!arguments.length){return f}f=e;return A};A.enabled=function(e){if(!arguments.length){return g}g=e;return A};A.direction=function(e){if(!arguments.length){return a}a=e;return A};return A};e.models.scroll=function(){var e,t={},n,i,r,a,s,o,l;function u(c,d,f,h){var p=c.select("defs"),m=d.select("defs"),_,g,v=f.select(".nv-x.nv-axis"),y=f.select(".nv-barsWrap"),b,x;var w=0;u.init=function(e,t){w=e;o=t;this.gradients(l);this.mask(l);this.scrollTarget(l);this.backShadows(l);this.foreShadows(l);this.assignEvents(l);this.resize(l)};u.pan=function(e){var t=0,i=0,r="",a=0,s=0;if(d3.event){if(d3.event.type==="zoom"&&d3.event.sourceEvent){a=d3.event.sourceEvent.deltaX||0;s=d3.event.sourceEvent.deltaY||0;t=(Math.abs(a)>Math.abs(s)?a:s)*-1}else if(d3.event.type==="drag"){a=d3.event.dx||0;s=d3.event.dy||0;t=n?a:s}else if(d3.event.type!=="click"){return 0}i=Math.abs(s)>Math.abs(a)?s:0}w=Math.min(Math.max(w+t,e),-1);r="translate("+(n?w+",0":"0,"+w)+")";if(w+t>0||w+t<e){o(i)}x.attr("transform",r);y.attr("transform",r);v.select(".nv-wrap.nv-axis").attr("transform",r);return w};u.assignEvents=function(e){if(e){var t=d3.behavior.zoom().on("zoom",s);var n=d3.behavior.drag().origin(function(e){return e}).on("drag",s);f.call(t);g.call(t);f.call(n);g.call(n)}else{f.on("mousedown.zoom",null).on("mousewheel.zoom",null).on("mousemove.zoom",null).on("DOMMouseScroll.zoom",null).on("dblclick.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null).on("wheel.zoom",null);g.on("mousedown.zoom",null).on("mousewheel.zoom",null).on("mousemove.zoom",null).on("DOMMouseScroll.zoom",null).on("dblclick.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null).on("wheel.zoom",null);f.on("mousedown.drag",null).on("mousewheel.drag",null).on("mousemove.drag",null).on("DOMMouseScroll.drag",null).on("dblclick.drag",null).on("touchstart.drag",null).on("touchmove.drag",null).on("touchend.drag",null).on("wheel.drag",null);g.on("mousedown.drag",null).on("mousewheel.drag",null).on("mousemove.drag",null).on("DOMMouseScroll.drag",null).on("dblclick.drag",null).on("touchstart.drag",null).on("touchmove.drag",null).on("touchend.drag",null).on("wheel.drag",null)}};u.resize=function(e){if(!e){return}var s=h.labelThickness()+h.tickPadding()/2,o=n,l=o?t.left:s,u=t.top,c=i+(o?0:t[h.orient()]-s),d=r+(o?t[h.orient()]-s:0),f=o?"height":"width",p=o?d:c;_.attr("x",o?2:-t.left).attr("y",o?0:2).attr("width",i+(o?-2:t.left)).attr("height",r+(o?t.bottom:-2));g.attr("x",l).attr("y",u).attr("width",c).attr("height",d);b.select(".nv-back-shadow-prev").attr("x",l).attr("y",u).attr(f,p);b.select(".nv-back-shadow-more").attr("x",l+(o?i-5:1)).attr("y",u+(o?0:r-6)).attr(f,p);x.select(".nv-fore-shadow-prev").attr("x",l+(o?1:0)).attr("y",u+(o?0:1)).attr(f,p);x.select(".nv-fore-shadow-more").attr("x",l+(o?a-17:0)).attr("y",u+(o?0:a-19)).attr(f,p)};u.gradients=function(t){m.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-back-gradient-prev-"+e);var i=m.select("#nv-back-gradient-prev-"+e);m.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-back-gradient-more-"+e);var r=m.select("#nv-back-gradient-more-"+e);m.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-fore-gradient-prev-"+e);var a=m.select("#nv-fore-gradient-prev-"+e);m.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-fore-gradient-more-"+e);var s=m.select("#nv-fore-gradient-more-"+e);p.selectAll(".nv-scroll-gradient").attr("gradientUnits","objectBoundingBox").attr("x1",0).attr("y1",0).attr("x2",n?1:0).attr("y2",n?0:1);i.append("stop").attr("stop-color","#000").attr("stop-opacity","0.3").attr("offset",0);i.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",1);r.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",0);r.append("stop").attr("stop-color","#000").attr("stop-opacity","0.3").attr("offset",1);a.append("stop").attr("stop-color","#FFF").attr("stop-opacity","1").attr("offset",0);a.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",1);s.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",0);s.append("stop").attr("stop-color","#FFF").attr("stop-opacity","1").attr("offset",1)};u.mask=function(t){m.append("clipPath").attr("class","nv-scroll-mask").attr("id","nv-edge-clip-"+e).append("rect");_=p.select(".nv-scroll-mask rect");f.attr("clip-path",t?"url(#nv-edge-clip-"+e+")":"")};u.scrollTarget=function(e){d.select(".nv-scroll-background").append("rect").attr("class","nv-scroll-target").attr("fill","transparent");g=c.select(".nv-scroll-target")};u.backShadows=function(t){var i=d.select(".nv-scroll-background").append("g").attr("class","nv-back-shadow-wrap");i.append("rect").attr("class","nv-back-shadow-prev");i.append("rect").attr("class","nv-back-shadow-more");b=c.select(".nv-back-shadow-wrap");if(t){var r=n?"width":"height";b.select("rect.nv-back-shadow-prev").attr("fill","url(#nv-back-gradient-prev-"+e+")").attr(r,7);b.select("rect.nv-back-shadow-more").attr("fill","url(#nv-back-gradient-more-"+e+")").attr(r,7)}else{b.selectAll("rect").attr("fill","transparent")}};u.foreShadows=function(t){var i=d.select(".nv-scroll-background").insert("g").attr("class","nv-fore-shadow-wrap");i.append("rect").attr("class","nv-fore-shadow-prev");i.append("rect").attr("class","nv-fore-shadow-more");x=c.select(".nv-fore-shadow-wrap");if(t){var r=n?"width":"height";x.select("rect.nv-fore-shadow-prev").attr("fill","url(#nv-fore-gradient-prev-"+e+")").attr(r,20);x.select("rect.nv-fore-shadow-more").attr("fill","url(#nv-fore-gradient-more-"+e+")").attr(r,20)}else{x.selectAll("rect").attr("fill","transparent")}};return u}u.id=function(t){if(!arguments.length){return e}e=t;return u};u.margin=function(e){if(!arguments.length){return t}t.top=typeof e.top!="undefined"?e.top:t.top;t.right=typeof e.right!="undefined"?e.right:t.right;t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom;t.left=typeof e.left!="undefined"?e.left:t.left;return u};u.width=function(e){if(!arguments.length){return i}i=e;return u};u.height=function(e){if(!arguments.length){return r}r=e;return u};u.vertical=function(e){if(!arguments.length){return n}n=e;return u};u.minDimension=function(e){if(!arguments.length){return a}a=e;return u};u.panHandler=function(e){if(!arguments.length){return s}s=d3.functor(e);return u};u.enable=function(e){if(!arguments.length){return l}l=e;return u};return u};e.models.scatter=function(){var t={top:0,right:0,bottom:0,left:0},n=960,i=500,r=function(t,n){return e.utils.defaultColor()(t,t.series)},a=r,s=function(e,t){return"nv-group nv-series-"+e.series},o=Math.floor(Math.random()*1e5),l=d3.scale.linear(),u=d3.scale.linear(),c=d3.scale.linear(),d=function(e){return e.x},f=function(e){return e.y},h=function(e){return e.size||1},p=function(e){return e.shape||"circle"},m=e.utils.buildLocality(),_=true,g=[],v=[],y=[],b=true,x=function(e){return!e.notActive},w=false,L=.1,S=false,E=true,k=true,T=function(e,t){return Math.sqrt(c(h(e,t))/Math.PI)},M=function(e,t){return c(h(e,t))},A=null,C=null,R=null,D=[16,256],I=false,O=d3.dispatch("elementClick","elementMouseover","elementMouseout","elementMousemove"),N=false;var F,B,P,U,Y=false;function H(m){m.each(function(m){var G=n-t.left-t.right,j=i-t.top-t.bottom,V=d3.select(this);m=m.map(function(e,t){e.values=e.values.map(function(e){e.series=t;return e});return e});var z=A&&C&&R?[]:d3.merge(m.map(function(e){return e.values.map(function(e,t){return{x:d(e,t),y:f(e,t),size:h(e,t)}})}));H.resetDimensions=function(e,r){n=e;i=r;G=e-t.left-t.right;j=r-t.top-t.bottom;$()};function $(){l.domain(A||d3.extent(z.map(function(e){return e.x}).concat(g)));u.domain(C||d3.extent(z.map(function(e){return e.y}).concat(v)));if(w&&m[0]){if(L===-1){var e=Math.sqrt(D[1]/Math.PI);l.range([0+e,G-e]);u.range([j-e,0+e])}else if(L<1){l.range([(G*L+G)/(2*m[0].values.length),G-G*(1+L)/(2*m[0].values.length)]);u.range([j,0])}else{l.range([L,G-L]);u.range([j-L,L])}}else{l.range([0,G]);u.range([j,0])}if(N){u.nice()}c.domain(R||d3.extent(z.map(function(e){return e.size}).concat(y))).range(D);if(l.domain()[0]===l.domain()[1]||u.domain()[0]===u.domain()[1])I=true;if(l.domain()[0]===l.domain()[1])l.domain()[0]?l.domain([l.domain()[0]-l.domain()[0]*.1,l.domain()[1]+l.domain()[1]*.1]):l.domain([-1,1]);if(u.domain()[0]===u.domain()[1])u.domain()[0]?u.domain([u.domain()[0]-u.domain()[0]*.1,u.domain()[1]+u.domain()[1]*.1]):u.domain([-1,1]);if(c.domain().length<2){c.domain([0,c.domain()])}F=F||l;B=B||u;P=P||c}$();var q=V.selectAll("g.nv-wrap.nv-scatter").data([m]);var W=q.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+o);var K=W.append("defs");var J=W.append("g");var X=q.select("g");H.gradient=function(t,n){return e.utils.colorRadialGradient(t,o+"-"+n,{x:.5,y:.5,r:.5,s:0,u:"objectBoundingBox"},r(t,n),q.select("defs"))};J.append("g").attr("class","nv-groups");J.append("g").attr("class","nv-point-paths");q.classed("nv-single-point",I).attr("transform","translate("+t.left+","+t.top+")");K.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect");q.select("#nv-edge-clip-"+o+" rect").attr("width",G).attr("height",j);X.attr("clip-path",S?"url(#nv-edge-clip-"+o+")":"");function Z(){if(!b)return false;var e;function t(e,t,n,i){var r=m[i];return{series:r,point:r.values[n],pointIndex:n,seriesIndex:r.series,id:o,e:e}}if(E===true){var r=d3.merge(m.map(function(e,t){return e.values.map(function(e,n){var i=d(e,n);var r=f(e,n);return[l(i)+Math.random()*1e-4,u(r)+Math.random()*1e-4,t,n,e]}).filter(function(e,t){return x(e[4],t)})}));if(k){var a=q.select("defs").selectAll(".nv-point-clips").data([o]).enter();a.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+o);var s=q.select("#nv-points-clip-"+o).selectAll("circle").data(r);s.enter().append("circle");s.exit().remove();s.attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}).attr("r",function(e,t){return T(e[4],t)});q.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+o+")")}if(r.length<=3){r.push([l.range()[0]-20,u.range()[0]-20,null,null]);r.push([l.range()[1]+20,u.range()[1]+20,null,null]);r.push([l.range()[0]-20,u.range()[0]+20,null,null]);r.push([l.range()[1]+20,u.range()[1]-20,null,null])}var c=d3.geom.polygon([[-10,-10],[-10,i+10],[n+10,i+10],[n+10,-10]]);var h=d3.geom.voronoi(r).map(function(e,t){return{data:c.clip(e),series:r[t][2],point:r[t][3]}}).filter(function(e){return e.series!==null});var p=q.select(".nv-point-paths").selectAll("path").data(h);p.enter().append("path").attr("class",function(e,t){return"nv-path-"+t});p.exit().remove();p.attr("d",function(e){return"M"+e.data.join("L")+"Z"});p.on("click",function(e){if(Y)return 0;O.elementClick(t(d3.event,e,e.point,e.series))}).on("mouseover",function(e){if(Y)return 0;O.elementMouseover(t(d3.event,e,e.point,e.series))}).on("mousemove",function(e,t){O.elementMousemove(d3.event)}).on("mouseout",function(e,n){if(Y)return 0;O.elementMouseout(t(d3.event,e,e.point,e.series))})}else{q.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").style("pointer-events","auto").on("click",function(e,n){if(Y||!m[e.series])return 0;O.elementClick(t(d3.event,e,n,e.series))}).on("mouseover",function(e,n){if(Y||!m[e.series])return 0;O.elementMouseover(t(d3.event,e,n,e.series))}).on("mousemove",function(e,t){O.elementMousemove(d3.event)}).on("mouseout",function(e,n){if(Y||!m[e.series])return 0;O.elementMouseout(t(d3.event,e,e.point,e.series))})}Y=false}Y=true;var Q=q.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});Q.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);d3.transition(Q.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();Q.attr("class",function(e,t){return s(e,e.series)}).attr("fill",function(e,t){return a(e,e.series)}).attr("stroke",function(e,t){return a(e,e.series)}).classed("hover",function(e){return e.hover});d3.transition(Q).style("stroke-opacity",1).style("fill-opacity",.5);if(_){var ee=Q.selectAll("circle.nv-point").data(function(e){return e.values});ee.enter().append("circle").attr("cx",function(e,t){return F(d(e,t))}).attr("cy",function(e,t){return B(f(e,t))}).attr("r",T);ee.exit().remove();d3.transition(Q.exit().selectAll("path.nv-point")).attr("cx",function(e,t){return l(d(e,t))}).attr("cy",function(e,t){return u(f(e,t))}).remove();ee.attr("class",function(e,t){return"nv-point nv-point-"+t});d3.transition(ee).attr("cx",function(e,t){return l(d(e,t))}).attr("cy",function(e,t){return u(f(e,t))}).attr("r",T)}else{var ee=Q.selectAll("path.nv-point").data(function(e){return e.values});ee.enter().append("path").attr("transform",function(e,t){return"translate("+F(d(e,t))+","+B(f(e,t))+")"}).attr("d",d3.svg.symbol().type(p).size(M));ee.exit().remove();d3.transition(Q.exit().selectAll("path.nv-point")).attr("transform",function(e,t){return"translate("+l(d(e,t))+","+u(f(e,t))+")"}).remove();ee.attr("class",function(e,t){return"nv-point nv-point-"+t});d3.transition(ee).attr("transform",function(e,t){return"translate("+l(d(e,t))+","+u(f(e,t))+")"}).attr("d",d3.svg.symbol().type(p).size(M))}clearTimeout(U);U=setTimeout(Z,300);F=l.copy();B=u.copy();P=c.copy()});return H}O.on("elementMouseover.point",function(e){if(b)d3.select(".nv-chart-"+o+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",true)});O.on("elementMouseout.point",function(e){if(b)d3.select(".nv-chart-"+o+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",false)});H.dispatch=O;H.color=function(e){if(!arguments.length)return r;r=e;return H};H.fill=function(e){if(!arguments.length)return a;a=e;return H};H.classes=function(e){if(!arguments.length)return s;s=e;return H};H.gradient=function(e){if(!arguments.length)return gradient;gradient=e;return H};H.x=function(e){if(!arguments.length)return d;d=d3.functor(e);return H};H.y=function(e){if(!arguments.length)return f;f=d3.functor(e);return H};H.size=function(e){if(!arguments.length)return h;h=d3.functor(e);return H};H.margin=function(e){if(!arguments.length)return t;t.top=typeof e.top!="undefined"?e.top:t.top;t.right=typeof e.right!="undefined"?e.right:t.right;t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom;t.left=typeof e.left!="undefined"?e.left:t.left;return H};H.width=function(e){if(!arguments.length)return n;n=e;return H};H.height=function(e){if(!arguments.length)return i;i=e;return H};H.xScale=function(e){if(!arguments.length)return l;l=e;return H};H.yScale=function(e){if(!arguments.length)return u;u=e;return H};H.zScale=function(e){if(!arguments.length)return c;c=e;return H};H.xDomain=function(e){if(!arguments.length)return A;A=e;return H};H.yDomain=function(e){if(!arguments.length)return C;C=e;return H};H.sizeDomain=function(e){if(!arguments.length)return R;R=e;return H};H.sizeRange=function(e){if(!arguments.length)return D;D=e;return H};H.forceX=function(e){if(!arguments.length)return g;g=e;return H};H.forceY=function(e){if(!arguments.length)return v;v=e;return H};H.forceSize=function(e){if(!arguments.length)return y;y=e;return H};H.interactive=function(e){if(!arguments.length)return b;b=e;return H};H.pointActive=function(e){if(!arguments.length)return x;x=e;return H};H.padData=function(e){if(!arguments.length)return w;w=e;return H};H.padDataOuter=function(e){if(!arguments.length)return L;L=e;return H};H.clipEdge=function(e){if(!arguments.length)return S;S=e;return H};H.clipVoronoi=function(e){if(!arguments.length)return k;k=e;return H};H.useVoronoi=function(e){if(!arguments.length)return E;E=e;if(E===false){k=false}return H};H.circleRadius=function(e){if(!arguments.length)return T;T=e;return H};H.shape=function(e){if(!arguments.length)return p;p=e;return H};H.onlyCircles=function(e){if(!arguments.length)return _;_=e;return H};H.id=function(e){if(!arguments.length)return o;o=e;return H};H.singlePoint=function(e){if(!arguments.length)return I;I=e;return H};H.nice=function(e){if(!arguments.length){return N}N=e;return H};H.locality=function(t){if(!arguments.length){return m}m=e.utils.buildLocality(t);return H};return H};e.models.bubbleChart=function(){var t={top:10,right:10,bottom:10,left:10},n=null,i=null,r=false,a=false,s=true,o="ltr",l=function(e){return e.x},u=function(e){return e.y},c=[0],d,f,h=200,p=function(e){return e.y},m=function(e){return e.y},_=false,g=0,v=false,y=function(e){return},b=d3.time.format("%Y-%m-%d"),x=null,w=true,L=function(e,t,n,i,r){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},S,E,k={},T={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available.",noLabel:"undefined"},M=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState");var A=function(t,n,i){var r=isNaN(parseInt(t,10))||!n||!Array.isArray(n)?t:n[parseInt(t,10)]||t;return i?e.utils.dateFormat(r,"MMM",F.locality()):r};var C=function(t,n,i){var r=isNaN(parseInt(t,10))||!n||!Array.isArray(n)?t:n[parseInt(t,10)].key||t;return e.utils.numberFormatSI(r,2,i,F.locality())};var R=e.models.scatter().padData(true).padDataOuter(-1).size(function(e){return e.y}).sizeRange([256,1024]).singlePoint(true),D=e.models.axis().orient("bottom").valueFormat(A).tickSize(0).tickPadding(4).highlightZero(false).showMaxMin(false).ticks(d3.time.months,1),I=e.models.axis().orient("left").valueFormat(C).tickPadding(7).highlightZero(false).showMaxMin(false),O=e.models.legend().align("center").key(function(e){return e.key+"%"});var N=function(t,n,i){var r=t.series.key,a=t.point.x,s=t.point.y,o=L(r,a,s,t,F),l=t.value<0?"n":"s";x=e.tooltip.show(t.e,o,l,null,n)};function F(a){a.each(function(a){var d=this,f=d3.select(this);var h=a?a.properties:{},_=a?a.data:null;var g,v,b,L,T,A=a.properties.xDataType==="datetime"||false,C=a.properties.yDataType==="currency"||false;F.container=this;F.update=function(){f.transition().call(F)};function B(e){if(e&&e.length){f.selectAll(".nv-noData").remove();return false}f.select(".nvd3.nv-wrap").remove();var r=n||parseInt(f.style("width"),10)||960,a=i||parseInt(f.style("height"),10)||400,s=f.selectAll(".nv-noData").data([F.strings().noData]);s.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");s.attr("x",t.left+r/2).attr("y",t.top+a/2).text(function(e){return e});return true}if(B(_)){return F}r=r&&h.title;function P(e){var t=d3.extent(d3.merge(e.map(function(e){return e.values.map(function(e,t){return d3.time.format("%Y-%m-%d").parse(l(e))})})));var n=[d3.time.month.floor(t[0]),d3.time.day.offset(d3.time.month.ceil(t[1]),-1)];return n}function U(e){function t(e){return 32-new Date(e.getFullYear(),e.getMonth(),32).getDate()}var n=d3.time.month.range(e[0],e[1]);var i=n.map(function(e){return d3.time.day.offset(d3.time.month.floor(e),t(e)/2-1)});return i}function Y(e){var t=d3.nest().key(p).entries(e);var n=1e3/t.length,i=n*.25,r=[0,1],a=[0,1],s=d3.scale.linear().domain(r).range(a),o=[],l=0;t.map(function(e,t){e.total=0;e.values=e.values.sort(function(e,t){return t.y<e.y?-1:t.y>e.y?1:0}).map(function(t){e.total+=t.y;return t});e.group=t;return e}).sort(function(e,t){return e.total<t.total?-1:e.total>t.total?1:0}).map(function(e,t){l+=e.total;r=d3.extent(e.values.map(function(e){return e.y}));a=[n*t+i,n*(t+1)-i];s.domain(r).range(a);e.values=e.values.map(function(t){t.group=e.group;t.opportunity=t.y;t.y=s(t.opportunity);return t});o.push({y:d3.min(e.values.map(function(e){return e.y})),key:e.key});return e});return o}k.disabled=_.map(function(e){return!!e.disabled});g=d3.nest().key(m).entries(_);g=g.sort(function(e,t){return parseInt(e.key,10)<parseInt(t.key,10)?-1:parseInt(e.key,10)>parseInt(t.key,10)?1:0}).map(function(e,t){e.series=t;e.classes=e.values[0].classes;e.color=e.values[0].color;return e});b=P(g);T=Y(_);L=d3.extent(d3.merge(g.map(function(e){return e.values.map(function(e,t){return u(e,t)})})).concat(c));S=R.xScale();E=R.yScale();D.scale(S).tickValues(U(b));I.scale(E).ticks(T.length).tickValues(T.map(function(e,t){return T[t].y}));F.render=function(){var a=n||parseInt(f.style("width"),10)||960,l=i||parseInt(f.style("height"),10)||400,u=a-t.left-t.right,c=l-t.top-t.bottom,d=u,p=c,m={top:0,right:0,bottom:0,left:0};var _=Math.sqrt(R.sizeRange()[1]/Math.PI),v=0,y={width:0,height:0},x="";var w=f.selectAll("g.nv-wrap.nv-bubbleChart").data([g]),S=w.enter().append("g").attr("class","nvd3 nv-wrap nv-bubbleChart").append("g"),E=w.select("g").attr("class","nv-chartWrap");S.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF");E.select(".nv-background").attr("width",u+t.left+t.right).attr("height",c+t.top+t.bottom);S.append("g").attr("class","nv-titleWrap");var k=E.select(".nv-titleWrap");S.append("g").attr("class","nv-x nv-axis");var M=E.select(".nv-x.nv-axis");S.append("g").attr("class","nv-y nv-axis");var N=E.select(".nv-y.nv-axis");S.append("g").attr("class","nv-bubblesWrap");var B=E.select(".nv-bubblesWrap");S.append("g").attr("class","nv-legendWrap");var P=E.select(".nv-legendWrap");w.attr("transform","translate("+t.left+","+t.top+")");k.select(".nv-title").remove();if(r){k.append("text").attr("class","nv-title").attr("x",o==="rtl"?u:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(h.title).attr("stroke","none").attr("fill","black");y=e.utils.getTextBBox(E.select(".nv-title"));v+=y.height}if(s){O.id("legend_"+F.id()).strings(F.strings().legend).align("center").height(c-v);P.datum(g).call(O);O.arrange(u);var U=e.utils.getTextBBox(P.select(".nv-legend-link")),Y=u-y.width-6,H=r&&O.collapsed()&&Y>U.width?true:false,G=o==="rtl"||!O.collapsed()?0:u-O.width(),j=y.height;if(H){j=y.height-O.height()/2-U.height/2}else if(!r){j=-O.margin().top}P.attr("transform","translate("+G+","+j+")");v+=H?12:O.height()}p=c-v-m.top-m.bottom;R.width(d).height(p).id(F.id()).xDomain(b).yDomain(L);B.datum(g.filter(function(e){return!e.disabled})).transition().duration(F.delay()).call(R);m.top+=_;var V={top:0,right:0,bottom:0,left:0},z={top:0,right:0,bottom:0,left:0};function $(){m.left=Math.max(z.left,V.left);m.right=Math.max(z.right,V.right);m.top=Math.max(z.top,V.top);m.bottom=Math.max(z.bottom,V.bottom)}function q(){d=u-m.left-m.right;p=c-v-m.top-m.bottom;R.resetDimensions(d,p)}I.margin(m).tickFormat(function(t,n){var i=I.valueFormat()(n,T,C);return e.utils.stringEllipsify(i,f,Math.max(u*.2,75))});N.call(I);V=I.margin();$();q();D.tickSize(0).margin(m).tickFormat(function(e){return D.valueFormat()(e,null,A)});M.call(D);z=D.margin();$();q();I.tickSize(-d,0).margin(m);N.call(I);B.transition().duration(F.delay()).call(R);m.top+=v;x=m.left+",";x+=m.top+(D.orient()==="bottom"?p:0);M.attr("transform","translate("+x+")");x=m.left+(I.orient()==="left"?0:d)+",";x+=m.top;N.attr("transform","translate("+x+")");B.attr("transform","translate("+m.left+","+m.top+")")};F.render();O.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled;if(!g.filter(function(e){return!e.disabled}).length){g.map(function(e){e.disabled=false;f.selectAll(".nv-series").classed("disabled",false);return e})}k.disabled=g.map(function(e){return!!e.disabled});M.stateChange(k);f.transition().call(F.render)});M.on("tooltipShow",function(e){if(w){N(e,d.parentNode)}});M.on("tooltipMove",function(t){if(x){e.tooltip.position(d.parentNode,x,t,"s")}});M.on("tooltipHide",function(){if(w){e.tooltip.cleanup()}});M.on("changeState",function(e){if(typeof e.disabled!=="undefined"){_.forEach(function(t,n){t.disabled=e.disabled[n]});k.disabled=e.disabled}f.transition().call(F)});M.on("chartClick",function(){M.tooltipHide();if(O.enabled()){O.dispatch.closeMenu()}});R.dispatch.on("elementClick",function(e){M.chartClick();y(e)})});return F}R.dispatch.on("elementMouseover.tooltip",function(e){M.tooltipShow(e)});R.dispatch.on("elementMousemove.tooltip",function(e){M.tooltipMove(e)});R.dispatch.on("elementMouseout.tooltip",function(){M.tooltipHide()});F.dispatch=M;F.scatter=R;F.legend=O;F.xAxis=D;F.yAxis=I;d3.rebind(F,R,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient","locality");d3.rebind(F,R,"size","zScale","sizeDomain","forceSize","interactive","clipVoronoi","clipRadius");d3.rebind(F,D,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks");F.colorData=function(t){var n=arguments[0],i=arguments[1]||{};var r=function(t,n){return e.utils.defaultColor()(t,t.series)};var a=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":r=function(e,t){return d3.interpolateHsl(d3.rgb(i.c1),d3.rgb(i.c2))(e.series/i.l)};break;case"class":r=function(){return"inherit"};a=function(e,t){var n=e.series*(i.step||1)%14;n=(n>9?"":"0")+n;return"nv-group nv-series-"+e.series+" nv-fill"+n};break;case"data":r=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)};a=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")};break}var s=!i.gradient?r:function(e,t){return R.gradient(e,e.series)};R.color(r);R.fill(s);R.classes(a);O.color(r);O.classes(a);return F};F.margin=function(e){if(!arguments.length){return t}for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return F};F.width=function(e){if(!arguments.length){return n}n=e;return F};F.height=function(e){if(!arguments.length){return i}i=e;return F};F.showTitle=function(e){if(!arguments.length){return r}r=e;return F};F.showLegend=function(e){if(!arguments.length){return s}s=e;return F};F.tooltip=function(e){if(!arguments.length){return x}x=e;return F};F.tooltips=function(e){if(!arguments.length){return w}w=e;return F};F.tooltipContent=function(e){if(!arguments.length){return L}L=e;return F};F.state=function(e){if(!arguments.length){return k}k=e;return F};F.delay=function(e){if(!arguments.length){return h}h=e;return F};F.bubbleClick=function(e){if(!arguments.length){return y}y=e;return F};F.groupBy=function(e){if(!arguments.length){return p}p=e;return F};F.filterBy=function(e){if(!arguments.length){return m}m=e;return F};F.colorFill=function(e){return F};F.strings=function(e){if(!arguments.length){return T}for(var t in e){if(e.hasOwnProperty(t)){T[t]=e[t]}}return F};F.direction=function(e){if(!arguments.length){return o}o=e;I.direction(e);O.direction(e);return F};return F};e.models.funnel=function(){var t={top:0,right:0,bottom:0,left:0},n=960,i=500,r=.3,a=d3.scale.linear(),s=Math.floor(Math.random()*1e4),o=function(e){return e.x},l=function(e){return e.y},u=function(e){return e.height},c=function(e){return e.value},d=e.utils.buildLocality(),f=[0],h=true,p,m=0,_=true,g=75,v=0,y=function(e){return e},b=function(e){return e},w=function(e){return(" ("+e+")").replace(" ()","")},L=function(t,n){return e.utils.defaultColor()(t,t.series)},S=L,E=false,k=function(e,t){return"nv-group nv-series-"+e.series},T=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");var M=0,A=0,C=0;function R(o){o.each(function(o){var l=n-t.left-t.right,d=i-t.top-t.bottom,x=d3.select(this),D=5,I=5,O=0,N=0,F=0;o.forEach(function(e,t){e.values.forEach(function(e){e.index=t;N+=parseFloat(e.value)})});function B(){M=ce(F);A=de();C=fe(F)}function P(){var e=ue(A,M),t=M-2*r*A,n=0,i=24;o.map(function(a,s){a.values=a.values.map(function(a){a.height=0;if(N>0){a.height=le(e*a.value/N,t)}if(a.height<i/2){n+=a.height-i/2;a.height=i/2}else if(n<0&&a.height+n>i/2){a.height+=n;n=0}t+=2*r*a.height;return a});return a});o=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(u)(o);var s=p?[]:d3.extent(d3.merge(o.map(function(e){return e.values.map(function(e,t){return u(e,t)+e.y0})})).concat(f));a.domain(p||s).range([A,0])}B();P();var U=x.selectAll("g.nv-wrap.nv-funnel").data([o]);var Y=U.enter().append("g").attr("class","nvd3 nv-wrap nv-funnel");var H=Y.append("defs");var G=Y.append("g");var j=U.select("g");R.gradient=function(t,n,i){return e.utils.colorLinearGradient(t,s+"-"+n,i,L(t,n),U.select("defs"))};G.append("g").attr("class","nv-groups");U.attr("transform","translate("+t.left+","+t.top+")");H.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect");U.select("#nv-edge-clip-"+s+" rect").attr("width",l+1).attr("height",d+1);j.attr("clip-path",h?"url(#nv-edge-clip-"+s+")":"");if(E){var V=e.utils.createTexture(H,s)}var z=U.select(".nv-groups").selectAll(".nv-group").data(o,function(e){return e.series});z.exit().transition().duration(v).selectAll("g.nv-slice").delay(function(e,t){return t*m/o[0].values.length}).attr("points",function(e){return oe(e,0,M)}).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();z.exit().transition().duration(v).selectAll("g.nv-label-value").delay(function(e,t){return t*m/o[0].values.length}).attr("y",0).attr("transform","translate("+C+",0)").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();z.exit().remove();z.enter().append("g").attr("class","nv-group");var $=U.select(".nv-groups").selectAll(".nv-group");$.style("stroke-opacity",1e-6).style("fill-opacity",1e-6);$.attr("class",k).attr("fill",S).classed("hover",function(e){return e.hover}).classed("nv-active",function(e){return e.active==="active"}).classed("nv-inactive",function(e){return e.active==="inactive"}).style({stroke:"#FFFFFF","stroke-width":2});$.transition().duration(v).style("stroke-opacity",1).style("fill-opacity",1);var q=z.selectAll("g.nv-slice").data(function(e){return e.values},function(e){return e.series});q.exit().remove();var W=q.enter().append("g").attr("class","nv-slice");var K=$.selectAll("g.nv-slice");W.append("polygon").attr("class","nv-base");K.selectAll(".nv-base").attr("points",function(e){return oe(e,0,M)});if(E){W.append("polygon").attr("class","nv-texture");K.selectAll(".nv-texture").attr("points",function(e){return oe(e,0,M)}).style("mask","url("+V+")")}K.on("mouseover",function(e,t){d3.select(this).classed("hover",true);var n=J(d3.event,e,t);T.elementMouseover(n)}).on("mousemove",function(e,t){T.elementMousemove(d3.event)}).on("mouseout",function(e,t){d3.select(this).classed("hover",false);T.elementMouseout()}).on("click",function(e,t){d3.event.stopPropagation();var n=J(d3.event,e,t);T.elementClick(n)}).on("dblclick",function(e,t){d3.event.stopPropagation();var n=J(d3.event,e,t);T.elementDblClick(n)});function J(e,t,n){return{value:c(t,n),point:t,id:s,series:o[t.index],pointIndex:n,seriesIndex:t.series,e:e}}var X=z.selectAll(".nv-label-value").data(function(e){return e.values},function(e){return e.series});X.exit().remove();X.enter().append("g").attr("class","nv-label-value");var Z=$.selectAll("g.nv-label-value");Z.attr("transform","translate("+C+",0)");var Q=Z.filter(".nv-label-side");function ee(){Z.selectAll("polyline").remove();Z.selectAll("rect").remove();Z.selectAll("text").remove();Z.append("rect").attr("class","nv-label-box").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("rx",2).attr("ry",2).style("pointer-events","none").style("stroke-width",0).style("fill-opacity",0);Z.append("text").text(function(e){return y(o[e.index].key)}).call(we,"nv-label",.85,"middle",be);Z.select(".nv-label").call(re,_?ie:ae,he,function(e,t){we(e,"nv-label",t,"middle",be)});Z.append("text").text(function(e){return b(e.value||e.label||e)}).call(we,"nv-value",.85,"middle",be);Z.select(".nv-value").append("tspan").text(function(e){return w(o[e.index].count)});Z.call(Le);Z.call(_e);Z.call(Se);Z.classed("nv-label-side",function(e){return e.tooTall||e.tooWide})}function te(){Q=Z.filter(".nv-label-side");Q.selectAll(".nv-label").remove();Q.selectAll("rect").remove();Q.selectAll("polyline").remove();Q.append("text").text(function(e){return y(o[e.index].key)}).call(we,"nv-label",.85,"start","#555");Q.select(".nv-label").call(re,_?ie:ae,_?pe:se,function(e,t){we(e,"nv-label",t,"start","#555");

});Q.call(Le);Q.select(".nv-value").style({"text-anchor":"start",fill:"#555"});Q.call(ge);var e=0;Q.reverse().each(function(t,n){if(!e){t.labelBottom=t.labelTop+t.labelHeight+I;e=t.labelBottom;return}t.labelTop=Math.max(e,t.labelTop);t.labelBottom=t.labelTop+t.labelHeight+I;e=t.labelBottom});Q.reverse();if(e&&e-I>d3.max(a.range())){e=0;Q.each(function(t,n){if(!e){t.labelBottom=d3.max(a.range())-1;t.labelTop=t.labelBottom-t.labelHeight;e=t.labelTop;return}t.labelBottom=Math.min(e,t.labelBottom);t.labelTop=t.labelBottom-t.labelHeight-I;e=t.labelTop});if(e<0){Q.each(function(t,n){t.labelTop-=e;t.labelBottom-=e})}}e=0;Q.call(ye)}function ne(){ee();te()}ne();B();P();ne();B();P();ne();B();K.selectAll("polygon").attr("points",function(e){return oe(e,1,M)});if(E){K.selectAll(".nv-texture").style("fill",be)}Z.attr("transform",function(e){var t=e.tooTall?0:C,n=e.tooTall?0:e.labelTop;return"translate("+t+","+n+")"});Q.attr("transform",function(e){return"translate("+O+","+e.labelTop+")"});Q.append("polyline").attr("class","nv-label-leader").style({"fill-opacity":0,stroke:"#999","stroke-width":1,"stroke-opacity":.5});Q.reverse();Q.selectAll("polyline").call(ve);Q.reverse();function ie(e,t,n,i){var r=t.text(),a=parseFloat(t.attr("dy")),s,o=r.split(/\s+/).reverse(),l=[],u=0,c=n(e,0),d=d3.select(t.node().parentNode);t.text(null);while(s=o.pop()){l.push(s);t.text(l.join(" "));if(t.node().getComputedTextLength()>c&&l.length>1){l.pop();t.text(l.join(" "));l=[s];t=d.append("text");t.text(s).call(i,++u*1.1+a)}}}function re(e,t,n,i){e.each(function(e){var r=d3.select(this);t(e,r,n,i)})}function ae(t,n,i,r){var a=n.text(),s=parseFloat(n.attr("dy")),o=i(t);n.text(e.utils.stringEllipsify(a,x,o)).call(r,s)}function se(e){var t=Math.max(l-d/1.1,g),n=a(e.y0),i=n*r,s=t+i,o=Math.abs(e.labelBottom-n),u=o*r,c=D+u+D+D,f=s-c;return Math.max(f,g)}function oe(e,t,n){var i=a(e.y0),s=a(e.y0+e.y),o=n/2-r*i,l=n/2-r*s,u=C;return u-o+","+i*t+" "+(u-l)+","+s*t+" "+(u+l)+","+s*t+" "+(u+o)+","+i*t}function le(e,t){var n=t/r/2;return Math.abs(Math.sqrt(e/r+n*n))-n}function ue(e,t){return e*(t-e*r)}function ce(e){return Math.round(Math.max(Math.min(d/1.1,l-e),40))}function de(){return Math.min(M*1.1,(M-M*r)/(2*r))}function fe(e){return M/2+e}function he(e){var t=M,n=a(e.y0+e.y1/2);return t-n*r*2}function pe(e,t){var n=Math.max((l-M)/2,t),i=a(e.y0+e.y1);return n+i*r}function me(e){return d3.select(e).node().getBoundingClientRect()}function _e(e){e.each(function(e){var t=me(this);e.labelHeight=t.height;e.labelWidth=t.width;e.labelTop=a(e.y0+e.y/2)-e.labelHeight/2;e.labelBottom=e.labelTop+e.labelHeight+I;e.y1=e.y-e.labelHeight;e.tooWide=e.labelWidth>he(e);e.tooTall=e.labelHeight>e.height-4})}function ge(e){e.each(function(e){var t=me(this);e.labelHeight=t.height;e.labelWidth=t.width;e.labelTop=a(e.y0+e.y);e.labelBottom=e.labelTop+e.labelHeight+I})}function ve(e,t){var n=e.length;e.each(function(t,i,s){t.y1=0;var o=s?d3.select(e[s-1][i]).data()[0]:null,l=s<n-1?d3.select(e[s+1][i]).data()[0]:null,u=Math.round(t.labelHeight)+.5,c=Math.round(a(t.y0)-t.labelTop)-.5,d=o?o.labelWidth-(t.labelBottom-o.labelBottom)*r:0,f=t.labelWidth,h=l&&u<c?l.labelWidth:0,p=Math.round(Math.max(d,f,h))+D,m=Math.round(pe(t,F))-O-D,o=0+","+u+" "+p+","+u+" "+(p+Math.abs(u-c)*r)+","+c+" "+m+","+c;t.labelWidth=p;d3.select(this).attr("points",o)})}function ye(e){var t=(l-M)/2,n=0;e.each(function(e){var t=a(e.y0),i=e.labelBottom>=t?1:0,s=Math.abs(e.labelBottom+D-t)*r,o=t*r,l=e.labelWidth+s+D*3-o;if(l>=n){n=l}});n=Math.round(n*10)/10;if(n<=0){O=t;F=t}else if(n>0&&n<t){O=t-n;F=t}else{O=0;F=n}}function be(t,n,i){var r=d3.select(this.parentNode).style("fill");return e.utils.getTextContrast(r,n)}function xe(t){var n=e.utils.isRTLChar(t.slice(-1)),i=n?"rtl":"ltr";return"ltr"}function we(e,t,n,i,r){e.attr("x",0).attr("y",0).attr("dy",n+"em").attr("class",t).attr("direction",function(){return xe(e.text())}).style({"pointer-events":"none","text-anchor":i,fill:r})}function Le(e){e.each(function(e){var t=d3.select(this),n=t.selectAll(".nv-label")[0].length+1,i=.85+n-1+"em";t.select(".nv-value").attr("dy",i)})}function Se(e){e.each(function(e,t){var n=d3.select(this);n.select(".nv-label-box").attr("x",(e.labelWidth+6)/-2).attr("y",-2).attr("width",e.labelWidth+6).attr("height",e.labelHeight+4).attr("rx",2).attr("ry",2).style("fill-opacity",1)})}});return R}R.dispatch=T;R.color=function(e){if(!arguments.length)return L;L=e;return R};R.fill=function(e){if(!arguments.length)return S;S=e;return R};R.classes=function(e){if(!arguments.length)return k;k=e;return R};R.gradient=function(e){if(!arguments.length)return gradient;gradient=e;return R};R.x=function(e){if(!arguments.length)return o;o=e;return R};R.y=function(e){if(!arguments.length)return l;l=e;return R};R.margin=function(e){if(!arguments.length)return t;t=e;return R};R.width=function(e){if(!arguments.length)return n;n=e;return R};R.height=function(e){if(!arguments.length)return i;i=e;return R};R.xScale=function(e){if(!arguments.length)return x;x=e;return R};R.yScale=function(e){if(!arguments.length)return a;a=e;return R};R.yDomain=function(e){if(!arguments.length)return p;p=e;return R};R.forceY=function(e){if(!arguments.length)return f;f=e;return R};R.id=function(e){if(!arguments.length)return s;s=e;return R};R.delay=function(e){if(!arguments.length)return m;m=e;return R};R.clipEdge=function(e){if(!arguments.length)return h;h=e;return R};R.fmtKey=function(e){if(!arguments.length)return y;y=e;return R};R.fmtValue=function(e){if(!arguments.length)return b;b=e;return R};R.fmtCount=function(e){if(!arguments.length)return w;w=e;return R};R.wrapLabels=function(e){if(!arguments.length)return _;_=e;return R};R.minLabelWidth=function(e){if(!arguments.length)return g;g=e;return R};R.textureFill=function(e){if(!arguments.length)return E;E=e;return R};R.locality=function(t){if(!arguments.length){return d}d=e.utils.buildLocality(t);return R};return R};e.models.funnelChart=function(){var t={top:10,right:10,bottom:10,left:10},n=null,i=null,r=false,a=true,s="ltr",o=null,l=true,u=function(e,t,n,i,r){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},c,d,f=0,h={},p={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available.",noLabel:"undefined"},m=d3.dispatch("chartClick","elementClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState");var _=e.models.funnel(),g=e.models.legend().align("center"),v=d3.scale.linear();var y=function(t,n,i){var r=t.series.key,a=i.total?(t.point.value*100/i.total).toFixed(1):100,s=t.point.value,l=u(r,a,s,t,x),c=t.value<0?"n":"s";o=e.tooltip.show(t.e,l,c,null,n)};var b=function(e,t,n){return};function x(u){u.each(function(u){var c=u.properties,p=u.data,w=d3.select(this),L=this,S=(n||parseInt(w.style("width"),10)||960)-t.left-t.right,E=(i||parseInt(w.style("height"),10)||400)-t.top-t.bottom,k=S,T=E,M={top:0,right:0,bottom:0,left:0},A=30;x.update=function(){w.transition().duration(f).call(x)};x.dataSeriesActivate=function(e){var t=e.series;t.active=!t.active||t.active==="inactive"?"active":"inactive";t.values[0].active=t.active;if(t.active==="active"){p.filter(function(e){return e.active!=="active"}).map(function(e){e.active="inactive";return e})}if(!p.filter(function(e){return e.active==="active"}).length){p.map(function(e){e.active="";return e})}w.call(x)};x.container=this;if(!p||!p.length||!p.filter(function(e){return e.values.length}).length){q();return x}p.forEach(function(e,t){e.series=t;e.values.forEach(function(t,n){t.series=e.series;t.index=n;if(typeof t.value=="undefined"){t.value=t.y}});e.total=d3.sum(e.values,function(e,t){return e.value});if(!e.total){e.disabled=true}});var C=p.filter(function(e,t){return!e.disabled});if(!C.length){C=[{values:[]}]}var R=d3.sum(C,function(e){return e.total});var D=d3.sum(C,function(e){return e.count});c.total=R;h.disabled=p.map(function(e){return!!e.disabled});d=_.yScale();if(!R){q();return x}else{w.selectAll(".nv-noData").remove()}var I=w.selectAll("g.nv-wrap.nv-funnelChart").data([C]),O=I.enter().append("g").attr("class","nvd3 nv-wrap nv-funnelChart").append("g"),N=I.select("g").attr("class","nv-chartWrap");O.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF");N.select(".nv-background").attr("width",S+t.left+t.right).attr("height",E+t.top+t.bottom);O.append("g").attr("class","nv-titleWrap");var F=N.select(".nv-titleWrap");O.append("g").attr("class","nv-funnelWrap");var B=N.select(".nv-funnelWrap");O.append("g").attr("class","nv-legendWrap");var P=N.select(".nv-legendWrap");I.attr("transform","translate("+t.left+","+t.top+")");var U={width:0,height:0};F.select(".nv-title").remove();if(r&&c.title){F.append("text").attr("class","nv-title").attr("x",s==="rtl"?S:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(c.title).attr("stroke","none").attr("fill","black");U=e.utils.getTextBBox(N.select(".nv-title"));M.top+=U.height+12}if(a){g.id("legend_"+x.id()).strings(x.strings().legend).align("center").height(E-M.top);P.datum(p).call(g);g.arrange(S);var Y=e.utils.getTextBBox(P.select(".nv-legend-link")),H=S-U.width-6,G=r&&g.collapsed()&&H>Y.width?true:false,j=s==="rtl"||!g.collapsed()?0:S-g.width(),V=U.height;if(G){V=U.height-g.height()/2-Y.height/2}else if(!r){V=-g.margin().top}P.attr("transform","translate("+j+","+V+")");M.top+=G?0:g.height()-12}T=E-M.top-M.bottom;_.width(k).height(T);B.datum(C).attr("transform","translate("+M.left+","+M.top+")").call(_);var z=$(v,C);function $(e,t){var n=[[0]];var i=t.filter(function(e){return!e.disabled}).map(function(e){return e.values.map(function(e,t){return e.y0+e.y})});var r=d3.merge(n.concat(i));v.domain(r).range(r.map(function(e){return d(e)}));return r}function q(){w.select(".nvd3.nv-wrap").remove();var e=w.selectAll(".nv-noData").data([x.strings().noData]);e.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");e.attr("x",t.left+S/2).attr("y",t.top+E/2).text(function(e){return e})}g.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled;e.active=false;if(!p.filter(function(e){return!e.disabled}).length){p.map(function(e){e.disabled=false;return e})}if(!p.filter(function(e){return e.active==="active"}).length){p.map(function(e){e.active="";return e})}h.disabled=p.map(function(e){return!!e.disabled});m.stateChange(h);w.transition().duration(f).call(x)});m.on("tooltipShow",function(e){if(l){y(e,L.parentNode,c)}});m.on("tooltipMove",function(t){if(o){e.tooltip.position(L.parentNode,o,t)}});m.on("tooltipHide",function(){if(l){e.tooltip.cleanup()}});m.on("changeState",function(e){if(typeof e.disabled!=="undefined"){C.forEach(function(t,n){t.disabled=e.disabled[n]});h.disabled=e.disabled}w.transition().duration(f).call(x)});m.on("chartClick",function(){if(g.enabled()){g.dispatch.closeMenu()}});_.dispatch.on("elementClick",function(e){m.chartClick();b(p,e,x)})});return x}_.dispatch.on("elementMouseover.tooltip",function(e){m.tooltipShow(e)});_.dispatch.on("elementMousemove.tooltip",function(e){m.tooltipMove(e)});_.dispatch.on("elementMouseout.tooltip",function(){m.tooltipHide()});x.dispatch=m;x.funnel=_;x.legend=g;d3.rebind(x,_,"id","x","y","xDomain","yDomain","forceX","forceY","color","fill","classes","gradient","locality");d3.rebind(x,_,"fmtKey","fmtValue","fmtCount","clipEdge","delay","wrapLabels","minLabelWidth");x.colorData=function(t){var n=arguments[0],i=arguments[1]||{};var r=function(t,n){return e.utils.defaultColor()(t,t.series)};var a=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":r=function(e,t){return d3.interpolateHsl(d3.rgb(i.c1),d3.rgb(i.c2))(e.series/i.l)};break;case"class":r=function(){return"inherit"};a=function(e,t){var n=e.series*(i.step||1)%14;n=(n>9?"":"0")+n;return"nv-group nv-series-"+e.series+" nv-fill"+n};break;case"data":r=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)};a=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")};break}var s=!i.gradient?r:function(e,t){var n={orientation:i.orientation||"vertical",position:i.position||"middle"};return _.gradient(e,e.series,n)};_.color(r);_.fill(s);_.classes(a);g.color(r);g.classes(a);return x};x.x=function(e){if(!arguments.length){return _.x()}_.x(e);return x};x.y=function(e){if(!arguments.length){return _.y()}_.y(e);return x};x.margin=function(e){if(!arguments.length){return t}for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return x};x.width=function(e){if(!arguments.length){return n}n=e;return x};x.height=function(e){if(!arguments.length){return i}i=e;return x};x.showTitle=function(e){if(!arguments.length){return r}r=e;return x};x.showLegend=function(e){if(!arguments.length){return a}a=e;return x};x.tooltip=function(e){if(!arguments.length){return o}o=e;return x};x.tooltips=function(e){if(!arguments.length){return l}l=e;return x};x.tooltipContent=function(e){if(!arguments.length){return u}u=e;return x};x.state=function(e){if(!arguments.length){return h}h=e;return x};x.strings=function(e){if(!arguments.length){return p}for(var t in e){if(e.hasOwnProperty(t)){p[t]=e[t]}}return x};x.seriesClick=function(e){if(!arguments.length){return b}b=e;return x};x.direction=function(e){if(!arguments.length){return s}s=e;g.direction(e);return x};return x};e.models.gauge=function(){var t={top:0,right:0,bottom:0,left:0},n=null,i=null,r=true,a=function(e){return e.values},s=function(e){return e.key},o=function(e){return e.y},l=e.utils.buildLocality(),u=Math.floor(Math.random()*1e4),c=d3.format(",g"),d=d3.format(",.f"),f=true,h=true,p=function(t,n){return e.utils.defaultColor()(t,t.series)},m=p,_=function(e,t){return"nv-arc-path nv-series-"+e.series},g=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");var v=50,y=5,b=5,x=90,w=0,L=10,S=-90,E=90,k=750,T=10;function M(r){r.each(function(r){var a=r.properties,s=r.data;var o=n-t.left-t.right,l=i-t.top-t.bottom,f=Math.min(o/2,l)/((100+T)/100),b=d3.select(this),A=E-S,C=d3.scale.linear().range([0,1]).domain([w,L]),R=0,D=s.map(function(e,t){var n={key:e.key,series:e.series,y0:R,y1:e.y,color:e.color,classes:e.classes};R=e.y;return n}),I=[0].concat(s.map(function(e){return e.y})),O=function(e){return e*f/100},N=a.values[0].t;var F=b.selectAll("g.nv-wrap.nv-gauge").data([s]);var B=F.enter().append("g").attr("class","nvd3 nv-wrap nv-gauge");var P=B.append("defs");var U=B.append("g");var Y=F.select("g");M.gradient=function(t,n){return e.utils.colorRadialGradient(t,u+"-"+n,{x:0,y:0,r:f,s:v/100,u:"userSpaceOnUse"},p(t,n),F.select("defs"))};U.append("g").attr("class","nv-arc-group");U.append("g").attr("class","nv-labels");U.append("g").attr("class","nv-pointer");U.append("g").attr("class","nv-odometer");F.attr("transform","translate("+(t.left/2+t.right/2+O(T))+","+(t.top+O(T))+")");var H=d3.svg.arc().innerRadius(O(v)).outerRadius(f).startAngle(function(e,t){return K(J(e.y0))}).endAngle(function(e,t){return K(J(e.y1))});var G=Y.select(".nv-arc-group").attr("transform",X);G.selectAll(".nv-arc-path").data(D).enter().append("path").attr("class","nv-arc-path").attr("stroke","#ffffff").attr("stroke-width",3).attr("d",H).on("mouseover",function(e,t){d3.select(this).classed("hover",true);g.elementMouseover({point:e,pointIndex:t,e:d3.event,id:u})}).on("mouseout",function(e,t){d3.select(this).classed("hover",false);g.elementMouseout({point:e,index:t,id:u})}).on("mousemove",function(e,t){g.elementMousemove(d3.event)}).on("click",function(e,t){g.elementClick({point:e,index:t,e:d3.event,id:u});d3.event.stopPropagation()}).on("dblclick",function(e,t){g.elementDblClick({point:e,index:t,e:d3.event,id:u});d3.event.stopPropagation()});G.selectAll(".nv-arc-path").transition().duration(10).attr("class",_).attr("fill",m).attr("d",H);var j=Y.select(".nv-labels").attr("transform",X);j.selectAll("text").transition().duration(0).attr("transform",function(e){return"rotate("+J(e)+") translate(0,"+(-f-O(1.5))+")"}).style("font-size",O(.6)+"em");j.selectAll("text").data(I).enter().append("text").attr("transform",function(e){return"rotate("+J(e)+") translate(0,"+(-f-O(1.5))+")"}).text(c).style("text-anchor","middle").style("font-size",O(.6)+"em");if(h){var V=[[Math.round(O(y)/2),0],[0,-Math.round(O(x))],[-Math.round(O(y)/2),0],[0,Math.round(O(y))],[Math.round(O(y)/2),0]];var z=Y.select(".nv-pointer").attr("transform",X);z.selectAll("path").transition().duration(120).attr("d",d3.svg.line().interpolate("monotone"));var $=z.selectAll("path").data([V]).enter().append("path").attr("d",d3.svg.line().interpolate("monotone")).attr("transform","rotate("+S+")");W(N);Y.selectAll(".nv-odom").remove();Y.select(".nv-odomText").transition().duration(0).style("font-size",O(.7)+"em");Y.select(".nv-odometer").append("text").attr("class","nv-odom nv-odomText").attr("x",0).attr("y",0).attr("text-anchor","middle").text(d(N)).style("stroke","none").style("fill","black").style("font-size",O(.7)+"em");var q=Y.select(".nv-odomText").node().getBoundingClientRect();Y.select(".nv-odometer").insert("path",".nv-odomText").attr("class","nv-odom nv-odomBox").attr("d",e.utils.roundedRectangle(-q.width/2,-q.height+O(1.5),q.width+O(4),q.height+O(2),O(2))).attr("fill","#eeffff").attr("stroke","black").attr("stroke-width","2px").attr("opacity",.8);Y.select(".nv-odometer").attr("transform","translate("+f+","+(t.top+O(70)+q.width)+")")}else{Y.select(".nv-odometer").select(".nv-odomText").remove();Y.select(".nv-odometer").select(".nv-odomBox").remove();Y.select(".nv-pointer").selectAll("path").remove()}function W(e){$.transition().duration(k).ease("elastic").attr("transform","rotate("+J(e)+")")}function K(e){return e*Math.PI/180}function J(e){return S+C(e)*A}function X(){return"translate("+f+","+f+")"}M.setGaugePointer=W});return M}M.dispatch=g;M.color=function(e){if(!arguments.length)return p;p=e;return M};M.fill=function(e){if(!arguments.length)return m;m=e;return M};M.classes=function(e){if(!arguments.length)return _;_=e;return M};M.gradient=function(e){if(!arguments.length)return gradient;gradient=e;return M};M.margin=function(e){if(!arguments.length)return t;t=e;return M};M.width=function(e){if(!arguments.length)return n;n=e;return M};M.height=function(e){if(!arguments.length)return i;i=e;return M};M.values=function(e){if(!arguments.length)return a;a=e;return M};M.x=function(e){if(!arguments.length)return s;s=e;return M};M.y=function(e){if(!arguments.length)return o;o=d3.functor(e);return M};M.showLabels=function(e){if(!arguments.length)return f;f=e;return M};M.id=function(e){if(!arguments.length)return u;u=e;return M};M.valueFormat=function(e){if(!arguments.length)return d;d=e;return M};M.labelThreshold=function(e){if(!arguments.length)return labelThreshold;labelThreshold=e;return M};M.ringWidth=function(e){if(!arguments.length)return v;v=e;return M};M.pointerWidth=function(e){if(!arguments.length)return y;y=e;return M};M.pointerTailLength=function(e){if(!arguments.length)return b;b=e;return M};M.pointerHeadLength=function(e){if(!arguments.length)return x;x=e;return M};M.minValue=function(e){if(!arguments.length)return w;w=e;return M};M.maxValue=function(e){if(!arguments.length)return L;L=e;return M};M.minAngle=function(e){if(!arguments.length)return S;S=e;return M};M.maxAngle=function(e){if(!arguments.length)return E;E=e;return M};M.transitionMs=function(e){if(!arguments.length)return k;k=e;return M};M.labelFormat=function(e){if(!arguments.length)return c;c=e;return M};M.labelInset=function(e){if(!arguments.length)return T;T=e;return M};M.setPointer=function(e){if(!arguments.length)return M.setGaugePointer;M.setGaugePointer(e);return M};M.isRendered=function(e){return svg!==undefined};M.showPointer=function(e){if(!arguments.length)return h;h=e;return M};M.locality=function(t){if(!arguments.length){return l}l=e.utils.buildLocality(t);return M};return M};e.models.gaugeChart=function(){var t={top:10,right:10,bottom:10,left:10},n=null,i=null,r=false,a=true,s="ltr",o=null,l=true,u=function(e,t,n,i){return"<h3>"+e+"</h3>"+"<p>"+t+"</p>"},c,d,f={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available.",noLabel:"undefined"},h=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove");var p=e.models.gauge(),m=e.models.legend().align("center");var _=function(t,n){var i=p.valueFormat()(t.point.y1-t.point.y0),r=u(t.point.key,i,t,g);o=e.tooltip.show(t.e,r,null,null,n)};function g(u){u.each(function(u){var c=u.properties,d=u.data,f=d3.select(this),v=this,y=(n||parseInt(f.style("width"),10)||960)-t.left-t.right,b=(i||parseInt(f.style("height"),10)||400)-t.top-t.bottom,x=y,w=b,L={top:0,right:0,bottom:0,left:0};g.update=function(){f.transition().call(g)};g.container=this;if(!d||!d.length){var S=f.selectAll(".nv-noData").data([g.strings().noData]);S.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");S.attr("x",t.left+y/2).attr("y",t.top+b/2).text(function(e){return e});return g}else{f.selectAll(".nv-noData").remove()}d.map(function(e,t){e.series=t});var E=f.selectAll("g.nv-wrap.nv-gaugeChart").data([d]),k=E.enter().append("g").attr("class","nvd3 nv-wrap nv-gaugeChart").append("g"),T=E.select("g").attr("class","nv-chartWrap");k.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF");T.select(".nv-background").attr("width",y+t.left+t.right).attr("height",b+t.top+t.bottom);k.append("g").attr("class","nv-titleWrap");var M=T.select(".nv-titleWrap");k.append("g").attr("class","nv-gaugeWrap");var A=T.select(".nv-gaugeWrap");k.append("g").attr("class","nv-legendWrap");var C=T.select(".nv-legendWrap");E.attr("transform","translate("+t.left+","+t.top+")");var R={width:0,height:0};M.select(".nv-title").remove();if(r&&c.title){M.append("text").attr("class","nv-title").attr("x",s==="rtl"?y:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(c.title).attr("stroke","none").attr("fill","black");R=e.utils.getTextBBox(T.select(".nv-title"));L.top+=R.height+12}var D={width:0,height:0};if(a){m.id("legend_"+g.id()).strings(g.strings().legend).align("center").height(b-L.top);C.datum(d).call(m);m.arrange(y);var D=e.utils.getTextBBox(C.select(".nv-legend-link")),I=y-R.width-6,O=r&&m.collapsed()&&I>D.width?true:false,N=s==="rtl"||!m.collapsed()?0:y-m.width(),F=R.height;if(O){F=R.height-m.height()/2-D.height/2}else if(!r){F=-m.margin().top}C.attr("transform","translate("+N+","+F+")");L.top+=O?0:m.height()-12}w=b-L.top-L.bottom;p.width(x).height(w);A.datum(u).attr("transform","translate("+L.left+","+L.top+")").transition().call(p);h.on("tooltipShow",function(e){if(l){_(e,v.parentNode)}});h.on("tooltipMove",function(t){if(o){e.tooltip.position(v.parentNode,o,t)}});h.on("tooltipHide",function(){if(l){e.tooltip.cleanup()}});h.on("chartClick",function(){if(m.enabled()){m.dispatch.closeMenu()}})});return g}p.dispatch.on("elementMouseover.tooltip",function(e){h.tooltipShow(e)});p.dispatch.on("elementMousemove.tooltip",function(e){h.tooltipMove(e)});p.dispatch.on("elementMouseout.tooltip",function(){h.tooltipHide()});g.dispatch=h;g.gauge=p;g.legend=m;d3.rebind(g,p,"id","x","y","color","fill","classes","gradient","locality");d3.rebind(g,p,"valueFormat","values","showLabels","showPointer","setPointer","ringWidth","labelThreshold","maxValue","minValue","transitionMs");g.colorData=function(t){var n=arguments[0],i=arguments[1]||{};var r=function(t,n){return e.utils.defaultColor()(t,t.series)};var a=function(e,t){return"nv-arc-path nv-series-"+e.series};switch(n){case"graduated":r=function(e,t){return d3.interpolateHsl(d3.rgb(i.c1),d3.rgb(i.c2))(e.series/i.l)};break;case"class":r=function(){return"inherit"};a=function(e,t){var n=e.series*(i.step||1)%14;n=(n>9?"":"0")+n;return"nv-arc-path nv-series-"+e.series+" nv-fill"+n};break;case"data":r=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)};a=function(e,t){return"nv-arc-path nv-series-"+e.series+(e.classes?" "+e.classes:"")};break}var s=!i.gradient?r:function(e,t){return p.gradient(e,e.series)};p.color(r);p.fill(s);p.classes(a);m.color(r);m.classes(a);return g};g.margin=function(e){if(!arguments.length){return t}for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return g};g.width=function(e){if(!arguments.length){return n}n=e;return g};g.height=function(e){if(!arguments.length){return i}i=e;return g};g.showTitle=function(e){if(!arguments.length){return r}r=e;return g};g.showLegend=function(e){if(!arguments.length){return a}a=e;return g};g.tooltip=function(e){if(!arguments.length){return o}o=e;return g};g.tooltips=function(e){if(!arguments.length){return l}l=e;return g};g.tooltipContent=function(e){if(!arguments.length){return u}u=e;return g};g.strings=function(e){if(!arguments.length){return f}for(var t in e){if(e.hasOwnProperty(t)){f[t]=e[t]}}return g};g.direction=function(e){if(!arguments.length){return s}s=e;m.direction(e);return g};return g};e.models.line=function(){var t=e.models.scatter();var n={top:0,right:0,bottom:0,left:0},i=960,r=500,a=function(e){return e.x},s=function(e){return e.y},o=function(e,t){return!isNaN(s(e,t))&&s(e,t)!==null},l=function(e){return e&&e.area||false},u=false,c,d,f="linear",h=function(t,n){return e.utils.defaultColor()(t,t.series)},p=h,m=function(e,t){return"nv-group nv-series-"+e.series};var _,g;function v(p){p.each(function(p){var y=i-n.left-n.right,b=r-n.top-n.bottom,x=d3.select(this);c=t.xScale();d=t.yScale();_=_||c;g=g||d;var w=x.selectAll("g.nv-wrap.nv-line").data([p]);var L=w.enter().append("g").attr("class","nvd3 nv-wrap nv-line");var S=L.append("defs");var E=L.append("g");var k=w.select("g");v.gradient=function(t,n,i){return e.utils.colorLinearGradient(t,v.id()+"-"+n,i,h(t,n),w.select("defs"))};E.append("g").attr("class","nv-groups");E.append("g").attr("class","nv-scatterWrap");w.attr("transform","translate("+n.left+","+n.top+")");t.width(y).height(b);var T=w.select(".nv-scatterWrap");T.call(t);S.append("clipPath").attr("id","nv-edge-clip-"+t.id()).append("rect");w.select("#nv-edge-clip-"+t.id()+" rect").attr("width",y).attr("height",b);k.attr("clip-path",u?"url(#nv-edge-clip-"+t.id()+")":"");T.attr("clip-path",u?"url(#nv-edge-clip-"+t.id()+")":"");var M=w.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});M.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);d3.transition(M.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();M.classed("hover",function(e){return e.hover}).attr("class",m).attr("fill",h).attr("stroke",h);d3.transition(M).style("stroke-opacity",1).style("fill-opacity",.5);var A=M.selectAll("path.nv-area").data(function(e){return l(e)?[e]:[]});A.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(f).defined(o).x(function(e,t){return _(a(e,t))}).y0(function(e,t){return g(s(e,t))}).y1(function(e,t){return g(d.domain()[0]<=0?d.domain()[1]>=0?0:d.domain()[1]:d.domain()[0])}).apply(this,[e.values])});A.exit().remove();d3.transition(M.exit().selectAll("path.nv-area")).attr("d",function(e){return d3.svg.area().interpolate(f).defined(o).x(function(e,t){return _(a(e,t))}).y0(function(e,t){return g(s(e,t))}).y1(function(e,t){return g(d.domain()[0]<=0?d.domain()[1]>=0?0:d.domain()[1]:d.domain()[0])}).apply(this,[e.values])});d3.transition(A).attr("d",function(e){return d3.svg.area().interpolate(f).defined(o).x(function(e,t){return c(a(e,t))}).y0(function(e,t){return d(s(e,t))}).y1(function(e,t){return g(d.domain()[0]<=0?d.domain()[1]>=0?0:d.domain()[1]:d.domain()[0])}).apply(this,[e.values])});var C=M.selectAll("path.nv-line").data(function(e){if(!e.values||!e.values.length){return[null]}if(e.values.length>1){return[e.values]}var t=c.domain().map(function(t,n){if(Array.isArray(e.values[0])){return[t,e.values[0][1]]}else{var i=JSON.parse(JSON.stringify(e.values[0]));i.x=t;return i}});return[t]});C.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(f).defined(o).x(function(e,t){return _(a(e,t))}).y(function(e,t){return g(s(e,t))}));d3.transition(M.exit().selectAll("path.nv-line")).attr("d",d3.svg.line().interpolate(f).defined(o).x(function(e,t){return _(a(e,t))}).y(function(e,t){return g(s(e,t))}));d3.transition(C).attr("d",d3.svg.line().interpolate(f).defined(o).x(function(e,t){return c(a(e,t))}).y(function(e,t){return d(s(e,t))}));_=c.copy();g=d.copy()});return v}v.dispatch=t.dispatch;v.scatter=t;d3.rebind(v,t,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","sizeRange","forceX","forceY","forceSize","useVoronoi","clipVoronoi","clipRadius","padData","padDataOuter","singlePoint","nice","locality");v.color=function(e){if(!arguments.length){return h}h=e;t.color(h);return v};v.fill=function(e){if(!arguments.length){return p}p=e;t.fill(p);return v};v.classes=function(e){if(!arguments.length){return m}m=e;t.classes(m);return v};v.gradient=function(e){if(!arguments.length){return gradient}gradient=e;return v};v.margin=function(e){if(!arguments.length){return n}n.top=typeof e.top!="undefined"?e.top:n.top;n.right=typeof e.right!="undefined"?e.right:n.right;n.bottom=typeof e.bottom!="undefined"?e.bottom:n.bottom;n.left=typeof e.left!="undefined"?e.left:n.left;return v};v.width=function(e){if(!arguments.length){return i}i=e;return v};v.height=function(e){if(!arguments.length){return r}r=e;return v};v.x=function(e){if(!arguments.length){return a}a=e;t.x(e);return v};v.y=function(e){if(!arguments.length){return s}s=e;t.y(e);return v};v.clipEdge=function(e){if(!arguments.length){return u}u=e;return v};v.interpolate=function(e){if(!arguments.length){return f}f=e;return v};v.defined=function(e){if(!arguments.length){return o}o=e;return v};v.isArea=function(e){if(!arguments.length){return l}l=d3.functor(e);return v};return v};e.models.lineChart=function(){var t={top:10,right:10,bottom:10,left:10},n=null,i=null,r=false,a=false,s=true,o="ltr",l=null,u=0,c=true,d,f,h={},p={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available.",noLabel:"undefined"},m=3,_=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState");var g=function(t,n,i){var r=isNaN(parseInt(t,10))||!n||!Array.isArray(n)?t:n[parseInt(t,10)]||t;return i?e.utils.dateFormat(r,"yMMMM",k.locality()):r};var v=function(t,n){return e.utils.numberFormatSI(t,2,n,k.locality())};var y=e.models.line().clipEdge(true),b=e.models.axis().orient("bottom").valueFormat(g).tickPadding(4).highlightZero(false).showMaxMin(false),x=e.models.axis().orient("left").valueFormat(v).tickPadding(4),w=e.models.legend().align("right"),L=e.models.legend().align("left").color(["#444"]);var S=function(e,t,n,i,r){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"};var E=function(t,n){var i=t.series.key,r=y.x()(t.point,t.pointIndex),a=y.y()(t.point,t.pointIndex),s=S(i,r,a,t,k);l=e.tooltip.show(t.e,s,null,null,n)};function k(p){p.each(function(p){var g=this,v=d3.select(this);var S=p?p.properties:{},T=p?p.data:null,M=S.labels?S.labels.map(function(e){return e.l||e}):[];var A=[],C=[],R=0,D=false,I=false,O=true,N=p.properties.xDataType==="datetime"||false,F=p.properties.yDataType==="currency"||false;k.container=this;k.update=function(){v.transition().duration(u).call(k)};function B(e){if(e&&e.length&&e.filter(function(e){return e.values.length}).length){v.selectAll(".nv-noData").remove();return false}v.select(".nvd3.nv-wrap").remove();var r=n||parseInt(v.style("width"),10)||960,a=i||parseInt(v.style("height"),10)||400,s=v.selectAll(".nv-noData").data([k.strings().noData]);s.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");s.attr("x",t.left+r/2).attr("y",t.top+a/2).text(function(e){return e});return true}if(B(T)){return k}O=Array.isArray(T[0].values[0]);if(O){y.x(function(e){return e[0]});y.y(function(e){return e[1]})}else{y.x(function(e){
return e.x});y.y(function(e){return e.y})}r=r&&S.title;T.map(function(e,t){e.series=t;e.total=d3.sum(e.values,function(e,t){return y.y()(e,t)});if(!e.total){e.disabled=true}});C=S.labels?S.labels.map(function(e){return[].concat(e.l)[0]||k.strings().noLabel}):[];A=T.filter(function(e){return!e.disabled});A=A.length?A:[{series:0,total:0,disabled:true,values:[]}];R=d3.sum(A,function(e){return e.total});if(!R){B();return k}h.disabled=A.map(function(e){return!!e.disabled});h.interpolate=y.interpolate();h.isArea=y.isArea()();var P=[{key:"Linear",disabled:y.interpolate()!=="linear"},{key:"Basis",disabled:y.interpolate()!=="basis"},{key:"Monotone",disabled:y.interpolate()!=="monotone"},{key:"Cardinal",disabled:y.interpolate()!=="cardinal"},{key:"Line",disabled:y.isArea()()===true},{key:"Area",disabled:y.isArea()()===false}];D=d3.max(A,function(e){return e.values.length})===1;y.padData(D?false:true).padDataOuter(-1).singlePoint(D).xScale(N&&!C.length?d3.time.scale():d3.scale.linear());if(D){var U=d3.merge(A.map(function(e){return e.values.map(function(e,t){return y.x()(e,t)})})).reduce(function(e,t){if(e.indexOf(t)<0)e.push(t);return e},[]).sort(function(e,t){return e-t}),Y=d3.extent(U),H=1*(N&&!C.length?864e5:1);var G=d3.merge(A.map(function(e){return e.values.map(function(e,t){return y.y()(e,t)})})),j=d3.extent(G),V=A.length===1?2:Math.min((j[1]-j[0])/A.length,j[0]);y.xDomain([Y[0]-H,Y[1]+H]).yDomain([j[0]-V,j[1]+V]);b.ticks(U.length).tickValues(U).showMaxMin(false);x.ticks(D?5:null).showMaxMin(false).highlightZero(false)}else{y.xDomain(null).yDomain(null);b.ticks(null).tickValues(null).showMaxMin(N);x.ticks(null).showMaxMin(true).highlightZero(true)}d=y.xScale();f=y.yScale();b.scale(d);x.scale(f);k.render=function(){var l=n||parseInt(v.style("width"),10)||960,c=i||parseInt(v.style("height"),10)||400,d=l-t.left-t.right,f=c-t.top-t.bottom,h=d,p=f,_={top:0,right:0,bottom:0,left:0};var g=0,E=0,M=0,R=0,I={width:0,height:0},B=0,U=0,Y="";var H=v.selectAll("g.nv-wrap.nv-lineChart").data([A]),G=H.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),j=H.select("g").attr("class","nv-chartWrap");G.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF");j.select(".nv-background").attr("width",d+t.left+t.right).attr("height",f+t.top+t.bottom);G.append("g").attr("class","nv-titleWrap");var V=j.select(".nv-titleWrap");G.append("g").attr("class","nv-x nv-axis");var z=j.select(".nv-x.nv-axis");G.append("g").attr("class","nv-y nv-axis");var $=j.select(".nv-y.nv-axis");G.append("g").attr("class","nv-linesWrap");var q=j.select(".nv-linesWrap");G.append("g").attr("class","nv-controlsWrap");var W=j.select(".nv-controlsWrap");G.append("g").attr("class","nv-legendWrap");var K=j.select(".nv-legendWrap");H.attr("transform","translate("+t.left+","+t.top+")");V.select(".nv-title").remove();if(r){V.append("text").attr("class","nv-title").attr("x",o==="rtl"?d:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(S.title).attr("stroke","none").attr("fill","black");I=e.utils.getTextBBox(j.select(".nv-title"));R+=I.height}if(a){L.id("controls_"+k.id()).strings(k.strings().controls).align("left").height(f-R);W.datum(P).call(L);g=L.calculateWidth()}if(s){w.id("legend_"+k.id()).strings(k.strings().legend).align("right").height(f-R);K.datum(T).call(w);E=w.calculateWidth()}M=d/(g+E);g=Math.floor(g*M);E=Math.floor(E*M);if(a){L.arrange(g);E=d-L.width()}if(s){w.arrange(E);g=d-w.width()}if(a){var J=o==="rtl"?d-L.width():0,X=r?I.height:-w.margin().top;W.attr("transform","translate("+J+","+X+")");B=L.height()}if(s){var Z=e.utils.getTextBBox(K.select(".nv-legend-link")),Q=d-I.width-6,ee=r&&!a&&w.collapsed()&&Q>Z.width?true:false,J=o==="rtl"?0:d-w.width(),X=I.height;if(ee){X=I.height-w.height()/2-Z.height/2}else if(!r){X=-w.margin().top}K.attr("transform","translate("+J+","+X+")");U=ee?12:w.height()}R+=Math.max(B,U);p=f-R-_.top-_.bottom;var te=Math.pow(m,2)*Math.PI*(D?3:1);y.width(h).height(p).id(k.id()).size(te).sizeRange([te,te]).sizeDomain([te,te]);q.datum(A).call(y);var ne={top:0,right:0,bottom:0,left:0},ie={top:0,right:0,bottom:0,left:0};function re(){_.left=Math.max(ie.left,ne.left);_.right=Math.max(ie.right,ne.right);_.top=Math.max(ie.top,ne.top);_.bottom=Math.max(ie.bottom,ne.bottom)}function ae(){h=d-_.left-_.right;p=f-R-_.top-_.bottom;y.width(h).height(p);y.scatter.resetDimensions(h,p)}x.margin(_).tickFormat(function(e,t){return x.valueFormat()(e,F)});$.call(x);ne=x.margin();re();ae();Y=_.left+",";Y+=_.top+(b.orient()==="bottom"?p:0);z.attr("transform","translate("+Y+")");b.tickSize(-p+(y.padData()?m:0),0).margin(_).tickFormat(function(e,t,n){return b.valueFormat()(e-!O,C,N)});z.call(b);ie=b.margin();re();ae();b.resizeTickLines(-p+(y.padData()?m:0));x.tickSize(-h+(y.padData()?m:0),0).margin(_);$.call(x);q.transition().duration(u).call(y);_.top+=R;Y=_.left+",";Y+=_.top+(b.orient()==="bottom"?p:0);z.attr("transform","translate("+Y+")");Y=_.left+(x.orient()==="left"?0:h)+",";Y+=_.top;$.attr("transform","translate("+Y+")");q.attr("transform","translate("+_.left+","+_.top+")")};k.render();w.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled;if(!T.filter(function(e){return!e.disabled}).length){T.map(function(e){e.disabled=false;v.selectAll(".nv-series").classed("disabled",false);return e})}h.disabled=T.map(function(e){return!!e.disabled});_.stateChange(h);v.transition().duration(u).call(k)});L.dispatch.on("legendClick",function(e,t){if(!e.disabled){return}P=P.map(function(e){e.disabled=true;return e});e.disabled=false;switch(e.key){case"Basis":y.interpolate("basis");break;case"Linear":y.interpolate("linear");break;case"Monotone":y.interpolate("monotone");break;case"Cardinal":y.interpolate("cardinal");break;case"Line":y.isArea(false);break;case"Area":y.isArea(true);break}h.interpolate=y.interpolate();h.isArea=y.isArea();_.stateChange(h);v.transition().duration(u).call(k)});_.on("tooltipShow",function(e){if(c){E(e,g.parentNode)}});_.on("tooltipMove",function(t){if(l){e.tooltip.position(g.parentNode,l,t,"s")}});_.on("tooltipHide",function(){if(c){e.tooltip.cleanup()}});_.on("changeState",function(e){if(typeof e.disabled!=="undefined"){T.forEach(function(t,n){t.disabled=e.disabled[n]});h.disabled=e.disabled}if(typeof e.interpolate!=="undefined"){y.interpolate(e.interpolate);h.interpolate=e.interpolate}if(typeof e.isArea!=="undefined"){y.isArea(e.isArea);h.isArea=e.isArea}v.transition().duration(u).call(k)});_.on("chartClick",function(){if(L.enabled()){L.dispatch.closeMenu()}if(w.enabled()){w.dispatch.closeMenu()}})});return k}y.dispatch.on("elementMouseover.tooltip",function(e){_.tooltipShow(e)});y.dispatch.on("elementMousemove.tooltip",function(e){_.tooltipMove(e)});y.dispatch.on("elementMouseout.tooltip",function(){_.tooltipHide()});k.dispatch=_;k.lines=y;k.legend=w;k.controls=L;k.xAxis=b;k.yAxis=x;d3.rebind(k,y,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","color","fill","classes","gradient","locality");d3.rebind(k,y,"defined","isArea","interpolate","size","clipVoronoi","useVoronoi","interactive","nice");d3.rebind(k,b,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks");k.colorData=function(t){var n=arguments[0],i=arguments[1]||{};var r=function(t,n){return e.utils.defaultColor()(t,t.series)};var a=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":r=function(e,t){return d3.interpolateHsl(d3.rgb(i.c1),d3.rgb(i.c2))(e.series/i.l)};break;case"class":r=function(){return"inherit"};a=function(e,t){var n=e.series*(i.step||1)%14;n=(n>9?"":"0")+n;return"nv-group nv-series-"+e.series+" nv-fill"+n+" nv-stroke"+n};break;case"data":r=function(t,n){return t.color||e.utils.defaultColor()(t,t.series)};a=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")};break}var s=!i.gradient?r:function(e,t){var n={orientation:i.orientation||"horizontal",position:i.position||"base"};return y.gradient(e,e.series,n)};y.color(r);y.fill(s);y.classes(a);w.color(r);w.classes(a);return k};k.margin=function(e){if(!arguments.length){return t}for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return k};k.width=function(e){if(!arguments.length){return n}n=e;return k};k.height=function(e){if(!arguments.length){return i}i=e;return k};k.showTitle=function(e){if(!arguments.length){return r}r=e;return k};k.showControls=function(e){if(!arguments.length){return a}a=e;return k};k.showLegend=function(e){if(!arguments.length){return s}s=e;return k};k.tooltip=function(e){if(!arguments.length){return l}l=e;return k};k.tooltips=function(e){if(!arguments.length){return c}c=e;return k};k.tooltipContent=function(e){if(!arguments.length){return S}S=e;return k};k.state=function(e){if(!arguments.length){return h}h=e;return k};k.strings=function(e){if(!arguments.length){return p}for(var t in e){if(e.hasOwnProperty(t)){p[t]=e[t]}}return k};k.direction=function(e){if(!arguments.length){return o}o=e;x.direction(e);b.direction(e);w.direction(e);L.direction(e);return k};k.delay=function(e){if(!arguments.length){return u}u=e;return k};return k};e.models.multiBar=function(){var t={top:0,right:0,bottom:0,left:0},n=960,i=500,r=d3.scale.ordinal(),a=d3.scale.linear(),s=Math.floor(Math.random()*1e4),o=function(e){return e.x},l=function(e){return e.y},u=e.utils.buildLocality(),c=[0],d=true,f=null,h,p=true,m=false,_=function(e){return e},g=false,v=true,y=60,b="ltr",x=200,w,L,S=false,E=function(t,n){return e.utils.defaultColor()(t,t.series)},k=E,T=false,f=null,M=function(e,t){return"nv-group nv-series-"+e.series},A=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");var C,R;function D(u){u.each(function(u){var f=d3.select(this),h=v?"vertical":"horizontal",x=n-t.left-t.right,I=i-t.top-t.bottom,O=v?"width":"height",N=v?"height":"width",F=v?"width":"height",B=v?"x":"y",P=v?"y":"x",U=0,Y=0,H=0,G=u.length-1,j=false,V=m,z=[],$=0;function q(e,t){return Math.max(Math.round(Math.abs(a(l(e,t))-a(0))),0)}function W(){return r.rangeBand()/(d?1:u.length)}function K(e){return e?1:-1}if(d){u=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(l)(u);if(V==="top"||V===true){V="end"}}else if(V){if(V==="total"){V="top"}else if(V===true){V="end"}j=v}if(d){var J=[];u[0].values.map(function(e,t){var n=0,i=0;u.map(function(e){var r=e.values[t];r.size=Math.abs(r.y);if(r.y<0){r.y1=i-(v?0:r.size);i-=r.size}else{r.y1=n+(v?r.size:0);n+=r.size}});J[t]={neg:i,pos:n}})}var X=w&&L&&!m?[]:d3.merge(u.map(function(e){return e.values.map(function(e,t){return{x:o(e,t),y:l(e,t),y0:e.y0,y1:e.y1}})}));Y=u[0].values.length;U=u.length;if(m){var Z=V==="total"&&d?J.map(function(e){return e.neg}).concat(J.map(function(e){return e.pos})):X.map(l);var Q=d3.extent(u.map(function(e,t){return e.series}));H=Q[0];G=Q[1];z=e.utils.stringSetLengths(Z,f,_,"nv-label-value");$=e.utils.stringSetThickness([83],f,_,"nv-label-value")[0]}D.resetDimensions=function(e,r){n=e;i=r;x=e-t.left-t.right;I=r-t.top-t.bottom;ee()};function ee(){var e=v?x:I,t=v?I:x;var n=d?y:y*U+y,i=y*(d?.25:1),s=Math.max(.25,(e-Y*n-i)/(2*n));if(g){r.domain(w||X.map(function(e){return e.x})).rangeBands([0,e],.3)}else{r.domain(w||X.map(function(e){return e.x})).rangeRoundBands([0,e],.25,s)}var o=o||d3.extent(X.map(function(e){var t=v?0:e.y,n=v?e.y:0;return d?e.y>0?e.y1+t:e.y1+n:e.y}).concat(c));var l=v?[I,0]:[0,x];a.domain(o).range(l);if(m){if(v&&d&&d3.max(z)+8>W()){j=true}F=v&&!j?"labelHeight":"labelWidth"}if(V==="top"||V==="total"){var u=t,f=0,h=0,p=0,i=v?j?2:-2:2;Z.forEach(function(e,t){var n=V==="total"&&d&&v&&!j?$:z[t];if(v&&e>0||!v&&e<0){if(a(e)-n<f){f=a(e)-n;p=n}}else{if(a(e)+n>u){u=a(e)+n;h=n}}});if(v){a.range([t-(a.domain()[0]<0?h+i+2:0),a.domain()[1]>0?p+i:0])}else{a.range([a.domain()[0]<0?p+i+4:0,t-(a.domain()[1]>0?h+i:0)])}}if(S){a.nice()}C=C||r;R=R||a}ee();var te=f.selectAll(".nvd3.nv-wrap").data([u]);var ne=te.enter().append("g");var ie=ne.append("defs");var re=ne.append("g");var ae=te.select("g");te.attr("class","nvd3 nv-wrap nv-multibar");D.gradient=function(t,n,i){return e.utils.colorLinearGradient(t,s+"-"+n,i,E(t,n),te.select("defs"))};re.append("g").attr("class","nv-groups");te.attr("transform","translate("+t.left+","+t.top+")");if(p){ie.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect");te.select("#nv-edge-clip-"+s+" rect").attr("width",x).attr("height",I)}ae.attr("clip-path",p?"url(#nv-edge-clip-"+s+")":"");if(T){var se=e.utils.createTexture(ie,s)}var oe=te.select(".nv-groups").selectAll(".nv-group").data(function(e){return e});var le=oe.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);oe.exit().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).selectAll("g.nv-bar").attr("y",function(e){return d?R(e.y0):R(0)}).attr(O,0).remove();oe.exit().remove();oe.attr("class",M).attr("fill",k).classed("hover",function(e){return e.hover}).classed("nv-active",function(e){return e.active==="active"}).classed("nv-inactive",function(e){return e.active==="inactive"}).style({"stroke-opacity":1,"fill-opacity":1});oe.on("mouseover",function(e,t,n){d3.select(this).classed("hover",true)}).on("mouseout",function(e,t,n){d3.select(this).classed("hover",false)});var ue=oe.selectAll("g.nv-bar").data(function(e){return e.values});var ce=ue.enter().append("g").attr("class","nv-bar");ue.exit().remove();ce.append("rect").attr("class","nv-base").style("fill","inherit").attr("x",0).attr("y",0);if(T){ce.append("rect").attr("class","nv-texture").attr("x",0).attr("y",0).style("mask","url("+se+")")}ce.append("rect").attr("class","nv-label-box").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("rx",2).attr("ry",2).style("fill","transparent").style("stroke-width",0).style("fill-opacity",0);ce.append("text").attr("class","nv-label-value");ue.attr("class",function(e,t){return"nv-bar "+(l(e,t)<0?"negative":"positive")}).attr("transform",function(e,t,n){var i=d?{x:Math.round(r(o(e,t))),y:Math.round(a(e.y1))}:{x:Math.round(n*W()+r(o(e,t))),y:Math.round(l(e,t)<0?v?a(0):a(l(e,t)):v?a(l(e,t)):a(0))};return"translate("+i[B]+","+i[P]+")"});ue.select("rect.nv-base").attr(B,0).attr(N,q).attr(O,W);if(T){ue.select("rect.nv-texture").attr(B,0).attr(N,q).attr(O,W).style("fill",function(t,n){var i=k(t),r=e.utils.getTextContrast(i,n);return r})}function de(e,t,n,i){return{value:l(t,n),point:t,series:u[i],pointIndex:n,seriesIndex:i,groupIndex:t.group,id:s,e:e}}ue.on("mouseover",function(e,t,n){var i=de(d3.event,e,t,n);A.elementMouseover(i)}).on("mousemove",function(e,t,n){A.elementMousemove(d3.event)}).on("mouseout",function(e,t,n){A.elementMouseout()}).on("click",function(e,t,n){d3.event.stopPropagation();var i=de(d3.event,e,t,n);A.elementClick(i)}).on("dblclick",function(e,t,n){d3.event.stopPropagation();var i=de(d3.event,e,t,n);A.elementDblClick(i)});var fe=ue.select(".nv-label-value");if(m){fe.text(function(e,t){var n=V==="total"&&d?l(e,t)<0?J[t].neg:J[t].pos:l(e,t);return _(n)}).each(function(e,t){var n=this.getBoundingClientRect();e.labelWidth=Math.floor(n.width)+4;e.labelHeight=Math.floor(n.height);e.barLength=q(e,t);e.barThickness=W()});fe.attr("dy","0.35em").attr("text-anchor",function(e,t){var n="middle",i=l(e,t)<0;if(v&&!j){n="middle"}else{switch(V){case"start":n=i?"end":"start";break;case"middle":n="middle";break;case"end":n=i?"start":"end";break;case"top":case"total":n=i?"end":"start";break}n=b==="rtl"&&n!=="middle"?n==="start"?"end":"start":n}return n}).attr("transform","rotate("+(j?-90:0)+" 0,0)").attr("x",function(e,t){var n=0,i=l(e,t)<0?-1:1,r=i<0,a=(4+(j||!v)*2)*i;if(v&&!j){n=e.barThickness/2}else{switch(V){case"start":n=e.barLength*(r-j)+a;break;case"middle":n=e.barLength*(j?-1:1)/2;break;case"end":n=e.barLength*(!j-r)-a;break;case"top":case"total":n=e.barLength*(!j-r)+2*i;break}}return n}).attr("y",function(e,t){var n=0,i=l(e,t)<0?-1:1,r=i<0,a=(e.labelHeight/2+(4+j*2)*(V==="total"?0:1))*i;if(v&&!j){switch(V){case"start":n=e.barLength*(1-r)-a;break;case"middle":n=e.barLength/2;break;case"end":n=e.barLength*(0+r)+a;break;case"total":n=e.barLength*(0+r)+a*-1;break}}else{n=e.barThickness/2}return n}).style("fill",function(t,n,i){if(V==="top"||V==="total"){return"#000"}var r=k(t),a=e.utils.getTextContrast(r,n);return a}).style("fill-opacity",function(e,t){if(V==="total"){if(e.series!==H&&e.series!==G){return 0}var n=l(e,t);return n<0&&J[t].neg===e.y1+(v?n:0)||n>=0&&J[t].pos===e.y1+(v?0:n)?1:0}else{var i=e.barLength<(!v||j?e.labelWidth:e.labelHeight)+8,r=e.barThickness<(!v||j?e.labelHeight:e.labelWidth)+4;return V!=="top"&&(i||r)?0:1}});function he(e,t,n,i){var r=0,a=l(e,t)<0?-1:1,s=n===a<0?1:0,o=e.barLength-e[F];if(n?v:!v){r=(e.barThickness-(j===n?e.labelHeight:e.labelWidth))/2}else{switch(V){case"start":r=o*(0+s)+i*a;break;case"middle":r=o/2;break;case"end":r=o*(1-s)-i*a;break;case"top":r=e.barLength*(1-s)-e.labelWidth*(0+s);break;case"total":r=e.barLength*(1-s)-(j===n?e.labelHeight:e.labelWidth)*(0+s);break}}return r}if(V==="total"&&d){ue.select("rect.nv-label-box").style("fill-opacity",0)}ue.filter(function(e,t){return V==="total"&&d?e.series===H||e.series===G:true}).select("rect.nv-label-box").attr("x",function(e,t){return he(e,t,true,4)}).attr("y",function(e,t){return he(e,t,false,-4)}).attr("width",function(e,t){return j?e.labelHeight:e.labelWidth}).attr("height",function(e,t){return j?e.labelWidth:e.labelHeight}).style("fill",function(e,t){return V==="top"||V==="total"?"#fff":k(e,t)}).style("fill-opacity",function(e,t){var n=e.barLength<(!v||j?e.labelWidth:e.labelHeight)+8,i=e.barThickness<(!v||j?e.labelHeight:e.labelWidth)+4;return V!=="top"&&(n||i)?0:1})}else{fe.text("").style("fill-opacity",0);ue.select("rect.label-box").style("fill-opacity",0)}C=r.copy();R=a.copy()});return D}D.dispatch=A;D.color=function(e){if(!arguments.length){return E}E=e;return D};D.fill=function(e){if(!arguments.length){return k}k=e;return D};D.classes=function(e){if(!arguments.length){return M}M=e;return D};D.gradient=function(e){if(!arguments.length){return gradient}gradient=e;return D};D.x=function(e){if(!arguments.length){return o}o=e;return D};D.y=function(e){if(!arguments.length){return l}l=e;return D};D.margin=function(e){if(!arguments.length){return t}for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return D};D.width=function(e){if(!arguments.length){return n}n=e;return D};D.height=function(e){if(!arguments.length){return i}i=e;return D};D.xScale=function(e){if(!arguments.length){return r}r=e;return D};D.yScale=function(e){if(!arguments.length){return a}a=e;return D};D.xDomain=function(e){if(!arguments.length){return w}w=e;return D};D.yDomain=function(e){if(!arguments.length){return L}L=e;return D};D.forceY=function(e){if(!arguments.length){return c}c=e;return D};D.stacked=function(e){if(!arguments.length){return d}d=e;return D};D.clipEdge=function(e){if(!arguments.length){return p}p=e;return D};D.barColor=function(t){if(!arguments.length){return f}f=e.utils.getColor(t);return D};D.disabled=function(e){if(!arguments.length){return h}h=e;return D};D.id=function(e){if(!arguments.length){return s}s=e;return D};D.delay=function(e){if(!arguments.length){return x}x=e;return D};D.showValues=function(e){if(!arguments.length){return m}m=isNaN(parseInt(e,10))?e:parseInt(e,10)&&true||false;return D};D.valueFormat=function(e){if(!arguments.length){return _}_=e;return D};D.withLine=function(e){if(!arguments.length){return g}g=e;return D};D.vertical=function(e){if(!arguments.length){return v}v=e;return D};D.baseDimension=function(e){if(!arguments.length){return y}y=e;return D};D.direction=function(e){if(!arguments.length){return b}b=e;return D};D.nice=function(e){if(!arguments.length){return S}S=e;return D};D.textureFill=function(e){if(!arguments.length)return T;T=e;return D};D.locality=function(t){if(!arguments.length){return u}u=e.utils.buildLocality(t);return D};return D};e.models.multiBarChart=function(){var t=true,n={top:10,right:10,bottom:10,left:10},i=null,r=null,a=false,s=false,o=true,l="ltr",u=null,c=true,d=true,f=function(e){return},h,p,m={},_={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available.",noLabel:"undefined"},g=true,v=d3.dispatch("chartClick","elementClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState");var y=false,b=0;var x=function(t,n,i){var r=isNaN(parseInt(t,10))||!n||!Array.isArray(n)?t:n[parseInt(t,10)]||t;return i?e.utils.dateFormat(r,"%x",D.locality()):r};var w=function(t,n){return e.utils.numberFormatSI(t,2,n,D.locality())};var L=e.models.multiBar().stacked(false).clipEdge(false),S=e.models.axis().valueFormat(x).tickSize(0).tickPadding(4).highlightZero(false).showMaxMin(false),E=e.models.axis().valueFormat(w).tickPadding(4),k=e.models.legend(),T=e.models.legend().color(["#444"]),M=e.models.scroll();var A=function(e,t,n,i,r){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"};var C=function(n,i,r){var a=r[n.groupIndex].label,s=n.point.y,o=r?Math.abs(s*100/r[n.groupIndex]._height).toFixed(1):S.tickFormat()(n.point.x),l=A(a,o,s,n,D),c=n.value<0?t?"n":"e":t?"s":"w";u=e.tooltip.show(n.e,l,c,null,i)};var R=function(e,t,n){return};function D(_){_.each(function(_){var x=this,w=d3.select(this),A=t?"multibarChart":"multiBarHorizontalChart";var I=_?_.properties:{},O=_?_.data:null;var N=[],F=0,B=[],P=[].groupCount=0,U=0,Y=false,H=_.properties.xDataType==="datetime"||false,G=_.properties.yDataType==="currency"||false;D.container=this;D.update=function(){w.transition().call(D)};function j(e){if(e&&e.length&&e.filter(function(e){return e.values.length}).length){w.selectAll(".nv-noData").remove();return false}w.select(".nvd3.nv-wrap").remove();var t=i||parseInt(w.style("width"),10)||960,a=r||parseInt(w.style("height"),10)||400,s=w.selectAll(".nv-noData").data([D.strings().noData]);s.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");s.attr("x",n.left+t/2).attr("y",n.top+a/2).text(function(e){return e});return true}if(j(O)){return D}D.dataSeriesActivate=function(e){var t=e.series;t.active=!t.active||t.active==="inactive"?"active":"inactive";t.values.map(function(e){e.active=t.active});if(t.active==="active"){O.filter(function(e){return e.active!=="active"}).map(function(e){e.active="inactive";e.values.map(function(e){e.active="inactive"});return e})}if(!O.filter(function(e){return e.active==="active"}).length){O.map(function(e){e.active="";e.values.map(function(e){e.active=""});w.selectAll(".nv-series").classed("nv-inactive",false);return e})}w.call(D)};O.forEach(function(e,t){e.series=t;e.values.forEach(function(e,n){e.series=t});if(!e._values){e._values=e.values.map(function(t,n){return{series:e.series,group:n,color:typeof e.color!=="undefined"?e.color:"",x:L.x()(t,n),y:L.y()(t,n)}});e.total=d3.sum(e._values,function(e,t){return e.y})}e.disabled=e.disabled||e.total===0;e._values.forEach(function(t,n){t.active=typeof e.active!=="undefined"?e.active:""})});N=O.filter(function(e,t){return!e.disabled&&(!e.type||e.type==="bar")});F=N.length;Y=F>0;B=I.groups.map(function(e,t){e.total=0;e._height=0;N.forEach(function(n,i){n._values.filter(function(e,n){return e.group===t}).forEach(function(t,n){e.total+=t.y;e._height+=Math.abs(t.y)})});return e});U=d3.sum(B,function(e){return e.total});P=B.filter(function(e,t){return g?e._height!==0:true}).map(function(e){return e.label||D.strings().noLabel});groupCount=P.length;if(g){N.forEach(function(e,t){e.values=e._values.filter(function(e,t){return B[t]._height!==0}).map(function(e,t){return{series:e.series,group:e.group,color:e.color,x:t+1,y:e.y,active:e.active}});return e})}if(!Y){j();return D}if(!N.length){N=[{values:[]}]}m.disabled=O.map(function(e){return!!e.disabled});m.stacked=L.stacked();a=a&&I.title;var V=[{key:"Grouped",disabled:m.stacked},{key:"Stacked",disabled:!m.stacked}];h=L.xScale();p=L.yScale();S.scale(h);E.scale(p);D.render=function(){var u=i||parseInt(w.style("width"),10)||960,c=r||parseInt(w.style("height"),10)||400,h=u-n.left-n.right,p=c-n.top-n.bottom,_=_||h,g=g||p,x={top:0,right:0,bottom:0,left:0};var C=0,R=0,B=0,U=0,Y={width:0,height:0},j=0,z=0,$="";var q=L.stacked()?t?72:32:32,W=m.stacked?q:q*F+q,K=q*(m.stacked?.25:1),J=groupCount*W+K;var X=w.selectAll(".nvd3.nv-wrap").data([O]),Z=X.enter().append("g").attr("class","nvd3 nv-wrap").append("g"),Q=X.select("g").attr("class","nv-chartWrap");X.attr("class","nvd3 nv-wrap nv-"+A);Z.append("defs");Z.append("g").attr("class","nv-scroll-background");Z.append("g").attr("class","nv-titleWrap");var ee=Q.select(".nv-titleWrap");Z.append("g").attr("class","nv-y nv-axis");var te=Q.select(".nv-y.nv-axis");Z.append("g").attr("class","nv-scroll-wrap");var ne=Q.select(".nv-scroll-wrap");Z.select(".nv-scroll-wrap").append("g").attr("class","nv-x nv-axis");var ie=Q.select(".nv-x.nv-axis");Z.select(".nv-scroll-wrap").append("g").attr("class","nv-barsWrap");var re=Q.select(".nv-barsWrap");Z.append("g").attr("class","nv-controlsWrap");var ae=Q.select(".nv-controlsWrap");Z.append("g").attr("class","nv-legendWrap");var se=Q.select(".nv-legendWrap");X.attr("transform","translate("+n.left+","+n.top+")");ee.select(".nv-title").remove();if(a){ee.append("text").attr("class","nv-title").attr("x",l==="rtl"?h:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(I.title).attr("stroke","none").attr("fill","black");Y=e.utils.getTextBBox(Q.select(".nv-title"));U+=Y.height}if(s){T.id("controls_"+D.id()).strings(D.strings().controls).align("left").height(p-U);ae.datum(V).call(T);C=T.calculateWidth()}if(o){if(L.barColor()){O.forEach(function(e,t){e.color=d3.rgb("#ccc").darker(t*1.5).toString()})}k.id("legend_"+D.id()).strings(D.strings().legend).align("right").height(p-U);se.datum(O).call(k);R=k.calculateWidth()}B=h/(C+R);C=Math.floor(C*B);R=Math.floor(R*B);if(s){T.arrange(C);R=h-T.width()}if(o){k.arrange(R);C=h-k.width()}if(s){var oe=l==="rtl"?h-T.width():0,le=a?Y.height:-T.margin().top;ae.attr("transform","translate("+oe+","+le+")");j=T.height()-(a?0:T.margin().top)}if(o){var ue=e.utils.getTextBBox(se.select(".nv-legend-link")),ce=h-Y.width-6,de=a&&!s&&k.collapsed()&&ce>ue.width?true:false,oe=l==="rtl"?0:h-k.width(),le=Y.height;if(de){le=Y.height-k.height()/2-ue.height/2}else if(!a){le=-k.margin().top}se.attr("transform","translate("+oe+","+le+")");z=de?12:k.height()-(a?0:k.margin().top)}U+=Math.max(j,z);g=p-U-x.top-x.bottom;function fe(e){if(e==="width"){return t&&d?Math.max(_,J):_}else if(e==="height"){return!t&&d?Math.max(g,J):g}else{return 0}}L.vertical(t).baseDimension(q).disabled(O.map(function(e){return e.disabled})).width(fe("width")).height(fe("height"));re.data([N]).call(L);var he={top:0,right:0,bottom:0,left:0},pe={top:0,right:0,bottom:0,left:0};function me(){x.left=Math.max(pe.left,he.left);x.right=Math.max(pe.right,he.right);x.top=Math.max(pe.top,he.top);x.bottom=Math.max(pe.bottom,he.bottom)}function _e(){_=h-x.left-x.right;g=p-U-x.top-x.bottom;L.resetDimensions(fe("width"),fe("height"))}E.orient(t?"left":"bottom").margin(x).tickFormat(function(e,t){return E.valueFormat()(e,G)}).ticks(g/48);te.call(E);he=E.margin();me();_e();S.orient(t?"bottom":"left").margin(x).tickFormat(function(n,i,r){var a=S.valueFormat()(i,P,H);if(!r){a=e.utils.stringEllipsify(a,w,Math.max(t?q*2:h*.2,75))}return a});$=x.left+",";$+=x.top+(S.orient()==="bottom"?g:0);ie.attr("transform","translate("+$+")");ie.call(S);pe=S.margin();me();_e();S.tickSize(0).margin(x);ie.call(S);E.tickSize(t?-_:-g,0).margin(x);te.call(E);re.transition().call(L);x.top+=U;$=(t||S.orient()==="left"?0:_)+",";$+=t&&S.orient()==="bottom"?g+2:-2;ie.attr("transform","translate("+$+")");$=x.left+(t||E.orient()==="bottom"?0:_)+",";$+=x.top+(t||E.orient()==="left"?0:g);te.attr("transform","translate("+$+")");ne.attr("transform","translate("+x.left+","+x.top+")");if(d){y=J>(t?_:g);ie.select(".nv-axislabel").attr("x",(t?_:-g)/2);var ge=(t?_:g)-J,ve=function(){v.tooltipHide(d3.event);b=M.pan(ge);ie.select(".nv-axislabel").attr("x",(t?_-b*2:b*2-g)/2)};M.id(D.id()).enable(y).vertical(t).width(_).height(g).margin(x).minDimension(J).panHandler(ve);M(Q,Z,ne,S);M.init(b,f);M.panHandler()()}};D.render();k.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled;e.active=false;if(!O.filter(function(e){return!e.disabled}).length){O.map(function(e){e.disabled=false;return e})}if(!O.filter(function(e){return e.active==="active"}).length){O.map(function(e){e.active="";return e})}m.disabled=O.map(function(e){return!!e.disabled});v.stateChange(m);w.transition().call(D)});T.dispatch.on("legendClick",function(e,t){if(!e.disabled){return}V=V.map(function(e){e.disabled=true;return e});e.disabled=false;switch(e.key){case"Grouped":L.stacked(false);break;case"Stacked":L.stacked(true);break}m.stacked=L.stacked();v.stateChange(m);w.transition().call(D)});v.on("tooltipShow",function(e){if(c){C(e,x.parentNode,B)}});v.on("tooltipMove",function(n){if(u){e.tooltip.position(x.parentNode,u,n,t?"s":"w")}});v.on("tooltipHide",function(){if(c){e.tooltip.cleanup()}});v.on("changeState",function(e){if(typeof e.disabled!=="undefined"){O.forEach(function(t,n){t.disabled=e.disabled[n]});m.disabled=e.disabled}if(typeof e.stacked!=="undefined"){L.stacked(e.stacked);m.stacked=e.stacked}w.transition().call(D)});v.on("chartClick",function(){if(T.enabled()){T.dispatch.closeMenu()}if(k.enabled()){k.dispatch.closeMenu()}});L.dispatch.on("elementClick",function(e){v.chartClick();R(O,e,D)})});return D}L.dispatch.on("elementMouseover.tooltip",function(e){v.tooltipShow(e)});L.dispatch.on("elementMousemove.tooltip",function(e){v.tooltipMove(e)});L.dispatch.on("elementMouseout.tooltip",function(){v.tooltipHide()});D.dispatch=v;D.multibar=L;D.legend=k;D.controls=T;D.xAxis=S;D.yAxis=E;d3.rebind(D,L,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient","locality");d3.rebind(D,L,"stacked","showValues","valueFormat","labelFormat","nice");d3.rebind(D,S,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks");D.colorData=function(n){var i=arguments[0],r=arguments[1]||{};var a=function(t,n){return e.utils.defaultColor()(t,t.series)};var s=function(e,t){return"nv-group nv-series-"+e.series};switch(i){case"graduated":a=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":a=function(){return"inherit"};s=function(e,t){var n=e.series*(r.step||1)%14;n=(n>9?"":"0")+n;return"nv-group nv-series-"+e.series+" nv-fill"+n};break;case"data":a=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)};s=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")};break}var o=!r.gradient?a:function(e,n){var i={orientation:r.orientation||(t?"vertical":"horizontal"),position:r.position||"middle"};return L.gradient(e,e.series,i)};L.color(a);L.fill(o);L.classes(s);k.color(a);k.classes(s);return D};D.margin=function(e){if(!arguments.length){return n}for(var t in e){if(e.hasOwnProperty(t)){n[t]=e[t]}}return D};D.vertical=function(e){if(!arguments.length){return t}t=e;return D};D.width=function(e){if(!arguments.length){return i}i=e;return D};D.height=function(e){if(!arguments.length){return r}r=e;return D};D.showTitle=function(e){if(!arguments.length){return a}a=e;return D};D.showControls=function(e){if(!arguments.length){return s}s=e;return D};D.showLegend=function(e){if(!arguments.length){return o}o=e;return D};D.tooltip=function(e){if(!arguments.length){return u}u=e;return D};D.tooltips=function(e){if(!arguments.length){return c}c=e;return D};D.tooltipContent=function(e){if(!arguments.length){return A}A=e;return D};D.state=function(e){if(!arguments.length){return m}m=e;return D};D.strings=function(e){if(!arguments.length){return _}for(var t in e){if(e.hasOwnProperty(t)){_[t]=e[t]}}return D};D.allowScroll=function(e){if(!arguments.length){return d}d=e;return D};D.overflowHandler=function(e){if(!arguments.length){return f}f=d3.functor(e);return D};D.seriesClick=function(e){if(!arguments.length){return R}R=e;return D};D.hideEmptyGroups=function(e){
if(!arguments.length){return g}g=e;return D};D.direction=function(e){if(!arguments.length){return l}l=e;L.direction(e);S.direction(e);E.direction(e);k.direction(e);T.direction(e);return D};return D};e.models.paretoChart=function(){var t={top:10,right:10,bottom:10,left:10},n=null,i=null,r=function(e){return e.x},a=function(e){return e.y},s=e.utils.buildLocality(),o=false,l=true,u=null,c=true,d="ltr",f=function(e,t,n,i,r){return"<p><b>"+e+"</b></p>"+"<p><b>"+n+"</b></p>"+"<p><b>"+t+"%</b></p>"},h=function(e,t,n,i,r){return"<p><p>"+e+": <b>"+n+"</b></p>"},p=function(e,t,n,i,r){return"<p>"+i.key+": <b>"+n+"</b></p>"},m,_,g={barlegend:{close:"Hide bar legend",open:"Show bar legend"},linelegend:{close:"Hide line legend",open:"Show line legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available.",noLabel:"undefined"},v=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove");var y=function(t,n,i){var r=isNaN(parseInt(t,10))||!n||!Array.isArray(n)?t:n[parseInt(t,10)]||t;return i?e.utils.dateFormat(r,"yMMMM",D.locality()):r};var b=function(t,n){return e.utils.numberFormatSI(t,2,n,D.locality())};var x=e.models.multiBar().stacked(true).clipEdge(false).withLine(true).nice(false),w=e.models.line().color(function(e,t){return"#FFF"}).fill(function(e,t){return"#FFF"}).useVoronoi(false).nice(false),L=e.models.line().useVoronoi(false).color("data").nice(false),S=e.models.axis().valueFormat(y).orient("bottom").tickSize(0).tickPadding(4).wrapTicks(true).highlightZero(false).showMaxMin(false),E=e.models.axis().valueFormat(b).orient("left").tickPadding(7).showMaxMin(true),k=e.models.legend().align("left").position("middle"),T=e.models.legend().align("right").position("middle");var M=function(t,n,i){var r=t.series.key,a=(t.point.y*100/i[t.pointIndex].t).toFixed(1),s=L.y()(t.point,t.pointIndex),o=t.series.type==="bar"?f(r,a,s,t,D):h(r,a,s,t,D);u=e.tooltip.show(t.e,o,"s",null,n)};var A=function(t,n){var i=p(t.key,0,t.val,t,D);u=e.tooltip.show(t.e,i,"s",null,n)};var C=function(e,t,n,i){return};var R=function(e){var t=document.documentElement,n=e.getBoundingClientRect(),i=t.scrollLeft+document.body.scrollLeft,r=t.scrollTop+document.body.scrollTop,a=n.left+i,s=n.top+r;return{x:a,y:s}};function D(s){s.each(function(s){var f=s.properties,h=s.data,p=d3.select(this),g=this,y=(n||parseInt(p.style("width"),10)||960)-t.left-t.right,b=(i||parseInt(p.style("height"),10)||400)-t.top-t.bottom,R=y,I=b,O={top:0,right:0,bottom:0,left:0},N=0,F=0,B=0,P=Math.pow(6,2)*Math.PI,U=s.properties.xDataType==="datetime"||false,Y=s.properties.yDataType==="currency"||false;D.update=function(){p.call(D)};D.container=this;if(!h||!h.length||!h.filter(function(e){return e.values.length}).length){var H=p.selectAll(".nv-noData").data([D.strings().noData]);H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");H.attr("x",t.left+y/2).attr("y",t.top+b/2).text(function(e){return e});return D}else{p.selectAll(".nv-noData").remove()}D.dataSeriesActivate=function(e){var t=e.series;t.active=!t.active||t.active==="inactive"?"active":"inactive";t.values.map(function(e){e.active=t.active});if(t.active==="active"){h.filter(function(e){return e.active!=="active"}).map(function(e){e.active="inactive";e.values.map(function(e){e.active="inactive"});return e})}if(!h.filter(function(e){return e.active==="active"}).length){h.map(function(e){e.active="";e.values.map(function(e){e.active=""});p.selectAll(".nv-series").classed("nv-inactive",false);return e})}p.call(D)};var G=h.filter(function(e){return!e.disabled&&(!e.type||e.type==="bar")});var j=h.filter(function(e){return!e.disabled&&e.type==="line"}).map(function(e){if(!x.stacked()){e.values=e.valuesOrig.map(function(e,t){return{series:e.series,x:e.x+e.series*.25-t*.25,y:e.y}})}else{e.values.map(function(e){e.y=0});G.map(function(t,n){t.values.map(function(t,n){e.values[n].y+=t.y})});e.values.map(function(t,n){if(n>0){t.y+=e.values[n-1].y}})}return e});var V=f.groupData,z=V.map(function(e){return[].concat(e.l)[0]||D.strings().noLabel}),$=f.quota||0,q=f.quotaLabel||"",W=f.targetQuota||0,K=f.targetQuotaLabel||"";G=G.length?G:[{values:[]}];j=j.length?j:[{values:[]}];var J=h.filter(function(e){return e.type==="line"});J.push({key:q,type:"dash",color:"#444",series:J.length,values:{series:J.length,x:0,y:0}});if(W>0){J.push({key:K,type:"dash",color:"#777",series:J.length,values:{series:J.length+1,x:0,y:0}})}var X=h.filter(function(e){return!e.disabled}).map(function(e){return e.valuesOrig.map(function(e,t){return r(e,t)})});var Z=h.map(function(e){return e.valuesOrig.map(function(e,t){return a(e,t)})});m=x.xScale();_=x.yScale();S.tickFormat(function(t,n,i){var r=S.valueFormat()(n,z,U);if(!i){r=e.utils.stringEllipsify(r,p,Math.max(y*.2,75))}return r}).scale(m);E.tickFormat(function(e,t){return E.valueFormat()(e,Y)}).scale(_);var Q=p.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([h]),ee=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),te=Q.select("g").attr("class","nv-chartWrap");ee.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("width",y+t.left+t.right).attr("height",b+t.top+t.bottom).attr("fill","#FFF");ee.append("g").attr("class","nv-titleWrap");var ne=te.select(".nv-titleWrap");ee.append("g").attr("class","nv-x nv-axis");var ie=te.select(".nv-x.nv-axis");ee.append("g").attr("class","nv-y nv-axis");var re=te.select(".nv-y.nv-axis");ee.append("g").attr("class","nv-barsWrap");var ae=te.select(".nv-barsWrap");ee.append("g").attr("class","nv-quotaWrap");var se=te.select(".nv-quotaWrap");ee.append("g").attr("class","nv-linesWrap1");var oe=te.select(".nv-linesWrap1");ee.append("g").attr("class","nv-linesWrap2");var le=te.select(".nv-linesWrap2");ee.append("g").attr("class","nv-legendWrap nv-barLegend");var ue=te.select(".nv-legendWrap.nv-barLegend");ee.append("g").attr("class","nv-legendWrap nv-lineLegend");var ce=te.select(".nv-legendWrap.nv-lineLegend");Q.attr("transform","translate("+t.left+","+t.top+")");if(o&&f.title){ne.select(".nv-title").remove();ne.append("text").text(f.title).attr("class","nv-title").attr("x",d==="rtl"?y:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").attr("stroke","none").attr("fill","black");O.top+=parseInt(te.select(".nv-title").node().getBoundingClientRect().height/1.15,10)+parseInt(te.select(".nv-title").style("margin-top"),10)+parseInt(te.select(".nv-title").style("margin-bottom"),10)}if(l){k.id("barlegend_"+D.id()).strings(D.strings().barlegend).align("left").height(b-O.top);ue.datum(h.filter(function(e){return e.type==="bar"})).call(k);N=k.calculateWidth();T.id("linelegend_"+D.id()).strings(D.strings().linelegend).align("right").height(b-O.top);ce.datum(J).call(T);F=T.calculateWidth();B=y/(N+F);k.arrange(Math.floor(B*N));T.arrange(Math.floor(B*F));ue.attr("transform","translate("+(d==="rtl"?y-k.width():0)+","+O.top+")");ce.attr("transform","translate("+(d==="rtl"?0:y-T.width())+","+O.top+")")}O.top+=Math.max(k.height(),T.height())+4;I=b-O.top-O.bottom;var de=m.domain(d3.merge(X)).rangeBands([0,y-t.left-t.right],.3),fe=Math.max(d3.max(d3.merge(Z)),$,W||0),he=Math.ceil(fe*.1)*10,pe=de(1)+de.rangeBand()/(x.stacked()||j.length===1?2:4);x.width(R).height(I).forceY([0,he]).id(D.id());ae.datum(G).call(x);w.margin({top:0,right:pe,bottom:0,left:pe}).width(R).height(I).forceY([0,he]).useVoronoi(false).id("outline_"+D.id());L.margin({top:0,right:pe,bottom:0,left:pe}).width(R).height(I).forceY([0,he]).useVoronoi(false).size(P).sizeRange([P,P]).sizeDomain([P,P]).id("foreground_"+D.id());oe.datum(j).call(w);le.datum(j).call(L);ie.call(S);var me=S.margin();re.style("opacity",G.length?1:0).call(E);var _e=E.margin();se.selectAll("line").remove();re.selectAll("text.nv-quotaValue").remove();re.selectAll("text.nv-targetQuotaValue").remove();var ge=0,ve=14;if(W>0){se.append("line").attr("class","nv-quotaLineTarget").attr("x1",0).attr("y1",0).attr("x2",R).attr("y2",0).attr("transform","translate(0,"+_(W)+")").style("stroke-dasharray","8, 8");se.append("line").datum({key:K,val:W}).attr("class","nv-quotaLineTarget nv-quotaLineBackground").attr("x1",0).attr("y1",0).attr("x2",R).attr("y2",0).attr("transform","translate(0,"+_(W)+")");re.append("text").text(E.valueFormat()(W,true)).attr("class","nv-targetQuotaValue").attr("dy",".36em").attr("dx","0").attr("text-anchor",d==="rtl"?"start":"end").attr("transform","translate("+(0-E.tickPadding())+","+_(W)+")");ge=Math.round(te.select("text.nv-targetQuotaValue").node().getBoundingClientRect().width+E.tickPadding())}if($>0){se.append("line").attr("class","nv-quotaLine").attr("x1",0).attr("y1",0).attr("x2",R).attr("y2",0).attr("transform","translate(0,"+_($)+")").style("stroke-dasharray","8, 8");se.append("line").datum({key:q,val:$}).attr("class","nv-quotaLine nv-quotaLineBackground").attr("x1",0).attr("y1",0).attr("x2",R).attr("y2",0).attr("transform","translate(0,"+_($)+")");re.append("text").text(E.valueFormat()($,true)).attr("class","nv-quotaValue").attr("dy",".36em").attr("dx","0").attr("text-anchor",d==="rtl"?"start":"end").attr("transform","translate("+-E.tickPadding()+","+_($)+")");ge=Math.max(ge,Math.round(te.select("text.nv-quotaValue").node().getBoundingClientRect().width+E.tickPadding()))}R=y-O.left-Math.max(ge,_e.left)-O.right-_e.right;I=b-O.top-_e.top-O.bottom-_e.bottom;x.width(R).height(I);ae.call(x);ie.call(S);re.call(E);me=S.margin();_e=E.margin();O.left+=Math.max(ge,me.left,_e.left);O.right+=Math.max(me.right,_e.right);O.top+=Math.max(me.top,_e.top);O.bottom+=Math.max(me.bottom,_e.bottom);R=y-O.left-O.right;I=b-O.top-O.bottom;x.width(R).height(I);ae.attr("transform","translate("+O.left+","+O.top+")").call(x);w.width(R).height(I);L.width(R).height(I);oe.attr("transform","translate("+O.left+","+O.top+")").call(w);le.attr("transform","translate("+O.left+","+O.top+")").call(L);se.attr("transform","translate("+O.left+","+O.top+")").selectAll("line").attr("x2",R);ie.attr("transform","translate("+O.left+","+(S.orient()==="bottom"?I+O.top:O.top)+")").call(S);E.ticks(Math.ceil(I/48)).tickSize(-R,0);re.attr("transform","translate("+(E.orient()==="left"?O.left:O.left+R)+","+O.top+")").call(E);if(W>0){se.select("line.nv-quotaLineTarget").attr("x2",R).attr("transform","translate(0,"+_(W)+")");re.select("text.nv-targetQuotaValue").attr("transform","translate("+(0-E.tickPadding())+","+_(W)+")");ve=Math.round(parseInt(te.select("text.nv-targetQuotaValue").node().getBoundingClientRect().height,10)/1.15);re.selectAll("g.tick, g.nv-axisMaxMin").each(function(e,t){if(Math.abs(_(e)-_(W))<=ve){d3.select(this).style("opacity",0)}})}if($>0){se.select("line.nv-quotaLine").attr("x2",R).attr("transform","translate(0,"+_($)+")");re.select("text.nv-quotaValue").attr("transform","translate("+(0-E.tickPadding())+","+_($)+")");ve=Math.round(parseInt(te.select("text.nv-quotaValue").node().getBoundingClientRect().height,10)/1.15);re.selectAll("g.tick, g.nv-axisMaxMin").each(function(e,t){if(Math.abs(_(e)-_($))<=ve){d3.select(this).style("opacity",0)}});if(W>0){if(Math.abs(_($)-_(W))<=ve){re.select(".nv-targetQuotaValue").style("opacity",0)}}}se.selectAll("line.nv-quotaLineBackground").on("mouseover",function(e){if(c){var t={val:e.val,key:e.key,e:d3.event};A(t,g.parentNode)}}).on("mouseout",function(){v.tooltipHide()}).on("mousemove",function(){v.tooltipMove(d3.event)});k.dispatch.on("legendClick",function(e,t){var n=e.series;e.disabled=!e.disabled;if(!D.stacked()){h.filter(function(e){return e.series===n&&e.type==="line"}).map(function(e){e.disabled=!e.disabled;return e})}if(!h.filter(function(e){return!e.disabled&&e.type==="bar"}).length){h.map(function(e){e.disabled=false;te.selectAll(".nv-series").classed("disabled",false);return e})}p.call(D)});v.on("tooltipShow",function(e){if(c){M(e,g.parentNode,V)}});v.on("tooltipMove",function(t){if(u){e.tooltip.position(g.parentNode,u,t,"s")}});v.on("tooltipHide",function(){if(c){e.tooltip.cleanup()}});v.on("chartClick",function(){if(k.enabled()){k.dispatch.closeMenu()}if(T.enabled()){T.dispatch.closeMenu()}});x.dispatch.on("elementClick",function(e){v.chartClick();C(h,e,D,p)})});return D}L.dispatch.on("elementMouseover.tooltip",function(e){v.tooltipShow(e)});L.dispatch.on("elementMousemove",function(e){v.tooltipMove(e)});L.dispatch.on("elementMouseout.tooltip",function(){v.tooltipHide()});x.dispatch.on("elementMouseover.tooltip",function(e){v.tooltipShow(e)});x.dispatch.on("elementMousemove",function(e){v.tooltipMove(e)});x.dispatch.on("elementMouseout.tooltip",function(){v.tooltipHide()});D.dispatch=v;D.lines1=w;D.lines2=L;D.multibar=x;D.barLegend=k;D.lineLegend=T;D.xAxis=S;D.yAxis=E;d3.rebind(D,x,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","color","fill","classes","gradient");d3.rebind(D,x,"stacked","showValues","valueFormat","nice");d3.rebind(D,S,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks");D.colorData=function(t){var n=arguments[0],i=arguments[1]||{};var r=function(t,n){return e.utils.defaultColor()(t,t.series)};var a=function(e,t){return"nv-group nv-series-"+e.series};var s=function(e,t){var n=i.lineColor?i.lineColor:{c1:"#1A8221",c2:"#62B464",l:1};return e.color||d3.interpolateHsl(d3.rgb(n.c1),d3.rgb(n.c2))(e.series/2)};var o=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":r=function(e,t){return d3.interpolateHsl(d3.rgb(i.barColor.c1),d3.rgb(i.barColor.c2))(e.series/i.barColor.l)};break;case"class":r=function(){return"inherit"};a=function(e,t){var n=e.series*(i.step||1)%14;n=(n>9?"":"0")+n;return"nv-group nv-series-"+e.series+" nv-fill"+n};o=function(e,t){var n=e.series*(i.step||1)%14;n=(n>9?"":"0")+n;return"nv-group nv-series-"+e.series+" nv-fill"+n+" nv-stroke"+n};break;case"data":r=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)};a=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")};o=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")};break}var l=!i.gradient?r:function(e,t){var n={orientation:i.orientation||"vertical",position:i.position||"middle"};return x.gradient(e,e.series,n)};x.color(r);x.fill(l);x.classes(a);L.color(s);L.fill(s);L.classes(o);k.color(r);k.classes(a);T.color(s);T.classes(o);return D};D.x=function(e){if(!arguments.length){return r}r=e;lines.x(e);x.x(e);return D};D.y=function(e){if(!arguments.length){return a}a=e;lines.y(e);x.y(e);return D};D.margin=function(e){if(!arguments.length){return t}for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return D};D.width=function(e){if(!arguments.length){return n}n=e;return D};D.height=function(e){if(!arguments.length){return i}i=e;return D};D.showTitle=function(e){if(!arguments.length){return o}o=e;return D};D.showLegend=function(e){if(!arguments.length){return l}l=e;return D};D.showControls=function(e){if(!arguments.length){return false}return D};D.tooltipBar=function(e){if(!arguments.length){return f}f=e;return D};D.tooltipLine=function(e){if(!arguments.length){return h}h=e;return D};D.tooltipQuota=function(e){if(!arguments.length){return p}p=e;return D};D.tooltip=function(e){if(!arguments.length){return u}u=e;return D};D.tooltips=function(e){if(!arguments.length){return c}c=e;return D};D.tooltipContent=function(e){if(!arguments.length){return tooltipContent}tooltipContent=e;return D};D.barClick=function(e){if(!arguments.length){return C}C=e;return D};D.colorFill=function(e){return D};D.strings=function(e){if(!arguments.length){return g}for(var t in e){if(e.hasOwnProperty(t)){g[t]=e[t]}}return D};D.direction=function(e){if(!arguments.length){return d}d=e;x.direction(e);E.direction(e);k.direction(e);T.direction(e);return D};D.locality=function(t){if(!arguments.length){return s}s=e.utils.buildLocality(t);x.locality(t);w.locality(t);return D};return D};e.models.pie=function(){var t={top:0,right:0,bottom:0,left:0},n=500,i=500,r=Math.floor(Math.random()*1e4),a=function(e){return e},s=function(e){return e.key},o=function(e){return e.value},l=e.utils.buildLocality(),u=function(e){return e.description},c=function(e){return e.data?o(e.data):e},d=function(e){return e.data?s(e.data):e},f=true,h=true,p=true,m=true,_=.01,g=false,v=false,y=function(e,t){var n=e.selectAll(".nv-hole-container").data(t),i=n.enter().append("g").attr("class","nv-hole-container");i.append("text").text(t).attr("class","nv-pie-hole-value").attr("dy",".35em").attr("text-anchor","middle").style("font-size","50px");n.exit().remove()},b=false,x=20,w=5,L=360,S=0,E=function(t){return t.startAngle*L/360+e.utils.angleToRadians(S)},k=function(t){return t.endAngle*L/360+e.utils.angleToRadians(S)},T=.447,M=75,A=250,C=function(e){return null},R=0,D="ltr",I=function(t,n){return e.utils.defaultColor()(t,t.series)},O=I,N=false,F=function(e,t){return"nv-slice nv-series-"+e.series},B=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function P(a){a.each(function(a){var l=n-t.left-t.right,u=i-t.top-t.bottom,L=d3.select(this);var S=d3.layout.pie().sort(null).value(function(e){return e.disabled?0:o(e)});var R=[],U=f&&p?true:false;if(U){R=e.utils.stringSetLengths(a.map(s),L,d,"nv-label")}var Y=L.selectAll(".nv-wrap.nv-pie").data([a]);var H=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+r);var G=H.append("defs");var j=H.append("g");var V=Y.select("g");P.gradient=function(t,n){var i={x:0,y:0,r:ce,s:g?T*100+"%":"0%",u:"userSpaceOnUse"};return e.utils.colorRadialGradient(t,r+"-"+n,i,I(t,n),Y.select("defs"))};j.append("g").attr("class","nv-pie");var z=V.select(".nv-pie");j.append("g").attr("class","nv-holeWrap");var $=V.select(".nv-holeWrap");Y.attr("transform","translate("+t.left+","+t.top+")");z.attr("transform","translate("+l/2+","+u/2+")");if(N){var q=e.utils.createTexture(G,r,-l/2,-u/2)}L.on("click",function(e,t){B.chartClick({data:e,index:t,pos:d3.event,id:r})});var W=Y.select(".nv-pie").selectAll(".nv-slice").data(S);W.exit().remove();var K=W.enter().append("g").style("stroke","#ffffff").style("stroke-width",2).style("stroke-opacity",0).on("mouseover",function(e,t){d3.select(this).classed("hover",true);var n=he(d3.event,e,t);B.elementMouseover(n)}).on("mousemove",function(e,t){B.elementMousemove(d3.event)}).on("mouseout",function(e,t){d3.select(this).classed("hover",false);B.elementMouseout()}).on("click",function(e,t){d3.event.stopPropagation();var n=he(d3.event,e,t);B.elementClick(n)}).on("dblclick",function(e,t){d3.event.stopPropagation();var n=he(d3.event,e,t);B.elementDblClick(n)});K.append("path").attr("class","nv-base").each(function(e,t){this._current=e});if(N){K.append("path").attr("class","nv-texture").each(function(e,t){this._current=e}).style("mask","url("+q+")")}K.append("g").attr("transform","translate(0,0)").attr("class","nv-label");K.select(".nv-label").append("rect").style("fill-opacity",0).style("stroke-opacity",0);K.select(".nv-label").append("text").style("fill-opacity",0);K.append("polyline").attr("class","nv-label-leader").style("stroke-opacity",0);var J=l/2,X=u/2,Z=[],Q=[],ee=0,te=U?5:0,ne=0,ie=x+w;W.select(".nv-base").call(pe,J,X);$.call(y,v?[v]:[]);if(v){var re=$.node().getBoundingClientRect().height*.3,ae=Math.abs(X*d3.min(Q)),se=Math.round(re-ae);if(se>0){te+=se;ee-=se/2}}var oe=l/2,le=u/2;if(U){x=Math.max(Math.min(Math.min(me())/12,20),10)}if(C(P)){M=C(P);A=C(P)}var ue=Math.min(Math.max(me(),M),A),ce=ue-(U?x:0);le+=((d3.max(Q)-d3.min(Q))/2+d3.min(Q))*((ue+ee)/le);oe+=((d3.max(Z)-d3.min(Z))/2-d3.max(Z))*(ue/oe);le+=ee/2;z.attr("transform","translate("+oe+","+le+")");$.attr("transform","translate("+oe+","+le+")");z.select(q).attr("x",-ce/2).attr("y",-ce/2);var de=d3.svg.arc().innerRadius(g?ce*T:0).outerRadius(ce).startAngle(E).endAngle(k);var fe=d3.svg.arc().innerRadius(0).outerRadius(ce).startAngle(E).endAngle(k);if(p){if(!g||m){fe.innerRadius(ue).outerRadius(ue)}else{fe.outerRadius(ce*T)}}W.attr("class",function(e){return F(e.data,e.data.series)}).attr("fill",function(e){return O(e.data,e.data.series)}).classed("nv-active",function(e){return e.data.active==="active"}).classed("nv-inactive",function(e){return e.data.active==="inactive"});W.select(".nv-base").attr("d",de).style("stroke-opacity",function(e){return E(e)===k(e)?0:1});if(N){W.select(".nv-texture").attr("d",de).style("stroke-opacity",function(e){return E(e)===k(e)?0:1}).style("fill",function(t,n){var i=d3.select(this.parentNode).style("fill");return e.utils.getTextContrast(i,n)})}if(f){W.select(".nv-label").attr("transform",function(e){if(b){e.outerRadius=ce+10;e.innerRadius=ce+15;var t=(E(e)+k(e))/2*(180/Math.PI);t+=90*ge(e,fe);return"translate("+fe.centroid(e)+") rotate("+t+")"}else{var n=fe.centroid(e),i=h?(x+w)*ge(e,fe):0;return"translate("+[n[0]+i,n[1]]+")"}});W.select(".nv-label text").text(function(e){return d(e)}).attr("dy",".35em").style("fill","#555").style("fill-opacity",_e).style("text-anchor",function(e){if(!p){return"middle"}var t=ge(e,fe)===1?"start":"end";if(D==="rtl"){t=t==="start"?"end":"start"}return t});W.each(function(t,n){if(R[n]>M||ue===M){var i=(E(t)+k(t))/2,r=Math.abs(Math.sin(i)),a=ue*r+x+w+R[n],s=l/2-oe+l/2-a;if(s<0){var o=e.utils.stringEllipsify(d(t),L,R[n]+s);d3.select(this).select("text").text(o)}}});if(!p){W.select(".nv-label").each(function(e){if(!_e(e)){return}var t=d3.select(this),n=t.select("text").node().getBoundingClientRect();t.select("rect").attr("rx",3).attr("ry",3).attr("width",n.width+10).attr("height",n.height+10).attr("transform",function(){return"translate("+[n.x-5,n.y-5]+")"}).style("fill","#fff").style("fill-opacity",_e)})}else if(h){W.select(".nv-label-leader").attr("points",function(e){if(!_e(e)){return"0,0 0,0"}var t=d3.svg.arc().innerRadius(ce).outerRadius(ce).startAngle(E).endAngle(k);var n=h?x*ge(e,t):0,i=t.centroid(e),r=fe.centroid(e),a=[r[0]+n,r[1]];return i+" "+r+" "+a}).style("stroke","#aaa").style("fill","none").style("stroke-opacity",_e)}}else{W.select(".nv-label-leader").style("stroke-opacity",0);W.select(".nv-label rect").style("fill-opacity",0);W.select(".nv-label text").style("fill-opacity",0)}function he(e,t,n){return{label:d(t),value:c(t),point:t.data,pointIndex:n,id:r,e:e}}function pe(e,t,n){var i=[],r=[],a=Math.PI,s=2*Math.PI,o=0,c=Math.PI/2,d=Math.PI,f=3*Math.PI/2,h=0;function p(e){return(e+h)%s}e.each(function(e,a){var l=(E(e)+s)%s,u=(k(e)+s)%s;var m=Math.round(Math.sin(l)*1e4)/1e4,_=Math.round(Math.sin(u)*1e4)/1e4,v=Math.round(Math.cos(l)*1e4)/1e4,y=Math.round(Math.cos(u)*1e4)/1e4;h=u<l?s-l:0;if(u===l){l=0;u=s}else{l=p(l);u=p(u)}o=p(o);c=p(c);d=p(d);f=p(f);if(l%s===0||u%s===0){r.push(n);if(g){r.push(n*T)}}if(l<=c&&u>=c){i.push(t);if(g){i.push(t*T)}}if(l<=d&&u>=d){r.push(-n);if(g){r.push(-n*T)}}if(l<=f&&u>=f){i.push(-t);if(g){i.push(-t*T)}}i.push(t*m);i.push(t*_);if(g){i.push(t*T*m);i.push(t*T*_)}else{i.push(0)}r.push(n*v);r.push(n*y);if(g){r.push(n*T*v);r.push(n*T*y)}else{r.push(0)}});Z=d3.extent(i);Q=d3.extent(r);J*=l/(d3.max(Z)-d3.min(Z));X*=u/(d3.max(Q)-d3.min(Q))}function me(){var e=[J],t=[X+x];W.select(".nv-base").each(function(n,i){if(!_e(n)){return}var r=(E(n)+k(n))/2,a=d3.round(Math.sin(r),5),s=d3.round(Math.cos(r),5),o=J-ie-R[i],l=X-te,u=a?o/a:o,c=s?l/s:l;e.push(u);t.push(c)});var n=d3.min(e.concat(t).concat([]),function(e){return Math.abs(e)});return n}function _e(e){var t=(k(e)-E(e))/(2*Math.PI);return t>_?1:0}function ge(e,t){var n=Math.PI*2,i=((E(e)+k(e))/2+n)%n;return i>0&&i<Math.PI?1:-1}function ve(e){if(!g){e.innerRadius=0}var t=d3.interpolate(this._current,e);this._current=t(0);return function(e){var n=t(e);return de(n)}}function ye(e){e.innerRadius=0;var t=d3.interpolate({startAngle:0,endAngle:0},e);return function(e){return de(t(e))}}});return P}P.dispatch=B;P.color=function(e){if(!arguments.length){return I}I=e;return P};P.fill=function(e){if(!arguments.length){return O}O=e;return P};P.classes=function(e){if(!arguments.length){return F}F=e;return P};P.gradient=function(e){if(!arguments.length){return gradient}gradient=e;return P};P.margin=function(e){if(!arguments.length){return t}t.top=typeof e.top!="undefined"?e.top:t.top;t.right=typeof e.right!="undefined"?e.right:t.right;t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom;t.left=typeof e.left!="undefined"?e.left:t.left;return P};P.width=function(e){if(!arguments.length){return n}n=e;return P};P.height=function(e){if(!arguments.length){return i}i=e;return P};P.values=function(e){if(!arguments.length){return a}a=e;return P};P.x=function(e){if(!arguments.length){return s}s=e;return P};P.y=function(e){if(!arguments.length){return o}o=d3.functor(e);return P};P.description=function(e){if(!arguments.length){return u}u=e;return P};P.showLabels=function(e){if(!arguments.length){return f}f=e;return P};P.labelSunbeamLayout=function(e){if(!arguments.length){return b}b=e;return P};P.donutLabelsOutside=function(e){if(!arguments.length){return m}m=e;return P};P.pieLabelsOutside=function(e){if(!arguments.length){return p}p=e;return P};P.showLeaders=function(e){if(!arguments.length){return h}h=e;return P};P.donut=function(e){if(!arguments.length){return g}g=e;return P};P.hole=function(e){if(!arguments.length){return v}v=e;return P};P.holeFormat=function(e){if(!arguments.length){return y}y=d3.functor(e);return P};P.donutRatio=function(e){if(!arguments.length){return T}T=e;return P};P.startAngle=function(e){if(!arguments.length){return E}E=e;return P};P.endAngle=function(e){if(!arguments.length){return k}k=e;return P};P.id=function(e){if(!arguments.length){return r}r=e;return P};P.valueFormat=function(e){if(!arguments.length){return c}c=e;return P};P.labelFormat=function(e){if(!arguments.length){return d}d=e;return P};P.labelThreshold=function(e){if(!arguments.length){return _}_=e;return P};P.direction=function(e){if(!arguments.length){return D}D=e;return P};P.arcDegrees=function(e){if(!arguments.length){return L}L=Math.max(Math.min(e,360),1);return P};P.rotateDegrees=function(e){if(!arguments.length){return S}S=e%360;return P};P.minRadius=function(e){if(!arguments.length){return M}M=e;return P};P.maxRadius=function(e){if(!arguments.length){return A}A=e;return P};P.fixedRadius=function(e){if(!arguments.length){return C}C=d3.functor(e);return P};P.textureFill=function(e){if(!arguments.length)return N;N=e;return P};P.locality=function(t){if(!arguments.length){return l}l=e.utils.buildLocality(t);return P};return P};e.models.pieChart=function(){var t={top:10,right:10,bottom:10,left:10},n=null,i=null,r=false,a=true,s="ltr",o=null,l=0,u=true,c=function(e,t,n,i,r){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},d={},f={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available.",noLabel:"undefined"},h=d3.dispatch("chartClick","elementClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState");var p=e.models.pie(),m=e.models.legend().align("center");var _=function(t,n,i){var r=t.point.key,a=i.total?(p.y()(t.point)*100/i.total).toFixed(1):100,s=p.y()(t.point),l=c(r,a,s,t,v);o=e.tooltip.show(t.e,l,null,null,n)};var g=function(e,t,n){return};function v(c){c.each(function(c){var f=c.properties||{},y=c.data,b=d3.select(this),x=this,w=(n||parseInt(b.style("width"),10)||960)-t.left-t.right,L=(i||parseInt(b.style("height"),10)||400)-t.top-t.bottom,S=d3.sum(y.map(function(e){return e.value})),E=w,k=L,T={top:0,right:0,bottom:0,left:0};v.update=function(){b.transition().duration(l).call(v)};v.dataSeriesActivate=function(e){var t=e.point;t.active=!t.active||t.active==="inactive"?"active":"inactive";if(t.active==="active"){y.filter(function(e){return e.active!=="active"}).map(function(e){e.active="inactive";return e})}if(!y.filter(function(e){return e.active==="active"}).length){y.map(function(e){e.active="";return e})}b.call(v)};v.container=this;if(!y||!y.length){G();return v}var M=y.map(function(e,t){e.series=t;if(!e.value&&!e.values){e.value=0;e.disabled=true}else{e.value=e.value||d3.sum(e.values,function(e){return e.y||e});e.disabled=e.disabled||e.value===0}return e});var A=d3.sum(M.filter(function(e,t){return!e.disabled}).map(function(e,t){return e.value}));f.total=A;d.disabled=M.map(function(e){return!!e.disabled});if(!A){G();return v}else{b.selectAll(".nv-noData").remove()}var C=b.selectAll("g.nv-wrap.nv-pieChart").data([M]),R=C.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),D=C.select("g").attr("class","nv-chartWrap");R.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF");D.select(".nv-background").attr("width",w+t.left+t.right).attr("height",L+t.top+t.bottom);R.append("g").attr("class","nv-titleWrap");var I=D.select(".nv-titleWrap");R.append("g").attr("class","nv-pieWrap");var O=D.select(".nv-pieWrap");R.append("g").attr("class","nv-legendWrap");var N=D.select(".nv-legendWrap");C.attr("transform","translate("+t.left+","+t.top+")");var F={width:0,height:0};I.select(".nv-title").remove();if(r&&f.title){I.append("text").attr("class","nv-title").attr("x",s==="rtl"?w:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(f.title).attr("stroke","none").attr("fill","black");F=e.utils.getTextBBox(D.select(".nv-title"));T.top+=F.height+12}if(a){m.id("legend_"+v.id()).strings(v.strings().legend).align("center").height(L-T.top);N.datum(M).call(m);m.arrange(w);var B=e.utils.getTextBBox(N.select(".nv-legend-link")),P=w-F.width-6,U=r&&m.collapsed()&&P>B.width?true:false,Y=s==="rtl"||!m.collapsed()?0:w-m.width(),H=F.height;if(U){H=F.height-m.height()/2-B.height/2}else if(!r){H=-m.margin().top}N.attr("transform","translate("+Y+","+H+")");T.top+=U?0:m.height()-12}k=L-T.top-T.bottom;E=w-T.left-T.right;p.width(E).height(k);O.datum(M.filter(function(e){return!e.disabled})).attr("transform","translate("+T.left+","+T.top+")").transition().duration(l).call(p);function G(){b.select(".nvd3.nv-wrap").remove();var e=b.selectAll(".nv-noData").data([v.strings().noData]);e.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");e.attr("x",t.left+w/2).attr("y",t.top+L/2).text(function(e){return e})}m.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled;e.active=false;if(!y.filter(function(e){return!e.disabled}).length){y.map(function(e){e.disabled=false;return e})}if(!y.filter(function(e){return e.active==="active"}).length){y.map(function(e){e.active="";return e})}d.disabled=y.map(function(e){return!!e.disabled});h.stateChange(d);b.transition().duration(l).call(v)});h.on("tooltipShow",function(e){if(u){_(e,x.parentNode,f)}});h.on("tooltipMove",function(t){if(o){e.tooltip.position(x.parentNode,o,t)}});h.on("tooltipHide",function(){if(u){e.tooltip.cleanup()}});h.on("changeState",function(e){if(typeof e.disabled!=="undefined"){M.forEach(function(t,n){t.disabled=e.disabled[n]});d.disabled=e.disabled}b.transition().duration(l).call(v)});h.on("chartClick",function(){if(m.enabled()){m.dispatch.closeMenu()}});p.dispatch.on("elementClick",function(e){h.chartClick();g(y,e,v)})});return v}p.dispatch.on("elementMouseover.tooltip",function(e){h.tooltipShow(e)});p.dispatch.on("elementMousemove.tooltip",function(e){h.tooltipMove(e)});p.dispatch.on("elementMouseout.tooltip",function(){h.tooltipHide()});v.dispatch=h;v.pie=p;v.legend=m;d3.rebind(v,p,"id","x","y","color","fill","classes","gradient","locality");d3.rebind(v,p,"valueFormat","labelFormat","values","description","showLabels","showLeaders","donutLabelsOutside","pieLabelsOutside","labelThreshold");d3.rebind(v,p,"arcDegrees","rotateDegrees","minRadius","maxRadius","fixedRadius","startAngle","endAngle","donut","hole","holeFormat","donutRatio");v.colorData=function(t){var n=arguments[0],i=arguments[1]||{};var r=function(t,n){return e.utils.defaultColor()(t,t.series)};var a=function(e,t){return"nv-slice nv-series-"+e.series};switch(n){case"graduated":r=function(e,t){return d3.interpolateHsl(d3.rgb(i.c1),d3.rgb(i.c2))(e.series/i.l)};break;case"class":r=function(){return"inherit"};a=function(e,t){var n=e.series*(i.step||1)%14;n=(n>9?"":"0")+n;return"nv-slice nv-series-"+e.series+" nv-fill"+n;

};break;case"data":r=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)};a=function(e,t){return"nv-slice nv-series-"+e.series+(e.classes?" "+e.classes:"")};break}var s=!i.gradient?r:function(e,t){return p.gradient(e,e.series)};p.color(r);p.fill(s);p.classes(a);m.color(r);m.classes(a);return v};v.margin=function(e){if(!arguments.length){return t}for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return v};v.width=function(e){if(!arguments.length){return n}n=e;return v};v.height=function(e){if(!arguments.length){return i}i=e;return v};v.showTitle=function(e){if(!arguments.length){return r}r=e;return v};v.showLegend=function(e){if(!arguments.length){return a}a=e;return v};v.tooltip=function(e){if(!arguments.length){return o}o=e;return v};v.tooltips=function(e){if(!arguments.length){return u}u=e;return v};v.tooltipContent=function(e){if(!arguments.length){return c}c=e;return v};v.state=function(e){if(!arguments.length){return d}d=e;return v};v.colorFill=function(e){return v};v.strings=function(e){if(!arguments.length){return f}for(var t in e){if(e.hasOwnProperty(t)){f[t]=e[t]}}return v};v.seriesClick=function(e){if(!arguments.length){return g}g=e;return v};v.direction=function(e){if(!arguments.length){return s}s=e;p.direction(e);m.direction(e);return v};return v}})()},function(e,t){(function(){(function(e){var t=Date.now||function(){return+new Date};var n=60;var i=1e3;var r={};var a=1;if(!e.core){e.core={effect:{}}}else if(!core.effect){core.effect={}}core.effect.Animate={requestAnimationFrame:function(){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame;var n=!!t;if(t&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(t.toString())){n=false}if(n){return function(e,n){t(e,n)}}var i=60;var r={};var a=0;var s=1;var o=null;var l=+new Date;return function(e,t){var n=s++;r[n]=e;a++;if(o===null){o=setInterval(function(){var e=+new Date;var t=r;r={};a=0;for(var n in t){if(t.hasOwnProperty(n)){t[n](e);l=e}}if(e-l>2500){clearInterval(o);o=null}},1e3/i)}return n}}(),stop:function(e){var t=r[e]!=null;if(t){r[e]=null}return t},isRunning:function(e){return r[e]!=null},start:function(e,s,o,l,u,c){var d=t();var f=d;var h=0;var p=0;var m=a++;if(!c){c=document.body}if(m%20===0){var _={};for(var g in r){_[g]=true}r=_}var v=function(a){var _=a!==true;var g=t();if(!r[m]||s&&!s(m)){r[m]=null;o&&o(n-p/((g-d)/i),m,false);return}if(_){var y=Math.round((g-f)/(i/n))-1;for(var b=0;b<Math.min(y,4);b++){v(true);p++}}if(l){h=(g-d)/l;if(h>1){h=1}}var x=u?u(h):h;if((e(x,g,_)===false||h===1)&&_){r[m]=null;o&&o(n-p/((g-d)/i),m,h===1||l==null)}else if(_){f=g;core.effect.Animate.requestAnimationFrame(v,c)}};r[m]=true;core.effect.Animate.requestAnimationFrame(v,c);return m}}})(this)}).call(window)},function(e,t){(function(e){var t=function(e){var t=this;var n=t.options=_.extend({},t.defaults,e);var i=n.template||function(){return""};var r=n.templateTarget;n.template=void 0;t.$target=this;var a=n.height;r.find(".pull-to-refresh").length||r.append(i(n));t.$holder=r.find(".pull-to-refresh");t.$msg=t.$holder.find(".message-container");t.$msg.css({height:a});t.$spinner=t.$holder.find(".spinner");t.$spinner_wrapper=t.$holder.find(".icon-wrap");n.scroller.activatePullToRefresh(a,function(){t.$spinner_wrapper.addClass("color")},function(){t.$spinner_wrapper.removeClass("color")},function(){t.$spinner.addClass("rotate360");if(!t.isLoading){t.isLoading=true;if(n.callback){n.callback()}}})};t.prototype={defaults:{height:50,animationDelay:300,callback:function(){}},hide:function(){var e=this;e.isLoading=false;if(!e.options)return;e.options.scroller.finishPullToRefresh();e.$spinner.removeClass("rotate360");e.$spinner_wrapper.removeClass("color")},destroy:function(){var e=this;if(!e.options){return}e.options.scroller.finishPullToRefresh();e.$holder.remove();e.options.callback=null;e.options=null;e.$div=null;e.$holder=null;e.$msg=null;e.$spinner=null;e.$spinner_wrapper=null;e.$target=null;e.isLoading=false}};e.fn.pullToRefresh=function(e){if(typeof e==="object"||!e){this._ptr=new t(e)}else if(this._ptr&&this._ptr[e]){this._ptr[e].apply(this._ptr,Array.prototype.slice.call(arguments,1));if(e==="destroy"){this._ptr=null}}}})(Zepto)},function(e,t){(function(e){e.__swipeHelper={init:function(){var t={},n=5;e.__swipeHelper.swipeOrientation="";var i=function(e,t,n,i){var r=Math.abs(e-t),a=Math.abs(n-i);return r>=a?"horizontal":"vertical"};e(document.body).on("touchstart",function(e){t.x1=e.touches[0].pageX;t.y1=e.touches[0].pageY}).on("touchmove",function(r){t.x2=r.touches[0].pageX;t.y2=r.touches[0].pageY;if(e.__swipeHelper.swipeOrientation===""&&(t.x2&&Math.abs(t.x1-t.x2)>n||t.y2&&Math.abs(t.y1-t.y2)>n)){e.__swipeHelper.swipeOrientation=i(t.x1,t.x2,t.y1,t.y2)}if(e.__swipeHelper.swipeOrientation==="horizontal"){r.preventDefault()}}).on("touchend",function(n){e.__swipeHelper.swipeOrientation="";t={}})}}})(Zepto)},function(e,t,n){(function(){"use strict";var e=function(n,i){if(!(this instanceof e))return new e(n,i);var r={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:false,autoplayDisableOnInteraction:true,freeMode:false,freeModeMomentum:true,freeModeMomentumRatio:1,freeModeMomentumBounce:true,freeModeMomentumBounceRatio:1,freeModeSticky:false,setWrapperSize:false,virtualTranslate:false,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:true},cube:{slideShadows:true,shadow:true,shadowOffset:20,shadowScale:.94},fade:{crossFade:false},parallax:false,scrollbar:null,scrollbarHide:true,keyboardControl:false,mousewheelControl:false,mousewheelForceToAxis:false,hashnav:false,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:false,touchRatio:1,touchAngle:45,simulateTouch:true,shortSwipes:true,longSwipes:true,longSwipesRatio:.5,longSwipesMs:300,followFinger:true,onlyExternal:false,threshold:0,touchMoveStopPropagation:true,pagination:null,paginationClickable:false,paginationHide:false,paginationBulletRender:null,resistance:true,resistanceRatio:.85,nextButton:null,prevButton:null,watchSlidesProgress:false,watchSlidesVisibility:false,grabCursor:false,preventClicks:true,preventClicksPropagation:true,slideToClickedSlide:false,lazyLoading:false,lazyLoadingInPrevNext:false,lazyLoadingOnTransitionStart:false,preloadImages:true,updateOnImagesReady:true,loop:false,loopAdditionalSlides:0,loopedSlides:null,control:undefined,controlInverse:false,allowSwipeToPrev:true,allowSwipeToNext:true,swipeHandler:null,noSwiping:true,noSwipingClass:"swiper-no-swiping",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationHiddenClass:"swiper-pagination-hidden",observer:false,observeParents:false,a11y:false,prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",runCallbacksOnInit:true};var a=i&&i.virtualTranslate;i=i||{};for(var s in r){if(typeof i[s]==="undefined"){i[s]=r[s]}else if(typeof i[s]==="object"){for(var o in r[s]){if(typeof i[s][o]==="undefined"){i[s][o]=r[s][o]}}}}var l=this;l.version="3.0.7";l.params=i;l.classNames=[];var u;if(typeof t==="undefined"){u=window.Dom7||window.Zepto||window.jQuery}else{u=t}if(!u)return;l.$=u;l.container=u(n);if(l.container.length===0)return;if(l.container.length>1){l.container.each(function(){new e(this,i)});return}l.container[0].swiper=l;l.container.data("swiper",l);l.classNames.push("swiper-container-"+l.params.direction);if(l.params.freeMode){l.classNames.push("swiper-container-free-mode")}if(!l.support.flexbox){l.classNames.push("swiper-container-no-flexbox");l.params.slidesPerColumn=1}if(l.params.parallax||l.params.watchSlidesVisibility){l.params.watchSlidesProgress=true}if(["cube","coverflow"].indexOf(l.params.effect)>=0){if(l.support.transforms3d){l.params.watchSlidesProgress=true;l.classNames.push("swiper-container-3d")}else{l.params.effect="slide"}}if(l.params.effect!=="slide"){l.classNames.push("swiper-container-"+l.params.effect)}if(l.params.effect==="cube"){l.params.resistanceRatio=0;l.params.slidesPerView=1;l.params.slidesPerColumn=1;l.params.slidesPerGroup=1;l.params.centeredSlides=false;l.params.spaceBetween=0;l.params.virtualTranslate=true;l.params.setWrapperSize=false}if(l.params.effect==="fade"){l.params.slidesPerView=1;l.params.slidesPerColumn=1;l.params.slidesPerGroup=1;l.params.watchSlidesProgress=true;l.params.spaceBetween=0;if(typeof a==="undefined"){l.params.virtualTranslate=true}}if(l.params.grabCursor&&l.support.touch){l.params.grabCursor=false}l.wrapper=l.container.children("."+l.params.wrapperClass);if(l.params.pagination){l.paginationContainer=u(l.params.pagination);if(l.params.paginationClickable){l.paginationContainer.addClass("swiper-pagination-clickable")}}function c(){return l.params.direction==="horizontal"}l.rtl=c()&&(l.container[0].dir.toLowerCase()==="rtl"||l.container.css("direction")==="rtl");if(l.rtl){l.classNames.push("swiper-container-rtl")}if(l.rtl){l.wrongRTL=l.wrapper.css("display")==="-webkit-box"}if(l.params.slidesPerColumn>1){l.classNames.push("swiper-container-multirow")}if(l.device.android){l.classNames.push("swiper-container-android")}l.container.addClass(l.classNames.join(" "));l.translate=0;l.progress=0;l.velocity=0;l.lockSwipeToNext=function(){l.params.allowSwipeToNext=false};l.lockSwipeToPrev=function(){l.params.allowSwipeToPrev=false};l.lockSwipes=function(){l.params.allowSwipeToNext=l.params.allowSwipeToPrev=false};l.unlockSwipeToNext=function(){l.params.allowSwipeToNext=true};l.unlockSwipeToPrev=function(){l.params.allowSwipeToPrev=true};l.unlockSwipes=function(){l.params.allowSwipeToNext=l.params.allowSwipeToPrev=true};if(l.params.grabCursor){l.container[0].style.cursor="move";l.container[0].style.cursor="-webkit-grab";l.container[0].style.cursor="-moz-grab";l.container[0].style.cursor="grab"}l.imagesToLoad=[];l.imagesLoaded=0;l.loadImage=function(e,t,n,i){var r;function a(){if(i)i()}if(!e.complete||!n){if(t){r=new window.Image;r.onload=a;r.onerror=a;r.src=t}else{a()}}else{a()}};l.preloadImages=function(){l.imagesToLoad=l.container.find("img");function e(){if(typeof l==="undefined"||l===null)return;if(l.imagesLoaded!==undefined)l.imagesLoaded++;if(l.imagesLoaded===l.imagesToLoad.length){if(l.params.updateOnImagesReady)l.update();l.emit("onImagesReady",l)}}for(var t=0;t<l.imagesToLoad.length;t++){l.loadImage(l.imagesToLoad[t],l.imagesToLoad[t].currentSrc||l.imagesToLoad[t].getAttribute("src"),true,e)}};l.autoplayTimeoutId=undefined;l.autoplaying=false;l.autoplayPaused=false;function d(){l.autoplayTimeoutId=setTimeout(function(){if(l.params.loop){l.fixLoop();l._slideNext()}else{if(!l.isEnd){l._slideNext()}else{if(!i.autoplayStopOnLast){l._slideTo(0)}else{l.stopAutoplay()}}}},l.params.autoplay)}l.startAutoplay=function(){if(typeof l.autoplayTimeoutId!=="undefined")return false;if(!l.params.autoplay)return false;if(l.autoplaying)return false;l.autoplaying=true;l.emit("onAutoplayStart",l);d()};l.stopAutoplay=function(e){if(!l.autoplayTimeoutId)return;if(l.autoplayTimeoutId)clearTimeout(l.autoplayTimeoutId);l.autoplaying=false;l.autoplayTimeoutId=undefined;l.emit("onAutoplayStop",l)};l.pauseAutoplay=function(e){if(l.autoplayPaused)return;if(l.autoplayTimeoutId)clearTimeout(l.autoplayTimeoutId);l.autoplayPaused=true;if(e===0){l.autoplayPaused=false;d()}else{l.wrapper.transitionEnd(function(){if(!l)return;l.autoplayPaused=false;if(!l.autoplaying){l.stopAutoplay()}else{d()}})}};l.minTranslate=function(){return-l.snapGrid[0]};l.maxTranslate=function(){return-l.snapGrid[l.snapGrid.length-1]};l.updateContainerSize=function(){var e,t;if(typeof l.params.width!=="undefined"){e=l.params.width}else{e=l.container[0].clientWidth}if(typeof l.params.height!=="undefined"){t=l.params.height}else{t=l.container[0].clientHeight}if(e===0&&c()||t===0&&!c()){return}l.width=e;l.height=t;l.size=c()?l.width:l.height};l.updateSlidesSize=function(){l.slides=l.wrapper.children("."+l.params.slideClass);l.snapGrid=[];l.slidesGrid=[];l.slidesSizesGrid=[];var e=l.params.spaceBetween,t=0,n,i=0,r=0;if(typeof e==="string"&&e.indexOf("%")>=0){e=parseFloat(e.replace("%",""))/100*l.size}l.virtualSize=-e;if(l.rtl)l.slides.css({marginLeft:"",marginTop:""});else l.slides.css({marginRight:"",marginBottom:""});var a;if(l.params.slidesPerColumn>1){if(Math.floor(l.slides.length/l.params.slidesPerColumn)===l.slides.length/l.params.slidesPerColumn){a=l.slides.length}else{a=Math.ceil(l.slides.length/l.params.slidesPerColumn)*l.params.slidesPerColumn}}var s;for(n=0;n<l.slides.length;n++){s=0;var o=l.slides.eq(n);if(l.params.slidesPerColumn>1){var u;var d,f;var h=l.params.slidesPerColumn;var p;if(l.params.slidesPerColumnFill==="column"){d=Math.floor(n/h);f=n-d*h;u=d+f*a/h;o.css({"-webkit-box-ordinal-group":u,"-moz-box-ordinal-group":u,"-ms-flex-order":u,"-webkit-order":u,order:u})}else{p=a/h;f=Math.floor(n/p);d=n-f*p}o.css({"margin-top":f!==0&&l.params.spaceBetween&&l.params.spaceBetween+"px"}).attr("data-swiper-column",d).attr("data-swiper-row",f)}if(o.css("display")==="none")continue;if(l.params.slidesPerView==="auto"){s=c()?o.outerWidth(true):o.outerHeight(true)}else{s=(l.size-(l.params.slidesPerView-1)*e)/l.params.slidesPerView;if(c()){l.slides[n].style.width=s+"px"}else{l.slides[n].style.height=s+"px"}}l.slides[n].swiperSlideSize=s;l.slidesSizesGrid.push(s);if(l.params.centeredSlides){t=t+s/2+i/2+e;if(n===0)t=t-l.size/2-e;if(Math.abs(t)<1/1e3)t=0;if(r%l.params.slidesPerGroup===0)l.snapGrid.push(t);l.slidesGrid.push(t)}else{if(r%l.params.slidesPerGroup===0)l.snapGrid.push(t);l.slidesGrid.push(t);t=t+s+e}l.virtualSize+=s+e;i=s;r++}l.virtualSize=Math.max(l.virtualSize,l.size);var m;if(l.rtl&&l.wrongRTL&&(l.params.effect==="slide"||l.params.effect==="coverflow")){l.wrapper.css({width:l.virtualSize+l.params.spaceBetween+"px"})}if(!l.support.flexbox||l.params.setWrapperSize){if(c())l.wrapper.css({width:l.virtualSize+l.params.spaceBetween+"px"});else l.wrapper.css({height:l.virtualSize+l.params.spaceBetween+"px"})}if(l.params.slidesPerColumn>1){l.virtualSize=(s+l.params.spaceBetween)*a;l.virtualSize=Math.ceil(l.virtualSize/l.params.slidesPerColumn)-l.params.spaceBetween;l.wrapper.css({width:l.virtualSize+l.params.spaceBetween+"px"});if(l.params.centeredSlides){m=[];for(n=0;n<l.snapGrid.length;n++){if(l.snapGrid[n]<l.virtualSize+l.snapGrid[0])m.push(l.snapGrid[n])}l.snapGrid=m}}if(!l.params.centeredSlides){m=[];for(n=0;n<l.snapGrid.length;n++){if(l.snapGrid[n]<=l.virtualSize-l.size){m.push(l.snapGrid[n])}}l.snapGrid=m;if(Math.floor(l.virtualSize-l.size)>Math.floor(l.snapGrid[l.snapGrid.length-1])){l.snapGrid.push(l.virtualSize-l.size)}}if(l.snapGrid.length===0)l.snapGrid=[0];if(l.params.spaceBetween!==0){if(c()){if(l.rtl)l.slides.css({marginLeft:e+"px"});else l.slides.css({marginRight:e+"px"})}else l.slides.css({marginBottom:e+"px"})}if(l.params.watchSlidesProgress){l.updateSlidesOffset()}};l.updateSlidesOffset=function(){for(var e=0;e<l.slides.length;e++){l.slides[e].swiperSlideOffset=c()?l.slides[e].offsetLeft:l.slides[e].offsetTop}};l.updateSlidesProgress=function(e){if(typeof e==="undefined"){e=l.translate||0}if(l.slides.length===0)return;if(typeof l.slides[0].swiperSlideOffset==="undefined")l.updateSlidesOffset();var t=l.params.centeredSlides?-e+l.size/2:-e;if(l.rtl)t=l.params.centeredSlides?e-l.size/2:e;var n=l.container[0].getBoundingClientRect();var i=c()?"left":"top";var r=c()?"right":"bottom";l.slides.removeClass(l.params.slideVisibleClass);for(var a=0;a<l.slides.length;a++){var s=l.slides[a];var o=l.params.centeredSlides===true?s.swiperSlideSize/2:0;var u=(t-s.swiperSlideOffset-o)/(s.swiperSlideSize+l.params.spaceBetween);if(l.params.watchSlidesVisibility){var d=-(t-s.swiperSlideOffset-o);var f=d+l.slidesSizesGrid[a];var h=d>=0&&d<l.size||f>0&&f<=l.size||d<=0&&f>=l.size;if(h){l.slides.eq(a).addClass(l.params.slideVisibleClass)}}s.progress=l.rtl?-u:u}};l.updateProgress=function(e){if(typeof e==="undefined"){e=l.translate||0}var t=l.maxTranslate()-l.minTranslate();if(t===0){l.progress=0;l.isBeginning=l.isEnd=true}else{l.progress=(e-l.minTranslate())/t;l.isBeginning=l.progress<=0;l.isEnd=l.progress>=1}if(l.isBeginning)l.emit("onReachBeginning",l);if(l.isEnd)l.emit("onReachEnd",l);if(l.params.watchSlidesProgress)l.updateSlidesProgress(e);l.emit("onProgress",l,l.progress)};l.updateActiveIndex=function(){var e=l.rtl?l.translate:-l.translate;var t,n,i;for(n=0;n<l.slidesGrid.length;n++){if(typeof l.slidesGrid[n+1]!=="undefined"){if(e>=l.slidesGrid[n]&&e<l.slidesGrid[n+1]-(l.slidesGrid[n+1]-l.slidesGrid[n])/2){t=n}else if(e>=l.slidesGrid[n]&&e<l.slidesGrid[n+1]){t=n+1}}else{if(e>=l.slidesGrid[n]){t=n}}}if(t<0||typeof t==="undefined")t=0;i=Math.floor(t/l.params.slidesPerGroup);if(i>=l.snapGrid.length)i=l.snapGrid.length-1;if(t===l.activeIndex){return}l.snapIndex=i;l.previousIndex=l.activeIndex;l.activeIndex=t;l.updateClasses()};l.updateClasses=function(){l.slides.removeClass(l.params.slideActiveClass+" "+l.params.slideNextClass+" "+l.params.slidePrevClass);var e=l.slides.eq(l.activeIndex);e.addClass(l.params.slideActiveClass);e.next("."+l.params.slideClass).addClass(l.params.slideNextClass);e.prev("."+l.params.slideClass).addClass(l.params.slidePrevClass);if(l.bullets&&l.bullets.length>0){l.bullets.removeClass(l.params.bulletActiveClass);var t;if(l.params.loop){t=Math.ceil(l.activeIndex-l.loopedSlides)/l.params.slidesPerGroup;if(t>l.slides.length-1-l.loopedSlides*2){t=t-(l.slides.length-l.loopedSlides*2)}if(t>l.bullets.length-1)t=t-l.bullets.length}else{if(typeof l.snapIndex!=="undefined"){t=l.snapIndex}else{t=l.activeIndex||0}}if(l.paginationContainer.length>1){l.bullets.each(function(){if(u(this).index()===t)u(this).addClass(l.params.bulletActiveClass)})}else{l.bullets.eq(t).addClass(l.params.bulletActiveClass)}}if(!l.params.loop){if(l.params.prevButton){if(l.isBeginning){u(l.params.prevButton).addClass(l.params.buttonDisabledClass);if(l.params.a11y&&l.a11y)l.a11y.disable(u(l.params.prevButton))}else{u(l.params.prevButton).removeClass(l.params.buttonDisabledClass);if(l.params.a11y&&l.a11y)l.a11y.enable(u(l.params.prevButton))}}if(l.params.nextButton){if(l.isEnd){u(l.params.nextButton).addClass(l.params.buttonDisabledClass);if(l.params.a11y&&l.a11y)l.a11y.disable(u(l.params.nextButton))}else{u(l.params.nextButton).removeClass(l.params.buttonDisabledClass);if(l.params.a11y&&l.a11y)l.a11y.enable(u(l.params.nextButton))}}}};l.updatePagination=function(){if(!l.params.pagination)return;if(l.paginationContainer&&l.paginationContainer.length>0){var e="";var t=l.params.loop?Math.ceil((l.slides.length-l.loopedSlides*2)/l.params.slidesPerGroup):l.snapGrid.length;for(var n=0;n<t;n++){if(l.params.paginationBulletRender){e+=l.params.paginationBulletRender(n,l.params.bulletClass)}else{e+='<span class="'+l.params.bulletClass+'"></span>'}}l.paginationContainer.html(e);l.bullets=l.paginationContainer.find("."+l.params.bulletClass.split(" ").join("."))}};l.update=function(e){l.updateContainerSize();l.updateSlidesSize();l.updateProgress();l.updatePagination();l.updateClasses();if(l.params.scrollbar&&l.scrollbar){l.scrollbar.set()}function t(){i=Math.min(Math.max(l.translate,l.maxTranslate()),l.minTranslate());l.setWrapperTranslate(i);l.updateActiveIndex();l.updateClasses()}if(e){var n,i;if(l.params.freeMode){t()}else{if(l.params.slidesPerView==="auto"&&l.isEnd&&!l.params.centeredSlides){n=l.slideTo(l.slides.length-1,0,false,true)}else{n=l.slideTo(l.activeIndex,0,false,true)}if(!n){t()}}}};l.onResize=function(e){l.updateContainerSize();l.updateSlidesSize();l.updateProgress();if(l.params.slidesPerView==="auto"||l.params.freeMode||e)l.updatePagination();if(l.params.scrollbar&&l.scrollbar){l.scrollbar.set()}if(l.params.freeMode){var t=Math.min(Math.max(l.translate,l.maxTranslate()),l.minTranslate());l.setWrapperTranslate(t);l.updateActiveIndex();l.updateClasses()}else{l.updateClasses();if(l.params.slidesPerView==="auto"&&l.isEnd&&!l.params.centeredSlides){l.slideTo(l.slides.length-1,0,false,true)}else{l.slideTo(l.activeIndex,0,false,true)}}};var f=["mousedown","mousemove","mouseup"];if(window.navigator.pointerEnabled)f=["pointerdown","pointermove","pointerup"];else if(window.navigator.msPointerEnabled)f=["MSPointerDown","MSPointerMove","MSPointerUp"];l.touchEvents={start:l.support.touch||!l.params.simulateTouch?"touchstart":f[0],move:l.support.touch||!l.params.simulateTouch?"touchmove":f[1],end:l.support.touch||!l.params.simulateTouch?"touchend":f[2]};if(window.navigator.pointerEnabled||window.navigator.msPointerEnabled){(l.params.touchEventsTarget==="container"?l.container:l.wrapper).addClass("swiper-wp8-"+l.params.direction)}l.initEvents=function(e){var t=e?"off":"on";var n=e?"removeEventListener":"addEventListener";var r=l.params.touchEventsTarget==="container"?l.container[0]:l.wrapper[0];var a=l.support.touch?r:document;var s=l.params.nested?true:false;if(l.browser.ie){r[n](l.touchEvents.start,l.onTouchStart,false);a[n](l.touchEvents.move,l.onTouchMove,s);a[n](l.touchEvents.end,l.onTouchEnd,false)}else{if(l.support.touch){r[n](l.touchEvents.start,l.onTouchStart,false);r[n](l.touchEvents.move,l.onTouchMove,s);r[n](l.touchEvents.end,l.onTouchEnd,false)}if(i.simulateTouch&&!l.device.ios&&!l.device.android){r[n]("mousedown",l.onTouchStart,false);document[n]("mousemove",l.onTouchMove,s);document[n]("mouseup",l.onTouchEnd,false)}}window[n]("resize",l.onResize);if(l.params.nextButton){u(l.params.nextButton)[t]("click",l.onClickNext);if(l.params.a11y&&l.a11y)u(l.params.nextButton)[t]("keydown",l.a11y.onEnterKey)}if(l.params.prevButton){u(l.params.prevButton)[t]("click",l.onClickPrev);if(l.params.a11y&&l.a11y)u(l.params.prevButton)[t]("keydown",l.a11y.onEnterKey)}if(l.params.pagination&&l.params.paginationClickable){u(l.paginationContainer)[t]("click","."+l.params.bulletClass,l.onClickIndex)}if(l.params.preventClicks||l.params.preventClicksPropagation)r[n]("click",l.preventClicks,true)};l.attachEvents=function(e){l.initEvents()};l.detachEvents=function(){l.initEvents(true)};l.allowClick=true;l.preventClicks=function(e){if(!l.allowClick){if(l.params.preventClicks)e.preventDefault();if(l.params.preventClicksPropagation){e.stopPropagation();e.stopImmediatePropagation()}}};l.onClickNext=function(e){e.preventDefault();l.params.onClickNext?l.params.onClickNext():l.slideNext()};l.onClickPrev=function(e){e.preventDefault();l.params.onClickPrev?l.params.onClickPrev():l.slidePrev()};l.onClickIndex=function(e){e.preventDefault();var t=u(this).index()*l.params.slidesPerGroup;if(l.params.loop)t=t+l.loopedSlides;l.slideTo(t)};function h(e,t){var n=u(e.target);if(!n.is(t)){if(typeof t==="string"){n=n.parents(t)}else if(t.nodeType){var i;n.parents().each(function(e,n){if(n===t)i=t});if(!i)return undefined;else return t}}if(n.length===0){return undefined}return n[0]}l.updateClickedSlide=function(e){var t=h(e,"."+l.params.slideClass);var n=false;if(t){for(var i=0;i<l.slides.length;i++){if(l.slides[i]===t)n=true}}if(t&&n){l.clickedSlide=t;l.clickedIndex=u(t).index()}else{l.clickedSlide=undefined;l.clickedIndex=undefined;return}if(l.params.slideToClickedSlide&&l.clickedIndex!==undefined&&l.clickedIndex!==l.activeIndex){var r=l.clickedIndex,a;if(l.params.loop){a=u(l.clickedSlide).attr("data-swiper-slide-index");if(r>l.slides.length-l.params.slidesPerView){l.fixLoop();r=l.wrapper.children("."+l.params.slideClass+'[data-swiper-slide-index="'+a+'"]').eq(0).index();setTimeout(function(){l.slideTo(r)},0)}else if(r<l.params.slidesPerView-1){l.fixLoop();var s=l.wrapper.children("."+l.params.slideClass+'[data-swiper-slide-index="'+a+'"]');r=s.eq(s.length-1).index();setTimeout(function(){l.slideTo(r)},0)}else{l.slideTo(r)}}else{l.slideTo(r)}}};var p,m,_,g,v,y,b,x="input, select, textarea, button",w=Date.now(),L,S=[],E;l.animating=false;l.touches={startX:0,startY:0,currentX:0,currentY:0,diff:0};var k,T;l.onTouchStart=function(e){if(e.originalEvent)e=e.originalEvent;k=e.type==="touchstart";if(!k&&"which"in e&&e.which===3)return;if(l.params.noSwiping&&h(e,"."+l.params.noSwipingClass)){l.allowClick=true;return}if(l.params.swipeHandler){if(!h(e,l.params.swipeHandler))return}p=true;m=false;g=undefined;T=undefined;l.touches.startX=l.touches.currentX=e.type==="touchstart"?e.targetTouches[0].pageX:e.pageX;l.touches.startY=l.touches.currentY=e.type==="touchstart"?e.targetTouches[0].pageY:e.pageY;_=Date.now();l.allowClick=true;l.updateContainerSize();l.swipeDirection=undefined;if(l.params.threshold>0)b=false;if(e.type!=="touchstart"){var t=true;if(u(e.target).is(x))t=false;if(document.activeElement&&u(document.activeElement).is(x)){document.activeElement.blur()}if(t){e.preventDefault()}}l.emit("onTouchStart",l,e)};l.onTouchMove=function(e){if(e.originalEvent)e=e.originalEvent;if(k&&e.type==="mousemove")return;if(e.preventedByNestedSwiper)return;if(l.params.onlyExternal){m=true;l.allowClick=false;return}if(k&&document.activeElement){if(e.target===document.activeElement&&u(e.target).is(x)){m=true;l.allowClick=false;return}}l.emit("onTouchMove",l,e);if(e.targetTouches&&e.targetTouches.length>1)return;l.touches.currentX=e.type==="touchmove"?e.targetTouches[0].pageX:e.pageX;l.touches.currentY=e.type==="touchmove"?e.targetTouches[0].pageY:e.pageY;if(typeof g==="undefined"){var t=Math.atan2(Math.abs(l.touches.currentY-l.touches.startY),Math.abs(l.touches.currentX-l.touches.startX))*180/Math.PI;g=c()?t>l.params.touchAngle:90-t>l.params.touchAngle}if(g){l.emit("onTouchMoveOpposite",l,e)}if(typeof T==="undefined"&&l.browser.ieTouch){if(l.touches.currentX!==l.touches.startX||l.touches.currentY!==l.touches.startY){T=true}}if(!p)return;if(g){p=false;return}if(!T&&l.browser.ieTouch){return}l.allowClick=false;l.emit("onSliderMove",l,e);e.preventDefault();if(l.params.touchMoveStopPropagation&&!l.params.nested){e.stopPropagation()}if(!m){if(i.loop){l.fixLoop()}y=l.getWrapperTranslate();l.setWrapperTransition(0);if(l.animating){l.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd")}if(l.params.autoplay&&l.autoplaying){if(l.params.autoplayDisableOnInteraction){l.stopAutoplay()}else{l.pauseAutoplay()}}E=false;if(l.params.grabCursor){l.container[0].style.cursor="move";l.container[0].style.cursor="-webkit-grabbing";l.container[0].style.cursor="-moz-grabbin";l.container[0].style.cursor="grabbing"}}m=true;var n=l.touches.diff=c()?l.touches.currentX-l.touches.startX:l.touches.currentY-l.touches.startY;n=n*l.params.touchRatio;if(l.rtl)n=-n;l.swipeDirection=n>0?"prev":"next";v=n+y;var r=true;if(n>0&&v>l.minTranslate()){r=false;if(l.params.resistance)v=l.minTranslate()-1+Math.pow(-l.minTranslate()+y+n,l.params.resistanceRatio)}else if(n<0&&v<l.maxTranslate()){r=false;if(l.params.resistance)v=l.maxTranslate()+1-Math.pow(l.maxTranslate()-y-n,l.params.resistanceRatio)}if(r){e.preventedByNestedSwiper=true}if(!l.params.allowSwipeToNext&&l.swipeDirection==="next"&&v<y){v=y}if(!l.params.allowSwipeToPrev&&l.swipeDirection==="prev"&&v>y){v=y}if(!l.params.followFinger)return;if(l.params.threshold>0){if(Math.abs(n)>l.params.threshold||b){if(!b){b=true;l.touches.startX=l.touches.currentX;l.touches.startY=l.touches.currentY;v=y;l.touches.diff=c()?l.touches.currentX-l.touches.startX:l.touches.currentY-l.touches.startY;return}}else{v=y;return}}if(l.params.freeMode||l.params.watchSlidesProgress){l.updateActiveIndex()}if(l.params.freeMode){if(S.length===0){S.push({position:l.touches[c()?"startX":"startY"],time:_})}S.push({position:l.touches[c()?"currentX":"currentY"],time:(new window.Date).getTime()})}l.updateProgress(v);l.setWrapperTranslate(v)};l.onTouchEnd=function(e){if(e.originalEvent)e=e.originalEvent;l.emit("onTouchEnd",l,e);if(!p)return;if(l.params.grabCursor&&m&&p){l.container[0].style.cursor="move";l.container[0].style.cursor="-webkit-grab";l.container[0].style.cursor="-moz-grab";l.container[0].style.cursor="grab"}var t=Date.now();var n=t-_;if(l.allowClick){l.updateClickedSlide(e);l.emit("onTap",l,e);if(n<300&&t-w>300){if(L)clearTimeout(L);L=setTimeout(function(){if(!l)return;if(l.params.paginationHide&&l.paginationContainer.length>0&&!u(e.target).hasClass(l.params.bulletClass)){l.paginationContainer.toggleClass(l.params.paginationHiddenClass)}l.emit("onClick",l,e)},300)}if(n<300&&t-w<300){if(L)clearTimeout(L);l.emit("onDoubleTap",l,e)}}w=Date.now();setTimeout(function(){if(l&&l.allowClick)l.allowClick=true},0);if(!p||!m||!l.swipeDirection||l.touches.diff===0||v===y){p=m=false;return}p=m=false;var i;if(l.params.followFinger){i=l.rtl?l.translate:-l.translate}else{i=-v}if(l.params.freeMode){if(i<-l.minTranslate()){l.slideTo(l.activeIndex);return}else if(i>-l.maxTranslate()){if(l.slides.length<l.snapGrid.length){l.slideTo(l.snapGrid.length-1)}else{l.slideTo(l.slides.length-1)}return}if(l.params.freeModeMomentum){if(S.length>1){var r=S.pop(),a=S.pop();var s=r.position-a.position;var o=r.time-a.time;l.velocity=s/o;l.velocity=l.velocity/2;if(Math.abs(l.velocity)<.02){l.velocity=0}if(o>150||(new window.Date).getTime()-r.time>300){l.velocity=0}}else{l.velocity=0}S.length=0;var c=1e3*l.params.freeModeMomentumRatio;var d=l.velocity*c;var f=l.translate+d;if(l.rtl)f=-f;var h=false;var g;var b=Math.abs(l.velocity)*20*l.params.freeModeMomentumBounceRatio;if(f<l.maxTranslate()){if(l.params.freeModeMomentumBounce){if(f+l.maxTranslate()<-b){f=l.maxTranslate()-b}g=l.maxTranslate();h=true;E=true}else{f=l.maxTranslate()}}else if(f>l.minTranslate()){if(l.params.freeModeMomentumBounce){if(f-l.minTranslate()>b){f=l.minTranslate()+b}g=l.minTranslate();h=true;E=true}else{f=l.minTranslate()}}else if(l.params.freeModeSticky){var x=0,k;for(x=0;x<l.snapGrid.length;x+=1){if(l.snapGrid[x]>-f){k=x;break}}if(Math.abs(l.snapGrid[k]-f)<Math.abs(l.snapGrid[k-1]-f)||l.swipeDirection==="next"){f=l.snapGrid[k]}else{f=l.snapGrid[k-1]}if(!l.rtl)f=-f}if(l.velocity!==0){if(l.rtl){c=Math.abs((-f-l.translate)/l.velocity)}else{c=Math.abs((f-l.translate)/l.velocity)}}else if(l.params.freeModeSticky){l.slideReset();return}if(l.params.freeModeMomentumBounce&&h){l.updateProgress(g);l.setWrapperTransition(c);l.setWrapperTranslate(f);l.onTransitionStart();l.animating=true;l.wrapper.transitionEnd(function(){if(!l||!E)return;l.emit("onMomentumBounce",l);l.setWrapperTransition(l.params.speed);l.setWrapperTranslate(g);l.wrapper.transitionEnd(function(){if(!l)return;l.onTransitionEnd()})})}else if(l.velocity){l.updateProgress(f);l.setWrapperTransition(c);l.setWrapperTranslate(f);l.onTransitionStart();if(!l.animating){l.animating=true;l.wrapper.transitionEnd(function(){if(!l)return;l.onTransitionEnd()})}}else{l.updateProgress(f)}l.updateActiveIndex()}if(!l.params.freeModeMomentum||n>=l.params.longSwipesMs){l.updateProgress();l.updateActiveIndex()}return}var T,M=0,A=l.slidesSizesGrid[0];for(T=0;T<l.slidesGrid.length;T+=l.params.slidesPerGroup){if(typeof l.slidesGrid[T+l.params.slidesPerGroup]!=="undefined"){if(i>=l.slidesGrid[T]&&i<l.slidesGrid[T+l.params.slidesPerGroup]){M=T;A=l.slidesGrid[T+l.params.slidesPerGroup]-l.slidesGrid[T]}}else{if(i>=l.slidesGrid[T]){M=T;A=l.slidesGrid[l.slidesGrid.length-1]-l.slidesGrid[l.slidesGrid.length-2]}}}var C=(i-l.slidesGrid[M])/A;var R=function(e){l.params.onSlide?l.params.onSlide(e):l.slideTo(e)};if(n>l.params.longSwipesMs){if(!l.params.longSwipes){R(l.activeIndex);return}if(l.swipeDirection==="next"){if(C>=l.params.longSwipesRatio)R(M+l.params.slidesPerGroup);else R(M)}if(l.swipeDirection==="prev"){if(C>1-l.params.longSwipesRatio)R(M+l.params.slidesPerGroup);else R(M)}}else{if(!l.params.shortSwipes){R(l.activeIndex);return}if(l.swipeDirection==="next"){R(M+l.params.slidesPerGroup)}if(l.swipeDirection==="prev"){R(M)}}};l._slideTo=function(e,t){
return l.slideTo(e,t,true,true)};l.slideTo=function(e,t,n,i){if(typeof n==="undefined")n=true;if(typeof e==="undefined")e=0;if(e<0)e=0;l.snapIndex=Math.floor(e/l.params.slidesPerGroup);if(l.snapIndex>=l.snapGrid.length)l.snapIndex=l.snapGrid.length-1;var r=-l.snapGrid[l.snapIndex];if(!l.params.allowSwipeToNext&&r<l.translate){return false}if(!l.params.allowSwipeToPrev&&r>l.translate){return false}if(l.params.autoplay&&l.autoplaying){if(i||!l.params.autoplayDisableOnInteraction){l.pauseAutoplay(t)}else{l.stopAutoplay()}}l.updateProgress(r);for(var a=0;a<l.slidesGrid.length;a++){if(-r>=l.slidesGrid[a]){e=a}}if(typeof t==="undefined")t=l.params.speed;l.previousIndex=l.activeIndex||0;l.activeIndex=e;if(r===l.translate){l.updateClasses();return false}l.updateClasses();l.onTransitionStart(n);var s=c()?r:0,o=c()?0:r;if(t===0){l.setWrapperTransition(0);l.setWrapperTranslate(r);l.onTransitionEnd(n)}else{l.setWrapperTransition(t);l.setWrapperTranslate(r);if(!l.animating){l.animating=true;l.wrapper.transitionEnd(function(){if(!l)return;l.onTransitionEnd(n)})}}return true};l.onTransitionStart=function(e){if(typeof e==="undefined")e=true;if(l.lazy)l.lazy.onTransitionStart();if(e){l.emit("onTransitionStart",l);if(l.activeIndex!==l.previousIndex){l.emit("onSlideChangeStart",l)}}};l.onTransitionEnd=function(e){l.animating=false;l.setWrapperTransition(0);if(typeof e==="undefined")e=true;if(l.lazy)l.lazy.onTransitionEnd();if(e){l.emit("onTransitionEnd",l);if(l.activeIndex!==l.previousIndex){l.emit("onSlideChangeEnd",l)}}if(l.params.hashnav&&l.hashnav){l.hashnav.setHash()}};l.slideNext=function(e,t,n){if(l.params.loop){if(l.animating)return false;l.fixLoop();var i=l.container[0].clientLeft;return l.slideTo(l.activeIndex+l.params.slidesPerGroup,t,e,n)}else return l.slideTo(l.activeIndex+l.params.slidesPerGroup,t,e,n)};l._slideNext=function(e){return l.slideNext(true,e,true)};l.slidePrev=function(e,t,n){if(l.params.loop){if(l.animating)return false;l.fixLoop();var i=l.container[0].clientLeft;return l.slideTo(l.activeIndex-1,t,e,n)}else return l.slideTo(l.activeIndex-1,t,e,n)};l._slidePrev=function(e){return l.slidePrev(true,e,true)};l.slideReset=function(e,t,n){return l.slideTo(l.activeIndex,t,e)};l.setWrapperTransition=function(e,t){l.wrapper.transition(e);if(l.params.effect!=="slide"&&l.effects[l.params.effect]){l.effects[l.params.effect].setTransition(e)}if(l.params.parallax&&l.parallax){l.parallax.setTransition(e)}if(l.params.scrollbar&&l.scrollbar){l.scrollbar.setTransition(e)}if(l.params.control&&l.controller){l.controller.setTransition(e,t)}l.emit("onSetTransition",l,e)};l.setWrapperTranslate=function(e,t,n){var i=0,r=0,a=0;if(c()){i=l.rtl?-e:e}else{r=e}if(!l.params.virtualTranslate){if(l.support.transforms3d)l.wrapper.transform("translate3d("+i+"px, "+r+"px, "+a+"px)");else l.wrapper.transform("translate("+i+"px, "+r+"px)")}l.translate=c()?i:r;if(t)l.updateActiveIndex();if(l.params.effect!=="slide"&&l.effects[l.params.effect]){l.effects[l.params.effect].setTranslate(l.translate)}if(l.params.parallax&&l.parallax){l.parallax.setTranslate(l.translate)}if(l.params.scrollbar&&l.scrollbar){l.scrollbar.setTranslate(l.translate)}if(l.params.control&&l.controller){l.controller.setTranslate(l.translate,n)}l.emit("onSetTranslate",l,l.translate)};l.getTranslate=function(e,t){var n,i,r,a;if(typeof t==="undefined"){t="x"}if(l.params.virtualTranslate){return l.rtl?-l.translate:l.translate}r=window.getComputedStyle(e,null);if(window.WebKitCSSMatrix){a=new window.WebKitCSSMatrix(r.webkitTransform==="none"?"":r.webkitTransform)}else{a=r.MozTransform||r.OTransform||r.MsTransform||r.msTransform||r.transform||r.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,");n=a.toString().split(",")}if(t==="x"){if(window.WebKitCSSMatrix)i=a.m41;else if(n.length===16)i=parseFloat(n[12]);else i=parseFloat(n[4])}if(t==="y"){if(window.WebKitCSSMatrix)i=a.m42;else if(n.length===16)i=parseFloat(n[13]);else i=parseFloat(n[5])}if(l.rtl&&i)i=-i;return i||0};l.getWrapperTranslate=function(e){if(typeof e==="undefined"){e=c()?"x":"y"}return l.getTranslate(l.wrapper[0],e)};l.observers=[];function M(e,t){t=t||{};var n=window.MutationObserver||window.WebkitMutationObserver;var i=new n(function(e){e.forEach(function(e){l.onResize(true);l.emit("onObserverUpdate",l,e)})});i.observe(e,{attributes:typeof t.attributes==="undefined"?true:t.attributes,childList:typeof t.childList==="undefined"?true:t.childList,characterData:typeof t.characterData==="undefined"?true:t.characterData});l.observers.push(i)}l.initObservers=function(){if(l.params.observeParents){var e=l.container.parents();for(var t=0;t<e.length;t++){M(e[t])}}M(l.container[0],{childList:false});M(l.wrapper[0],{attributes:false})};l.disconnectObservers=function(){for(var e=0;e<l.observers.length;e++){l.observers[e].disconnect()}l.observers=[]};l.createLoop=function(){l.wrapper.children("."+l.params.slideClass+"."+l.params.slideDuplicateClass).remove();var e=l.wrapper.children("."+l.params.slideClass);l.loopedSlides=parseInt(l.params.loopedSlides||l.params.slidesPerView,10);l.loopedSlides=l.loopedSlides+l.params.loopAdditionalSlides;if(l.loopedSlides>e.length){l.loopedSlides=e.length}var t=[],n=[],i;e.each(function(i,r){var a=u(this);if(i<l.loopedSlides)n.push(r);if(i<e.length&&i>=e.length-l.loopedSlides)t.push(r);a.attr("data-swiper-slide-index",i)});for(i=0;i<n.length;i++){l.wrapper.append(u(n[i].cloneNode(true)).addClass(l.params.slideDuplicateClass))}for(i=t.length-1;i>=0;i--){l.wrapper.prepend(u(t[i].cloneNode(true)).addClass(l.params.slideDuplicateClass))}};l.destroyLoop=function(){l.wrapper.children("."+l.params.slideClass+"."+l.params.slideDuplicateClass).remove();l.slides.removeAttr("data-swiper-slide-index")};l.fixLoop=function(){var e;if(l.activeIndex<l.loopedSlides){e=l.slides.length-l.loopedSlides*3+l.activeIndex;e=e+l.loopedSlides;l.slideTo(e,0,false,true)}else if(l.params.slidesPerView==="auto"&&l.activeIndex>=l.loopedSlides*2||l.activeIndex>l.slides.length-l.params.slidesPerView*2){e=-l.slides.length+l.activeIndex+l.loopedSlides;e=e+l.loopedSlides;l.slideTo(e,0,false,true)}};l.appendSlide=function(e){if(l.params.loop){l.destroyLoop()}if(typeof e==="object"&&e.length){for(var t=0;t<e.length;t++){if(e[t])l.wrapper.append(e[t])}}else{l.wrapper.append(e)}if(l.params.loop){l.createLoop()}if(!(l.params.observer&&l.support.observer)){l.update(true)}};l.prependSlide=function(e){if(l.params.loop){l.destroyLoop()}var t=l.activeIndex+1;if(typeof e==="object"&&e.length){for(var n=0;n<e.length;n++){if(e[n])l.wrapper.prepend(e[n])}t=l.activeIndex+e.length}else{l.wrapper.prepend(e)}if(l.params.loop){l.createLoop()}if(!(l.params.observer&&l.support.observer)){l.update(true)}l.slideTo(t,0,false)};l.removeSlide=function(e){if(l.params.loop){l.destroyLoop();l.slides=l.wrapper.children("."+l.params.slideClass)}var t=l.activeIndex,n;if(typeof e==="object"&&e.length){for(var i=0;i<e.length;i++){n=e[i];if(l.slides[n])l.slides.eq(n).remove();if(n<t)t--}t=Math.max(t,0)}else{n=e;if(l.slides[n])l.slides.eq(n).remove();if(n<t)t--;t=Math.max(t,0)}if(l.params.loop){l.createLoop()}if(!(l.params.observer&&l.support.observer)){l.update(true)}if(l.params.loop){l.slideTo(t+l.loopedSlides,0,false)}else{l.slideTo(t,0,false)}};l.removeAllSlides=function(){var e=[];for(var t=0;t<l.slides.length;t++){e.push(t)}l.removeSlide(e)};l.effects={fade:{fadeIndex:null,setTranslate:function(){for(var e=0;e<l.slides.length;e++){var t=l.slides.eq(e);var n=t[0].swiperSlideOffset;var i=-n;if(!l.params.virtualTranslate)i=i-l.translate;var r=0;if(!c()){r=i;i=0}var a=l.params.fade.crossFade?Math.max(1-Math.abs(t[0].progress),0):1+Math.min(Math.max(t[0].progress,-1),0);if(a>0&&a<1){l.effects.fade.fadeIndex=e}t.css({opacity:a}).transform("translate3d("+i+"px, "+r+"px, 0px)")}},setTransition:function(e){l.slides.transition(e);if(l.params.virtualTranslate&&e!==0){var t=l.effects.fade.fadeIndex!==null?l.effects.fade.fadeIndex:l.activeIndex;if(!(l.params.loop||l.params.fade.crossFade)&&t===0){t=l.slides.length-1}l.slides.eq(t).transitionEnd(function(){if(!l)return;var e=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"];for(var t=0;t<e.length;t++){l.wrapper.trigger(e[t])}})}}},cube:{setTranslate:function(){var e=0,t;if(l.params.cube.shadow){if(c()){t=l.wrapper.find(".swiper-cube-shadow");if(t.length===0){t=u('<div class="swiper-cube-shadow"></div>');l.wrapper.append(t)}t.css({height:l.width+"px"})}else{t=l.container.find(".swiper-cube-shadow");if(t.length===0){t=u('<div class="swiper-cube-shadow"></div>');l.container.append(t)}}}for(var n=0;n<l.slides.length;n++){var i=l.slides.eq(n);var r=n*90;var a=Math.floor(r/360);if(l.rtl){r=-r;a=Math.floor(-r/360)}var s=Math.max(Math.min(i[0].progress,1),-1);var o=0,d=0,f=0;if(n%4===0){o=-a*4*l.size;f=0}else if((n-1)%4===0){o=0;f=-a*4*l.size}else if((n-2)%4===0){o=l.size+a*4*l.size;f=l.size}else if((n-3)%4===0){o=-l.size;f=3*l.size+l.size*4*a}if(l.rtl){o=-o}if(!c()){d=o;o=0}var h="rotateX("+(c()?0:-r)+"deg) rotateY("+(c()?r:0)+"deg) translate3d("+o+"px, "+d+"px, "+f+"px)";if(s<=1&&s>-1){e=n*90+s*90;if(l.rtl)e=-n*90-s*90}i.transform(h);if(l.params.cube.slideShadows){var p=c()?i.find(".swiper-slide-shadow-left"):i.find(".swiper-slide-shadow-top");var m=c()?i.find(".swiper-slide-shadow-right"):i.find(".swiper-slide-shadow-bottom");if(p.length===0){p=u('<div class="swiper-slide-shadow-'+(c()?"left":"top")+'"></div>');i.append(p)}if(m.length===0){m=u('<div class="swiper-slide-shadow-'+(c()?"right":"bottom")+'"></div>');i.append(m)}var _=i[0].progress;if(p.length)p[0].style.opacity=-i[0].progress;if(m.length)m[0].style.opacity=i[0].progress}}l.wrapper.css({"-webkit-transform-origin":"50% 50% -"+l.size/2+"px","-moz-transform-origin":"50% 50% -"+l.size/2+"px","-ms-transform-origin":"50% 50% -"+l.size/2+"px","transform-origin":"50% 50% -"+l.size/2+"px"});if(l.params.cube.shadow){if(c()){t.transform("translate3d(0px, "+(l.width/2+l.params.cube.shadowOffset)+"px, "+-l.width/2+"px) rotateX(90deg) rotateZ(0deg) scale("+l.params.cube.shadowScale+")")}else{var g=Math.abs(e)-Math.floor(Math.abs(e)/90)*90;var v=1.5-(Math.sin(g*2*Math.PI/360)/2+Math.cos(g*2*Math.PI/360)/2);var y=l.params.cube.shadowScale,b=l.params.cube.shadowScale/v,x=l.params.cube.shadowOffset;t.transform("scale3d("+y+", 1, "+b+") translate3d(0px, "+(l.height/2+x)+"px, "+-l.height/2/b+"px) rotateX(-90deg)")}}var w=l.isSafari||l.isUiWebView?-l.size/2:0;l.wrapper.transform("translate3d(0px,0,"+w+"px) rotateX("+(c()?0:e)+"deg) rotateY("+(c()?-e:0)+"deg)")},setTransition:function(e){l.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e);if(l.params.cube.shadow&&!c()){l.container.find(".swiper-cube-shadow").transition(e)}}},coverflow:{setTranslate:function(){var e=l.translate;var t=c()?-e+l.width/2:-e+l.height/2;var n=c()?l.params.coverflow.rotate:-l.params.coverflow.rotate;var i=l.params.coverflow.depth;for(var r=0,a=l.slides.length;r<a;r++){var s=l.slides.eq(r);var o=l.slidesSizesGrid[r];var d=s[0].swiperSlideOffset;var f=(t-d-o/2)/o*l.params.coverflow.modifier;var h=c()?n*f:0;var p=c()?0:n*f;var m=-i*Math.abs(f);var _=c()?0:l.params.coverflow.stretch*f;var g=c()?l.params.coverflow.stretch*f:0;if(Math.abs(g)<.001)g=0;if(Math.abs(_)<.001)_=0;if(Math.abs(m)<.001)m=0;if(Math.abs(h)<.001)h=0;if(Math.abs(p)<.001)p=0;var v="translate3d("+g+"px,"+_+"px,"+m+"px)  rotateX("+p+"deg) rotateY("+h+"deg)";s.transform(v);s[0].style.zIndex=-Math.abs(Math.round(f))+1;if(l.params.coverflow.slideShadows){var y=c()?s.find(".swiper-slide-shadow-left"):s.find(".swiper-slide-shadow-top");var b=c()?s.find(".swiper-slide-shadow-right"):s.find(".swiper-slide-shadow-bottom");if(y.length===0){y=u('<div class="swiper-slide-shadow-'+(c()?"left":"top")+'"></div>');s.append(y)}if(b.length===0){b=u('<div class="swiper-slide-shadow-'+(c()?"right":"bottom")+'"></div>');s.append(b)}if(y.length)y[0].style.opacity=f>0?f:0;if(b.length)b[0].style.opacity=-f>0?-f:0}}if(l.browser.ie){var x=l.wrapper[0].style;x.perspectiveOrigin=t+"px 50%"}},setTransition:function(e){l.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}}};l.lazy={initialImageLoaded:false,loadImageInSlide:function(e,t){if(typeof e==="undefined")return;if(typeof t==="undefined")t=true;if(l.slides.length===0)return;var n=l.slides.eq(e);var i=n.find(".swiper-lazy:not(.swiper-lazy-loaded):not(.swiper-lazy-loading)");if(n.hasClass("swiper-lazy")&&!n.hasClass("swiper-lazy-loaded")&&!n.hasClass("swiper-lazy-loading")){i.add(n[0])}if(i.length===0)return;i.each(function(){var e=u(this);e.addClass("swiper-lazy-loading");var i=e.attr("data-background");var r=e.attr("data-src");l.loadImage(e[0],r||i,false,function(){if(i){e.css("background-image","url("+i+")");e.removeAttr("data-background")}else{e.attr("src",r);e.removeAttr("data-src")}e.addClass("swiper-lazy-loaded").removeClass("swiper-lazy-loading");n.find(".swiper-lazy-preloader, .preloader").remove();if(l.params.loop&&t){var a=n.attr("data-swiper-slide-index");if(n.hasClass(l.params.slideDuplicateClass)){var s=l.wrapper.children('[data-swiper-slide-index="'+a+'"]:not(.'+l.params.slideDuplicateClass+")");l.lazy.loadImageInSlide(s.index(),false)}else{var o=l.wrapper.children("."+l.params.slideDuplicateClass+'[data-swiper-slide-index="'+a+'"]');l.lazy.loadImageInSlide(o.index(),false)}}l.emit("onLazyImageReady",l,n[0],e[0])});l.emit("onLazyImageLoad",l,n[0],e[0])})},load:function(){if(l.params.watchSlidesVisibility){l.wrapper.children("."+l.params.slideVisibleClass).each(function(){l.lazy.loadImageInSlide(u(this).index())})}else{if(l.params.slidesPerView>1){for(var e=l.activeIndex;e<l.activeIndex+l.params.slidesPerView;e++){if(l.slides[e])l.lazy.loadImageInSlide(e)}}else{l.lazy.loadImageInSlide(l.activeIndex)}}if(l.params.lazyLoadingInPrevNext){var t=l.wrapper.children("."+l.params.slideNextClass);if(t.length>0)l.lazy.loadImageInSlide(t.index());var n=l.wrapper.children("."+l.params.slidePrevClass);if(n.length>0)l.lazy.loadImageInSlide(n.index())}},onTransitionStart:function(){if(l.params.lazyLoading){if(l.params.lazyLoadingOnTransitionStart||!l.params.lazyLoadingOnTransitionStart&&!l.lazy.initialImageLoaded){l.lazy.load()}}},onTransitionEnd:function(){if(l.params.lazyLoading&&!l.params.lazyLoadingOnTransitionStart){l.lazy.load()}}};l.scrollbar={set:function(){if(!l.params.scrollbar)return;var e=l.scrollbar;e.track=u(l.params.scrollbar);e.drag=e.track.find(".swiper-scrollbar-drag");if(e.drag.length===0){e.drag=u('<div class="swiper-scrollbar-drag"></div>');e.track.append(e.drag)}e.drag[0].style.width="";e.drag[0].style.height="";e.trackSize=c()?e.track[0].offsetWidth:e.track[0].offsetHeight;e.divider=l.size/l.virtualSize;e.moveDivider=e.divider*(e.trackSize/l.size);e.dragSize=e.trackSize*e.divider;if(c()){e.drag[0].style.width=e.dragSize+"px"}else{e.drag[0].style.height=e.dragSize+"px"}if(e.divider>=1){e.track[0].style.display="none"}else{e.track[0].style.display=""}if(l.params.scrollbarHide){e.track[0].style.opacity=0}},setTranslate:function(){if(!l.params.scrollbar)return;var e;var t=l.scrollbar;var n=l.translate||0;var i;var r=t.dragSize;i=(t.trackSize-t.dragSize)*l.progress;if(l.rtl&&c()){i=-i;if(i>0){r=t.dragSize-i;i=0}else if(-i+t.dragSize>t.trackSize){r=t.trackSize+i}}else{if(i<0){r=t.dragSize+i;i=0}else if(i+t.dragSize>t.trackSize){r=t.trackSize-i}}if(c()){if(l.support.transforms3d){t.drag.transform("translate3d("+i+"px, 0, 0)")}else{t.drag.transform("translateX("+i+"px)")}t.drag[0].style.width=r+"px"}else{if(l.support.transforms3d){t.drag.transform("translate3d(0px, "+i+"px, 0)")}else{t.drag.transform("translateY("+i+"px)")}t.drag[0].style.height=r+"px"}if(l.params.scrollbarHide){clearTimeout(t.timeout);t.track[0].style.opacity=1;t.timeout=setTimeout(function(){t.track[0].style.opacity=0;t.track.transition(400)},1e3)}},setTransition:function(e){if(!l.params.scrollbar)return;l.scrollbar.drag.transition(e)}};l.controller={setTranslate:function(t,n){var i=l.params.control;var r,a;function s(e){t=e.rtl&&e.params.direction==="horizontal"?-l.translate:l.translate;r=(e.maxTranslate()-e.minTranslate())/(l.maxTranslate()-l.minTranslate());a=(t-l.minTranslate())*r+e.minTranslate();if(l.params.controlInverse){a=e.maxTranslate()-a}e.updateProgress(a);e.setWrapperTranslate(a,false,l);e.updateActiveIndex()}if(l.isArray(i)){for(var o=0;o<i.length;o++){if(i[o]!==n&&i[o]instanceof e){s(i[o])}}}else if(i instanceof e&&n!==i){s(i)}},setTransition:function(t,n){var i=l.params.control;var r;function a(e){e.setWrapperTransition(t,l);if(t!==0){e.onTransitionStart();e.wrapper.transitionEnd(function(){if(!i)return;e.onTransitionEnd()})}}if(l.isArray(i)){for(r=0;r<i.length;r++){if(i[r]!==n&&i[r]instanceof e){a(i[r])}}}else if(i instanceof e&&n!==i){a(i)}}};l.hashnav={init:function(){if(!l.params.hashnav)return;l.hashnav.initialized=true;var e=document.location.hash.replace("#","");if(!e)return;var t=0;for(var n=0,i=l.slides.length;n<i;n++){var r=l.slides.eq(n);var a=r.attr("data-hash");if(a===e&&!r.hasClass(l.params.slideDuplicateClass)){var s=r.index();l.slideTo(s,t,l.params.runCallbacksOnInit,true)}}},setHash:function(){if(!l.hashnav.initialized||!l.params.hashnav)return;document.location.hash=l.slides.eq(l.activeIndex).attr("data-hash")||""}};function A(e){if(e.originalEvent)e=e.originalEvent;var t=e.keyCode||e.charCode;if(!l.params.allowSwipeToNext&&(c()&&t===39||!c()&&t===40)){return false}if(!l.params.allowSwipeToPrev&&(c()&&t===37||!c()&&t===38)){return false}if(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey){return}if(document.activeElement&&document.activeElement.nodeName&&(document.activeElement.nodeName.toLowerCase()==="input"||document.activeElement.nodeName.toLowerCase()==="textarea")){return}if(t===37||t===39||t===38||t===40){var n=false;if(l.container.parents(".swiper-slide").length>0&&l.container.parents(".swiper-slide-active").length===0){return}var i={left:window.pageXOffset,top:window.pageYOffset};var r=window.innerWidth;var a=window.innerHeight;var s=l.container.offset();var o=[[s.left,s.top],[s.left+l.width,s.top],[s.left,s.top+l.height],[s.left+l.width,s.top+l.height]];for(var u=0;u<o.length;u++){var d=o[u];if(d[0]>=i.left&&d[0]<=i.left+r&&d[1]>=i.top&&d[1]<=i.top+a){n=true}}if(!n)return}if(c()){if(t===37||t===39){if(e.preventDefault)e.preventDefault();else e.returnValue=false}if(t===39)l.slideNext();if(t===37)l.slidePrev()}else{if(t===38||t===40){if(e.preventDefault)e.preventDefault();else e.returnValue=false}if(t===40)l.slideNext();if(t===38)l.slidePrev()}}l.disableKeyboardControl=function(){u(document).off("keydown",A)};l.enableKeyboardControl=function(){u(document).on("keydown",A)};l._wheelEvent=false;l._lastWheelScrollTime=(new window.Date).getTime();if(l.params.mousewheelControl){if(document.onmousewheel!==undefined){l._wheelEvent="mousewheel"}if(!l._wheelEvent){try{new window.WheelEvent("wheel");l._wheelEvent="wheel"}catch(C){}}if(!l._wheelEvent){l._wheelEvent="DOMMouseScroll"}}function R(e){if(e.originalEvent)e=e.originalEvent;var t=l._wheelEvent;var n=0;if(e.detail)n=-e.detail;else if(t==="mousewheel"){if(l.params.mousewheelForceToAxis){if(c()){if(Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY))n=e.wheelDeltaX;else return}else{if(Math.abs(e.wheelDeltaY)>Math.abs(e.wheelDeltaX))n=e.wheelDeltaY;else return}}else{n=e.wheelDelta}}else if(t==="DOMMouseScroll")n=-e.detail;else if(t==="wheel"){if(l.params.mousewheelForceToAxis){if(c()){if(Math.abs(e.deltaX)>Math.abs(e.deltaY))n=-e.deltaX;else return}else{if(Math.abs(e.deltaY)>Math.abs(e.deltaX))n=-e.deltaY;else return}}else{n=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY}}if(!l.params.freeMode){if((new window.Date).getTime()-l._lastWheelScrollTime>60){if(n<0)l.slideNext();else l.slidePrev()}l._lastWheelScrollTime=(new window.Date).getTime()}else{var i=l.getWrapperTranslate()+n;if(i>0)i=0;if(i<l.maxTranslate())i=l.maxTranslate();l.setWrapperTransition(0);l.setWrapperTranslate(i);l.updateProgress();l.updateActiveIndex();if(i===0||i===l.maxTranslate())return}if(l.params.autoplay)l.stopAutoplay();if(e.preventDefault)e.preventDefault();else e.returnValue=false;return false}l.disableMousewheelControl=function(){if(!l._wheelEvent)return false;l.container.off(l._wheelEvent,R);return true};l.enableMousewheelControl=function(){if(!l._wheelEvent)return false;l.container.on(l._wheelEvent,R);return true};function D(e,t){e=u(e);var n,i,r;n=e.attr("data-swiper-parallax")||"0";i=e.attr("data-swiper-parallax-x");r=e.attr("data-swiper-parallax-y");if(i||r){i=i||"0";r=r||"0"}else{if(c()){i=n;r="0"}else{r=n;i="0"}}if(i.indexOf("%")>=0){i=parseInt(i,10)*t+"%"}else{i=i*t+"px"}if(r.indexOf("%")>=0){r=parseInt(r,10)*t+"%"}else{r=r*t+"px"}e.transform("translate3d("+i+", "+r+",0px)")}l.parallax={setTranslate:function(){l.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){D(this,l.progress)});l.slides.each(function(){var e=u(this);e.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var t=Math.min(Math.max(e[0].progress,-1),1);D(this,t)})})},setTransition:function(e){if(typeof e==="undefined")e=l.params.speed;l.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var t=u(this);var n=parseInt(t.attr("data-swiper-parallax-duration"),10)||e;if(e===0)n=0;t.transition(n)})}};l._plugins=[];for(var I in l.plugins){var O=l.plugins[I](l,l.params[I]);if(O)l._plugins.push(O)}l.callPlugins=function(e){for(var t=0;t<l._plugins.length;t++){if(e in l._plugins[t]){l._plugins[t][e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}}};function N(e){if(e.indexOf("on")!==0){if(e[0]!==e[0].toUpperCase()){e="on"+e[0].toUpperCase()+e.substring(1)}else{e="on"+e}}return e}l.emitterEventListeners={};l.emit=function(e){if(l.params[e]){l.params[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}var t;if(l.emitterEventListeners[e]){for(t=0;t<l.emitterEventListeners[e].length;t++){l.emitterEventListeners[e][t](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}}if(l.callPlugins)l.callPlugins(e,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])};l.on=function(e,t){e=N(e);if(!l.emitterEventListeners[e])l.emitterEventListeners[e]=[];l.emitterEventListeners[e].push(t);return l};l.off=function(e,t){var n;e=N(e);if(typeof t==="undefined"){l.emitterEventListeners[e]=[];return l}if(!l.emitterEventListeners[e]||l.emitterEventListeners[e].length===0)return;for(n=0;n<l.emitterEventListeners[e].length;n++){if(l.emitterEventListeners[e][n]===t)l.emitterEventListeners[e].splice(n,1)}return l};l.once=function(e,t){e=N(e);var n=function(){t(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);l.off(e,n)};l.on(e,n);return l};l.a11y={makeFocusable:function(e){e[0].tabIndex="0";return e},addRole:function(e,t){e.attr("role",t);return e},addLabel:function(e,t){e.attr("aria-label",t);return e},disable:function(e){e.attr("aria-disabled",true);return e},enable:function(e){e.attr("aria-disabled",false);return e},onEnterKey:function(e){if(e.keyCode!==13)return;if(u(e.target).is(l.params.nextButton)){l.onClickNext(e);if(l.isEnd){l.a11y.notify(l.params.lastSlideMsg)}else{l.a11y.notify(l.params.nextSlideMsg)}}else if(u(e.target).is(l.params.prevButton)){l.onClickPrev(e);if(l.isBeginning){l.a11y.notify(l.params.firstSlideMsg)}else{l.a11y.notify(l.params.prevSlideMsg)}}},liveRegion:u('<span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>'),notify:function(e){var t=l.a11y.liveRegion;if(t.length===0)return;t.html("");t.html(e)},init:function(){if(l.params.nextButton){var e=u(l.params.nextButton);l.a11y.makeFocusable(e);l.a11y.addRole(e,"button");l.a11y.addLabel(e,l.params.nextSlideMsg)}if(l.params.prevButton){var t=u(l.params.prevButton);l.a11y.makeFocusable(t);l.a11y.addRole(t,"button");l.a11y.addLabel(t,l.params.prevSlideMsg)}u(l.container).append(l.a11y.liveRegion)},destroy:function(){if(l.a11y.liveRegion&&l.a11y.liveRegion.length>0)l.a11y.liveRegion.remove()}};l.init=function(){if(l.params.loop)l.createLoop();l.updateContainerSize();l.updateSlidesSize();l.updatePagination();if(l.params.scrollbar&&l.scrollbar){l.scrollbar.set()}if(l.params.effect!=="slide"&&l.effects[l.params.effect]){if(!l.params.loop)l.updateProgress();l.effects[l.params.effect].setTranslate()}if(l.params.loop){l.slideTo(l.params.initialSlide+l.loopedSlides,0,l.params.runCallbacksOnInit)}else{l.slideTo(l.params.initialSlide,0,l.params.runCallbacksOnInit);if(l.params.initialSlide===0){if(l.parallax&&l.params.parallax)l.parallax.setTranslate();if(l.lazy&&l.params.lazyLoading){l.lazy.load();l.lazy.initialImageLoaded=true}}}l.attachEvents();if(l.params.observer&&l.support.observer){l.initObservers()}if(l.params.preloadImages&&!l.params.lazyLoading){l.preloadImages()}if(l.params.autoplay){l.startAutoplay()}if(l.params.keyboardControl){if(l.enableKeyboardControl)l.enableKeyboardControl()}if(l.params.mousewheelControl){if(l.enableMousewheelControl)l.enableMousewheelControl()}if(l.params.hashnav){if(l.hashnav)l.hashnav.init()}if(l.params.a11y&&l.a11y)l.a11y.init();l.emit("onInit",l)};l.cleanupStyles=function(){l.container.removeClass(l.classNames.join(" ")).removeAttr("style");l.wrapper.removeAttr("style");if(l.slides&&l.slides.length){l.slides.removeClass([l.params.slideVisibleClass,l.params.slideActiveClass,l.params.slideNextClass,l.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row")}if(l.paginationContainer&&l.paginationContainer.length){l.paginationContainer.removeClass(l.params.paginationHiddenClass)}if(l.bullets&&l.bullets.length){l.bullets.removeClass(l.params.bulletActiveClass)}if(l.params.prevButton)u(l.params.prevButton).removeClass(l.params.buttonDisabledClass);if(l.params.nextButton)u(l.params.nextButton).removeClass(l.params.buttonDisabledClass);if(l.params.scrollbar&&l.scrollbar){if(l.scrollbar.track&&l.scrollbar.track.length)l.scrollbar.track.removeAttr("style");if(l.scrollbar.drag&&l.scrollbar.drag.length)l.scrollbar.drag.removeAttr("style")}};l.destroy=function(e,t){l.detachEvents();l.stopAutoplay();if(l.params.loop){l.destroyLoop()}if(t){l.cleanupStyles()}l.disconnectObservers();if(l.params.keyboardControl){if(l.disableKeyboardControl)l.disableKeyboardControl()}if(l.params.mousewheelControl){if(l.disableMousewheelControl)l.disableMousewheelControl()}if(l.params.a11y&&l.a11y)l.a11y.destroy();l.emit("onDestroy");if(e!==false)l=null};l.init();return l};e.prototype={isSafari:function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),isArray:function(e){return Object.prototype.toString.apply(e)==="[object Array]"},browser:{ie:window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ieTouch:window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>1||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>1},device:function(){var e=navigator.userAgent;var t=e.match(/(Android);?[\s\/]+([\d.]+)?/);var n=e.match(/(iPad).*OS\s([\d_]+)/);var i=e.match(/(iPod)(.*OS\s([\d_]+))?/);var r=!n&&e.match(/(iPhone\sOS)\s([\d_]+)/);return{ios:n||r||n,android:t}}(),support:{touch:window.Modernizr&&Modernizr.touch===true||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===true||function(){var e=document.createElement("div").style;return"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e}(),flexbox:function(){var e=document.createElement("div").style;var t="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" ");for(var n=0;n<t.length;n++){if(t[n]in e)return true}}(),observer:function(){return"MutationObserver"in window||"WebkitMutationObserver"in window}()},plugins:{}};var t=function(){var e=function(e){var t=this,n=0;for(n=0;n<e.length;n++){t[n]=e[n]}t.length=e.length;return this};var t=function(t,n){var i=[],r=0;if(t&&!n){if(t instanceof e){return t}}if(t){if(typeof t==="string"){var a,s,o=t.trim();if(o.indexOf("<")>=0&&o.indexOf(">")>=0){var l="div";if(o.indexOf("<li")===0)l="ul";if(o.indexOf("<tr")===0)l="tbody";if(o.indexOf("<td")===0||o.indexOf("<th")===0)l="tr";if(o.indexOf("<tbody")===0)l="table";if(o.indexOf("<option")===0)l="select";s=document.createElement(l);s.innerHTML=t;for(r=0;r<s.childNodes.length;r++){i.push(s.childNodes[r])}}else{if(!n&&t[0]==="#"&&!t.match(/[ .<>:~]/)){a=[document.getElementById(t.split("#")[1])]}else{a=(n||document).querySelectorAll(t)}for(r=0;r<a.length;r++){if(a[r])i.push(a[r])}}}else if(t.nodeType||t===window||t===document){i.push(t)}else if(t.length>0&&t[0].nodeType){for(r=0;r<t.length;r++){i.push(t[r])}}}return new e(i)};e.prototype={addClass:function(e){if(typeof e==="undefined"){return this}var t=e.split(" ");for(var n=0;n<t.length;n++){for(var i=0;i<this.length;i++){this[i].classList.add(t[n])}}return this},removeClass:function(e){var t=e.split(" ");for(var n=0;n<t.length;n++){for(var i=0;i<this.length;i++){this[i].classList.remove(t[n])}}return this},hasClass:function(e){if(!this[0])return false;else return this[0].classList.contains(e)},toggleClass:function(e){var t=e.split(" ");for(var n=0;n<t.length;n++){for(var i=0;i<this.length;i++){this[i].classList.toggle(t[n])}}return this},attr:function(e,t){if(arguments.length===1&&typeof e==="string"){if(this[0])return this[0].getAttribute(e);else return undefined}else{for(var n=0;n<this.length;n++){if(arguments.length===2){this[n].setAttribute(e,t)}else{for(var i in e){this[n][i]=e[i];this[n].setAttribute(i,e[i])}}}return this}},removeAttr:function(e){for(var t=0;t<this.length;t++){this[t].removeAttribute(e)}return this},data:function(e,t){if(typeof t==="undefined"){if(this[0]){var n=this[0].getAttribute("data-"+e);if(n)return n;else if(this[0].dom7ElementDataStorage&&e in this[0].dom7ElementDataStorage)return this[0].dom7ElementDataStorage[e];else return undefined}else return undefined}else{for(var i=0;i<this.length;i++){var r=this[i];if(!r.dom7ElementDataStorage)r.dom7ElementDataStorage={};r.dom7ElementDataStorage[e]=t}return this}},transform:function(e){for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=e}return this},transition:function(e){if(typeof e!=="string"){e=e+"ms"}for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=e}return this},on:function(e,n,i,r){function a(e){var r=e.target;if(t(r).is(n))i.call(r,e);else{var a=t(r).parents();for(var s=0;s<a.length;s++){if(t(a[s]).is(n))i.call(a[s],e)}}}var s=e.split(" ");var o,l;for(o=0;o<this.length;o++){if(typeof n==="function"||n===false){if(typeof n==="function"){i=arguments[1];r=arguments[2]||false}for(l=0;l<s.length;l++){this[o].addEventListener(s[l],i,r)}}else{for(l=0;l<s.length;l++){if(!this[o].dom7LiveListeners)this[o].dom7LiveListeners=[];this[o].dom7LiveListeners.push({listener:i,liveListener:a});this[o].addEventListener(s[l],a,r)}}}return this},off:function(e,t,n,i){var r=e.split(" ");for(var a=0;a<r.length;a++){for(var s=0;s<this.length;s++){if(typeof t==="function"||t===false){if(typeof t==="function"){n=arguments[1];i=arguments[2]||false}this[s].removeEventListener(r[a],n,i)}else{if(this[s].dom7LiveListeners){for(var o=0;o<this[s].dom7LiveListeners.length;o++){if(this[s].dom7LiveListeners[o].listener===n){this[s].removeEventListener(r[a],this[s].dom7LiveListeners[o].liveListener,i);

}}}}}}return this},once:function(e,t,n,i){var r=this;if(typeof t==="function"){t=false;n=arguments[1];i=arguments[2]}function a(s){n(s);r.off(e,t,a,i)}r.on(e,t,a,i)},trigger:function(e,t){for(var n=0;n<this.length;n++){var i;try{i=new window.CustomEvent(e,{detail:t,bubbles:true,cancelable:true})}catch(r){i=document.createEvent("Event");i.initEvent(e,true,true);i.detail=t}this[n].dispatchEvent(i)}return this},transitionEnd:function(e){var t=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],n,i,r=this;function a(i){if(i.target!==this)return;e.call(this,i);for(n=0;n<t.length;n++){r.off(t[n],a)}}if(e){for(n=0;n<t.length;n++){r.on(t[n],a)}}return this},width:function(){if(this[0]===window){return window.innerWidth}else{if(this.length>0){return parseFloat(this.css("width"))}else{return null}}},outerWidth:function(e){if(this.length>0){if(e)return this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left"));else return this[0].offsetWidth}else return null},height:function(){if(this[0]===window){return window.innerHeight}else{if(this.length>0){return parseFloat(this.css("height"))}else{return null}}},outerHeight:function(e){if(this.length>0){if(e)return this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom"));else return this[0].offsetHeight}else return null},offset:function(){if(this.length>0){var e=this[0];var t=e.getBoundingClientRect();var n=document.body;var i=e.clientTop||n.clientTop||0;var r=e.clientLeft||n.clientLeft||0;var a=window.pageYOffset||e.scrollTop;var s=window.pageXOffset||e.scrollLeft;return{top:t.top+a-i,left:t.left+s-r}}else{return null}},css:function(e,t){var n;if(arguments.length===1){if(typeof e==="string"){if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(e)}else{for(n=0;n<this.length;n++){for(var i in e){this[n].style[i]=e[i]}}return this}}if(arguments.length===2&&typeof e==="string"){for(n=0;n<this.length;n++){this[n].style[e]=t}return this}return this},each:function(e){for(var t=0;t<this.length;t++){e.call(this[t],t,this[t])}return this},html:function(e){if(typeof e==="undefined"){return this[0]?this[0].innerHTML:undefined}else{for(var t=0;t<this.length;t++){this[t].innerHTML=e}return this}},is:function(n){if(!this[0])return false;var i,r;if(typeof n==="string"){var a=this[0];if(a===document)return n===document;if(a===window)return n===window;if(a.matches)return a.matches(n);else if(a.webkitMatchesSelector)return a.webkitMatchesSelector(n);else if(a.mozMatchesSelector)return a.mozMatchesSelector(n);else if(a.msMatchesSelector)return a.msMatchesSelector(n);else{i=t(n);for(r=0;r<i.length;r++){if(i[r]===this[0])return true}return false}}else if(n===document)return this[0]===document;else if(n===window)return this[0]===window;else{if(n.nodeType||n instanceof e){i=n.nodeType?[n]:n;for(r=0;r<i.length;r++){if(i[r]===this[0])return true}return false}return false}},index:function(){if(this[0]){var e=this[0];var t=0;while((e=e.previousSibling)!==null){if(e.nodeType===1)t++}return t}else return undefined},eq:function(t){if(typeof t==="undefined")return this;var n=this.length;var i;if(t>n-1){return new e([])}if(t<0){i=n+t;if(i<0)return new e([]);else return new e([this[i]])}return new e([this[t]])},append:function(t){var n,i;for(n=0;n<this.length;n++){if(typeof t==="string"){var r=document.createElement("div");r.innerHTML=t;while(r.firstChild){this[n].appendChild(r.firstChild)}}else if(t instanceof e){for(i=0;i<t.length;i++){this[n].appendChild(t[i])}}else{this[n].appendChild(t)}}return this},prepend:function(t){var n,i;for(n=0;n<this.length;n++){if(typeof t==="string"){var r=document.createElement("div");r.innerHTML=t;for(i=r.childNodes.length-1;i>=0;i--){this[n].insertBefore(r.childNodes[i],this[n].childNodes[0])}}else if(t instanceof e){for(i=0;i<t.length;i++){this[n].insertBefore(t[i],this[n].childNodes[0])}}else{this[n].insertBefore(t,this[n].childNodes[0])}}return this},insertBefore:function(e){var n=t(e);for(var i=0;i<this.length;i++){if(n.length===1){n[0].parentNode.insertBefore(this[i],n[0])}else if(n.length>1){for(var r=0;r<n.length;r++){n[r].parentNode.insertBefore(this[i].cloneNode(true),n[r])}}}},insertAfter:function(e){var n=t(e);for(var i=0;i<this.length;i++){if(n.length===1){n[0].parentNode.insertBefore(this[i],n[0].nextSibling)}else if(n.length>1){for(var r=0;r<n.length;r++){n[r].parentNode.insertBefore(this[i].cloneNode(true),n[r].nextSibling)}}}},next:function(n){if(this.length>0){if(n){if(this[0].nextElementSibling&&t(this[0].nextElementSibling).is(n))return new e([this[0].nextElementSibling]);else return new e([])}else{if(this[0].nextElementSibling)return new e([this[0].nextElementSibling]);else return new e([])}}else return new e([])},nextAll:function(n){var i=[];var r=this[0];if(!r)return new e([]);while(r.nextElementSibling){var a=r.nextElementSibling;if(n){if(t(a).is(n))i.push(a)}else i.push(a);r=a}return new e(i)},prev:function(n){if(this.length>0){if(n){if(this[0].previousElementSibling&&t(this[0].previousElementSibling).is(n))return new e([this[0].previousElementSibling]);else return new e([])}else{if(this[0].previousElementSibling)return new e([this[0].previousElementSibling]);else return new e([])}}else return new e([])},prevAll:function(n){var i=[];var r=this[0];if(!r)return new e([]);while(r.previousElementSibling){var a=r.previousElementSibling;if(n){if(t(a).is(n))i.push(a)}else i.push(a);r=a}return new e(i)},parent:function(e){var n=[];for(var i=0;i<this.length;i++){if(e){if(t(this[i].parentNode).is(e))n.push(this[i].parentNode)}else{n.push(this[i].parentNode)}}return t(t.unique(n))},parents:function(e){var n=[];for(var i=0;i<this.length;i++){var r=this[i].parentNode;while(r){if(e){if(t(r).is(e))n.push(r)}else{n.push(r)}r=r.parentNode}}return t(t.unique(n))},find:function(t){var n=[];for(var i=0;i<this.length;i++){var r=this[i].querySelectorAll(t);for(var a=0;a<r.length;a++){n.push(r[a])}}return new e(n)},children:function(n){var i=[];for(var r=0;r<this.length;r++){var a=this[r].childNodes;for(var s=0;s<a.length;s++){if(!n){if(a[s].nodeType===1)i.push(a[s])}else{if(a[s].nodeType===1&&t(a[s]).is(n))i.push(a[s])}}}return new e(t.unique(i))},remove:function(){for(var e=0;e<this.length;e++){if(this[e].parentNode)this[e].parentNode.removeChild(this[e])}return this},add:function(){var e=this;var n,i;for(n=0;n<arguments.length;n++){var r=t(arguments[n]);for(i=0;i<r.length;i++){e[e.length]=r[i];e.length++}}return e}};t.fn=e.prototype;t.unique=function(e){var t=[];for(var n=0;n<e.length;n++){if(t.indexOf(e[n])===-1)t.push(e[n])}return t};return t}();var n=["jQuery","Zepto","Dom7"];function i(t){t.fn.swiper=function(n){var i;t(this).each(function(){var t=new e(this,n);if(!i)i=t});return i}}for(var r=0;r<n.length;r++){if(window[n[r]]){i(window[n[r]])}}var a;if(typeof t==="undefined"){a=window.Dom7||window.Zepto||window.jQuery}else{a=t}if(a){if(!("transitionEnd"in a.fn)){a.fn.transitionEnd=function(e){var t=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],n,i,r=this;function a(i){if(i.target!==this)return;e.call(this,i);for(n=0;n<t.length;n++){r.off(t[n],a)}}if(e){for(n=0;n<t.length;n++){r.on(t[n],a)}}return this}}if(!("transform"in a.fn)){a.fn.transform=function(e){for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=e}return this}}if(!("transition"in a.fn)){a.fn.transition=function(e){if(typeof e!=="string"){e=e+"ms"}for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=e}return this}}}window.Swiper=e})();if(true){e.exports=window.Swiper}else if(typeof define==="function"&&define.amd){define([],function(){"use strict";return window.Swiper})}},function(e,t){var n=function(e){var t,n;e=e||document.querySelector(e);if(!e)return;e.addEventListener("touchstart",function(i){t=i.touches[0].pageY;n=e.scrollTop;if(n<=0)e.scrollTop=1;if(n+e.offsetHeight>=e.scrollHeight)e.scrollTop=e.scrollHeight-e.offsetHeight-1},false)};e.exports=n},function(e,t){!function(e){var t=function(t){this.origHtmlMargin=parseFloat(e("html").css("margin-top"));this.options=e.extend({},e.smartbanner.defaults,t);var n=navigator.standalone,i=navigator.userAgent;if(this.options.force){this.type=this.options.force}else if(i.match(/iPhone|iPod/i)!=null||i.match(/iPad/)&&this.options.iOSUniversalApp){if(i.match(/Safari/i)!=null&&(i.match(/CriOS/i)!=null||window.Number(i.substr(i.indexOf("OS ")+3,3).replace("_","."))<6))this.type="ios"}else if(i.match(/\bSilk\/(.*\bMobile Safari\b)?/)||i.match(/\bKF\w/)||i.match("Kindle Fire")){this.type="kindle"}else if(i.match(/Android/i)!=null){this.type="android"}else if(i.match(/Windows NT 6.2/i)!=null&&i.match(/Touch/i)!==null){this.type="windows"}if(!this.type||n||this.getCookie("sb-closed")||this.getCookie("sb-installed")){return}this.scale=this.options.scale=="auto"?e(window).width()/window.screen.width:this.options.scale;if(this.scale<1)this.scale=1;var r=e(this.type=="android"?'meta[name="google-play-app"]':this.type=="ios"?'meta[name="apple-itunes-app"]':this.type=="kindle"?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]');if(r.length==0)return;if(this.type=="windows"){this.pfn=e('meta[name="msApplication-PackageFamilyName"]').attr("content");this.appId=r.attr("content")[1]}else{this.appId=/app-id=([^\s,]+)/.exec(r.attr("content"))[1]}this.title=this.options.title?this.options.title:r.data("title")||e("title").text().replace(/\s*[|\-].*$/,"");this.author=this.options.author?this.options.author:r.data("author")||(e('meta[name="author"]').length?e('meta[name="author"]').attr("content"):window.location.hostname);this.iconUrl=r.data("icon-url");this.price=r.data("price");this.create();this.show();this.listen()};t.prototype={constructor:t,create:function(){var t,n=this.options.url?this.options.url:(this.type=="windows"?"ms-windows-store:PDP?PFN="+this.pfn:this.type=="android"?"market://details?id=":this.type=="kindle"?"amzn://apps/android?asin=":"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id")+this.appId,i=this.price||this.options.price,r=i?i+" - "+(this.type=="android"?this.options.inGooglePlay:this.type=="kindle"?this.options.inAmazonAppStore:this.type=="ios"?this.options.inAppStore:this.options.inWindowsStore):"",a=this.options.iconGloss===null?this.type=="ios":this.options.iconGloss;if(this.options.url)n=this.options.url;else{if(this.type=="android"){n="market://details?id="+this.appId;if(this.options.GooglePlayParams)n=n+"&referrer="+this.options.GooglePlayParams}else n="https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id"+this.appId}var s='<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+r+'</span></div><a href="'+n+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>";e(this.options.appendToSelector).prepend(s);if(this.options.icon){t=this.options.icon}else if(this.iconUrl){t=this.iconUrl}else if(e('link[rel="apple-touch-icon-precomposed"]').length>0){t=e('link[rel="apple-touch-icon-precomposed"]').attr("href");if(this.options.iconGloss===null)a=false}else if(e('link[rel="apple-touch-icon"]').length>0){t=e('link[rel="apple-touch-icon"]').attr("href")}else if(e('meta[name="msApplication-TileImage"]').length>0){t=e('meta[name="msApplication-TileImage"]').attr("content")}else if(e('meta[name="msapplication-TileImage"]').length>0){t=e('meta[name="msapplication-TileImage"]').attr("content")}if(t){e("#smartbanner .sb-icon").css("background-image","url("+t+")");if(a)e("#smartbanner .sb-icon").addClass("gloss")}else{e("#smartbanner").addClass("no-icon")}this.bannerHeight=e("#smartbanner").height();if(this.scale>1){e("#smartbanner").css("top",parseFloat(e("#smartbanner").css("top"))*this.scale).css("height",parseFloat(e("#smartbanner").css("height"))*this.scale).hide();e("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",e(window).width()/this.scale)}e("#smartbanner").css("position",this.options.layer?"absolute":"static")},listen:function(){e("#smartbanner .sb-close").on("click",e.proxy(this.close,this));e("#smartbanner .sb-button").on("click",e.proxy(this.install,this))},show:function(t){var n=e("#smartbanner");if(this.options.layer){n.animate({top:0,display:"block"},this.options.speedIn).addClass("shown").show();e("#nomad").animate({top:this.origHtmlMargin+this.bannerHeight*this.scale},this.options.speedIn,"swing",t)}else{if(e.support.transition){n.animate({top:0},this.options.speedIn).addClass("shown");var i=function(){e("html").removeClass("sb-animation");if(t){t()}};e("html").addClass("sb-animation").one(e.support.transition.end,i).emulateTransitionEnd(this.options.speedIn).css("margin-top",this.origHtmlMargin+this.bannerHeight*this.scale)}else{n.slideDown(this.options.speedIn).addClass("shown")}}},hide:function(t){var n=e("#smartbanner");if(this.options.layer){n.animate({top:-1*this.bannerHeight*this.scale,display:"block"},this.options.speedIn).removeClass("shown");e("#nomad").animate({top:this.origHtmlMargin},this.options.speedIn,"swing",t)}else{if(e.support.transition){n.css("top",-1*this.bannerHeight*this.scale).removeClass("shown");var i=function(){e("html").removeClass("sb-animation");if(t){t()}};e("html").addClass("sb-animation").one(e.support.transition.end,i).emulateTransitionEnd(this.options.speedOut).css("margin-top",this.origHtmlMargin)}else{n.slideUp(this.options.speedOut).removeClass("shown")}}},close:function(e){e.preventDefault();this.hide();this.setCookie("sb-closed","true",this.options.daysHidden)},install:function(e){if(this.options.hideOnInstall){this.hide()}this.setCookie("sb-installed","true",this.options.daysReminder)},setCookie:function(e,t,n){var i=new Date;i.setDate(i.getDate()+n);t=encodeURI(t)+(n==null?"":"; expires="+i.toUTCString());document.cookie=e+"="+t+"; path=/;"},getCookie:function(e){var t,n,i,r=document.cookie.split(";");for(t=0;t<r.length;t++){n=r[t].substr(0,r[t].indexOf("="));i=r[t].substr(r[t].indexOf("=")+1);n=n.replace(/^\s+|\s+$/g,"");if(n==e){return decodeURI(i)}}return null},switchType:function(){var t=this;this.hide(function(){t.type=t.type=="android"?"ios":"android";var n=e(t.type=="android"?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");t.appId=/app-id=([^\s,]+)/.exec(n)[1];e("#smartbanner").detach();t.create();t.show()})}};e.smartbanner=function(n){var i=e(window),r=i.data("smartbanner"),a=typeof n=="object"&&n;if(!r)i.data("smartbanner",r=new t(a));if(typeof n=="string")r[n]()};e.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:"In Google Play",inAmazonAppStore:"In the Amazon Appstore",inWindowsStore:"In the Windows Store",GooglePlayParams:null,icon:null,iconGloss:null,button:"VIEW",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:true,layer:false,iOSUniversalApp:true,appendToSelector:"body"};e.smartbanner.Constructor=t;function n(){var e=document.createElement("smartbanner");var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t){if(e.style[n]!==undefined){return{end:t[n]}}}return false}if(e.support.transition!==undefined)return;e.fn.emulateTransitionEnd=function(t){var n=false,i=this;e(this).one(e.support.transition.end,function(){n=true});var r=function(){if(!n)e(i).trigger(e.support.transition.end)};setTimeout(r,t);return this};e(function(){e.support.transition=n()})}(window.Zepto)},function(e,t,n){var i=n(181);if(typeof i==="string")i=[[e.id,i,""]];var r=n(183)(i,{});if(i.locals)e.exports=i.locals;if(false){if(!i.locals){e.hot.accept("!!./../../node_modules/css-loader/index.js!./smartbanner.css",function(){var t=require("!!./../../node_modules/css-loader/index.js!./smartbanner.css");if(typeof t==="string")t=[[e.id,t,""]];r(t)})}e.hot.dispose(function(){r()})}},function(e,t,n){t=e.exports=n(182)();t.push([e.id,"#smartbanner { position:absolute; left:0; top:-82px; border-bottom:1px solid #e8e8e8; width:100%; height:78px; font-family:'Helvetica Neue',sans-serif; background:-webkit-linear-gradient(top, #f4f4f4 0%,#cdcdcd 100%); background-image: -ms-linear-gradient(top, #F4F4F4 0%, #CDCDCD 100%); background-image: -moz-linear-gradient(top, #F4F4F4 0%, #CDCDCD 100%); box-shadow:0 1px 2px rgba(0,0,0,0.5); z-index:9998; -webkit-font-smoothing:antialiased; overflow:hidden; -webkit-text-size-adjust:none; }\n#smartbanner, html.sb-animation {-webkit-transition: all .3s ease;}\n#smartbanner .sb-container { margin: 0 auto; }\n#smartbanner .sb-close { position:absolute; left:5px; top:5px; display:block; border:2px solid #fff; width:14px; height:14px; font-family:'ArialRoundedMTBold',Arial; font-size:15px; line-height:15px; text-align:center; color:#fff; background:#070707; text-decoration:none; text-shadow:none; border-radius:14px; box-shadow:0 2px 3px rgba(0,0,0,0.4); -webkit-font-smoothing:subpixel-antialiased; }\n#smartbanner .sb-close:active { font-size:13px; color:#aaa; }\n#smartbanner .sb-icon { position:absolute; left:30px; top:10px; display:block; width:57px; height:57px; background:rgba(0,0,0,0.6); background-size:cover; border-radius:10px; box-shadow:0 1px 3px rgba(0,0,0,0.3); }\n#smartbanner.no-icon .sb-icon { display:none; }\n#smartbanner .sb-info { position:absolute; left:98px; top:18px; width:44%; font-size:11px; line-height:1.2em; font-weight:bold; color:#6a6a6a; text-shadow:0 1px 0 rgba(255,255,255,0.8); }\n#smartbanner #smartbanner.no-icon .sb-info { left:34px; }\n#smartbanner .sb-info strong { display:block; font-size:13px; color:#4d4d4d; line-height: 18px; }\n#smartbanner .sb-info > span { display:block; }\n#smartbanner .sb-info em { font-style:normal; text-transform:uppercase; }\n#smartbanner .sb-button { position:absolute; right:20px; top:24px; border:1px solid #bfbfbf; padding: 0 10px; min-width: 10%; height:24px; font-size:14px; line-height:24px; text-align:center; font-weight:bold; color:#6a6a6a; background:-webkit-linear-gradient(top, #efefef 0%,#dcdcdc 100%); text-transform:uppercase; text-decoration:none; text-shadow:0 1px 0 rgba(255,255,255,0.8); border-radius:3px; box-shadow:0 1px 0 rgba(255,255,255,0.6),0 1px 0 rgba(255,255,255,0.7) inset; }\n#smartbanner .sb-button:active, #smartbanner .sb-button:hover { background:-webkit-linear-gradient(top, #dcdcdc 0%,#efefef 100%); }\n\n#smartbanner .sb-icon.gloss:after { content:''; position:absolute; left:0; top:-1px; border-top:1px solid rgba(255,255,255,0.8); width:100%; height:50%; background:-webkit-linear-gradient(top, rgba(255,255,255,0.7) 0%,rgba(255,255,255,0.2) 100%); border-radius:10px 10px 12px 12px; }\n\n#smartbanner.android { border-color:#212228; background-color: #3D3D3D; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAYAAABWKLW/AAAAG0lEQVQIW2MMDQ39v3r1akYGIAATMAEwByYAANRhCgK+E5vTAAAAAElFTkSuQmCC); border-top: 5px solid #88B131; box-shadow: none; }\n#smartbanner.android .sb-close { border:0; width:17px; height:17px; line-height:17px; color:#b1b1b3; background:#1c1e21; text-shadow:0 1px 1px #000; box-shadow:0 1px 2px rgba(0,0,0,0.8) inset,0 1px 1px rgba(255,255,255,0.3); }\n#smartbanner.android .sb-close:active { color:#eee; }\n#smartbanner.android .sb-info { color:#ccc; text-shadow:0 1px 2px #000; }\n#smartbanner.android .sb-info strong { color:#fff; }\n#smartbanner.android .sb-button { min-width: 12%; border:1px solid #DDDCDC; padding:1px; color:#d1d1d1; background: none; border-radius: 0; box-shadow: none; }\n#smartbanner.android .sb-button span { text-align: center; display: block; padding: 0 10px; background-color: #42B6C9; background-image: -webkit-gradient(linear,0 0,0 100%,from(#42B6C9),to(#39A9BB)); background-image: -moz-linear-gradient(top,#42B6C9,#39A9BB); text-transform:none; text-shadow:none; box-shadow:none; }\n#smartbanner.android .sb-button:active, #smartbanner.android .sb-button:hover { background: none; }\n#smartbanner.android .sb-button:active span, #smartbanner.android .sb-button:hover span { background:#2AC7E1; }\n\n#smartbanner.windows .sb-icon { border-radius: 0px; }",""])},function(e,t){e.exports=function(){var e=[];e.toString=function t(){var e=[];for(var t=0;t<this.length;t++){var n=this[t];if(n[2]){e.push("@media "+n[2]+"{"+n[1]+"}")}else{e.push(n[1])}}return e.join("")};e.i=function(t,n){if(typeof t==="string")t=[[null,t,""]];var i={};for(var r=0;r<this.length;r++){var a=this[r][0];if(typeof a==="number")i[a]=true}for(r=0;r<t.length;r++){var s=t[r];if(typeof s[0]!=="number"||!i[s[0]]){if(n&&!s[2]){s[2]=n}else if(n){s[2]="("+s[2]+") and ("+n+")"}e.push(s)}}};return e}},function(e,t,n){var i={},r=function(e){var t;return function(){if(typeof t==="undefined")t=e.apply(this,arguments);return t}},a=r(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),s=r(function(){return document.head||document.getElementsByTagName("head")[0]}),o=null,l=0,u=[];e.exports=function(e,t){if(false){if(typeof document!=="object")throw new Error("The style-loader cannot be used in a non-browser environment")}t=t||{};if(typeof t.singleton==="undefined")t.singleton=a();if(typeof t.insertAt==="undefined")t.insertAt="bottom";var n=d(e);c(n,t);return function r(e){var r=[];for(var a=0;a<n.length;a++){var s=n[a];var o=i[s.id];o.refs--;r.push(o)}if(e){var l=d(e);c(l,t)}for(var a=0;a<r.length;a++){var o=r[a];if(o.refs===0){for(var u=0;u<o.parts.length;u++)o.parts[u]();delete i[o.id]}}}};function c(e,t){for(var n=0;n<e.length;n++){var r=e[n];var a=i[r.id];if(a){a.refs++;for(var s=0;s<a.parts.length;s++){a.parts[s](r.parts[s])}for(;s<r.parts.length;s++){a.parts.push(_(r.parts[s],t))}}else{var o=[];for(var s=0;s<r.parts.length;s++){o.push(_(r.parts[s],t))}i[r.id]={id:r.id,refs:1,parts:o}}}}function d(e){var t=[];var n={};for(var i=0;i<e.length;i++){var r=e[i];var a=r[0];var s=r[1];var o=r[2];var l=r[3];var u={css:s,media:o,sourceMap:l};if(!n[a])t.push(n[a]={id:a,parts:[u]});else n[a].parts.push(u)}return t}function f(e,t){var n=s();var i=u[u.length-1];if(e.insertAt==="top"){if(!i){n.insertBefore(t,n.firstChild)}else if(i.nextSibling){n.insertBefore(t,i.nextSibling)}else{n.appendChild(t)}u.push(t)}else if(e.insertAt==="bottom"){n.appendChild(t)}else{throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.")}}function h(e){e.parentNode.removeChild(e);var t=u.indexOf(e);if(t>=0){u.splice(t,1)}}function p(e){var t=document.createElement("style");t.type="text/css";f(e,t);return t}function m(e){var t=document.createElement("link");t.rel="stylesheet";f(e,t);return t}function _(e,t){var n,i,r;if(t.singleton){var a=l++;n=o||(o=p(t));i=v.bind(null,n,a,false);r=v.bind(null,n,a,true)}else if(e.sourceMap&&typeof URL==="function"&&typeof URL.createObjectURL==="function"&&typeof URL.revokeObjectURL==="function"&&typeof Blob==="function"&&typeof btoa==="function"){n=m(t);i=b.bind(null,n);r=function(){h(n);if(n.href)URL.revokeObjectURL(n.href)}}else{n=p(t);i=y.bind(null,n);r=function(){h(n)}}i(e);return function s(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else{r()}}}var g=function(){var e=[];return function(t,n){e[t]=n;return e.filter(Boolean).join("\n")}}();function v(e,t,n,i){var r=n?"":i.css;if(e.styleSheet){e.styleSheet.cssText=g(t,r)}else{var a=document.createTextNode(r);var s=e.childNodes;if(s[t])e.removeChild(s[t]);if(s.length){e.insertBefore(a,s[t])}else{e.appendChild(a)}}}function y(e,t){var n=t.css;var i=t.media;var r=t.sourceMap;if(i){e.setAttribute("media",i)}if(e.styleSheet){e.styleSheet.cssText=n}else{while(e.firstChild){e.removeChild(e.firstChild)}e.appendChild(document.createTextNode(n))}}function b(e,t){var n=t.css;var i=t.media;var r=t.sourceMap;if(r){n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"}var a=new Blob([n],{type:"text/css"});var s=e.href;e.href=URL.createObjectURL(a);if(s)URL.revokeObjectURL(s)}},function(e,t,n){n(55)(n(185))},function(e,t){e.exports="//     Backbone.js 1.2.3\n\n//     (c) 2010-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n(function(factory) {\n\n  // Establish the root object, `window` (`self`) in the browser, or `global` on the server.\n  // We use `self` instead of `window` for `WebWorker` support.\n  var root = (typeof self == 'object' && self.self == self && self) ||\n            (typeof global == 'object' && global.global == global && global);\n\n  // Set up Backbone appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Backbone.\n      root.Backbone = factory(root, exports, _, $);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var _ = require('underscore'), $;\n    try { $ = require('jquery'); } catch(e) {}\n    factory(root, exports, _, $);\n\n  // Finally, as a browser global.\n  } else {\n    root.Backbone = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));\n  }\n\n}(function(root, Backbone, _, $) {\n\n  // Initial Setup\n  // -------------\n\n  // Save the previous value of the `Backbone` variable, so that it can be\n  // restored later on, if `noConflict` is used.\n  var previousBackbone = root.Backbone;\n\n  // Create a local reference to a common array method we'll want to use later.\n  var slice = Array.prototype.slice;\n\n  // Current version of the library. Keep in sync with `package.json`.\n  Backbone.VERSION = '1.2.3';\n\n  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\n  // the `$` variable.\n  Backbone.$ = $;\n\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\n  // to its previous owner. Returns a reference to this Backbone object.\n  Backbone.noConflict = function() {\n    root.Backbone = previousBackbone;\n    return this;\n  };\n\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n  // will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n  // set a `X-Http-Method-Override` header.\n  Backbone.emulateHTTP = false;\n\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\n  // `application/json` requests ... this will encode the body as\n  // `application/x-www-form-urlencoded` instead and will send the model in a\n  // form param named `model`.\n  Backbone.emulateJSON = false;\n\n  // Proxy Backbone class methods to Underscore functions, wrapping the model's\n  // `attributes` object or collection's `models` array behind the scenes.\n  //\n  // collection.filter(function(model) { return model.get('age') > 10 });\n  // collection.each(this.addView);\n  //\n  // `Function#apply` can be slow so we use the method's arg count, if we know it.\n  var addMethod = function(length, method, attribute) {\n    switch (length) {\n      case 1: return function() {\n        return _[method](this[attribute]);\n      };\n      case 2: return function(value) {\n        return _[method](this[attribute], value);\n      };\n      case 3: return function(iteratee, context) {\n        return _[method](this[attribute], cb(iteratee, this), context);\n      };\n      case 4: return function(iteratee, defaultVal, context) {\n        return _[method](this[attribute], cb(iteratee, this), defaultVal, context);\n      };\n      default: return function() {\n        var args = slice.call(arguments);\n        args.unshift(this[attribute]);\n        return _[method].apply(_, args);\n      };\n    }\n  };\n  var addUnderscoreMethods = function(Class, methods, attribute) {\n    _.each(methods, function(length, method) {\n      if (_[method]) Class.prototype[method] = addMethod(length, method, attribute);\n    });\n  };\n\n  // Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.\n  var cb = function(iteratee, instance) {\n    if (_.isFunction(iteratee)) return iteratee;\n    if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);\n    if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };\n    return iteratee;\n  };\n  var modelMatcher = function(attrs) {\n    var matcher = _.matches(attrs);\n    return function(model) {\n      return matcher(model.attributes);\n    };\n  };\n\n  // Backbone.Events\n  // ---------------\n\n  // A module that can be mixed in to *any object* in order to provide it with\n  // a custom event channel. You may bind a callback to an event with `on` or\n  // remove with `off`; `trigger`-ing an event fires all callbacks in\n  // succession.\n  //\n  //     var object = {};\n  //     _.extend(object, Backbone.Events);\n  //     object.on('expand', function(){ alert('expanded'); });\n  //     object.trigger('expand');\n  //\n  var Events = Backbone.Events = {};\n\n  // Regular expression used to split event strings.\n  var eventSplitter = /\\s+/;\n\n  // Iterates over the standard `event, callback` (as well as the fancy multiple\n  // space-separated events `\"change blur\", callback` and jQuery-style event\n  // maps `{event: callback}`).\n  var eventsApi = function(iteratee, events, name, callback, opts) {\n    var i = 0, names;\n    if (name && typeof name === 'object') {\n      // Handle event maps.\n      if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;\n      for (names = _.keys(name); i < names.length ; i++) {\n        events = eventsApi(iteratee, events, names[i], name[names[i]], opts);\n      }\n    } else if (name && eventSplitter.test(name)) {\n      // Handle space separated event names by delegating them individually.\n      for (names = name.split(eventSplitter); i < names.length; i++) {\n        events = iteratee(events, names[i], callback, opts);\n      }\n    } else {\n      // Finally, standard events.\n      events = iteratee(events, name, callback, opts);\n    }\n    return events;\n  };\n\n  // Bind an event to a `callback` function. Passing `\"all\"` will bind\n  // the callback to all events fired.\n  Events.on = function(name, callback, context) {\n    return internalOn(this, name, callback, context);\n  };\n\n  // Guard the `listening` argument from the public API.\n  var internalOn = function(obj, name, callback, context, listening) {\n    obj._events = eventsApi(onApi, obj._events || {}, name, callback, {\n        context: context,\n        ctx: obj,\n        listening: listening\n    });\n\n    if (listening) {\n      var listeners = obj._listeners || (obj._listeners = {});\n      listeners[listening.id] = listening;\n    }\n\n    return obj;\n  };\n\n  // Inversion-of-control versions of `on`. Tell *this* object to listen to\n  // an event in another object... keeping track of what it's listening to\n  // for easier unbinding later.\n  Events.listenTo =  function(obj, name, callback) {\n    if (!obj) return this;\n    var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\n    var listeningTo = this._listeningTo || (this._listeningTo = {});\n    var listening = listeningTo[id];\n\n    // This object is not listening to any other events on `obj` yet.\n    // Setup the necessary references to track the listening callbacks.\n    if (!listening) {\n      var thisId = this._listenId || (this._listenId = _.uniqueId('l'));\n      listening = listeningTo[id] = {obj: obj, objId: id, id: thisId, listeningTo: listeningTo, count: 0};\n    }\n\n    // Bind callbacks on obj, and keep track of them on listening.\n    internalOn(obj, name, callback, this, listening);\n    return this;\n  };\n\n  // The reducing API that adds a callback to the `events` object.\n  var onApi = function(events, name, callback, options) {\n    if (callback) {\n      var handlers = events[name] || (events[name] = []);\n      var context = options.context, ctx = options.ctx, listening = options.listening;\n      if (listening) listening.count++;\n\n      handlers.push({ callback: callback, context: context, ctx: context || ctx, listening: listening });\n    }\n    return events;\n  };\n\n  // Remove one or many callbacks. If `context` is null, removes all\n  // callbacks with that function. If `callback` is null, removes all\n  // callbacks for the event. If `name` is null, removes all bound\n  // callbacks for all events.\n  Events.off =  function(name, callback, context) {\n    if (!this._events) return this;\n    this._events = eventsApi(offApi, this._events, name, callback, {\n        context: context,\n        listeners: this._listeners\n    });\n    return this;\n  };\n\n  // Tell this object to stop listening to either specific events ... or\n  // to every object it's currently listening to.\n  Events.stopListening =  function(obj, name, callback) {\n    var listeningTo = this._listeningTo;\n    if (!listeningTo) return this;\n\n    var ids = obj ? [obj._listenId] : _.keys(listeningTo);\n\n    for (var i = 0; i < ids.length; i++) {\n      var listening = listeningTo[ids[i]];\n\n      // If listening doesn't exist, this object is not currently\n      // listening to obj. Break out early.\n      if (!listening) break;\n\n      listening.obj.off(name, callback, this);\n    }\n    if (_.isEmpty(listeningTo)) this._listeningTo = void 0;\n\n    return this;\n  };\n\n  // The reducing API that removes a callback from the `events` object.\n  var offApi = function(events, name, callback, options) {\n    if (!events) return;\n\n    var i = 0, listening;\n    var context = options.context, listeners = options.listeners;\n\n    // Delete all events listeners and \"drop\" events.\n    if (!name && !callback && !context) {\n      var ids = _.keys(listeners);\n      for (; i < ids.length; i++) {\n        listening = listeners[ids[i]];\n        delete listeners[listening.id];\n        delete listening.listeningTo[listening.objId];\n      }\n      return;\n    }\n\n    var names = name ? [name] : _.keys(events);\n    for (; i < names.length; i++) {\n      name = names[i];\n      var handlers = events[name];\n\n      // Bail out if there are no events stored.\n      if (!handlers) break;\n\n      // Replace events if there are any remaining.  Otherwise, clean up.\n      var remaining = [];\n      for (var j = 0; j < handlers.length; j++) {\n        var handler = handlers[j];\n        if (\n          callback && callback !== handler.callback &&\n            callback !== handler.callback._callback ||\n              context && context !== handler.context\n        ) {\n          remaining.push(handler);\n        } else {\n          listening = handler.listening;\n          if (listening && --listening.count === 0) {\n            delete listeners[listening.id];\n            delete listening.listeningTo[listening.objId];\n          }\n        }\n      }\n\n      // Update tail event if the list has any events.  Otherwise, clean up.\n      if (remaining.length) {\n        events[name] = remaining;\n      } else {\n        delete events[name];\n      }\n    }\n    if (_.size(events)) return events;\n  };\n\n  // Bind an event to only be triggered a single time. After the first time\n  // the callback is invoked, its listener will be removed. If multiple events\n  // are passed in using the space-separated syntax, the handler will fire\n  // once for each event, not once for a combination of all events.\n  Events.once =  function(name, callback, context) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.off, this));\n    return this.on(events, void 0, context);\n  };\n\n  // Inversion-of-control versions of `once`.\n  Events.listenToOnce =  function(obj, name, callback) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.stopListening, this, obj));\n    return this.listenTo(obj, events);\n  };\n\n  // Reduces the event callbacks into a map of `{event: onceWrapper}`.\n  // `offer` unbinds the `onceWrapper` after it has been called.\n  var onceMap = function(map, name, callback, offer) {\n    if (callback) {\n      var once = map[name] = _.once(function() {\n        offer(name, once);\n        callback.apply(this, arguments);\n      });\n      once._callback = callback;\n    }\n    return map;\n  };\n\n  // Trigger one or many events, firing all bound callbacks. Callbacks are\n  // passed the same arguments as `trigger` is, apart from the event name\n  // (unless you're listening on `\"all\"`, which will cause your callback to\n  // receive the true name of the event as the first argument).\n  Events.trigger =  function(name) {\n    if (!this._events) return this;\n\n    var length = Math.max(0, arguments.length - 1);\n    var args = Array(length);\n    for (var i = 0; i < length; i++) args[i] = arguments[i + 1];\n\n    eventsApi(triggerApi, this._events, name, void 0, args);\n    return this;\n  };\n\n  // Handles triggering the appropriate event callbacks.\n  var triggerApi = function(objEvents, name, cb, args) {\n    if (objEvents) {\n      var events = objEvents[name];\n      var allEvents = objEvents.all;\n      if (events && allEvents) allEvents = allEvents.slice();\n      if (events) triggerEvents(events, args);\n      if (allEvents) triggerEvents(allEvents, [name].concat(args));\n    }\n    return objEvents;\n  };\n\n  // A difficult-to-believe, but optimized internal dispatch function for\n  // triggering events. Tries to keep the usual cases speedy (most internal\n  // Backbone events have 3 arguments).\n  var triggerEvents = function(events, args) {\n    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\n    switch (args.length) {\n      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\n      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\n      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\n      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\n      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\n    }\n  };\n\n  // Aliases for backwards compatibility.\n  Events.bind   = Events.on;\n  Events.unbind = Events.off;\n\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\n  // want global \"pubsub\" in a convenient place.\n  _.extend(Backbone, Events);\n\n  // Backbone.Model\n  // --------------\n\n  // Backbone **Models** are the basic data object in the framework --\n  // frequently representing a row in a table in a database on your server.\n  // A discrete chunk of data and a bunch of useful, related methods for\n  // performing computations and transformations on that data.\n\n  // Create a new model with the specified attributes. A client id (`cid`)\n  // is automatically generated and assigned for you.\n  var Model = Backbone.Model = function(attributes, options) {\n    var attrs = attributes || {};\n    options || (options = {});\n    this.cid = _.uniqueId(this.cidPrefix);\n    this.attributes = {};\n    if (options.collection) this.collection = options.collection;\n    if (options.parse) attrs = this.parse(attrs, options) || {};\n    attrs = _.defaults({}, attrs, _.result(this, 'defaults'));\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.apply(this, arguments);\n  };\n\n  // Attach all inheritable methods to the Model prototype.\n  _.extend(Model.prototype, Events, {\n\n    // A hash of attributes whose current and previous value differ.\n    changed: null,\n\n    // The value returned during the last failed validation.\n    validationError: null,\n\n    // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n    // CouchDB users may want to set this to `\"_id\"`.\n    idAttribute: 'id',\n\n    // The prefix is used to create the client id which is used to identify models locally.\n    // You may want to override this if you're experiencing name clashes with model ids.\n    cidPrefix: 'c',\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Return a copy of the model's `attributes` object.\n    toJSON: function(options) {\n      return _.clone(this.attributes);\n    },\n\n    // Proxy `Backbone.sync` by default -- but override this if you need\n    // custom syncing semantics for *this* particular model.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Get the value of an attribute.\n    get: function(attr) {\n      return this.attributes[attr];\n    },\n\n    // Get the HTML-escaped value of an attribute.\n    escape: function(attr) {\n      return _.escape(this.get(attr));\n    },\n\n    // Returns `true` if the attribute contains a value that is not null\n    // or undefined.\n    has: function(attr) {\n      return this.get(attr) != null;\n    },\n\n    // Special-cased proxy to underscore's `_.matches` method.\n    matches: function(attrs) {\n      return !!_.iteratee(attrs, this)(this.attributes);\n    },\n\n    // Set a hash of model attributes on the object, firing `\"change\"`. This is\n    // the core primitive operation of a model, updating the data and notifying\n    // anyone who needs to know about the change in state. The heart of the beast.\n    set: function(key, val, options) {\n      if (key == null) return this;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options || (options = {});\n\n      // Run validation.\n      if (!this._validate(attrs, options)) return false;\n\n      // Extract attributes and options.\n      var unset      = options.unset;\n      var silent     = options.silent;\n      var changes    = [];\n      var changing   = this._changing;\n      this._changing = true;\n\n      if (!changing) {\n        this._previousAttributes = _.clone(this.attributes);\n        this.changed = {};\n      }\n\n      var current = this.attributes;\n      var changed = this.changed;\n      var prev    = this._previousAttributes;\n\n      // For each `set` attribute, update or delete the current value.\n      for (var attr in attrs) {\n        val = attrs[attr];\n        if (!_.isEqual(current[attr], val)) changes.push(attr);\n        if (!_.isEqual(prev[attr], val)) {\n          changed[attr] = val;\n        } else {\n          delete changed[attr];\n        }\n        unset ? delete current[attr] : current[attr] = val;\n      }\n\n      // Update the `id`.\n      this.id = this.get(this.idAttribute);\n\n      // Trigger all relevant attribute changes.\n      if (!silent) {\n        if (changes.length) this._pending = options;\n        for (var i = 0; i < changes.length; i++) {\n          this.trigger('change:' + changes[i], this, current[changes[i]], options);\n        }\n      }\n\n      // You might be wondering why there's a `while` loop here. Changes can\n      // be recursively nested within `\"change\"` events.\n      if (changing) return this;\n      if (!silent) {\n        while (this._pending) {\n          options = this._pending;\n          this._pending = false;\n          this.trigger('change', this, options);\n        }\n      }\n      this._pending = false;\n      this._changing = false;\n      return this;\n    },\n\n    // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\n    // if the attribute doesn't exist.\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    // Clear all attributes on the model, firing `\"change\"`.\n    clear: function(options) {\n      var attrs = {};\n      for (var key in this.attributes) attrs[key] = void 0;\n      return this.set(attrs, _.extend({}, options, {unset: true}));\n    },\n\n    // Determine if the model has changed since the last `\"change\"` event.\n    // If you specify an attribute name, determine if that attribute has changed.\n    hasChanged: function(attr) {\n      if (attr == null) return !_.isEmpty(this.changed);\n      return _.has(this.changed, attr);\n    },\n\n    // Return an object containing all the attributes that have changed, or\n    // false if there are no changed attributes. Useful for determining what\n    // parts of a view need to be updated and/or what attributes need to be\n    // persisted to the server. Unset attributes will be set to undefined.\n    // You can also pass an attributes object to diff against the model,\n    // determining if there *would be* a change.\n    changedAttributes: function(diff) {\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n      var old = this._changing ? this._previousAttributes : this.attributes;\n      var changed = {};\n      for (var attr in diff) {\n        var val = diff[attr];\n        if (_.isEqual(old[attr], val)) continue;\n        changed[attr] = val;\n      }\n      return _.size(changed) ? changed : false;\n    },\n\n    // Get the previous value of an attribute, recorded at the time the last\n    // `\"change\"` event was fired.\n    previous: function(attr) {\n      if (attr == null || !this._previousAttributes) return null;\n      return this._previousAttributes[attr];\n    },\n\n    // Get all of the attributes of the model at the time of the previous\n    // `\"change\"` event.\n    previousAttributes: function() {\n      return _.clone(this._previousAttributes);\n    },\n\n    // Fetch the model from the server, merging the response with the model's\n    // local attributes. Any changed attributes will trigger a \"change\" event.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (!model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Set a hash of model attributes, and sync the model to the server.\n    // If the server returns an attributes hash that differs, the model's\n    // state will be `set` again.\n    save: function(key, val, options) {\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (key == null || typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options = _.extend({validate: true, parse: true}, options);\n      var wait = options.wait;\n\n      // If we're not waiting and attributes exist, save acts as\n      // `set(attr).save(null, opts)` with validation. Otherwise, check if\n      // the model will be valid when the attributes, if any, are set.\n      if (attrs && !wait) {\n        if (!this.set(attrs, options)) return false;\n      } else {\n        if (!this._validate(attrs, options)) return false;\n      }\n\n      // After a successful server-side save, the client is (optionally)\n      // updated with the server-side state.\n      var model = this;\n      var success = options.success;\n      var attributes = this.attributes;\n      options.success = function(resp) {\n        // Ensure attributes are restored during synchronous saves.\n        model.attributes = attributes;\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);\n        if (serverAttrs && !model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n\n      // Set temporary attributes if `{wait: true}` to properly find new ids.\n      if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);\n\n      var method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');\n      if (method === 'patch' && !options.attrs) options.attrs = attrs;\n      var xhr = this.sync(method, this, options);\n\n      // Restore attributes.\n      this.attributes = attributes;\n\n      return xhr;\n    },\n\n    // Destroy this model on the server if it was already persisted.\n    // Optimistically removes the model from its collection, if it has one.\n    // If `wait: true` is passed, waits for the server to respond before removal.\n    destroy: function(options) {\n      options = options ? _.clone(options) : {};\n      var model = this;\n      var success = options.success;\n      var wait = options.wait;\n\n      var destroy = function() {\n        model.stopListening();\n        model.trigger('destroy', model, model.collection, options);\n      };\n\n      options.success = function(resp) {\n        if (wait) destroy();\n        if (success) success.call(options.context, model, resp, options);\n        if (!model.isNew()) model.trigger('sync', model, resp, options);\n      };\n\n      var xhr = false;\n      if (this.isNew()) {\n        _.defer(options.success);\n      } else {\n        wrapError(this, options);\n        xhr = this.sync('delete', this, options);\n      }\n      if (!wait) destroy();\n      return xhr;\n    },\n\n    // Default URL for the model's representation on the server -- if you're\n    // using Backbone's restful methods, override this to change the endpoint\n    // that will be called.\n    url: function() {\n      var base =\n        _.result(this, 'urlRoot') ||\n        _.result(this.collection, 'url') ||\n        urlError();\n      if (this.isNew()) return base;\n      var id = this.get(this.idAttribute);\n      return base.replace(/[^\\/]$/, '$&/') + encodeURIComponent(id);\n    },\n\n    // **parse** converts a response into the hash of attributes to be `set` on\n    // the model. The default implementation is just to pass the response along.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new model with identical attributes to this one.\n    clone: function() {\n      return new this.constructor(this.attributes);\n    },\n\n    // A model is new if it has never been saved to the server, and lacks an id.\n    isNew: function() {\n      return !this.has(this.idAttribute);\n    },\n\n    // Check if the model is currently in a valid state.\n    isValid: function(options) {\n      return this._validate({}, _.defaults({validate: true}, options));\n    },\n\n    // Run validation against the next complete set of model attributes,\n    // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\n    _validate: function(attrs, options) {\n      if (!options.validate || !this.validate) return true;\n      attrs = _.extend({}, this.attributes, attrs);\n      var error = this.validationError = this.validate(attrs, options) || null;\n      if (!error) return true;\n      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\n      return false;\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Model, mapped to the\n  // number of arguments they take.\n  var modelMethods = { keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,\n      omit: 0, chain: 1, isEmpty: 1 };\n\n  // Mix in each Underscore method as a proxy to `Model#attributes`.\n  addUnderscoreMethods(Model, modelMethods, 'attributes');\n\n  // Backbone.Collection\n  // -------------------\n\n  // If models tend to represent a single row of data, a Backbone Collection is\n  // more analogous to a table full of data ... or a small slice or page of that\n  // table, or a collection of rows that belong together for a particular reason\n  // -- all of the messages in this particular folder, all of the documents\n  // belonging to this particular author, and so on. Collections maintain\n  // indexes of their models, both in order, and for lookup by `id`.\n\n  // Create a new **Collection**, perhaps to contain a specific type of `model`.\n  // If a `comparator` is specified, the Collection will maintain\n  // its models in sort order, as they're added and removed.\n  var Collection = Backbone.Collection = function(models, options) {\n    options || (options = {});\n    if (options.model) this.model = options.model;\n    if (options.comparator !== void 0) this.comparator = options.comparator;\n    this._reset();\n    this.initialize.apply(this, arguments);\n    if (models) this.reset(models, _.extend({silent: true}, options));\n  };\n\n  // Default options for `Collection#set`.\n  var setOptions = {add: true, remove: true, merge: true};\n  var addOptions = {add: true, remove: false};\n\n  // Splices `insert` into `array` at index `at`.\n  var splice = function(array, insert, at) {\n    at = Math.min(Math.max(at, 0), array.length);\n    var tail = Array(array.length - at);\n    var length = insert.length;\n    for (var i = 0; i < tail.length; i++) tail[i] = array[i + at];\n    for (i = 0; i < length; i++) array[i + at] = insert[i];\n    for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];\n  };\n\n  // Define the Collection's inheritable methods.\n  _.extend(Collection.prototype, Events, {\n\n    // The default model for a collection is just a **Backbone.Model**.\n    // This should be overridden in most cases.\n    model: Model,\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // The JSON representation of a Collection is an array of the\n    // models' attributes.\n    toJSON: function(options) {\n      return this.map(function(model) { return model.toJSON(options); });\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Add a model, or list of models to the set. `models` may be Backbone\n    // Models or raw JavaScript objects to be converted to Models, or any\n    // combination of the two.\n    add: function(models, options) {\n      return this.set(models, _.extend({merge: false}, options, addOptions));\n    },\n\n    // Remove a model, or a list of models from the set.\n    remove: function(models, options) {\n      options = _.extend({}, options);\n      var singular = !_.isArray(models);\n      models = singular ? [models] : _.clone(models);\n      var removed = this._removeModels(models, options);\n      if (!options.silent && removed) this.trigger('update', this, options);\n      return singular ? removed[0] : removed;\n    },\n\n    // Update a collection by `set`-ing a new list of models, adding new ones,\n    // removing models that are no longer present, and merging models that\n    // already exist in the collection, as necessary. Similar to **Model#set**,\n    // the core operation for updating the data contained by the collection.\n    set: function(models, options) {\n      if (models == null) return;\n\n      options = _.defaults({}, options, setOptions);\n      if (options.parse && !this._isModel(models)) models = this.parse(models, options);\n\n      var singular = !_.isArray(models);\n      models = singular ? [models] : models.slice();\n\n      var at = options.at;\n      if (at != null) at = +at;\n      if (at < 0) at += this.length + 1;\n\n      var set = [];\n      var toAdd = [];\n      var toRemove = [];\n      var modelMap = {};\n\n      var add = options.add;\n      var merge = options.merge;\n      var remove = options.remove;\n\n      var sort = false;\n      var sortable = this.comparator && (at == null) && options.sort !== false;\n      var sortAttr = _.isString(this.comparator) ? this.comparator : null;\n\n      // Turn bare objects into model references, and prevent invalid models\n      // from being added.\n      var model;\n      for (var i = 0; i < models.length; i++) {\n        model = models[i];\n\n        // If a duplicate is found, prevent it from being added and\n        // optionally merge it into the existing model.\n        var existing = this.get(model);\n        if (existing) {\n          if (merge && model !== existing) {\n            var attrs = this._isModel(model) ? model.attributes : model;\n            if (options.parse) attrs = existing.parse(attrs, options);\n            existing.set(attrs, options);\n            if (sortable && !sort) sort = existing.hasChanged(sortAttr);\n          }\n          if (!modelMap[existing.cid]) {\n            modelMap[existing.cid] = true;\n            set.push(existing);\n          }\n          models[i] = existing;\n\n        // If this is a new, valid model, push it to the `toAdd` list.\n        } else if (add) {\n          model = models[i] = this._prepareModel(model, options);\n          if (model) {\n            toAdd.push(model);\n            this._addReference(model, options);\n            modelMap[model.cid] = true;\n            set.push(model);\n          }\n        }\n      }\n\n      // Remove stale models.\n      if (remove) {\n        for (i = 0; i < this.length; i++) {\n          model = this.models[i];\n          if (!modelMap[model.cid]) toRemove.push(model);\n        }\n        if (toRemove.length) this._removeModels(toRemove, options);\n      }\n\n      // See if sorting is needed, update `length` and splice in new models.\n      var orderChanged = false;\n      var replace = !sortable && add && remove;\n      if (set.length && replace) {\n        orderChanged = this.length != set.length || _.some(this.models, function(model, index) {\n          return model !== set[index];\n        });\n        this.models.length = 0;\n        splice(this.models, set, 0);\n        this.length = this.models.length;\n      } else if (toAdd.length) {\n        if (sortable) sort = true;\n        splice(this.models, toAdd, at == null ? this.length : at);\n        this.length = this.models.length;\n      }\n\n      // Silently sort the collection if appropriate.\n      if (sort) this.sort({silent: true});\n\n      // Unless silenced, it's time to fire all appropriate add/sort events.\n      if (!options.silent) {\n        for (i = 0; i < toAdd.length; i++) {\n          if (at != null) options.index = at + i;\n          model = toAdd[i];\n          model.trigger('add', model, this, options);\n        }\n        if (sort || orderChanged) this.trigger('sort', this, options);\n        if (toAdd.length || toRemove.length) this.trigger('update', this, options);\n      }\n\n      // Return the added (or merged) model (or models).\n      return singular ? models[0] : models;\n    },\n\n    // When you have more items than you want to add or remove individually,\n    // you can reset the entire set with a new list of models, without firing\n    // any granular `add` or `remove` events. Fires `reset` when finished.\n    // Useful for bulk operations and optimizations.\n    reset: function(models, options) {\n      options = options ? _.clone(options) : {};\n      for (var i = 0; i < this.models.length; i++) {\n        this._removeReference(this.models[i], options);\n      }\n      options.previousModels = this.models;\n      this._reset();\n      models = this.add(models, _.extend({silent: true}, options));\n      if (!options.silent) this.trigger('reset', this, options);\n      return models;\n    },\n\n    // Add a model to the end of the collection.\n    push: function(model, options) {\n      return this.add(model, _.extend({at: this.length}, options));\n    },\n\n    // Remove a model from the end of the collection.\n    pop: function(options) {\n      var model = this.at(this.length - 1);\n      return this.remove(model, options);\n    },\n\n    // Add a model to the beginning of the collection.\n    unshift: function(model, options) {\n      return this.add(model, _.extend({at: 0}, options));\n    },\n\n    // Remove a model from the beginning of the collection.\n    shift: function(options) {\n      var model = this.at(0);\n      return this.remove(model, options);\n    },\n\n    // Slice out a sub-array of models from the collection.\n    slice: function() {\n      return slice.apply(this.models, arguments);\n    },\n\n    // Get a model from the set by id.\n    get: function(obj) {\n      if (obj == null) return void 0;\n      var id = this.modelId(this._isModel(obj) ? obj.attributes : obj);\n      return this._byId[obj] || this._byId[id] || this._byId[obj.cid];\n    },\n\n    // Get the model at the given index.\n    at: function(index) {\n      if (index < 0) index += this.length;\n      return this.models[index];\n    },\n\n    // Return models with matching attributes. Useful for simple cases of\n    // `filter`.\n    where: function(attrs, first) {\n      return this[first ? 'find' : 'filter'](attrs);\n    },\n\n    // Return the first model with matching attributes. Useful for simple cases\n    // of `find`.\n    findWhere: function(attrs) {\n      return this.where(attrs, true);\n    },\n\n    // Force the collection to re-sort itself. You don't need to call this under\n    // normal circumstances, as the set will maintain sort order as each item\n    // is added.\n    sort: function(options) {\n      var comparator = this.comparator;\n      if (!comparator) throw new Error('Cannot sort a set without a comparator');\n      options || (options = {});\n\n      var length = comparator.length;\n      if (_.isFunction(comparator)) comparator = _.bind(comparator, this);\n\n      // Run sort based on type of `comparator`.\n      if (length === 1 || _.isString(comparator)) {\n        this.models = this.sortBy(comparator);\n      } else {\n        this.models.sort(comparator);\n      }\n      if (!options.silent) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // Pluck an attribute from each model in the collection.\n    pluck: function(attr) {\n      return _.invoke(this.models, 'get', attr);\n    },\n\n    // Fetch the default set of models for this collection, resetting the\n    // collection when they arrive. If `reset: true` is passed, the response\n    // data will be passed through the `reset` method instead of `set`.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var success = options.success;\n      var collection = this;\n      options.success = function(resp) {\n        var method = options.reset ? 'reset' : 'set';\n        collection[method](resp, options);\n        if (success) success.call(options.context, collection, resp, options);\n        collection.trigger('sync', collection, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Create a new instance of a model in this collection. Add the model to the\n    // collection immediately, unless `wait: true` is passed, in which case we\n    // wait for the server to agree.\n    create: function(model, options) {\n      options = options ? _.clone(options) : {};\n      var wait = options.wait;\n      model = this._prepareModel(model, options);\n      if (!model) return false;\n      if (!wait) this.add(model, options);\n      var collection = this;\n      var success = options.success;\n      options.success = function(model, resp, callbackOpts) {\n        if (wait) collection.add(model, callbackOpts);\n        if (success) success.call(callbackOpts.context, model, resp, callbackOpts);\n      };\n      model.save(null, options);\n      return model;\n    },\n\n    // **parse** converts a response into a list of models to be added to the\n    // collection. The default implementation is just to pass it through.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new collection with an identical list of models as this one.\n    clone: function() {\n      return new this.constructor(this.models, {\n        model: this.model,\n        comparator: this.comparator\n      });\n    },\n\n    // Define how to uniquely identify models in the collection.\n    modelId: function (attrs) {\n      return attrs[this.model.prototype.idAttribute || 'id'];\n    },\n\n    // Private method to reset all internal state. Called when the collection\n    // is first initialized or reset.\n    _reset: function() {\n      this.length = 0;\n      this.models = [];\n      this._byId  = {};\n    },\n\n    // Prepare a hash of attributes (or other model) to be added to this\n    // collection.\n    _prepareModel: function(attrs, options) {\n      if (this._isModel(attrs)) {\n        if (!attrs.collection) attrs.collection = this;\n        return attrs;\n      }\n      options = options ? _.clone(options) : {};\n      options.collection = this;\n      var model = new this.model(attrs, options);\n      if (!model.validationError) return model;\n      this.trigger('invalid', this, model.validationError, options);\n      return false;\n    },\n\n    // Internal method called by both remove and set.\n    _removeModels: function(models, options) {\n      var removed = [];\n      for (var i = 0; i < models.length; i++) {\n        var model = this.get(models[i]);\n        if (!model) continue;\n\n        var index = this.indexOf(model);\n        this.models.splice(index, 1);\n        this.length--;\n\n        if (!options.silent) {\n          options.index = index;\n          model.trigger('remove', model, this, options);\n        }\n\n        removed.push(model);\n        this._removeReference(model, options);\n      }\n      return removed.length ? removed : false;\n    },\n\n    // Method for checking whether an object should be considered a model for\n    // the purposes of adding to the collection.\n    _isModel: function (model) {\n      return model instanceof Model;\n    },\n\n    // Internal method to create a model's ties to a collection.\n    _addReference: function(model, options) {\n      this._byId[model.cid] = model;\n      var id = this.modelId(model.attributes);\n      if (id != null) this._byId[id] = model;\n      model.on('all', this._onModelEvent, this);\n    },\n\n    // Internal method to sever a model's ties to a collection.\n    _removeReference: function(model, options) {\n      delete this._byId[model.cid];\n      var id = this.modelId(model.attributes);\n      if (id != null) delete this._byId[id];\n      if (this === model.collection) delete model.collection;\n      model.off('all', this._onModelEvent, this);\n    },\n\n    // Internal method called every time a model in the set fires an event.\n    // Sets need to update their indexes when models change ids. All other\n    // events simply proxy through. \"add\" and \"remove\" events that originate\n    // in other collections are ignored.\n    _onModelEvent: function(event, model, collection, options) {\n      if (model) {\n        if ((event === 'add' || event === 'remove') && collection !== this) return;\n        if (event === 'destroy') this.remove(model, options);\n        if (event === 'change') {\n          var prevId = this.modelId(model.previousAttributes());\n          var id = this.modelId(model.attributes);\n          if (prevId !== id) {\n            if (prevId != null) delete this._byId[prevId];\n            if (id != null) this._byId[id] = model;\n          }\n        }\n      }\n      this.trigger.apply(this, arguments);\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  var collectionMethods = { forEach: 3, each: 3, map: 3, collect: 3, reduce: 4,\n      foldl: 4, inject: 4, reduceRight: 4, foldr: 4, find: 3, detect: 3, filter: 3,\n      select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,\n      contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,\n      head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,\n      without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,\n      isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,\n      sortBy: 3, indexBy: 3};\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n  addUnderscoreMethods(Collection, collectionMethods, 'models');\n\n  // Backbone.View\n  // -------------\n\n  // Backbone Views are almost more convention than they are actual code. A View\n  // is simply a JavaScript object that represents a logical chunk of UI in the\n  // DOM. This might be a single item, an entire list, a sidebar or panel, or\n  // even the surrounding frame which wraps your whole app. Defining a chunk of\n  // UI as a **View** allows you to define your DOM events declaratively, without\n  // having to worry about render order ... and makes it easy for the view to\n  // react to specific changes in the state of your models.\n\n  // Creating a Backbone.View creates its initial element outside of the DOM,\n  // if an existing element is not provided...\n  var View = Backbone.View = function(options) {\n    this.cid = _.uniqueId('view');\n    _.extend(this, _.pick(options, viewOptions));\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be set as properties.\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n  // Set up all inheritable **Backbone.View** properties and methods.\n  _.extend(View.prototype, Events, {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    // jQuery delegate for element lookup, scoped to DOM elements within the\n    // current view. This should be preferred to global lookups where possible.\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // **render** is the core function that your view should override, in order\n    // to populate its element (`this.el`), with the appropriate HTML. The\n    // convention is for **render** to always return `this`.\n    render: function() {\n      return this;\n    },\n\n    // Remove this view by taking the element out of the DOM, and removing any\n    // applicable Backbone.Events listeners.\n    remove: function() {\n      this._removeElement();\n      this.stopListening();\n      return this;\n    },\n\n    // Remove this view's element from the document and all event listeners\n    // attached to it. Exposed for subclasses using an alternative DOM\n    // manipulation API.\n    _removeElement: function() {\n      this.$el.remove();\n    },\n\n    // Change the view's element (`this.el` property) and re-delegate the\n    // view's events on the new element.\n    setElement: function(element) {\n      this.undelegateEvents();\n      this._setElement(element);\n      this.delegateEvents();\n      return this;\n    },\n\n    // Creates the `this.el` and `this.$el` references for this view using the\n    // given `el`. `el` can be a CSS selector or an HTML string, a jQuery\n    // context or an element. Subclasses can override this to utilize an\n    // alternative DOM manipulation API and are only required to set the\n    // `this.el` property.\n    _setElement: function(el) {\n      this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\n      this.el = this.$el[0];\n    },\n\n    // Set callbacks, where `this.events` is a hash of\n    //\n    // *{\"event selector\": \"callback\"}*\n    //\n    //     {\n    //       'mousedown .title':  'edit',\n    //       'click .button':     'save',\n    //       'click .open':       function(e) { ... }\n    //     }\n    //\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\n    // Uses event delegation for efficiency.\n    // Omitting the selector binds the event to `this.el`.\n    delegateEvents: function(events) {\n      events || (events = _.result(this, 'events'));\n      if (!events) return this;\n      this.undelegateEvents();\n      for (var key in events) {\n        var method = events[key];\n        if (!_.isFunction(method)) method = this[method];\n        if (!method) continue;\n        var match = key.match(delegateEventSplitter);\n        this.delegate(match[1], match[2], _.bind(method, this));\n      }\n      return this;\n    },\n\n    // Add a single event listener to the view's element (or a child element\n    // using `selector`). This only works for delegate-able events: not `focus`,\n    // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.\n    delegate: function(eventName, selector, listener) {\n      this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Clears all callbacks previously bound to the view by `delegateEvents`.\n    // You usually don't need to use this, but may wish to if you have multiple\n    // Backbone views attached to the same DOM element.\n    undelegateEvents: function() {\n      if (this.$el) this.$el.off('.delegateEvents' + this.cid);\n      return this;\n    },\n\n    // A finer-grained `undelegateEvents` for removing a single delegated event.\n    // `selector` and `listener` are both optional.\n    undelegate: function(eventName, selector, listener) {\n      this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Produces a DOM element to be assigned to your view. Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _createElement: function(tagName) {\n      return document.createElement(tagName);\n    },\n\n    // Ensure that the View has a DOM element to render into.\n    // If `this.el` is a string, pass it through `$()`, take the first\n    // matching element, and re-assign it to `el`. Otherwise, create\n    // an element from the `id`, `className` and `tagName` properties.\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = _.extend({}, _.result(this, 'attributes'));\n        if (this.id) attrs.id = _.result(this, 'id');\n        if (this.className) attrs['class'] = _.result(this, 'className');\n        this.setElement(this._createElement(_.result(this, 'tagName')));\n        this._setAttributes(attrs);\n      } else {\n        this.setElement(_.result(this, 'el'));\n      }\n    },\n\n    // Set attributes from a hash on this view's element.  Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _setAttributes: function(attributes) {\n      this.$el.attr(attributes);\n    }\n\n  });\n\n  // Backbone.sync\n  // -------------\n\n  // Override this function to change the manner in which Backbone persists\n  // models to the server. You will be passed the type of request, and the\n  // model in question. By default, makes a RESTful Ajax request\n  // to the model's `url()`. Some possible customizations could be:\n  //\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\n  // * Send up the models as XML instead of JSON.\n  // * Persist models via WebSockets instead of Ajax.\n  //\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\n  // instead of `application/json` with the model in a param named `model`.\n  // Useful when interfacing with server-side languages like **PHP** that make\n  // it difficult to read the body of `PUT` requests.\n  Backbone.sync = function(method, model, options) {\n    var type = methodMap[method];\n\n    // Default options, unless specified.\n    _.defaults(options || (options = {}), {\n      emulateHTTP: Backbone.emulateHTTP,\n      emulateJSON: Backbone.emulateJSON\n    });\n\n    // Default JSON-request options.\n    var params = {type: type, dataType: 'json'};\n\n    // Ensure that we have a URL.\n    if (!options.url) {\n      params.url = _.result(model, 'url') || urlError();\n    }\n\n    // Ensure that we have the appropriate request data.\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n      params.contentType = 'application/json';\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\n    }\n\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\n    if (options.emulateJSON) {\n      params.contentType = 'application/x-www-form-urlencoded';\n      params.data = params.data ? {model: params.data} : {};\n    }\n\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n    // And an `X-HTTP-Method-Override` header.\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n      params.type = 'POST';\n      if (options.emulateJSON) params.data._method = type;\n      var beforeSend = options.beforeSend;\n      options.beforeSend = function(xhr) {\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\n        if (beforeSend) return beforeSend.apply(this, arguments);\n      };\n    }\n\n    // Don't process data on a non-GET request.\n    if (params.type !== 'GET' && !options.emulateJSON) {\n      params.processData = false;\n    }\n\n    // Pass along `textStatus` and `errorThrown` from jQuery.\n    var error = options.error;\n    options.error = function(xhr, textStatus, errorThrown) {\n      options.textStatus = textStatus;\n      options.errorThrown = errorThrown;\n      if (error) error.call(options.context, xhr, textStatus, errorThrown);\n    };\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\n    model.trigger('request', model, xhr, options);\n    return xhr;\n  };\n\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n  var methodMap = {\n    'create': 'POST',\n    'update': 'PUT',\n    'patch':  'PATCH',\n    'delete': 'DELETE',\n    'read':   'GET'\n  };\n\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n  // Override this if you'd like to use a different library.\n  Backbone.ajax = function() {\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\n  };\n\n  // Backbone.Router\n  // ---------------\n\n  // Routers map faux-URLs to actions, and fire events when routes are\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\n  var Router = Backbone.Router = function(options) {\n    options || (options = {});\n    if (options.routes) this.routes = options.routes;\n    this._bindRoutes();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regular expressions for matching named param parts and splatted\n  // parts of route strings.\n  var optionalParam = /\\((.*?)\\)/g;\n  var namedParam    = /(\\(\\?)?:\\w+/g;\n  var splatParam    = /\\*\\w+/g;\n  var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n  // Set up all inheritable **Backbone.Router** properties and methods.\n  _.extend(Router.prototype, Events, {\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Manually bind a single named route to a callback. For example:\n    //\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\n    //       ...\n    //     });\n    //\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n      if (_.isFunction(name)) {\n        callback = name;\n        name = '';\n      }\n      if (!callback) callback = this[name];\n      var router = this;\n      Backbone.history.route(route, function(fragment) {\n        var args = router._extractParameters(route, fragment);\n        if (router.execute(callback, args, name) !== false) {\n          router.trigger.apply(router, ['route:' + name].concat(args));\n          router.trigger('route', name, args);\n          Backbone.history.trigger('route', router, name, args);\n        }\n      });\n      return this;\n    },\n\n    // Execute a route handler with the provided parameters.  This is an\n    // excellent place to do pre-route setup or post-route cleanup.\n    execute: function(callback, args, name) {\n      if (callback) callback.apply(this, args);\n    },\n\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\n    navigate: function(fragment, options) {\n      Backbone.history.navigate(fragment, options);\n      return this;\n    },\n\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\n    // order of the routes here to support behavior where the most general\n    // routes can be defined at the bottom of the route map.\n    _bindRoutes: function() {\n      if (!this.routes) return;\n      this.routes = _.result(this, 'routes');\n      var route, routes = _.keys(this.routes);\n      while ((route = routes.pop()) != null) {\n        this.route(route, this.routes[route]);\n      }\n    },\n\n    // Convert a route string into a regular expression, suitable for matching\n    // against the current location hash.\n    _routeToRegExp: function(route) {\n      route = route.replace(escapeRegExp, '\\\\$&')\n                   .replace(optionalParam, '(?:$1)?')\n                   .replace(namedParam, function(match, optional) {\n                     return optional ? match : '([^/?]+)';\n                   })\n                   .replace(splatParam, '([^?]*?)');\n      return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\n    },\n\n    // Given a route, and a URL fragment that it matches, return the array of\n    // extracted decoded parameters. Empty or unmatched parameters will be\n    // treated as `null` to normalize cross-browser behavior.\n    _extractParameters: function(route, fragment) {\n      var params = route.exec(fragment).slice(1);\n      return _.map(params, function(param, i) {\n        // Don't decode the search params.\n        if (i === params.length - 1) return param || null;\n        return param ? decodeURIComponent(param) : null;\n      });\n    }\n\n  });\n\n  // Backbone.History\n  // ----------------\n\n  // Handles cross-browser history management, based on either\n  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\n  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\n  // and URL fragments. If the browser supports neither (old IE, natch),\n  // falls back to polling.\n  var History = Backbone.History = function() {\n    this.handlers = [];\n    this.checkUrl = _.bind(this.checkUrl, this);\n\n    // Ensure that `History` can be used outside of the browser.\n    if (typeof window !== 'undefined') {\n      this.location = window.location;\n      this.history = window.history;\n    }\n  };\n\n  // Cached regex for stripping a leading hash/slash and trailing space.\n  var routeStripper = /^[#\\/]|\\s+$/g;\n\n  // Cached regex for stripping leading and trailing slashes.\n  var rootStripper = /^\\/+|\\/+$/g;\n\n  // Cached regex for stripping urls of hash.\n  var pathStripper = /#.*$/;\n\n  // Has the history handling already been started?\n  History.started = false;\n\n  // Set up all inheritable **Backbone.History** properties and methods.\n  _.extend(History.prototype, Events, {\n\n    // The default interval to poll for hash changes, if necessary, is\n    // twenty times a second.\n    interval: 50,\n\n    // Are we at the app root?\n    atRoot: function() {\n      var path = this.location.pathname.replace(/[^\\/]$/, '$&/');\n      return path === this.root && !this.getSearch();\n    },\n\n    // Does the pathname match the root?\n    matchRoot: function() {\n      var path = this.decodeFragment(this.location.pathname);\n      var root = path.slice(0, this.root.length - 1) + '/';\n      return root === this.root;\n    },\n\n    // Unicode characters in `location.pathname` are percent encoded so they're\n    // decoded for comparison. `%25` should not be decoded since it may be part\n    // of an encoded parameter.\n    decodeFragment: function(fragment) {\n      return decodeURI(fragment.replace(/%25/g, '%2525'));\n    },\n\n    // In IE6, the hash fragment and search params are incorrect if the\n    // fragment contains `?`.\n    getSearch: function() {\n      var match = this.location.href.replace(/#.*/, '').match(/\\?.+/);\n      return match ? match[0] : '';\n    },\n\n    // Gets the true hash value. Cannot use location.hash directly due to bug\n    // in Firefox where location.hash will always be decoded.\n    getHash: function(window) {\n      var match = (window || this).location.href.match(/#(.*)$/);\n      return match ? match[1] : '';\n    },\n\n    // Get the pathname and search params, without the root.\n    getPath: function() {\n      var path = this.decodeFragment(\n        this.location.pathname + this.getSearch()\n      ).slice(this.root.length - 1);\n      return path.charAt(0) === '/' ? path.slice(1) : path;\n    },\n\n    // Get the cross-browser normalized URL fragment from the path or hash.\n    getFragment: function(fragment) {\n      if (fragment == null) {\n        if (this._usePushState || !this._wantsHashChange) {\n          fragment = this.getPath();\n        } else {\n          fragment = this.getHash();\n        }\n      }\n      return fragment.replace(routeStripper, '');\n    },\n\n    // Start the hash change handling, returning `true` if the current URL matches\n    // an existing route, and `false` otherwise.\n    start: function(options) {\n      if (History.started) throw new Error('Backbone.history has already been started');\n      History.started = true;\n\n      // Figure out the initial configuration. Do we need an iframe?\n      // Is pushState desired ... is it available?\n      this.options          = _.extend({root: '/'}, this.options, options);\n      this.root             = this.options.root;\n      this._wantsHashChange = this.options.hashChange !== false;\n      this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);\n      this._useHashChange   = this._wantsHashChange && this._hasHashChange;\n      this._wantsPushState  = !!this.options.pushState;\n      this._hasPushState    = !!(this.history && this.history.pushState);\n      this._usePushState    = this._wantsPushState && this._hasPushState;\n      this.fragment         = this.getFragment();\n\n      // Normalize root to always include a leading and trailing slash.\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n      // Transition from hashChange to pushState or vice versa if both are\n      // requested.\n      if (this._wantsHashChange && this._wantsPushState) {\n\n        // If we've started off with a route from a `pushState`-enabled\n        // browser, but we're currently in a browser that doesn't support it...\n        if (!this._hasPushState && !this.atRoot()) {\n          var root = this.root.slice(0, -1) || '/';\n          this.location.replace(root + '#' + this.getPath());\n          // Return immediately as browser will do redirect to new url\n          return true;\n\n        // Or if we've started out with a hash-based route, but we're currently\n        // in a browser where it could be `pushState`-based instead...\n        } else if (this._hasPushState && this.atRoot()) {\n          this.navigate(this.getHash(), {replace: true});\n        }\n\n      }\n\n      // Proxy an iframe to handle location events if the browser doesn't\n      // support the `hashchange` event, HTML5 history, or the user wants\n      // `hashChange` but not `pushState`.\n      if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {\n        this.iframe = document.createElement('iframe');\n        this.iframe.src = 'javascript:0';\n        this.iframe.style.display = 'none';\n        this.iframe.tabIndex = -1;\n        var body = document.body;\n        // Using `appendChild` will throw on IE < 9 if the document is not ready.\n        var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;\n        iWindow.document.open();\n        iWindow.document.close();\n        iWindow.location.hash = '#' + this.fragment;\n      }\n\n      // Add a cross-platform `addEventListener` shim for older browsers.\n      var addEventListener = window.addEventListener || function (eventName, listener) {\n        return attachEvent('on' + eventName, listener);\n      };\n\n      // Depending on whether we're using pushState or hashes, and whether\n      // 'onhashchange' is supported, determine how we check the URL state.\n      if (this._usePushState) {\n        addEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        addEventListener('hashchange', this.checkUrl, false);\n      } else if (this._wantsHashChange) {\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n      }\n\n      if (!this.options.silent) return this.loadUrl();\n    },\n\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n    // but possibly useful for unit testing Routers.\n    stop: function() {\n      // Add a cross-platform `removeEventListener` shim for older browsers.\n      var removeEventListener = window.removeEventListener || function (eventName, listener) {\n        return detachEvent('on' + eventName, listener);\n      };\n\n      // Remove window listeners.\n      if (this._usePushState) {\n        removeEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        removeEventListener('hashchange', this.checkUrl, false);\n      }\n\n      // Clean up the iframe if necessary.\n      if (this.iframe) {\n        document.body.removeChild(this.iframe);\n        this.iframe = null;\n      }\n\n      // Some environments will throw when clearing an undefined interval.\n      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\n      History.started = false;\n    },\n\n    // Add a route to be tested when the fragment changes. Routes added later\n    // may override previous routes.\n    route: function(route, callback) {\n      this.handlers.unshift({route: route, callback: callback});\n    },\n\n    // Checks the current URL to see if it has changed, and if it has,\n    // calls `loadUrl`, normalizing across the hidden iframe.\n    checkUrl: function(e) {\n      var current = this.getFragment();\n\n      // If the user pressed the back button, the iframe's hash will have\n      // changed and we should use that for comparison.\n      if (current === this.fragment && this.iframe) {\n        current = this.getHash(this.iframe.contentWindow);\n      }\n\n      if (current === this.fragment) return false;\n      if (this.iframe) this.navigate(current);\n      this.loadUrl();\n    },\n\n    // Attempt to load the current URL fragment. If a route succeeds with a\n    // match, returns `true`. If no defined routes matches the fragment,\n    // returns `false`.\n    loadUrl: function(fragment) {\n      // If the root doesn't match, no routes can match either.\n      if (!this.matchRoot()) return false;\n      fragment = this.fragment = this.getFragment(fragment);\n      return _.some(this.handlers, function(handler) {\n        if (handler.route.test(fragment)) {\n          handler.callback(fragment);\n          return true;\n        }\n      });\n    },\n\n    // Save a fragment into the hash history, or replace the URL state if the\n    // 'replace' option is passed. You are responsible for properly URL-encoding\n    // the fragment in advance.\n    //\n    // The options object can contain `trigger: true` if you wish to have the\n    // route callback be fired (not usually desirable), or `replace: true`, if\n    // you wish to modify the current URL without adding an entry to the history.\n    navigate: function(fragment, options) {\n      if (!History.started) return false;\n      if (!options || options === true) options = {trigger: !!options};\n\n      // Normalize the fragment.\n      fragment = this.getFragment(fragment || '');\n\n      // Don't include a trailing slash on the root.\n      var root = this.root;\n      if (fragment === '' || fragment.charAt(0) === '?') {\n        root = root.slice(0, -1) || '/';\n      }\n      var url = root + fragment;\n\n      // Strip the hash and decode for matching.\n      fragment = this.decodeFragment(fragment.replace(pathStripper, ''));\n\n      if (this.fragment === fragment) return;\n      this.fragment = fragment;\n\n      // If pushState is available, we use it to set the fragment as a real URL.\n      if (this._usePushState) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n      // If hash changes haven't been explicitly disabled, update the hash\n      // fragment to store history.\n      } else if (this._wantsHashChange) {\n        this._updateHash(this.location, fragment, options.replace);\n        if (this.iframe && (fragment !== this.getHash(this.iframe.contentWindow))) {\n          var iWindow = this.iframe.contentWindow;\n\n          // Opening and closing the iframe tricks IE7 and earlier to push a\n          // history entry on hash-tag change.  When replace is true, we don't\n          // want this.\n          if (!options.replace) {\n            iWindow.document.open();\n            iWindow.document.close();\n          }\n\n          this._updateHash(iWindow.location, fragment, options.replace);\n        }\n\n      // If you've told us that you explicitly don't want fallback hashchange-\n      // based history, then `navigate` becomes a page refresh.\n      } else {\n        return this.location.assign(url);\n      }\n      if (options.trigger) return this.loadUrl(fragment);\n    },\n\n    // Update the hash location, either replacing the current entry, or adding\n    // a new one to the browser history.\n    _updateHash: function(location, fragment, replace) {\n      if (replace) {\n        var href = location.href.replace(/(javascript:|#).*$/, '');\n        location.replace(href + '#' + fragment);\n      } else {\n        // Some browsers require that `hash` contains a leading #.\n        location.hash = '#' + fragment;\n      }\n    }\n\n  });\n\n  // Create the default Backbone.history.\n  Backbone.history = new History;\n\n  // Helpers\n  // -------\n\n  // Helper function to correctly set up the prototype chain for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var extend = function(protoProps, staticProps) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent constructor.\n    if (protoProps && _.has(protoProps, 'constructor')) {\n      child = protoProps.constructor;\n    } else {\n      child = function(){ return parent.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent` constructor function.\n    var Surrogate = function(){ this.constructor = child; };\n    Surrogate.prototype = parent.prototype;\n    child.prototype = new Surrogate;\n\n    // Add prototype properties (instance properties) to the subclass,\n    // if supplied.\n    if (protoProps) _.extend(child.prototype, protoProps);\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Set up inheritance for the model, collection, router, view and history.\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function() {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n  // Wrap an optional error callback with a fallback error event.\n  var wrapError = function(model, options) {\n    var error = options.error;\n    options.error = function(resp) {\n      if (error) error.call(options.context, model, resp, options);\n      model.trigger('error', model, resp, options);\n    };\n  };\n\n  return Backbone;\n\n}));\n";

},function(e,t){var n=function(){var e=function(){"use strict";var e;function t(e){this.string=e}t.prototype.toString=function(){return""+this.string};e=t;return e}();var t=function(e){"use strict";var t={};var n=e;var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var r=/[&<>"'`]/g;var a=/[&<>"'`]/;function s(e){return i[e]||"&amp;"}function o(e,t){for(var n in t){if(Object.prototype.hasOwnProperty.call(t,n)){e[n]=t[n]}}}t.extend=o;var l=Object.prototype.toString;t.toString=l;var u=function(e){return typeof e==="function"};if(u(/x/)){u=function(e){return typeof e==="function"&&l.call(e)==="[object Function]"}}var u;t.isFunction=u;var c=Array.isArray||function(e){return e&&typeof e==="object"?l.call(e)==="[object Array]":false};t.isArray=c;function d(e){if(e instanceof n){return e.toString()}else if(!e&&e!==0){return""}e=""+e;if(!a.test(e)){return e}return e.replace(r,s)}t.escapeExpression=d;function f(e){if(!e&&e!==0){return true}else if(c(e)&&e.length===0){return true}else{return false}}t.isEmpty=f;return t}(e);var n=function(){"use strict";var e;var t=["description","fileName","lineNumber","message","name","number","stack"];function n(e,n){var i;if(n&&n.firstLine){i=n.firstLine;e+=" - "+i+":"+n.firstColumn}var r=Error.prototype.constructor.call(this,e);for(var a=0;a<t.length;a++){this[t[a]]=r[t[a]]}if(i){this.lineNumber=i;this.column=n.firstColumn}}n.prototype=new Error;e=n;return e}();var i=function(e,t){"use strict";var n={};var i=e;var r=t;var a="1.3.0";n.VERSION=a;var s=4;n.COMPILER_REVISION=s;var o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};n.REVISION_CHANGES=o;var l=i.isArray,u=i.isFunction,c=i.toString,d="[object Object]";function f(e,t){this.helpers=e||{};this.partials=t||{};h(this)}n.HandlebarsEnvironment=f;f.prototype={constructor:f,logger:p,log:m,registerHelper:function(e,t,n){if(c.call(e)===d){if(n||t){throw new r("Arg not supported with multiple helpers")}i.extend(this.helpers,e)}else{if(n){t.not=n}this.helpers[e]=t}},registerPartial:function(e,t){if(c.call(e)===d){i.extend(this.partials,e)}else{this.partials[e]=t}}};function h(e){e.registerHelper("helperMissing",function(e){if(arguments.length===2){return undefined}else{throw new r("Missing helper: '"+e+"'")}});e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse||function(){},r=n.fn;if(u(t)){t=t.call(this)}if(t===true){return r(this)}else if(t===false||t==null){return i(this)}else if(l(t)){if(t.length>0){return e.helpers.each(t,n)}else{return i(this)}}else{return r(t)}});e.registerHelper("each",function(e,t){var n=t.fn,i=t.inverse;var r=0,a="",s;if(u(e)){e=e.call(this)}if(t.data){s=_(t.data)}if(e&&typeof e==="object"){if(l(e)){for(var o=e.length;r<o;r++){if(s){s.index=r;s.first=r===0;s.last=r===e.length-1}a=a+n(e[r],{data:s})}}else{for(var c in e){if(e.hasOwnProperty(c)){if(s){s.key=c;s.index=r;s.first=r===0}a=a+n(e[c],{data:s});r++}}}}if(r===0){a=i(this)}return a});e.registerHelper("if",function(e,t){if(u(e)){e=e.call(this)}if(!t.hash.includeZero&&!e||i.isEmpty(e)){return t.inverse(this)}else{return t.fn(this)}});e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})});e.registerHelper("with",function(e,t){if(u(e)){e=e.call(this)}if(!i.isEmpty(e))return t.fn(e)});e.registerHelper("log",function(t,n){var i=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(i,t)})}var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(p.level<=e){var n=p.methodMap[e];if(typeof console!=="undefined"&&console[n]){console[n].call(console,t)}}}};n.logger=p;function m(e,t){p.log(e,t)}n.log=m;var _=function(e){var t={};i.extend(t,e);return t};n.createFrame=_;return n}(t,n);var r=function(e,t,n){"use strict";var i={};var r=e;var a=t;var s=n.COMPILER_REVISION;var o=n.REVISION_CHANGES;function l(e){var t=e&&e[0]||1,n=s;if(t!==n){if(t<n){var i=o[n],r=o[t];throw new a("Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}else{throw new a("Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+e[1]+").")}}}i.checkRevision=l;function u(e,t){if(!t){throw new a("No environment passed to template")}var n=function(e,n,i,r,s,o){var l=t.VM.invokePartial.apply(this,arguments);if(l!=null){return l}if(t.compile){var u={helpers:r,partials:s,data:o};s[n]=t.compile(e,{data:o!==undefined},t);return s[n](i,u)}else{throw new a("The partial "+n+" could not be compiled when running in runtime-only mode")}};var i={escapeExpression:r.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var i=this.programs[e];if(n){i=d(e,t,n)}else if(!i){i=this.programs[e]=d(e,t)}return i},merge:function(e,t){var n=e||t;if(e&&t&&e!==t){n={};r.extend(n,t);r.extend(n,e)}return n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,r){r=r||{};var a=r.partial?r:t,s,o;if(!r.partial){s=r.helpers;o=r.partials}var l=e.call(i,a,n,s,o,r.data);if(!r.partial){t.VM.checkRevision(i.compilerInfo)}return l}}i.template=u;function c(e,t,n){var i=Array.prototype.slice.call(arguments,3);var r=function(e,r){r=r||{};return t.apply(this,[e,r.data||n].concat(i))};r.program=e;r.depth=i.length;return r}i.programWithDepth=c;function d(e,t,n){var i=function(e,i){i=i||{};return t(e,i.data||n)};i.program=e;i.depth=0;return i}i.program=d;function f(e,t,n,i,r,s){var o={partial:true,helpers:i,partials:r,data:s};if(e===undefined){throw new a("The partial "+t+" could not be found")}else if(e instanceof Function){return e(n,o)}}i.invokePartial=f;function h(){return""}i.noop=h;return i}(t,n,i);var a=function(e,t,n,i,r){"use strict";var a;var s=e;var o=t;var l=n;var u=i;var c=r;var d=function(){var e=new s.HandlebarsEnvironment;u.extend(e,s);e.SafeString=o;e.Exception=l;e.Utils=u;e.VM=c;e.template=function(t){return c.template(t,e)};return e};var f=d();f.create=d;a=f;return a}(i,e,n,t,r);var s=function(e){"use strict";var t;var n=e;function i(e){e=e||{};this.firstLine=e.first_line;this.firstColumn=e.first_column;this.lastColumn=e.last_column;this.lastLine=e.last_line}var r={ProgramNode:function(e,t,n,a){var s,o;if(arguments.length===3){a=n;n=null}else if(arguments.length===2){a=t;t=null}i.call(this,a);this.type="program";this.statements=e;this.strip={};if(n){o=n[0];if(o){s={first_line:o.firstLine,last_line:o.lastLine,last_column:o.lastColumn,first_column:o.firstColumn};this.inverse=new r.ProgramNode(n,t,s)}else{this.inverse=new r.ProgramNode(n,t)}this.strip.right=t.left}else if(t){this.strip.left=t.right}},MustacheNode:function(e,t,n,a,s){i.call(this,s);this.type="mustache";this.strip=a;if(n!=null&&n.charAt){var o=n.charAt(3)||n.charAt(2);this.escaped=o!=="{"&&o!=="&"}else{this.escaped=!!n}if(e instanceof r.SexprNode){this.sexpr=e}else{this.sexpr=new r.SexprNode(e,t)}this.sexpr.isRoot=true;this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},SexprNode:function(e,t,n){i.call(this,n);this.type="sexpr";this.hash=t;var r=this.id=e[0];var a=this.params=e.slice(1);var s=this.eligibleHelper=r.isSimple;this.isHelper=s&&(a.length||t)},PartialNode:function(e,t,n,r){i.call(this,r);this.type="partial";this.partialName=e;this.context=t;this.strip=n},BlockNode:function(e,t,r,a,s){i.call(this,s);if(e.sexpr.id.original!==a.path.original){throw new n(e.sexpr.id.original+" doesn't match "+a.path.original,this)}this.type="block";this.mustache=e;this.program=t;this.inverse=r;this.strip={left:e.strip.left,right:a.strip.right};(t||r).strip.left=e.strip.right;(r||t).strip.right=a.strip.left;if(r&&!t){this.isInverse=true}},ContentNode:function(e,t){i.call(this,t);this.type="content";this.string=e},HashNode:function(e,t){i.call(this,t);this.type="hash";this.pairs=e},IdNode:function(e,t){i.call(this,t);this.type="ID";var r="",a=[],s=0;for(var o=0,l=e.length;o<l;o++){var u=e[o].part;r+=(e[o].separator||"")+u;if(u===".."||u==="."||u==="this"){if(a.length>0){throw new n("Invalid path: "+r,this)}else if(u===".."){s++}else{this.isScoped=true}}else{a.push(u)}}this.original=r;this.parts=a;this.string=a.join(".");this.depth=s;this.isSimple=e.length===1&&!this.isScoped&&s===0;this.stringModeValue=this.string},PartialNameNode:function(e,t){i.call(this,t);this.type="PARTIAL_NAME";this.name=e.original},DataNode:function(e,t){i.call(this,t);this.type="DATA";this.id=e},StringNode:function(e,t){i.call(this,t);this.type="STRING";this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,t){i.call(this,t);this.type="INTEGER";this.original=this.integer=e;this.stringModeValue=Number(e)},BooleanNode:function(e,t){i.call(this,t);this.type="BOOLEAN";this.bool=e;this.stringModeValue=e==="true"},CommentNode:function(e,t){i.call(this,t);this.type="comment";this.comment=e}};t=r;return t}(n);var o=function(){"use strict";var e;var t=function(){var e={trace:function r(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function a(e,n,i,r,s,o,l){var u=o.length-1;switch(s){case 1:return new r.ProgramNode(o[u-1],this._$);break;case 2:return new r.ProgramNode([],this._$);break;case 3:this.$=new r.ProgramNode([],o[u-1],o[u],this._$);break;case 4:this.$=new r.ProgramNode(o[u-2],o[u-1],o[u],this._$);break;case 5:this.$=new r.ProgramNode(o[u-1],o[u],[],this._$);break;case 6:this.$=new r.ProgramNode(o[u],this._$);break;case 7:this.$=new r.ProgramNode([],this._$);break;case 8:this.$=new r.ProgramNode([],this._$);break;case 9:this.$=[o[u]];break;case 10:o[u-1].push(o[u]);this.$=o[u-1];break;case 11:this.$=new r.BlockNode(o[u-2],o[u-1].inverse,o[u-1],o[u],this._$);break;case 12:this.$=new r.BlockNode(o[u-2],o[u-1],o[u-1].inverse,o[u],this._$);break;case 13:this.$=o[u];break;case 14:this.$=o[u];break;case 15:this.$=new r.ContentNode(o[u],this._$);break;case 16:this.$=new r.CommentNode(o[u],this._$);break;case 17:this.$=new r.MustacheNode(o[u-1],null,o[u-2],t(o[u-2],o[u]),this._$);break;case 18:this.$=new r.MustacheNode(o[u-1],null,o[u-2],t(o[u-2],o[u]),this._$);break;case 19:this.$={path:o[u-1],strip:t(o[u-2],o[u])};break;case 20:this.$=new r.MustacheNode(o[u-1],null,o[u-2],t(o[u-2],o[u]),this._$);break;case 21:this.$=new r.MustacheNode(o[u-1],null,o[u-2],t(o[u-2],o[u]),this._$);break;case 22:this.$=new r.PartialNode(o[u-2],o[u-1],t(o[u-3],o[u]),this._$);break;case 23:this.$=t(o[u-1],o[u]);break;case 24:this.$=new r.SexprNode([o[u-2]].concat(o[u-1]),o[u],this._$);break;case 25:this.$=new r.SexprNode([o[u]],null,this._$);break;case 26:this.$=o[u];break;case 27:this.$=new r.StringNode(o[u],this._$);break;case 28:this.$=new r.IntegerNode(o[u],this._$);break;case 29:this.$=new r.BooleanNode(o[u],this._$);break;case 30:this.$=o[u];break;case 31:o[u-1].isHelper=true;this.$=o[u-1];break;case 32:this.$=new r.HashNode(o[u],this._$);break;case 33:this.$=[o[u-2],o[u]];break;case 34:this.$=new r.PartialNameNode(o[u],this._$);break;case 35:this.$=new r.PartialNameNode(new r.StringNode(o[u],this._$),this._$);break;case 36:this.$=new r.PartialNameNode(new r.IntegerNode(o[u],this._$));break;case 37:this.$=new r.DataNode(o[u],this._$);break;case 38:this.$=new r.IdNode(o[u],this._$);break;case 39:o[u-2].push({part:o[u],separator:o[u-1]});this.$=o[u-2];break;case 40:this.$=[{part:o[u]}];break;case 43:this.$=[];break;case 44:o[u-1].push(o[u]);break;case 47:this.$=[o[u]];break;case 48:o[u-1].push(o[u]);break}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function s(e,t){throw new Error(e)},parse:function o(e){var t=this,n=[0],i=[null],r=[],a=this.table,s="",o=0,l=0,u=0,c=2,d=1;this.lexer.setInput(e);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")this.lexer.yylloc={};var f=this.lexer.yylloc;r.push(f);var h=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;function p(e){n.length=n.length-2*e;i.length=i.length-e;r.length=r.length-e}function m(){var e;e=t.lexer.lex()||1;if(typeof e!=="number"){e=t.symbols_[e]||e}return e}var _,g,v,y,b,x,w={},L,S,E,k;while(true){v=n[n.length-1];if(this.defaultActions[v]){y=this.defaultActions[v]}else{if(_===null||typeof _=="undefined"){_=m()}y=a[v]&&a[v][_]}if(typeof y==="undefined"||!y.length||!y[0]){var T="";if(!u){k=[];for(L in a[v])if(this.terminals_[L]&&L>2){k.push("'"+this.terminals_[L]+"'")}if(this.lexer.showPosition){T="Parse error on line "+(o+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[_]||_)+"'"}else{T="Parse error on line "+(o+1)+": Unexpected "+(_==1?"end of input":"'"+(this.terminals_[_]||_)+"'")}this.parseError(T,{text:this.lexer.match,token:this.terminals_[_]||_,line:this.lexer.yylineno,loc:f,expected:k})}}if(y[0]instanceof Array&&y.length>1){throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+_)}switch(y[0]){case 1:n.push(_);i.push(this.lexer.yytext);r.push(this.lexer.yylloc);n.push(y[1]);_=null;if(!g){l=this.lexer.yyleng;s=this.lexer.yytext;o=this.lexer.yylineno;f=this.lexer.yylloc;if(u>0)u--}else{_=g;g=null}break;case 2:S=this.productions_[y[1]][1];w.$=i[i.length-S];w._$={first_line:r[r.length-(S||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(S||1)].first_column,last_column:r[r.length-1].last_column};if(h){w._$.range=[r[r.length-(S||1)].range[0],r[r.length-1].range[1]]}x=this.performAction.call(w,s,l,o,this.yy,y[1],i,r);if(typeof x!=="undefined"){return x}if(S){n=n.slice(0,-1*S*2);i=i.slice(0,-1*S);r=r.slice(0,-1*S)}n.push(this.productions_[y[1]][0]);i.push(w.$);r.push(w._$);E=a[n[n.length-2]][n[n.length-1]];n.push(E);break;case 3:return true}}return true}};function t(e,t){return{left:e.charAt(2)==="~",right:t.charAt(0)==="~"||t.charAt(1)==="~"}}var n=function(){var e={EOF:1,parseError:function t(e,n){if(this.yy.parser){this.yy.parser.parseError(e,n)}else{throw new Error(e)}},setInput:function(e){this._input=e;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=[0,0];this.offset=0;return this},input:function(){var e=this._input[0];this.yytext+=e;this.yyleng++;this.offset++;this.match+=e;this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);if(t){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges)this.yylloc.range[1]++;this._input=this._input.slice(1);return e},unput:function(e){var t=e.length;var n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-t-1);this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(n.length-1)this.yylineno-=n.length-1;var r=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t};if(this.options.ranges){this.yylloc.range=[r[0],r[0]+this.yyleng-t]}return this},more:function(){this._more=true;return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;if(e.length<20){e+=this._input.substr(0,20-e.length)}return(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput();var t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done){return this.EOF}if(!this._input)this.done=true;var e,t,n,i,r,a;if(!this._more){this.yytext="";this.match=""}var s=this._currentRules();for(var o=0;o<s.length;o++){n=this._input.match(this.rules[s[o]]);if(n&&(!t||n[0].length>t[0].length)){t=n;i=o;if(!this.options.flex)break}}if(t){a=t[0].match(/(?:\r\n?|\n).*/g);if(a)this.yylineno+=a.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:a?a[a.length-1].length-a[a.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length};this.yytext+=t[0];this.match+=t[0];this.matches=t;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(t[0].length);this.matched+=t[0];e=this.performAction.call(this,this.yy,this,s[i],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=false;if(e)return e;else return}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function n(){var e=this.next();if(typeof e!=="undefined"){return e}else{return this.lex()}},begin:function i(e){this.conditionStack.push(e)},popState:function r(){return this.conditionStack.pop()},_currentRules:function a(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function s(e){this.begin(e)}};e.options={};e.performAction=function o(e,t,n,i){function r(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}var a=i;switch(n){case 0:if(t.yytext.slice(-2)==="\\\\"){r(0,1);this.begin("mu")}else if(t.yytext.slice(-1)==="\\"){r(0,1);this.begin("emu")}else{this.begin("mu")}if(t.yytext)return 14;break;case 1:return 14;break;case 2:this.popState();return 14;break;case 3:r(0,4);this.popState();return 15;break;case 4:return 35;break;case 5:return 36;break;case 6:return 25;break;case 7:return 16;break;case 8:return 20;break;case 9:return 19;break;case 10:return 19;break;case 11:return 23;break;case 12:return 22;break;case 13:this.popState();this.begin("com");break;case 14:r(3,5);this.popState();return 15;break;case 15:return 22;break;case 16:return 41;break;case 17:return 40;break;case 18:return 40;break;case 19:return 44;break;case 20:break;case 21:this.popState();return 24;break;case 22:this.popState();return 18;break;case 23:t.yytext=r(1,2).replace(/\\"/g,'"');return 32;break;case 24:t.yytext=r(1,2).replace(/\\'/g,"'");return 32;break;case 25:return 42;break;case 26:return 34;break;case 27:return 34;break;case 28:return 33;break;case 29:return 40;break;case 30:t.yytext=r(1,2);return 40;break;case 31:return"INVALID";break;case 32:return 5;break}};e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:false},emu:{rules:[2],inclusive:false},com:{rules:[3],inclusive:false},INITIAL:{rules:[0,1,32],inclusive:true}};return e}();e.lexer=n;function i(){this.yy={}}i.prototype=e;e.Parser=i;return new i}();e=t;return e}();var l=function(e,t){"use strict";var n={};var i=e;var r=t;n.parser=i;function a(e){if(e.constructor===r.ProgramNode){return e}i.yy=r;return i.parse(e)}n.parse=a;return n}(o,s);var u=function(e){"use strict";var t={};var n=e;function i(){}t.Compiler=i;i.prototype={compiler:i,disassemble:function(){var e=this.opcodes,t,n=[],i,r;for(var a=0,s=e.length;a<s;a++){t=e[a];if(t.opcode==="DECLARE"){n.push("DECLARE "+t.name+"="+t.value)}else{i=[];for(var o=0;o<t.args.length;o++){r=t.args[o];if(typeof r==="string"){r='"'+r.replace("\n","\\n")+'"'}i.push(r)}n.push(t.opcode+" "+i.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t){return false}for(var n=0;n<t;n++){var i=this.opcodes[n],r=e.opcodes[n];if(i.opcode!==r.opcode||i.args.length!==r.args.length){return false}for(var a=0;a<i.args.length;a++){if(i.args[a]!==r.args[a]){return false}}}t=this.children.length;if(e.children.length!==t){return false}for(n=0;n<t;n++){if(!this.children[n].equals(e.children[n])){return false}}return true},guid:0,compile:function(e,t){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,"if":true,unless:true,"with":true,log:true};if(n){for(var i in n){this.options.knownHelpers[i]=n[i]}}return this.accept(e)},accept:function(e){var t=e.strip||{},n;if(t.left){this.opcode("strip")}n=this[e.type](e);if(t.right){this.opcode("strip")}return n},program:function(e){var t=e.statements;for(var n=0,i=t.length;n<i;n++){this.accept(t[n])}this.isSimple=i===1;this.depths.list=this.depths.list.sort(function(e,t){return e-t});return this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options);var n=this.guid++,i;this.usePartial=this.usePartial||t.usePartial;this.children[n]=t;for(var r=0,a=t.depths.list.length;r<a;r++){i=t.depths.list[r];if(i<2){continue}else{this.addDepth(i-1)}}return n},block:function(e){var t=e.mustache,n=e.program,i=e.inverse;if(n){n=this.compileProgram(n)}if(i){i=this.compileProgram(i)}var r=t.sexpr;var a=this.classifySexpr(r);if(a==="helper"){this.helperSexpr(r,n,i)}else if(a==="simple"){this.simpleSexpr(r);this.opcode("pushProgram",n);this.opcode("pushProgram",i);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousSexpr(r,n,i);this.opcode("pushProgram",n);this.opcode("pushProgram",i);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}this.opcode("append")},hash:function(e){var t=e.pairs,n,i;this.opcode("pushHash");for(var r=0,a=t.length;r<a;r++){n=t[r];i=n[1];if(this.options.stringParams){if(i.depth){this.addDepth(i.depth)}this.opcode("getContext",i.depth||0);this.opcode("pushStringParam",i.stringModeValue,i.type);if(i.type==="sexpr"){this.sexpr(i)}}else{this.accept(i)}this.opcode("assignToHash",n[0])}this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=true;if(e.context){this.ID(e.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",t.name);this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr);if(e.escaped&&!this.options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousSexpr:function(e,t,n){var i=e.id,r=i.parts[0],a=t!=null||n!=null;this.opcode("getContext",i.depth);this.opcode("pushProgram",t);this.opcode("pushProgram",n);this.opcode("invokeAmbiguous",r,a)},simpleSexpr:function(e){var t=e.id;if(t.type==="DATA"){this.DATA(t)}else if(t.parts.length){this.ID(t)}else{this.addDepth(t.depth);this.opcode("getContext",t.depth);this.opcode("pushContext")}this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,i){var r=this.setupFullMustacheParams(e,t,i),a=e.id.parts[0];if(this.options.knownHelpers[a]){this.opcode("invokeKnownHelper",r.length,a)}else if(this.options.knownHelpersOnly){throw new n("You specified knownHelpersOnly, but used the unknown helper "+a,e)}else{this.opcode("invokeHelper",r.length,a,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);if(t==="simple"){this.simpleSexpr(e)}else if(t==="helper"){this.helperSexpr(e)}else{this.ambiguousSexpr(e)}},ID:function(e){this.addDepth(e.depth);this.opcode("getContext",e.depth);var t=e.parts[0];if(!t){this.opcode("pushContext")}else{this.opcode("lookupOnContext",e.parts[0])}for(var n=1,i=e.parts.length;n<i;n++){this.opcode("lookup",e.parts[n])}},DATA:function(e){this.options.data=true;if(e.id.isScoped||e.id.depth){throw new n("Scoped data references are not supported: "+e.original,e)}this.opcode("lookupData");var t=e.id.parts;for(var i=0,r=t.length;i<r;i++){this.opcode("lookup",t[i])}},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(e===0){return}if(!this.depths[e]){this.depths[e]=true;this.depths.list.push(e)}},classifySexpr:function(e){var t=e.isHelper;var n=e.eligibleHelper;var i=this.options;if(n&&!t){var r=e.id.parts[0];if(i.knownHelpers[r]){t=true}else if(i.knownHelpersOnly){n=false}}if(t){return"helper"}else if(n){return"ambiguous"}else{return"simple"}},pushParams:function(e){var t=e.length,n;while(t--){n=e[t];if(this.options.stringParams){if(n.depth){this.addDepth(n.depth)}this.opcode("getContext",n.depth||0);this.opcode("pushStringParam",n.stringModeValue,n.type);if(n.type==="sexpr"){this.sexpr(n)}}else{this[n.type](n)}}},setupFullMustacheParams:function(e,t,n){var i=e.params;this.pushParams(i);this.opcode("pushProgram",t);this.opcode("pushProgram",n);if(e.hash){this.hash(e.hash)}else{this.opcode("emptyHash")}return i}};function r(e,t,i){if(e==null||typeof e!=="string"&&e.constructor!==i.AST.ProgramNode){throw new n("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e)}t=t||{};if(!("data"in t)){t.data=true}var r=i.parse(e);var a=(new i.Compiler).compile(r,t);return(new i.JavaScriptCompiler).compile(a,t)}t.precompile=r;function a(e,t,i){if(e==null||typeof e!=="string"&&e.constructor!==i.AST.ProgramNode){
throw new n("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e)}t=t||{};if(!("data"in t)){t.data=true}var r;function a(){var n=i.parse(e);var r=(new i.Compiler).compile(n,t);var a=(new i.JavaScriptCompiler).compile(r,t,undefined,true);return i.template(a)}return function(e,t){if(!r){r=a()}return r.call(this,e,t)}}t.compile=a;return t}(n);var c=function(e,t){"use strict";var n;var i=e.COMPILER_REVISION;var r=e.REVISION_CHANGES;var a=e.log;var s=t;function o(e){this.value=e}function l(){}l.prototype={nameLookup:function(e,t){var n,i;if(e.indexOf("depth")===0){n=true}if(/^[0-9]+$/.test(t)){i=e+"["+t+"]"}else if(l.isValidJavaScriptVariableName(t)){i=e+"."+t}else{i=e+"['"+t+"']"}if(n){return"("+e+" && "+i+")"}else{return i}},compilerInfo:function(){var e=i,t=r[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){if(this.environment.isSimple){return"return "+e+";"}else{return{appendToBuffer:true,content:e,toString:function(){return"buffer += "+e+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,i){this.environment=e;this.options=t||{};a("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!n;this.context=n||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.compileChildren(e,t);var r=e.opcodes,o;this.i=0;for(var l=r.length;this.i<l;this.i++){o=r[this.i];if(o.opcode==="DECLARE"){this[o.name]=o.value}else{this[o.opcode].apply(this,o.args)}if(o.opcode!==this.stripNext){this.stripNext=false}}this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length){throw new s("Compile completed with content left on stack")}return this.createFunctionContext(i)},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace;var n="helpers = this.merge(helpers, "+t+".helpers);";if(this.environment.usePartial){n=n+" partials = this.merge(partials, "+t+".partials);"}if(this.options.data){n=n+" data = data || {};"}e.push(n)}else{e.push("")}if(!this.environment.isSimple){e.push(", buffer = "+this.initializeBuffer())}else{e.push("")}this.lastContext=0;this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0){this.source[1]=this.source[1]+", "+t.join(", ")}if(!this.isChild){for(var n in this.context.aliases){if(this.context.aliases.hasOwnProperty(n)){this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]}}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.pushSource("return buffer;")}var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var r=0,s=this.environment.depths.list.length;r<s;r++){i.push("depth"+this.environment.depths.list[r])}var o=this.mergeSource();if(!this.isChild){o=this.compilerInfo()+o}if(e){i.push(o);return Function.apply(this,i)}else{var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+o+"}";a("debug",l+"\n\n");return l}},mergeSource:function(){var e="",t;for(var n=0,i=this.source.length;n<i;n++){var r=this.source[n];if(r.appendToBuffer){if(t){t=t+"\n    + "+r.content}else{t=r.content}}else{if(t){e+="buffer += "+t+";\n  ";t=undefined}e+=r+"\n  "}}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);this.replaceStack(function(t){e.splice(1,0,t);return"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t);this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){if(this.pendingContent){e=this.pendingContent+e}if(this.stripNext){e=e.replace(/^\s+/,"")}this.pendingContent=e},strip:function(){if(this.pendingContent){this.pendingContent=this.pendingContent.replace(/\s+$/,"")}this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }");if(this.environment.isSimple){this.pushSource("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){if(this.lastContext!==e){this.lastContext=e}},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext);this.pushString(t);if(t!=="sexpr"){if(typeof e==="string"){this.pushString(e)}else{this.pushStackLiteral(e)}}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.push("{}");this.push("{}")}},pushHash:function(){if(this.hash){this.hashes.push(this.hash)}this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop();if(this.options.stringParams){this.push("{"+e.contexts.join(",")+"}");this.push("{"+e.types.join(",")+"}")}this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){this.inlineStack.push(e);return e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){if(e!=null){this.pushStackLiteral(this.programExpression(e))}else{this.pushStackLiteral(null)}},invokeHelper:function(e,t,n){this.context.aliases.helperMissing="helpers.helperMissing";this.useRegister("helper");var i=this.lastHelper=this.setupHelper(e,t,true);var r=this.nameLookup("depth"+this.lastContext,t,"context");var a="helper = "+i.name+" || "+r;if(i.paramsInit){a+=","+i.paramsInit}this.push("("+a+",helper "+"? helper.call("+i.callParams+") "+": helperMissing.call("+i.helperMissingParams+"))");if(!n){this.flushInline()}},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"';this.useRegister("helper");this.emptyHash();var n=this.setupHelper(0,e,t);var i=this.lastHelper=this.nameLookup("helpers",e,"helper");var r=this.nameLookup("depth"+this.lastContext,e,"context");var a=this.nextStack();if(n.paramsInit){this.pushSource(n.paramsInit)}this.pushSource("if (helper = "+i+") { "+a+" = helper.call("+n.callParams+"); }");this.pushSource("else { helper = "+r+"; "+a+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];if(this.options.data){t.push("data")}this.context.aliases.self="this";this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n,i;if(this.options.stringParams){i=this.popStack();n=this.popStack()}var r=this.hash;if(n){r.contexts.push("'"+e+"': "+n)}if(i){r.types.push("'"+e+"': "+i)}r.values.push("'"+e+"': ("+t+")")},compiler:l,compileChildren:function(e,t){var n=e.children,i,r;for(var a=0,s=n.length;a<s;a++){i=n[a];r=new this.compiler;var o=this.matchExistingProgram(i);if(o==null){this.context.programs.push("");o=this.context.programs.length;i.index=o;i.name="program"+o;this.context.programs[o]=r.compile(i,t,this.context);this.context.environments[o]=i}else{i.index=o;i.name="program"+o}}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var i=this.context.environments[t];if(i&&i.equals(e)){return t}}},programExpression:function(e){this.context.aliases.self="this";if(e==null){return"self.noop"}var t=this.environment.children[e],n=t.depths.list,i;var r=[t.index,t.name,"data"];for(var a=0,s=n.length;a<s;a++){i=n[a];if(i===1){r.push("depth0")}else{r.push("depth"+(i-1))}}return(n.length===0?"self.program(":"self.programWithDepth(")+r.join(", ")+")"},register:function(e,t){this.useRegister(e);this.pushSource(e+" = "+t+";")},useRegister:function(e){if(!this.registers[e]){this.registers[e]=true;this.registers.list.push(e)}},pushStackLiteral:function(e){return this.push(new o(e))},pushSource:function(e){if(this.pendingContent){this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent)));this.pendingContent=undefined}if(e){this.source.push(e)}},pushStack:function(e){this.flushInline();var t=this.incrStack();if(e){this.pushSource(t+" = "+e+";")}this.compileStack.push(t);return t},replaceStack:function(e){var t="",n=this.isInline(),i,r,a;if(n){var s=this.popStack(true);if(s instanceof o){i=s.value;a=true}else{r=!this.stackSlot;var l=!r?this.topStackName():this.incrStack();t="("+this.push(l)+" = "+s+"),";i=this.topStack()}}else{i=this.topStack()}var u=e.call(this,i);if(n){if(!a){this.popStack()}if(r){this.stackSlot--}this.push("("+t+u+")")}else{if(!/^stack/.test(i)){i=this.nextStack()}this.pushSource(i+" = ("+t+u+");")}return i},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];if(i instanceof o){this.compileStack.push(i)}else{this.pushStack(i)}}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof o){return n.value}else{if(!t){if(!this.stackSlot){throw new s("Invalid stack pop")}this.stackSlot--}return n}},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];if(!e&&n instanceof o){return n.value}else{return n}},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var i=[],r=this.setupParams(e,i,n);var a=this.nameLookup("helpers",t,"helper");return{params:i,paramsInit:r,name:a,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(i).join(", ")}},setupOptions:function(e,t){var n=[],i=[],r=[],a,s,o;n.push("hash:"+this.popStack());if(this.options.stringParams){n.push("hashTypes:"+this.popStack());n.push("hashContexts:"+this.popStack())}s=this.popStack();o=this.popStack();if(o||s){if(!o){this.context.aliases.self="this";o="self.noop"}if(!s){this.context.aliases.self="this";s="self.noop"}n.push("inverse:"+s);n.push("fn:"+o)}for(var l=0;l<e;l++){a=this.popStack();t.push(a);if(this.options.stringParams){r.push(this.popStack());i.push(this.popStack())}}if(this.options.stringParams){n.push("contexts:["+i.join(",")+"]");n.push("types:["+r.join(",")+"]")}if(this.options.data){n.push("data:data")}return n},setupParams:function(e,t,n){var i="{"+this.setupOptions(e,t).join(",")+"}";if(n){this.useRegister("options");t.push("options");return"options="+i}else{t.push(i);return""}}};var u=("break else new var"+" case finally return void"+" catch for switch while"+" continue function this with"+" default if throw"+" delete in try"+" do instanceof typeof"+" abstract enum int short"+" boolean export interface static"+" byte extends long super"+" char final native synchronized"+" class float package throws"+" const goto private transient"+" debugger implements protected volatile"+" double import public let yield").split(" ");var c=l.RESERVED_WORDS={};for(var d=0,f=u.length;d<f;d++){c[u[d]]=true}l.isValidJavaScriptVariableName=function(e){if(!l.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)){return true}return false};n=l;return n}(i,n);var d=function(e,t,n,i,r){"use strict";var a;var s=e;var o=t;var l=n.parser;var u=n.parse;var c=i.Compiler;var d=i.compile;var f=i.precompile;var h=r;var p=s.create;var m=function(){var e=p();e.compile=function(t,n){return d(t,n,e)};e.precompile=function(t,n){return f(t,n,e)};e.AST=o;e.Compiler=c;e.JavaScriptCompiler=h;e.Parser=l;e.parse=u;return e};s=m();s.create=m;a=s;return a}(a,s,l,u,c);return d}();e.exports=n},function(e,t){function n(e,t,n){this.php_js=this.php_js||{};this.php_js.ENV=this.php_js.ENV||{};var i=0,r=0,a=0,s={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:-1,pl:-1},o=function(e){e=(""+e).replace(/[_\-+]/g,".");e=e.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,".");return!e.length?[-8]:e.split(".")},l=function(e){return!e?0:isNaN(e)?s[e]||-7:parseInt(e,10)};e=o(e);t=o(t);r=Math.max(e.length,t.length);for(i=0;i<r;i++){if(e[i]==t[i]){continue}e[i]=l(e[i]);t[i]=l(t[i]);if(e[i]<t[i]){a=-1;break}else if(e[i]>t[i]){a=1;break}}if(!n){return a}switch(n){case">":case"gt":return a>0;case">=":case"ge":return a>=0;case"<=":case"le":return a<=0;case"==":case"=":case"eq":return a===0;case"<>":case"!=":case"ne":return a!==0;case"":case"<":case"lt":return a<0;default:return null}}e.exports=n},function(e,t){"use strict";var n=n||{};n.Api=function(){var e;var t={read:"GET",update:"PUT",create:"POST","delete":"DELETE"};var n=["read","update","create","delete"];var i=0;var a=function f(e){e()};var s={};var o={};var l=function h(e,t,n){e=e||{};e.xhr=e.xhr||{};this.request=e;this.status=e.xhr.status;this.responseText=e.xhr.responseText;this.textStatus=t;this.errorThrown=n;if(typeof this.responseText==="string"&&this.responseText.length>0){try{var i=this.request.xhr.getResponseHeader("Content-Type");if(i&&i.indexOf("application/json")===0){this.payload=JSON.parse(this.responseText);this.code=this.payload.error;this.message=this.payload.error_message}}catch(r){}}};_.extend(l.prototype,{toString:function p(){return"HTTP error: "+this.status+"\ntype: "+this.textStatus+"\nerror: "+this.errorThrown+"\nresponse: "+this.responseText+"\ncode: "+this.code+"\nmessage: "+this.message}});var u=function m(e,t){this.params=e;this.debug=t;this.numExecuted=0;this.state={}};_.extend(u.prototype,{execute:function g(e,t,n){if(e){this.params.headers=this.params.headers||{};this.params.headers["OAuth-Token"]=e}if(t){this.params.headers=this.params.headers||{};this.params.headers["X-Metadata-Hash"]=t}if(n){this.params.headers=this.params.headers||{};this.params.headers["X-Userpref-Hash"]=n}this.state=_.extend(this.state,o);if(this.debug){console.log("====== Ajax Request Begin ======");console.log(this.params.type+" "+this.params.url);var r=this.params.data?JSON.parse(this.params.data):null;if(r&&r.password)r.password="***";console.log("Payload: ",this.params.data?r:"N/A");var a=$.extend({},this.params);delete a.data;console.log("params: ",a);console.log("====== Request End ======")}if(!this.numExecuted){var s=this.params.complete;this.params.complete=function(){i--;if(_.isFunction(s))s.apply(this,arguments)}}this.xhr=$.ajax(this.params);i++;this.numExecuted++}});var c=function v(e,t){var n=e.contents||{};this.status=e.status||200;this.statusText=e.status_text||"";this.responseText=_.isObject(n)?JSON.stringify(n):n;this.readyState=4;this._parent=t.xhr;this.headers=e.headers};_.extend(c.prototype,{isResolved:function y(){return this._parent.isResolved()},getResponseHeader:function b(e){return this.headers[e]},getAllResponseHeaders:function x(){return _.reduce(this.headers,function(e,t,n){return e.concat(n+": "+t+"\n")},"")}});function d(e){var d,f,h,p,m,g,v,y,b,x=null,w=null,L=null,S=null,E=[],k={},T=0;h=e&&e.keyValueStore;d=e&&e.serverUrl||"/rest/v10";v=e&&e.defaultErrorHandler||null;f=e&&e.platform||"";p=e&&e.clientID||"sugar";m=(e&&e.timeout||30)*1e3;y=false;b=!(e&&e.disableBulkApi);if(e&&e.externalLoginUICallback&&_.isFunction(e.externalLoginUICallback)){x=e.externalLoginUICallback}if(h){if(!$.isFunction(h.set)||!$.isFunction(h.get)||!$.isFunction(h.cut)){throw new Error("Failed to initialize Sugar API: key/value store provider is invalid")}var M=function R(){w=h.get("AuthAccessToken");L=h.get("AuthRefreshToken");S=h.get("DownloadToken")};if($.isFunction(h.initAsync)){h.initAsync(M)}else{M()}if($.isFunction(h.on)){h.on("cache:clean",function(e){e(["AuthAccessToken","AuthRefreshToken","DownloadToken"])})}}g=false;if(e&&e.reset)i=0;var A=function D(e){if(e){w=e.access_token;L=e.refresh_token;S=e.download_token;if(h){h.set("AuthAccessToken",w);h.set("AuthRefreshToken",L);h.set("DownloadToken",S)}}else{w=null;L=null;S=null;if(h){h.cut("AuthAccessToken");h.cut("AuthRefreshToken");h.cut("DownloadToken")}}};var C=function I(e,t,n){return function(i,r,s){var o=new l(t,r,s);var u=function p(){if(!E.length||e.refreshingToken(t.params.url)){if(n.error){n.error(o)}else if($.isFunction(e.defaultErrorHandler)){e.defaultErrorHandler(o)}}else{for(var i=0;i<E.length;++i){if(E[i]._oerror)E[i]._oerror(o)}}e.setRefreshingToken(false)};var c,d=true;if(e.needRefreshAuthToken(t.params.url,o.code)){if(t._dequeuing){if(t._oerror)t._oerror(o);e.resetAuth();return}E.push(t);e.setRefreshingToken(true);var h={complete:function m(){if(d){c=E.shift();while(c){if(c._ocomplete){c._ocomplete.call(this,c)}c=E.shift()}}},success:function _(){e.setRefreshingToken(false);d=false;a(function(){c=E.shift();while(c){c._dequeuing=true;c.execute(e.getOAuthToken());c=E.shift()}})},error:u};if(!("crosstab"in window)||!crosstab.supported){e.login(null,{refresh:true},{complete:h.complete,success:h.success,error:h.error});return}crosstab(function(){crosstab.on("auth:refresh:complete",function(e){var t=e.data;switch(t){case"success":h.success();break;case"error":h.error();break;case"complete":h.complete();crosstab.off("auth:refresh:complete");break}});crosstab.broadcastMaster("auth:refresh")})}else if(e.needQueue(t.params.url)){E.push(t)}else if(y&&o.status==401&&o.payload&&o.payload.url&&o.payload.platform==f){e.handleExternalLogin(o,u)}else{u()}}};return{clientID:p,serverUrl:d,defaultErrorHandler:v,timeout:m,debug:false,abortRequest:function O(e){var t=k[e];if(t){t.aborted=true;if(t.xhr){t.xhr.aborted=true;t.xhr.abort()}}},getRequest:function N(e){return k[e]},setRefreshTokenSuccessCallback:function F(e){if(_.isFunction(e))a=e},call:function B(e,n,i,r,a){var o,l,c=t[e],d=this,f=this.getOAuthToken();a=a||{};r=r||{};var h={type:c,dataType:"json",headers:{},timeout:a.timeout||this.timeout,contentType:"application/json"};if(!a.url){h.url=n}if(r.success){h.success=function(e,t){o.status=e&&e.status?e.status:t;r.success(e,o)}}h.complete=function(){k[o.uid]=null;if(!g&&r.complete){r.complete(o)}};if(a.iframe===true){if(f){i=i||{};i["OAuth-Token"]=f;h.data=i}}else{if(i&&(e=="create"||e=="update"||e=="delete")){h.data=JSON.stringify(i)}}if(h.type!=="GET"){h.processData=false}o=new u(_.extend(h,a),this.debug);h.error=C(d,o,r);o._oerror=r.error;o._ocomplete=r.complete;o.uid=T++;k[o.uid]=o;l=[f,a.skipMetadataHash?null:this.getMetadataHash(),a.skipMetadataHash?null:this.getUserprefHash()];if(this.isLoginRequest(n)){o.execute()}else if(this.isAuthRequest(n)){o.execute(f)}else if(h.bulk&&b){var p=s[h.bulk]||[];if(!s[h.bulk]){s[h.bulk]=p}p.push({request:o,args:l})}else{o.execute.apply(o,l)}return o},triggerBulkCall:function P(e){if(!b){return}e=e||true;var t=s[e],n=[],i=_.last(this.serverUrl.split("/"));if(!t){return}_.each(t,function(e){var t=e.request.params,r=e.args,a=r[0],s=r[1],o=r[2];if(a){t.headers=t.headers||{};t.headers["OAuth-Token"]=a}if(s){t.headers=t.headers||{};t.headers["X-Metadata-Hash"]=s}if(o){t.headers=t.headers||{};t.headers["X-Userpref-Hash"]=o}if(!_.isEmpty(t.url)){t.url=i+t.url.substring(this.serverUrl.length)}n.push(t)},this);this.call("create",this.buildURL("bulk"),{requests:n},{success:function r(e,n){_.each(t,function(t,i){var r=t.request,a=e[i],s=a.contents||{},o=new c(a,n);r.xhr=o;if(r.aborted===true||s.error){r.status="error";if(_.isFunction(r.params.error)){r.params.error.call(r.params,r,"error",o.statusText)}}else{if(_.isFunction(r.params.success)){r.params.success.call(r.params,s,"success")}}if(_.isFunction(r.params.complete)){r.params.complete.call(r.params,r)}})}});s[e]=null},clearBulkQueue:function U(){s={}},buildURL:function Y(e,t,i,r){r=r||{};var a=[];var s;a.push(this.serverUrl);if(e){a.push(e)}if(t!="create"&&i&&i.id){a.push(i.id)}if(i&&i.link&&t!="file"){a.push("link");if(_.isString(i.link)){a.push(i.link)}}if(t&&$.inArray(t,n)===-1){a.push(t)}if(i&&i.relatedId){a.push(i.relatedId)}if(i&&t=="file"&&i.field){a.push(i.field);if(i.fileId)a.push(i.fileId)}s=a.join("/");_.each(r,function(e,t){if(e===null||e===undefined){delete r[t]}});r=$.param(r);if(r.length>0){s+="?"+r}return s},buildFileURL:function H(e,t){var n={};t=t||{};if(e.field&&t.htmlJsonFormat!==false){n.format="sugar-html-json"}if(t.deleteIfFails===true){n.delete_if_fails=true}if(t.passOAuthToken){n.oauth_token=this.getOAuthToken()}if(t.passDownloadToken){n.download_token=this.getDownloadToken()}if(!_.isUndefined(t.forceDownload)){n.force_download=t.forceDownload?1:0}if(t.cleanCache===true){n[(new Date).getTime()]=1}if(t.platform!==undefined){n.platform=t.platform}else if(f){n.platform=f}if(t.keep===true){n.keep=1}return this.buildURL(e.module,"file",e,n)},getOAuthToken:function G(){return h?h.get("AuthAccessToken")||w:w},getRefreshToken:function j(){return h?h.get("AuthRefreshToken")||L:L},getDownloadToken:function V(){return h?h.get("DownloadToken")||S:S},getMetadataHash:function z(){return h?h.get("meta:hash"):null},getUserprefHash:function q(){return h?h.get("userpref:hash"):null},getMetadata:function W(e){if(_.isString(e)){console.warn("`SUGAR.Api::getMetadata` has changed signature since 7.9 "+"and will drop support for old signature in 7.10. Please update your code.");var t=arguments[4]||{};e={types:arguments[1],modules:arguments[2],callbacks:arguments[3],"public":t.getPublic,params:t.params}}e=e||{};var n=e.params||{};if(e.types){n.type_filter=e.types.join(",")}if(e.modules){n.module_filter=e.modules.join(",")}if(f){n.platform=f}var i="read";if(e.public){i="public"}else{e.callbacks=e.callbacks||{};e.callbacks.success=_.wrap(e.callbacks.success,function(e,t,n){if(t){this._serverInfo=t.server_info}if(e){e(t,n)}})}n.module_dependencies=1;var r=this.buildURL("metadata",i,null,n);return this.call(i,r,null,e.callbacks)},records:function K(e,t,n,i,r,a){var s=this.buildURL(t,e,n,i);return this.call(e,s,n,r,a)},relationships:function J(e,t,n,i,r,a){var s=this.buildURL(t,null,n,i);return this.call(e,s,n.related,r,a)},favorite:function X(e,t,n,i,r){var a=n?"favorite":"unfavorite";var s=this.buildURL(e,a,{id:t});return this.call("update",s,null,i,r)},follow:function Z(e,t,n,i,r){i=i||{};r=r||{};var a=n?"create":"delete",s=n?"subscribe":"unsubscribe",o=this.buildURL(e,s,{id:t});return this.call(a,o,null,i,r)},enumOptions:function Q(e,t,n,i){var r=this.buildURL(e+"/enum/"+t);return this.call("read",r,null,n,i)},bulk:function ee(e,t,n){var i=this.buildURL("bulk");return this.call("create",i,e,t,n)},fileDownload:function te(e,t,n){n=n||{};var i={};i.success=function(i){if(n.iframe){n.iframe.prepend('<iframe class="hide" src="'+e+'"></iframe>')}else{window.location.href=e}if(_.isFunction(t.success)){t.success.apply(arguments)}};if(_.isFunction(t.error)){i.error=t.error}if(_.isFunction(t.complete)){i.complete=t.complete}return this.call("read",this.buildURL("ping"),{},i,{processData:false})},file:function ne(e,t,n,i,r){var a={files:n,processData:false};if(e==="delete"){a.iframe=false}else if(!r||r.iframe!==false){a.iframe=true;r=r||{};r.passOAuthToken=true}if(!r||r.deleteIfFails!==false){r=r||{};r.deleteIfFails=true}i.success=_.wrap(i.success,function(e,t){if(t.error&&_.isFunction(i.error)){i.error(t)}else if(_.isFunction(e)){e(t)}});return this.call(e,this.buildFileURL(t,r),null,i,a)},count:function ie(e,t,n,i){i=i||{};var r=this.buildURL(e,"count",t,i);return this.call("read",r,null,n)},exportRecords:function re(e,t,n,i){var r=this;var a=this.buildURL(e.module,"record_list");i=i||{};return this.call("create",a,{records:e.uid},{success:function s(a){e=_.omit(e,["uid","module"]);if(i.platform!==undefined){e.platform=i.platform}else if(f){e.platform=f}r.fileDownload(r.buildURL(a.module_name,"export",{relatedId:a.id},e),n,{iframe:t})}})},search:function ae(e,t,n){n=n||{};var i=null;if(n.data){i=n.data;delete n.data}var r="read";if(n.fetchWithPost){r="create"}var a=n.useNewApi?"globalsearch":"search";var s=this.buildURL(null,a,null,e);return this.call(r,s,i,t,n)},login:function se(e,t,n){var i,r,s,o,l,u=this;e=e||{};n=n||{};r=function c(e){A(e);if(y){u.setRefreshingToken(false);a(function(){var e=E.shift();while(e){e._dequeuing=true;e.execute(u.getOAuthToken());e=E.shift()}})}if(n.success)n.success(e)};s=function d(e){A();if(n.error)n.error(e)};if(t&&t.refresh){i=_.extend({grant_type:"refresh_token",client_id:this.clientID,client_secret:"",refresh_token:this.getRefreshToken(),platform:f?f:"base"},t)}else{i=_.extend({grant_type:"password",username:e.username,password:e.password,client_id:this.clientID,platform:f?f:"base",client_secret:""},t);i.client_info=t}o="create";l=this.buildURL("oauth2","token",i,{platform:f});return this.call(o,l,i,{success:r,error:s,complete:n.complete})},me:function oe(e,t,n,i){var r=this.buildURL("me",e,t,n);return this.call(e,r,t,i)},css:function le(e,t,n){var i={platform:e,themeName:t};var r=this.buildURL("css","read",{},i);return this.call("read",r,{},n)},logout:function ue(e,t){e=e||{};var n={token:this.getOAuthToken(),refresh_token:this.getRefreshToken()};if(this._serverInfo&&this._serverInfo.version.charAt(0)==="6"){delete n.refresh_token}var i=this.buildURL("oauth2","logout",n);var r=e.complete;e.complete=function(){A();if(r)r()};return this.call("create",i,n,e,t)},ping:function ce(e,t,n){return this.call("read",this.buildURL("ping",e,null,{platform:f}),null,t,_.extend({skipMetadataHash:true},n||{}))},signup:function de(e,t,n){var i=e;i.client_info=t;var r="create";var a=this.buildURL("Leads","register",i);return this.call(r,a,i,n)},verifyPassword:function fe(e,t){var n={password_to_verify:e};var i="create";var r=this.buildURL("me/password",i);return this.call(i,r,n,t)},updatePassword:function he(e,t,n){var i={new_password:t,old_password:e};var r="update";var a=this.buildURL("me/password",r);return this.call(r,a,i,n)},info:function pe(e){var t=this.buildURL("ServerInfo");return this.call("read",t,null,e)},isAuthenticated:function me(){return typeof this.getOAuthToken()==="string"&&this.getOAuthToken().length>0},resetAuth:function _e(){A()},needRefreshAuthToken:function ge(e,t){return!g&&typeof this.getRefreshToken()==="string"&&this.getRefreshToken().length>0&&!this.isAuthRequest(e)&&t==="invalid_grant"},needQueue:function ve(e){return g&&!this.isAuthRequest(e)},isAuthRequest:function ye(e){return new RegExp("/oauth2/").test(e)},isLoginRequest:function be(e){return new RegExp("/oauth2/token").test(e)},refreshingToken:function xe(e){return g&&this.isAuthRequest(e)},setRefreshingToken:function we(e){g=e},handleExternalLogin:function Le(e,t){var n=this;if(!n.isLoginRequest(request.params.url)){E.push(request)}n.setRefreshingToken(true);$(window).on("message",function(e){if(!e.originalEvent.origin||e.originalEvent.origin!==window.location.origin){return}$(window).on("message",null);authData=$.parseJSON(e.originalEvent.data);if(!authData||!authData.access_token){t()}n.setRefreshingToken(false);A(authData);a(function(){r=E.shift();while(r){r.execute(n.getOAuthToken());r=E.shift()}})});if(_.isFunction(x)){x(e.payload.url,"_blank","width=600,height=400,centerscreen=1,resizable=1")}},isExternalLogin:function Se(){return y},setExternalLogin:function Ee(e){y=e},setExternalLoginUICallback:function ke(e){if(_.isFunction(e)){x=e}},getStateProperty:function Te(e){return o[e]},setStateProperty:function Me(e,t){o[e]=t},clearStateProperty:function Ae(e){delete o[e]},resetState:function Ce(){o={}}}}return{getInstance:function w(t){return e||this.createInstance(t)},createInstance:function L(t){e=new d(t);if(!("crosstab"in window)||!crosstab.supported){return e}crosstab(function(){crosstab.on("auth:refresh",_.bind(function(){if(this._runningRefreshToken){return}this._runningRefreshToken=true;var e=this;this.login(null,{refresh:true},{complete:function t(){crosstab.broadcast("auth:refresh:complete","complete")},success:function n(){delete e._runningRefreshToken;crosstab.broadcast("auth:refresh:complete","success")},error:function i(){delete e._runningRefreshToken;crosstab.broadcast("auth:refresh:complete","error")}})},e))});return e},getCallsInProgressCount:function S(){return i},HttpError:l,HttpRequest:u}}();e.exports=n},function(e,t){var n=window.SUGAR;"use strict";var n=n||{};n.App=function(){var e,t={};var i=false;var r=[];var a=function o(e){return e instanceof $?e:$(e)};function s(e){var t=_.uniqueId("SugarApp_");e=e||{};return _.extend({appId:t,$rootEl:a(e.el||"body"),$contentEl:a(e.contentEl||"#content"),additionalComponents:{}},this,Backbone.Events)}return{init:function l(t){e=e||_.extend(this,new s(t));_.extend(e,e.beforeEvent);e.events.register("app:init",this);e.events.register("app:start",this);e.events.register("app:sync",this);e.events.register("app:sync:complete",this);e.events.register("app:sync:error",this);e.events.register("app:sync:public:error",this);e.events.register("app:login",this);e.events.register("app:login:success",this);e.events.register("app:logout",this);e.events.register("app:view:change",this);e.events.register("app:locale:change",this);e.events.register("lang:direction:change",this);if(e.cache){e.cache.init(this)}var i=e.utils.capitalize(e.config?e.config.appId:"")+"Controller";var r=this[i]||this.Controller;this.controller=new r;e.api=n.Api.getInstance({defaultErrorHandler:t&&t.defaultErrorHandler?t.defaultErrorHandler:n.App.error.handleHttpError,serverUrl:e.config.serverUrl,platform:e.config.platform,timeout:e.config.serverTimeout,keyValueStore:e[e.config.authStore||"cache"],clientID:e.config.clientID,disableBulkApi:e.config.disableBulkApi,externalLoginUICallback:t&&t.externalLoginUICallback});this._init(t);return e},_init:function u(t){var n=this;var i=function s(i){if(!e){return}if(i){n.trigger("app:sync:public:error",i);return}n._initModules();n._loadConfig();n._initRaven();if(!t.silent){e.trigger("app:init",n)}if(t.callback&&_.isFunction(t.callback)){t.callback(e)}};var r=function o(t){if(e.config.loadCss){e.loadCss(t)}else{t()}};if(e.config.syncConfig!==false){var a={getPublic:true};r(function(){e.metadata.sync(i,a)})}else{r(function(){i()})}return e},_initModules:function c(){_.each(t,function(e){if(_.isFunction(e.init)){e.init(this)}},this)},_loadConfig:function d(){e.config=e.config||{};e.config=_.extend(e.config,e.metadata.getConfig())},_initRaven:function f(){if(e.config.raven){e.raven.initialize(e.config.raven)}},loadCss:function h(t){e.api.css(e.config.platform,e.config.themeName,{success:function n(i){if(e.config.loadCss==="url"){_.each(i.url,function(t){$("<link>").attr({rel:"stylesheet",href:e.utils.buildUrl(t)}).appendTo("head")})}else{_.each(i.text,function(e){$("<style>").html(e).appendTo("head")})}if(_.isFunction(t)){t()}}})},start:function p(){e.events.registerAjaxEvents();e.trigger("app:start",this);e.routing.start()},destroy:function m(){if(Backbone.history){Backbone.history.stop()}e=null},augment:function g(n,i,r){this[n]=i;t[n]=i;if(r&&i.init&&_.isFunction(i.init)){i.init.call(i,e)}},sync:function v(t){var n=this;t=t||{};if(t.getPublic){return n.syncPublic(t)}if(t.callback){r.push(t.callback)}if(i){return}i=true;async.waterfall([function(i){
n.isSynced=false;n.trigger("app:sync");var r=!t.noUserUpdate&&(t.language||e.cache.get("langHasChanged"));if(r){var a=t.language||e.lang.getLanguage();n.user.updateLanguage(a,i);e.cache.cut("langHasChanged")}else{i()}},function(e){async.parallel([function(e){n.user.load(e)},function(e){n.metadata.sync(function(t){n.data.declareModels();e(t)},t)}],function(t){e(t)})},function(e){var t=n.metadata.getServerInfo();n.config.sugarLogic=n.config.sugarLogic||{};if(t&&n.config.sugarLogic.enabled&&n.utils.versionCompare(t.version,n.config.sugarLogic.minServerVersion,">=")){n.fetchSugarLogic(e)}else{n.config.sugarLogic.enabled=false;e()}}],function(e){if(e){n.trigger("app:sync:error",e)}else{n.isSynced=true;n.trigger("app:sync:complete")}_.each(r,function(t){t(e)});i=false;r=[]})},syncPublic:function y(e){e=e||{};e.getPublic=true;this.metadata.sync(e.callback,e)},navigate:function b(t,n,i){var r,a,s;t=t||e.controller.context;n=n||t.get("model");a=n.id;s=t.get("module")||n.module;r=this.router.buildRoute(s,a,i);this.router.navigate(r,{trigger:true})},login:function x(t,n,i){i=i||{};n=n||{};n.current_language=e.lang.getLanguage();e.api.login(t,n,{success:function r(n){e.trigger("app:login:success",n,t.username);if(i.success)i.success(n)},error:function a(t){e.error.handleHttpError(t);if(i.error)i.error(t)},complete:i.complete})},logout:function w(t,n,i){var r,a;t=t||{};r=t.complete;a=t.error;t.complete=function(t){e.trigger("app:logout",n);if(r){r(t)}};t.error=function(t){e.error.handleHttpError(t);if(a)a(t)};return e.api.logout(t,i)},fetchSugarLogic:function L(t){if(e.config.sugarLogic.isDynamic){e.api.call("read",e.api.buildURL("ExpressionEngine","functions"),null,{success:function n(i){e.cacheSugarLogicExpressions(i);e.loadSugarLogic(i,t)},error:function i(e){t(e)}},{dataType:"application/text"})}else t()},cacheSugarLogicExpressions:function S(t){e.cache.set("sugarlogic",t)},_loadSugarLogic:function E(){return e.cache.get("sugarlogic")},loadSugarLogic:function k(t,n){return e.compileJs(t||e._loadSugarLogic(),n)},compileJs:function T(t,n){try{eval.call(window,t);if(n)n()}catch(i){e.logger.fatal("Failed to compile js");if(n)n(i);return i}return null},isServerCompatible:function M(e){var t=this.config.supportedServerFlavors,n=this.config.minServerVersion,i,r,a;if(_.isEmpty(t)&&!n){return true}i=!!(_.isEmpty(t)||e&&_.contains(t,e.flavor));r=!!(!n||e&&this.utils.versionCompare(e.version,n,">="));if(i&&r){return true}else if(!r){a={code:"server_version_incompatible",label:"ERR_SERVER_VERSION_INCOMPATIBLE"}}else{a={code:"server_flavor_incompatible",label:"ERR_SERVER_FLAVOR_INCOMPATIBLE"}}a.server_info=e;return a},modules:t}}()},function(module,exports){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(app){var _doWhenStack=[],_doWhenLocked=false,_doWhenInterval=false,_doWhenretryCount=0,_startDoWhenInterval=function e(){if(!_doWhenInterval){_doWhenInterval=window.setInterval(app.utils._doWhenCheck,50)}};app.augment("utils",{capitalize:function t(e){return e?e.charAt(0).toUpperCase()+(e.length>1?e.substr(1):""):""},capitalizeHyphenated:function n(e){return this._classify(e,"-")},classify:function i(e){return this._classify(e,"_")},_classify:function r(e,t){var n=this,i="";t=t||"_";if(!e||e.lastIndexOf(t)===-1){i=n.capitalize(e)}else{var r=e.split(t);_.each(r,function(e){i+=n.capitalize(e)})}return i},extendClass:function a(e,t,n,i,r){var a;if(!_.isObject(i)){a=e[n]=t;return a}if(_.isObject(i.extendsFrom)){a=e[n]=i.extendsFrom.extend(i);return a}if(!i.extendsFrom){a=e[n]=t.extend(i);return a}var s=e[r+"Custom"+i.extendsFrom]||e[r+i.extendsFrom]||e["Custom"+i.extendsFrom]||e[i.extendsFrom];if(!s){app.logger.warn('The "'+i.extendsFrom+'" component was not found to be used as '+'the "'+n+"\"'s parent. Please update your code to point to an existing class.");s=t}a=e[n]=s.extend(i);return a},formatNumber:function s(e,t,n,i,r){t=t||n;var a=e;if(_.isNaN(e)||!_.isFinite(e)){return a}if(_.isString(e)){e=parseFloat(e,10);if(_.isNaN(e)){return a}}if(!_.isNumber(e)){if(!_.isNull(e)&&!_.isUndefined(e)){app.logger.warn("formatNumber: invalid variable type ("+(typeof a==="undefined"?"undefined":_typeof(a))+")")}return a}if(_.isString(n)){n=parseInt(n)}e=Big(e).toFixed(n);return _.isString(i)&&_.isString(r)?this.addNumberSeparators(e,i,r):e},formatNumberLocale:function o(e){return this.formatNumber(e,app.user.getPreference("decimal_precision")||2,app.user.getPreference("decimal_precision")||2,app.user.getPreference("number_grouping_separator")||",",app.user.getPreference("decimal_separator")||".")},formatName:function l(e,t){return t.replace(/(f)|(l)|(s)/g,function(t,n,i,r){if(n){return e.first_name||""}if(i){return e.last_name||""}if(r&&(e.last_name||e.first_name)){return e.salutation||""}return""}).replace(/^( )?,/g,"").replace(/, $/g,"").replace(/  /g," ").trim()},formatNameModel:function u(e,t,n){n=n||app.user.getPreference("default_locale_name_format");t=t||{};var i=app.metadata.getModule(e)||{fields:{}};var r=i.nameFormat||{};return _.reduce(n.split(""),function(e,n){if(n<"a"||n>"z"){return e+n}if(!r[n]){return e}var a,s=i.fields[r[n]]&&i.fields[r[n]].type==="enum"&&!_.isEmpty(i.fields[r[n]].options);if(s){var o=app.lang.getAppListStrings(i.fields[r[n]].options);a=o[t[r[n]]]||t[r[n]]||""}return e+(a||t[r[n]]||"")},"").replace(/^( )?,/g,"").replace(/, +$/g,"").replace(/  /g," ").trim()},formatNameLocale:function c(e){return this.formatName(e,app.user.getPreference("default_locale_name_format"))},addNumberSeparators:function d(e,t,n){var i=e.split(".");var r=/(\d+)(\d{3})/;while(t!==""&&r.test(i[0])){i[0]=i[0].toString().replace(r,"$1"+t+"$2")}return i[0]+(i.length>1&&i[1]!==""?n+i[1]:"")},unformatNumberString:function f(e,t,n,i){i=i||false;if(typeof t==="undefined"||typeof n==="undefined"){return e}if(!_.isString(e)){if(_.isFinite(e)){e.toString()}else{e=""}}if(t!==""){var r=new RegExp("\\"+t,"g");e=e.replace(r,"")}e=e.replace(n,".");if(e.length>0&&i){var a=parseFloat(e);if(a==e){return a}}return e},unformatNumberStringLocale:function h(e,t){return this.unformatNumberString(e,app.user.getPreference("number_grouping_separator")||",",app.user.getPreference("decimal_separator")||".",t)},formatString:function p(e,t){for(var n in t){e=e.replace("{"+n+"}",t[n])}return e},regexEscape:function m(e){if(typeof m.specialRegExp=="undefined"){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\","-",",","^","$","#"];m.specialRegExp=new RegExp("(\\"+t.join("|\\")+")","g")}return e.replace(m.specialRegExp,"\\$1")},generateUUID:function g(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})},cookie:{setCookie:function v(e,t,n,i){var r=new Date,a;r.setDate(r.getDate()+n);a=encodeURIComponent(t);if(n){a+="; expires="+r.toUTCString()}if(i){a+="; path="+i}document.cookie=e+"="+a},getCookie:function y(e){var t,n,i,r=document.cookie.split(";");for(t=0;t<r.length;t++){n=r[t].substr(0,r[t].indexOf("="));i=r[t].substr(r[t].indexOf("=")+1);n=n.replace(/^\s+|\s+$/g,"");if(n===e){return decodeURIComponent(i)}}}},isValidEmailAddress:function b(e){return/^.+@.+$/gi.test(e)},doWhen:function x(e,t,n,i){_doWhenStack.push({check:e,fn:t,obj:n,overrideContext:i});_doWhenretryCount=50;_startDoWhenInterval()},_doWhenCheck:function _doWhenCheck(){if(_doWhenStack.length===0){_doWhenretryCount=0;if(_doWhenInterval){clearInterval(_doWhenInterval);_doWhenInterval=null}return}if(_doWhenLocked){return}_doWhenLocked=true;var tryAgain=$.isReady;if(!tryAgain){tryAgain=_doWhenretryCount>0&&_doWhenStack.length>0}var notAvail=[];var executeItem=function e(t,n){if(n.overrideContext){if(n.overrideContext===true){t=n.obj}else{t=n.overrideContext}}if(n.fn){n.fn.call(t,n.obj)}};var i,len,item,test;for(i=0,len=_doWhenStack.length;i<len;i=i+1){item=_doWhenStack[i];if(item){test=item.check;if(typeof test=="string"&&eval(test)||typeof test=="function"&&test()){executeItem(this,item);_doWhenStack[i]=null}else{notAvail.push(item)}}}_doWhenretryCount--;if(tryAgain){for(i=_doWhenStack.length-1;i>-1;i--){item=_doWhenStack[i];if(!item||!item.check){_doWhenStack.splice(i,1)}}_startDoWhenInterval()}else{if(_doWhenInterval){clearInterval(_doWhenInterval);_doWhenInterval=null}}_doWhenLocked=false},versionCompare:function w(e,t,n){return version_compare(e,t,n)},extendFrom:function L(e,t,n){e.prototype=new t;_.extend(e.prototype,n)},deepCopy:function S(e){return _.isObject(e)?JSON.parse(JSON.stringify(e)):e},compareBeans:function E(e,t){var n;if(e.module!==t.module){throw Error("Only beans of the same module can be compared.")}n=_.reduce(e.attributes,function(n,i,r){if(r!=="id"&&r.indexOf("_")!==0){if(!this.areBeanValuesEqual(i,t.get(r))&&this.hasDefaultValueChanged(r,e)){n.push(r)}}return n},[],this);return n},areBeanValuesEqual:function k(e,t){var n=function i(e){if(_.isObject(e)&&_.isEmpty(e)){return""}else if(!_.isObject(e)&&(_.isUndefined(e)||_.isNull(e))){return""}else{return e}};e=n(e);t=n(t);return _.isObject(e)&&_.isEqual(e,t)||!_.isObject(e)&&e===t},hasDefaultValueChanged:function T(e,t){var n=t._defaults?t._defaults[e]:"";return!this.areBeanValuesEqual(n,t.get(e))},isConnectivityError:function M(e){return e.status===0||e.textStatus==="timeout"},getTimestamp:function A(e,t){t=t||{};var n=e?new Date(e):new Date,i=n.toISOString();if(!t.msecPrecision){i=i.replace(/\.\d{3}/,"")}return i.replace(/Z/,"+00:00")},buildUrl:function C(e){if(e.indexOf("http")!==0&&!_.isEmpty(app.config.siteUrl)){e=app.config.siteUrl.replace(/\/+$/,"")+"/"+e}return e},getChangedProps:function R(e,t,n){function i(e){if(_.isObject(e)){if(_.isArray(e)){return"array"}return"object"}return"other"}function r(e,t){if(n)return _.isEqual(e,t);var a=i(e),s=i(t);if(a===s&&_.contains(["object","array"],a)){if(a==="array"&&e.length!==t.length){return false}var o=_.keys(e),l=_.keys(t);if(o.length!==l.length||!_.isEqual(o.sort(),l.sort())){return false}return!_.any(e,function(n,i){return!r(e[i],t[i])})}else{return n?e===t:e==t}}var a={};_.each(e,function(n,i){if(!r(e[i],t[i])){a[i]=n}});return a},getParentLayout:function D(e){var t;if(e.view&&e.view.layout){t=e.view.layout}else{t=e.layout}return t},isSortable:function I(e,t){var n=app.metadata.getModule(e).fields[t.name],I=true;if(n&&!_.isUndefined(n.sortable)){I=n.sortable}if(t&&!_.isUndefined(t.sortable)){I=t.sortable}return I},stripHttpPrefix:function O(e){return e.replace(/^https?:\/\//,"")},hardRefresh:function N(){window.location.reload(true)},isDirectionRTL:function F(e){var t="A-Za-z-----"+"---",n="---",i=new RegExp("^[^"+t+"]*["+n+"]");return i.test(e)}})})(SUGAR.App)},function(e,t){"use strict";(function(e){var t="";var n=function a(e){return t+e};var i=_.extend({},store,{cut:store.remove,cutAll:store.clear});var r={store:i,init:function s(){t=e.config.env+":"+e.config.appId+":";e.events.register("cache:clean",this)},has:function o(e){e=n(e);return this.store===store?window.localStorage.getItem(e)!==null:this.store.has(e)},get:function l(e){return this.store.get(n(e))},set:function u(e,t){e=n(e);try{this.store.set(e,t)}catch(i){if(i.name.toLowerCase().indexOf("quota")>-1){this.clean();this.store.set(e,t)}}},clean:function c(){var e=[],t={};this.trigger("cache:clean",function(t){e=_.union(t,e)});_.each(e,function(e){t[e]=this.get(e)},this);this.cutAll();_.each(t,function(e,t){if(!_.isUndefined(e)){this.set(t,e)}},this)},cut:function d(e){e=n(e);if(this.store.has(e)){this.store.cut(e)}},cutAll:function f(e){if(e===true){return this.store.cutAll()}var n=this.store.getAll();_.each(n,function(e,n){if(n.indexOf(t)===0){this.store.cut(n)}},this)}};_.extend(r,Backbone.Events);e.augment("cache",r)})(SUGAR.App)},function(e,t){"use strict";(function(e){e.augment("events",_.extend({},Backbone.Events,{_deprecated:{},register:function t(e,n,i){if(i&&i.deprecated){this._deprecated[e]=_.pick(i,"message")}n.on(e,function(){var t=[].slice.call(arguments,0);t.unshift(e);this.trigger.apply(this,t)},this)},unregister:function n(e,t){e.off(t)},registerAjaxEvents:function i(){var e=this;$(document).off("ajaxStop");$(document).off("ajaxStart");$(document).on("ajaxStart",function(t){e.trigger("ajaxStart",t)});$(document).on("ajaxStop",function(t){e.trigger("ajaxStop",t)})},on:_.wrap(Backbone.Events.on,function(t,n,i,r){if(_.has(this._deprecated,n)){var a;if(this._deprecated[n].message){a=this._deprecated[n].message}else{a="The global event `"+n+"` is deprecated."}if(r){a+="\n"+r+" should not listen to it anymore."}e.logger.warn(a)}return t.call(this,n,i,r)})}))})(SUGAR.App)},function(e,t){"use strict";var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(e){var t=/\s+/;var i=function a(e,i,r,s){if(!r)return true;if((typeof r==="undefined"?"undefined":n(r))==="object"){for(var o in r){e[i].apply(e,[o,r[o]].concat(s))}return false}if(t.test(r)){var l=r.split(t);for(var u=0,c=l.length;u<c;u++){e[i].apply(e,[l[u]].concat(s))}return false}return true};var r=function s(e,t){var n=false;var i,r=-1,a=e.length;switch(t.length){case 0:case 1:case 2:case 3:while(++r<a){n=(i=e[r]).callback.call(i.ctx,t[0],t[1],t[2])===false||n}break;default:while(++r<a){n=(i=e[r]).callback.apply(i.ctx,t)===false||n}}return!n};_.extend(e,{beforeEvent:{before:function o(e,t,n){if(!i(this,"before",e,[t,n])||!t){return this}this._before=this._before||{};var r=this._before[e]||(this._before[e]=[]);r.push({callback:t,context:n,ctx:n||this});return this},triggerBefore:function l(e){var n=false;if(!this._before){return!n}var i=Array.prototype.slice.call(arguments,1);if(t.test(e)){var a=e.split(t);for(var s=0,o=a.length;s<o;s++){n=!this.triggerBefore.apply(this,[a[s]].concat(i))||n}return!n}var l=this._before[e];var u=this._before.all;if(l){n=r(l,i)===false}if(u){n=r(u,i)===false||n}return!n},offBefore:function u(e,t,n){var r,a,s,o,l,u,c,d;if(!this._before||!i(this,"offBefore",e,[t,n])){return this}if(!e&&!t&&!n){this._before=void 0;return this}o=e?[e]:_.keys(this._before);for(l=0,u=o.length;l<u;l++){e=o[l];s=this._before[e];if(s){this._before[e]=r=[];if(t||n){for(c=0,d=s.length;c<d;c++){a=s[c];if(t&&t!==a.callback||n&&n!==a.ctx){r.push(a)}}}if(!r.length){delete this._before[e]}}}return this}}})})(SUGAR.App)},function(e,t){"use strict";(function(e){var t={plugins:{view:{},field:{},layout:{},model:{},collection:{}},_get:function n(e,t){if(this.plugins[t]&&this.plugins[t][e]){return this.plugins[t][e]}},attach:function i(e,t){_.each(e.plugins,function(n){var i=null;if(_.isObject(n)){var r=_.keys(n)[0];i=n[r];n=r}var a=this._get(n,t);if(a&&!this._isPluginDisabled(e,n)){var s=_.extend({},_.isFunction(e.events)?e.events():e.events,a.events);_.extend(e,a);if(i){_.extend(e,i);if(i.events){_.extend(s,i.events)}}e.events=s;if(_.isFunction(a.onAttach)){a.onAttach.call(e,e,a)}}},this)},detach:function r(e,t){_.each(e.plugins,function(n){var i=this._get(n,t);if(i&&_.isFunction(i.onDetach)){i.onDetach.call(e,e,i)}},this)},_isPluginDisabled:function a(e,t){return!!_.find(e.disabledPlugins,function(e){return e===t})},register:function s(e,t,n){if(!_.isArray(t)){t=[t]}_.each(t,function(t){this.plugins[t]=this.plugins[t]||{};this.plugins[t][e]=n},this)}};e.augment("plugins",t,false)})(SUGAR.App)},function(e,t){"use strict";(function(e){var t={init:function n(){this.initialize()},initialize:function i(e){e=e||{};this.remoteLogging=e.remoteLogging||false;this.statusCodes=e.statusCodes?_.extend(this.statusCodes,e.statusCodes):this.statusCodes;if(!e.disableOnError){this.enableOnError()}},_callCustomHandler:function r(e,t,n){if(t){t.apply(this,_.union([e],n||[]))}else{this.handleStatusCodesFallback(e)}},_handleFineGrainedError:function a(t,n){var i="handle"+e.utils.classify(t.code)+"Error";(this[i]||n||this.handleStatusCodesFallback).call(this,t)},statusCodes:{0:function s(e,t,n){if(e.textStatus==="timeout"){this._callCustomHandler(e,this.handleTimeoutError)}else{this.handleStatusCodesFallback(e,t,n)}},400:function o(e){this._handleFineGrainedError(e,this.handleUnspecified400Error)},401:function l(e){this._handleFineGrainedError(e,this.handleUnauthorizedError)},403:function u(e){this._callCustomHandler(e,this.handleForbiddenError)},404:function(e){function t(t){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(e){this._callCustomHandler(e,this.handleNotFoundError,_.rest(arguments))}),405:function c(e){this._callCustomHandler(e,this.handleMethodNotAllowedError)},409:function d(e){this._callCustomHandler(e,this.handleMethodConflictError)},412:function f(e){this._callCustomHandler(e,this.handleHeaderPreconditionFailed)},422:function(e){function t(t,n){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(e,t){e.model=t;this._callCustomHandler(e,this.handleValidationError,_.rest(arguments))}),424:function(e){function t(t,n){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(e,t){e.model=t;this._callCustomHandler(e,this.handleMethodFailureError,_.rest(arguments))}),500:function h(e){this._callCustomHandler(e,this.handleServerError)},502:function p(e){this._callCustomHandler(e,this.handleServerError)},503:function m(e){this._callCustomHandler(e,this.handleServerError)}},remoteLogging:false,errorName2Keys:{maxValue:"ERROR_MAXVALUE",minValue:"ERROR_MINVALUE",maxLength:"ERROR_MAX_FIELD_LENGTH",minLength:"ERROR_MIN_FIELD_LENGTH",datetime:"ERROR_DATETIME",required:"ERROR_FIELD_REQUIRED",email:"ERROR_EMAIL",primaryEmail:"ERROR_PRIMARY_EMAIL",duplicateEmail:"ERROR_DUPLICATE_EMAIL",number:"ERROR_NUMBER",isBefore:"ERROR_IS_BEFORE",isAfter:"ERROR_IS_AFTER",greaterThan:"ERROR_IS_GREATER_THAN",lessThan:"ERROR_IS_LESS_THAN"},getErrorString:function g(t,n){var i=n.module||"";return e.lang.get(this.errorName2Keys[t]||t,i,n)},handleValidationError:function v(t){var n=t.responseText;e.alert.dismissAll();_.each(n,function(t,n){var i="";if(_.isObject(t)){_.each(t,function(e,t){i+="(Message) "+this.getErrorString(t,e)+"\n"},this)}else{i=t}e.logger.debug("validation failed for field `"+n+"`:\n"+i)},this)},handleHttpError:function y(t,n,i){if(e.error.statusCodes[t.status]){e.error.statusCodes[t.status].call(e.error,t,n,i)}else{e.error.handleStatusCodesFallback(t)}},handleUnhandledError:function b(t,n,i){e.logger.fatal(t+" at "+n+" on line "+i)},handleStatusCodesFallback:function x(t){e.logger.error(t.toString())},handleRenderError:function w(t,n,i){var r="render_error_"+t.module+"_"+t.name;var a="error";var s,o;switch(n){case"_renderHtml":s=e.lang.get("ERR_RENDER_FAILED_TITLE");o=[e.lang.get("ERR_RENDER_FAILED_MSG"),e.lang.get("ERR_CONTACT_TECH_SUPPORT")];break;case"_renderField":s=e.lang.get("ERR_RENDER_FIELD_FAILED_TITLE");o=[e.utils.formatString(e.lang.get("ERR_RENDER_FIELD_FAILED_MSG"),[i.name]),e.lang.get("ERR_CONTACT_TECH_SUPPORT")];break;case"view_render_denied":s=e.lang.get("ERR_NO_VIEW_ACCESS_TITLE");a="warning";var l=e.lang.getModuleName(t.module,{plural:true});o=[e.utils.formatString(e.lang.get("ERR_NO_VIEW_ACCESS_MSG"),[l])];break;case"layout_render":s=e.lang.get("ERR_LAYOUT_RENDER_TITLE");o=[e.lang.get("ERR_LAYOUT_RENDER_MSG")];break;default:s=e.lang.get("ERR_GENERIC_TITLE");o=[e.lang.get("ERR_INTERNAL_ERR_MSG"),e.lang.get("ERR_CONTACT_TECH_SUPPORT")];e.logger.error("handleRenderError called for render error caught in "+n+", but we have no corresponding handler!");break}e.alert.show(r,{level:a,title:s,messages:o})},enableOnError:function L(e,t){var n;var i=this;if(this.overloaded){return false}n=window.onerror;window.onerror=function(r,a,s){if(e){e.call(t)}else{i.handleUnhandledError(r,a,s)}if(n){n()}};this.overloaded=true;return true},throwErrorWithCallStack:function S(e,t){if(_.isString(e)){e=new Error(e)}e.message=e.message+"; "+e.stack;if(t){return e}throw e}};e.augment("error",t,false)})(SUGAR.App)},function(module,exports){"use strict";(function(app){var _header="(function() {\n  var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n",_footer="})();",_templates={},_sources={},_templateManager;_templateManager={init:function init(){_templates=app.config.cacheMeta?app.cache.get("templates")||{}:{};var src="";_.each(_templates,function(e){src+=e});try{eval(_header+src+_footer)}catch(e){app.logger.error("Failed to eval templates retrieved from local storage:\n"+e)}},_add:function e(t,n,i){var r=t[0],a=this.get(r,false);if(a&&!i){return}if(a&&i&&_sources[r]!=n){_templates[r]=Handlebars.templates[r]=null}_sources[r]=n},_compile:function t(e,n,i){Handlebars.templates=Handlebars.templates||{};_templates[e[0]]=Handlebars.templates[e[0]]=i||!e[1]?this.compile(e[0],n):e[1];return _templates[e[0]]},compile:function compile(key,src){try{_templates[key]="templates['"+key+"'] = template("+Handlebars.precompile(src)+");\n";eval(_header+_templates[key]+_footer)}catch(e){app.logger.error("Failed to compile or eval template "+key+".\n"+e)}return this.get(key,false)||this.empty},get:function n(e,t){t=_.isUndefined(t)||t;if(t&&!Handlebars.templates[e]&&_sources[e]){this._compile([e],_sources[e])}return Handlebars.templates?Handlebars.templates[e]:null},_getView:function i(e,t,n){var i=e+(t?"."+t:"");return[i,this.get(i,n)]},getView:function r(e,t){return this._getView(e,t,true)[1]},_getField:function a(e,t,n,i,r,s){var o,l="f."+e+".",u=l+(n?n+".":"")+t;n+=".";o=this.get(l+n+t,s)||this.get(l+t,s);if(!o&&!r){o=this.get(l+n+i,s)||this.get(l+i,s);if(!o){o=this.get("f.base."+t,s)||this.get("f.base."+i,s)}}return[u,o]},getField:function s(e,t,n,i){return this._getField(e,t,n,i,false,true)[1]},_getLayout:function o(e,t,n){var i="l."+(t?t+".":"")+e;return[i,this.get(i,n)]},getLayout:function l(e,t){return this._getLayout(e,t,true)[1]},setView:function u(e,t,n,i){return this._add(this._getView(e,t,false),n,i)},setField:function c(e,t,n,i,r){return this._add(this._getField(e,t,n,null,true,false),i,r)},setLayout:function d(e,t,n,i){return this._add(this._getLayout(e,t,false),n,i)},set:function f(e,t){if(e.views){_.each(e.views,function(e,n){if(n!="_hash"){_.each(e.templates,function(e,i){i=n==i?i:n+"."+i;this.setView(i,null,e,t)},this)}},this)}if(e.fields){_.each(e.fields,function(e,n){if(n!="_hash"){_.each(e.templates,function(e,i){this.setField(n,i,null,e,t)},this)}},this)}if(e.layouts){_.each(e.layouts,function(e,n){if(n!="_hash"){_.each(e.templates,function(e,i){i=n==i?i:n+"."+i;this.setLayout(i,null,e,t)},this)}},this)}},empty:function h(){return""}};app.augment("template",_templateManager)})(SUGAR.App)},function(e,t){"use strict";(function(e){e.Context=Backbone.Model.extend({initialize:function t(e){Backbone.Model.prototype.initialize.call(this,e);this.id=this.cid;this.parent=null;this.children=[];this._fetchCalled=false},clear:function n(e){var t=this.get("collection");if(t){t.abortFetchRequest()}e=_.extend({clearAllListeners:true},e||{});_.each(this.children,function(t){t.clear(e)});this.children=[];this.parent=null;_.each(this.attributes,function(t){if(t&&t.off===Backbone.Events.off){if(e.clearAllListeners){t.off();if(_.isFunction(t.dispose)){t.dispose()}}else{t.off(null,null,this)}}},this);delete e.clearAllListeners;this.off();Backbone.Model.prototype.clear.call(this,e);this.resetLoadFlag()},resetLoadFlag:function i(t){if(_.isBoolean(t)){e.logger.warn("`Core.Context#resetLoadFlag` has changed signature since 7.8 "+"and will drop support for old signature in 7.9. Please update your code.");t={recursive:t}}t=t||{};var n=_.isUndefined(t.recursive)?true:t.recursive;var i=_.isUndefined(t.resetModel)?true:t.resetModel;var r=_.isUndefined(t.resetCollection)?true:t.resetCollection;this._fetchCalled=false;if(this.get("model")&&i){this.get("model").dataFetched=false}if(this.get("collection")&&r){this.get("collection").dataFetched=false}if(n){_.each(this.children,function(e){e.resetLoadFlag()})}},isCreate:function r(){return this.get("create")===true},getChildContext:function a(t){t=t||{};var n;var i=t.forceNew||false;delete t.forceNew;var r=t.cid||t.name||t.link||t.module;if(r&&!i){n=_.find(this.children,function(e){return e.cid==r||e.get("link")==r||e.get("module")==r})}if(!n){t=_.extend({fetch:this.get("fetch")},t);n=e.context.getContext(t);this.children.push(n);n.parent=this}if(t.link){var a=this.get("model");n.set({parentModel:a,parentModule:a?a.module:null})}else if(!t.module){n.set({module:this.get("module")})}this.trigger("context:child:add",n);return n},prepare:function s(e){if(!e&&(this.get("model")||this.get("collection")))return;var t=this.get("modelId"),n=this.get("create"),i=this.get("link");this.set(i?this._prepareRelated(i,t,n):this._prepare(t,n));return this},setFetch:function o(e,t){t=t||{};this.set("fetch",e);var n=t.recursive===void 0?true:t.recursive;if(n){_.each(this.children,function(t){t.setFetch(e)})}},_prepare:function l(t,n){var i,r,a=this.get("module"),s=this.get("mixed"),o;if(t){i=e.data.createBean(a,{id:t});o=[i]}else if(n===true){i=e.data.createBean(a);o=[i]}else{i=e.data.createBean(a)}r=s===true?e.data.createMixedBeanCollection(o):e.data.createBeanCollection(a,o);return{collection:r,model:i}},_prepareRelated:function u(t,n,i){var r,a,s=this.get("parentModel");s=s||e.data.createBean(this.get("parentModule"),{id:this.get("parentModelId")});if(n){r=e.data.createRelatedBean(s,n,t);a=e.data.createRelatedCollection(s,t,[r])}else if(i===true){r=e.data.createRelatedBean(s,null,t);a=e.data.createRelatedCollection(s,t,[r])}else{r=e.data.createRelatedBean(s,null,t);a=e.data.createRelatedCollection(s,t)}if(!this.has("parentModule")){this.set({parentModule:s.module},{silent:true})}if(!this.has("module")){this.set({module:r.module},{silent:true})}return{parentModel:s,collection:a,model:r}},addFields:function c(e){if(!e){return}var t=_.union(e,this.get("fields")||[]);return this.set("fields",t)},loadData:function d(t){t=t||{};if(!t.forceFetch&&!this._shouldFetch()){return}delete t.forceFetch;var n,i=this.get("modelId"),r=this.get("module"),a=e.config.orderByDefaults&&r?e.config.orderByDefaults[r]:null;n=i?this.get("model"):this.get("collection");if(a&&n instanceof e.BeanCollection&&!n.orderBy){n.orderBy=a}if(n&&(n instanceof e.Bean||n instanceof e.BeanCollection)){if(this.get("dataView")&&_.isString(this.get("dataView"))){n.setOption("view",this.get("dataView"))}if(this.get("fields")){n.setOption("fields",this.get("fields"))}if(this.get("limit")){n.setOption("limit",this.get("limit"))}if(this.get("module_list")){n.setOption("module_list",this.get("module_list"))}if(this.get("viewed")){n.setOption("viewed",this.get("viewed"))}t.context=this;if(this.get("skipFetch")!==true){n.fetch(t)}this._fetchCalled=true}else{e.logger.warn("Skipping fetch because model is not Bean, Bean Collection, or it is not defined, module: "+this.get("module"))}},_shouldFetch:function f(){return(this.get("fetch")===void 0||this.get("fetch"))&&!this.isDataFetched()&&!this.get("create")},reloadData:function h(e){e=e||{};this.resetLoadFlag(e);this.loadData(e);this.trigger("reload",this,e)},isDataFetched:function p(){var e=this.get("modelId")?this.get("model"):this.get("collection");return this._fetchCalled||e&&!!e.dataFetched}});e.augment("context",{getContext:function m(t){return new e.Context(t)}})})(SUGAR.App)},function(e,t){"use strict";(function(e){var t=Backbone.View.extend({initialize:function n(){this.context=e.context.getContext();e.events.on("app:sync:complete",function(){e.api.setStateProperty("loadingAfterSync",true);_.each(e.additionalComponents,function(e){if(e&&_.isFunction(e._setLabels)){e._setLabels()}e.render()});e.router.reset();e.api.clearStateProperty("loadingAfterSync")});e.events.on("app:login:success",function(){e.sync()})},loadView:function i(t){var n=this.layout;if(!e.triggerBefore("app:view:change")||!e.triggerBefore("app:view:load")){return}this.context.clear({silent:true});this.context.set(t);this.context.prepare();this.layout=e.view.createLayout({name:t.layout,module:t.module,context:this.context});if(n){var i=document.createDocumentFragment();i.appendChild(n.el)}e.$contentEl.append(this.layout.$el);this.layout.initComponents();if(!t||t&&!t.skipFetch){this.layout.loadData()}this.layout.render();if(n){n.dispose()}e.trigger("app:view:change",t.layout,t)},loadAdditionalComponents:function r(t){if(!_.isEmpty(e.additionalComponents)){e.logger.error("`app.controller.loadAdditionalComponents` has already been called. It can not be called twice.");return}e.additionalComponents={};_.each(t,function(t,n){if(t.target){var i=this.$(t.target);if(!i.get(0)){e.logger.error('Unable to place additional component "'+n+'": the target specified does not exist.');return}if(t.layout){e.additionalComponents[n]=e.view.createLayout({context:this.context,type:t.layout,el:i});e.additionalComponents[n].initComponents()}else{e.additionalComponents[n]=e.view.createView({type:t.view||n,context:this.context,el:i})}e.additionalComponents[n].render()}else{e.logger.error('Unable to place additional component "'+n+'": no target specified.')}},this)}});e.augment("Controller",t,false);e.events.on("app:init",function(e){e.controller.setElement(e.$rootEl)},e.controller).on("app:start",function(e){e.controller.loadAdditionalComponents(e.config.additionalComponents)})})(SUGAR.App)},function(e,t){"use strict";(function(e){var t;e.augment("routing",{beforeRoute:function n(t,i){if(!this.triggerBefore("route",{route:t,args:i}))return false;if(_.indexOf(e.config.unsecureRoutes,t)>=0)return true;if(!e.api.isAuthenticated()){e.router.login();return false}else if(!e.isSynced){Backbone.history.stop();e.sync();return false}return true},after:function i(e,t){},setRoutes:function r(n){e.logger.warn("Core.Routing#setRoutes is deprecated since 7.8 and will be removed in 7.9. "+"Please use Core.Router#addRoutes.");t=n},start:function a(){var n={};if(t){n.customRoutes=t}e.augment("router",new e.Router(n),false);e.events.trigger("router:start",e.router);e.router.init();e.router.start()},stop:function s(){e.router.stop();t=[]}});_.extend(e.routing,e.beforeEvent);e.Router=Backbone.Router.extend({initialize:function o(t){t=t||{};this._previousFragment="";this._currentFragment="";if(t.customRoutes){e.logger.warn('Core.Router\'s option "customRoutes", is deprecated since 7.8 and will be removed in 7.9. '+"Please use addRoutes.");this._initRoutes=t.customRoutes}},_routeHandler:function l(t){var n=Array.prototype.slice.call(arguments,1),i=t.route;if(e.routing.beforeRoute(i,n)){this._previousFragment=this._currentFragment;this._currentFragment=this.getFragment();t.apply(this,n);e.routing.after(i,n)}},_moduleExists:function u(t){if(t&&_.isUndefined(e.metadata.getModule(t))){e.error.handleHttpError({status:404});return false}return true},_addDefaultRoutes:function c(){var t=[{name:"notFound",route:/^.*$/,callback:function n(){e.error.handleHttpError({status:404})}}];this.addRoutes(t)},route:function d(t,n,i){if(!n){e.logger.warn("Route names will be required in 7.9.")}else if(!_.isEmpty(this._routes[n])){e.logger.error('Route "'+n+'" is being overridden. This is highly NOT advisable.')}this._routes[n]=i;if(!i){i=this[n]}i.route=n;i=_.wrap(i,this._routeHandler);Backbone.Router.prototype.route.call(this,t,n,i)},getFragment:function f(){return Backbone.history.getFragment()},navigate:function h(e,t){Backbone.Router.prototype.navigate.apply(this,arguments);if(!(t&&t.trigger)){this._previousFragment=this._currentFragment;this._currentFragment=this.getFragment()}return this},getPreviousFragment:function p(){return this._previousFragment},goBack:function m(){e.logger.debug("Navigating back...");window.history.back()},go:function g(e){window.history.go(e)},init:function v(){this._routes={};this._addDefaultRoutes();if(this._initRoutes){this.addRoutes(this._initRoutes)}if(this.customRoutes){e.logger.warn('Core.Router\'s option "customRoutes", is deprecated since 7.8 and will be removed in 7.9. '+"Please use addRoutes.");

this.addRoutes(this.customRoutes)}e.events.trigger("router:init")},start:function y(){if(!Backbone.History.started){Backbone.history.start()}},stop:function b(){Backbone.history.stop()},reset:function x(){e.router.stop();t=[];Backbone.history.handlers=[];e.router.init();e.router.start()},addRoutes:function w(e){if(!e)return;var t=e.reverse();_.each(t,function(e){this.route(e.route,e.name,e.callback)},this)},get:function L(e){return this._routes[e]},refresh:function S(){Backbone.history.loadUrl(Backbone.history.fragment)},buildRoute:function E(t,n,i){var r;if(e.utils&&_.isFunction(e.utils.customBuildRoute)){r=e.utils.customBuildRoute.apply(this,arguments);if(!_.isEmpty(r)){return r}}if(t){r=_.isString(t)?t:t.get("module");if(n){r+="/"+n}if(i){r+="/"+i}}else{r=i}return r},index:function k(){e.logger.debug("Route changed to index");if(e.config.defaultModule){this.navigate(e.config.defaultModule,{trigger:true})}else if(e.acl.hasAccess("read","Home")){this.navigate("Home",{trigger:true})}},list:function T(t){if(!this._moduleExists(t)){return}e.logger.debug("Route changed to list of "+t);e.controller.loadView({module:t,layout:"records"})},layout:function M(t,n){if(!this._moduleExists(t)){return}e.logger.debug("Route changed to layout: "+n+" for "+t);e.controller.loadView({module:t,layout:n})},create:function A(t){if(!this._moduleExists(t)){return}e.logger.debug("Route changed: create "+t);e.controller.loadView({module:t,create:true,layout:"edit"})},login:function C(){e.logger.debug("Logging in");e.controller.loadView({module:"Login",layout:"login",create:true});e.events.trigger("app:login");if(e.config.externalLogin){e.api.ping(null,{success:function t(){e.events.trigger("app:login:success");e.router.refresh()},error:function n(){e.alert.show("needs_login_error",{level:"error",messages:e.lang.getAppString("LBL_PORTAL_INVALID_CREDS_TITLE"),title:e.lang.get("LBL_PORTAL_INVALID_CREDS_TITLE")})}})}},logout:function R(t){if(!e.api.isAuthenticated()){this.redirect("/");return}t=t==="1";e.logger.debug("Logging out: "+t);e.logout({complete:function n(){e.router.navigate("#");if(t){window.location.reload()}else{if(e.config.externalLogin){e.controller.loadView({module:"Login",layout:"logout",skipFetch:true,create:true})}else{e.router.login()}}},success:function i(t){e.events.trigger("app:logout:success",t)}},t)},record:function D(t,n,i,r){if(!this._moduleExists(t)){return}var a=e.controller.context.get("collection"),s=e.controller.context.get("listCollection"),o={module:t,layout:r||"record",action:i||"detail"};if(n!=="create"){_.extend(o,{modelId:n})}else{_.extend(o,{create:true});o.layout="create"}if(a&&a.module===t&&a.get(n)){o.listCollection=a}if(s&&s.module===t&&s.get(n)){o.listCollection=s}e.controller.loadView(o)},redirect:function I(e,t){this.navigate(e,_.extend({trigger:true,replace:true},t))}})})(SUGAR.App)},function(e,t){"use strict";(function(e){e.augment("lang",{direction:"ltr",get:function t(e,n,i){var r=this.getModString(e,n,i)||this.getAppString(e,i)||e;return r},getModString:function n(e,t,i){var r;if(_.isArray(t)){_.find(t,function(t){r=this._get("mod_strings",e,t,i);return!_.isEmpty(r)},this)}else{r=this._get("mod_strings",e,t,i)}return r},getAppString:function i(e,t){return this._get("app_strings",e,null,t)},getAppListStrings:function r(t){var n=e.metadata.getStrings("app_list_strings")[t]||{};if(_.isArray(n)){var i={};_.each(n,function(e){if(_.isString(e)){i[e]=e}else if(_.isArray(e)&&e.length===2){i[e[0]]=e[1]}});n=i}return n},getModuleName:function a(e,t){t=t||{};var n=!t.plural&&this.getModString("LBL_MODULE_NAME_SINGULAR",e)||this.getModString("LBL_MODULE_NAME",e);if(!n&&!_.isUndefined(t.defaultValue)){n=this.get(t.defaultValue)}return n||e},getAppListKeys:function s(t){var n=[],i=e.metadata.getStrings("app_list_strings")[t]||{};if(_.isArray(i)){_.each(i,function(e){if(e.length===2){n.push(e[0])}})}else if(_.isObject(i)){n=_.keys(i)}return n},_get:function o(t,n,i,r){var a,s=e.metadata.getStrings(t);s=i?s[i]:s;if(!s||!_.isString(s[n])){return}a=this._sanitize(s[n]);if(!_.isUndefined(r)&&a.indexOf("{{")>-1){n="lang."+(i?n+"."+i:n);var o=Handlebars.templates[n];a=o?o(r):e.template.compile(n,a)(r)}return a},_sanitize:function l(e){return e.slice(-1)===":"?e.slice(0,-1):e},getLanguage:function u(){return this._currentLanguage},setLanguage:function c(t,n,i){var r=this;i=i||{};_.each(Handlebars.templates,function(e,t){if(t.indexOf("lang.")===0){delete Handlebars.templates[t]}});if(i.noSync===true){this.updateLanguage(t);return}e.sync({callback:function a(s){var o=false;if(!s){r.updateLanguage(t);o=!e.api.isAuthenticated()&&!i.noUserUpdate;e.cache.set("langHasChanged",o)}if(n)n(s)},getPublic:!e.api.isAuthenticated(),noUserUpdate:i.noUserUpdate||false,language:t,forceRefresh:true,metadataTypes:["labels"]})},updateLanguage:function d(t){e.cache.set("lang",t);e.user.setPreference("language",t);this.setCurrentLanguage(t);e.trigger("app:locale:change",t)},setDefaultLanguage:function f(e){this._defaultLanguage=e},getDefaultLanguage:function h(){return this._defaultLanguage},setCurrentLanguage:function p(e){this._currentLanguage=e;this.setDirection(e)},setDirection:function m(t){var n=["he_IL","ar_SA"],i=_.contains(n,t),r=this.direction;this.direction=i?"rtl":"ltr";if(this.direction!==r){e.trigger("lang:direction:change")}}})})(SUGAR.App)},function(module,exports){"use strict";(function(app){var _keyPrefix="meta:";var _metadata={};var _mdLoaded={};var _syncing=false;function _setHash(e,t){var n=t?"public:":"";app.cache.set(_keyPrefix+n+"hash",e._hash)}function _cacheMeta(e){app.cache.set(_keyPrefix+"data",e)}function _getCachedMeta(){return app.cache.get(_keyPrefix+"data")}function _injectLabels(e,t){_.each(t,function(n,i){if(i!=="_hash"){e[i]=t[i]}});delete e.labels}function _fetchLabels(e,t){var n,i,r,a=app.user.getLanguage();n=e.ordered_labels||e.labels;app.lang.setDefaultLanguage(n["default"]);if(t.language&&n[t.language]){i=t.language}else if(n[a]){i=a}else{i=app.lang.getDefaultLanguage();if(app.user.id){app.user.updateLanguage(i)}}app.lang.setCurrentLanguage(i);r=app.utils.buildUrl(n[i]);app.api.call("read",r,null,{success:function s(e){try{e=_.isString(e)?JSON.parse(e):e}catch(n){app.logger.fatal("Failed to parse labels data: "+n);t.error({code:"sync_failed",label:"ERR_SYNC_FAILED"});return}t.success(e)},error:function o(e){e.code="sync_failed";e.label="ERR_SYNC_FAILED";t.error(e)}})}function _initCustomComponents(e,t){var n=this,i=app.config.platform!=="base"?["base",app.config.platform]:["base"];_.each({layout:"layout",view:"view",fieldTemplate:"field",data:"data"},function(r,a){if(n._metaTypeIsSeparatedByPlatform(e,a,i)){_.each(i,function(i){var s=e[a+"s"][i];n._sortAndDeclareComponents(s,r,t,i)})}_.each(e[a+"s"],function(e,n){if(r==="view"&&e.templates){_.each(e.templates,function(e,i){var r=n===i;i=r?i:n+"."+i;app.template.setView(i,t,e,true)})}if(r==="layout"&&e.templates){_.each(e.templates,function(e,i){i=n===i?i:n+"."+i;app.template.setLayout(i,t,e,true)})}if(r==="field"&&e.templates){_.each(e.templates,function(e,i){app.template.setField(n,i,t,e,true)})}})},this)}app.augment("metadata",{fieldTypeMap:{varchar:"text",datetime:"datetimecombo",multienum:"enum",text:"textarea",decimal:"float"},_patchMetadata:function e(t,n){if(!n||n._patched===true){return n}_.each(n.views,function(e){if(e.meta){_.each(e.meta.panels,function(e){e.fields=this._patchFields(t,n,e.fields)},this)}},this);n._patched=true;return n},_patchFields:function t(e,n,i){var r=this;_.each(i,function(t,a){var s=_.isString(t)?t:t.name;var o=n.fields[s];if(t.fields){t.fields=r._patchFields(e,n,t.fields);return}if(!_.isEmpty(o)){if(_.isString(t)){t={name:t}}if(_.isObject(t.displayParams)){_.extend(t,t.displayParams);delete t.displayParams}t.type=t.type||o.custom_type||o.type||"base";t.type=r.fieldTypeMap[t.type]||t.type;t.label=t.label||o.vname||t.name;i[a]=t}else{if(t===""){t={view:"detail"};i[a]=t}}},this);return i},_sortControllers:function _sortControllers(type,components,module){var updated={},nameMap={},entries={},updateWeights=function e(t){var n=t.controller;if(t.type==="base"){entries["Base"+app.utils.capitalize(type)].weight=-99999}if(_.isObject(n)&&_.isString(n.extendsFrom)&&entries[n.extendsFrom]&&!updated[n.extendsFrom]){entries[n.extendsFrom].weight--;updated[n.extendsFrom]=true;e(entries[n.extendsFrom])}};_.each(components,function(entry,name){if(entry.controller){var controller=entry.controller,className=(module||"")+app.utils.capitalizeHyphenated(name)+app.utils.capitalize(type);nameMap[className]=name;if(_.isString(controller)){try{controller=eval("["+controller+"][0]")}catch(e){app.logger.error("Failed to eval view controller for "+className+": "+e+":\n"+entry.controller)}}else{var emptyController=type!=="field"&&Object.getOwnPropertyNames(controller).length===1&&controller.hasOwnProperty("extendsFrom");if(emptyController){app.logger.warn("Instead of creating an empty js controller `"+className+"` and specify the parent with extendsFrom, please use `type` property in the metadata `"+name+"`, to specify controller to use. It will allow you to delete your empty controllers and save memory.")}}entries[className]={type:name,controller:controller,weight:0}}});_.each(entries,function(e,t){var n=e.controller,i;if(_.isObject(n)&&_.isString(n.extendsFrom)){i="Custom"+n.extendsFrom;if(i in entries&&t!=i){n.extendsFrom=i}}});_.each(entries,function(e){updated={};updateWeights(e)});return _.sortBy(entries,"weight")},_sortAndDeclareComponents:function n(e,t,i,r){var a,s=this;if(!_.isUndefined(e)&&e){a=s._sortControllers(t,e,i);if(t==="data"){var o,l;_.each(a,function(e){if(e.type==="model"){o=e.controller}else if(e.type==="collection"){l=e.controller}});app.data.declareModelClass(i,null,r,o);app.data.declareCollectionClass(i,r,l)}else{_.each(a,function(e){app.view.declareComponent(t,e.type,i,e.controller,true,r)})}}},_metaTypeIsSeparatedByPlatform:function i(e,t,n){if(!_.isUndefined(e[t+"s"])){for(var i=0;i<n.length;i++){if(!_.isUndefined(e[t+"s"][n[i]])){if(_.isUndefined(e[t+"s"][n[i]].controller)){return true}}}}return false},_declareClasses:function r(e){var t=this,n=app.config.platform!=="base"?["base",app.config.platform]:["base"];_.each(["field","view","layout","data"],function(i){var r;if(t._metaTypeIsSeparatedByPlatform(e,i,n)){_.each(n,function(n){r=e[i+"s"][n];t._sortAndDeclareComponents(r,i,null,n)},this)}},this);_.each(e.modules,function(e,t){_initCustomComponents.call(this,e,t)},this)},getModules:function a(){return _metadata.modules},getHiddenSubpanels:function s(){return _metadata.hidden_subpanels},getModule:function o(e,t){var n=this.getModules();if(n)n=n[e];if(n&&t)n=n[t];return n},getRelationship:function l(e){return _metadata.relationships?_metadata.relationships[e]:null},getField:function u(e){if(_.isString(e)||e===void 0){var t=e;app.logger.warn("`Core.Metadata#getField` signature is deprecated since 7.8 "+"and will be removed in 7.9. Please update your code.");var n=_metadata.fields?_metadata.fields[t]||_metadata.base:null;return n?app.metadata.copy(n,{field:t}):n}if(!e.module){throw new Error("Cannot get vardefs without a module")}var i=this.getModule(e.module,"fields");if(i&&e.name){return i[e.name]}return i},getView:function c(e,t,n){if(!e&&!t){return _metadata.views}var i=this.getModule(e,"views");if(t){if(i&&i[t]&&i[t].meta!==void 0){i=i[t].meta}else if(n){i=this.getModule(n,"views");i=i&&i[t]?i[t].meta:null}else if(_metadata.views&&_metadata.views[t]){i=_metadata.views[t].meta}else{i=null}}return i?app.metadata.copy(i,{module:e,view:t}):i},getLayout:function d(e,t,n){if(!e&&!t){return _metadata.layouts}var i=this.getModule(e,"layouts");if(t){if(i&&i[t]&&i[t].meta!==void 0){i=i[t].meta}else if(n){i=this.getModule(n,"layouts");i=i&&i[t]?i[t].meta:null}else if(_metadata.layouts&&_metadata.layouts[t]){i=_metadata.layouts[t].meta}else{i=null}}return i?app.metadata.copy(i,{module:e,layout:t}):i},getModuleNames:function f(e){var t=["enabled","!enabled","visible","!visible","display_tab","!display_tab","show_subpanels","!show_subpanels","quick_create","!quick_create"];e=e||{};var n=[];var i=_.isUndefined(_metadata.modules_info);if(i){n=_.clone(app.user.get("module_list"));if(e.access){n=_.filter(n,function(t){return app.acl.hasAccess(e.access,t)})}return n||[]}var r,a=false;if(e.filter){if(!_.isArray(e.filter)){e.filter=[e.filter]}r=[];_.each(e.filter,function(e){if(e&&_.indexOf(t,e)>-1){r.push(e);a=e==="display_tab"}else if(e){app.logger.warn("Can't filter getModuleNames by "+e)}});if(_.isEmpty(r)){r=undefined}}n=_.chain(_metadata.modules_info).keys().without("_hash").value();if(r){_.each(r,function(t){var i=t.charAt(0)==="!";if(i){var r=app.metadata.getModuleNames({filter:t.substring(1),access:e.access});n=_.difference(n,r)}else{n=_.filter(n,function(e){return _metadata.modules_info[e][t]})}})}if(!_.isEmpty(app.user.get("module_list"))){if(a){n=_.intersection(app.user.get("module_list"),n)}else if(!r){n=_.union(app.user.get("module_list"),n)}}if(e.access){n=_.filter(n,function(t){return app.acl.hasAccess(e.access,t)})}return n},getStrings:function h(e){return _metadata[e]||{}},getFullModuleList:function p(){return _metadata.full_module_list||{}},getConfig:function m(){return _metadata.config||{}},getBaseCurrencyId:function g(){return"-99"},getCurrency:function v(e){return this.getCurrencies()[e]},getCurrencies:function y(){return _metadata.currencies||{}},getLogoUrl:function b(){return _metadata.logo_url},getServerInfo:function x(){return _metadata.server_info||{}},getModuleTabMap:function w(){return _metadata.module_tab_map||{}},getTabMappedModule:function L(e){var t=this.getModuleTabMap();return t[e]||e},getFilterOperators:function S(e){var t=_metadata.filters&&_metadata.filters.operators&&_metadata.filters.operators.meta||{};var n=e&&this.getModule(e,"filters");var i=n&&n.operators&&n.operators.meta;if(i){return _.extend({},t,i)}return t},get:function E(){return _metadata},getEditableDropdownFilter:function k(e){var t=_metadata.editable_dropdown_filters;if(t&&t[e]){return app.metadata.copy(t[e])}return{}},copy:function T(e,t){return app.utils.deepCopy(e)},set:function M(e,t,n){_.each(e.modules,function(e,t){this._patchMetadata(t,e)},this);this._declareClasses(e);app.config=_.extend(app.config||{},e.config);app.template.set(e,e._hash&&e._hash!=this.getHash(t));if(!_.isEmpty(e._hash))_setHash(e,t);if(!n){var i=e._override_values||[];delete e._override_values;_.each(e,function(e,t){_metadata[t]=_.isObject(e)&&!_.contains(i,t)?_.extend(_metadata[t]||{},e):e})}else{_metadata=e}if(app.config.cacheMeta&&!t){_cacheMeta(_metadata)}if(app.config.env!="prod"){this._dev_data=_metadata}},getHash:function A(e){var t=e?_keyPrefix+"public:hash":_keyPrefix+"hash";return app.cache.get(t)||_metadata._hash||""},sync:function C(e,t){_syncing=true;t=t||{};t.params=t.params||{};var n=this,i=t.metadataTypes||(t.getPublic?app.config.publicMetadataTypes:app.config.metadataTypes)||[],r=function s(i){app.logger.debug("Failed fetching metadata");if(!t.getPublic){app.error.handleHttpError(i)}e.call(n,i)},a=e;e=function o(e){_syncing=false;if(_.isFunction(a))a(e)};app.api.getMetadata(n.getHash(t.getPublic),i,[],{success:function l(a){var s;t=t||{};if(!_.isEmpty(a)){app.logger.debug("Updating metadata");if(_mdLoaded[t.getPublic?"public:md":"md"]&&n.getHash(t.getPublic)==a._hash&&!t.forceRefresh){app.logger.debug("Skipping update as metadata hash matches");return e.call(n)}if(_.isEmpty(i)||_.include(i,"server_info")&&!t.getPublic){s=app.isServerCompatible(a.server_info);if(s!==true){return e(s)}}_mdLoaded[t.getPublic?"public:md":"md"]=true;if(a.jssource){n._loadJSSource(a,t,e,r,n)}else{if(a.labels||a.ordered_labels){_fetchLabels(a,{language:t.language,success:function o(i){_injectLabels(a,i);n.set(a,t.getPublic);e.call(n)},error:r})}else{e.call(n)}}}else{e.call(n,{code:"sync_failed",label:"ERR_SYNC_FAILED"})}},error:r},t)},isSyncing:function R(){return _syncing},_loadJSSource:function D(e,t,n,i,r){var a,s=this._checkJSSourceUpdated(e,!!t.getPublic);if(s==="reload"){return app.utils.hardRefresh()}else if(s){SUGAR.jssource=false;a=document.createElement("script");a.src=app.utils.buildUrl(e.jssource);document.head.appendChild(a)}async.parallel([function(e){if(s){app.utils.doWhen("SUGAR.jssource",function(){r._declareClasses(SUGAR.jssource);e()})}else{e()}},function(n){_fetchLabels(e,{language:t.language,success:function a(i){_injectLabels(e,i);r.set(e,t.getPublic);n()},error:function s(){i.apply(r,arguments);n()}})}],function(){if(n){n.call(r)}})},_checkJSSourceUpdated:function I(e,t){if(t){if(this._publicJSSourceFile){if(this._publicJSSourceFile!=e.jssource){return"reload"}return false}else{this._publicJSSourceFile=e.jssource;return true}}if(e.jssource_public&&this._publicJSSourceFile&&e.jssource_public!=this._publicJSSourceFile){app.utils.hardRefresh();return"reload"}if(this._jsSourceFile){if(this._jsSourceFile!=e.jssource){return"reload"}return false}return true},init:function O(){_.bindAll(this,"storageHandler");window.addEventListener("storage",this.storageHandler);if(app.config.cacheMeta){var e=_getCachedMeta();if(e)this.set(e,false)}app.events.on("cache:clean",function(e){e([_keyPrefix+"public:hash",_keyPrefix+"hash",_keyPrefix+"data"])})},storageHandler:function N(){if(!_syncing&&(this.getHash()!=_metadata._hash&&_mdLoaded.md||app.api.getUserprefHash()&&app.user.get("_hash")&&app.api.getUserprefHash()!=app.user.get("_hash"))){_syncing=true;_mdLoaded.md=false;app.sync({getPublic:!app.api.isAuthenticated()})}},clearCache:function F(){app.cache.cut(_keyPrefix+"public:hash");app.cache.cut(_keyPrefix+"hash");app.cache.cut(_keyPrefix+"data")},reset:function B(){_metadata={};this.clearCache()}},false)})(SUGAR.App)},function(e,t){"use strict";(function(e){e.augment("acl",{_accessToAny:{},action2permission:{view:"read",readonly:"read",edit:"write",detail:"read",list:"read",disabled:"write"},init:function t(e){if(e){e.events.on("app:sync:complete",this.clearCache,this)}},clearCache:function n(){this._accessToAny={}},_hasAccess:function i(e,t){var n;if(t.access==="no"){n="no"}else{n=t[e]}return n!=="no"},_hasAccessToField:function r(e,t,n){var i;e=this.action2permission[e]||e;if(t.fields[n]&&t.fields[n][e]){i=t.fields[n][e]}return i!=="no"},hasAccess:function a(t,n,i){var r;var a;if(!_.isObject(i)){r=arguments[3];a=arguments[4]}else{r=i.field;a=i.acls}var s=e.user.getAcls()[n];if(!s&&!a){return true}s=s||{};if(a){var o=_.extend({},s.fields,a.fields);s=_.extend({},s,a);s.fields=o}var l=this._hasAccess(t,s);if(l&&r&&s.fields){l=this._hasAccessToField(t,s,r);var u=e.metadata.getModule(n);var c=u&&u.fields?u.fields[r]:null;if(l&&c&&c.group){l=this._hasAccessToField(t,s,c.group)}}return l},hasAccessToModel:function s(e,t,n){var i,r,a,s,o=true;if(t){i=t.id;r=t.module;a=t.original_assigned_user_id||t.get("assigned_user_id");s=t.get("_acl")||{fields:{}}}if(e=="edit"&&!i){e="create"}if(o===true){o=this.hasAccess(e,r,a,n,s)}return o},hasAccessToAny:function o(t){if(_.isUndefined(this._accessToAny[t])){this._accessToAny[t]=_.some(e.user.getAcls(),function(e,n){return this.hasAccess(t,n)},this)}return this._accessToAny[t]}},true)})(SUGAR.App)},function(e,t){"use strict";(function(e){var t=Backbone.Model.extend({load:function n(t){e.api.me("read",null,null,{success:function n(i){if(i&&i.current_user){if(i.current_user._hash){e.cache.set("userpref:hash",i.current_user._hash)}e.user.set(i.current_user);var r=e.user.getPreference("language");if(e.lang.getLanguage()!==r){e.lang.setLanguage(r,null,{noUserUpdate:true,noSync:e.isSynced||e.metadata.isSyncing()})}}if(t)t()},error:function i(n){e.error.handleHttpError(n);if(t)t(n)}})},loadLocale:function i(t){e.api.call("read",e.api.buildURL("locale"),null,{success:function n(e){if(t)t(e)},error:function i(n){e.error.handleHttpError(n);if(t)t(n)}})},getLanguage:function r(){return e.user.getPreference("language")||e.cache.get("lang")},updateLanguage:function a(t,n){var i=function r(i){if(!i)e.lang.updateLanguage(t);if(n)n(i)};this.update("update",{preferred_language:t},i)},updateProfile:function s(e,t){var n=function i(e){if(t)t(e)};this.update("update",e,n)},updatePreferences:function o(t,n){var i=this;if(e.api.isAuthenticated()){e.api.call("update",e.api.buildURL("me/preferences"),t,{success:function r(a){if(a._hash){e.cache.set("userpref:hash",a._hash);e.user.set({_hash:a._hash})}_.each(t,function(e,t){if(a[t]){i.setPreference(t,a[t])}});if(n)n()},error:function a(t){e.error.handleHttpError(t);if(n)n(t)}})}else{if(n)n()}},update:function l(t,n,i){if(e.api.isAuthenticated()){e.api.me(t,n,null,{success:function r(t){if(t.current_user){if(t.current_user._hash){e.cache.set("userpref:hash",t.current_user._hash)}e.user.set(t.current_user)}if(i)i()},error:function a(t){e.error.handleHttpError(t);if(i)i(t)}})}else{i()}},getAcls:function u(){return e.user.get("acl")||{}},getPreference:function c(t){var n=e.user.get("preferences")||{};return n[t]},setPreference:function d(t,n){var i=e.user.get("preferences")||{};i[t]=n;return e.user.set("preferences",i)},getCurrency:function f(){var t=e.user.get("preferences"),n={};if(t){n.currency_id=t.currency_id;n.currency_iso=t.currency_iso;n.currency_name=t.currency_name;n.currency_rate=t.currency_rate;n.currency_show_preferred=t.currency_show_preferred;n.currency_symbol=t.currency_symbol}return n},lastState:function(){var t=":",n="last-state",i={},r=[];var a=function o(i){var r=i.split(t),a=[e.user.id,n];a=a.concat(r);return a.join(t)};var s=function l(e){var t;if(e.meta&&e.meta.last_state){t=e.meta.last_state.id}return t};return{get:function u(t){var n,i;if(!_.isUndefined(t)){i=a(t);n=e.cache.get(i);n=n===void 0?this.defaults(t):n}return n},set:function c(t,n){if(!_.isUndefined(t)&&!_.isUndefined(n)){var i=a(t);e.cache.set(i,n)}},preserve:function d(e){if(!_.isUndefined(e)){r.push(e)}},key:function f(e,t){var n=s(t);return this.buildKey(e,n,t.module)},buildKey:function h(e,n,i){var r,a=[];if(n){if(i){a.push(i)}a.push(n,e);r=a.join(t)}return r},defaults:function p(e){return i[e]},register:function m(e){var t=s(e);if(t){_.each(e.meta.last_state.defaults,function(t,n){i[this.key(n,e)]=t},this)}},remove:function g(t){var n;if(!_.isUndefined(t)){n=a(t);e.cache.cut(n)}},_getPreservedKeys:function v(){var e=[];_.each(r,function(t){e.push(a(t))});return e}}}()});e.events.on("app:logout",function(t){e.cache.cut("userpref:hash");if(t===true){e.user.clear({silent:true})}});e.events.on("cache:clean",function(t){t(e.user.lastState._getPreservedKeys())});e.augment("user",new t,false)})(SUGAR.App)},function(e,t){"use strict";(function(e){e.augment("logger",{levels:{TRACE:{value:1,name:"TRACE"},DEBUG:{value:2,name:"DEBUG"},INFO:{value:3,name:"INFO"},WARN:{value:4,name:"WARN"},ERROR:{value:5,name:"ERROR"},FATAL:{value:6,name:"FATAL"}},init:function t(){if(!window.jQuery){return}e.on("app:sync:complete",function(){jQuery.migrateMute=this.getLevel().value>this.levels.WARN.value},this)},ConsoleWriter:{write:function n(t,i){if(!window.console)window.console={};if(!window.console.log)window.console.log=function(){};if(t.value<=e.logger.levels.INFO.value){console.log(i)}else if(t.value==e.logger.levels.WARN.value){console.warn(i)}else{console.error(i)}}},ServerWriter:{write:function i(t,n){if(t.value<e.logger.levels.WARN.value){return}if(!e.api.isAuthenticated()){return}var i=e.config.logger&&e.config.logger.writeToServer||false;if(!i||!n.trim().length){return}var r=e.api.buildURL(undefined,"logger");var a={level:t.name.toLowerCase(),message:n};e.api.call("create",r,a,{success:function s(e){if(!e.status){throw"Failed to write log message {"+n+"} onto server"}},error:function o(e){throw e}})}},SimpleFormatter:{format:function r(e,t,n){var i=n.getUTCFullYear()+"-"+(n.getUTCMonth()+1)+"-"+n.getUTCDate()+" "+n.getUTCHours()+":"+n.getUTCMinutes()+":"+n.getUTCSeconds();return e.name+"["+i+"]: "+t}},trace:function a(e){this.log(this.levels.TRACE,e)},debug:function s(e){this.log(this.levels.DEBUG,e)},info:function o(e){this.log(this.levels.INFO,e)},warn:function l(e){this.log(this.levels.WARN,e)},error:function u(e){this.log(this.levels.ERROR,e)},fatal:function c(e){this.log(this.levels.FATAL,e)},getLevel:function d(){var t=e.config.logger&&e.config.logger.level;var n=e.config.logLevel;if(!t&&n){t=n;console.warn("The property `app.config.logLevel` has been "+"deprecated since 7.7.0.0 and will be removed in 7.9.0.0."+" Use `app.config.logger.level` instead.")}if(!t){return this.levels.ERROR}t=t.toUpperCase();return this.levels[t]||this.levels.ERROR},log:function f(t,n){try{var i=this.getLevel();if(t.value<i.value){return}n=n||"<none>";if(_.isFunction(n))n=n.call(this);if(_.isObject(n)){try{n=JSON.stringify(n)}catch(r){n=n.toString()}}var a=e.config.logger,s=this[e.config.logFormatter];if(!s){s=a&&this[a.formatter]||this.SimpleFormatter}n=s.format(t,n,new Date);var o=this[e.config.logWriter];if(!o){o=a&&this[a.consoleWriter]||this.ConsoleWriter}var l=a&&this[a.serverWriter]||this.ServerWriter;o.write(t,n);l.write(t,n)}catch(r){console.log("Failed to log message {"+n+"} due to exception: "+r)}}},false)})(SUGAR.App)},function(e,t){"use strict";(function(e){var t=moment;_.extend(t,{InvalidException:function i(e,t){this.name="InvalidException";this.message=e;this.date=t},_cachedFormats:{},_serverDateFormat:"YYYY-MM-DD",convertFormat:function r(e){if(t._cachedFormats[e]){return t._cachedFormats[e]}var n={d:"DD",m:"MM",Y:"YYYY",H:"HH",h:"hh",i:"mm"};var i=e;_.each(n,function(e,t){i=i.replace(t,e)});t._cachedFormats[e]=i;return i},compare:function a(e,n){var i=moment(e),r=moment(n);if(!i.isValid()){throw new t.InvalidException("Invalid date passed for comparison.",e)}if(!r.isValid()){throw new t.InvalidException("Invalid date passed for comparison.",n)}if(i.isBefore(r)){return-1}if(i.isAfter(r)){return 1}return 0},getUserDateFormat:function s(t){t=t||e.user;return this.convertFormat(t.getPreference("datepref"))},getUserTimeFormat:function o(t){t=t||e.user;return this.convertFormat(t.getPreference("timepref"))},phpStrToTime:function l(e,t){var n,i,r,a,s,o,l,u,c,d,f,h=false;if(!e){return h}e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase();i=e.match(/^(\d{1,4})([\-\.\/\:])(\d{1,2})([\-\.\/\:])(\d{1,4})(?:\s(\d{1,2}):(\d{2})?:?(\d{2})?)?(?:\s([A-Z]+)?)?$/);if(i&&i[2]===i[4]){if(i[1]>1901){switch(i[2]){case"-":{if(i[3]>12||i[5]>31){return h}return new Date(i[1],parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3}case".":{return h}case"/":{if(i[3]>12||i[5]>31){return h}return new Date(i[1],parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3}}}else if(i[5]>1901){switch(i[2]){case"-":{if(i[3]>12||i[1]>31){return h}return new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3}case".":{if(i[3]>12||i[1]>31){return h}return new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3}case"/":{if(i[1]>12||i[3]>31){return h}return new Date(i[5],parseInt(i[1],10)-1,i[3],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3}}}else{switch(i[2]){case"-":{if(i[3]>12||i[5]>31||i[1]<70&&i[1]>38){return h}a=i[1]>=0&&i[1]<=38?+i[1]+2e3:i[1];return new Date(a,parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3}case".":{if(i[5]>=70){if(i[3]>12||i[1]>31){return h}return new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3}if(i[5]<60&&!i[6]){if(i[1]>23||i[3]>59){return h}r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate(),i[1]||0,i[3]||0,i[5]||0,i[9]||0)/1e3}return h}case"/":{if(i[1]>12||i[3]>31||i[5]<70&&i[5]>38){return h}a=i[5]>=0&&i[5]<=38?+i[5]+2e3:i[5];return new Date(a,parseInt(i[1],10)-1,i[3],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3}case":":{if(i[1]>23||i[3]>59||i[5]>59){return h}r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate(),i[1]||0,i[3]||0,i[5]||0)/1e3}}}}if(e==="now"){return t===null||isNaN(t)?(new Date).getTime()/1e3|0:t|0}if(!isNaN(n=Date.parse(e))){return n/1e3|0}i=e.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2})[ t]([0-9]{2}:[0-9]{2}:[0-9]{2}(\.[0-9]+)?)([\+-][0-9]{2}(:[0-9]{2})?|z)/);if(i){if(i[4]=="z"){i[4]="Z"}else if(i[4].match(/^([\+-][0-9]{2})$/)){i[4]=i[4]+":00"}if(!isNaN(n=Date.parse(i[1]+"T"+i[2]+i[4]))){return n/1e3|0}}s=t?new Date(t*1e3):new Date;o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};l={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"};function p(e,t,n){var i,r=o[t];if(typeof r!=="undefined"){i=r-s.getDay();if(i===0){i=7*n}else if(i>0&&e==="last"){i-=7}else if(i<0&&e==="next"){i+=7}s.setDate(s.getDate()+i)}}function m(e){var t=e.split(" "),n=t[0],i=t[1].substring(0,3),r=/\d+/.test(n),a=t[2]==="ago",o=(n==="last"?-1:1)*(a?-1:1);if(r){o*=parseInt(n,10)}if(l.hasOwnProperty(i)&&!t[1].match(/^mon(day|\.)?$/i)){return s["set"+l[i]](s["get"+l[i]]()+o)}if(i==="wee"){return s.setDate(s.getDate()+o*7)}if(n==="next"||n==="last"){p(n,i,o)}else if(!r){return false}return true}c="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec"+"|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?"+"|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)";d="([+-]?\\d+\\s"+c+"|"+"(last|next)\\s"+c+")(\\sago)?";i=e.match(new RegExp(d,"gi"));if(!i){return h}for(f=0,u=i.length;f<u;f++){if(!m(i[f])){return h}}return s.getTime()/1e3}});var n={};_.extend(t,{parse:function u(e,t){var n=new Date("Jan 1, 1970 00:00:00"),i="",r,a,s,o,l,u;if(e instanceof Date)return e;if(!t){t=this.guessFormat(e)}if(t===false){if(/^\d+$/.test(e)){return new Date(e)}return false}r=$.trim(e);t=$.trim(t)+" ";for(a=0;a<t.length;a++){s=t.charAt(a);if(s===":"||s==="/"||s==="-"||s==="."||s===" "||s==="a"||s==="A"){o=r.indexOf(s);if(o===-1)o=r.length;l=r.substring(0,o);r=r.substring(o+1);switch(i){case"m":if(!(l>0&&l<13))return false;n.setMonth(l-1);break;case"d":if(!(l>0&&l<32))return false;n.setDate(l);break;case"Y":if(l>0===false)return false;n.setYear(l);break;case"h":u=t.substring(t.length-4);l=parseInt(l,10);var c=$.trim(u.toLowerCase());if(c==="i a"||c===s+"ia"){var d=r.substring(r.length-2).toLowerCase();if(d==="pm"){if(l<12){l+=12}}else if(d==="am"&&l===12){l=0}}n.setHours(l);break;case"H":n.setHours(l);break;case"i":l=l.substring(0,2);n.setMinutes(l);break;case"s":n.setSeconds(l);break}i=""}else{i=s}}return n},guessFormat:function c(e){if(typeof e!=="string")return false;var t="",n,i,r,a,s,o,l,u;if(e.indexOf(" ")!==-1){t=e.substring(e.indexOf(" ")+1,e.length);e=e.substring(0,e.indexOf(" "))}n="/";if(e.indexOf("/")!==-1){}else if(e.indexOf("-")!==-1){n="-"}else if(e.indexOf(".")!==-1){n="."}else{return false}i=e.split(n);r="";if(i[0].length===4){r="Y"+n+"m"+n+"d"}else if(i[2].length===4){r="m"+n+"d"+n+"Y"}else{return false}a="";s=[];if(t!==""){s.push("i");o=":";if(t.indexOf(".")===2){o="."}if(t.split(o).length===3){s.push("s")}l="";u=t.substring(t.length-2,t.length);if(u.toLowerCase()==="am"||u.toLowerCase()==="pm"){s.unshift("h");if(u.toLowerCase()===u){l="lower"}else{l="upper"}}else{s.unshift("H")}a=s.join(o);if(t.indexOf(" ")!==-1){a+=" "}if(l&&l==="upper"){a+="A"}else if(l&&l==="lower"){a+="a"}r=r+" "+a}return r},parseFormat:function d(e){if(!(e in n)){var t={},i,r;for(i=0;i<e.length;i++){r=e.charAt(i);switch(r){case"m":case"n":t.month=r;break;case"d":case"j":t.day=r;break;case"Y":t.year=r;break;case"H":case"h":case"g":t.hours=r;break;case"i":t.minutes=r;break;case"s":t.seconds=r;break;case"A":case"a":t.amPm=r;break;default:break}}n[e]=t}return n[e]},format:function f(e,t){if(!_.isDate(e))return"";var n="",i,r,a,s,o,l;for(i=0;i<t.length;i++){r=t.charAt(i);switch(r){case"\\":n+=t.charAt(i+1);i++;break;case"m":case"n":o=e.getMonth()+1;n+=o<10&&r==="m"?"0"+o:o;break;case"d":case"j":a=e.getDate();n+=a<10&&r==="d"?"0"+a:a;break;case"Y":n+=e.getFullYear();break;case"H":case"h":case"g":s=e.getHours();if(r==="h"||r==="g"){s=s>12?s-12:s;s=s===0?12:s}n+=s<10&&r!=="g"?"0"+s:s;break;case"i":o=e.getMinutes();n+=o<10?"0"+o:o;break;case"s":l=e.getSeconds();n+=l<10?"0"+l:l;break;case"a":case"A":if(e.getHours()<12)n+=r==="a"?"am":"AM";else n+=r==="a"?"pm":"PM";break;default:n+=r;

}}return n},roundTime:function h(e){if(!e.getMinutes)return 0;var t=e.getMinutes();if(t<1){t=0}else if(t<16){t=15}else if(t<31){t=30}else if(t<46){t=45}else{t=0;e.setHours(e.getHours()+1)}e.setMinutes(t);return e},UTCtoLocalTime:function p(e){if(!(e instanceof Date))return e;return new Date(this.toUTC(e))},UTCtoTimezone:function m(e,t){if(!(e instanceof Date)||undefined===t||null===t){return e}t=parseFloat(t)*60*60*1e3;t-=e.getTimezoneOffset()*60*1e3*-1;return new Date(this.toUTC(e)+t)},toUTC:function g(e){if(!(e instanceof Date)){return e}var t=e.getFullYear(),n=e.getMonth(),i=e.getDate(),r=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),o=e.getMilliseconds();return Date.UTC(t,n,i,r,a,s,o)},getRelativeTimeLabel:function v(e){var t=new Date;var n=t.getTime()<e.getTime();var i=n?e-t:t-e;var r=1e3,a=r*60,s=a*60,o=s*24,l={str:"",value:undefined};if(isNaN(i)||i<0){return l}if(i<r*2){l.str="LBL_TIME_AGO_NOW";return l}if(i<a){l.str=n?"LBL_TIME_UNTIL_SECONDS":"LBL_TIME_AGO_SECONDS";l.value=Math.floor(i/r);return l}if(i<a*2){l.str=n?"LBL_TIME_UNTIL_MINUTE":"LBL_TIME_AGO_MINUTE";return l}if(i<s){l.str=n?"LBL_TIME_UNTIL_MINUTES":"LBL_TIME_AGO_MINUTES";l.value=Math.floor(i/a);return l}if(i<s*2){l.str=n?"LBL_TIME_UNTIL_HOUR":"LBL_TIME_AGO_HOUR";return l}if(i<o){l.str=n?"LBL_TIME_UNTIL_HOURS":"LBL_TIME_AGO_HOURS";l.value=Math.floor(i/s);return l}if(i>o&&i<o*2){l.str=n?"LBL_TIME_UNTIL_DAY":"LBL_TIME_AGO_DAY";return l}if(i<o*365){l.str=n?"LBL_TIME_UNTIL_DAYS":"LBL_TIME_AGO_DAYS";l.value=Math.floor(i/o);return l}else{l.str=n?"LBL_TIME_UNTIL_YEAR":"LBL_TIME_AGO_YEAR";return l}},parseDisplayDefault:function y(e,t){var n,i,r,a,s,o,l,u;var c=t?t:new Date,d,f,h;if(!e)return e;o=function p(e,t){var n=e.getDate();e.setMonth(e.getMonth()+t);if(e.getDate()<n){e.setDate(1);e.setDate(e.getDate()-1)}return e};l=function m(e){var t,n,i;t=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];n=c.getDay();e=e.toLowerCase();for(var r=7;r--;){if(e===t[r]){e=r<=n?r+7:r;break}}i=e-n;return i};n={day:function _(e){return new Date(c.setDate(c.getDate()+e))},week:function g(e){return new Date(c.setDate(c.getDate()+e*7))},month:function v(e){return o(c,e)},year:function y(e){return o(c,e*12)},now:function b(){return c},"next monday":function x(){return new Date(c.setDate(c.getDate()+l("monday")))},"next friday":function w(){return new Date(c.setDate(c.getDate()+l("friday")))},"first of next month":function L(){c.setDate(1);var e=c.setMonth(c.getMonth()+1);return new Date(e)}};if(e&&e.indexOf("&")>=0){r=e.split("&");a=r[0];s=r[1]}else{a=e}if(a.match(/\b(now|day|week|month|year)/g)){if(a.indexOf("now")===0){f="now"}else if(a.indexOf("first day of next month")!==-1){f="firstnextmonth"}else{h=a.split(" ");d=h[0];f=h[1]}if(f.match("now")){i=n.now()}else if(f.match("firstnextmonth")){i=n["first of next month"]()}else if(f.match("days?")){i=n.day(parseInt(d,10))}else if(f.match("weeks?")){i=n.week(parseInt(d,10))}else if(f.match("months?")){i=n.month(parseInt(d,10))}else if(f.match("years?")){i=n.year(parseInt(d,10))}else{if(!n[a]){return}i=n[a]()}}else{if(!n[a]){return}i=n[a]()}u=function(e){var t,n,i;t=/^(\d\d?).(\d{2}).?([ap]m)?$/.exec(s);if(t&&t.length>2){n=t[1];if(n){if(t[3]==="pm"){if(n<12){n=parseInt(n,10)+12}}else{if(n==="12"){n="0"}}e.setHours(parseInt(n,10))}i=t[2];if(i){e.setMinutes(parseInt(i,10))}}}(i);return i},toDatepickerFormat:function b(e){if(_.isUndefined(e)||!e)return"";var t,n={y:"yy",Y:"yyyy",m:"mm",d:"dd"};t=e.replace(/[yYmd]/g,function(e){return n[e]});return t},stripIsoTimeDelimterAndTZ:function x(e){if(!_.isUndefined(e)&&e){return e.replace("T"," ").substr(0,19)}},isIso:function w(e){var t,n;t=e.match(/^([0-9]{4})-?(1[0-2]|0[1-9])-?(3[0-1]|0[1-9]|[1-2][0-9])$/);if(t){return true}if(e.match(/[T\+Z ]/g)){n=e.match(/^([0-9]{4})-?(1[0-2]|0[1-9])-?(3[0-1]|0[1-9]|[1-2][0-9])/);if(n)return true}return false}});_.extend(t.fn,{formatUser:function L(e,n){var i=t.getUserDateFormat(n);if(!e){i+=" "+t.getUserTimeFormat(n)}return this.format(i)},formatServer:function S(e){var n=e&&t._serverDateFormat;return this.format(n)},isBetween:function E(e,t,n){n=_.isUndefined(n)?true:n;var i=this.isAfter(e)&&this.isBefore(t);if(n&&!i){i=this.isSame(e)||this.isSame(t)}return i}});_.extend(t.duration.fn,{format:function k(){var t=[],n=this.minutes(),i=this.hours(),r=Math.floor(this.asDays());if(r>0){t.push(r);t.push(e.lang.get(r===1?"LBL_DURATION_DAY":"LBL_DURATION_DAYS"))}if(i>0){t.push(i);t.push(e.lang.get(i===1?"LBL_DURATION_HOUR":"LBL_DURATION_HOURS"))}if(n>0){t.push(n);t.push(e.lang.get(n===1?"LBL_DURATION_MINUTE":"LBL_DURATION_MINUTES"))}return t.join(" ")}});e.augment("date",t)})(SUGAR.App)},function(e,t){"use strict";(function(e){e.augment("math",{_math:function t(e,n,i,r,a){r=_.isFinite(r)&&r>=0?parseInt(r):6;Big.E_NEG=-1*(r+1);a=a||false;var s;if(!_.isFinite(n)){return n}try{switch(e){case"round":s=Big(n).round(r);break;case"add":s=Big(n).plus(i);break;case"sub":s=Big(n).minus(i);break;case"mul":s=Big(n).times(i).round(r);break;case"div":s=Big(n).div(i).round(r);break;default:return n}}catch(o){if(o.name=="BigError"){return n}}if(a&&!_.isString(s)){return s.toFixed(r)}else if(!_.isString(s)){return s.toString()}else{return s}},round:function n(e,t,i){return this._math("round",e,null,t,i)},add:function i(e,t,n,r){return this._math("add",e,t,n,r)},sub:function r(e,t,n,i){return this._math("sub",e,t,n,i)},mul:function a(e,t,n,i){return this._math("mul",e,t,n,i)},div:function s(e,t,n,i){return this._math("div",e,t,n,i)},isDifferentWithPrecision:function o(t,n,i){var r=e.metadata.getConfig();var a=i||e.user.getPreference("decimal_precision");i=_.isFinite(a)?a:r.defaultCurrencySignificantDigits||2;var s=this._math("round",this.getDifference(t,n,true),null,i);var o=i===0?"0":this._math("div",.1,Math.pow(10,i-1));return s==="0"?false:parseFloat(s)>=parseFloat(o)},getDifference:function l(e,t,n){var i=this._math("sub",e,t);n=_.isUndefined(n)?false:n;return n?Math.abs(i):i}},false)})(SUGAR.App)},function(e,t){"use strict";(function(e){e.augment("currency",{getBaseCurrencyId:function t(){return e.metadata.getBaseCurrencyId()},getBaseCurrency:function n(){var t=e.metadata.getBaseCurrencyId(),n=e.metadata.getCurrency(t);n.currency_id=t;return n},getCurrenciesSelector:function i(t){var n={};_.each(e.metadata.getCurrencies(),function(e,i){n[i]=t(e)});return n},getCurrencySymbol:function r(t){var n=e.metadata.getCurrency(t);return n?n.symbol:""},formatAmount:function a(t,n,i,r,s,o){if(!_.isFinite(t)){return t}var l,u=e.metadata.getConfig();n=n||this.getBaseCurrencyId();o=o||"";if(!_.isFinite(i)){if(_.isFinite(u.defaultCurrencySignificantDigits)){i=u.defaultCurrencySignificantDigits}else{i=2}}s=s||u.defaultDecimalSeparator||".";r=!_.isUndefined(r)?r:u.defaultNumberGroupingSeparator||",";l=this.getCurrencySymbol(n)||this.getCurrencySymbol(this.getBaseCurrencyId());t=e.utils.formatNumber(t,i,i,r,s);return l+o+t},formatAmountLocale:function s(t,n,i){var r=e.user.getPreference("decimal_separator");var a=e.user.getPreference("number_grouping_separator");i=_.isFinite(i)?i:e.user.getPreference("decimal_precision");return this.formatAmount(t,n,i,a,r)},unformatAmount:function o(t,n,i,r){r=r||false;t=t.toString().replace(/^[^\d\.\,-]+/,"");return e.utils.unformatNumberString(t,n,i,r)},unformatAmountLocale:function l(t,n){var i,r,a=e.metadata.getConfig();i=e.user.getPreference("decimal_separator")||a.defaultDecimalSeparator||".";r=e.user.getPreference("number_grouping_separator")||a.defaultNumberGroupingSeparator||",";return this.unformatAmount(t,r,i,n)},convertAmount:function u(t,n,i){var r;var a;if(n==i){return e.math.round(t,undefined,true)}r=e.metadata.getCurrency(n);a=e.metadata.getCurrency(i);return this.convertWithRate(t,r.conversion_rate,a.conversion_rate)},convertToBase:function c(e,t){return this.convertAmount(e,t,this.getBaseCurrencyId())},convertFromBase:function d(e,t){return this.convertAmount(e,this.getBaseCurrencyId(),t)},convertWithRate:function f(t,n,i){n=n||1;i=i||1;return e.math.mul(e.math.div(t,n,undefined,true),i,undefined,true)}},false)})(SUGAR.App)},function(e,t){"use strict";(function(e){e.events.on("app:init",function(){_.mixin({isEmptyValue:function e(t){return!_.isNumber(t)&&!_.isBoolean(t)&&!_.isDate(t)&&_.isEmpty(t)},changed:function t(e,n){if(_.isEmpty(e)&&_.isEmpty(n)){return}var i={};var r=_.keys(_.extend(i,n,e));_.each(r,function(t){var r=false;if(!_.has(e,t)||!_.has(n,t)||!_.isEqual(e[t],n[t])){r=true}i[t]=r});return i}})})})(SUGAR.App)},function(e,t){"use strict";(function(e){Backbone.Model.prototype.doValidate=function(e,t){t(this.isValid())};e.augment("Bean",Backbone.Model.extend({constructor:function n(t,i){e.plugins.attach(this,"model");Backbone.Model.prototype.constructor.call(this,t,i)},initialize:function i(t){Backbone.Model.prototype.initialize.call(this,t);this.setSyncedAttributes(t);this._bindEvents();this._relatedCollections=null;this._activeFetchRequest=null;if(this.isNew()&&this._defaults){_.each(this._defaults,function(e,t){if(!this.has(t)){this.set(t,e,{silent:true})}},this)}if(this.fields){this.fields=e.utils.deepCopy(this.fields)}this.addValidationTask("sidecar",_.bind(this._doValidate,this))},fetch:function r(e){e=_.extend({},this.getOption(),e);this.abortFetchRequest();this._activeFetchRequest=Backbone.Model.prototype.fetch.call(this,e);return this._activeFetchRequest},getFetchRequest:function a(){return this._activeFetchRequest},abortFetchRequest:function s(){var t=this.getFetchRequest();if(t){e.api.abortRequest(t.uid)}},_bindEvents:function o(){this.on("sync",function(){this._checkAcl();this.setSyncedAttributes(this.attributes)},this)},_checkAcl:function l(){var e=this._checkFieldAcls();if(_.size(e)||!_.isEqual(_.omit(this.get("_acl"),"fields"),_.omit(this.getSynced("_acl"),"fields"))){this.trigger("acl:change",e)}},_checkFieldAcls:function u(){var e={};var t=_.property("fields");var n=t(this.getSynced("_acl"))||{};var i=t(this.get("_acl"))||{};var r=_.extend({},n,i);_.each(r,function(t,r){if(!_.isEqual(n[r],i[r])){this.trigger("acl:change:"+r);e[r]=true}},this);return e},dispose:function c(){e.plugins.detach(this,"model")},_setRelatedCollection:function d(e,t){if(!this._relatedCollections)this._relatedCollections={};this._relatedCollections[e]=t},getRelatedCollection:function f(t){if(this._relatedCollections&&this._relatedCollections[t]){return this._relatedCollections[t]}return e.data.createRelatedCollection(this,t)},isValidAsync:function h(e,t){e=e||this.fields;async.waterfall(_.flatten([function(t){t(null,e,{})},_.sortBy(this._validationTasks)]),function(e,n,i){if(!e){var r=_.isEmpty(i);if(_.isFunction(t)){t(r,i)}}})},doValidate:function p(e,t){var n=this;this.trigger("validation:start");this.isValidAsync(e,function(e,i){if(e){n.trigger("validation:success")}n.trigger("validation:complete",n._processValidationErrors(i));if(_.isFunction(t)){t(e)}})},_doValidate:function m(n,i,r){var a;_.each(n,function(n,r){if(_.isString(n)){r=n;n=this.fields[r]}a=this.get(r);if(n){t(i,e.validation.requiredValidator(n,n.name,this,a),r,"required");if(a||a===0){_.each(e.validation.validators,function(e,s){t(i,e(n,a,this),r,s)},this)}}},this);r(null,n,i)},addValidationTask:function g(e,t){this._validationTasks=this._validationTasks||{};this._validationTasks[e]=t},removeValidationTask:function v(e){if(this._validationTasks){this._validationTasks=_.omit(this._validationTasks,e)}},_processValidationErrors:function y(t){var n=true;if(!_.isEmpty(t)){e.error.handleValidationError(this,t);_.each(t,function(e,t){this.trigger("error:validation:"+t,e)},this);this.trigger("error:validation",t);n=false}return n},save:function b(e,t){var n=this;if(!t||!t.fieldsToValidate){return Backbone.Model.prototype.save.call(this,e,t)}this.doValidate(t.fieldsToValidate,function(i){if(i){return Backbone.Model.prototype.save.call(n,e,t)}})},canHaveAttachments:function x(){return _.has(this.fields,"attachment_list")},getFiles:function w(t,n){n=n||{};n.passOAuthToken=false;return e.api.file("read",{module:this.module,id:this.id},null,t,n)},copy:function L(t,n,i){var r={};var a=e.metadata.getModule(this.module).fields;n=n||_.pluck(a,"name");_.each(n,function(n){var i=a[n],s;if(!i||i.duplicate_on_record_copy==="no"){return}s=i.duplicate_on_record_copy==="always"||n!=="id"&&i.type!=="link"&&!i.auto_increment;if(s&&t.has(n)){var o=t.get(n);if(_.isObject(o)){o=e.utils.deepCopy(o)}r[n]=o}});this.set(r,i);this.isCopied=true},isCopy:function S(){return this.isCopied===true},uploadFile:function E(t,n,i,r){i=i||{};r=r||{};return e.api.file("create",{id:r.temp!==true?this.id:"temp",module:this.module,field:t},n,i,r)},favorite:function k(e,t){t=t||{};t.favorite=true;return this.save({my_favorite:!!e},t)},follow:function T(e,t){t=t||{};e=e||false;t.following=true;return this.save({following:e},t)},isFavorite:function M(){var e=this.get("my_favorite");return e==="1"||e===true},getChangeDiff:function A(e,t){var n={};e=e||{};t=t||[];_.each(this.attributes,function(i,r){if(_.contains(t,r))return;var a=e[r];if(!_.isEqual(a,i)){n[r]=a}});return n},toJSON:function C(e){var t=e&&e.fields?e.fields:_.keys(this.attributes),n={};_.each(t,function(t){var i=this.get(t);if(_.isObject(i)&&_.isFunction(i.toJSON)){i=i.toJSON(e)}n[t]=i},this);return n},toString:function R(){return"bean:"+this.module+"/"+(this.id?this.id:"<no-id>")},revertAttributes:function D(t){t=t||{};t.revert=true;var n=this.changedAttributes(this.getSynced());this.set(e.utils.deepCopy(n)||{},t);if(!t.silent){this.trigger("attributes:revert")}},setSyncedAttributes:function I(t){this._syncedAttributes=t?e.utils.deepCopy(t):{}},getSynced:function O(e){return e?this._syncedAttributes[e]:this._syncedAttributes},getDefault:function N(e){var t=_.clone(this._defaults)||{};if(_.isUndefined(e)){return t}return t[e]},setDefault:function F(e,t){var n;if(_.isObject(e)){n=e}else{(n={})[e]=t}this._defaults=_.extend({},this._defaults,n);this.attributes=_.defaults(this.attributes,n);return this},setOption:function B(e,t){var n;if(_.isObject(e)){n=e}else{(n={})[e]=t}this._persistentOptions=_.extend({},this._persistentOptions,n);return this},unsetOption:function P(e){if(e){this.setOption(e,void 0)}else{this._persistentOptions={}}return this},getOption:function U(e){if(e){return this._persistentOptions[e]}return this._persistentOptions}},{merge:function Y(e,t,n){return _.extend(e,t)}}),false);function t(e,t,n,i){if(_.isUndefined(t))return;if(_.isUndefined(e[n])){e[n]={}}e[n][i]=t}})(SUGAR.App)},function(e,t){"use strict";(function(e){e.augment("BeanCollection",Backbone.Collection.extend({_activeFetchRequest:null,model:e.Bean,constructor:function t(n,i){e.plugins.attach(this,"collection");if(i&&i.link){this.link=i.link;delete i.link}Backbone.Collection.prototype.constructor.call(this,n,i)},initialize:function n(t,i){this._persistentOptions={};if(!_.isEmpty(i)){i=e.utils.deepCopy(i);this.setOption(i);e.logger.warn("You should not pass persistent fetch options in initialize "+"(The options hash is supposed to be Backbone.js options hash, allowing you "+"to pass Backbone options used when setting the models into the collection)."+" Please use setOption() instead.")}this._initOptions=i;this._bindCollectionEvents();Backbone.Collection.prototype.initialize.call(this,t,i);this.total=null},_bindCollectionEvents:function i(){this.on("data:sync:complete",function(){var e=this.getFetchRequest();if(e){this._activeFetchRequest=null}},this);this.on("remove",this._decrementTotal,this)},_decrementTotal:function r(){if(this.total){this.total--}},dispose:function a(){e.plugins.detach(this,"collection")},_prepareModel:function s(e,t){var n=e._search;delete e._search;e=Backbone.Collection.prototype._prepareModel.call(this,e,t);if(e&&!e.link)e.link=this.link;if(n){e.searchInfo=n}return e},fetch:function o(e){e=_.extend({},this.getOption(),e);this.abortFetchRequest();e.fields=this.fields=e.fields||this.fields||null;e.myItems=_.isUndefined(e.myItems)?this.myItems:e.myItems;e.favorites=_.isUndefined(e.favorites)?this.favorites:e.favorites;e.query=_.isUndefined(e.query)?this.query:e.query;e.reset=_.isUndefined(e.reset)?true:e.reset;this._activeFetchRequest=Backbone.Collection.prototype.fetch.call(this,e);return this.getFetchRequest()},getFetchRequest:function l(){if(_.isFunction(this._activeFetchRequest)){return this._activeFetchRequest()}else{return this._activeFetchRequest}},abortFetchRequest:function u(){var t=this.getFetchRequest();if(t){e.api.abortRequest(t.uid);this._activeFetchRequest=null}},resetPagination:function c(){var e={offset:0,next_offset:0,page:1};var t=_.keys(e);this.resetOptions(t);var n=this.getOption();_.each(t,function(t){this[t]=n[t]||e[t]},this)},resetOptions:function d(e){if(_.isEmpty(this._initOptions)&&_.isEmpty(this.getOption())){this.unsetOption()}else{_.each(e,function(e){if(!_.isUndefined(this._initOptions[e])){this.setOption(e,this._initOptions[e])}else if(!_.isEmpty(this.options)&&_.has(this.options,e)){this.unsetOption(e)}},this)}},paginate:function f(t){t=t||{};var n=t.limit||e.config.maxQueryResult;t.page=t.page||1;t.reset=_.isUndefined(t.reset)?false:t.reset;t.page--;if(n){t.offset=this.offset+t.page*n}if(t.add){t=_.extend({update:true,remove:false},t)}this.fetch(t)},fetchTotal:function h(t){t=t||{};if(!_.isNull(this.total)&&_.isFunction(t.success)){t.success.call(this,this.total);return}t.success=_.wrap(t.success,_.bind(function(e,t){this.total=parseInt(t.record_count,10);if(e&&_.isFunction(e)){e(this.total)}},this));var n=this.module;var i=null;t.filter=t.filterDef||this.filterDef;if(this.link){i={id:this.link.bean.id,link:this.link.name};n=this.link.bean.module}var r=_.pick(t,"success","complete","error");t=_.omit(t,"success","complete","error");return e.api.count(n,i,r,t)},hasAtLeast:function p(t,n){n=n||{};var i="read";n.fields=["id"];delete n.view;n.silent=true;n.success=_.wrap(n.success,_.bind(function(e,n){var i=n.records.length;var r=i>=t;var a={length:i,hasMore:n.next_offset!==-1};if(_.isFunction(e)){e(r,a)}this.reset(null,{silent:true})},this));var r=this.module;var a=null;var s="records";n.filter=n.filterDef||this.filterDef;n.limit=n.limit||t;if(this.link){a={id:this.link.bean.id,link:this.link.name};r=this.link.bean.module;s="relationships"}var o=_.pick(n,"success","complete","error");n=_.omit(n,"success","complete","error");n=e.data.parseOptionsForSync(i,this,n);return e.api[s](i,r,a,n.params,o,n.apiOptions)},getPageNumber:function m(t){var n=1;var i=e.config.maxQueryResult;if(t){i=t.limit||i}if(this.offset&&i){n=Math.ceil(this.offset/i)}return n},toString:function g(){return"coll:"+(this.link?this.link.bean.module+"/"+this.link.bean.id+"/":"")+this.module+"-"+this.length},getNext:function v(e,t){var n=this;var i=-1;var r=function a(){t.apply(n,[n.at(i+1),"next"])};if(this.hasNextModel(e)){i=this.getModelIndex(e);if(i+1>=this.length){this.paginate({add:true,success:r})}else{r()}}},getPrev:function y(e,t){var n=-1,i=null,r=this;if(this.hasPreviousModel(e)){n=this.getModelIndex(e);i=this.at(n-1)}t.apply(r,[i,"prev"])},hasNextModel:function b(e){var t=this.getModelIndex(e),n=!_.isUndefined(this.next_offset)?parseInt(this.next_offset,10):-1;return t>=0&&(this.length>t+1||n!==-1)},hasPreviousModel:function x(e){return this.getModelIndex(e)>0},getModelIndex:function w(e){return this.indexOf(this.get(e.id))},setOption:function L(e,t){var n;if(_.isObject(e)){n=e}else{(n={})[e]=t}_.extend(this._persistentOptions,n);return this},unsetOption:function S(e){if(e){this.setOption(e,void 0)}else{this._persistentOptions={}}return this},getOption:function E(e){if(e){return this._persistentOptions[e]}return this._persistentOptions},clone:function k(){var e=Backbone.Collection.prototype.clone.call(this);e.link=_.clone(this.link);e.setOption(_.clone(this.getOption()));return e}}),false)})(SUGAR.App)},function(e,t){"use strict";(function(e){e.augment("MixedBeanCollection",e.BeanCollection.extend({_prepareModel:function t(n,i){var r=n instanceof e.Bean?n.module:n._module;this.model=e.data.getBeanClass(r);return e.BeanCollection.prototype._prepareModel.call(this,n,i)},fetch:function n(t){t=t||{};t.module_list=this.module_list=t.module_list||this.module_list||e.metadata.getModuleNames({filter:"visible"});return e.BeanCollection.prototype.fetch.call(this,t)},groupByModule:function i(){return _.groupBy(this.models,function(e){return e.module})},toString:function r(){return"mcoll:"+this.length}}),false)})(SUGAR.App)},function(e,t){"use strict";(function(e){var t={};var n={};var i=_.extend({beanModel:e.Bean,beanCollection:e.BeanCollection,mixedBeanCollection:e.MixedBeanCollection,init:function r(){var t=_.bind(this.sync,this);e.Bean.prototype.sync=t;e.BeanCollection.prototype.sync=t;e.events.register("data:sync:start",this);e.events.register("data:sync:complete",this);e.events.register("data:sync:success",this);e.events.register("data:sync:error",this);e.events.register("data:sync:abort",this)},reset:function a(e){this.resetModel(e);this.resetCollection(e)},resetModel:function s(e){if(e){delete t[e]}else{t={}}},resetCollection:function o(e){if(e){delete n[e]}else{n={}}},declareModel:function l(t,n,i,r,a){i=i||e.config.platform||"base";this.declareModelClass(t,n,i,r);this.declareCollectionClass(t,i,a)},declareModelClass:function u(n,i,r,a){var s=e.utils.capitalize(r);n=n||s+"Model";this.resetModel(n);var o=i?i.fields:{};var l=null;_.each(_.values(o),function(e){if(!_.isUndefined(e["default"])){if(l===null){l={}}l[e.name]=e["default"]}});var u={_defaults:l,module:n,fields:o};var c=t[s+"Model"]||t.BaseModel||this.beanModel;a=_.extend(a||{},u);return e.utils.extendClass(t,c,n,a,s)},declareCollectionClass:function c(i,r,a){var s=e.utils.capitalize(r);var o=i||s+"Model";var l=t[o];i=i||s+"Collection";if(!l){return}this.resetCollection(i);var u={model:l,module:i,offset:0};var c=n[s+"Collection"]||n.BaseCollection||this.beanCollection;a=_.extend(a||{},u);return e.utils.extendClass(n,c,i,a,s)},mergeModel:function d(e,n){var i=n?n.fields:{};var r=null;_.each(_.values(i),function(e){if(!_.isUndefined(e["default"])){if(r===null){r={}}r[e.name]=e["default"]}});var a={_defaults:r,module:e,fields:i};_.extend(t[e].prototype,a)},getModelClasses:function f(){return t},getCollectionClasses:function h(){return n},declareModels:function p(n){n=n||e.metadata.getModules();_.each(n,function(e,n){if(!t[n]){this.declareModel(n,e)}else{this.mergeModel(n,e)}},this)},getBeanClass:function m(e){return t[e]||Backbone.Model},createBean:function g(n,i,r){return t[n]?new t[n](i,r):new e.data.beanModel(i,r)},createBeanCollection:function v(t,i,r){return n[t]?new n[t](i,r):new e.data.beanCollection(i,r)},createRelatedBean:function y(e,t,n,i){var r=this.getRelatedModule(e.module,n);i=i||{};if(_.isString(t)){i.id=t;t=this.createBean(r,i)}else if(_.isNull(t)){t=this.createBean(r,i)}else{t.set(i)}t.link={name:n,bean:e,isNew:true};t.setOption("relate",true);return t},createRelatedCollection:function b(e,t,n){var i=this.getRelatedModule(e.module,t);var r=this.createBeanCollection(i,n,{link:{name:t,bean:e}});r.setOption("relate",true);e._setRelatedCollection(t,r);return r},createMixedBeanCollection:function x(t){return new e.data.mixedBeanCollection(t)},canHaveMany:function w(t,n){var i=e.metadata.getModule(t);if(!i||!i.fields||!i.fields[n]){return false}if(i.fields[n].link_type){return i.fields[n].link_type==="many"}var r=i.fields[n].relationship;var a=e.metadata.getRelationship(r);var s=a.relationship_type.split("-");var o;if(i.fields[n].side){o=i.fields[n].side==="left"?s[0]:s[2]}else if(a.lhs_module!==a.rhs_module){o=t===a.rhs_module?s[0]:s[2]}else{o=s[0]==="many"||s[2]==="many"?"many":"one"}return o==="many"},getRelateFields:function L(t,n){var i=e.metadata.getModule(t);if(!i.fields[n]){return[]}var r=i.fields[n].relationship;var a=this.getRelatedModule(t,n);var s=e.metadata.getModule(a).fields;var o=_.find(s,function(e){return e.type=="link"&&e.relationship==r});if(o){o=_.filter(s,function(e){return e.type=="relate"&&e.link==o.name})}return o||[]},getRelationshipFields:function S(t,n){var i=null;var r=e.metadata.getModule(t).fields[n];if(r.rel_fields){var a=r.relationship;var s=this.getRelatedModule(t,n);var o=e.metadata.getModule(s).fields;var l=_.find(o,function(e){return e.type=="link"&&e.relationship==a});if(l){l=_.find(o,function(e){return e.link==l.name&&e.link_type=="relationship_info"})}if(l&&l.relationship_fields){var u=_.keys(r.rel_fields);_.each(l.relationship_fields,function(e,t){if(_.include(u,t)){if(!i)i=[];i.push(e)}})}}return i},getRelatedModule:function E(t,n){var i=e.metadata.getModule(t);if(!i||!i.fields||!i.fields[n]){return false}var r=i.fields[n]&&i.fields[n].relationship;var a=e.metadata.getRelationship(r);if(!a){return i.fields[n].module||false}return i.fields[n].module||(t===a.rhs_module?a.lhs_module:a.rhs_module)},getRelatedNameField:function k(t,n){return _.find(e.metadata.getModule(t).fields,function(e){if(e.name!==n&&e.id_name===n){return e}},this)},getEditableFields:function T(t,n){var i=["id"],r=["parent","relate"];n=n||[];if(!n.length){n=_.keys(t.attributes)}_.each(n,function(n){var a;if(t.has(n)&&t.fields[n]&&(!t.fields[n].source||t.fields[n].source!=="non-db"||!t.fields[n].type||r.indexOf(t.fields[n].type)===-1)&&e.acl.hasAccessToModel("edit",t,n)){a=t.get(n);if(a&&t.fields[n].type==="collection"){_.each(a.links,function(e){i.push(e.link.name)})}else{i.push(n)}}});return t.toJSON({fields:i})},sync:function M(t,n,i){e.logger.trace("data-sync-"+(i.relate?"relate-":"")+t+": "+n);i=this.parseOptionsForSync(t,n,i);var r=this.getSyncCallbacks(t,n,i),a=null;n.dataFetched=false;this.trigger("data:sync:start",t,n,i);n.trigger("data:sync:start",t,i);if(_.isFunction(i.endpoint)){i.endpoint(t,n,i,r)}else if(n.link&&n.link.bean&&i.relate===true){var s=null;if(t=="create"||t=="update"){s=this.getEditableFields(n,i.fields);if(t=="update"&&n.link.isNew){t="create"}}a=e.api.relationships(t,n.link.bean.module,{id:n.link.bean.id,link:n.link.name,relatedId:n.id,related:s},i.params,r,i.apiOptions)}else if(i.favorite){a=e.api.favorite(n.module,n.id,n.isFavorite(),r,i.apiOptions)}else if(i.following){a=e.api.follow(n.module,n.id,n.get("following"),r,i.apiOptions)}else{if(i.query||n instanceof e.MixedBeanCollection){a=e.api.search(i.params,r,i.apiOptions)}else if(n.module){a=e.api.records(t,n.module,t=="update"||t=="create"?this.getEditableFields(n,i.fields):n.attributes,i.params,r,i.apiOptions)}else{e.logger.error("Unable to sync model with no module")}}return a},parseOptionsForSync:function A(t,n,i){i=i||{};i.params=_.extend({},i.params);i.filterDef=i.filter||n.filterDef;i.method=t;if(i.view&&_.isString(i.view)&&t=="read"){i.params.view=i.view}if(i.fields&&t=="read"){i.params.fields=i.fields.join(",")}if(i.viewed===true){i.params.viewed="1"}if(t=="read"&&n instanceof e.BeanCollection){if(i.offset&&i.offset!==0){i.params.offset=i.offset}if(i.limit||e.config&&e.config.maxQueryResult){i.params.max_num=i.limit||e.config.maxQueryResult}if(n.orderBy&&n.orderBy.field){i.params.order_by=n.orderBy.field+":"+n.orderBy.direction}if(i.myItems===true){i.params.my_items="1"}if(i.favorites===true){i.params.favorites="1"}if(!_.isEmpty(i.filterDef)){var r=e.utils.deepCopy(i.filterDef);if(_.has(r,"filter")){r=r.filter}if(!_.isArray(r)){r=[r]}i.params.filter=r}if(!_.isEmpty(i.query)){i.params.q=i.query;if(_.isEmpty(i.module_list)&&n.module){i.module_list=[n.module]}}if(i.module_list){i.params.module_list=i.module_list.join(",")}}if(t==="update"&&i.lastModified){i.apiOptions=i.apiOptions||{};i.apiOptions.headers=i.apiOptions.headers||{};i.apiOptions.headers["X-TIMESTAMP"]=i.lastModified}return i},getSyncCallbacks:function C(e,t,n){return{success:this.getSyncSuccessCallback(e,t,n),error:this.getSyncErrorCallback(e,t,n),complete:this.getSyncCompleteCallback(e,t,n),abort:this.getSyncAbortCallback(e,t,n)}},getSyncSuccessCallback:function R(t,n,i){var r=this;return function(a,s){n.inSync=true;n.original_assigned_user_id=n.get("assigned_user_id");if(t=="read"&&n instanceof e.BeanCollection){var o=i.offset||0;a=a||{};if(a.next_offset){n.offset=a.next_offset!=-1?a.next_offset:o+(a.records||[]).length;n.next_offset=a.next_offset;n.page=n.getPageNumber(i)}if(!i.update){n.total=_.isNumber(a.total)?a.total:null}if(n instanceof e.MixedBeanCollection){n.xmod_aggs=a.xmod_aggs||null;n.tags=a.tags||null}a=a.records||[];r._updateCollectionProperties(n,i)}if(i.relate===true&&n instanceof e.Bean){n.link.isNew=false;if(t!="read"){if(n.link.bean){var l=n.link.bean.getSynced(),u=_.reduce(a.record,function(e,t,n){if(!_.isEqual(l[n],t)){e[n]=t}return e},{});n.link.bean.set(u);n.link.bean.setSyncedAttributes(a.record)}a=a.related_record;if(t=="delete"){n.set(a);delete n.link}}}n.dataFetched=true;if(i.success)i.success(a);r.trigger("data:sync:success",t,n,i,s);n.inSync=null}},getSyncErrorCallback:function D(t,n,i){return _.bind(function(r){if(r.request&&r.request.aborted){var a=this.getSyncAbortCallback(t,n,i);return a(r.request)}e.error.handleHttpError(r,n,i);this.trigger("data:sync:error",t,n,i,r);n.trigger("data:sync:error",t,i,r);if(_.isFunction(i.error)){i.error(r)}},this)},getSyncCompleteCallback:function I(e,t,n){return _.bind(function(i){this.trigger("data:sync:complete",e,t,n,i);t.trigger("data:sync:complete",e,n,i);if(_.isFunction(n.complete)){n.complete(i)}n.previousModels=null;n={}},this)},getSyncAbortCallback:function O(e,t,n){return _.bind(function(i){this._updateCollectionProperties(t,n);this.trigger("data:sync:abort",e,t,n,i);t.trigger("data:sync:abort",e,n,i)},this)},_updateCollectionProperties:function N(e,t){t=t||{};e.myItems=t.myItems;e.favorites=t.favorites;e.query=t.query;e.modelList=t.modelList;e.filterDef=t.filterDef}},Backbone.Events);e.augment("data",i,false)})(SUGAR.App)},function(e,t){"use strict";(function(e){e.augment("validation",{validators:function(){var t=function i(e,t,n){var i=_.isUndefined(e[n])?e.validation?e.validation[n]:null:e[n];if(_.contains(["int","float","decimal","currency"],e.type)&&_.isFinite(i)){if(e.type=="int"){t=parseInt(t)}else{t=parseFloat(t)}if(n=="max"){if(t>i)return i}else if(n=="min"){if(t<i)return i}else if(n=="greaterthan"){if(t<=i)return i}else if(n=="lessthan"){if(t>=i)return i}}};var n=function r(t,n,i,a){if(_.indexOf(["date","datetimecombo"],t.type)!==-1&&t.validation&&t.validation.type===i){var s=a.fields[t.validation.compareto];if(!_.isUndefined(s)&&_.indexOf(["date","datetimecombo"],s.type)!=-1){var o=Date.parse(a.get(s.name));n=Date.parse(n.toString());if(!_.isNaN(o)&&!_.isNaN(n)){var l=e.lang.get(s.label||s.vname||s.name,a.module);if(i=="isbefore"){return o<n?l:undefined}if(i=="isafter"){return o>n?l:undefined}}}}};return{maxLength:function a(e,t){if(_.isNumber(t)){t=t.toString()}if(_.isNumber(e.len)&&_.isString(t)){var a=e.len;t=t||"";t=t.toString();if(t.length>a){return a}}},minLength:function s(e,t){if(_.isNumber(e.minlen)){var s=e.minlen;t=t||"";t=t.toString();if(t.length<s){return s}}},url:function o(e,t){},email:function l(t,n){var i;if(t.type=="email"||t.type==="email-text"){if(n.length>0){_.each(n,function(n){if(n.email_address===""&&(_.isUndefined(t.required)||!t.required)){return}if(!e.utils.isValidEmailAddress(n.email_address)){if(!i)i=[];i.push(n.email_address)}})}if(i&&i.length>0){return i}}},primaryEmail:function u(e,t){if(e.type=="email"){if(t.length>0&&!_.find(t,function(e){return e.primary_address=="1"})){return true}}},duplicateEmail:function c(e,t){if(e.type=="email"){var n=_.pluck(t,"email_address"),i=[],r=n.length,a,s;for(a=0;a<r;a++){for(s=a+1;s<r;s++){if(n[a]==n[s])i.push(n[a])}}if(i&&i.length>0){return i}}},datetime:function d(t,n){var i,r,a,s,o,l,u,c;function d(e,t,n){var i=parseInt(e,10);return!isNaN(i)&&i>=t&&i<=n}if(t.type==="date"||t.type==="datetimecombo"){if(_.isNaN(Date.parse(n))&&_.isNaN(Date.parse(n.replace(/[\.\-]/g,"/")))){return n}else{if(!e.date.isIso(n)){l=n.replace(/[\.\-]/g,"/").split("/");r=_.filter(l,function(e){return e.length===3||e.length>4});if(r.length){return n}if(/([\.\/\-])\1/.test(n)===true){return n}a=e.user.getPreference("datepref");s=a.match(/[.\/\-\s].*?/);

o=a.split(s);for(u=0,c=o.length;u<c;u++){i=l[u];switch(o[u].toLowerCase().charAt(0)){case"m":if(!d(i,1,12)){return n}break;case"d":if(!d(i,1,31)){return n}break}}}else{if(n.charAt(0)==="0")return n}}}},minValue:function f(e,n){return t(e,n,"min")},maxValue:function h(e,n){return t(e,n,"max")},greaterThan:function p(e,n){return t(e,n,"greaterthan")},lessThan:function m(e,n){return t(e,n,"lessthan")},number:function g(e,t){if(_.indexOf(["int","float","decimal","currency"],e.type)!=-1){return _.isBoolean(t)||_.isString(t)&&!t.trim().length||isNaN(parseFloat(t))||!_.isFinite(t)?true:undefined}},isBefore:function v(e,t,i){return n(e,t,"isbefore",i)},isAfter:function y(e,t,i){return n(e,t,"isafter",i)}}}(),requiredValidator:function t(e,n,i,r){if(e.required===true&&n!=="id"&&e.type!=="image"&&_.isUndefined(e.auto_increment)){var a=i.get(n);var s=_.isUndefined(a);var o=_.isNull(r)||r===""||r===false||_.isArray(r)&&this._isArrayEmpty(r)||r instanceof Backbone.Collection&&!r.length;if(s&&_.isUndefined(r)||o){return true}}},_isArrayEmpty:function n(e){return _.every(e,_.isEmpty)}},false)})(SUGAR.App)},function(e,t){"use strict";(function(e){Handlebars.registerHelper("field",function(t,n){var i=e.view.createField({def:this,viewDefs:this,view:t,model:n.hash.model,viewName:n.hash.template});if(n.hash.parent&&_.isArray(n.hash.parent.fields)){n.hash.parent.fields.push(i)}return i.getPlaceholder()});Handlebars.registerHelper("fieldOfType",function(t,n){var i={type:t,name:t,label:n};var r=e.view.createField({def:i,view:this});return r.getPlaceholder()});Handlebars.registerHelper("component",function(e,t){var n,i,r="";n=_.find(e.meta.components,function(e){var n,i;i=e.layout||e.view;if(_.isString(i)){n=i}else{n=i.name||i.type}return n===t});if(_.isObject(n)&&!_.isEmpty(n)){i=e.initComponents([n])[0];n.initializedInTemplate=true;r=i.getPlaceholder()}return r});Handlebars.registerHelper("eachOptions",function(t,n){var i,r="",a;i=_.isString(t)?e.lang.getAppListStrings(t):t;if(_.isArray(i)){a=function s(e,t){r=r+n.fn({key:t,value:e})}}else if(_.isObject(i)){a=function o(e,t){r=r+n.fn({key:t,value:e})}}else{i=null}if(i)_.each(i,a,this);return r});Handlebars.registerHelper("buildRoute",function(t){var n=t.hash.context,i=t.hash.model||(n&&n.get("model")?n.get("model"):{}),r=t.hash.module||i.module||(n&&n.get("module")?n.get("module"):null),a=t.hash.id||i.id,s=t.hash.action;return e.router.buildRoute(r,a,s)});Handlebars.registerHelper("fieldValue",function(e,t,n){return e.get(t)||n.hash.defaultValue||""});Handlebars.registerHelper("has",function(e,t,n){if(!_.isArray(t)&&!_.isObject(t)){t=[t]}return _.include(t,e)?n.fn(this):n.inverse(this)});Handlebars.registerHelper("notHas",function(e,t,n){var i=n.fn,r=n.inverse;n.fn=r;n.inverse=i;return Handlebars.helpers.has.call(this,e,t,n)});Handlebars.registerHelper("isSortable",function(t,n,i){if(e.utils.isSortable(t,n)){return i.fn(this)}else{return""}});Handlebars.registerHelper("eq",function(e,t,n){return e==t?n.fn(this):n.inverse(this)});Handlebars.registerHelper("notEq",function(e,t,n){return e!=t?n.fn(this):n.inverse(this)});Handlebars.registerHelper("match",function(e,t,n){var i=new RegExp(t);if(i.test(e)){return n.fn(this)}else{return n.inverse(this)}});Handlebars.registerHelper("notMatch",function(e,t,n){var i=new RegExp(t);if(!i.test(e)){return n.fn(this)}else{return n.inverse(this)}});Handlebars.registerHelper("log",function(t){e.logger.debug("*****HBS: Current Context*****");e.logger.debug(this);e.logger.debug("*****HBS: Current Value*****");e.logger.debug(t);console.log(t);e.logger.debug("***********************")});Handlebars.registerHelper("str",function(t,n,i){n=_.isString(n)?n:null;return e.lang.get(t,n,i)});Handlebars.registerHelper("relativeTime",function(t,n){var i=e.date(t),r,a;n.hash.title=n.hash.title||i.formatUser(n.hash.dateOnly);r=_.map(n.hash,function(e,t){return t+'="'+Handlebars.Utils.escapeExpression(e)+'"'}).join(" ");a='<time datetime="'+i.format()+'" '+r+">"+i.fromNow()+"</time>";return new Handlebars.SafeString(a)});Handlebars.registerHelper("arrayJoin",function(e,t){return e.join(t)});Handlebars.registerHelper("nl2br",function(e){e=Handlebars.Utils.escapeExpression(e);var t=e.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+"<br>");return new Handlebars.SafeString(t)});Handlebars.registerHelper("formatCurrency",function(t,n){if(_.isObject(n)){n=n.hash.currencyId||undefined}return e.currency.formatAmountLocale(t,n)});Handlebars.registerHelper("firstChars",function(e,t){return e.substring(0,t)});Handlebars.registerHelper("formatDate",function(t,n){t=e.date(t);return t.formatUser(n.hash.dateOnly)});Handlebars.registerHelper("getModuleName",function(t,n){var i={plural:n.hash.plural,defaultValue:n.hash.defaultValue};return e.lang.getModuleName(t,i)});Handlebars.registerHelper("partial",function(t,n,i,r){var a,s,o;if(!r&&i.hash){r=i;i={}}o=_.extend({templateComponent:n},i,r.hash);a=r.hash.module||n.module;if(n&&n.options.templateOptions&&n.options.templateOptions.partials){s=n.options.templateOptions.partials[t]}else if(n instanceof e.view.Field){var l=r.hash.fallbackTemplate;s=e.template.getField(n.type,t||"detail",a,l)}else if(n instanceof e.view.View){var u=n.tplName;s=e.template.getView(n.name+"."+t,a)||e.template.getView(n.name+"."+t);if(!s&&u){s=e.template.getView(u+"."+t,a)||e.template.getView(u+"."+t)}}else if(n instanceof e.view.Layout){s=e.template.getLayout(n.name+"."+t,a)||e.template.getLayout(n.name+"."+t)}return new Handlebars.SafeString(s?s(o):"")})})(SUGAR.App)},function(e,t){"use strict";(function(e){var t=0;var n={reset:function i(){_.each(this.layouts,function(e,t){delete this.layouts[t]},this);_.each(this.views,function(e,t){delete this.views[t]},this);_.each(this.fields,function(e,t){delete this.fields[t]},this)},getFieldId:function r(){return t},views:{},layouts:{},fields:{},_createComponent:function a(e,t,n){var i=this.declareComponent(e,n.type||t,n.loadModule||n.module,n.controller,false,this._getPlatform(n));var r=new i(n);r.trigger("init");r.bindDataChange();return r},createView:function s(t){t.context=t.context||e.controller.context;t.module=t.module||t.context.get("module");t.name=t.name||t.type;t.meta=t.meta||e.metadata.getView(t.module,t.name,t.loadModule);if(t.def&&t.def.xmeta){t.meta=_.extend({},t.meta,t.def.xmeta)}var n=t.meta||{};t.type=t.type||n.type||t.name;return this._createComponent("view",t.type,t)},createLayout:function o(t){t.context=t.context||e.controller.context;t.module=t.module||t.context.get("module");t.name=t.name||t.type;t.meta=t.meta||e.metadata.getLayout(t.module,t.name,t.loadModule);if(t.def&&t.def.xmeta){t.meta=_.extend({},t.meta,t.def.xmeta)}var n=t.meta||{};t.type=t.type||n.type||t.name;return this._createComponent("layout",t.type,t)},createField:function l(n){var i=n.viewDefs?n.viewDefs.type:n.def.type;n.context=n.context||n.view.context||e.controller.context;n.model=n.model||n.context.get("model");n.module=n.module||(n.model&&n.model.module?n.model.module:n.context.get("module"))||"";if(n.meta){e.logger.warn("`params.meta` is deprecated in `View.ViewManager#createField` since 7.8 and will be removed in 7.9.")}if(n.meta&&n.meta.controller)n.controller=n.meta.controller;n.sfId=++t;var r=this._createComponent("field",i,n);n.view.fields[r.sfId]=r;return r},_getPlatform:function u(t){return t.platform||(e.config&&e.config.platform?e.config.platform:"base")},_getController:function c(e){var t=this._getBaseComponent(e.type,e.name,e.module,e.platform);if(t.cache[t.moduleBasedClassName]){return t.cache[t.moduleBasedClassName]}return t.baseClass},componentHasPlugin:function d(t){var n;if(!t.type||!t.name||!t.plugin){e.logger.error("componentHasPlugin requires type, name, and plugin parameters");return null}n=this._getController(t);return n&&n.prototype&&_.contains(n.prototype.plugins,t.plugin)},declareComponent:function f(t,n,i,r,a,s){var o=this._getBaseComponent(t,n,i,s,a&&r);return o.cache[o.moduleBasedClassName]||e.utils.extendClass(o.cache,o.baseClass,o.moduleBasedClassName,r,o.platformNamespace)||o.baseClass},_getBaseComponent:function h(t,n,i,r,a){r=this._getPlatform({platform:r});var s=e.utils.capitalize(t),o=e.utils.capitalize(r),l=e.utils.capitalizeHyphenated(n)+s,u=o+(i||"")+l,c=o+(i||"")+"Custom"+l,d=e.view[t+"s"],f=e.utils.capitalize(e.config.appId)+s;if(a){if(d[u])delete d[u]}var h=d[o+"Custom"+l]||d[o+l]||d["BaseCustom"+l]||d["Base"+l]||d[l]||d["BaseBase"+s]||e.view["Custom"+f]||e.view[f]||e.view[s];if(d[c]&&!a){u=c}return{cache:d,platformNamespace:o,moduleBasedClassName:u,baseClass:h}}};e.augment("view",n,false)})(SUGAR.App)},function(e,t){"use strict";(function(e){e.view.Component=Backbone.View.extend({_isInitialized:false,constructor:function t(e){this.options=e||{};this._wrapInitialize(e);return Backbone.View.apply(this,arguments)},_wrapInitialize:function n(e){this.initialize=_.wrap(this.initialize,_.bind(function(t){t.call(this,e);this.initialize=t;this._isInitialized=true;this.delegateEvents()},this))},initialize:function i(t){this.context=t.context||e.controller&&e.controller.context||new Backbone.Model;this.meta=t.meta;this.module=t.module||this.context.get("module");this.model=t.model||this.context.get("model");this.collection=t.collection||this.context.get("collection");if(this.meta&&this.meta.css_class){this.$el.addClass(this.meta.css_class)}this.updateVisibleState(true);e.user.lastState.register(this)},_render:function r(){return this},render:function a(){if(this.disposed===true){e.logger.error("Unable to render component because it's disposed "+this+"\n");return false}if(!this.triggerBefore("render"))return false;this._render();this.trigger("render");return this},delegateEvents:function s(){if(!this._isInitialized){return this}return Backbone.View.prototype.delegateEvents.apply(this,arguments)},setTemplateOption:function o(e,t){this.options.templateOptions=this.options.templateOptions||{};this.options.templateOptions[e]=_.extend({},this.options.templateOptions[e],t)},bindDataChange:function l(){},unbindData:function u(){if(this.model)this.model.off(null,null,this);if(this.collection)this.collection.off(null,null,this)},unbind:function c(){this.off();this.offBefore();this.undelegateEvents();e.events.off(null,null,this);e.events.unregister(this);if(this.context)this.context.off(null,null,this);if(this.layout)this.layout.off(null,null,this)},loadData:function d(){},_dispose:function f(){this.unbindData();this.unbind();this.remove();this.model=null;this.collection=null;this.context=null;this.$el=null;this.el=null},dispose:function h(){if(this.disposed===true)return;this._dispose();this.disposed=true},toString:function p(){return this.cid+"-"+(this.$el&&this.$el.id?this.$el.id:"<no-id>")+"/"+this.module+"/"+this.model+"/"+this.collection},closestComponent:function m(e){},show:function g(){if(!this.isVisible()){if(!this.triggerBefore("show")){return false}this._show();this.trigger("show")}},hide:function v(){if(this.isVisible()){if(!this.triggerBefore("hide")){return false}this._hide();this.trigger("hide")}},isVisible:function y(){return this._isVisible},updateVisibleState:function b(e){this._isVisible=!!e},_show:function x(){this.$el.removeClass("hide").show();this.updateVisibleState(true)},_hide:function w(){this.$el.addClass("hide").hide();this.updateVisibleState(false)},_super:function L(t,n){if(!t||!_.isString(t)){return e.logger.error("tried to call _super without specifying a parent method in "+this.name)}var i,r=Object.getPrototypeOf(this);n=n||[];this._superStack=this._superStack||{};this._superStack[t]=this._superStack[t]||[];if(this._superStack[t].length>0){i=Object.getPrototypeOf(_.last(this._superStack[t]));if(_.contains(this._superStack[t],i)){return e.logger.error("Loop detected calling "+t+" from "+this.name)}}else{i=Object.getPrototypeOf(r)}if(!r[t]){return e.logger.error("Unable to find method "+t+" on class "+this.name)}while(!i.hasOwnProperty(t)&&i!==e.view.Component.prototype){i=Object.getPrototypeOf(i)}while(r[t]===i[t]&&i!==e.view.Component.prototype){r=i;i=Object.getPrototypeOf(i)}this._superStack[t].push(i);if(!i){return e.logger.error("Unable to find parent of component "+this.name)}if(!i[t]){return e.logger.error("Unable to find method "+t+" on parent class of "+this.name)}var a=i[t].apply(this,n);this._superStack[t].pop();if(_.isEmpty(this._superStack[t])){this._superStack[t]=null}return a},getPlaceholder:function S(){return new Handlebars.SafeString('<span cid="'+this.cid+'"></span>')}});_.extend(e.view.Component.prototype,e.beforeEvent)})(SUGAR.App)},function(e,t){"use strict";(function(e){e.view.View=e.view.Component.extend({initialize:function t(n){e.plugins.attach(this,"view");e.view.Component.prototype.initialize.call(this,n);this.type=n.type;this.name=n.name||this.type;this.action=n.meta&&n.meta.action?n.meta.action:this.name;this._loadTemplate(n);this.fields={};this.fallbackFieldTemplate=this.fallbackFieldTemplate||"detail";this.layout=this.options.layout;this.primary=n.primary;this._setLabels();this.context.addFields(this.getFieldNames());e.events.on("app:locale:change",function(){this._setLabels()},this)},_getTemplate:function n(t,i){return e.template.getView(t,this.module)||e.template.getView(t,i)},_loadTemplate:function i(t){var n,i;t=t||{};if(t.template){n=t.template;i=null}else if(this.meta&&this.meta.template){n=this._getTemplate(this.meta.template,t.loadModule);i=this.meta.template}else{n=this._getTemplate(this.name,t.loadModule);i=this.name}if(!n){if(this.meta&&this.meta.type){n=this._getTemplate(this.meta.type,t.loadModule);i=this.meta.type}else{n=e.template.empty;i=""}}this.tplName=i;this.template=n},_renderHtml:function r(t,n){if(this.template){try{this.$el.html(this.template(t||this,n||this.options.templateOptions))}catch(i){e.logger.error("Failed to render "+this+"\n"+i);e.error.handleRenderError(this,"_renderHtml")}}},_renderFields:function a(){var e=this;var t={};this.$("span[sfuuid]").each(function(){var e=$(this),n=e.attr("sfuuid");t[n]=e});_.each(this.fields,function(n){e._renderField(n,t[n.sfId])})},_renderField:function s(t,n){t.setElement(n||this.$("span[sfuuid='"+t.sfId+"']"));try{t.render()}catch(i){e.logger.error("Failed to render "+t+" on "+this+"\n"+i);e.error.handleRenderError(this,"_renderField",t)}},_render:function o(){if(e.acl.hasAccessToModel(this.action,this.model)){this._disposeFields();this._renderHtml();this._renderFields()}else{e.logger.info("Current user does not have access to this module view. name: "+this.name+" module:"+this.module);if(this.primary){e.error.handleRenderError(this,"view_render_denied")}}return this},_setLabels:function l(){this.modulePlural=e.lang.getAppListStrings("moduleList")[this.module]||this.module;this.moduleSingular=e.lang.getAppListStrings("moduleListSingular")[this.module]||this.modulePlural},loadData:function u(t,n){if(e.acl.hasAccess("read",this.module)){n=_.isUndefined(n)?true:n;if(n){this.context.set("fields",this.getFieldNames())}this.context.loadData(t)}},getFieldNames:function c(t){var n=[];t=t||this.context.get("module");if(this.meta&&this.meta.panels){n=_.reduce(_.map(this.meta.panels,function(e){var t=_.flatten(_.compact(_.pluck(e.fields,"fields")));return _.pluck(e.fields,"name").concat(_.pluck(t,"name")).concat(_.flatten(_.compact(_.pluck(e.fields,"related_fields"))))}),function(e,t){return e.concat(t)},[])}n=_.compact(_.uniq(n));var i=e.metadata.getModule(t,"fields");if(i){n=_.reject(n,function(e){return _.isUndefined(i[e])});var r=[];_.each(n,function(e){if(i[e].type=="relate"){r.push(i[e].id_name)}else if(i[e].type=="parent"){r.push(i[e].id_name);r.push(i[e].type_name)}if(_.isArray(i[e].fields)){r=r.concat(i[e].fields)}});n=_.union(n,r)}return n},getFields:function d(e,t){var n={};var i=this.getFieldNames(e);_.each(i,function(e){var i=this.getField(e,t);if(i){n[e]=i.def}},this);return n},getField:function f(e,t){return _.find(this.fields,function(n){return n.name==e&&(!t||n.model==t)})},closestComponent:function h(e){if(!this.layout){return}if(this.layout.name===e){return this.layout}return this.layout.closestComponent(e)},_show:function p(){e.view.Component.prototype._show.call(this);_.each(this.fields,function(e){e.updateVisibleState(true)})},_hide:function m(){e.view.Component.prototype._hide.call(this);_.each(this.fields,function(e){e.updateVisibleState(true)})},_dispose:function g(){e.plugins.detach(this,"view");this._disposeFields();e.view.Component.prototype._dispose.call(this)},_disposeFields:function v(){_.each(this.fields,function(e){e.dispose()});this.fields={}},toString:function y(){return"view-"+this.name+"-"+e.view.Component.prototype.toString.call(this)},getFieldMeta:function b(e,t){var n=_.flatten(_.pluck(this.meta.panels,"fields")),i=_.find(n,function(t){return t.name===e});if(!i&&t){i=_.find(_.flatten(_.pluck(n,"fields")),function(t){return t&&t.name===e});if(i){i._isChild=true}}return i},setFieldMeta:function x(e,t){_.each(this.meta.panels,function(n){_.each(n.fields,function(i,r){if(i.name===e){n.fields[r]=_.extend(i,t)}else if(_.isArray(i.fields)){_.each(i.fields,function(n,r){if(n.name===e){i.fields[r]=_.extend(n,t)}})}})})}})})(SUGAR.App)},function(e,t){"use strict";(function(e){e.view.Layout=e.view.Component.extend({initialize:function t(n){e.plugins.attach(this,"layout");e.view.Component.prototype.initialize.call(this,n);this._components=[];this.meta=this.meta||{};this.type=this.meta.type||this.options.type;this.name=this.meta.name||this.options.name||this.type||"";if(this.meta.label){this.label=this.meta.label}else if(this.options.def&&this.options.def.label){this.label=this.options.def.label}else if(this.options.label){this.label=this.options.label}else{this.label=""}this.layout=this.options.layout;this._loadTemplate(n);if(this.template){this.$el.append(this.template(this,n));this.placeComponentsFromTemplate()}this.context.addFields(this.getFieldNames());if(this.meta.lazy_loaded){this._componentsMeta=this.meta.components;this.meta.components=[]}this.context.addFields(this.getFieldNames());e.events.on("app:locale:change",function(){this.render()},this)},_loadTemplate:function n(t){t=t||{};if(this.meta.template){this.template=e.template.getLayout(this.meta.template,this.module)||e.template.getLayout(this.meta.template,t.loadModule);return}var n=e.template.getLayout(this.name,this.module)||e.template.getLayout(this.type,this.module);if(!n){if(t.loadModule){n=e.template.getLayout(this.name,t.loadModule)||e.template.getLayout(this.type,t.loadModule)}else{n=e.template.getLayout(this.name)||e.template.getLayout(this.type)}}this.template=n},placeComponentsFromTemplate:function i(){var e={};if(_.isEmpty(this._components)){return}this.$("span[cid]").each(function(){var t=$(this),n=t.attr("cid");e[n]=t});_.each(this._components,function(t){var n=e[t.cid];if(n){n.replaceWith(t.el)}},this)},initComponents:function r(e,t,n){if(this.disposed){return}var i,r;e=e||this.meta.components;r=this._components.length;this._addComponentsFromDef(e,t,n);i=this._components.slice(r);_.each(i,function(e){if(_.isFunction(e.initComponents)){e.initComponents()}});this.trigger("init");return i},createComponentFromDef:function a(t,n,i){n=n||this.context;i=i||this.module;if(t.context){if(t.context instanceof e.Context){n=t.context}else{n=n.getChildContext(t.context);n.prepare()}i=n.get("module")}if(t.view){if(_.isString(t.view)){return e.view.createView({context:n,name:t.view,def:t,module:i,loadModule:t.loadModule,primary:t.primary,layout:this})}else if(_.isObject(t.view)){if(t.view.meta){e.logger.warn("`meta` property in metadata layout definitions is deprecated since 7.8 and "+"will be removed in 7.9. Please use `xmeta` instead.")}return e.view.createView({context:n,module:i,loadModule:t.loadModule,meta:t.view.meta||t.view,type:t.view.type,name:t.view.name,primary:t.view.primary,layout:this})}}else if(t.layout){if(_.isString(t.layout)){return e.view.createLayout({context:n,name:t.layout,def:t,module:i,loadModule:t.loadModule,layout:this})}else if(_.isObject(t.layout)){if(t.layout.meta){e.logger.warn("`meta` property in metadata layout definitions is deprecated since 7.8 and "+"will be removed in 7.9. Please use `xmeta` instead.")}return e.view.createLayout({context:n,module:i,loadModule:t.loadModule,meta:t.layout.meta||t.layout,type:t.layout.type,name:t.layout.name,def:t,layout:this})}}else{e.logger.warn("Invalid layout definition:\n"+t.layout)}},_addComponentsFromDef:function s(e,t,n){e=e||[];_.each(e,function(e){if(e.initializedInTemplate){delete e.initializedInTemplate;return}if(e.view||e.layout){this.addComponent(this.createComponentFromDef(e,t,n),e)}},this)},addComponent:function o(e,t){if(!e.layout)e.layout=this;this._components.push(e);this._placeComponent(e,t)},_placeComponent:function l(e){this.$el.append(e.el)},removeComponent:function u(e){var t=_.isNumber(e)?e:this._components.indexOf(e);if(t>-1){var n=this._components.splice(t,1);n[0].layout=null}},getComponent:function c(e){return _.find(this._components,function(t){return t.name===e})},_render:function d(){if(this._components&&this._components.length>0){_.each(this._components,function(e){e.render()},this)}else{e.logger.info("Can't render anything because the layout has no components: "+this.toString()+"\n"+"Either supply metadata or override Layout.render method")}return this},loadData:function f(e,t){if(this.disposed){return}t=_.isUndefined(t)?true:t;if(t){this.context.set("fields",this.getFieldNames())}this.context.loadData(e);_.each(this._components,function(t){t.loadData(e,t.context!=this.context)},this)},getFieldNames:function h(e){var t=[];e=e||this.module;_.each(this._components,function(n){if(n.module==e){t=_.union(t,n.getFieldNames(null,true))}},this);return t},getFields:function p(e){var t={};_.each(this._components,function(n){_.extend(t,n.getFields(e))});return t},closestComponent:function m(e){if(!this.layout){return}if(this.layout.name===e){return this.layout}return this.layout.closestComponent(e)},_show:function g(){e.view.Component.prototype._show.call(this);_.each(this._components,function(e){e.updateVisibleState(true)})},_hide:function v(){e.view.Component.prototype._hide.call(this);_.each(this._components,function(e){e.updateVisibleState(true)})},_dispose:function y(){e.plugins.detach(this,"layout");this._disposeComponents();e.view.Component.prototype._dispose.call(this)},_disposeComponents:function b(){_.each(this._components,function(e){e.dispose()});this._components=[]},toString:function x(){return"layout-"+(this.options.type||this.options.name)+"-"+e.view.Component.prototype.toString.call(this)}})})(SUGAR.App)},function(e,t){"use strict";(function(e){e.view.Field=e.view.Component.extend({fieldTag:"input",initialize:function t(n){e.plugins.attach(this,"field");e.view.Component.prototype.initialize.call(this,n);this.sfId=n.sfId;this.view=n.view;this.viewDefs=n.viewDefs||{};this.name=this.viewDefs.name||n.def&&n.def.name;var i=this.model&&this.model.fields?this.model.fields[this.name]:null;this.fieldDefs=_.extend({},i,this.viewDefs.defs);this.def=_.extend({},i,n.def);this.type=this.viewDefs.type||this.def.type||this.fieldDefs.type;var r=this.def.label||this.def.vname||this.name;this.label=e.lang.get(this.viewDefs.label||r,this.module);this.template=e.template.empty;if(this.model){this.model.on("error:validation:"+this.name,this.handleValidationError,this);this.model.on("validation:start attributes:revert",this.removeValidationErrors,this);this.model.on("acl:change:"+this.name,this.handleAclChange,this)}},viewFallbackMap:{edit:"detail"},handleAclChange:function n(){this.action=void 0;this.render()},_checkAccessToAction:function i(t){return e.acl.hasAccessToModel(t,this.model,this.name)},_getFallbackTemplate:function r(e){return this.isDisabled()&&e==="disabled"?"edit":this.view.fallbackFieldTemplate||"detail"},_loadTemplate:function a(){var t;var n=this.options.viewName||this.options.def.view||(this.view.meta&&this.view.meta.type?this.view.meta.type:this.view.name);var i=this.action;if(this.isDisabled()&&n==="edit"){n=this.action}else{i=this.action||(this.view.action&&this.view.name!=this.view.action?this.view.action:n)}while(n){if(this._checkAccessToAction(i))break;n=this.viewFallbackMap[n];i=n}if(n){var r=this.module||this.context.get("module");t=this._getFallbackTemplate(n);this.template=e.template.getField(this.type,n,r,t)||e.template.getField("base",n,r,t)||e.template.empty}else{this.template=e.template.empty}this.tplName=n;this.action=i},delegateEvents:function s(e){e=e||_.result(this,"events")||(this.def?this.def.events:null);if(!e)return;e=_.clone(e);_.each(e,function(t,n){var i=this[t];if(!i&&_.isString(t)){i=_.bind(function(e){if(_.isFunction(this.triggerMetadataEvent)){this.triggerMetadataEvent(e,t)}},this);this["callback_"+n]=i;e[n]="callback_"+n}if(!_.isFunction(t)&&!i){delete e[n]}},this);Backbone.View.prototype.delegateEvents.call(this,e)},_render:function o(){this._loadTemplate();if(this.model instanceof Backbone.Model){this.value=this.getFormattedValue()}this.dir=_.result(this,"direction");if(e.lang.direction===this.dir){delete this.dir}this.unbindDom();this.$el.html(this.template(this)||"");if(this.def&&this.def.css_class){this.getFieldElement().addClass(this.def.css_class)}this.$(this.fieldTag).attr("dir",this.dir);this.bindDomChange();return this},getFieldElement:function l(){return this.$el},bindDomChange:function u(){if(!(this.model instanceof Backbone.Model))return;var e=this;var t=this.$el.find(this.fieldTag);t.on("change",function(){e.model.set(e.name,e.unformat(t.val()))})},bindDataChange:function c(){if(this.model){this.model.on("change:"+this.name,function(e,t){if(this.action==="edit"){this.$(this.fieldTag).val(this.format(t))}else{this.render()}},this)}},hasChanged:function d(){return!_.isEqual(this.format(this.model.getSynced(this.name)),this.format(this.model.get(this.name)))},format:function f(e){return e},unformat:function h(e){return e},getFormattedValue:function p(){return this.format(this.model.has(this.name)?this.model.get(this.name):null)},handleValidationError:function m(e){},removeValidationErrors:function g(){},getPlaceholder:function v(){return new Handlebars.SafeString('<span sfuuid="'+this.sfId+'"></span>')},setDisabled:function y(e){e=_.isUndefined(e)?true:e;if(e&&this.isDisabled()===false){this._previousAction=this.action;this.action="disabled";this.render()}else if(e===false&&this.isDisabled()){this.action=this._previousAction;delete this._previousAction;this.render()}},isDisabled:function b(){return this.action==="disabled"},setViewName:function x(e){this.options.viewName=e},setMode:function w(e){if(this.isDisabled()){this._previousAction=e}else{this.action=e}this.setViewName(e);this.render()},unbindDom:function L(){this.$el.find(this.fieldTag).off()},_dispose:function S(){e.plugins.detach(this,"field");this.unbindDom();e.view.Component.prototype._dispose.call(this)},toString:function E(){return"field-"+this.name+"-"+this.sfId+"-"+e.view.Component.prototype.toString.call(this)},_show:function k(){this.getFieldElement().removeClass("hide").show();this.updateVisibleState(true)},_hide:function T(){this.getFieldElement().addClass("hide").hide();this.updateVisibleState(false)},equals:function M(e){return this.type===e.type&&_.isEqual(this.getFormattedValue(),e.getFormattedValue())},closestComponent:function A(e){if(!this.view){return}if(this.view.name===e){return this.view}return this.view.closestComponent(e)}})})(SUGAR.App)},function(e,t){"use strict";(function(e){var t={};var n={preventAnyAlert:false,init:function i(){this.$alerts=$("#alerts");this.klass=e.view.AlertView;if(e.config){this.$alerts=$(e.config.alertsEl).length?$(e.config.alertsEl):this.$alerts;this.klass=e.view[e.utils.capitalize(e.config.appId)+"AlertView"]||e.view.views[e.utils.capitalize(e.config.platform)+"AlertView"]||e.view.views.BaseAlertView||e.view[e.utils.capitalize(e.config.platform)+"AlertView"]||this.klass}_.each(this.$alerts.find(".alert-wrapper"),function(e,n){var i="init-"+n;if(!t[i]){t[i]=this._create(i,{el:e})}},this)},show:function r(e,n){if(!this.$alerts||!this.$alerts.length)return null;if(this.preventAnyAlert)return null;n=_.extend({level:"info",autoClose:false},n||{});if(n.level==="confirmation"){this.dismissAll();this.preventAnyAlert=true}if(n.messages){n.messages=_.isString(n.messages)?[n.messages]:n.messages}var i=t[e];if(!i){i=this._create(e,n);t[e]=i}i.level=n.level;if(!!n.autoClose)this._setAutoCloseTimer(i,n.onAutoClose,n.autoCloseDelay);i.render();return i},_create:function a(e,t){var n=new this.klass(t);n.key=e;n.$el.prependTo(this.$alerts);return n},_setAutoCloseTimer:function s(t,n,i){if(t.timerId)clearTimeout(t.timerId);t.timerId=setTimeout(_.bind(function(){if(_.isFunction(n)){n(t.key)}this.dismiss(t.key)},this),i||e.config.alertAutoCloseDelay||5e3)},dismiss:function o(e,n){this.preventAnyAlert=false;var i=t[e];if(!i)return;if(i.timerId)clearTimeout(i.timerId);i.close(n);delete t[e]},dismissAll:function l(e,n){_.each(t,function(t,i){if(!e||t.level==e){this.dismiss(i,n)}},this)},get:function u(e){return t[e]},getAll:function c(){return t}};e.view.AlertView=e.view.Component.extend({tpl:'<div class="alert alert-block">{{#if title}}<strong>{{title}}</strong>{{/if}}{{#each messages}}{{./this}}{{/each}}</div>',close:function d(){this.remove()},render:function f(){var e=Handlebars.compile(this.tpl);this.$el.html(e(this.options));this.$(".alert").addClass("alert-"+this.options.level)}});e.augment("alert",n,true)})(SUGAR.App)},function(e,t){(function(e){e(window.jQuery||window.Zepto,SUGAR.App.date)})(function(e,t){var n=6e4,i=e([]),r;var a=function(){if(!i.length){return}r=setTimeout(a,n);s.update()};var s={update:function(n){n=n||i;n.each(function(n,r){var a=e(r),s=a.data("liveRelativeDate"),o;if(!s){i=i.not(r);return}o=s.date?a.data(s.date):a.attr("datetime");var l=a.html(),u=t(o).fromNow();if(l===u){return}var c=e.Event("change.liveRelativeDate");a.trigger(c,[l,u]);if(!c.isDefaultPrevented()){a.html(u)}})},pause:function(){clearTimeout(r);r=null},resume:function(){if(!r){a()}},interval:function(e){if(e===undefined){return n}n=e}};var o={add:function(e,t){if(!e||e.length===0){return e}t=t||{};e.data("liveRelativeDate",JSON.stringify(t));i=i.add(e);s.resume();return e},destroy:function(e){i=i.not(e);e.removeAttr("data-live-relative-date");return e},isLiveRelativeDate:function(t){var n=true;e.each(t,function(t){if(e(t).data("liveRelativeDate")===undefined){n=false;return true}});return n}};e.liverelativedate=s;e.fn.liverelativedate=function(e,t){if(!o[e]){t=e;e="add"}return o[e](this,t)}})},function(e,t){"use strict";if(typeof SUGAR=="undefined")SUGAR={};if(typeof SUGAR.util=="undefined")SUGAR.util={};if(typeof SUGAR.expressions=="undefined")SUGAR.expressions={};(function(){SUGAR.util.extend=SUGAR.util.extend||(SUGAR.App?SUGAR.App.utils.extendFrom:null);var e=SUGAR.expressions.Expression=function(e){this.context=e};e.INFINITY=-1;e.STRING_TYPE="string";e.NUMERIC_TYPE="number";e.DATE_TYPE="date";e.TIME_TYPE="time";e.BOOLEAN_TYPE="boolean";e.ENUM_TYPE="enum";e.RELATE_TYPE="relate";e.GENERIC_TYPE="generic";e.TRUE="true";e.FALSE="false";e.isTruthy=function(t){return _.isString(t)?t=="1"||t==e.TRUE:!!t};SUGAR.expressions.NumericConstants={pi:3.14159265,e:2.718281828459045};e.prototype.init=function(e){if(e instanceof Array&&e.length==1){this.params=e[0]}else{this.params=e}this.validateParameters()};e.prototype.getParameters=function(){if(!this.params){return this.params}var n,i,r=[],a=this.getParameterTypes(),s=this.getParamCount()==1,o,l;if(s||!_.isArray(this.params)&&_.isObject(this.params)){n=[this.params]}else{n=this.params}if(!(a instanceof Array)){o=a;a=[];for(l=0;l<n.length;l++){a.push(o)}}var u=this.constructor.TYPE_CAST_MAP;for(l=0;l<n.length;l++){i=n[l];if(i instanceof e){o=t.prototype.getType(i);if(o!=a[l]&&a[l]in u){i=new SUGAR.expressions[u[a[l]]](i,this.context)}}r.push(i)}if(s){r=r.shift()}return r};e.prototype.validateParameters=function(){var t=this.params;var n=this.getParamCount();var i=this.getParameterTypes();if(typeof n!="number"){
throw this.getClass()+": Number of paramters required must be a number"}if(typeof i!="string"&&!(i instanceof Array)){throw this.getClass()+": Parameter types must be valid and match the parameter count"}if(i instanceof Array&&n!=e.INFINITY&&n!=i.length){throw this.getClass()+": Parameter types must be valid and match the parameter count"}if(typeof i=="string"){if(e.TYPE_MAP[i]==null){throw this.getClass()+": Invalid type requirement '"+i+"'"}}else{for(var r=0;r<i.length;r++){if(typeof e.TYPE_MAP[i[r]]=="undefined"){throw this.getClass()+": Invalid type requirement '"+i[r]+"'"}}}if(n==0&&typeof t=="undefined"){return}if(n==1&&this.isProperType(t,i)){return}if(n>1&&!(t instanceof Array)){throw this.getClass()+": Requires exactly "+n+" parameter(s)"}if(n==1&&t instanceof Array){throw this.getClass()+": Requires exactly 1 parameter"}if(n!=e.INFINITY&&t instanceof Array&&t.length!=n){throw this.getClass()+": Requires exactly "+n+" parameter(s)"}if(typeof i=="string"){if(!(t instanceof Array)){if(this.isProperType(t,i)){return}throw this.getClass()+": Parameter must be of type '"+i+"'"}for(var r=0;r<t.length;r++){if(!this.isProperType(t[r],i)){throw this.getClass()+": All parameters must be of type '"+i+"'"}}}else{if(!(t instanceof Array)){if(this.isProperType(t,i[0])){return}throw this.getClass()+": Parameter must be of type '"+i[0]+"'"}for(var r=0;r<i.length;r++){if(!this.isProperType(t[r],i[r])){throw this.getClass()+": The parameter at index "+r+" must be of type "+i[r]}}}};e.prototype.getParamCount=function(){return e.INFINITY};e.prototype.isProperType=function(t,n){var i=e;if(n instanceof Array){return false}var r=i.TYPE_MAP[n];if(typeof r=="undefined"||r==null||r==""){return false}if(t instanceof r||t instanceof i.TYPE_MAP.generic||n==i.GENERIC_TYPE)return true;if(t instanceof i){t=t.evaluate()}switch(n){case i.STRING_TYPE:return typeof t=="string"||typeof t=="number"||t instanceof i.TYPE_MAP[i.NUMERIC_TYPE];break;case i.NUMERIC_TYPE:return typeof t=="number"||SUGAR.expressions.isNumeric(t);break;case i.BOOLEAN_TYPE:return t==i.TRUE||t==i.FALSE||t===1||t===0||t==="1"||t==="0"||t==="";break;case i.DATE_TYPE:case i.TIME_TYPE:if(t===null||t===""||typeof t=="string"&&SUGAR.util.DateUtils.guessFormat(t))return true;break;case i.RELATE_TYPE:return true;break}return false};e.prototype.evaluate=function(){};e.prototype.getClass=function(e){for(var t in SUGAR.FunctionMap){if(typeof SUGAR.FunctionMap[t]=="function"&&SUGAR.FunctionMap[t].prototype&&this instanceof SUGAR.FunctionMap[t])return t}return false};e.prototype.getParameterTypes=function(){};SUGAR.expressions.GenericExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.GenericExpression,e,{getParameterTypes:function i(){return e.GENERIC_TYPE}});SUGAR.expressions.NumericExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.NumericExpression,e,{getParameterTypes:function r(){return e.NUMERIC_TYPE}});SUGAR.expressions.StringExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.StringExpression,e,{getParameterTypes:function a(){return e.STRING_TYPE}});SUGAR.expressions.BooleanExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.BooleanExpression,e,{getParameterTypes:function s(){return e.BOOLEAN_TYPE}});SUGAR.expressions.EnumExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.EnumExpression,e,{getParameterTypes:function o(){return e.ENUM_TYPE}});SUGAR.expressions.DateExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.DateExpression,e,{getParameterTypes:function l(){return e.DATE_TYPE}});SUGAR.expressions.TimeExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.TimeExpression,e,{getParameterTypes:function u(){return e.TIME_TYPE}});SUGAR.expressions.RelateExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.RelateExpression,e,{getParameterTypes:function c(){return e.GENERIC_TYPE}});e.TYPE_MAP={number:SUGAR.expressions.NumericExpression,string:SUGAR.expressions.StringExpression,date:SUGAR.expressions.DateExpression,time:SUGAR.expressions.TimeExpression,"boolean":SUGAR.expressions.BooleanExpression,"enum":SUGAR.expressions.EnumExpression,relate:SUGAR.expressions.RelateExpression,generic:SUGAR.expressions.GenericExpression};e.TYPE_CAST_MAP={number:"ValueOfExpression",string:"DefineStringExpression"};SUGAR.expressions.ConstantExpression=function(e){this.init(e)};SUGAR.util.extend(SUGAR.expressions.ConstantExpression,SUGAR.expressions.NumericExpression,{evaluate:function d(){return this.getParameters()},getParamCount:function f(){return 1}});SUGAR.expressions.StringLiteralExpression=function(e){this.init(e)};SUGAR.util.extend(SUGAR.expressions.StringLiteralExpression,SUGAR.expressions.StringExpression,{evaluate:function h(){return this.getParameters()},getParamCount:function p(){return 1}});SUGAR.expressions.FalseExpression=function(e){this.init(e)};SUGAR.util.extend(SUGAR.expressions.FalseExpression,SUGAR.expressions.BooleanExpression,{evaluate:function m(){return e.FALSE},getParamCount:function g(){return 0}});SUGAR.expressions.TrueExpression=function(e){this.init(e)};SUGAR.util.extend(SUGAR.expressions.TrueExpression,SUGAR.expressions.BooleanExpression,{evaluate:function v(){return e.TRUE},getParamCount:function y(){return 0}});var t=SUGAR.expressions.ExpressionParser=function(){};t.prototype.getFieldsFromExpression=function(e){return _.map(e.match(/\$(\w+)/g),function(e){return e.replace(/\$/g,"")})};t.prototype._generateRange=function(e,t,n){var i="";var r=parseInt(t);if(typeof n=="undefined")while(this.getElement(e+""+r)!=null){i+="$"+e+""+r++ +","}else for(;r<=n;r++){var a=e+""+r;if(this.getElement(a)!=null)i+="$"+a+","}return i.substring(0,i.length-1)};t.prototype._valueReplace=function(e){if(!/^\$.*$/.test(e)){return e}return this.getValue(e.substring(1))};t.prototype._performRangeReplace=function(e){var t=false;var n;var i;for(var r=0;;r++){if(r==e.length)break;var a=e.charAt(r);if(a=='"'&&n!="\\")t=!t;if(!t&&a=="%"){i=true;var s=e.indexOf("[",r+1);var o=e.indexOf(",",s);var l=e.indexOf("]",s);if(s<0||l<0)throw"Invalid range syntax";var u=e.substring(r+1,s);var c,d;if(o>-1&&o<l){c=e.substring(s+1,o);d=e.substring(o+1,l)}else{c=e.substring(s+1,l)}if(o>-1&&o<l)d=e.substring(o+1,l);var f=this._generateRange(u,this._valueReplace(c),this._valueReplace(d));if(typeof d=="undefined")e=e.replace("%"+u+"["+c+"]",f);else e=e.replace("%"+u+"["+c+","+d+"]",f);r=r+f.length-1}n=a}return e};t.prototype.validate=function(e){if(typeof e!="string")throw"ExpressionParser requires a string expression.";var t=this.toConstant(e);if(t!=null&&typeof t!="undefined")return true;if(/^[\w\-]+\(.*\)$/.exec(e)==null){throw"Syntax Error (Expression Format Incorrect '"+e+"' )"}if(e.indexOf("(")<0)throw"Syntax Error (No opening paranthesis found)";return true};t.prototype.tokenize=function(e){var t=this.toConstant(e);if(t!=null&&typeof t!="undefined"){return{type:"constant",returnType:this.getType(t),value:t.evaluate()}}if(/^[$]\w+$/.test(e)){return{type:"variable",name:$.trim(e).substr(1)}}if(/^[$]\w+\.\w+$/.test(e)){e=$.trim(e);return{type:"variable",name:e.substr(1,e.indexOf(".")-1),relate:e.substr(e.indexOf(".")+1)}}var n=e.indexOf("(");if(n<1)throw e+": Syntax Error, no open parentheses found";if(e.charAt(e.length-1)!=")")throw e+": Syntax Error, no close parentheses found";var i=e.substring(0,n);var r=e.substring(n+1,e.length-1);var a=0;var s=r.length;var o="";var l=new Array;var u=null;var c=null;var d=false;var f=false;var h=false;var p=false;for(var m=0;m<=s;m++){c=u;f=false;if(m==s){o=$.trim(o);if(o!="")l[l.length]=this.tokenize(o);break}p=c=="\\";u=r.charAt(m);if(h&&u!='"'&&!p){o+=u;continue}if(u=='"'&&!p&&a==0){if(h){var _=r.indexOf(",",m);if(_<0)_=r.length-1;var g=m<s-1?m+1:s-1;var v=r.substring(g,_);if(/^\s*$/.exec(v)==null)throw i+": Syntax Error (Improperly Terminated String '"+v+"')"+g+" "+_}h=!h}if(u=="("){a++}else if(u==")"){a--}else if(u==","&&a==0){o=$.trim(o);if(o=="")throw"Syntax Error: Unexpected ','";l[l.length]=this.tokenize(o);o="";f=true;continue}o+=u}if(h)throw"Syntax Error (Unterminated String Literal)";if(a!=0)throw"Syntax Error (Incorrectly Matched Parantheses)";if(f)throw"Syntax Error (No parameter after comma near <b>"+i+"</b>)";return{type:"function",name:$.trim(i),args:l}};t.prototype.getType=function(t){for(var n in e.TYPE_MAP){if(t instanceof e.TYPE_MAP[n]){return n}}return false};t.prototype.evaluate=function(e,t){if(typeof e!="string")throw"ExpressionParser requires a string expression.";e=e.replace(/^\s+|\s+$|\n/g,"");var n=this.toConstant(e);if(n!=null&&typeof n!="undefined")return n;if(e.match(/^\$\w+$/)){if(typeof t=="undefined")throw"Syntax Error: variable "+e+" without context";return t.getValue(e.substring(1))}if(e.match(/^\$\w+\.\w+$/)){return t.getRelatedValue(e.substr(1,e.indexOf(".")-1),e.substr(e.indexOf(".")+1))}if(/^[\w\-]+\(.*\)$/.exec(e)==null){throw"Syntax Error (Expression Format Incorrect '"+e+"' )"}var i=e.indexOf("(");if(i<0)throw"Syntax Error (No opening paranthesis found)";var r=e.substring(0,i);if(SUGAR.FunctionMap[r]==null)throw r+": No such function defined";var a=e.substring(i+1,e.length-1);var s=0;var o=a.length;var l="";var u=new Array;var c=null;var d=null;var f=false;var h=false;var p=false;var m=false;if(o>0){for(var _=0;_<=o;_++){d=c;if(_==o){u[u.length]=this.evaluate(l,t);break}p=d=="\\";c=a.charAt(_);if(h&&c!='"'&&!p){l+=c;continue}if(m&&(c==" "||c==","))m=false;if(c=='"'&&!p&&s==0){if(h){var g=a.indexOf(",",_);if(g<0)g=a.length-1;var v=_<o-1?_+1:o-1;var y=a.substring(v,g);if(/^\s*$/.exec(y)==null)throw r+": Syntax Error (Improperly Terminated String '"+y+"')"+v+" "+g}h=!h}if(c=="$"&&!p&&!h&&s==0){if(m)throw r+": Syntax Error (unexpeted '$' in  '"+l+"')";else{m=true}}if(c=="("){s++}else if(c==")"){s--}else if(c==","&&s==0){u[u.length]=this.evaluate(l,t);l="";continue}l+=c}}if(h)throw"Syntax Error (Unterminated String Literal)";if(s!=0)throw"Syntax Error (Incorrectly Matched Parantheses)";return new SUGAR.FunctionMap[r](u,t)};t.prototype.toConstant=function(e){if(isFinite(e)&&!isNaN(parseFloat(e))){return new SUGAR.expressions.ConstantExpression(parseFloat(e))}var t=SUGAR.expressions.NumericConstants[e];if(t!=null&&typeof t!="undefined")return new SUGAR.expressions.ConstantExpression(parseFloat(t));if(/^"[\s\S]*"$/.exec(e)!=null){e=e.substring(1,e.length-1);return new SUGAR.expressions.StringLiteralExpression(e)}if(e==""){return new SUGAR.expressions.StringLiteralExpression(e)}if(e=="true"){return new SUGAR.expressions.TrueExpression}else if(e=="false"){return new SUGAR.expressions.FalseExpression}if(/^(0[0-9]|1[0-2])\/([0-2][0-9]|3[0-1])\/[0-3][0-9]{3,3}$/.exec(e)!=null){var n=parseFloat(e.substring(0,2));var i=parseFloat(e.substring(3,2));var r=parseFloat(e.substring(6,4));return new SUGAR.DateExpression([n,i,r])}if(/^([0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9]$/.exec(e)!=null){var a=parseFloat(e.substring(0,2));var s=parseFloat(e.substring(3,2));var o=parseFloat(e.substring(6,2));return new SUGAR.TimeExpression([a,s,o])}return null};t.prototype.getRelatedFieldsFromFormula=function(e,t){var n=[],i=["related","count","rollupSum","rollupMax","rollupMin","rollupAve","rollupAvg","rollupCurrencySum","rollupConditionalSum","countConditional","maxRelatedDate"];var r=function o(e,t){if(e.type=="variable"&&e.relate){n.push({type:"related",link:e.name,relate:e.relate})}else if(e.type=="function"&&i.indexOf(e.name)!=-1){switch(e.name){case"related":if(e.args[1].type=="constant")n.push({type:"related",link:e.args[0].name,relate:e.args[1].value});break;case"rollupConditionalSum":var r={type:"rollupConditionalSum",link:e.args[0].name,relate:e.args[1].value,condition_field:e.args[2].value};if(e.args[3].type=="function"){var a=[];for(var s=0;s<e.args[3].args.length;s++){a.push('"'+e.args[3].args[s].value+'"')}r.condition_expr=e.args[3].name+"("+a.join(",")+")"}else{r.condition_expr=e.args[3].value}n.push(r);break;case"countConditional":var r={target:t,type:"countConditional",link:e.args[0].name,condition_field:e.args[1].value};if(e.args[2].type=="function"){var a=[];for(var s=0;s<e.args[2].args.length;s++){a.push('"'+e.args[2].args[s].value+'"')}r.condition_expr=e.args[2].name+"("+a.join(",")+")"}else{r.condition_expr=e.args[2].value}n.push(r);break;case"count":n.push({type:"count",link:e.args[0].name});break;default:if(e.args[1].type=="constant"){n.push({type:e.name,link:e.args[0].name,relate:e.args[1].value})}}}else if(e.type=="function"){for(var s=0;s<e.args.length;s++){o(e.args[s],t)}}};try{var a=this.tokenize(e);r(a,t)}catch(s){}return n};var n=SUGAR.expressions.ExpressionContext=function(){};n.prototype.getValue=function(e){return""};n.prototype.setValue=function(e,t){return""};n.prototype.addListener=function(e,t,n){return""};n.prototype.getRelatedValue=function(e,t){return new SUGAR.RelatedFieldExpression([new SUGAR.expressions.StringLiteralExpression(e),new SUGAR.expressions.StringLiteralExpression(t)])};SUGAR.expressions.isNumeric=function(e){if(typeof e!="number"&&typeof e!="string"){return false}e=SUGAR.expressions.unFormatNumber(e);return isFinite(e)&&!isNaN(parseFloat(e))};SUGAR.expressions.unFormatNumber=function(e){if(typeof e=="string"){var t=SUGAR.expressions;var n=",",i=".";if(t.userPrefs){n=t.userPrefs.num_grp_sep;i=t.userPrefs.dec_sep}e=t.replaceAll(e,n,"");e=t.replaceAll(e,i,".")}return e};SUGAR.expressions.replaceAll=function(e,t,n){if(t==n||e==""||t=="")return e;var i=e;while(i.indexOf(t)>-1){i=i.replace(t,n)}return i};SUGAR.util.DateUtils={parse:function b(e,t){if(e instanceof Date)return e;if(t=="user"){if(SUGAR.expressions.userPrefs&&SUGAR.expressions.userPrefs.datef){t=SUGAR.expressions.userPrefs.datef+" "+SUGAR.expressions.userPrefs.timef}else{t=SUGAR.util.DateUtils.guessFormat(e)}}if(t==null||t==""){t=SUGAR.util.DateUtils.guessFormat(e)}if(t==false){if(/^\d+$/.test(e))return new Date(e);return false}var n=new Date("Jan 1, 1970 00:00:00");var i="";var r=$.trim(e);t=$.trim(t)+" ";for(var a=0;a<t.length;a++){var s=t.charAt(a);if(s==":"||s=="/"||s=="-"||s=="."||s==" "||s=="a"||s=="A"||s=="T"){var o=r.indexOf(s);if(o==-1)o=r.length;var l=r.substring(0,o);r=r.substring(o+1);switch(i){case"m":if(!(l>0&&l<13))return false;n.setMonth(l-1);break;case"d":if(!(l>0&&l<32))return false;n.setDate(l);break;case"Y":if(!(l>0))return false;n.setYear(l);break;case"h":var u=t.substring(t.length-4);if(u.toLowerCase()=="i a "||u.toLowerCase()==s+"ia "){if(r.substring(r.length-2).toLowerCase()=="pm"){l=l*1;if(l<12){l+=12}}}case"H":n.setHours(l);break;case"i":l=l.substring(0,2);n.setMinutes(l);break}i=""}else{i=s}}return n},guessFormat:function x(e){if(typeof e!="string")return false;var t="";var n;if(e.indexOf(" ")!=-1){n=" "}else if(e.indexOf("T")!=-1){n="T"}if(n){t=e.substring(e.indexOf(n)+1,e.length);e=e.substring(0,e.indexOf(n))}var i="/";if(e.indexOf("/")!=-1){}else if(e.indexOf("-")!=-1){i="-"}else if(e.indexOf(".")!=-1){i="."}else{return false}var r=e.split(i);var a="";var s=new Date("Jan 1, 1970 00:00:00");if(r[0].length==4){a="Y"+i+"m"+i+"d"}else if(r[2].length==4){a="m"+i+"d"+i+"Y"}else{return false}if(t!=""){var o="";var l=":";if(t.indexOf(".")==2){l="."}if(t.indexOf(" ")!=-1){var u=t.split(" ");if(u[1]=="am"||u[1]=="pm"){return a+n+"h"+l+"i a"}else if(u[1]=="AM"||u[1]=="PM"){return a+n+"h"+l+"i A"}}else{var c=t.substring(t.length-2,t.length);if(c=="AM"||c=="PM"){return a+n+"h"+l+"iA"}if(c=="am"||c=="pm"){return a+n+"h"+l+"iA"}return a+n+"H"+l+"i"}}return a},formatDate:function w(e,t,n){if(!n&&SUGAR.expressions.userPrefs.datef&&SUGAR.expressions.userPrefs.timef){if(t)n=SUGAR.expressions.userPrefs.datef+" "+SUGAR.expressions.userPrefs.timef;else n=SUGAR.expressions.userPrefs.datef}var i="";for(var r=0;r<n.length;r++){var a=n.charAt(r);switch(a){case"m":var s=e.getMonth()+1;i+=s<10?"0"+s:s;break;case"d":var o=e.getDate();i+=o<10?"0"+o:o;break;case"Y":i+=e.getFullYear();break;case"H":case"h":var l=e.getHours();if(a=="h")l=l>12?l-12:l;i+=l<10?"0"+l:l;break;case"i":var s=e.getMinutes();i+=s<10?"0"+s:s;break;case"a":if(e.getHours()<12)i+="am";else i+="pm";break;case"A":if(e.getHours()<12)i+="AM";else i+="PM";break;default:i+=a}}return i},roundTime:function L(e){var t=e.getMinutes();if(t<1){t=0}else if(t<16){t=15}else if(t<31){t=30}else if(t<46){t=45}else{t=0;e.setHours(e.getHours()+1)}e.setMinutes(t);return e},getUserTime:function S(){var e=new Date;if(SUGAR.expressions.userPrefs&&typeof SUGAR.expressions.userPrefs.gmt_offset!="undefined"){var t=SUGAR.expressions.userPrefs.gmt_offset;e.setMinutes(e.getMinutes()+(e.getTimezoneOffset()+t))}return e}}})()},function(e,t){"use strict";var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){SUGAR.forms=SUGAR.forms||{};SUGAR.forms.animation=SUGAR.forms.animation||{};var e=SUGAR.expressions,t=e.SidecarExpressionContext=function(e){this.view=e;this.model=e.model||e.context.get("model")};SUGAR.util.extend(t,e.ExpressionContext,{getValue:function i(r){var a=this.model.get(r),s=this.model.fields[r],o;if(s.type=="link")a=r;if(typeof a=="string"){a=a.replace(/\n/g,"");if(/^(\s*)$/.exec(a)!=null||a===""){o=t.parser.toConstant('""')}else if(s.type!=="currency"&&s.type!=="enum"&&e.isNumeric(a)){o=t.parser.toConstant(e.unFormatNumber(a))}else if(s.type=="date"||s.type=="datetime"){a=App.date.stripIsoTimeDelimterAndTZ(a);a=App.date.parse(a);a.type=s.type;o=this.getDateExpression(a)}else{o=t.parser.toConstant('"'+a+'"')}}else if((typeof a==="undefined"?"undefined":n(a))=="object"&&a!=null&&a.getTime){o=this.getDateExpression(a)}else if(typeof a=="number"){o=t.parser.toConstant(""+a)}else if(_.isBoolean(a)){o=a?new SUGAR.expressions.TrueExpression:new SUGAR.expressions.FalseExpression}else{o=t.parser.toConstant('""')}return o},setValue:function r(e,t){if(n(this.model.fields[e])!="object"){return}var i=this.model.fields[e];this.lockedFields=this.lockedFields||[];if((typeof t==="undefined"?"undefined":n(t))=="object"&&t.length>0&&i.type!="multienum"){t=t.join(", ")}else if(t&&i.type==="date"){t=App.date(t).formatServer(true)}else if(t&&i.type==="datetimecombo"){t=App.date(t).format()}if(i.type=="bool"&&_.isString(t)){t=SUGAR.expressions.Expression.isTruthy(t)}if(t&&(i.type==="decimal"||i.type==="float")){t=App.utils.formatNumber(t,i.round||6,i.precision||6,null,null)}if(_.isString(t)&&i.len&&t.length>i.len){var r=this;t=t.substring(0,i.len);this.model.once("change:"+e,function(){var t=SUGAR.App.lang.getAppString("LBL_FIELD_TRIMMED");SUGAR.forms.markField(e,r.getElement(e),t)})}else if(SUGAR.forms.markedField[e]){SUGAR.forms.unmarkField(e,this.getElement(e))}if(!this.lockedFields[e]){this.lockedFields[e]=true;var a=this.getElement(e);if(a){SUGAR.forms.FlashField($(a).parents('[data-fieldname="'+e+'"]'),null,e)}var s=this.model.set(e,t);this.lockedFields=[];return s}},addListener:function a(e,t,n){if(this.view.collection){this.view.collection.off("change:"+e,t,n);this.view.collection.on("change:"+e,t,n)}else{this.model.off("change:"+e,t,n);this.model.on("change:"+e,t,n)}},getElement:function s(e){var t=this.getField(e);if(t&&t.el)return t.el},getField:function o(e){return this.view.getField(e,this.model)},addClass:function l(e,t,n){var i=this.view.getFieldMeta(e,true),r=n?["css_class","cell_css"]:["css_class"],a=this.getElement(e),s=$(a).closest("div.record-cell");_.each(r,function(e){if(!i[e]){i[e]=t}else if(i[e].indexOf(t)==-1){i[e]+=" "+t}});this.view.setFieldMeta(e,i);$(a).addClass(t);if(!i._isChild&&n&&s){s.addClass(t)}},removeClass:function u(e,t,n){var i=this.view.getFieldMeta(e,true),r=this.view.getField(e),a=n?["css_class","cell_css"]:["css_class"],s=this.getElement(e),o=$(s).closest("div.record-cell");_.each([r.def,i],function(e){_.each(a,function(n){if(e[n]&&e[n].indexOf(t)!=-1){e[n]=$.trim((" "+e[n]+" ").replace(new RegExp(" "+t+" "),""))}})});this.view.setFieldMeta(e,i);$(s).removeClass(t);if(!i._isChild&&n&&o){o.removeClass(t);o.find("."+t).removeClass(t)}},getLink:function c(e){var t=this.model;if(t&&t.fields&&t.fields[e])return t.fields[e]},showError:function d(e,t){},clearError:function f(e){},setStyle:function h(e,t){},setRelatedFields:function p(e,t){t=!!t;var n=this.model;for(var i in e){var r=n.get(i),a=!!r,s=r||{};_.each(e[i],function(e,t){if(_.isObject(e)){s[t]=_.extend(s[t]||{},e)}else{s[t]=e}});var o={};o[i]=s;n.set(o,{silent:t});if(!t&&a){n.trigger("change:"+i,n)}}},getRelatedFieldValues:function m(e,t,n,i){var r=this,a=App.api;if(e.length>0){t=t||this.model.module||this.view.context.get("module");n=n||this.model.get("id");for(var s=0;s<e.length;s++){var o=e[s].link,l={};if(e[s].type=="related"){var u=this.model.fields[o];if(u&&u.id_name&&u.module){var c=this.model.get(u.id_name);if(c){e[s].relId=c;e[s].relModule=u.module}}}if(e[s].relate){l[o]={};l[o][e[s].type]={};l[o][e[s].type][e[s].relate]="";r.setRelatedFields(l,true)}}var d={id:n,action:"related"},f={module:t,fields:JSON.stringify(e)};a.call("read",a.buildURL("ExpressionEngine","related",d,f),d,f,{success:function h(e){r.setRelatedFields(e,i);return e}})}return null},updateRelatedFieldValue:function g(e,t,n,i,r){var a=this.model.get(e)||{},r=r||false,s={};if(!_.isUndefined(a[t])||r){if(!n){a[t]=i}else if(!r&&!_.isUndefined(a[t][n])){a[t][n]=i}else if(r){if(_.isUndefined(a[t])){a[t]={}}a[t][n]=i}}s[e]=a;this.setRelatedFields(s,true)},getRelatedField:function v(e,t,n){var i=this.model.get(e)||{};if(t=="related"&&!this.inCollection){return this._handleRelateExpression(e,n)}if(typeof i[t]!="undefined"){if(!n){return i[t]}else if(typeof i[t][n]!="undefined"){return i[t][n]}}if(this.inCollection){i[t]=i[t]||{};i[t][n]=i[t][n]||"";this.model.set(e,i,{silent:true});return""}if(!this.model.get("id")){return""}var r={link:e,type:t};if(n){r.relate=n}this.getRelatedFieldValues([r]);if(typeof i[t]=="undefined")return"";return i[t]},_handleRelateExpression:function y(e,t){this.view.context.set("model",this.model);var n=this.view.context.get("isSubpanel")===true;if(n){var i=this.view.context.parent}else{var i=this.view.context.getChildContext({link:e})}i.prepare();var r=i.get("collection"),a=i.get("fields")||[],s=this,o=_.find(this.model.fields,function(t){return t.type&&t.type=="relate"&&t.id_name&&t.link&&t.link==e}),l=i.get("model");if(i.isDataFetched()&&!i.get("modelId")){l=r.length>0?r.models[0]:null}if(o&&(!this.model.get(o.id_name)||l&&l.get("id")!=this.model.get(o.id_name))&&!n){i.set({model:null});i.resetLoadFlag();if(!this.model.get(o.id_name))return""}if(_.isUndefined(this.view._loadedRelatedFields)){this.view._loadedRelatedFields={}}var u=e+"_"+t+"_"+this.model.get(o.id_name);if(t&&(!i.isDataFetched()||l&&_.isUndefined(l.get(t)))&&!this.view._loadedRelatedFields.hasOwnProperty(u)){_.each(a,_.bind(function(t){var n=e+"_"+t+"_"+this.model.get(o.id_name);this.view._loadedRelatedFields[n]=n},this));if(!_.contains(a,t)){a.push(t)}this._loadRelatedData(e,a,i,o);this.addListener(o.id_name,function(){this.view._loadedRelatedFields={}},this)}else if(l){var c=l.get(t);if(c){var d=l.fields[t];if(d.type=="date"||d.type=="datetime"){c=App.date.stripIsoTimeDelimterAndTZ(c);c=App.date.parse(c);c.type=d.type}}return c}else if(!r.page){var f=this.model;SUGAR.App.utils.doWhen(function(){return r.page>0},function(){f.trigger("change:"+e,f)})}return""},getDateExpression:function b(t){var n=new e.DateExpression("");n.evaluate=function(){return this.value};n.value=t;return n},_loadRelatedData:function x(e,t,n,i){var r=this;if(i&&this.model.get(i.id_name)){var a=this.model.get(i.id_name),s=n.get("model")||SUGAR.App.data.createRelatedBean(this.model,this.model.get(i.id_name),e);n.set({modelId:a,model:s})}else{if(_.isEmpty(this.model.get("id")))return""}n.prepare();n.set({fields:_.union(n.get("fields")||[],t),skipFetch:false});if(n.isDataFetched()){n.resetLoadFlag()}var s=this.model;n.loadData({relate:!i,success:function o(){s.trigger("change:"+e,s)}})},_setupLinks:function w(e){_.each(e,function(e){if(e.link&&e.relate&&e.type=="related"){var t=this.view.context.getChildContext({link:e.link});if(t){t.set("fields",_.union(t.get("fields")||[],[e.relate]))}}},this)},_requestRollups:function L(e){if(this.model.get("id")){this.getRelatedFieldValues(e,null,null,true)}},fireOnLoad:function S(e){},getAppListStrings:function E(e){return SUGAR.App.lang.getAppListStrings(e)},parseDate:function k(e,t){return SUGAR.App.date.parse(e)},setFieldDisabled:function T(e,t){t=_.isUndefined(t)?true:t;var n=this.getField(e);if(n){n.setDisabled(t);this.view.$(".record-edit-link[data-name="+e+"]").toggleClass("hide",t);if(_.isEqual(t,false)&&!_.isEqual(n.currentState,"edit")&&_.isEqual(this.view.currentState,"edit")&&!_.isEqual(this.view.inlineEditMode,true)){n.setMode("edit");this.view.editableFields.push(n)}if(_.isFunction(this.view.setEditableFields)){this.view.setEditableFields()}}},setFieldVisibility:function M(e,t){var n="vis_action_hidden",i="record-panel-content",r=this.view.getField(e,this.model);this.requiredFields=this.requiredFields||[];this.requiredInvisibleFields=this.requiredInvisibleFields||[];this.visibleFields=this.visibleFields||[];if(_.isUndefined(this.requiredFields[e])){this.requiredFields[e]=r.def.required}if(t){this.addClass(e,n,true);if(r.def.required===true){this.setFieldRequired(e,false)}this.visibleFields[e]=!t}else{this.removeClass(e,n,true);this.visibleFields[e]=!t;if(r.def.required===false&&(this.requiredInvisibleFields[e]||this.requiredFields[e])){delete this.requiredInvisibleFields[e];this.setFieldRequired(e,true)}}},setFieldRequired:function A(e,t){var t=SUGAR.expressions.Expression.isTruthy(t),n=this.view.getField(e,this.model);this.requiredFields=this.requiredFields||[];this.requiredInvisibleFields=this.requiredInvisibleFields||[];this.visibleFields=this.visibleFields||[];this.requiredFields[e]=n.def.required;if(n){if(_.isUndefined(this.visibleFields[e])||this.visibleFields[e]===true){n.def.required=t;n.render()}else{this.requiredInvisibleFields[e]=t}}},setAssignedUserName:function C(e,t){if(this.model.has("assigned_user_name")&&this.model.has("assigned_user_id")){var n=this,i={},r=SUGAR.App.data.createBeanCollection("Users");i.filter={filter:[{user_name:t}]};i.success=function(t){var i=t.first();if(i){n.model.set({assigned_user_name:i.get("full_name"),assigned_user_id:i.get("id")});var r=n.view.getField(e,n.model);if(r&&r.el){SUGAR.forms.FlashField(r.el,null,e)}}};i.error=function(){SUGAR.App.alert.show("server-error",{level:"error",title:SUGAR.App.lang.get("ERR_GENERIC_TITLE"),messages:SUGAR.App.lang.get("ERR_ASSIGNTO_ACTION")})};r.fetch({fields:["full_name"],limit:1,params:i.filter,success:i.success,error:i.error})}},setModel:function R(e){this.model=e},setRelatedModel:function D(e){this.relatedModel=e},add:function I(e,t){return SUGAR.App.math.add(e,t,6,true)},subtract:function O(e,t){return SUGAR.App.math.sub(e,t,6,true)},multiply:function N(e,t){return SUGAR.App.math.mul(e,t,6,true)},divide:function F(e,t){return SUGAR.App.math.div(e,t,6,true)},round:function B(e,t){return SUGAR.App.math.round(e,t,true)},getLinkContext:function P(e,t){var n=e.context.getChildContext({link:t});n.prepare();return n}});t.parser=new SUGAR.expressions.ExpressionParser;t.evalVariableExpression=function(e,n){return t.parser.evaluate(e,new t(n))};SUGAR.forms.Dependency=function(e,t,n,i,r){this.actions=t;this.falseActions=n;this.context=r;this.testOnLoad=i;e.setContext(this.context);e.setDependency(this);this.trigger=e;if(i){r.fireOnLoad(this)}};SUGAR.forms.Dependency.fromMeta=function(t,n){var i=t.trigger||"true",r=t.triggerFields||e.ExpressionParser.prototype.getFieldsFromExpression(i),a=t.relatedFields||[],s=t.actions||[],o=t.notActions||[],l=t.onload||false,u=n.model&&_.isEmpty(n.model.get("id")),c=[],d=[];if(_.isEmpty(r)&&!l&&!u)return null;if(_.isEmpty(s)&&_.isEmpty(o))return null;_.each(s,function(e){if(!e.action||!SUGAR.forms[e.action+"Action"])return;var t=true;if(e.action==="SetValue"&&e.params.target){t=App.acl.hasAccess("edit",this.model.module,undefined,e.params.target)}if(t){c.push(new SUGAR.forms[e.action+"Action"](e.params))}},n);_.each(o,function(e){if(!e.action||!SUGAR.forms[e.action+"Action"])return;var t=true;if(e.action==="SetValue"&&e.params.target){t=App.acl.hasAccess("edit",this.model.module,undefined,e.params.target)}if(t){d.push(new SUGAR.forms[e.action+"Action"](e.params))}},n);return new SUGAR.forms.Dependency(new SUGAR.forms.Trigger(r,i,n,a),c,d,l,n)};SUGAR.forms.Dependency.prototype.fireLinkOnlyDependency=function(){if(!this.testOnLoad){return false}var e=true;if(this.context.model.fields){_.each(this.trigger.variables,function(t){e=e&&this.context.model.fields[t]&&this.context.model.fields[t].type=="link"},this)}return e};SUGAR.forms.Dependency.prototype.fire=function(e){if(this.context.view.disposed||!this.context.view.context){return}try{var t=this.context.model;this.lastTriggeredActions=this.lastTriggeredActions||[];if(t.inSync&&!this.testOnLoad){return}var n=this.actions;if(e&&this.falseActions!=null)n=this.falseActions;_.each(this.lastTriggeredActions,function(e){this.context.view.off(null,null,e)},this);if(n instanceof SUGAR.forms.AbstractAction)n=[n];for(var i in n){var r=n[i];if(typeof r.exec=="function"){r.setContext(this.context);r.exec();if(this.testOnLoad&&r.afterRender){this.context.view.on("render",r.exec,r)}}}this.lastTriggeredActions=n}catch(a){if(!SUGAR.isIE&&console&&console.log){console.log("ERROR: "+a)}return}};SUGAR.forms.Dependency.prototype.getRelatedFields=function(){var e=t.parser,n=e.getRelatedFieldsFromFormula(this.trigger.condition);var i=function r(t){if(t instanceof SUGAR.forms.AbstractAction){t=[t]}for(var i in t){var r=t[i],a=r.target||undefined;if(typeof r.exec=="function"){for(var s in r){if(typeof r[s]=="string"){n=$.merge(n,e.getRelatedFieldsFromFormula(r[s],a))}}}}};i(this.actions);i(this.falseActions);return n};SUGAR.forms.AbstractAction=function(e){this.target=e};SUGAR.forms.AbstractAction.prototype.exec=function(){};SUGAR.forms.AbstractAction.prototype.setContext=function(e){this.context=e};SUGAR.forms.AbstractAction.prototype.evalExpression=function(e,n){n=n||this.context;return t.parser.evaluate(e,n).evaluate()};SUGAR.forms.AbstractAction.prototype.canSetValue=function(e){if(e.options&&e.options.revert){return false}if(e.isOnLoad){return false}return true};SUGAR.forms.Trigger=function(e,t,n,i){this.variables=e;this.condition=t;this.context=n;this.relatedFields=i||[];this.dependency={};this._attachListeners()};SUGAR.forms.Trigger.prototype._attachListeners=function(){if(!(this.variables instanceof Array)){this.variables=[this.variables]}for(var e=0;e<this.variables.length;e++){this.context.addListener(this.variables[e],SUGAR.forms.Trigger.fire,this,true);if(this.relatedFields.length===0&&this.context.model.isNew()&&!_.isUndefined(this.context.target)){var t=this.context.getLinkContext(this.context.view,this.variables[e]);if(t&&t.has("collection")){var n=t.get("collection");n.off("add",null,this);n.on("add",function(e,t,n){this.context.fromRelated=true;var i=_.bind(SUGAR.forms.Trigger.fire,this);i(e);delete this.context.fromRelated},this);n.off("remove",null,this);n.on("remove",function(e,t,n){this.context.isRemoveEvent=true;this.context.fromRelated=true;var i=_.bind(SUGAR.forms.Trigger.fire,this);i(e);delete this.context.fromRelated;delete this.context.isRemoveEvent},this)}}if(this.relatedFields.length>0&&_.isUndefined(this.context.view.parent)){var t=this.context.getLinkContext(this.context.view,this.variables[e]);if(t&&t.has("collection")){var n=t.get("collection"),i=this.relatedFields;var r=function s(e,t,n){var r;_.find(e.changed,function(e,n){r=n;return _.contains(i,n)&&e===t});this.context.changingField=r;this.context.fromRelated=true;var a=_.bind(SUGAR.forms.Trigger.fire,this);a(e);delete this.context.fromRelated;delete this.context.changingField};var a="change:"+_.unique(this.relatedFields).join(" change:");n.off(a,null,this);n.on(a,r,this);n.off("add",null,this);n.on("add",r,this);if(this.context.model.isNew()){n.off("remove",null,this);

n.on("remove",function(e,t,n){this.context.isRemoveEvent=true;this.context.fromRelated=true;var i=_.bind(SUGAR.forms.Trigger.fire,this);i(e);delete this.context.fromRelated;delete this.context.isRemoveEvent},this)}}}}};SUGAR.forms.Trigger.prototype.setDependency=function(e){this.dependency=e};SUGAR.forms.Trigger.prototype.setContext=function(e){this.context=e};SUGAR.forms.Trigger.fire=function(e,n,i){var r,a;if(e){var s=this.context.fromRelated||false;if(!s&&e){this.context.setModel(e)}else if(s){this.context.setRelatedModel(e)}}this.context.options=i;try{r=t.parser.evaluate(this.condition,this.context)}catch(o){if(!SUGAR.isIE&&console&&console.log){console.log("ERROR:"+o+"; in Condition: "+this.condition)}}if(!_.isUndefined(r)){a=r.evaluate()}if(a==SUGAR.expressions.Expression.TRUE){if(this.dependency instanceof SUGAR.forms.Dependency){this.dependency.fire(false);return}}else if(a==SUGAR.expressions.Expression.FALSE){if(this.dependency instanceof SUGAR.forms.Dependency){this.dependency.fire(true);return}}};SUGAR.forms.flashInProgress={};SUGAR.forms.markedField={};SUGAR.forms.exclamationMarkTemplate=Handlebars.compile('<span class="warning-tooltip add-on" data-container="body" rel="tooltip" title="{{this}}"><i class="fa fa-warning"></i></span>');SUGAR.forms.FlashField=function(e,t,n){if(typeof e=="undefined"||!n&&!e.id)return;n=n||e.id;if(SUGAR.forms.flashInProgress[n])return;SUGAR.forms.flashInProgress[n]=true;t=t||"#FF8F8F";var i=e.style&&e.style.backgroundColor?e.style.backgroundColor:"#FFFFFF";$(e).css("backgroundColor",i);$(e).animate({backgroundColor:t},200,function(){$(e).animate({backgroundColor:i},200,function(){delete SUGAR.forms.flashInProgress[n]})})};SUGAR.forms.markField=function(e,t,n){if(SUGAR.forms.markedField[e])return;if(!t)return;var i=$(t).parents('[data-fieldname="'+e+'"]');var r=$(t).children();i.addClass("warning");var a=$(SUGAR.forms.exclamationMarkTemplate(n));var s=r.parent().hasClass("input-append");if(!s){r.wrap('<div class="input-append warning">')}r.parent().addClass("warning");r.after(a);SUGAR.forms.markedField[e]=a};SUGAR.forms.unmarkField=function(e,t){if(!SUGAR.forms.markedField[e])return;if(!t)return;var n=$(t).parents('[data-fieldname="'+e+'"]');n.removeClass("warning");SUGAR.forms.markedField[e].remove();SUGAR.forms.markedField[e]=null};if(SUGAR.App&&SUGAR.App.plugins){SUGAR.App.plugins.register("SugarLogic","view",{onAttach:function U(){this.on("init",function(){this.initSugarLogic()})},initSugarLogic:function Y(e){this.deps=[];var t=this.slContext=new SUGAR.expressions.SidecarExpressionContext(this),e=e||this.context.get("module"),n=this.getApplicableDeps(),i=[],r=function a(e,t){if(t.dependency.testOnLoad){t.context.isOnLoad=true;_.each(e,function(e){SUGAR.forms.Trigger.fire.apply(t,[e])});t.context.isOnLoad=null}};_.each(n,function(e){var n=SUGAR.forms.Dependency.fromMeta(e,t);if(n){i=_.union(i,n.getRelatedFields());if(this.context.isCreate()||n.fireLinkOnlyDependency()){SUGAR.forms.Trigger.fire.apply(n.trigger);this.trigger("sugarlogic:initialize")}if(n.testOnLoad){this.context.on("list:editrow:fire",function(){this.context.isOnLoad=true;SUGAR.forms.Trigger.fire.apply(this,arguments);delete this.context.isOnLoad},n.trigger);if(this.collection){this.collection.on("sync",function(e,t){var i,a;if(e instanceof Backbone.Collection){a=_.pluck(t,"id");i=e.filter(function(e){return _.contains(a,e.id)});_.defer(r,i,n.trigger)}else{SUGAR.forms.Trigger.fire.apply(n.trigger,[e])}},this)}}this.deps.push(n)}},this);t._setupLinks(i);t._requestRollups(i);this.on("render",function(){_.each(this.deps,function(e){if(this.context.isCreate()||e.fireLinkOnlyDependency()){SUGAR.forms.Trigger.fire.apply(e.trigger);this.trigger("sugarlogic:initialize")}},this)})},getFieldNames:function H(){var t=e.ExpressionParser.prototype.getFieldsFromExpression,n=Object.getPrototypeOf(this).getFieldNames.apply(this,arguments),i=this.getApplicableDeps();_.each(i,function(e){if(e.trigger){n=_.union(n,t(e.trigger))}_.each(e.actions,function(e){if(e.params){_.each(e.params,function(e){if(_.isString(e)){n=_.union(n,t(e))}})}})});if(this.model){n=_.filter(n,function(e){return this.model.fields[e]&&this.model.fields[e].type!="link"},this)}return n},getApplicableDeps:function G(){var e=_.extend({},this.meta,this.options.meta),t=SUGAR.App.metadata.getModule(this.context.get("module"),"dependencies"),n=_.contains(this.plugins,"Editable")||this.name=="edit"||this.name=="create"?"edit":"view",i=e.dependencies;if(!_.isEmpty(t)){var r=_.filter(t,function(e){if(_.contains(e.hooks,"all")||_.contains(e.hooks,n)){return true}return false});i=!_.isEmpty(i)?_.union(i,r):r}return i}})}else if(console.error){console.error("unable to find the plugin manager")}})()},function(e,t){"use strict";var n=SUGAR.App;var i="meta:hashes";var r={CREATE:1,UPDATE:2,DELETE:3,LINK:4,UNLINK:5,FAVORITE:6,FOLLOW:7};var a=void 0;var s=void 0;var o=void 0;var l=["offline:toggled","offline:failure","offline:bulkload:progress","offline:cleanup:completed","offline:api:read:success","offline:status:update","offline:collection:read","offline:data:updated","offline:data:sync:success","offline:tx:create","offline:tx:success","offline:tx:delete","offline:tx:error","offline:tx:rollback","offline:wins:completed","offline:encryption:start","offline:encryption:complete","offline:storage:migrate"];var u={INITIALIZED_TS_KEY:"offline:initialized_ts",STATE:{OK:0,WARNING:1,ERROR:2},SYNC_ACTIONS:r,SYNC_ACTIONS_SYMBOLS:_.invert(r),TRANSACTION_STATUSES:{UNRECOVERABLE:[403,405,422,500]},status:null,_userEnabled:true,_noConnection:false,set userEnabled(e){this._userEnabled=Boolean(e)},get userEnabled(){return this._userEnabled},isSupported:function c(e){return n.utils.versionCompare(e.version||"",n.config.offline.minServerVersion,">=")},storageExists:function d(){return!!n.cache.get("offline:version")},registerEvents:function f(){_.each(l,function(e){n.events.unregister(n,e);n.events.register(e,n)})},initialize:function h(){$(document).on("ajaxComplete",this._onAjaxComplete);this._setDataModels();this.storage.init(n.metadata.get());this.api.override();this.syncManager.httpErrorHandler=_.bind(n.error.handleStatusCodesFallback,n.error);this.syncManager.init();this._registerSyncExecutors();this.status={state:this.STATE.OK};this._initialized=true;n.logger.debug("Offline initialized")},isInitialized:function p(){return this._initialized},_registerSyncExecutors:function m(){_.each(n.config.offline.syncManager.executors,function(e,t){e=_.extend(e,{name:t});var i=new(n.offline[n.utils.capitalize(t)+"SyncExecutor"])(e);n.offline.syncManager.registerExecutor(i)})},initStorage:function g(){return n.offline.storage.open({env:n.config.env,name:n.config.appId,size:n.config.offline.storageSize,adapter:n.offline[n.config.offline.storageAdapter+"Adapter"]})},_cutCachedData:function v(){_.each(["offline:version",i,"offline:encrypted","sync:wins:status"],function(e){n.cache.cut(e)})},uninitialize:function y(){$(document).off("ajaxComplete",this._onAjaxComplete);this.api.restore();this._resetDataModels();this.status=null;n.offlineEnabled=false;this._initialized=false;n.logger.debug("Offline stopped")},_setDataModels:function b(){a=n.data.beanModel;s=n.data.beanCollection;o=n.data.mixedBeanCollection;n.data.beanModel=this.declareOfflineBean();n.data.beanCollection=this.declareOfflineBeanCollection();n.data.mixedBeanCollection=this.declareOfflineMixedBeanCollection();n.data.reset();n.data.declareModels()},_resetDataModels:function x(){n.data.beanModel=a;n.data.beanCollection=s;n.data.mixedBeanCollection=o;n.data.reset();n.data.declareModels()},prepareDb:function w(e){var t=this;var i=Promise.resolve();if(e){i=i.then(function(){var e=n.utils.deepCopy(n.metadata.get());e.modules=_.omit(e.modules,n.config.offline.exclude);return t.upgrade(e)}).then(function(e){return t.migrate(e)})}var r=n.cache.get("offline:encrypted");if(n.config.offline.dbEncryptionEnabled&&!r){i=i.then(function(){return t.encrypt()})}return i},isOfflineEnabled:function L(){return n.config.offlineEnabled&&n.config.offline.enabled&&this.userEnabled&&this.isSupported(n.metadata.getServerInfo())},dropStorage:function S(e){var t=this;return new Promise(function(e,i){if(!t.storage.isOpened()){t.initStorage()}n.logger.debug("Dropping storage");t.storage.drop(function(r){t._cutCachedData();if(r){n.logger.error("Failed to drop storage: "+r);i(r)}else{e()}})})},upgrade:function E(e){var t=this;return new Promise(function(r,a){var s=n.cache.get(i);n.logger.debug("Upgrading offline storage");n.offline.storage.upgrade(e,s,{success:function o(e,i){n.logger.debug("Successfully upgraded offline storage");t.storeOfflineMeta(e);n.cache.set("offline:version",t.storage.getSqlStorageVersion());r({metadata:e,prevMetadata:i})},error:function l(e){n.logger.error("Failed to upgrade offline storage. "+e);a(e)}})})},encrypt:function k(){return new Promise(function(e,t){if(n.offline.storage.isEncryptionSupported()){n.trigger("offline:encryption:start");_.defer(function(){n.offline.storage.encrypt(function(){n.logger.debug("Successfully encrypted offline storage");n.trigger("offline:encryption:complete");n.cache.set("offline:encrypted",true);e()},function(e){n.logger.error("Failed to encrypt offline storage. "+e);n.trigger("offline:encryption:complete",n.offline.Error.EncryptionFailedError);t(e)})})}else{e()}})},migrate:function T(e){var t=e.metadata,i=e.prevMetadata;var r=!n.config.offline.debug.forceMigrate&&i&&i._hash===t._hash&&i._userId===n.user.get("id")&&i.siteUrl===n.utils.stripHttpPrefix(n.config.siteUrl);n.offline.storage.resetMigrationSummary();var a=Promise.resolve();if(!r){n.logger.debug("Migrating offline storage");a=a.then(function(){return new Promise(function(e,t){n.offline.utils.getServerTime(function(i,r){if(i){n.logger.error("Failed to get server time: "+i);i=new n.offline.Error("server_time_unavailable","Failed to retrieve server time","ERR_OFFLINE_SERVERTIME_UNAVAILABLE",i);t(i)}else{n.cache.set(n.offline.INITIALIZED_TS_KEY,r);e()}})})}).then(function(){return new Promise(function(e,r){n.offline.storage.migrate(t,i,{forceDrop:n.config.offline.debug.forceMigrate,success:function a(){n.trigger("offline:storage:migrate",{storageRebuilt:n.offline.storage.getMigrationSummary().storageRebuilt});e()},error:r})})})}return a.then(function(){n.logger.debug("Successfully migrated offline storage")}).catch(function(e){e.label=n.lang.get("ERR_OFFLINE_STORAGE_CREATE");n.logger.error("Failed to migrate offline storage. "+e);throw e})},compactStorage:function M(e){n.offline.storage.compact(e)},storeOfflineMeta:function A(e){var t={};t._hash=e._hash;t._userId=n.user.id;t.relationships={_hash:e.relationships._hash};t.siteUrl=n.utils.stripHttpPrefix(n.config.siteUrl);t.modules={};_.chain(e.modules).omit(n.config.offline.exclude).each(function(e,n){if(e._hash){t.modules[n]={_hash:e._hash,fields:{_hash:e.fields._hash}};_.each(e.fields,function(e,i){if(i==="_hash"){return}t.modules[n].fields[i]={type:e.type,name:e.name}})}});n.cache.set(i,t)},isOnline:function C(){return n.config.offline.debug.online&&window.navigator.onLine},isModuleOfflineEnabled:function R(e){return(n.config.offline.exclude||[]).indexOf(e)===-1},startSyncManager:function D(){if(n.config.offline.enabled&&n.api.isAuthenticated()){n.offline.syncManager.start()}},stopSyncManager:function I(){n.offline.syncManager.stop()},startMonitorStatus:function O(){var e=this;if(this._monitorIntervalId||!n.config.offline.debug.monitorStatus)return;var t=function i(){async.parallel({transactions:function t(i){e.storage.exec([{op:"countTransactions"}],function(e){i(null,e)},function r(e){n.logger.error("Failed to count transactions: "+e);i(e)})},isOutOfSpace:function i(t){e.storage.isOutOfSpace(function(e){return t(null,e)})}},function(t,i){var r=i.transactions||{};r.noConnection=e._noConnection||!e.isOnline();r.isSyncing=e.syncManager.isSyncing();r.lastSyncTs=e.syncManager.lastSyncTs;r.isOutOfSpace=i.isOutOfSpace;if(r.failedTransactions>0||r.isOutOfSpace){r.state=e.STATE.ERROR}else if(r.noConnection||r.totalTransactions>0){r.state=e.STATE.WARNING}else{r.state=e.STATE.OK}e.status=r;n.trigger("offline:status:update",r)})};t();this._monitorIntervalId=window.setInterval(t,n.config.offline.monitorTimeout||1e4)},stopMonitorStatus:function N(){window.clearInterval(this._monitorIntervalId);this._monitorIntervalId=null},_onAjaxComplete:function F(e,t){this._noConnection=!t.aborted&&!t.status}};n.offline=u;e.exports=n.offline},function(e,t){"use strict";var n=SUGAR.App;var i={combiners:["$or","$and"],filterKeys:{my_items:{$owner:""},favorites:{$favorite:"_this"}}};_.extend(n.offline,{_parsedFiltersCache:{},convertReadRecordsFilter:function r(e,t){var r=[];var a=e.filter?e.filter:[];var s=void 0;var o=void 0;var l=void 0;var u=void 0;_.each(i.filterKeys,function(t,n){if(!_.isUndefined(e[n])){r.push(t)}});if(_.isEmpty(a)&&_.isEmpty(r)){return}s=!_.isEmpty(r)||!_.find(i.combiners,function(e){return a[0][e]});if(s){a=[{$and:_.union(a,r)}]}o=JSON.stringify({module:t,filter:a});if(this._parsedFiltersCache[o]){return this._parsedFiltersCache[o]}l=this._convertFilterRecursive(a,[]);if(!l){this._parsedFiltersCache[o]={isSupported:false};return this._parsedFiltersCache[o]}u=n.offline.storage.convertFilter(t,l)||{};this._parsedFiltersCache[o]={filter:l,filterFields:u.fields,filterSql:u.sql,isSupported:!!u.sql};return this._parsedFiltersCache[o]},_convertFilterRecursive:function a(e,t){var n=this;if(_.isArray(e)){_.each(e,function(e){return n._convertFilterRecursive(e,t)})}else if(_.isObject(e)){_.each(e,function(e,r){if(_.contains(i.combiners,r)){var a=[];t.push({operator:r,filters:a});n._convertFilterRecursive(e,a)}else{if(_.isObject(e)){_.each(e,function(e,n){t.push({field:r,condition:n,value:e})})}else{t.push({field:r,value:e,condition:"$equals"})}}})}return t.length?t:null}})},function(e,t){"use strict";var n=SUGAR.App;n.offline.Error=function(e,t,n,i,r){this.code=e;this.message=t;this.label=n;this.err=i;this.sqlInfo=r};_.extend(n.offline.Error.prototype,{localizedMessage:function i(){var e=void 0;try{e=n.lang.get(this.label||"ERR_OFFLINE")}catch(t){e="Offline Error";n.logger.fatal("Failed to localize offline error. "+t)}return e},toString:function r(){var e=this.localizedMessage()+": ("+this.code+") "+this.message;if(this.err){var t=void 0;try{t=JSON.stringify(this.err)}catch(i){t=this.err.toString()}e+="\nOriginal error: "+t}if(this.sqlInfo){var r=/\\\'/g;var a=void 0;if(n.config.env==="dev"){a=this.sqlInfo.transactionSql}else{a=_.map(this.sqlInfo.transactionSql,function(e){return{module:e.module,sql:_.map(e.sql,function(e){return{sql:e.sql}})}})}e+=". All SQL in transaction: "+JSON.stringify(a).replace(r,'"')}return e}});_.extend(n.offline.Error,{OfflineDisabledError:new n.offline.Error("offline_disabled","Offline Mode is disabled","Offline is not initialized"),OutOfSpaceError:new n.offline.Error("out_of_space","Out of space","ERR_OFFLINE_OUT_OF_SPACE"),StorageUnavailableError:new n.offline.Error("storage_unavailable","Failed to open db","ERR_OFFLINE_STORAGE_UNAVAILABLE"),EncryptionFailedError:new n.offline.Error("encryption_failed","Failed to encrypt local storage.","ERR_OFFLINE_ENCRYPTION_FAILED"),UnknownError:new n.offline.Error("unknown","Unknown error")})},function(e,t){"use strict";(function(e){e.offline.utils={notImplemented:function t(){throw new Error("Not implemented. Please override this method with your implementation")},generateUUID:function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0;var n=e=="x"?t:t&3|8;return n.toString(16)})},isDataSynchronized:function i(t){if(t instanceof e.Bean){return t.get("_client_date_modified")===t.get("date_modified")}else if(_.isObject(t)){return t._client_date_modified&&t.date_modified&&t._client_date_modified===t.date_modified}else return false},prepareHighlightQuery:function r(e){var t="(\\*|\\%)+";e=e?e.trim().replace(/[-\[\]{}()+.,\\\^$|#\s]/g,"\\$&").replace(new RegExp("(^"+t+")|("+t+"$)","g"),"").replace(/%|\*/g,".*").replace(/_|\?/g,"."):"";return e},prepareQuery:function a(e){e=e?e.trim().replace(/[-\[\]{}()+.,\\\^$|#\s]/g,"\\$&").replace(/%|\*/g,".*").replace(/_|\?/g,"."):"";return"^"+e},checkIsEmptyQuery:function s(e){e=e?e:"";e=e.replace(/%|\*/g,"").replace(/_|\?/g,"");e=e.trim();return _.isEmpty(e)},compileHighlightRegExp:function o(e){e=this.prepareHighlightQuery(e);return new RegExp("([^\\s:-;,><]*"+e+"[^\\s:-;,><]*)","i")},compileSearchRegExp:function l(e){return new RegExp(this.prepareQuery(e))},actionToSymbol:function u(t){var n=t._tx_action||t.action;var i=t._tx_related_id||t.relate;return e.offline.SYNC_ACTIONS_SYMBOLS[n]+(i?"_RELATED":"")},getTxAge:function c(e){return parseInt((new Date-new Date(e._tx_ts))/1e3,10)},getCleanedParams:function d(e){return _.omit(e,["changedFields","skipServerSync","skipOfflineRead","serverSyncSuccess","deferSync","initialState","forceServerSync","relate"])},actionToString:function f(t){if(t===e.offline.SYNC_ACTIONS.CREATE){return"createSingle"}else if(t===e.offline.SYNC_ACTIONS.UPDATE||t===e.offline.SYNC_ACTIONS.LINK){return"updateValuesSingle"}else if(t===e.offline.SYNC_ACTIONS.DELETE||t===e.offline.SYNC_ACTIONS.UNLINK){return"hardDelete"}else if(t===e.offline.SYNC_ACTIONS.FAVORITE||t===e.offline.SYNC_ACTIONS.FOLLOW){return"updateValuesSingle"}else{throw new Error("Invalid action")}},isRecordAssignedToLoginUser:function h(t){return t.assigned_user_id&&t.assigned_user_id===e.user.id},getOfflineModules:function p(){return _.filter(_.keys(e.metadata.get().modules),function(t){return e.offline.isModuleOfflineEnabled(t)})},getBeforeAndAfter:function m(e,t){t=t||{};var n={};_.each(e,function(e,i){if(i==="_client_date_modified"||i==="id"||e===t[i]){return}n[i]={after:e,before:t[i]?t[i]:null}},this);return _.isEmpty(n)?null:n},getInitialState:function g(e,t){var n=JSON.parse(e._tx_updated_fields);_.each(n,function(e,n){if(n==="email"){return}t[n]=e.before});return t},fetchPageByPage:function v(t,n,i,r,a){var s=a.maxRecords||20;var o=a.pageSize||20;r=r||0;_.extend(n,{offset:n.offset||0,max_num:o,order_by:n.order_by||"date_modified:DESC"});if(a.isBulkLoad){_.extend(n,{e2e_skip:true})}e.offline.api.callOriginalApi("records",["read",t,null,n,{success:function l(u){if(_.isEmpty(u.records)){return a.callback()}i({module:t,records:u.records,callback:function c(l){if(l){return a.callback(l)}var c=r>=s;r+=o;n.offset+=o;if(a.iterator){a.iterator(c?s:r)}if(c||u.next_offset===-1){a.callback()}else{e.offline.utils.fetchPageByPage.call(e.offline.utils,t,n,i,r,a)}}})},error:a.callback}])},ping:function y(t){var n=+new Date;e.offline.api.callOriginalApi("ping",[null,{success:function i(){var e=new Date-n;t(null,e)},error:function r(e){t(e)}}])},getServerTime:function b(t){e.offline.api.callOriginalApi("ping",["whattimeisit",{success:function n(e){t(null,e)},error:t},{skipMetadataHash:true}])},shouldUpdateLastViewedDate:function x(e){return e&&e.viewed},callOnce:function w(e){var t={success:false,error:false,complete:false};_.each(e,function(n,i){e[i]=function(){if(t[i]){return}t[i]=true;n.apply(this,arguments);n=null}})},paginate:function L(e,t){var n=0;var i;var r=[];if(_.isEmpty(e)){return r}function a(e,n){var i=n*t;var r=(n+1)*t;return e.slice(i,r)}i=a(e,n);while(!_.isEmpty(i)){r.push(i);i=a(e,++n)}return r},getStoppableAsyncFlow:function S(t,n,i){var r=false;var a;a=_.map(n,function(t){return function n(){if(r){e.logger.debug("Async flow interrupted");i()}else{t.apply(null,arguments)}}});async[t](a,i);return function s(){r=true}},checkDatesEqual:function E(t,n){return t&&n&&t.date_modified===t._client_date_modified&&t.date_modified===e.utils.getTimestamp(n.date_modified)},isFavoriteFollowModified:function k(e,t){return e&&t&&(!_.isUndefined(t.my_favorite)&&Boolean(+t.my_favorite)!==Boolean(+e.my_favorite)||!_.isUndefined(t.following)&&Boolean(+t.following)!==Boolean(+e.following))}}})(SUGAR.App)},function(e,t,n){"use strict";var i=SUGAR.App;i.offline.syncManager={httpErrorHandler:null,lastSyncTs:null,syncExecutors:[],_currentExecutor:null,start:function r(){var e=this;if(!this.intervalId){this.intervalId=window.setInterval(function(){return e._runSyncIteration()},i.config.offline.syncManager.syncTimeout*1e3||1e4)}},stop:function a(){window.clearInterval(this.intervalId);this.intervalId=null},dispose:function s(){i.events.off("offline:data:sync:success",null,this);i.events.off("offline:bulkload:progress",this._onBulkLoaderProgress,this);this.syncExecutors=[];this.stop()},_onBulkLoaderProgress:function o(e){var t=n(229);if(e===t.ProgressEventType.START){if((this._currentExecutor||{}).name==="wins"){this._currentExecutor.stop()}}},init:function l(){var e=this;this.dispose();i.events.on("offline:data:sync:success",function(){e._runSyncIteration()},this);i.events.on("offline:bulkload:progress",this._onBulkLoaderProgress,this)},registerExecutor:function u(e){this.syncExecutors.push(e);this.syncExecutors=_.sortBy(this.syncExecutors,function(e){return e.getPriority()})},isSyncing:function c(){var c=false;_.each(this.syncExecutors,function(e){c=c||e.isWorking()});return c},_syncErrorHandler:function d(e){if(e instanceof SUGAR.Api.HttpError){if(i.utils.isConnectivityError(e)){return}else if(e.status===412&&this.httpErrorHandler){this.stop();this.httpErrorHandler(e)}else{i.logger.error(e)}}else if(e instanceof i.offline.Error){this.stop();var t=e===i.offline.Error.OfflineDisabledError?e:new i.offline.Error("synchronization_error","Synchronization failed","ERR_OFFLINE_SYNC_ERROR",e);i.trigger("offline:failure",t);i.logger.error(e)}else if(e){i.logger.error(e)}},_runSyncIteration:function f(e){var t=this;if(!i.offline.isOnline()||!i.config.offline.debug.syncManagerEnabled||!i.config.offline.syncManager.enabled||_.isEmpty(this.syncExecutors)){if(e)e();return}var n=[];_.each(this.syncExecutors,function(e){n.push(function(n){t._currentExecutor=e;e.sync.call(e,n)})});async.series(n,function(n){t._currentExecutor=null;t.lastSyncTs=new Date;t._syncErrorHandler(n);if(e)e(n)})},sync:function h(e){if(i.offlineEnabled){this._runSyncIteration(e)}}};e.exports=i.offline.syncManager},function(e,t){"use strict";e.exports={BucketType:{INITIAL:"initial",COMPLETE:"complete"},ProgressEventType:{START:"start",STOP:"stop",PAGE_START:"page_start",PAGE_FINISH:"page_finish",COMPLETE:"complete"},ModuleStatus:{IN_PROGRESS:"in_progress",OFFLINE_ERROR:"offline_error",UNKNOWN_ERROR:"unknown_error"},SettingsKey:{SETUP_SHOWN:"offline:bulkload:driver:setupShown",ALLOW_CELLULAR:"offline:bulkload:driver:allowCellular"},State:{IDLE:"idle",WORKING:"working",PAUSED_BY_CONNECTION:"paused_by_connection",PAUSED_BY_USER:"paused_by_user"}}},function(e,t){"use strict";(function(e){var t;e.offline.api={originalMethods:{},NO_CONNECTION_ERROR:{status:0,textStatus:"error",toString:function n(){return"No internet connection"}},override:function i(){_.extend(this.originalMethods,{records:e.api.records,relationships:e.api.relationships,favorite:e.api.favorite,follow:e.api.follow,search:e.api.search,file:e.api.file});_.extend(e.api,{records:this.records,relationships:this.relationships,favorite:this.favorite,follow:this.follow,search:this.search,file:this.file})},restore:function r(){if(_.isEmpty(this.originalMethods))return;_.extend(e.api,{records:this.originalMethods.records,relationships:this.originalMethods.relationships,favorite:this.originalMethods.favorite,follow:this.originalMethods.follow,search:this.originalMethods.search,file:this.originalMethods.file});this.originalMethods={}},records:function a(n,i,r,s,o,l){if(e.offline.isModuleOfflineEnabled(i)||_.contains(e.config.offline.customOfflineModules||[],i)){return t._executeOfflineApi(n,i,r,s,o,t.originalMethods.records,l)}else{return t.originalMethods.records.call(e.api,n,i,r,e.offline.utils.getCleanedParams(s),o,l)}},relationships:function s(n,i,r,a,o,l){var u=e.data.getRelatedModule(i,r.link);if(e.offline.isModuleOfflineEnabled(i)&&e.offline.isModuleOfflineEnabled(u)){a.relate=true;r.relatedModule=u;return t._executeOfflineApi(n,i,r,a,o,t.originalMethods.relationships,l)}else{return t.originalMethods.relationships.call(e.api,n,i,r,e.offline.utils.getCleanedParams(a),o,l)}},favorite:function o(n,i,r,a,s){s=s||{};if(e.offline.isModuleOfflineEnabled(n)){return t._executeOfflineApi("favorite",n,{id:i,my_favorite:r},s,a,t.originalMethods.favorite)}else{return t.originalMethods.favorite.apply(e.api,arguments)}},follow:function l(n,i,r,a,s){s=s||{};if(e.offline.isModuleOfflineEnabled(n)){return t._executeOfflineApi("follow",n,{id:i,following:r},s,a,t.originalMethods.follow)}else{return t.originalMethods.follow.apply(e.api,arguments)}},search:function u(e,n,i){return t._executeOfflineApi("search",null,null,e,n,null,i)},file:function c(n,i,r,a,s){var o=a.success;var l=i.module;if(_.contains(["create","delete"],n)){a.success=function(t,n,r){var a={id:i.id};a[i.field]=_.isEmpty(t.record)?"":t.record[i.field];e.offline.storage.saveRecords({serverData:a,module:l,ignoreRecordDirtiness:true,callback:_.bind(o,e.api,t,n,r)})}}return t.originalMethods.file.apply(e.api,arguments)},callOriginalApi:function d(n,i){var r;var a;var s;var o;var l={search:1,ping:1,follow:3,favorite:3,file:3,records:4,relationships:4};if(_.isString(n)){if(n==="read"){r=e.api.call;a=i[3]}else{r=t.originalMethods[n]||e.api[n];a=i[l[n]]}}else{r=n;_.find(t.originalMethods,function(e,t){if(e===n){a=i[l[t]];return true}})}o=_.last(i)||{};var u=a.error;var c=function f(){e.logger.debug("Original API callback suppressed. Offline layer is not initialized")};var d=o.catchServerRequest||function(){};if(!e.offlineEnabled){return u?u.call(this,e.offline.Error.OfflineDisabledError):c()}_.each(a,function(t,n){if(_.isFunction(t)){a[n]=function(){d(null);if(!e.offlineEnabled){return u?u.call(this,e.offline.Error.OfflineDisabledError):c()}else{t.apply(this,arguments)}}}});s=r.apply(e.api,i);d(s)},_executeOfflineApi:function f(e,t,n,i,r,a,s){s=s||{};var o;var l={method:e,module:t,data:n,params:i,callbacks:r,originalApi:a,options:s};s.catchServerRequest=function(e){o=e};function u(){return o}switch(e){case"search":this.readMixedCollection(l);break;case"read":var c=n&&n.link?n.relatedId:n?n.id:null;var d=c?this.readSingle:this.readCollection;d.call(this,l);break;default:this.createUpdateDelete(l)}return u}};t=e.offline.api})(SUGAR.App)},function(e,t){"use strict";(function(e){var t={readSingle:function n(t){var n={"offline:api:read:success":{}};var i=false;var r=t.method;var a=t.module;var s=t.data;var o=t.params;var l=t.callbacks;var u=t.options;function c(){if(l.error)l.error({status:404})}e.offline.utils.callOnce(l);function d(){e.offline.storage.sync("read",s,a,_.extend({},o,{ts:e.utils.getTimestamp(),success:function t(n){var r=!o.skipServerSync&&e.offline.isOnline();if(n){if(l.success){l.success(n);i=true}r=r&&e.offline.utils.isDataSynchronized(n)}else if(!r){c()}if(r){f(n)}else{h()}},error:function n(e){if(l.error)l.error(e);p(e)},complete:l.complete}))}function f(t){var c=o.relate?"relationships":"records";e.offline.api.callOriginalApi(c,[r,a,s,e.offline.utils.getCleanedParams(o),{success:function d(u){e.offline.api.cacheRequest(r,a,s,o);e.offline.storage.saveRecords({serverData:u,module:a,relationshipData:o.relate?s:null,callback:function c(r){if(!r){if(!i&&l.success){l.success(u)}n["offline:data:updated"]={isCollection:false,action:t?"update":"create",id:s.id,date_modified:e.utils.getTimestamp(u.date_modified)};h()}else{p(r)}}})},error:function f(t){if(l.error)l.error(t);if(t===e.offline.Error.OfflineDisabledError){return}var i=o.relate?s.relatedModule:a;var r=o.relate?s.relatedId:s.id;switch(t.status){case 412:return;case 403:case 404:n["offline:data:updated"]={isCollection:false,action:"delete",status:t.status,module:i,data:s,id:s.id}}var u=o.relate?{module:a,data:s,relate:o.relate}:{module:i,id:r,relate:o.relate};e.offline.storage.resolveError({nonTransactionResolve:u,error:t,callback:function c(e){if(e){p(e)}else{h()}}})}},u])}function h(){e.logger.debug("readSyncSingle success");_.each(n,function(t,n){e.trigger(n,t)})}function p(t){e.logger.error("readSyncSingle failed. "+t)}d()}};_.extend(e.offline.api,{readSingle:_.bind(t.readSingle,t),_readSingleScope:t})})(SUGAR.App)},function(e,t,n){"use strict";(function(e){var t=n(233);var i={START:"start",FINISH:"finish"};var r={readCollection:function a(n){var r=this;var a=n.method;var s=n.module;var o=n.data;var l=o&&o.relatedModule||s;var u=n.params;var c=n.callbacks;var d=n.options;var f=[];var h;e.offline.utils.callOnce(c);if(s==="Recents"){return t.readCollection(n,this._onReadCollectionComplete)}if(s==="TxLog"){u.skipServerSync=true}if(!u.skipOfflineRead){h=this._getOfflineReadParams(l,u);if(!h.skipOfflineRead){f.push(_.bind(function m(e){this._offlineRead(e,a,s,o,h,c,d)},this))}}if(e.offline.isOnline()){if(!u.skipServerSync){f.push(_.bind(function(e){if(u.filter&&h&&!h.skipOfflineRead){u.fields=_.union(u.fields?u.fields.split(","):[],h.filterParsed.filterFields).join()}this._serverRead(e,a,s,o,u,c,d)},this))}}else if(c.error){var p=_.extend({request:{params:d}},e.offline.api.NO_CONNECTION_ERROR);c.error(p)}e.events.trigger("offline:collection:read",{status:i.START,apiOptions:d});async.waterfall(f,function(e,t){return r._onReadCollectionComplete(e,t,d,c)})},_offlineRead:function s(t,n,i,r,a,o,l){e.offline.storage.sync("read",r,i,_.extend({},a,{ts:e.utils.getTimestamp(),success:function u(n){var r;n=n||[];n=!_.isArray(n)?[n]:n;if(i==="TxLog"){var s;s=n.pop().totalTransactions;n=_.map(n,function(e){e.id=e._tx_uid;return e});var l=(a.offset||0)+n.length;r=s>l?l:-1;e.offline.storage.fillTxLogData(n,function(){o.success({records:n,next_offset:r})})}else{r=a.max_num>n.length||a.serverNextOffset===-1?-1:(a.offset||0)+n.length;var u={records:n,next_offset:r};if(o.success)o.success(u)}t()},error:function c(e){if(o.error)o.error(e);t(e)},complete:o.complete}))},_getOfflineReadParams:function o(t,n){var i=e.utils.deepCopy(n);var r=e.offline.convertReadRecordsFilter(i,t);if(r){if(r.isSupported){i.filterParsed=r}else{i.skipOfflineRead=true}}return i},_serverRead:function l(t,n,i,r,a,s,o){var l=a.relate?"relationships":"records";e.offline.api.callOriginalApi(l,[n,i,r,e.offline.utils.getCleanedParams(a),{success:function u(l){e.offline.api.cacheRequest(n,i,r,a);if(s.success)s.success(l);l=l||{};if(a.serverSyncSuccess&&l.records){a.serverSyncSuccess({records:l.records,next_offset:l.next_offset},a)}if(!_.isEmpty(l.records)){e.offline.storage.saveRecords({module:i,serverData:l.records,relationshipData:a.relate?r:null,callback:function u(n,s){var u=s.isDataUpdated&&!a.skipOfflineRead;t(n,{serverData:l,isDataUpdated:u});if(u){e.trigger("offline:data:updated",{isCollection:true,action:"update",module:i,relationsData:r,serverNextOffset:l.next_offset,requestParams:a,cid:o.cid})}}})}else{t(null,{serverData:l})}},error:function c(e){if(s.error){s.error(e)}t(e)},complete:s.complete},o])},_onReadCollectionComplete:function u(t,n,r,a){n=n||{};if(t){if(a.error){a.error(t)}if(t instanceof e.offline.Error&&t!==e.offline.Error.OfflineDisabledError){e.logger.error("read_collection failed. "+t)}}else{e.trigger("offline:api:read:success")}if(a.complete){a.complete(n.serverData)}e.events.trigger("offline:collection:read",{status:i.FINISH,isDataUpdated:n.isDataUpdated,apiOptions:r})}};_.extend(e.offline.api,{readCollection:_.bind(r.readCollection,r),_readCollectionScope:r,ReadCollectionStatus:i})})(SUGAR.App)},function(e,t){"use strict";var n=SUGAR.App;e.exports={readCollection:function i(e,t){var i=this;n.events.trigger("offline:collection:read",{status:n.offline.api.ReadCollectionStatus.START,apiOptions:e.options});var r={};async.waterfall([function(t){return i._localRead(e,t)},function(t){return i._serverRead(r,e,t)},function(e){return i._saveRecords(r,e)},function(e){return i._readLastViewed(r,e)},function(t){return i._updateLastViewed(r,e,t)}],function(n){if(n&&n.stopWaterfall){n=null}var i={isDataUpdated:r.dbSaveResult&&r.dbSaveResult.isDataUpdated,serverData:r.serverData};t(n,i,e.options,e.callbacks);

})},_localRead:function r(e,t){var i=e.params;var r=_.without(n.offline.utils.getOfflineModules(),"Teams");var a=i.module_list?_.intersection(i.module_list.split(","),r):r;var s=_.map(a,function(e){return{op:"readRecents",module:e,options:{max_num:n.config.fetchLimit.recents}}});var o=function l(n,i){e.callbacks.complete(n||i);t(n)};n.offline.storage.exec(s,function(t){if(!t){t=[]}else if(!_.isArray(t)){t=[t]}else{t=_.sortBy(t,function(e){return-new Date(e._last_viewed_date)}).slice(0,n.config.fetchLimit.recents)}e.callbacks.success({records:t,next_offset:-1});o(null,t)},o)},_serverRead:function a(e,t,i){var r=t.params;if(r.skipServerSync||!n.offline.isOnline()){i({stopWaterfall:true});return}r=n.offline.utils.getCleanedParams(r);r.module_list=_.intersection(r.module_list.split(","),n.offline.utils.getOfflineModules()).join(",");var a={error:i,success:function s(t){e.serverData=t;var n=_.isEmpty(t.records)?{stopWaterfall:true}:null;i(n)}};n.offline.api.callOriginalApi("records",[t.method,t.module,null,r,a,t.options])},_saveRecords:function s(e,t){n.offline.storage.saveRecords({serverData:e.serverData.records,callback:function i(n,r){e.dbSaveResult=r;t(n)}})},_readLastViewed:function o(e,t){var i=e.serverData;n.offline.storage.exec({op:"readLastViewed",options:{ids:_.pluck(i.records,"id")}},function(n){var r=i.records;if(n){if(!_.isArray(n)){n=[n]}r=_.filter(i.records,function(e){var t=_.findWhere(n,{bean_id:e.id});if(!t){return true}var i=new Date(t.date_last_viewed).getTime();var r=new Date(e._last_viewed_date).getTime();return r>i})}e.lastViewedRecords=r;t(null)},t)},_updateLastViewed:function l(e,t,i){var r={isCollection:true,action:"update",module:"Recents",cid:t.options.cid};if(_.isEmpty(e.lastViewedRecords)){if(e.dbSaveResult.isDataUpdated){n.trigger("offline:data:updated",r)}i()}else{var a=_.map(e.lastViewedRecords,function(e){return{id:e.id,module:e._module,ts:n.utils.getTimestamp(e._last_viewed_date)}});n.offline.storage.exec({op:"updateLastViewed",data:a,options:{}},function(){n.trigger("offline:data:updated",r);i()},i)}}}},function(e,t){"use strict";(function(e){var t={readMixedCollection:function n(t){var n=this;var i=t.method;var r=t.data;var a=t.params;var s=t.callbacks;var o=t.options;var l=[];e.offline.utils.callOnce(s);if(!a.skipOfflineRead){l.push(_.bind(function c(e){this._offlineRead(e,i,r,a,s,o)},this))}if(e.offline.isOnline()){if(!a.skipServerSync){l.push(_.bind(function d(e){this._serverRead(e,i,r,a,s,o)},this))}}else{if(s.error){var u=_.extend({},e.offline.api.NO_CONNECTION_ERROR,{request:{params:o}});s.error(u)}}e.events.trigger("offline:collection:read",{status:e.offline.api.ReadCollectionStatus.START,apiOptions:o});async.waterfall(l,function(e,i){return n._onReadCollectionComplete(e,i,t)})},_offlineRead:function i(t,n,r,a,s,o){e.offline.storage.sync("search",null,null,_.extend({},a,{ts:e.utils.getTimestamp(),success:function l(n){var i=a.module_list&&a.module_list.split(",").length>1;var r;var o;var l;var u={};n=n||[];n=!_.isArray(n)?[n]:n;if(!e.offline.utils.checkIsEmptyQuery(a.q)){o=e.offline.utils.compileSearchRegExp(a.q);l=e.offline.utils.compileHighlightRegExp(a.q);_.each(a.module_list.split(","),function(t){u[t]=e.metadata.getModule(t).fields});_.each(n,function(t){r=t._module||t.module;t._search={isOffline:true};_.each(e.offline.storage.offlineMeta[r].searchFields,function(e){var n=e.name;var i=t[n];if((_.isString(i)||_.isNumber(i))&&o.test(i)){t._search.highlighted=t._search.highlighted||{};t._search.highlighted[n]={module:r,text:i.toString().replace(l,"<strong>$1</strong>"),label:u[r][n].vname}}})})}if(i){n=_.sortBy(n,function(e){return e._client_date_modified}).reverse()}if(i){var c=a.max_num||e.config.maxQueryResult;n=n.splice(a.offset||0,c)}var d=a.max_num>n.length?-1:(a.offset||0)+n.length;var f={records:n,next_offset:d};if(s.success)s.success(f);t()},error:function u(e){if(s.error)s.error(e);t(e)},complete:s.complete}))},_serverRead:function r(t,n,i,a,s,o){e.offline.api.callOriginalApi(n,[e.offline.utils.getCleanedParams(a),{success:function l(n){if(s.success)s.success(n);n=n||{};if(a.serverSyncSuccess&&n.records){a.serverSyncSuccess({records:n.records,next_offset:n.next_offset},a)}if(!_.isEmpty(n.records)){e.offline.storage.saveRecords({serverData:n.records,callback:function i(n,r){var s=r.isDataUpdated&&!a.skipOfflineRead;t(n,{isDataUpdated:s});if(s){e.trigger("offline:data:updated",{isCollection:true,action:"update",mixedCollection:true,requestParams:a,cid:o.cid})}}})}else{t()}},error:function u(e){if(s.error){s.error(e)}t(e)},complete:s.complete},o])},_onReadCollectionComplete:function a(t,n,i){n=n||{};if(t){if(t instanceof e.offline.Error&&t!==e.offline.Error.OfflineDisabledError){e.logger.error("readSyncMixedCollection failed. "+t)}}else{e.logger.debug("Read mixed collection success")}if(i.callbacks.complete){i.callbacks.complete(n)}e.events.trigger("offline:collection:read",{status:e.offline.api.ReadCollectionStatus.FINISH,isDataUpdated:n.isDataUpdated,apiOptions:i.options})}};_.extend(e.offline.api,{readMixedCollection:_.bind(t.readMixedCollection,t),_readMixedCollectionScope:t})})(SUGAR.App)},function(e,t){"use strict";(function(e){var t={createUpdateDelete:function n(t){var n=this;var i=t.method;var r=t.module;var a=t.data;var s=t.params||{};var o=t.callbacks;var l=t.originalApi;var u=t.options;if(!s.deferSync&&e.offline.isOnline()){async.waterfall([function c(t){e.offline.storage.readTransactions({limit:1,success:function n(e){t(null,e)},error:t})}],function d(t,c){if(t&&o.error){e.logger.error("createUpdateDeleteSync failed"+t);o.error(t)}else{if(c){n._offlineSync(i,r,a,s,o)}else{n._serverSync(i,r,a,s,o,l,u)}}})}else{n._offlineSync(i,r,a,s,o)}},_isInitialStateRequired:function i(e,t,n,r){return e==="update"||e==="favorite"||e==="follow"||(e==="create"||e==="delete")&&n.link},_offlineSync:function r(t,n,i,a,s){var o=this;async.series([function l(r){if(o._isInitialStateRequired(t,n,i,a)){var s=a.relate?i.relatedModule:n;var l=a.relate?i.relatedId:i.id;e.offline.storage.readSingleRawRecord(s,{id:l},{success:function u(e){a.initialState=e;r()},error:r})}else r()}],function(r){if(r){var o="Failed to read initial record during offline sync. Module: {0}, data: {1}";o=e.utils.formatString(o,[n,JSON.stringify(i||{})]);e.logger.error(o);if(s.error){s.error(r)}return}e.offline.storage.sync(t,i,n,_.extend({},{ts:e.utils.getTimestamp(),success:function l(n){e.trigger("offline:data:sync:success",n);if(s.success)s.success(n);e.logger.trace("Successfully executed: "+t)},error:function u(e){if(s.error){s.error(e)}},complete:s.complete},a))})},_serverSync:function a(t,n,i,r,s,o,l){var u=this;var c=function h(a){var o;var l=e.acl.hasAccessToModel("access",e.data.createBean(n,a));if(t==="delete"||!l){o=[function(t){e.offline.storage.sync("delete",i,n,_.extend(r,{hardDelete:true,success:function a(){t()},error:t}))}];if(r.relate){o.push(function(t){e.offline.storage.saveRecords({serverData:a.record,module:n,callback:t})});o.push(function(t){e.offline.storage.saveRecords({serverData:a.related_record,module:i.relatedModule,callback:t})})}async.series(o,function c(t){if(t){e.logger.error(t);s.error(t)}else{s.success(a)}})}else{var u=t!=="follow"?a:{id:i.id,following:i.following};if(_.isObject(u)){o=[function(t){e.offline.storage.saveRecords({serverData:r.relate?u.record:u,module:n,callback:t})}];if(r.relate){o.push(function(t){e.offline.storage.saveRecords({serverData:u.related_record,module:n,relationshipData:i,callback:t})})}if(t==="create"&&!r.relate||t==="create"&&r.relate&&!i.relatedId){o.push(function(t){e.offline.storage.updateLastViewed(r.relate?u.related_record:u,{module:r.relate?i.relatedModule:n,callback:t})})}if(t!=="delete"){o.push(function(t){e.offline.storage.markToBeSynced({module:r.relate?i.relatedModule:n,callback:t,action:"update",record:r.relate?u.related_record:u})})}async.series(o,function d(t){if(t){e.logger.error(t);s.error(t)}else{s.success(a);e.trigger("offline:data:updated",{isCollection:false,action:"update"})}})}else{s.success(a)}}};var d=function p(a){if(a&&e.utils.isConnectivityError(a)){u._offlineSync(t,n,i,r,s)}else{if(s.error)s.error(a)}};if(t==="favorite"||t==="follow"){e.offline.api.callOriginalApi(o,[n,i.id,t==="favorite"?i.my_favorite:i.following,{success:c,error:d,complete:s.complete}])}else{if(t==="create"&&!i.relatedId){var f=i.link?i.related:i;f.id=e.utils.generateUUID()}e.offline.api.callOriginalApi(o,[t,n,i,e.offline.utils.getCleanedParams(r),{success:c,error:d,complete:s.complete},l])}}};_.extend(e.offline.api,{createUpdateDelete:_.bind(t.createUpdateDelete,t),_createUpdateDeleteScope:t})})(SUGAR.App)},function(e,t){"use strict";(function(e){var t={_rStack:[],_rTs:{},_getPseudoUrl:function n(e,t,i,r){var a=r.relate?i:i?{id:i.id}:null;var s=JSON.stringify({module:t,data:a,params:_.pick(r,"max_num","offset","relate","favorites","my_items")});return s},handleServerSyncSkip:function i(e,t,n,r){if(r.skipServerSync||r.forceServerSync||r.skipOfflineRead){return}var a=this._getPseudoUrl(e,t,n,r);if(this._shouldSuppressRemoteSync(a)){r.skipServerSync=true}},_shouldSuppressRemoteSync:function r(t){return _.contains(this._rStack,t)&&(new Date).getTime()-this._rTs[t]<e.config.offline.httpThrottleTimeout},cacheRequest:function a(t,n,i,r){var a=this._getPseudoUrl(t,n,i,r);var s=this._rStack;var o=this._rTs;var l=e.config.offline.httpThrottleCacheSize;var u=s.indexOf(a);if(u>-1){s.splice(u,1)}s.splice(0,0,a);o[a]=(new Date).getTime();if(s.length>l){delete o[s.pop()]}return{rStack:s,rTs:o}}};_.extend(e.offline.api,{handleServerSyncSkip:_.bind(t.handleServerSyncSkip,t),cacheRequest:_.bind(t.cacheRequest,t),_httpThrottlingScope:t})})(SUGAR.App)},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(229);var a="offline:bulkload:core:cache";var s=function l(){var e=i.cache.get(a)||{};_.extend(this,e)};s.prototype.save=function(){i.cache.set(a,this)};var o=e.exports={error412Handler:null,_status:{working:false,module:null,bucketName:null,count:0},cache:null,init:function u(){this.cache=new s;this.error412Handler=i.error.handleStatusCodesFallback.bind(i.error);if(_.isEmpty(this.cache)){this._initCacheValues()}},uninit:function c(){this.stop()},queueBuckets:function d(e){var t=this;e=_.isArray(e)?e:[e];if(!e.length){return}_.each(e,function(e){t.cache.queue.push(e);if(!_.contains(t.cache.queuedBuckets,e.name)){t.cache.queuedBuckets.push(e.name)}});this.cache.save()},start:function f(){if(this._status.working||!this.cache.queue.length){return}this._status.working=true;if(!this._loading){this._load()}},_stopCallback:null,stop:function h(){var e=this,t=arguments;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(){};var a=function s(){i.events.trigger("offline:bulkload:progress",r.ProgressEventType.STOP);n.apply(e,t)};this._status.working=false;if(this._loading){this._stopCallback=a}else{a()}},_initCacheValues:function p(){this.cache.queue=[];this.cache.queuedBuckets=[];this.cache.status={};this.cache.pausedByUser=false;this.cache.lastCompletedTs=null;this.cache.save()},clearCache:function m(){i.cache.cut(a);if(this.cache){this._initCacheValues()}},resetModulesStatus:function g(){this.cache.status={};this.cache.save()},_loading:false,_load:function v(){var e=this;this._loading=true;var t=false;async.whilst(function(){if(e._status.working&&e.cache.queue.length){!t&&i.events.trigger("offline:bulkload:progress",r.ProgressEventType.START);t=true;return true}},function(t){e._loadNextModule(t)},function(t){var n=e.cache.queue.length===0;var a=e._status.bucketName;e._loading=false;if(e._stopCallback){e._stopCallback();e._stopCallback=null}e._status={working:false,module:null,count:0};if(n){e.cache.lastCompletedTs=i.utils.getTimestamp();e.cache.save();i.events.trigger("offline:bulkload:progress",r.ProgressEventType.COMPLETE,a)}})},_loadNextModule:function y(e){var t=this.cache.queue;var n=t[0];if(n){var i=n.modules[0];this._status.bucketName=n.name;this._processModule(i,function(t){e()})}else{e()}},_processModule:function b(e,t){var n=this;var a=e.name;if(!this.cache.status[a]){this.cache.status[a]={status:r.ModuleStatus.IN_PROGRESS,currentCount:0,serverOffset:0,gtFilterTimestamp:null}}this.cache.status[a].status=r.ModuleStatus.IN_PROGRESS;this.cache.save();this._status.module=a;this._status.count=this.cache.status[a].currentCount;async.whilst(function(){return n._status.working&&n.cache.status[a].status===r.ModuleStatus.IN_PROGRESS},function(t){_.delay(function(){if(n._status.working){n._fetchAndSaveNextPage(e,t)}else{t()}},i.config.offline.bulkLoad.requestDelay)},t)},_fetchAndSaveNextPage:function x(e,t){var n=this;var a=e.name;var s=this.cache.status[a];var o=e.filter||[];if(s.gtFilterTimestamp){o.push({date_modified:{$gt:new Date(s.gtFilterTimestamp).toISOString()}})}var l=s.serverOffset||0;var u={fields:i.metadata.getModule(a,"mergedFields").join(),max_num:i.config.offline.bulkLoad.pageSize,order_by:"date_modified:desc",filter:o,offset:l,e2e_skip:i.config.scheme==="e2e"};i.events.trigger("offline:bulkload:progress",r.ProgressEventType.PAGE_START);i.offline.api.callOriginalApi("records",["read",a,null,u,{success:function c(r){var a=r.records;if(a.length){if(l===0){s.firstRecordTimestamp=r.records[0].date_modified;n.cache.save()}i.offline.storage.saveRecords({module:e.name,serverData:a,backgroundMode:true,callback:function o(i){n._onPageComplete(i,e,r,t)}})}else{n._onPageComplete(null,e,r,t)}},error:function d(i){n._onPageComplete(i,e,null,t)}}])},_pageRetryCount:0,_retriesLim:3,_onPageComplete:function w(e,t,n,a){var s=t.name;var o=this.cache.status[s];var l=true;if(e){if(e instanceof i.offline.Error){if(e===i.offline.Error.OfflineDisabledError){this.stop()}else{i.logger.error("Bulk Loader ("+s+"): Failed to save records to database. "+e);o.status=r.ModuleStatus.OFFLINE_ERROR+".Code:"+e.code;o.currentCount=0;this._shiftQueue()}}else if(e.status===412){this.stop();i.logger.debug("Bulk Loader ("+s+"): metadata change detected. Invoking default handler.");this.error412Handler(e)}else{if(i.utils.isConnectivityError(e)&&this._pageRetryCount<this._retriesLim){i.logger.debug("Bulk Loader("+s+"): Server connectivity error. Retrying.");this._pageRetryCount++;l=false}else{var u=_.isUndefined(e.status)?r.ModuleStatus.UNKNOWN_ERROR:e.status;i.logger.error("Bulk Loader ("+s+"): Server error - "+u);o.status=u;o.currentCount=0;this._shiftQueue()}}}else{i.events.trigger("offline:bulkload:progress",r.ProgressEventType.PAGE_FINISH,{module:s});var c=n.records.length;if(c){o.currentCount+=c;o.serverOffset+=c;this._status.count=o.currentCount;this.cache.save()}if(n.next_offset===-1||o.currentCount>=t.limit){o.status=200;o.currentCount=0;if(n.next_offset===-1&&o.firstRecordTimestamp){o.gtFilterTimestamp=i.utils.getTimestamp(o.firstRecordTimestamp);o.serverOffset=0}o.firstRecordTimestamp=null;this._shiftQueue()}}if(l){this._pageRetryCount=0}a(e)},_shiftQueue:function L(){this.cache.queue[0].modules.shift();if(this.cache.queue[0].modules.length===0){this.cache.queue.shift()}this.cache.save()}};i.offline.syncManager.bulkLoader=o},function(e,t){"use strict";(function(e){var t=function n(e){this._module=e};_.extend(t.prototype,{combiners:{$or:" OR ",$and:" AND "},conditions:{base:{$equals:"=",$not_equals:"!=",$lt:"<",$lte:"<=",$gt:">",$gte:">=",$starts:function i(e,t){return e+' LIKE "'+t+'%"'},$ends:function r(e,t){return e+' LIKE "%'+t+'"'},$contains:function a(e,t){return e+' LIKE "%'+t+'%"'},$not_contains:function s(e,t){return e+' NOT LIKE "%'+t+'%"'},$in:function o(e,t,n){t=n.value;return e+" IN ("+(_.isArray(t)?t.map(this._quotStr).join():t)+")"},$not_in:function l(e,t,n){t=n.value;return e+" NOT IN ("+(_.isArray(t)?t.map(this._quotStr).join():t)+")"},$is_null:function u(e){return e+" ISNULL"},$not_null:function c(e){return e+" NOTNULL"},$empty:function d(e){return"("+e+'="")'},$not_empty:function f(e){return"("+e+'!="")'},$dateBetween:function h(t,n,i){n=i.value;var r=e.date.utc(n[0]).startOf("day").toDate();var a=e.date.utc(n[1]).endOf("day").toDate();r=this._quotStr(this._getValue(r,t));a=this._quotStr(this._getValue(a,t));return t+" BETWEEN "+r+" AND "+a},$between:function p(e,t,n){t=n.value;return e+" BETWEEN "+this._quotStr(t[0])+" AND "+this._quotStr(t[1])},$dateRange:function m(e,t,n){t=n.value;var i=this._parseRange(t);if(i){var r={field:e,value:i[0],condition:"$gte"};var a={field:e,value:i[1],condition:"$lte"};return this._buildCondition(r)+" AND "+this._buildCondition(a)}return false}},byType:{tag:{$in:function g(e,t,n){t=n.value.join("|");return e+' REGEXP "^.*""name"":""('+t+')"".*$"'},$not_in:function v(e,t,n){var i=e+" ISNULL OR "+e+' REGEXP "^((?!';i+=_.map(n.value,function(e){return'""name"":""'+e+'""'}).join("|");i+=').)*$"';return i},$empty:function y(e){return e+'="[]" OR '+e+" ISNULL"},$not_empty:function b(e){return e+'!="[]" AND '+e+" NOTNULL"}},team_list:{$equals:function x(e,t){return'team_name LIKE "%""id"":""'+t+'""%"'},$not_equals:function w(e,t){return'team_name NOT LIKE "%""id"":""'+t+'""%"'}},json:{},email:{},teamset:{},metadata:{},multienum:{}}},customFilters:{$favorite:function L(){return{filter:{field:"my_favorite",condition:"$equals",value:1}}},$owner:function S(){return e.metadata.getModule(this._module,"fields").assigned_user_id?{sql:'"assigned_user_id"='+this._quotStr(e.user.get("id")),fields:["assigned_user_id"]}:false},$tracker:function E(t){var n=this._parseDate(t.value);return n?{sql:'id IN (SELECT bean_id FROM _view_dates WHERE bean_module="'+this._module+'" AND date_last_viewed>="'+e.utils.getTimestamp(n)+'")'}:false},$creator:function k(){return{filter:{field:"created_by",condition:"$equals",value:e.user.get("id")},fields:["created_by"]}},$following:function T(){return{filter:{field:"following",condition:"$equals",value:1}}}},getExtractedFields:function M(){return _.unique(this._filterFields)},buildSql:function A(e,t){var n;this._filterFields=[];n=this._buildSql(e,"");if(t&&t.omitParentheses&&n){n=n.replace(/^\(|\)$/g,"")}return n},_buildSql:function C(e,t,n){for(var i=0,r=e.length;i<r;i++){var a=e[i];var s;if(a.operator){s=C.call(this,a.filters,"",this.combiners[a.operator]);if(s){t+="("+s+")"}}else{s=this._buildCondition(a);if(s){t+=s}}if(s&&r-i>1){t+=n}else if(s===false){return false}}return t},_buildCondition:function R(e){var t;var n;var i;var r;var a;var s;var o;t=this.customFilters[e.field];if(t){t=t.call(this,e);if(t===false){return false}else if(t.sql){this._filterFields.push.apply(this._filterFields,t.fields);return t.sql}else if(t.filter){e=t.filter}}r=this._getCondition(e);if(!r){return false}n=e.field;i=e.value;a=this._getField(n);s=this._getValue(i,n);if(!a){return false}if(n.indexOf(".")!==-1){return this._processLink(e)}if(_.isFunction(r)){o=r.call(this,a,s,{field:n,value:i})}else if(_.isString(r)){o=a+r+this._quotStr(s)}if(o){this._filterFields.push(n);return o}return false},_processLink:function D(n){var i=n.field;var r=i.split(".");var a=r[0];var s=e.offline.storage.getRelationshipByLink(this._module,a);var o=e.offline.storage.relTypes;var l=function h(e){return new t(e).buildSql([{operator:"$and",filters:[{field:i,condition:"$equals",value:n.value}]}],{omitParentheses:true})};var u;var c;var d;var f;i=r[1];if(s.relationship_type===o.MANY_TO_MANY){f=e.offline.storage._wrapManyToManyRelationship(this._module,a);d=l(f.dataTable);if(d){c="SELECT lt."+f.parentKey+" FROM "+f.parentModule+" lt INNER JOIN "+f.relationshipTable+" jt ON lt."+f.parentKey+"="+"jt."+f.parentIdColumn+" INNER JOIN "+f.dataTable+" rt ON rt."+f.childKey+"="+"jt."+f.childIdColumn;u=f.parentKey+" IN ("+c+" WHERE rt."+d+")"}}else if(s.relationship_type===o.ONE_TO_MANY){d=l(s.rhs_module);if(d){c="SELECT lt."+s.lhs_key+" FROM "+s.lhs_table+" lt INNER JOIN "+s.rhs_table+" rt ON lt."+s.lhs_key+"="+"rt."+s.rhs_key;u=s.lhs_key+" IN ("+c+" WHERE rt."+d+")"}}return u||false},_getCondition:function I(t){var n=t.condition;var i=this.conditions;var r=e.metadata.getModule(this._module).fields[t.field];var a=r&&r.type;return i.byType[a]?i.byType[a][n]:i.base[n]},_quotStr:function O(e){return'"'+e+'"'},_getValue:function N(t,n){return e.offline.storage._getValue(t,n,this._module,e.metadata.getModule(this._module).fields)},_getField:function F(e){var t=e;switch(e){case"date_modified":t="_client_date_modified";break}return t},_dateRanges:{yesterday:["days",-1,-1],today:["days",0,0],tomorrow:["days",1,1],last_7_days:["days",-6,0],next_7_days:["days",0,6],last_30_days:["days",-29,0],next_30_days:["days",0,29],next_month:["months",1,1],this_month:["months",0,0],last_month:["months",-1,0],last_year:["years",-1,0],this_year:["years",0,0],next_year:["years",1,1]},_parseRange:function B(t){var n=this._dateRanges[t];if(!n){return false}var i=n[0];var r=e.date.utc().add(n[1],i).startOf(i).toDate();var a=e.date.utc().add(n[2],i).endOf(i).toDate();return[e.utils.getTimestamp(r),e.utils.getTimestamp(a)]},_parseDate:function P(t){var n=e.date.utc();var i="month";var r;switch(t){case"first day of this month":r=n.startOf(i);break;case"first day of next month":r=n.add(1,"month").startOf(i);break;case"last day of this month":r=n.endOf("month");break;case"last day of next month":r=n.add(1,i).endOf(i);break}if(r){return r.toDate()}r=e.date.phpStrToTime(t);if(r){return new Date(r*1e3)}return false}});e.offline.SqlFilterBuilder=t})(SUGAR.App)},function(e,t){"use strict";(function(e){var t=["date_entered",["date_modified","my_favorite"],["assigned_user_id","date_modified"]];function n(e){return e.replace(/'/g,"''")}function i(e){return c.getSqlTypeByMetaType(e.type)===c.DEFAULT_TEXT_COLUMN_TYPE}function r(e,t){if(_.isArray(t)){t=t.join("_")}return'"'+e+"_"+t+'_IDX"'}function a(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var i=r(e,t);if(_.isArray(t)){t=""+t.join('" '+n+', "')}return"CREATE INDEX IF NOT EXISTS "+i+' ON "'+e+'"("'+t+'" '+n+")"}function s(e,t){return"DROP INDEX IF EXISTS "+r(e,t)}function o(n,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},o=r.dropExisting;if(!e.offline.isModuleOfflineEnabled(n)){return}var l=[];_.each(t,function(e){if(!_.isArray(e)){e=[e]}var t=_.all(e,function(e){return i.fields[e]});if(!t){return}e=_.map(e,function(e){return e==="date_modified"?"_client_date_modified":e});if(o){l.push(s(n,e))}l.push(a(n,e))});return l}function l(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=n.dropExisting;var o=e.offline.storage.offlineMeta[t];var l=[];_.each(o.searchFields,function(e){var n=e.name;if(r){l.push(s(t,n))}l.push(a(t,n,i(e)?"COLLATE NOCASE":""))});return l}function u(t){var n=[];var i=["created_by","modified_user_id","assigned_user_id"];var r=e.metadata.get();_.each(t,function(t){if(t.type===e.offline.storage.relTypes.MANY_TO_MANY){return}var o=t.childModule;var l=t.parentIdColumn;if(r.modules[o]&&e.offline.isModuleOfflineEnabled(o)&&i.indexOf(l)===-1){var u=a(o,l);if(n.indexOf(u)===-1){n.push(s(o,l),u)}}});return n}var c=function d(e,t,n){this.name=e;this.definition=t;this._tableName=e;this.fields=n;var i=_.map(this.fields,function(e){return'"'+e.name+'"'});i.unshift('"_acl"');i.unshift('"_deleted"');i.unshift('"_client_date_modified"');i.unshift('"id"');var r=_.map(i,function(e){return e+"=?"});var a="("+i.join(",")+")";var s="SET "+r.join(",");var o=[];_.times(i.length,function(){o.push("?")});var l="("+o.join(",")+")";this.sqlCreate='REPLACE INTO "'+this._tableName+'" '+a+" VALUES "+l;this.sqlReplace='REPLACE INTO "'+this._tableName+'" '+a+" VALUES "+l;this.sqlUpdate='REPLACE INTO "'+this._tableName+'" '+s+" WHERE id=?";this.sqlMarkDeleted="UPDATE "+this._tableName+" SET _deleted=1 WHERE id=?";this.sqlResetDeleted="UPDATE "+this._tableName+" SET _deleted=0 WHERE id=?";this.sqlSelectOne="SELECT * FROM "+this._tableName+" WHERE id=? AND _deleted=0";this.sqlSelectOneWithDeleted="SELECT * FROM "+this._tableName+" WHERE id=?"};_.extend(c.prototype,{buildSqlReadModuleRecordsByIds:function f(e,t){e='"'+(_.isArray(e)?e:[e]).join('","')+'"';t=_.isEmpty(t)?"*":'"'+t.join('","')+'"';return"SELECT "+t+' FROM "'+this._tableName+'" WHERE id IN ('+e+")"},getSchema:function h(t,n){var i=[];var r=[];r.push('"id" TEXT PRIMARY KEY COLLATE NOCASE');r.push('"_client_date_modified" TEXT COLLATE NOCASE');r.push('"_deleted" INTEGER DEFAULT 0');r.push('"_acl" TEXT COLLATE NOCASE');function a(e,t){return'"'+e+'"'+t}_.each(this.fields,function(t){if(_.isEmpty(t.name)){return}var i=c.getSqlTypeByMetaType(t.type);var s=a(t.name,i);if(_.contains(r,s)){e.logger.warn(s+" column already exists in "+this.name+" table. Skipping")}else{r.push(s);if(t.type==="email"&&!n.fields.email1){r.push(a("email1",i))}}},this);i.push('DROP TABLE IF EXISTS "'+this._tableName+'"');i.push('CREATE TABLE "'+this._tableName+'" ('+r.join(",")+")");i=i.concat(o(t,n,{dropExisting:true})).concat(l(t,{dropExisting:true}));return i},buildSqlSelectMany:function p(t){var n=t.offset||0;var i=t.max_num||e.config.maxQueryResult;var r=t.selectFields;var a=_.isEmpty(r)?"*":_.isArray(r)?r.join():r;var s=c.buildOrderBy(this.name,t);var o="SELECT {0} FROM {1} "+c.buildWhere(this.name,t,{andSql:"_deleted=0"})+" ORDER BY {4} LIMIT {2},{3}";return e.utils.formatString(o,[a,this._tableName,n,i,s])},buildSqlUpdate:function m(e,t){var n=_.map(t,function(e){return e+"=?"});var i="SET "+n.join(",");return'UPDATE "'+this._tableName+'" '+i+" WHERE id=?"},buildSqlDelete:function g(e){e=_.map(e,function(e){return"'"+e+"'"});return"DELETE FROM '"+this._tableName+"' WHERE id IN ("+e.join()+")"}});c.DEFAULT_TEXT_COLUMN_TYPE=" TEXT COLLATE NOCASE";c.getSqlTypeByMetaType=function v(e){var t;switch(e){case"bool":case"boolean":case"int":case"integer":t=" INTEGER";break;case"float":case"double":case"currency":t=" REAL";break;default:t=this.DEFAULT_TEXT_COLUMN_TYPE;break}return t};c.buildWhere=function(t,n,i){var r=c.buildSearchQuery(t,n,i);var a=n.filter;var s;var o;if(n.filterParsed&&n.filterParsed.isSupported){s=n.filterParsed.filterSql}else{a=e.offline.convertReadRecordsFilter(n,t);s=a&&a.isSupported?a.filterSql:""}o=_.compact([s,r,i.andSql]).join(" AND ");return o?"WHERE "+o:""};c.buildSearchQuery=function(t,r,a){if(!r.q){return""}var s=r.q.indexOf("?")!==-1||r.q.indexOf("*")!==-1;r.q=n(r.q.trim());var o=_.map(e.offline.storage.offlineMeta[t].searchFields,function(e){return s||i(e)?e.name+" "+(s?"GLOB":"LIKE")+" '"+(r.q+(s?"*":"%"))+"'":e.name+" ='"+r.q+"'"}).join(" OR ");return o?"("+o+")":""};c.buildFilterQuery=function(t,n){if(!n){return}var i=new e.offline.SqlFilterBuilder(t);var r=i.buildSql(n);var a=i.getExtractedFields();return{sql:r,fields:a}};c.buildOrderBy=function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!n.order_by){return"_client_date_modified DESC"}var i=n.order_by.replace(/\b(?!_client_)date_modified\b/g,"_client_date_modified").replace(/\bemail\b/g,"email1");var r=/\bname\b/g;if(r.test(i)){var a=e.metadata.getModule(t,"fields").name;if(a.group){i=i.replace(r,a.group)}}return i.replace(/:/g," ")};c.relationships={getCreateSchemaStatements:function y(t){var n=[];_.each(t,function(t){if(t.type===e.offline.storage.relTypes.MANY_TO_MANY){n.push(e.utils.formatString('DROP TABLE IF EXISTS "{0}"',[t.relationshipTable]));var i="";var r=t.additionalColumns;if(!_.isEmpty(r)){var a=[];_.each(r,function(t,n){a.push(e.utils.formatString('"{0}" TEXT COLLATE NOCASE',[n]))},this);i=a.join(",")}if(t.primaryFlagModule){i+='"primary_flag" INTEGER DEFAULT 0'}var s='CREATE TABLE "{0}" ("{1}" TEXT COLLATE NOCASE, "{2}" TEXT COLLATE NOCASE, "_client_date_modified" TEXT COLLATE NOCASE, "_deleted" INTEGER DEFAULT 0,{3} PRIMARY KEY ("{1}","{2}"))';s=s.replace(/\{0\}/g,t.relationshipTable);s=s.replace(/\{1\}/g,t.parentIdColumn);s=s.replace(/\{2\}/g,t.childIdColumn);s=s.replace(/\{3\}/g,i?i+",":"");n.push(s)}},this);n.push.apply(n,u(t));return n},_getRelColumnsAliasSql:function b(t){var n="";if(!_.isEmpty(t.additionalColumns)){n+=",";var i=[];_.each(t.additionalColumns,function(t,n){i.push(e.utils.formatString("r.{0} AS {1}",[n,t]))},this);n+=i.join(",")}return n},buildSqlSelectSingleRelated:function x(t,n){var i=e.offline.storage.getRelationshipByLink(t,n.link);var r=i.type;if(r===e.offline.storage.relTypes.MANY_TO_MANY){var a=this._getRelColumnsAliasSql(i);var s=e.utils.formatString('SELECT d.*,r.*{0} FROM {1} AS d JOIN {2} AS r ON (d.id=r.{3} AND r.{5}="{6}") WHERE (d._deleted=0 AND r._deleted=0 AND d.id="{4}")',[a,n.relatedModule,i.relationshipTable,i.childIdColumn,n.relatedId,i.parentIdColumn,n.id]);if(i.singleModule){var o=e.utils.formatString('SELECT d.*,r.*{0} FROM {1} AS d JOIN {2} AS r ON (d.id=r.{3} AND r.{5}="{6}") WHERE (d._deleted=0 AND d.id="{4}")',[a,n.relatedModule,i.relationshipTable,i.parentIdColumn,n.relatedId,i.childIdColumn,n.id]);s=s+" UNION "+o}return s}else{return e.utils.formatString('SELECT * FROM {0} WHERE id="{1}" AND _deleted=0',[n.relatedModule,n.relatedId])}},buildSqlSelectManyRelated:function w(t,n,i){var r=e.offline.storage.getRelationshipByLink(t,n.link);var a=e.offline.storage.relTypes;var s=void 0;var o=void 0;if(r.type===a.MANY_TO_MANY){var l='(r._deleted=0 AND d._deleted=0 AND r.{4}="{5}")'+(n.relatedIds?' AND (d.id IN ("'+n.relatedIds.join('","')+'")) ':"");var u=this._getRelColumnsAliasSql(r);var d=c.buildWhere(r.childModule,i,{andSql:l});var f="SELECT d.*,r.*{6} FROM {0} AS r JOIN {1} AS d ON r.{2}=d.id "+d;o=r.parentModule;s=e.utils.formatString(f,[r.relationshipTable,o,r.childIdColumn,r.childIdColumn,r.parentIdColumn,n.id,u]);if(r.singleModule){o=r.childModule;var h=e.utils.formatString(f,[r.relationshipTable,o,r.parentIdColumn,r.childIdColumn,r.childIdColumn,n.id,u]);s+=" UNION "+h}}else if(r.type===a.ONE_TO_MANY||r.type===a.ONE_TO_MANY_BY_ROLE_COLUMN){var p="SELECT * FROM {0} ";var m='({1}="{2}" AND _deleted=0)'+(n.relatedIds?' AND (id IN ("'+n.relatedIds.join('","')+'")) ':"");var _=c.buildWhere(r.childModule,i,{andSql:m});o=r.childModule;s=e.utils.formatString(p+_,[o,r.parentIdColumn,n.id])}if(!n.relatedIds){var g=i.offset||0;var v=i.max_num||e.config.maxQueryResult;var y=r.type===a.MANY_TO_MANY?c.buildOrderBy(o,i.order_by?i:{order_by:"d._client_date_modified:DESC, d._last_fetched:ASC"}):c.buildOrderBy(o,i);s+=" ORDER BY "+y+" LIMIT "+g+","+v}return s},buildSqlReplaceRelationship:function L(t,n,i){i=i||{};var r=n.relDef||e.offline.storage.getRelationshipByLink(t,n.link);var a=r.type;if(a===e.offline.storage.relTypes.ONE_TO_MANY||a===e.offline.storage.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN){if(!n.id||i.skipUpdateRelRecord){return}var s=i.ts?e.utils.formatString(', _client_date_modified="{0}"',[i.ts]):"";var o=r.parentNameFieldDef;if(o&&n.related&&_.isEmpty(n.related[o.name])){s+=e.utils.formatString(', {0}=(SELECT {1} FROM {2} WHERE id="{3}")',[o.name,"name",t,n.id]);if(_.isEmpty(n.related.parent_type)&&a===e.offline.storage.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN){s+=e.utils.formatString(', parent_type="{0}"',[t])}}return e.utils.formatString('UPDATE {0} SET {1}="{2}"{3} WHERE id="{4}"',[r.childModule,r.parentIdColumn,n.id,s,n.relatedId])}else{var l='REPLACE INTO "{0}" ({1}) VALUES ({2})';var u=[];var c;c=[r.parentIdColumn,r.childIdColumn,"_client_date_modified","_deleted"];if(!n.id&&r){n.id=n.related[r.parentIdColumn]}if(!n.id){return}var d=[n.id,n.relatedId,i.ts||e.utils.getTimestamp(),0];_.each(r.additionalColumns,function(e,t){if(n.related&&!_.isEmpty(n.related[e])){c.push(t);d.push(n.related[e])}});if(r.primaryFlagModule){if(n.id){c.push("primary_flag");d.push(1);u.push({sql:e.utils.formatString('UPDATE "{0}" SET "{3}"={4} WHERE {1}="{2}"',[r.relationshipTable,r.childIdColumn,n.relatedId,"primary_flag","0"])})}}c='"'+c.join('","')+'"';d='"'+d.join('","')+'"';if(r.originalType===e.offline.storage.relTypes.ONE_TO_MANY){u.push({sql:e.utils.formatString('DELETE FROM "{0}" WHERE {1}="{2}"',[r.relationshipTable,r.childIdColumn,n.relatedId])})}else if(r.originalType===e.offline.storage.relTypes.ONE_TO_ONE){u.push({sql:e.utils.formatString('DELETE FROM "{0}" WHERE {1}="{2}"',[r.relationshipTable,r.parentIdColumn,n.id])})}u.push({sql:e.utils.formatString(l,[r.relationshipTable,c,d])
});if(e.offline.storage._shouldCustomRelUpdateChild(r,i)){var f=r.primaryFlagModule?e.metadata.getModule(r.primaryFlagModule):null;var h=f?e.data.getRelateFields(r.primaryFlagModule,r.link)[0]:e.data.getRelateFields(r.childModule,r.name)[0];if(h){[].push.apply(u,this.buildCustomRelUpdateChild(h,r,n,false))}}return u}},buildDeleteRelationship:function S(t,n,i){i=i||{};var r=n.relDef||e.offline.storage.getRelationshipByLink(t,n.link);var a=r.type;var s;if(a===e.offline.storage.relTypes.ONE_TO_MANY||a===e.offline.storage.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN){if(i.skipUpdateRelRecord){return}var o=i.ts?',_client_date_modified="'+i.ts+'"':"";if(a===e.offline.storage.relTypes.ONE_TO_MANY){var l=r.parentNameFieldDef;if(l){s="UPDATE {0} SET {1}=NULL, "+l.name+'=NULL {3} WHERE id="{2}"'}else{s='UPDATE {0} SET {1}=NULL {3} WHERE id="{2}"'}}else{s='UPDATE {0} SET parent_type=NULL, parent_name=NULL, {1}=NULL {3} WHERE id="{2}"'}return e.utils.formatString(s,[r.childModule,r.parentIdColumn,n.relatedId,o])}else{var u=[];if(!n.id&&r){n.id=n.related[r.parentIdColumn]||i.initialState&&i.initialState[r.parentIdColumn]}if(!n.id){return}if(r.singleModule){var c;if(i.hardDelete){s='DELETE FROM {0} WHERE (({1}="{2}" AND {3}="{4}") OR ({3}="{2}" AND {1}="{4}"))';c=s.replace(/\{0\}/g,r.relationshipTable).replace(/\{1\}/g,r.parentIdColumn).replace(/\{2\}/g,n.id).replace(/\{3\}/g,r.childIdColumn).replace(/\{4\}/g,n.relatedId)}else{s='UPDATE {0} SET _deleted=1,_client_date_modified="{5}" WHERE (({1}="{2}" AND {3}="{4}") OR ({3}="{2}" AND {1}="{4}"))';c=s.replace(/\{0\}/g,r.relationshipTable).replace(/\{1\}/g,r.parentIdColumn).replace(/\{2\}/g,n.id).replace(/\{3\}/g,r.childIdColumn).replace(/\{4\}/g,n.relatedId).replace(/\{5\}/g,i.ts||e.utils.getTimestamp())}return c}else{var d=r.primaryFlagModule?", primary_flag=0":"";s=i.hardDelete?'DELETE FROM {0} WHERE {1}="{2}" AND {3}="{4}"':"UPDATE {0} SET _deleted=1"+d+',_client_date_modified="{5}" WHERE {1}="{2}" AND {3}="{4}"';u.push({sql:e.utils.formatString(s,[r.relationshipTable,r.parentIdColumn,n.id,r.childIdColumn,n.relatedId,i.ts||e.utils.getTimestamp()])})}if(r.primaryFlagModule){u.push({sql:'UPDATE {0} SET primary_flag=1 WHERE {1}="{2}" AND _client_date_modified=(SELECT MAX(_client_date_modified) FROM {0} WHERE {1}="{2}" AND _deleted=0)'.replace(/\{0\}/g,r.relationshipTable).replace(/\{1\}/g,r.childIdColumn).replace(/\{2\}/g,n.relatedId)})}if(e.offline.storage._shouldCustomRelUpdateChild(r,i)){var f=r.primaryFlagModule?e.data.getRelateFields(r.primaryFlagModule,r.link)[0]:e.data.getRelateFields(r.childModule,r.name)[0];if(f){[].push.apply(u,this.buildCustomRelUpdateChild(f,r,n,true))}}return u}},buildCustomRelUpdateChild:function E(t,n,i,r){var a=n.originalType===e.offline.storage.relTypes.ONE_TO_ONE;var s;var o;var l;var u;var c;var d;var f;var h;var p=[];if(a){s=n.parentIdColumn;o=n.childIdColumn;l=n.childModule;u=n.parentModule;c=r?"":i.relatedId;d=i.id}else{s=n.childIdColumn;o=i.relatedModule?n.parentIdColumn:n.childIdColumn;l=n.parentModule;u=n.childModule;c=r?"":i.id;d=i.relatedId}f=r?"''":e.utils.formatString("(SELECT name FROM {0} WHERE id='{1}')",[u,c]);h="UPDATE {0} SET {1}={2}, {3}='{4}' WHERE id='{5}'";if(a&&!r){var m="(SELECT {0} FROM {1} WHERE id='{2}')";var _="UPDATE {0} SET {1}={2}, {3}='{4}' WHERE id={5}";var g=e.utils.formatString(m,[o,l,d]);var v=e.utils.formatString(m,[s,u,c]);var y=e.utils.formatString(m,["name",u,c]);p.push({sql:e.utils.formatString(_,[u,t.name,"''",s,"",g])});p.push({sql:e.utils.formatString(_,[l,t.name,"''",o,"",v])});p.push({sql:e.utils.formatString(h,[l,t.name,y,o,c,d])})}else if(n.primaryFlagModule){c=e.utils.formatString('(SELECT {0} FROM {1} WHERE {2}="{3}" AND primary_flag=1 AND _deleted=0)',[o,n.relationshipTable,n.childIdColumn,i.relatedId]);f=e.utils.formatString("(SELECT name FROM {0} WHERE id={1})",[t.module,c]);var b="UPDATE {0} SET {1}={2} WHERE id='{3}'";var x="UPDATE {0} SET {1}={2} WHERE id='{3}' AND {4}";var w=e.utils.formatString("EXISTS (SELECT id FROM {0} WHERE id={1})",[u,c]);p.push({sql:e.utils.formatString(x,[l,t.name,f,d,w])});p.push({sql:e.utils.formatString(b,[l,o,c,d])})}else{p.push({sql:e.utils.formatString(h,[l,t.name,f,o,c,d])})}return p},buildSqlUpdateChildren:function k(t,i){var r=[];var a=e.offline.storage._getModuleRelationships(t);var s=_.filter(a,function(n){return n.type!==e.offline.storage.relTypes.MANY_TO_MANY&&n.parentModule===t},this);_.each(s,function(t){if(t.parentNameFieldDef){r.push(e.utils.formatString("UPDATE {0} SET {1}='{2}' WHERE {3}='{4}'",[t.childModule,t.parentNameFieldDef.name,n(i.name),t.parentIdColumn,i.id]))}},this);return r.length>0?r:null},buildSqlCleanRelationships:function T(t,n,i){i=i||{};var r;var a={};var s=[];var o;var l;r=e.offline.storage._getModuleRelationships(t);_.each(r,function(r){if(r.type!==e.offline.storage.relTypes.MANY_TO_MANY){if(i.skipOneToManyChildren){return}if(r.parentModule===t){var u=r.childModule;o=r.parentIdColumn;l=e.metadata.getModule(u);if(l.fields[o]){a[u]=a[u]||{};a[u][o]="parent_id"}}}else{var c=r.relationshipTable;o=r.parentIdColumn;s.push(e.utils.formatString('DELETE FROM {0} WHERE {1}="{2}"',[c,o,n.id]))}},this);_.each(a,function(t,n){var i=e.metadata.getModule(n).fields;var r;_.each(t,function(i,r){var a=e.data.getRelatedNameField(n,r);if(a){t[a.name]="parent_name"}});r=_.keys(t);if(_.contains(r,"parent_id")&&_.contains(r,"parent_name")&&i.parent_type){t.parent_type="parent_type"}});_.each(a,function(t,i){var r=[];var a=[];var o="UPDATE {0} SET {1} WHERE {2}";_.each(t,function(e,t){r.push(t+"=NULL");if(e==="parent_id"){a.push(t+'="'+n.id+'"')}});r=r.join(",");a=a.join(" OR ");s.push(e.utils.formatString(o,[i,r,a]))});return s}};c.init=function(e){};c.getDropTableStatement=function(e){return"DROP TABLE "+e};c.getSelectTablesStatement=function(){return"SELECT tbl_name FROM sqlite_master WHERE type='table' AND tbl_name<>'__WebKitDatabaseInfoTable__'"};c.getDropTableStatements=function(e){return _.map(e,function(e){return c.getDropTableStatement(e)})};c.getAlterTableStatement=function(t,n){var i=n.name;var r=c.getSqlTypeByMetaType(n.type);return e.utils.formatString('ALTER TABLE {0} ADD COLUMN "{1}" {2}',[t,i,r])};c.getResetDateModifiedStatement=function(t,n){return e.utils.formatString('UPDATE {0} SET _client_date_modified=date_modified WHERE id="{1}"',[t,n.id])};c.getStatsRetrieveStatements=function(e){var t="(SELECT COUNT(*) FROM {0}) AS {0}"+(e.includeRecents?",(SELECT COUNT(*) FROM {0} JOIN _view_dates ON {0}.id=_view_dates.bean_id) AS {0}_Viewed":"");var n=_.map(e.modules,function(e){return t.replace(/\{0\}/g,e)});return"SELECT "+n.join(", ")};c.transactionLog={getCreateSchemaStatements:function M(){var e=[];e.push('DROP TABLE IF EXISTS "_tx_log"');e.push('CREATE TABLE "_tx_log" ("_tx_uid" TEXT COLLATE NOCASE PRIMARY KEY, "_tx_action" INTEGER, "_tx_ts" TEXT COLLATE NOCASE, "_tx_bean_id" TEXT COLLATE NOCASE,"_tx_bean_module" TEXT COLLATE NOCASE, "_tx_related_id" TEXT COLLATE NOCASE, "_tx_related_module" TEXT COLLATE NOCASE, "_tx_updated_fields" TEXT COLLATE NOCASE, "_tx_link" TEXT COLLATE NOCASE, "_tx_error" TEXT COLLATE NOCASE, "_tx_error_count" INTEGER DEFAULT 0)');e.push("DROP INDEX IF EXISTS _tx_log_ts_IDX");e.push('CREATE INDEX _tx_log_ts_IDX ON "_tx_log" ("_tx_ts")');e.push("DROP INDEX IF EXISTS _tx_log_bean_id_IDX");e.push('CREATE INDEX _tx_log_bean_id_IDX ON "_tx_log" ("_tx_bean_id" COLLATE NOCASE)');return e},getCountAssociatedTransactionsStatements:function A(t){return e.utils.formatString('SELECT COUNT(*) AS count FROM _tx_log WHERE _tx_bean_id="{0}" AND _tx_uid!="{1}"',[t._tx_bean_id,t._tx_uid])},getReadTransactionsStatements:function C(t){var n="ORDER BY ";if(t.errFirst){n+='"_tx_error_count" = 0, '}n+='"_tx_ts" '+(t.dateAsc?"ASC":"DESC");return e.utils.formatString('SELECT * FROM "_tx_log" {0} LIMIT ?,?',[n])},sqlTxLogAction:'INSERT INTO "_tx_log" ("_tx_action", "_tx_ts", "_tx_bean_id", "_tx_bean_module", "_tx_related_id", "_tx_related_module", "_tx_updated_fields", "_tx_uid", "_tx_link") VALUES (?,?,?,?,?,?,?,?,?)',updateTransaction:function R(t,n){var i=[];_.each(n,function(e,t){i.push(t+"="+"'"+e+"'")});return e.utils.formatString("UPDATE _tx_log SET "+i.join(",")+" WHERE _tx_uid='{0}'",[t])},getTxLog:'SELECT * FROM "_tx_log" WHERE _tx_uid = ?',_deleteTransaction:"DELETE FROM _tx_log WHERE _tx_uid = ?",clearTransactionLog:"DELETE FROM _tx_log",countTransactions:"SELECT (SELECT COUNT(*) FROM _tx_log WHERE _tx_error in ("+e.offline.TRANSACTION_STATUSES.UNRECOVERABLE.join(",")+")) AS failedTransactions, (SELECT COUNT(*) FROM _tx_log) AS totalTransactions"};c.lastViewed={buildRead:function D(e){return'SELECT * FROM "_view_dates" ORDER BY "date_last_viewed"'+(e?"":"DESC")+" LIMIT ?"},buildReadForRecords:function I(e){return'SELECT * FROM "_view_dates" WHERE "bean_id" IN ("'+e.join('","')+'")'},buildReadForModule:function O(e){return'SELECT "'+e+'".*, "_view_dates"."date_last_viewed" as "_last_viewed_date" FROM "'+e+'" INNER JOIN "_view_dates" ON "_view_dates"."bean_id" = "'+e+'"."id" WHERE _deleted=0 ORDER BY "_view_dates"."date_last_viewed" DESC LIMIT ?'},getCreateSchemaStatements:function N(){var e=[];e.push('DROP TABLE IF EXISTS "_view_dates"');e.push('CREATE TABLE "_view_dates" ("bean_id" TEXT COLLATE NOCASE PRIMARY KEY, "bean_module" TEXT COLLATE NOCASE, "date_last_viewed" TEXT COLLATE NOCASE)');return e},buildReplace:function F(t,n,i){var r=i.ts||e.utils.getTimestamp();var a=_.isArray(n)?_.map(n,function(e){return'("'+e.id+'","'+e.module+'","'+(e.ts||r)+'")'}).join():'("'+n.id+'","'+t+'","'+r+'")';return'REPLACE INTO "_view_dates" ("bean_id","bean_module", "date_last_viewed") VALUES '+a},buildDelete:function B(e){e=_.map(e,function(e){return"'"+e.id+"'"});return"DELETE FROM _view_dates WHERE bean_id IN ("+e.join()+")"},buildFindViewedBefore:function P(t,n){var i=n.expirationDate,r=n.includeUserRecords,a=n.limit;var s=e.user.get("id");var o="SELECT name, id"+(" FROM "+t+" AS d LEFT JOIN _view_dates AS v on d.id=v.bean_id");if(i){o+=' WHERE (v.date_last_viewed IS NULL OR v.date_last_viewed < "'+i+'")'}if(!r){o+=" AND my_favorite = 0"+" AND following = 0"+(' AND assigned_user_id <> "'+s+'"')}o+=" ORDER BY v.date_last_viewed ASC";if(a){o+=" LIMIT "+a}return o},buildCleanupMyModule:function U(t){return e.utils.formatString('DELETE FROM _view_dates WHERE bean_module="{0}"',[t])}};c.sync={getCreateSchemaStatements:function Y(){var e=[];e.push('DROP TABLE IF EXISTS "_to_be_synced"');e.push('CREATE TABLE "_to_be_synced" ("bean_id" TEXT COLLATE NOCASE PRIMARY KEY, "bean_module" TEXT COLLATE NOCASE, "action" TEXT COLLATE NOCASE)');return e},getMarkToBeSyncedSql:function H(t,n){return e.utils.formatString('REPLACE INTO "_to_be_synced" ("bean_id","bean_module", "action") VALUES ("{0}","{1}","{2}")',[n.record.id,t,n.action])},getResetToBeSyncedSql:function G(e,t){var n=_.pluck(t.records,"id");return'DELETE FROM "_to_be_synced" WHERE "bean_id" IN ("'+n.join('","')+'")'},getReadToBeSyncedSql:function j(t,n,i){var r=e.utils.formatString('SELECT * FROM "_to_be_synced" WHERE bean_module="{0}" ORDER BY bean_id',[t]);if(!_.isUndefined(i.offset)){r+=e.utils.formatString(" LIMIT {0},{1}",[i.offset,i.max_num])}return r}};c.upgrade={getUpgrade1Sql:function V(t){var n=[];_.each(t.relationships,function(t){if(t.primary_flag_column){n.push(e.utils.formatString('ALTER TABLE {0} ADD COLUMN "primary_flag" INTEGER DEFAULT 0',[t.join_table]))}});Array.prototype.push.apply(n,c.sync.getCreateSchemaStatements());return n},getUpgrade3Sql:function z(t){var n=[];function r(t,r){n.push(s(r,"date_modified"));var a=_.pluck(e.offline.storage.offlineMeta[r].searchFields,"name");_.each(t.fields,function(e){if(!e){return}var t=false;if(e.unified_search){t=!(_.contains(a,e.name)&&i(e))}if(e.name==="name"&&!_.contains(a,"name")){t=true}if(t){n.push(s(r,e.name))}})}_.each(t.modules,function(e,t){r(e,t);n.push.apply(n,o(t,e));n.push.apply(n,l(t))});n.push.apply(n,u(e.offline.storage.offlineMeta.relationships));n.push("ANALYZE");return n}};e.offline.SqlHelper=c})(SUGAR.App)},function(e,t){"use strict";(function(e){function t(){throw new Error("Not implemented. Please override this method with your implementation")}var n={createTransaction:"offline:tx:create",deleteTransaction:"offline:tx:delete"};e.offline.storage={_regularSyncOperations:["create","update","favorite","delete","follow"],relTypes:{ONE_TO_ONE:"one-to-one",ONE_TO_MANY:"one-to-many",MANY_TO_MANY:"many-to-many",ONE_TO_MANY_BY_ROLE_COLUMN:"one-to-many-byRoleColumn"},offlineMeta:{},_execQueue:null,_migrationSummary:{},getMigrationSummary:function i(){return this._migrationSummary},resetMigrationSummary:function r(){this._migrationSummary={}},exec:function a(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_.noop;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_.noop;var a=function s(t){r(t);e.trigger("offline:failure",t)};if(!e.offlineEnabled){a(e.offline.Error.OfflineDisabledError);return}if(!_.isArray(t)){t=[t]}this._exec(t,function o(r){i(r);_.each(t,function(t){var i=n[t.op];if(i){e.trigger(i,{txOptions:t.options})}})},function l(t){t=e.offlineEnabled?t||e.offline.Error.UnknownError:e.offline.Error.OfflineDisabledError;a(t)})},_exec:function s(e,n,i){t()},execAndSpecificReturn:function o(t,n){var i=!_.isEmpty(n)&&n.regularSync;var r=n.dbSuccess;if(i&&_.contains(this._regularSyncOperations,n.method)){if(n.method!=="delete"){t.unshift({op:"createTransaction",data:n.data,module:n.module,options:n});t.push({op:"readSingle",data:n.data,module:n.module,options:n})}else{t.push({op:"readSingle",data:n.data,module:n.module,options:_.extend(n,{readDeleted:true})});n.dbSuccess=function(e){r.call(this,e?{id:e.id}:{id:n.data.id})}}if(n.relate){t.push({op:"readSingleRelated",data:n.data,module:n.module,options:n});n.dbSuccess=function(e){r.call(this,{record:e[0],related_record:e[1]})}}var a=n.action===e.offline.SYNC_ACTIONS.LINK||n.action===e.offline.SYNC_ACTIONS.UNLINK;if(!a){t.push({op:"updateLastViewed",data:n.relate?{id:n.data.relatedId}:n.data,module:n.relate?n.data.relatedModule:n.module,options:n})}if(n.method!=="delete"){t.push({op:"markToBeSynced",data:{action:"update",record:{id:n.relate?n.data.relatedId:n.data.id}},module:n.relate?n.data.relatedModule:n.module})}}this.exec(t,n.dbSuccess,n.dbFailure)},_executeSynchronized:function l(e){this._execQueue.push(e)},init:function u(e){this.computeOfflineMeta(e);this._init(e);if(!this._execQueue){this.initExecQueue()}},initExecQueue:function c(){var e=this;this._execQueue=async.queue(function(t,n){t.call(e,n)},1)},_init:function d(e){},computeOfflineMeta:function f(e){_.each(e.modules,function(e,t){this.offlineMeta[t]={}},this);this.prepareOfflineRelationships(e.relationships);this.offlineMeta.modules=e.modules;_.each(e.modules,function(t,n){var i=this.offlineMeta[n];i.fields=this._getOfflineModuleFields(t,i);i.searchFields=this.getOfflineModuleSearchFields(n,e)},this)},_getOfflineModuleFields:function h(e,t){var n=_.pluck(e.fields,"name");var i=_.union(["date_modified"],t.oneToManyRelFields,n);var r=[{type:"boolean",name:"my_favorite"},{type:"boolean",name:"following"},{type:"date",name:"_last_fetched"}];var a=_.where(e.fields,{link_type:"relationship_info"});_.each(a,function(e){_.each(e.relationship_fields,function(e,n){t.fieldsBlacklist=t.fieldsBlacklist||[];if(n!=="id"&&!_.contains(t.fieldsBlacklist,e)){t.fieldsBlacklist.push(e)}})});_.each(e.fields,function(e){if(_.isObject(e)&&e.type!=="link"&&e.name!=="id"&&!_.contains(t.fieldsBlacklist,e.name)&&!_.findWhere(r,{name:e.name})&&_.contains(i,e.name)){r.push(e)}},this);return r},getOfflineModuleSearchFields:function p(t,n){n=n||e.metadata.get();var i=n.modules[t];var r=this.offlineMeta[t];var a=["assigned_user_id","modified_user_id","created_by"];var s=_.getNested(n,"server_info.fts.enabled");return _.select(r.fields,function(e){var t=void 0;if(s&&i.ftsEnabled){var n=e.full_text_search;if(n){t=_.isUndefined(n.searchable)?e.unified_search:n.searchable}}else{t=e.unified_search}return t&&!_.contains(a,e.name)})},prepareOfflineRelationships:function m(e){var t={};_.each(e,function(e,n){if(n==="_hash"||e.relationship_type==="user-based"){return false}var i=this.getRelationshipType(e);var r=i===this.relTypes.ONE_TO_MANY||i===this.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN?"_wrapOneToManyRelationship":"_wrapManyToManyRelationship";t[n]=this[r](e,i);t[n].type=i},this);this.offlineMeta.relationships=_.extend({},this.offlineMeta.relationships,t)},getRelationshipType:function g(e){if(!_.isEmpty(e.join_table)){return this.relTypes.MANY_TO_MANY}else if(_.isEmpty(e.join_table)&&_.isEmpty(e.relationship_role_column)){return this.relTypes.ONE_TO_MANY}else if(_.isEmpty(e.join_table)&&!_.isEmpty(e.relationship_role_column)){return this.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN}},getRelationshipByLink:function v(t,n){var i=e.metadata.getModule(t).fields[n].relationship;return this.getAdjustedRelationship(t,i)},getAdjustedRelationship:function y(e,t){var n=this.offlineMeta.relationships[t];if(!n){return null}var i=n.type===this.relTypes.MANY_TO_MANY&&e===n.parentModule;if(i){n=_.extend({},n,{parentModule:n.childModule,childModule:n.parentModule,parentIdColumn:n.childIdColumn,childIdColumn:n.parentIdColumn})}return n},getCUTransactionParams:function b(t,n,i){var r;var a;var s;var o;var l=null;var u=null;var c=i.txId||e.utils.generateUUID();var d=e.utils.getTimestamp(null,{msecPrecision:true});if(i.relate){r=n.relatedId;a=n.relatedModule;s=n.id;o=t;l=n.link;if(i.action===e.offline.SYNC_ACTIONS.UNLINK){u={before:{module:n.relatedModule,id:n.relatedId},after:null}}else if(i.action===e.offline.SYNC_ACTIONS.LINK){var f=this.getRelationshipByLink(t,n.link);if(f.type===this.relTypes.MANY_TO_MANY){u={before:null,after:{module:n.relatedModule,id:n.relatedId}}}else{var h=i.initialState[f.parentIdColumn];var p=f.type===this.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN;if(h){u={before:{module:p?i.initialState.parent_type:t,id:p?i.initialState.parent_id:i.initialState[f.parentIdColumn]},after:{module:n.relatedModule,id:n.relatedId}}}else{u={before:null,after:{module:n.relatedModule,id:n.relatedId}}}}}else{u=e.offline.utils.getBeforeAndAfter(n.related,i.initialState)}}else{r=n.id;a=t;s=null;o=null;if(i.action!==e.offline.SYNC_ACTIONS.DELETE){u=e.offline.utils.getBeforeAndAfter(n,i.initialState)}}if(u){u=JSON.stringify(u)}return[i.action,d,r,a,s,o,u,c,l]},_wrapOneToManyRelationship:function x(t,n){var i=this._getParentModule(t);var r=this._isParentOnRight(i,t);var a=r?t.lhs_key:t.rhs_key;var s=r?t.lhs_module:t.rhs_module;var o=this.offlineMeta[s];var l="parent_type";o.oneToManyRelFields=o.oneToManyRelFields||[];if(!_.contains(o.oneToManyRelFields,a)){o.oneToManyRelFields.push(a)}if(n===this.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN&&!_.contains(o.oneToManyRelFields,l)){o.oneToManyRelFields.push(l)}return{name:t.name,parentModule:i,childModule:s,parentIdColumn:a,parentNameFieldDef:e.data.getRelatedNameField(s,a)}},_wrapManyToManyRelationship:function w(t){var n=this._getParentModule(t);var i=this.offlineMeta[n];var r=this._isParentOnRight(n,t);var a=r?t.lhs_module:t.rhs_module;var s=r?t.lhs_table:t.rhs_table;var o=e.metadata.getModule(n,"fields");var l={};var u=_.findWhere(o,{link_type:"relationship_info",link:s});if(u){l=_.omit(u.relationship_fields,"id")}var c={name:t.name,parentModule:n,relationshipTable:t.join_table,childModule:a,childIdColumn:r?t.join_key_rhs:t.join_key_lhs,parentIdColumn:r?t.join_key_lhs:t.join_key_rhs,childKey:r?t.lhs_key:t.rhs_key,parentKey:r?t.rhs_key:t.lhs_key,additionalColumns:l,singleModule:t.lhs_module===t.rhs_module,originalType:t.relationship_type};if(t.primary_flag_column){c.primaryFlagModule=t.primary_flag_side==="rhs"?t.lhs_module:t.rhs_module;c.link=t[t.primary_flag_side+"_table"]}return c},_isParentOnRight:function L(e,t){var n=this.getRelationshipType(t);if(n===this.relTypes.MANY_TO_MANY){return e===t.rhs_module}else{return t.rhs_key==="id"}},_getModuleRelationships:function S(t){var n=e.metadata.getModule(t);var i=e.offline.utils.getOfflineModules();var r=[];_.each(n.fields,function(e){if(e.type==="link"){var n=this.getAdjustedRelationship(t,e.relationship);if(n&&_.contains(i,n.parentModule)&&_.contains(i,n.childModule)){r.push(n)}}},this);return r},_shouldCustomRelUpdateChild:function E(e,t){return e.originalType===this.relTypes.ONE_TO_MANY&&!t.skipUpdateRelRecord||e.originalType===this.relTypes.ONE_TO_ONE||!!e.primaryFlagModule},_getParentModule:function k(e){return e.rhs_key==="id"?e.rhs_module:e.lhs_module},openDb:function T(e,n,i){t()},migrate:function M(e,n,i){t()},isEncryptionSupported:function A(){return false},encrypt:function C(e,n){t()},upgrade:function R(t,n,i){i=i||{};var r=parseInt(this.getSqlStorageVersion(),10);var a=parseInt(e.cache.get("offline:version"),10);var s=[];var o=i.success||_.noop;var l=i.error||_.noop;if(!Boolean(r-a)){e.logger.debug("Version has not changed. No actual upgrade required");o(t,n);return}n=this._getUpgradedMeta(n);for(;r>a;a++){if(this._upgrade[a]){s.push.apply(s,this._upgrade[a](t))}}if(_.isEmpty(s)){e.logger.debug("Storage structure has not changed");o(t,n)}else{this._runUpgrade(s,function u(){o(t,n)},function c(e){l(e)})}},_runUpgrade:function D(e,n,i){t()},_getUpgradedMeta:function I(t){var n={modules:{},relationships:t.relationships,siteUrl:t.siteUrl,_hash:t.hash||t._hash,_userId:t.userId||t._userId};delete t.relationships;delete t.hash;delete t.userId;_.chain(t).omit(e.config.offline.exclude).each(function(e,t){n.modules[t]={_hash:e.hash,fields:{_hash:e.fieldsHash}}});return n},drop:function O(e){t()},getDetails:function N(){return{type:e.config.offline.storageAdapter}},isOutOfSpace:function F(e){this._isOutOfSpace(e)},open:function B(t){t=_.extend({env:"dev",name:"sidecar",size:5,version:"1.0"},t);var n=t.name+"-"+t.env;var i=t.size*1024*1024;var r=t.version;try{this._db=this.openDb(n,r,i)}catch(a){e.logger.fatal("Failed to open database: "+n+" "+r+" ("+i+" bytes). "+a);return false}return true},isOpened:function P(){return Boolean(this._db)},sync:function U(t,n,i,r){this._executeSynchronized(function(a){var s=this;e.logger.trace("storageAdapter: "+t+"-"+i+(n&&n.id?"-"+n.id:""));r=_.extend({regularSync:true,method:t,dbSuccess:function l(e){a();if(r.success)r.success(e);if(r.complete)r.complete(e)},dbFailure:function u(e){a();if(r.error)r.error(e);if(r.complete)r.complete(e)}},r||{});switch(t){case"read":r.dbSuccess=function c(e){a();if(r.success){e=s._parseReadSuccessResponse(n,i,e,r)}if(r.complete)r.complete(e)};var o=n&&n.link?n.relatedId:n?n.id:null;if(o){this._readSimpleOrRelated(i,n,r)}else{if(r.relate){this._readManyRelatedRecords(i,n,r)}else if(i==="TxLog"){this._readTxLogRecords(i,n,r)}else{this._readManyRecords(i,r)}}break;case"create":if(r.relate){this._createRelatedRecord(i,n,r)}else{this._createRecord(i,n,r)}break;case"update":if(r.relate){this._updateRelatedRecord(i,n,r)}else{this._updateRecord(i,n,r)}break;case"delete":if(r.relate){this._unlinkRecord(i,n,r)}else if(r.hardDelete){this._hardDelete(i,n,r)}else{this._softDeleteRecord(i,n,r)}break;case"favorite":this._favorite(i,n,r);break;case"follow":this._follow(i,n,r);break;case"search":r.max_num=r.max_num||e.config.maxQueryResult;if(r.module_list.split(",").length>1){r=_.omit(r,"offset");r.max_num=e.config.offline.maxMixedCollectionQueryResult}r.dbSuccess=function d(e){a();if(r.success)r.success(e);if(r.complete)r.complete(e)};this._search(r);break;default:break}})},_parseReadSuccessResponse:function Y(e,t,n,i){if(n){var r=false;if(i.relate){r=_.isEmpty(e.relatedId)}else{r=_.isUndefined(e)}if(r&&!_.isArray(n)){n=[n]}else if(!r&&_.isArray(n)){n=n[0]}}i.success(n);return n},_readTxLogRecords:function H(e,t,n){n=_.extend({limit:n.max_num,count:true,errFirst:true},n||{});this.exec([{op:"readTransactions",bean:null,data:t,options:n}],n.dbSuccess,n.dbFailure)},saveRecords:function G(e){var t=_.isArray(e.serverData)?e.serverData:[e.serverData];var n=this._getSaveRecordsTasks(t,e);var i=function r(t){async.waterfall(n,function(n,i){if(t){t()}e.callback(n,i||{})})};if(e.backgroundMode){i()}else{this._executeSynchronized(i)}},_getSaveRecordsTasks:function j(t,n){var i=this;var r=n.relationshipData;var a=r?r.relatedModule:n.module;var s=r?n.relDef||e.offline.storage.getRelationshipByLink(n.module,r.link):null;var o=s&&s.type===this.relTypes.MANY_TO_MANY;return[function(e){var r=_.groupBy(t,function(e){return e._module||a});var s=[];_.each(r,function(e,t){var i=_.pluck(e,"id");s.push({op:"readModuleRecords",module:t||a,data:{id:i}});if(o){var r=_.extend({},n.relationshipData);r.relatedIds=i;s.push({op:"readManyRelated",module:n.module,data:r,options:{}})}});i.exec(s,function(t){if(t&&!_.isArray(t)){t=[t]}var n={records:t};if(o){n.related={};var i=_.groupBy(t,"id");_.each(i,function(e,t){return n.related[t]=e.length===2})}e(null,n)},e)},function(o,l){var u=o&&o.records;var c=[];_.each(t,function(l){var d=u&&_.findWhere(u,{id:l.id});var f=d&&!e.offline.utils.isDataSynchronized(d);var h=f?n.ignoreRecordDirtiness:!e.offline.utils.checkDatesEqual(d,l)||e.offline.utils.isFavoriteFollowModified(d,l);if(h){var p=e.offline.utils.actionToString(d?e.offline.SYNC_ACTIONS.UPDATE:e.offline.SYNC_ACTIONS.CREATE);if(l.date_modified){l._client_date_modified=l.date_modified}l._last_fetched=e.utils.getTimestamp();c.push({op:p,module:l._module||a,data:l,options:{initialState:d,updateRelatedNames:t.length===1}})}var m=r&&(n.ignoreRecordDirtiness||!f);if(m){switch(d&&s.type){case i.relTypes.ONE_TO_MANY:m=d[s.parentIdColumn]!==r.id;break;case i.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN:m=!(d[s.parentIdColumn]===r.id&&d.parent_type===n.module);break;case i.relTypes.MANY_TO_MANY:m=!(o&&o.related[l.id]);break}if(m){var g=_.extend({},r,{related:l,relatedId:l.id});c.push({op:"createLink",module:n.module,data:g,options:{ts:e.utils.getTimestamp(l.date_modified)}})}}});if(c.length){i.exec(c,function(){return l(null,{isDataUpdated:true})},l)}else{l(null)}}]},resolveSuccess:function V(e){this._executeSynchronized(function(t){this._resolveTransaction({transaction:e.transaction,module:e.module,serverData:e.serverData,relationshipData:e.relationshipData,callback:function n(){t();if(e.callback){e.callback.apply(this,arguments)}}})})},_resolveTransaction:function z(t){var n=t.callback;var i=t.relationshipData;var r=false;var a=false;var s=e.utils.getTimestamp();var o=this;async.waterfall([function l(e){o.exec([{op:"countAssociatedTransactions",options:{txData:t.transaction}}],function(t){r=t&&t.count>0;e()},e)},function u(e){if(!i){e();return}o.exec([{op:"countAssociatedTransactions",options:{txData:{_tx_uid:t.transaction._tx_uid,_tx_bean_id:t.transaction._tx_related_id}}}],function(t){a=t&&t.count>0;e()},e)},function c(e){o.exec([{op:"readSingle",data:{id:t.serverData.id},module:i?i.relatedModule:t.module,options:{readDeleted:true}}],function(t){e(null,t)},e)},function d(n,l){var u=t.transaction;var c=u._tx_action;var d=u._tx_bean_module;if(c===e.offline.SYNC_ACTIONS.CREATE){c=e.offline.SYNC_ACTIONS.UPDATE}var f=[{op:"deleteTransaction",data:null,module:null,options:{txId:u._tx_uid}}];function h(e){f.push({op:"updateValuesSingle",data:_.pick(e,"id","date_modified"),module:d})}if(i){if(c===e.offline.SYNC_ACTIONS.UPDATE||c===e.offline.SYNC_ACTIONS.LINK||c===e.offline.SYNC_ACTIONS.UNLINK){if(!_.isEmpty(i.related)){if(!r){i.related._last_fetched=s;f.push({op:"updateValuesSingle",module:i.relatedModule,data:i.related});f.push({op:"resetDateModified",data:{id:i.related.id},module:i.relatedModule})}else{h(i.related)}}if(i.record&&!a){i.record._last_fetched=s;f.push({op:"updateValuesSingle",module:i.recordModule,data:i.record});f.push({op:"resetDateModified",data:{id:i.record.id},module:i.recordModule})}}if(c===e.offline.SYNC_ACTIONS.UNLINK&&!a&&!r){f.push({op:"deleteLink",module:i.recordModule,data:{id:i.id,link:i.link,related:i.related,relatedId:i.relatedId,relatedModule:i.relatedModule},options:{hardDelete:true}})}}else{if(c===e.offline.SYNC_ACTIONS.DELETE){f.push({op:"hardDelete",module:d,data:t.serverData});f.push({op:"deleteLastViewed",data:t.serverData,module:d})}else if(!r){t.serverData._last_fetched=s;f.push({op:e.offline.utils.actionToString(c),data:t.serverData,module:d});f.push({op:"resetDateModified",data:{id:t.serverData.id},module:d})}else{h(t.serverData)}}o.exec(f,function p(){e.trigger("offline:tx:success",{tx:u});l()},function m(e){l(e)})}],n)},resolveError:function $(t){var n;var i;var r;if(t.nonTransactionResolve&&!(t.error.status===404||t.error.status===403)){t.callback();return}if(!e.utils.isConnectivityError(t.error)&&!t.nonTransactionResolve){e.trigger("offline:tx:error",{tx:t.txLog,errorCode:t.error.status})}switch(t.error.status){case 0:if(t.callback){_.defer(t.callback,t.error)}break;case 409:t.error.record=t.error.record||t.error.payload&&t.error.payload.record||{};var a=t.txLog;var s=e.offline.utils.getOfflineModules();var o=[];if(!_.contains(s,a._tx_bean_module)||_.isEmpty(e.utils.getChangedProps(t.updatedFields,t.error.record))){o.push({op:"deleteTransaction",options:{txId:a._tx_uid}})}else{var l={op:"updateValuesSingle",data:null,module:a._tx_bean_module};o=[l,{op:"updateTransaction",data:{txLog:_.extend(_.clone(a),{_tx_error_count:a._tx_error_count+1,_tx_error:t.error.status})}}]}this._executeSynchronized(function(n){var i=function r(e){n();if(t.callback){t.callback(e)}};if(l){this.exec([{op:"countAssociatedTransactions",options:{txData:a}}],_.bind(function(n){if(n&&n.count>0){l.data=_.pick(t.error.record,"id","date_modified")}else{l.data=e.utils.deepCopy(t.error.record);l.data._last_fetched=e.utils.getTimestamp()}this.exec(o,i,i)},this),i)}else{this.exec(o,i,i)}});break;case 404:if(t.nonTransactionResolve){if(t.nonTransactionResolve.relate){n=[{op:"deleteLink",module:t.nonTransactionResolve.module,data:t.nonTransactionResolve.data}]}else{n=[{op:"hardDelete",module:t.nonTransactionResolve.module,data:{id:t.nonTransactionResolve.id}}]}}else{i=t.txLog._tx_bean_module,r=t.txLog._tx_bean_id;n=[{op:"hardDelete",module:i,data:{id:r}}];n.push({op:"deleteTransaction",data:null,module:null,options:{txId:t.txLog._tx_uid}})}this._executeSynchronized(function(e){this.exec(n,function(){e();if(t.callback){t.callback()}},function(n){e();if(t.callback){t.callback(n)}})});break;case 422:if(t.txLog){n=[{op:"deleteTransaction",data:null,module:null,options:{txId:t.txLog._tx_uid}},{op:"updateValuesSingle",data:{id:t.txLog._tx_bean_id,date_modified:t.txLog._tx_ts,_client_date_modified:t.txLog._tx_ts},module:t.txLog._tx_bean_module}]}this._executeSynchronized(function(e){this.exec(n,function(){e();if(t.callback){t.callback()}},function(n){e();if(t.callback){t.callback(n)}})});break;case 403:var u;if(t.nonTransactionResolve){i=t.relate?t.nonTransactionResolve.data.relatedModule:t.nonTransactionResolve.module;var c=t.relate?t.nonTransactionResolve.data.id:t.nonTransactionResolve.id;u={op:"hardDelete",module:i,data:{id:c},options:{skipRelationshipsClean:true}}}else{u={op:"updateTransaction",data:{txLog:_.extend(t.txLog,{_tx_error_count:++t.txLog._tx_error_count,_tx_error:t.error.status})}}}this._executeSynchronized(function(e){this.exec([u],function(){e();if(t.callback){t.callback(t.nonTransactionResolve?null:t.error)}},function(n){e();if(t.callback){t.callback(n)}})});break;case 500:default:this._executeSynchronized(function(e){this.exec([{op:"updateTransaction",data:{txLog:_.extend(t.txLog,{_tx_error_count:++t.txLog._tx_error_count,_tx_error:t.error.status})}}],function(){e();if(t.callback){t.callback(t.error)}},function(n){e();if(t.callback){t.callback(n)}})});break}},rollbackTransaction:function q(t,n,i){n=n||{};var r=this;this._executeSynchronized(function(a){this.exec([{op:"countAssociatedTransactions",options:{txData:t}}],function(s){n.resetDirty=!s||s.count===0;var o=[{op:"deleteTransaction",options:{txId:t._tx_uid}}];var l;if(t._tx_action===e.offline.SYNC_ACTIONS.UPDATE){l=r._getRollbackUpdateTasks}else if(t._tx_action===e.offline.SYNC_ACTIONS.CREATE){l=r._getRollbackCreateTasks}else if(t._tx_action===e.offline.SYNC_ACTIONS.DELETE){
l=r._getRollbackDeleteTasks}else if(t._tx_action===e.offline.SYNC_ACTIONS.FAVORITE){l=r._getRollbackFavoriteTasks}else if(t._tx_action===e.offline.SYNC_ACTIONS.FOLLOW){l=r._getRollbackFollowTasks}else if(t._tx_action===e.offline.SYNC_ACTIONS.UNLINK){l=r._getRollbackUnlinkTasks}else if(t._tx_action===e.offline.SYNC_ACTIONS.LINK){l=r._getRollbackLinkTasks}l=_.bind(l,r);o=o.concat(l(t,n));r.exec(o,function u(){a();e.trigger("offline:tx:rollback",{tx:t});i()},function c(e){a();i(e)})},function s(e){a();i(e)})})},_getRollbackUpdateTasks:function W(e,t){var n=this._getTxUpdatedFields(e);var i=e._tx_bean_module;var r={id:e._tx_bean_id};_.each(n,function(e,t){r[t]=e.before},this);var a=[{op:"updateValuesSingle",data:r,module:i,options:t}];if(t.resetDirty){a.push({op:"resetDateModified",module:i,data:r})}return a},_getRollbackCreateTasks:function K(e,t){return[{op:"hardDelete",data:{id:e._tx_bean_id},module:e._tx_bean_module,options:t}]},_getRollbackDeleteTasks:function J(e){return[{op:"resetDeletedSingle",data:{id:e._tx_bean_id},module:e._tx_bean_module}]},_getRollbackFavoriteTasks:function X(e,t){var n=this._getTxUpdatedFields(e);var i=e._tx_bean_module;var r={id:e._tx_bean_id,my_favorite:n.my_favorite.before};if(n.following){r.following=n.following.before}var a=[{op:"updateValuesSingle",data:r,module:i,options:t}];if(t.resetDirty){a.push({op:"resetDateModified",module:i,data:{id:e._tx_bean_id}})}return a},_getRollbackFollowTasks:function Z(e,t){var n=this._getTxUpdatedFields(e);var i=e._tx_bean_module;var r=[{op:"updateValuesSingle",data:{id:e._tx_bean_id,following:!!n.following.before},module:i,options:t}];if(t.resetDirty){r.push({op:"resetDateModified",module:i,data:{id:e._tx_bean_id}})}return r},_getRollbackUnlinkTasks:function Q(e,t){var n=[{op:"createLink",module:e._tx_related_module,data:{id:e._tx_related_id,link:e._tx_link,related:{id:e._tx_bean_id},relatedId:e._tx_bean_id,relatedModule:e._tx_bean_module}}];if(t.resetDirty){n.push({op:"resetDateModified",module:e._tx_bean_module,data:{id:e._tx_bean_id}})}return n},_getRollbackLinkTasks:function ee(e,t){var n=this._getTxUpdatedFields(e);var i;if(n.before){i=[{op:"createLink",module:n.before.module,data:{id:n.before.id,link:e._tx_link,related:{id:e._tx_bean_id},relatedId:e._tx_bean_id,relatedModule:e._tx_bean_module}}]}else{i=[{op:"deleteLink",module:e._tx_related_module,data:{id:e._tx_related_id,link:e._tx_link,related:{id:e._tx_bean_id},relatedId:e._tx_bean_id,relatedModule:e._tx_bean_module}}]}if(t.resetDirty){i.push({op:"resetDateModified",module:e._tx_bean_module,data:{id:e._tx_bean_id}})}return i},_getTxUpdatedFields:function te(e){return _.isString(e._tx_updated_fields)?JSON.parse(e._tx_updated_fields):e._tx_updated_fields},readSingleRawRecord:function ne(e,t,n){this._executeSynchronized(function(i){this.exec([{op:"readSingle",data:t,module:e,options:_.extend(n,{readDeleted:true})}],function r(){i();if(n.success){n.success.apply(this,arguments)}},function a(){i();if(n.error){n.error.apply(this,arguments)}})})},readRecordsByIds:function ie(e,t,n){this._executeSynchronized(function(i){this.exec([{op:"readModuleRecords",data:{id:t},module:e}],function r(){i();if(n.success){n.success.apply(this,arguments)}},function a(){i();if(n.error){n.error.apply(this,arguments)}})})},readTransactions:function re(e,t){this._executeSynchronized(function(n){this.exec([{op:"readTransactions",bean:null,data:t,options:e}],function i(t){n();if(e.success){e.success.apply(this,arguments)}},function r(){n();if(e.error){e.error.apply(this,arguments)}})})},getStats:function ae(t){t=t||{};t=_.defaults(t,{modules:e.offline.utils.getOfflineModules(),success:function r(t){e.logger.debug(t)},error:function a(t){e.logger.error("getStats failed. "+t)}});var n={count:{}};var i=this;this._executeSynchronized(function(e){async.series([function r(e){i.getRecordsCount(t,function(t,i){n.count=i;e(t,i)})},function a(e){i.getStorageSize(t,function(t,i){if(!t){_.extend(n,i)}e(t,i)})}],function s(i){e();if(i){t.error(i)}else{t.success(n)}})})},getRecordsCount:function se(e,t){this.exec([{op:"getStats",data:null,module:null,options:e}],function(e){t(null,e)},t)},_NO_STORAGE_INFO:{dbSize:-1,totalDiskSpace:-1,freeDiskSpace:-1},getStorageSize:function oe(e,t){t(null,_.clone(this._NO_STORAGE_INFO))},compact:function le(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},i=n.flushTransactions,r=i===undefined?false:i,a=n.modules,s=n.expirationDate,o=n.callback,l=o===undefined?_.noop:o;var u=Promise.resolve();if(r){u=u.then(function(){return new Promise(function(e,n){t.exec([{op:"clearTransactionLog"}],e,n)})})}this._executeSynchronized(function(n){u.then(function(){return Promise.mapSeries(a,function(e){return t._cleanUpModule({module:e,expirationDate:s})})}).then(function(){n();l()}).catch(function(t){e.logger.error("Failed to clean up database. "+t);n();l(t)})})},_cleanUpModule:function ue(){var e=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.module,i=t.expirationDate;return this._getRecordsToCleanUp({module:n,expirationDate:i}).then(function(t){return new Promise(function(i,r){e._hardDelete(n.moduleName,t,{skipOneToManyChildren:true,dbSuccess:i,dbFailure:r})})})},_getRecordsToCleanUp:function ce(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},i=n.module,r=n.expirationDate;var a=this._getModuleLimit(i.moduleName);var s=Math.ceil(i.recordsCount-a+(100-e.config.offline.cleanUp.recordsToKeepPercentage)/100*a);var o=[{expirationDate:r,includeUserRecords:false,limit:s},{expirationDate:r,includeUserRecords:true,limit:s},{includeUserRecords:true,limit:s}];var l=function u(e){var n=e.expirationDate,r=e.includeUserRecords,a=e.limit;return new Promise(function(e,s){t.exec([{op:"findViewedBefore",module:i.moduleName,options:{expirationDate:n,includeUserRecords:r,limit:a}}],function(t){t=t||[];t=_.isArray(t)?t:[t];e(t)},s)})};return Promise.reduce(o,function(e,n){if(t._shouldCleanMore(i,e.length)){return l(n)}else{return e}},[])},_shouldCleanMore:function de(e,t){var n=e.moduleName,i=e.recordsCount;var r=this._getModuleLimit(n);return i-t>r},_getModuleLimit:function fe(t){var n=e.config.offline.dbLimits;return n.modules[t]||n.default},_favorite:function he(t,n,i){i.action=e.offline.SYNC_ACTIONS.FAVORITE;n={id:n.id,my_favorite:n.my_favorite,_client_date_modified:i.ts};if(n.my_favorite){n.following=true}this.execAndSpecificReturn([{op:"updateValuesSingle",data:n,module:t,options:i}],_.extend({data:n,module:t},i))},_follow:function pe(t,n,i){i.action=e.offline.SYNC_ACTIONS.FOLLOW;this.execAndSpecificReturn([{op:"updateValuesSingle",data:{id:n.id,following:n.following,_client_date_modified:i.ts},module:t,options:i}],_.extend({data:n,module:t},i))},_updateRecord:function me(t,n,i){i.action=e.offline.SYNC_ACTIONS.UPDATE;n._client_date_modified=i.ts;if(e.offline.utils.isRecordAssignedToLoginUser(n)){n.following=true}this.execAndSpecificReturn([{op:"updateValuesSingle",data:n,module:t,options:i}],_.extend({data:n,module:t},i))},_updateRelatedRecord:function _e(t,n,i){i.action=e.offline.SYNC_ACTIONS.UPDATE;n.related._client_date_modified=i.ts;if(e.offline.utils.isRecordAssignedToLoginUser(n.related)){n.related.following=true}var r=[{op:"updateValuesSingle",data:n.related,module:n.relatedModule,options:i}];var a=this.getRelationshipByLink(t,n.link);var s=this.getRelationshipType(a);var o=e.data.getRelationshipFields(t,n.link);var l=!_.isEmpty(_.pick(n.related,o));if(s===this.relTypes.MANY_TO_MANY&&l){r.push({op:"createLink",module:t,data:n,options:i})}this.execAndSpecificReturn(r,_.extend({data:n,module:t},i))},_createRecord:function ge(t,n,i){n.id=n.id||e.utils.generateUUID();n.date_entered=n._client_date_modified=i.ts;if(e.offline.utils.isRecordAssignedToLoginUser(n)){n.following=true}i.action=e.offline.SYNC_ACTIONS.CREATE;this.execAndSpecificReturn([{op:"createSingle",data:n,module:t,options:i}],_.extend({data:n,module:t},i))},_createRelatedRecord:function ve(t,n,i){var r=this;n.related._client_date_modified=i.ts;if(n.relatedId){var a=function c(){i.action=e.offline.SYNC_ACTIONS.LINK;r.execAndSpecificReturn([{op:"createLink",module:t,data:n,options:i}],_.extend({data:n,module:t},i))};var s=function d(e){var t=e[0];var n=e[1];if(!_.isEmpty(n)){return i.dbSuccess({record:t,relatedRecord:n})}else{a()}};var o=e.offline.storage.getRelationshipByLink(t,n.link);var l=e.offline.storage.getRelationshipType(o);if(l===e.offline.storage.relTypes.MANY_TO_MANY){r.exec([{op:"readSingle",data:n,module:t,options:_.extend(i,{readDeleted:true})},{op:"readSingleRelated",module:t,data:n,options:i}],s,i.dbFailure)}else{a()}}else{var u=e.utils.generateUUID();n.relatedId=n.related.id=u;i.action=e.offline.SYNC_ACTIONS.CREATE;if(e.offline.utils.isRecordAssignedToLoginUser(n.related)){n.related.following=true}this.execAndSpecificReturn([{op:"createSingle",module:n.relatedModule,data:n.related,options:i},{op:"createLink",module:t,data:n,options:i}],_.extend({data:n,module:t},i))}},_softDeleteRecord:function ye(t,n,i){i.action=e.offline.SYNC_ACTIONS.DELETE;this.execAndSpecificReturn([{op:"createTransaction",module:t,data:n,options:i},{op:"softDeleteSingle",module:t,data:n,options:i}],_.extend({data:n,module:t},i))},_hardDelete:function be(t,n,i){i.action=e.offline.SYNC_ACTIONS.DELETE;this.execAndSpecificReturn([{op:"hardDelete",module:t,data:n,options:i},{op:"deleteLastViewed",data:n,module:t}],_.extend({data:n,module:t},i))},_unlinkRecord:function xe(t,n,i){i.action=e.offline.SYNC_ACTIONS.UNLINK;var r=[{op:"deleteLink",module:t,data:n,options:i}];if(!i.hardDelete){r.push({op:"createTransaction",module:t,data:n,options:i})}this.execAndSpecificReturn(r,_.extend({data:n,module:t},i))},_readSimpleOrRelated:function we(e,t,n){var i={op:n.relate?"readSingleRelated":"readSingle",data:t,module:e,options:n};var r=[i];if(this._shouldUpdateLastViewedDate(n)){r.splice(0,0,{op:"updateLastViewed",data:n.relate?{id:t.relatedId}:t,module:n.relate?t.relatedModule:e,options:n});r.splice(0,0,{op:"markToBeSynced",module:n.relate?t.relatedModule:e,data:{action:"update",record:{id:n.relate?t.relatedId:t.id}}})}this.exec(r,n.dbSuccess,n.dbFailure)},_readManyRecords:function Le(e,t){this.exec([{op:"readMany",module:e,options:t}],t.dbSuccess,t.dbFailure)},_readManyRelatedRecords:function Se(e,t,n){this.exec([{op:"readManyRelated",module:e,data:t,options:n}],n.dbSuccess,n.dbFailure)},_search:function Ee(e){this.exec([{op:"search",options:e}],e.dbSuccess,e.dbFailure)},_shouldUpdateLastViewedDate:function ke(e){return e&&e.viewed},fillTxLogData:function Te(e,t){_.each(e,function(e){if(e._tx_updated_fields){e._tx_updated_fields=JSON.parse(e._tx_updated_fields)}});var n={};function i(e,t){var i=e["_tx_"+t+"_module"];if(!i){return}if(!_.has(n,i)){n[i]=[]}n[i].push(e["_tx_"+t+"_id"])}_.each(e,function(e){i(e,"bean");i(e,"related")});function r(e,t,n){var i=e["_tx_"+t+"_id"];if(!i){return}var r=e["_tx_"+t+"_module"];if(!_.isArray(n[r])){e[t]=n[r]}else{e[t]=_.find(n[r],function(e){return e.id===i})}}this._executeSynchronized(function(i){this.readModuleRecords(n,function(n,a){i();if(!n){_.each(e,function(e){r(e,"bean",a);r(e,"related",a)})}t(n,e)})})},readModuleRecords:function Me(e,t,n){var i=this;_.each(e,function(t,n){var r={op:"readModuleRecords",module:n,data:{id:t},options:{}};e[n]=function(e){i.exec([r],function(t){e(null,t)},e)}});async.parallel(e,t)},markToBeSynced:function Ae(e){this.exec([{op:"markToBeSynced",module:e.module,data:{action:e.action,record:e.record}}],e.callback,e.callback)},resetToBeSynced:function Ce(e){this.exec([{op:"resetToBeSynced",module:e.module,data:{records:e.records}}],e.callback,e.callback)},readToBeSynced:function Re(e){this.exec([{op:"readToBeSynced",module:e.module,options:e}],function(t){t=t||[];if(!_.isArray(t)){t=[t]}e.callback({records:t})},e.callback)},updateLastViewed:function De(e,t){this.exec([{op:"updateLastViewed",data:e,module:t.module,options:t}],t.callback,t.callback)}}})(SUGAR.App)},function(e,t){"use strict";(function(e){var t={};var n={};var i;var r;var a=["email","teamset","multienum","metadata","json","tag"];var s=_.chain(["id","date","datetime","datetimecombo"]).union(a).without("email").value();function o(e){return _.isEmpty(e)||_.isEmpty(e.fields)&&_.isEqual(_.keys(e),["fields"])}function l(t,n){if(t.code===4){return e.offline.Error.OutOfSpaceError}return new e.offline.Error(t.code,t.message,null,t,n)}function u(n,i){var r=[i.id,i._client_date_modified?e.utils.getTimestamp(i._client_date_modified):undefined,i._deleted==1?1:0,o(i._acl)?null:JSON.stringify(i._acl)];var a=e.metadata.getModule(n).fields;_.each(t[n].fields,function(e){r.push(c(i[e.name],e.name,n,a))});return r}function c(t,i,r,a){var s=a[i];if(i==="_acl"){t=o(t)?null:JSON.stringify(t)}else if(i==="_deleted"){t=t==1?1:0}else if(_.isUndefined(t)){t=null}else if(_.isBoolean(t)){t=t?1:0}else if(_.contains(n[r],i)){t=JSON.stringify(t)}else if(i==="_client_date_modified"||t&&s&&(s.type==="datetime"||s.type==="datetimecombo")&&!isNaN(Date.parse(t))){t=e.utils.getTimestamp(t)}if(s&&(t||t===0)&&e.offline.SqlHelper.getSqlTypeByMetaType(s.type)===e.offline.SqlHelper.DEFAULT_TEXT_COLUMN_TYPE){t=String(t)}return t}_.extend(e.offline.storage,{_version:"4.0",_getValues:u,_getValue:c,_init:function d(){t={};n={};e.offline.SqlHelper.init(this.offlineMeta);_.each(this.offlineMeta.modules,function(i,r){t[r]=new e.offline.SqlHelper(r,i,this.offlineMeta[r].fields);n[r]=[];_.each(i.fields,function(e){if(_.contains(a,e.type)){n[r].push(e.name)}})},this)},convertFilter:function f(t,n){return e.offline.SqlHelper.buildFilterQuery(t,n)},getSqlStorageVersion:function h(){return this._version},openDb:function p(t,n,a){if(i)return i;i=this._openDb(t,n,a);if(i){r=t}else{throw new Error("`openDatabase` returned nothing")}e.logger.debug("Opened database "+t+" "+n+" ("+a+" bytes)");return i},_openDb:function m(t,n,i){if(e.config.offline.storageAdapter==="native"){return window.sqlitePlugin.openDatabase({name:t,bgType:1,encrypt:e.config.offline.dbEncryptionEnabled})}else{return window.openDatabase(t,n,t,i)}},migrate:function g(n,i,r){var a=this;var s=[];var o=false;var l=false;var u=false;r=r||{};i=i||{modules:{},relationships:{},serverInfo:{}};a.init(n);if(r.forceDrop||_.isEmpty(i)||i._userId!==e.user.get("id")||n.relationships._hash!==i.relationships._hash||i.siteUrl!==e.utils.stripHttpPrefix(e.config.siteUrl)){o=true;l=true;u=true;a._migrationSummary={storageRebuilt:true};_.each(n.modules,function(n,i){if(e.offline.isModuleOfflineEnabled(i)){s.push(t[i].getSchema(i,n))}})}else if(n._hash!==i._hash){var c=_.filter(_.keys(i.modules),function(t){return e.offline.isModuleOfflineEnabled(t)});var d=_.filter(_.keys(n.modules),function(t){return e.offline.isModuleOfflineEnabled(t)});var f=[];var h=[];_.each(c,function(t){if(!_.contains(d,t)){f.push(t);s.push(e.offline.SqlHelper.getDropTableStatement(t));s.push(e.offline.SqlHelper.lastViewed.buildCleanupMyModule(t));o=true}},this);_.each(d,function(e){if(!_.contains(c,e)){h.push(e);s.push(t[e].getSchema(e,n.modules[e]));o=true}},this);_.each(n.modules,function(t,r){if(_.contains(h,r)){return}if(i.modules[r]._hash!==t._hash&&t.fields._hash!==i.modules[r].fields._hash){var a=_.difference(_.keys(n.modules[r].fields),_.keys(i.modules[r].fields));_.each(a,function(t){var i=n.modules[r].fields[t];if(_.isEmpty(i.name))return;s.push(e.offline.SqlHelper.getAlterTableStatement(r,i))})}},this)}if(o){e.offline.storage.prepareOfflineRelationships(n.relationships);s.push(e.offline.SqlHelper.relationships.getCreateSchemaStatements(this.offlineMeta.relationships))}if(l){s.push(e.offline.SqlHelper.transactionLog.getCreateSchemaStatements())}if(u){s.push(e.offline.SqlHelper.lastViewed.getCreateSchemaStatements())}s.push(e.offline.SqlHelper.sync.getCreateSchemaStatements());if(s.length===0){e.logger.debug("No actual migration required");return r.success()}this._execRawStatements(_.flatten(s),function p(){if(r.success){r.success()}},function m(e){if(r.error){r.error(e)}})},isEncryptionSupported:function v(){return _.isFunction(i.encrypt)},encrypt:function y(e,t){i.encrypt(e,t)},_upgrade:{1:e.offline.SqlHelper.upgrade.getUpgrade1Sql,3:e.offline.SqlHelper.upgrade.getUpgrade3Sql},_runUpgrade:function b(e,t,n){this._execRawStatements(e,t,n)},_execRawStatements:function x(t,n,r){i.transaction(function(n){_.each(t,function(t){e.logger.trace(t);n.executeSql(t)})},function a(e){if(e.code===0){e.code=5}if(r){r(l(e),{transactionSql:t})}},n)},_exec:function w(t,n,r){var a=[];var s=[];var o;var u=this;_.each(t,function(e){var t=_.clone(e.data);var n=_.clone(e.options);var i=u._sqlHandlers[e.op](e.module,t,n);if(!i){return}if(!i.module&&e.options){if(e.options.relate&&e.op!=="readSingle"){i.module=e.data.relatedModule}else{i.module=e.module}}if(e.module){o=e.module}s.push(i)});function c(e){return _.any(e,function(e){return _.isArray(e.sql)?c(e.sql):/^\s*(UPDATE|INSERT|REPLACE)/i.test(e.sql)})}if(e.config.offline.debug.outOfSpace&&c(s)){_.defer(function(){if(r){r(l({code:4},{transactionSql:s}))}});return}i.transaction(function(t){_.each(s,function(n){function i(n){e.logger.trace("Executing SQL: "+n.sql);e.logger.trace("Params: "+(n.params?n.params:"(no params)"));t.executeSql(n.sql,n.params,function i(e,t){t=t?u._recordSetToArray(t,n.module||o):[];if(n.module){t=_.map(t,function(e){e._module=n.module;return e})}a=a.concat(t)})}if(_.isArray(n.sql)){_.each(n.sql,i)}else{i(n)}})},function d(e){if(r){r(l(e,{transactionSql:s}))}},function f(){if(a.length===1){a=a[0]}else if(a.length===0){a=null}n(a)})},_isOutOfSpace:function L(t){var n=this;if(e.config.offline.debug.outOfSpace){_.defer(t,true);return}i.transaction(function(e){var t=n._sqlHandlers.updateTransaction("Module",{txLog:{_tx_uid:"tx_id",_tx_error_count:0}});t.sql+=" AND 1 <> 1";e.executeSql(t.sql,t.params)},function(e){t(e.code===4)},function(){t(false)})},drop:function S(t){var n=this;i.transaction(function(t){t.executeSql(e.offline.SqlHelper.getSelectTablesStatement(),null,function(t,i){var r=e.offline.SqlHelper.getDropTableStatements(_.map(n._recordSetToArray(i),function(e){return e.tbl_name}));_.each(r,function(e){t.executeSql(e)})})},function r(e){if(t)t(l(e))},function a(){if(t)t()})},_sqlHandlers:{readSingle:function E(e,n,i){i=i||{};return t[e]?{sql:i.readDeleted?t[e].sqlSelectOneWithDeleted:t[e].sqlSelectOne,params:[n.id]}:null},search:function k(e,n,i){var r=i.module_list.split(",");var a=[];_.each(r,function(e){a.push({sql:t[e].buildSqlSelectMany(i),params:null,module:e})});return{sql:a}},readSingleRelated:function T(t,n,i){i=i||{};return{sql:e.offline.SqlHelper.relationships.buildSqlSelectSingleRelated(t,n,i),params:null}},readMany:function M(e,n,i){return{sql:t[e].buildSqlSelectMany(i),params:null}},readManyRelated:function A(t,n,i){return{sql:e.offline.SqlHelper.relationships.buildSqlSelectManyRelated(t,n,i),params:null}},readModuleRecords:function C(e,n){return t[e]?{sql:t[e].buildSqlReadModuleRecordsByIds(n.id,n.fields),params:null}:null},createSingle:function R(n,i,r){i.id=i.id||e.utils.generateUUID();var a=u(n,i);var s=[];var o=this.updateRelationships(n,i,r);s.push({sql:t[n].sqlCreate,params:a});if(!_.isEmpty(o)){s=s.concat(o)}return{sql:s}},resetDateModified:function D(n,i){return t[n]?{sql:e.offline.SqlHelper.getResetDateModifiedStatement(n,i)}:null},updateValuesSingle:function I(n,i,r){r=r||{};if(_.isEmpty(i.id)){e.error.throwErrorWithCallStack("Undefined id passed to updateValuesSingle")}if(_.isUndefined(t[n])){return null}var a=["id","_client_date_modified","_acl"];_.each(t[n]?t[n].fields:[],function(e){a.push(e.name)});i=_.pick(i,a);var s=[];var o=[];var l=i.id;var u=[];var d=e.metadata.getModule(n).fields;var f=this.updateRelationships(n,i,r);var h=i.name;var p=_.getNested(r,"initialState.name",h);var m=h&&r.updateRelatedNames!==false&&h!==p;if(m){var g=e.offline.SqlHelper.relationships.buildSqlUpdateChildren(n,i);if(g){_.each(g,function(e){u.push({sql:e,params:null})})}}if(!_.isEmpty(f)){u=u.concat(f)}delete i.id;delete i._module;delete i._search;if(_.isEmpty(i)){return null}_.each(i,function(e,t){o.push(t);s.push(c(e,t,n,d))});s.push(l);u.push({sql:t[n].buildSqlUpdate(l,o),params:s});return{sql:u}},updateRelationships:function O(t,n,i){var r=[];var a=e.metadata.getModule(t).fields;var s={};_.each(n,function(t,n){if(a[n]&&a[n].link&&a[a[n].link]){var i=e.metadata.getRelationship(a[a[n].link].relationship);if(i&&!s[i.name]){s[i.name]=i;s[i.name].create=!!t}}});_.each(s,function(a){var s=a.create?e.offline.SqlHelper.relationships.buildSqlReplaceRelationship:e.offline.SqlHelper.relationships.buildDeleteRelationship;var o=a.rhs_module===t?a.lhs_module:a.rhs_module;var l=e.offline.storage.offlineMeta.relationships[a.name];if(!l){return false}var u=s.call(e.offline.SqlHelper.relationships,o,{related:n,relatedId:n.id,relatedModule:t,relDef:l},_.extend({},i,{skipUpdateRelRecord:true}));if(u&&!_.isArray(u)){u=[{sql:u}]}if(!_.isEmpty(u)){_.each(u,function(e){r.push({sql:e.sql,params:null})})}},this);return r},hardDelete:function N(n,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var a=[];var s=[];i=_.isArray(i)?i:[i];if(!r.skipRelationshipsClean){s=_.reduce(i,function(t,i){return t.concat(_.map(e.offline.SqlHelper.relationships.buildSqlCleanRelationships(n,i,r),function(e){return{sql:e}}))},[])}var o=_.pluck(i,"id");var l=a.concat({sql:t[n].buildSqlDelete(o)},s);return{sql:l}},softDeleteSingle:function F(e,n){return{sql:t[e].sqlMarkDeleted,params:[n.id]}},resetDeletedSingle:function B(e,n){return t[e]?{sql:t[e].sqlResetDeleted,params:[n.id]}:null},createLink:function P(n,i,r){return t[n]?{sql:e.offline.SqlHelper.relationships.buildSqlReplaceRelationship(n,i,r),params:null}:null},deleteLink:function U(n,i,r){return t[n]?{sql:e.offline.SqlHelper.relationships.buildDeleteRelationship(n,i,r),params:null}:null},readTransactions:function Y(t,n,i){if(n&&n.id){return{sql:e.offline.SqlHelper.transactionLog.getTxLog,params:[n.id]}}else{var r=[{sql:e.offline.SqlHelper.transactionLog.getReadTransactionsStatements(i),params:[i.offset||0,i.limit]}];if(i.count){r.push({sql:e.offline.SqlHelper.transactionLog.countTransactions})}return{sql:r}}},readToBeSynced:function H(t,n,i){return{sql:e.offline.SqlHelper.sync.getReadToBeSyncedSql(t,n,i),params:null}},markToBeSynced:function G(t,n,i){return{sql:e.offline.SqlHelper.sync.getMarkToBeSyncedSql(t,n,i),params:null}},resetToBeSynced:function j(t,n,i){return{sql:e.offline.SqlHelper.sync.getResetToBeSyncedSql(t,n,i),params:null}},createTransaction:function V(t,n,i){return{sql:e.offline.SqlHelper.transactionLog.sqlTxLogAction,params:e.offline.storage.getCUTransactionParams(t,n,i)}},updateTransaction:function z(t,n,i){var r;var a=n.txLog;var s=["_tx_updated_fields","_tx_error","_tx_error_count","_tx_ts"];if(i&&i.initialState){r=e.offline.storage.getCUTransactionParams(t,n.updatedFields,{action:a._tx_action,txId:a._tx_uid,initialState:i.initialState,relate:i.relate});a._tx_updated_fields=r[6]}return{sql:e.offline.SqlHelper.transactionLog.updateTransaction(a._tx_uid,_.pick(a,s))}},deleteTransaction:function $(t,n,i){return{sql:e.offline.SqlHelper.transactionLog._deleteTransaction,params:[i.txId]}},clearTransactionLog:function q(){return{sql:e.offline.SqlHelper.transactionLog.clearTransactionLog}},countAssociatedTransactions:function W(t,n,i){return{sql:e.offline.SqlHelper.transactionLog.getCountAssociatedTransactionsStatements(i.txData)}},countTransactions:function K(){return{sql:e.offline.SqlHelper.transactionLog.countTransactions}},readLastViewed:function J(t,n,i){if(i.ids){return{sql:e.offline.SqlHelper.lastViewed.buildReadForRecords(i.ids)}}return{sql:e.offline.SqlHelper.lastViewed.buildRead(i.desc),params:[i.max_num]}},readRecents:function X(t,n,i){return{sql:e.offline.SqlHelper.lastViewed.buildReadForModule(t),params:[i.max_num]}},updateLastViewed:function Z(t,n,i){return{sql:e.offline.SqlHelper.lastViewed.buildReplace(t,n,i)}},deleteLastViewed:function Q(t,n,i){n=_.isArray(n)?n:[n];return{sql:e.offline.SqlHelper.lastViewed.buildDelete(n)}},findViewedBefore:function ee(t,n,i){return{sql:e.offline.SqlHelper.lastViewed.buildFindViewedBefore(t,i)}},getStats:function te(t,n,i){return{sql:e.offline.SqlHelper.getStatsRetrieveStatements(i)}}},_deserialize:function ne(e,t){var i=_.clone(e);_.each(i,function(e,r){if(_.isString(e)&&e&&_.contains(n[t],r)){i[r]=JSON.parse(e)}});if(i._acl){i._acl=JSON.parse(i._acl)}return i},_recordSetToArray:function ie(e,t){var n=[];if(e){for(var i=0;i<e.rows.length;i++){n.push(this._deserialize(e.rows.item(i),t))}}return n},getDetails:function(){var t=e.offline.storage.getDetails;return function(){return _.extend(t(),{dbName:r})}}(),getOfflineModuleSearchFields:function(){var t=e.offline.storage.getOfflineModuleSearchFields;return function(n,i){var r=t.call(this,n,i);if(r.length){var a=void 0;r=_.filter(r,function(t){if(t.type==="email"){i=i||e.metadata.get();a=i.modules[n].fields.email1;return false}return!_.contains(s,t.type)});if(a){r.push(a)}}return r}}()})})(SUGAR.App)},function(e,t){"use strict";(function(e){_.extend(e.offline,{declareOfflineBean:function t(){var t=e.data.beanModel.prototype.save;e.OfflineBean=e.data.beanModel.extend({save:function n(e,i){if(i&&i.fields&&_.contains(i.fields,"email")){var r;var a;r=_.find(this.attributes,function(e,t){return this.fields[t]&&this.fields[t].type==="email"},this);if(r){a=_.find(r,function(e){return e.primary_address});if(a){i.fields.push("email1");this.attributes.email1=a.email_address}}}t.apply(this,arguments)}});return e.OfflineBean}})})(SUGAR.App)},function(e,t){"use strict";(function(e){_.extend(e.offline,{declareOfflineBeanCollection:function t(){var t=e.data.beanCollection;e.OfflineBeanCollection=e.data.beanCollection.extend({initialize:function n(e,i){this.cid=_.uniqueId("c");t.prototype.initialize.apply(this,arguments)},fetch:function i(e){this._handleFetchWithQuery(this._mergeCollection,e);return t.prototype.fetch.call(this,e)},_handleFetchWithQuery:function r(e,t){t=t||{};t.params=t.params||{};if(t.params.q){t.params.serverSyncSuccess=_.bind(e,this)}},_mergeCollection:function a(t,n){var i=t.records;var r=t.next_offset;var a=_.filter(i,function(t){var n=this.get(t.id);return!(n&&!e.offline.utils.isDataSynchronized(n))},this);this.set(a,{remove:false});this.offset=r!==-1?r:this.offset+(i||[]).length;this.next_offset=r}});return e.OfflineBeanCollection}})})(SUGAR.App)},function(e,t){"use strict";(function(e){_.extend(e.offline,{declareOfflineMixedBeanCollection:function t(){var t=e.data.mixedBeanCollection;e.OfflineMixedBeanCollection=e.data.mixedBeanCollection.extend({fetch:function n(i){var r=e.OfflineBeanCollection.prototype;r._handleFetchWithQuery.call(this,r._mergeCollection,i);return t.prototype.fetch.call(this,i)}});return e.OfflineMixedBeanCollection}})})(SUGAR.App)},function(e,t){"use strict";(function(e){e.offline.SyncExecutor=function(e){this.options=e;this.name=this.options.name;this.init()};_.extend(e.offline.SyncExecutor.prototype,{_working:false,isWorking:function t(){return this._working},_lastSyncTime:null,getLastSyncTime:function n(){return this._lastSyncTime},init:function i(){},shouldRun:function r(){var t=this._lastSyncTime&&(new Date).getTime()-this._lastSyncTime.getTime()<this.options.interval*1e3;if(!this.options.enabled||!e.api.isAuthenticated()||t){return false}return!this._working},beforeSync:function a(){this._working=true},sync:function s(e){if(!this.shouldRun()){e();return}this.beforeSync();this._sync(_.bind(function(t){this.afterSync();e.apply(this,arguments)},this))},afterSync:function o(){this._lastSyncTime=new Date;this._working=false},_sync:function l(){e.offline.utils.notImplemented()},getPriority:function u(){return this.options.priority},stop:function c(){e.offline.utils.notImplemented()}});e.offline.SyncExecutor.extend=Backbone.Model.extend})(SUGAR.App)},function(e,t,n){"use strict";(function(e){e.offline.WinsSyncExecutor=e.offline.SyncExecutor.extend({SYNC_PHASES:{PRE_SYNC:1,SYNC:2},WINS_STATUS_CACHE_NAME:"sync:wins:status",_status:null,_stopAsyncFlow:null,_updateStatus:function t(n){_.each(n,function(e,t){this._status[t]=e},this);e.cache.set(this.WINS_STATUS_CACHE_NAME,this._status)},_loadStatus:function i(){var t=e.cache.get(this.WINS_STATUS_CACHE_NAME);if(t&&e.user.get("id")===t.userId){this._status=t;if(this._status.winsStartedTime){this._status.winsInterruptedTimes++;this._updateStatus({winsInterruptedTimes:this._status.winsInterruptedTimes})}}else{this._resetStatus()}},_resetStatus:function r(){this._status={phase:this.SYNC_PHASES.PRE_SYNC,preSyncedModules:[],minDate:this._status&&this._status.maxDate||e.cache.get(e.offline.INITIALIZED_TS_KEY),maxDate:null,winsCompletedTime:null,winsStartedTime:null,winsInterruptedTimes:0,syncedRecords:0,userId:e.user.get("id")};this._updateStatus()},_sync:function a(t){var n=this;var i=function r(i){e.logger.debug("WINS completed.");if(i){n._status.winsInterruptedTimes++;n._updateStatus({winsInterruptedTimes:n._status.winsInterruptedTimes})}else{n._updateStatus({winsCompletedTime:+new Date-n._status.winsStartedTime});e.trigger("offline:wins:completed",_.pick(n._status,["winsCompletedTime","winsInterruptedTimes","syncedRecords"]));n._resetStatus()}if(t){t(i)}};this._loadStatus();if(!this._status.winsStartedTime){this._updateStatus({winsStartedTime:+new Date})}if(_.isEmpty(this._status.minDate)){e.logger.debug("Skipping sync as last synced date is unknown. Fetching and saving current server time");e.offline.utils.getServerTime(function(e,t){if(!e){n._updateStatus({minDate:t})}i(e)})}else if(this._status.phase===this.SYNC_PHASES.PRE_SYNC){this._preSync(function(e){if(!e){n._updateStatus({phase:n.SYNC_PHASES.SYNC});n._recordsSync(i)}else{i(e)}})}else{this._recordsSync(i)}},_preSync:function s(t){var n=this;var i=[];if(_.isEmpty(this._status.maxDate)){i.push(function(t){e.offline.utils.getServerTime(function(e,i){if(e){t(e)}else{n._updateStatus({maxDate:i});t()}})})}var r=_.difference(e.offline.utils.getOfflineModules(),this._status.preSyncedModules,e.config.offline.staticModules);r=_.filter(r,function(t){return e.acl.hasAccess("list",t)});if(r.length!==0){_.each(r,function(e){i.push(function(t){n._preSyncModule(e,t)})},this)}this._stopAsyncFlow=e.offline.utils.getStoppableAsyncFlow("series",i,t)},_preSyncModule:function o(t,n){var i=this;var r={fields:"id",deleted:true,filter:[{date_modified:{$gte:this._status.minDate,$lt:this._status.maxDate}}]};e.offline.utils.fetchPageByPage(t,r,_.bind(this._markLocalRecordsToBeUpdated,this),null,{maxRecords:this.options.preSyncMaxRecords,pageSize:this.options.preSyncPageSize,callback:function a(e){if(!e){i._status.preSyncedModules.push(t);i._updateStatus({preSyncedModules:i._status.preSyncedModules})}n(e)}})},_markLocalRecordsToBeUpdated:function l(t){this._processLocalMatchedRecords(t,function(n,i,r){e.offline.storage.markToBeSynced({module:t.module,action:i.deleted?"delete":"update",record:n,callback:r})})},_recordsSync:function u(t){var n=this;var i=[];_.each(e.offline.utils.getOfflineModules(),function(e){i.push(function(t){n._syncModule(e,t)})},this);this._stopAsyncFlow=e.offline.utils.getStoppableAsyncFlow("series",i,t)},_syncModule:function c(t,n){var i=this;e.offline.storage.readToBeSynced({offset:0,max_num:this.options.syncPageSize||20,module:t,callback:function r(e){if(e.err||_.isEmpty(e.records)){n(e.err)}else{i._syncRecords({module:t,records:e.records,callback:function r(a){if(a){n(a)}else{i._status.syncedRecords+=e.records.length;i._updateStatus({syncedRecords:i._status.syncedRecords});i._syncModule(t,n)}}})}}})},_syncRecords:function d(t){var n=_.map(t.records,function(e){return{id:e.bean_id,module:e.bean_module,action:e.action}});var i=t.module;var r=_.filter(n,function(e){return e.action==="update"});var a=_.filter(n,function(e){return e.action==="delete"});var s=[];if(r.length>0){var o=_.pluck(r,"id");var l=e.metadata.getModule(i).mergedFields;var u={filter:[{id:{$in:o}}]};if(!_.isEmpty(l)){u.fields=l.join(",")}s.push(function(t){
e.offline.api.callOriginalApi("records",["read",i,null,u,{success:function n(a){a=a||{records:[]};e.offline.storage.saveRecords({serverData:a.records,module:i,callback:function s(n){if(n){return t(n)}else{e.offline.storage.resetToBeSynced({records:r,callback:t})}}})},error:t}])})}if(a.length>0){_.each(a,function(t){s.push(function(n){e.offline.storage.readSingleRawRecord(i,{id:t.id},{success:function r(t){if(t&&e.offline.utils.isDataSynchronized(t)){e.offline.storage.sync("delete",{id:t.id},i,{hardDelete:true,success:function r(){e.offline.storage.resetToBeSynced({records:a,callback:n})},error:n})}else{e.offline.storage.resetToBeSynced({records:a,callback:n})}},error:n})})})}async.series(s,t.callback)},_processLocalMatchedRecords:function f(t,n){var i=_.pluck(t.records,"id");var r=t.module;e.offline.storage.readRecordsByIds(r,i,{success:function a(e){if(_.isEmpty(e)){return t.callback()}e=_.isArray(e)?e:[e];var i=[];_.each(e,function(e){i.push(function(i){var r=_.find(t.records,function(t){return t.id===e.id});n(e,r,i)})});async.series(i,t.callback)},error:t.callback})},stop:function h(){if(this._stopAsyncFlow){this._stopAsyncFlow();this._stopAsyncFlow=null;e.logger.debug("WinsSync interrupted")}},shouldRun:function p(){var t=n(247);var i=n(229);var r=t.getState().state!==i.State.IDLE;return!r&&e.offline.SyncExecutor.prototype.shouldRun.call(this)}})})(SUGAR.App)},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(237);var a=n(229);var s=n(248);var o=n(253);var l=n(258);var u=n(271);var c=e.exports={_initialized:false,init:function d(){var e=this;if(!i.config.offline.bulkLoad.enabled){return}this.processChangingConnection=this.processChangingConnection.bind(this);i.events.on("offline:toggled",function(t){if(t){if(!e._initialized){e._init()}else{e._startIfPossible()}}else{e._uninit()}});i.events.on("offline:storage:migrate",function(t){if(t.storageRebuilt){e.reset()}})},_init:function f(){r.init();i.events.on("app:sync:complete",this._onAppSync,this);i.events.on("offline:bulkload:progress",this._onBulkLoadProgress,this);i.events.on("offline:cleanup:completed",this._onOfflineCleanupCompleted,this);window.addEventListener("online",this.processChangingConnection);window.addEventListener("offline",this.processChangingConnection);l.registerForPushNotifications();this.onAppPause=this._onAppPause;this.onAppResume=this._onAppResume;if(!this._wasBucketQueued(a.BucketType.INITIAL)){var e=this._getModulesToLoad(a.BucketType.INITIAL);r.queueBuckets({name:a.BucketType.INITIAL,modules:e});r.start()}else{this._startIfPossible()}this._initialized=true},_uninit:function h(){r.uninit();if(!i.offline.storageExists()){this.reset()}i.events.off("app:sync:complete",this._onAppSync,this);i.events.off("offline:bulkload:progress",this._onBulkLoadProgress,this);i.events.off("offline:cleanup:completed",this._onOfflineCleanupCompleted,this);window.removeEventListener("online",this.processChangingConnection);window.removeEventListener("offline",this.processChangingConnection);this.onAppPause=null;this.onAppResume=null;this._initialized=false},_bulkLoaderNotificationSent:false,onAppPause:null,_onAppPause:function p(){if(r._status.working){r.stop();if(!this._bulkLoaderNotificationSent&&r._status.bucketName===a.BucketType.COMPLETE){l.sendLocalNotification({message:i.lang.get("LBL_BULK_LOAD_PAUSED_MESSAGE")});this._bulkLoaderNotificationSent=true}}},onAppResume:null,_onAppResume:function m(){this._startIfPossible()},reset:function g(){u.removeSetting(a.SettingsKey.SETUP_SHOWN);r.clearCache()},getCache:function v(){return _.pick(r.cache,"lastCompletedTs","status")},getState:function y(){if(r._status.working){return{state:a.State.WORKING,module:r._status.module,count:r._status.count}}else{if(!this._initialized||r.cache.queue.length===0){return{state:a.State.IDLE}}else{if(r.cache.pausedByUser){return{state:a.State.PAUSED_BY_USER}}else{return{state:a.State.PAUSED_BY_CONNECTION}}}}},userPause:function b(e){r.stop(e);r.cache.pausedByUser=true;r.cache.save()},userResume:function x(){r.cache.pausedByUser=false;r.cache.save();this._startIfPossible()},setupBulkLoad:function w(e){var t=this;if(i.offlineEnabled&&i.config.offline.bulkLoad.enabled&&!u.getSetting(a.SettingsKey.SETUP_SHOWN)){var n=i.context.getContext({create:true}).prepare();i.controller.loadDynamic({layoutDef:{className:"no-main-menu layout__bulkload",name:"BulkLoadSetup",appendTo:"root",noHeader:true,callback:function r(n){u.setSetting(a.SettingsKey.SETUP_SHOWN,true);i.controller.disposeDynamic();if(n){t.queueCompleteDownload()}t.processChangingConnection();e()},meta:{components:[{view:"BulkLoadSetup"}]},context:n}})}else{e()}},queueCompleteDownload:function L(){var e=this;var t=_.sortBy(this._getModulesToLoad(a.BucketType.COMPLETE),function(e){var t=r.cache.status[e.name]&&r.cache.status[e.name].status;if(!t||t===200||t===a.ModuleStatus.IN_PROGRESS){return 1}else return 0});var n=i.offline.storage.getStats({success:function s(n){t=_.filter(t,function(e){var t=e.name;var r=i.config.offline.dbLimits.modules[t]||i.config.offline.dbLimits.default;r=Math.round(r*1.1);var a=r-n.count[t];if(a>0){e.limit=Math.min(e.limit,a);return true}else{return false}});r.queueBuckets({name:a.BucketType.COMPLETE,modules:t});e._startIfPossible()},error:function o(e){i.logger.error("Failed to count records in database while starting bulk loader complete session. "+e)}})},processChangingConnection:function S(){if(this._allowedToStart()){r.start()}else{r.stop()}},_onAppSync:function E(){var e=i.offline.utils.getOfflineModules();var t=this._getProcessedModules();this._processRemovedModules(e,t);if(this._wasBucketQueued(a.BucketType.COMPLETE)){this._processAddedModules(e,t)}},_onOfflineCleanupCompleted:function k(){r.stop(r.resetModulesStatus)},_allowedToStart:function T(){return this._connectionAllows()&&!r.cache.pausedByUser},_startIfPossible:function M(){if(this._allowedToStart()){r.start()}},_processRemovedModules:function A(e,t){var n=[];_.each(t,function(t){if(e.indexOf(t)===-1){n.push(t)}});if(n.length){_.each(r.cache.queue,function(e){e.modules=_.filter(e.modules,function(e){return n.indexOf(e.name)===-1})});_.each(n,function(e){delete r.cache.status[e]});r.cache.save()}},_processAddedModules:function C(e,t){var n=[];_.each(e,function(e){if(t.indexOf(e)===-1){n.push(e)}});if(n.length){var i=_.filter(this._getModulesToLoad(a.BucketType.COMPLETE),function(e){return n.indexOf(e.name)!==-1});var s=_.find(r.cache.queue,function(e){return e.name===a.BucketType.COMPLETE});if(s){Array.prototype.push.apply(s.modules,i);r.cache.save()}}},_getProcessedModules:function R(){var e=[];_.each(r.cache.queue,function(t){_.each(t.modules,function(t){if(e.indexOf(t.name)===-1){e.push(t.name)}})});_.each(r.cache.status,function(t,n){if(e.indexOf(n)===-1){e.push(n)}});return e},_onBulkLoadProgress:function D(e,t){var n=this;if(e===a.ProgressEventType.COMPLETE&&t===a.BucketType.COMPLETE){var r=this.getCache().status;var s=!_.find(r,function(e){return e.status!==200});if(s){o.showAlert(i.lang.get("LBL_BULK_LOAD_COMPLETED_MESSAGE"),{title:i.lang.get("LBL_BULK_LOAD_OFFLINE_RECORDS")})}else{i.logger.error("Bulk Loader finished with errors. Status: "+JSON.stringify(r));o.showConfirm(i.lang.get("LBL_BULK_LOAD_ERROR_CONFIRM"),{title:i.lang.get("LBL_BULK_LOAD_OFFLINE_RECORDS"),callback:function l(e){if(e===2){n.queueCompleteDownload()}}})}}},_wasBucketQueued:function I(e){return!!_.find(r.cache.queuedBuckets,function(t){return t===e})},_connectionAllows:function O(){if(i.config.scheme==="e2e"){return true}if(!s.isOnline()){return false}if(i.isNative){var e=!!i.loginManager.getSetting(a.SettingsKey.ALLOW_CELLULAR);var t=navigator.connection.type===window.Connection.WIFI;return e||t}else{return true}},_getModuleFilters:function N(e){var t=[];var n=i.data.createBean(e);if(s.canFollow(n)){t.push({$following:"_this"})}if(s.supportsFavs(e)){t.push({$favorite:"_this"})}if(s.supportsMyItems(e)){t.push({$owner:"_this"})}t=_.isEmpty(t)?null:[{$or:t}];return t},_getModulesToLoad:function F(e){var t=this;var n=[];var r={};var s=e===a.BucketType.INITIAL?i.config.offline.bulkLoad.initial:i.config.offline.bulkLoad.complete;var o=function l(e){_.each(e,function(e){var r=(s.amount.modules||{})[e]?s.amount.modules[e]:s.amount.default;var a={name:e,limit:r};var o=t._getModuleFilters(e);if(o){a.filter=o}if(i.metadata.getModule(e)&&i.acl.hasAccess("list",e)){n.push(a)}else{i.logger.debug("Skipping prefetch of "+e+". Either metadata is missing or no access is given")}})};if(!_.isEmpty(s.modules)){o(s.modules)}if(e===a.BucketType.COMPLETE){r=_.difference(i.offline.utils.getOfflineModules(),_.keys(s.modules));o(r)}return n}};i.augment("bulkLoader",c)},function(e,t,n){"use strict";var i=n(249);var r=SUGAR.App;var a;var s;var o;var l;var u;var c;var d;var f=document.getElementById("viewport-meta");var h={"default":f?f.getAttribute("content"):null};var p;var m;var g=n(250);r.lang.DIRECTION_RTL="rtl";r.lang.DIRECTION_LTR="ltr";var v=e.exports={timePaused:0,globalEvents:["app:orientation:changed","nativeMessage","app:dashboards:changed"],SETTINGS_CACHE_KEY:"settings",LAST_STATE_CACHE_KEY:"lastState",DEFAULT_ROUTE:"Search",_requireDependencies:function y(){a=n(253);s=n(261);o=n(262);l=n(258);c=n(263);p=n(268);m=n(247);u=n(271)},_syncedAppStart:function b(){var e=function t(){_.delay(function(){r.overlay.hide("app:sync",true)},300);r.cache.set("app:synced","1");r.nomad.setHTMLDirection();if(r.supportedFeatures.dashboards&&!r.nomad.dashboards.isStarted()){r.nomad.dashboards.start();r.nomad.dashboards.fetchDashboards({notifyIfChanged:true})}r.nomad.startApp()};g.start().finally(function(){return e()})},startApp:function x(){if(!r.started){r.start()}else{r.navigation.history.clear();r.router.refresh()}_.each(r.additionalComponents,function(e){e.bindGlobalEvents()});r.nomad.mainMenu.start()},deviceReady:function w(){this._requireDependencies();var e=this;window.App=SUGAR.App;r.isNative=!_.isUndefined(window.cordova);r.isTouchCapable="ontouchstart"in window;r.nomad.utils.augmentZeptoDetect(r.isNative);this.initNavigation();if(!this._isPlatformSupported()){r.error.handleNotSupportedPlatform();return}if(r.config.nativeRedirectEnabled){l.redirectToNativeApp()}this._computeMode();r.clientInfo={app:{name:r.config.appId,rebrandName:r.config.appName,version:r.config.sdkVersion,isNative:r.isNative},device:null,browser:_.extend($.browser,{userAgent:navigator.userAgent})};r.nomad.initSupportedFeatures();async.waterfall([function(e){var t={name:"store-"+r.config.appId+"-"+r.config.env,"native":r.isNative,encrypt:r.config.keyValueStoreEncryptionEnabled,forceEncryption:r.config.keyValueStoreEncryptionEnabled};var n={name:"ac",async:false};var i=r.config.keyValueStore==="sqlKeyValueStore"?"localStorageKeyValueStore":"sqlKeyValueStore";r.nomad.stores={};r.keyValueStore=r[r.config.keyValueStore];r.keyValueStore.open(t);r[i].open(t);async.parallel([function a(e){async.parallel({oldBucket:function t(e){r[i].initBucket(n,e)},newBucket:function a(e){r.keyValueStore.initBucket(n,e)}},function(t,n){if(!t){r.nomad.utils.migrateKeyValueStore(n.newBucket,n.oldBucket);r.cache.store=n.newBucket}e(t)})},function s(e){r.keyValueStore.initBucket({name:"dashlet_data",async:true},function(t,n){if(!t){r.nomad.stores.dashlets=n}e(t)})},function o(e){r.keyValueStore.initBucket({name:"filters",async:false},function t(n,i){if(!n){r.nomad.stores.filters=i}e(n)})}],function(t){e(t)})},function(t){e.preInit(r.clientInfo,t)},function(t){e.start()}],function(e){if(e){r.logger.fatal("Failed to init the app: "+e);a.showAlert(r.lang.get("ERR_INTERNAL_ERR_MSG"),{title:r.lang.get("ERR_GENERIC_TITLE")})}});if(!r.isNative&&$.os.android&&$.smartbanner){$.smartbanner({layer:true})}},_computeMode:function L(){r.isTablet=r.config.deviceMode.type==="tablet"||r.config.deviceMode.type==="auto"&&(document.body.clientWidth>=768||document.body.clientHeight>=768);r.isNarrowTabletMode=r.isTablet&&(document.body.clientWidth<601||document.body.clientHeight<601);if(r.isTablet){$(document.body).removeClass("mobile");$(document.body).addClass("tablet");if(r.isNarrowTabletMode)$(document.body).addClass("narrow-tablet-mode")}else{$(document.body).removeClass("tablet narrow-tablet-mode");$(document.body).addClass("mobile")}if($.os.desktop){$(document.body).addClass("desktop")}},_checkTrial:function S(){if(!r.config.trialUntil||new Date<new Date(r.config.trialUntil)){return}var e=function n(e){var t=[r.lang.get("LBL_TRIAL_PERIOD_EXPIRED")];if(e){t.push({callback:e})}a.showAlert.apply(a,t)};var t=_.bind(e,null,null);r.view.views.LoginView.prototype.login=t;r.view.views.LoginView.prototype.externalLogin=t;this._checkTrial=_.noop;e(function(){var e=r.controller.layoutManager.getRootLayout();var t=e&&e.name==="login";if(!t){r.router.logout(true)}})},start:function E(){this.computeOrientation();r.logger.debug("Client: "+JSON.stringify(r.clientInfo));$.__swipeHelper.init();if(r.config.keyValueStore==="localStorageKeyValueStore"){try{var e=r.config.env+":"+r.config.appId+":settings";var t=window.localStorage.getItem(e);if(t&&t[1]==="'"){window.localStorage.setItem(e,t.replace(/'/g,'"'))}}catch(n){}}r.init({el:"#nomad"});r.loginManager.handleAuthTokens();r.api.debug=r.config.debugSugarApi;r.api.setRefreshTokenSuccessCallback(function(e){e()});r.telephony.clearCallLog();this.setFontSize(r.loginManager.getSetting("fontSize"));_.each(this.globalEvents,function(e){r.events.register(e,r)});r.logger.debug("App started in "+(r.isNative?"native shell":"browser"));document.addEventListener("pause",_.bind(this.onPause,this),false);document.addEventListener("resume",_.bind(this.onResume,this),false);document.addEventListener("memoryWarning",_.bind(this.onMemoryWarning,this),false);document.addEventListener("backbutton",_.bind(this.onBackButtonClicked,this),false);window.addEventListener("orientationchange",_.bind(this.onOrientationChange,this),false);if(r.isSynced){this._syncedAppStart()}else{r.start()}this._checkTrial()},initSupportedFeatures:function k(){r.supportedFeatures={fileUpload:function e(){var e=$.os.version;if($.os&&$.os.version){if($.os.ios){return r.utils.versionCompare(e,"6",">=")}else if($.os.android){return r.utils.versionCompare(e,"4.0.3",">=")}}return true}(),menuAnimation:function t(){if($.os&&$.os.version){return!($.os.android&&r.utils.versionCompare($.os.version,"4.0.3","<"))}return true}(),canvasJpegEncoding:function n(){var e=document.createElement("canvas");var t=e.toDataURL("image/jpeg");return t.indexOf("image/jpeg")!==-1}(),bulkApi:false,recents:false,offline:false,fileUploadForDocs:false,fts:false,productsModule:false,dashboards:false,configurableSavedReportsChart:false,settingsDefaultView:false,enumViaActionSheet:false,filters:false,populateList:false,localSecurityServerSupport:false}},updateSupportedFeatures:function T(e){var t=!_.isEmpty(r.metadata.getServerInfo())?r.metadata.getServerInfo():e?e.server_info:{};r.supportedFeatures.offline=r.offline&&r.offline.isSupported(t);r.supportedFeatures.fts=t.fts&&t.fts.enabled;r.supportedFeatures.productsModule=r.nomad.isSevenUp(t);r.supportedFeatures.dashboards=r.config.dashboards.enabled&&r.utils.versionCompare(t.version,r.config.dashboards.minServerVersion,">=");var n=r.config.dashboards.dashlets["activitystream-dashlet"];r.supportedFeatures.activities=!!n&&r.utils.versionCompare(t.version,n.minServerVersion,">=");if(r.utils.versionCompare(t.version,"7.1.5",">=")){r.supportedFeatures.settingsDefaultView=true}if(r.utils.versionCompare(t.version,"7.2",">=")){r.supportedFeatures.recents=true;r.supportedFeatures.filters=true;r.supportedFeatures.populateList=true}if(r.utils.versionCompare(t.version,"7.2.1",">=")){r.supportedFeatures.bulkApi=true;r.supportedFeatures.fileUploadForDocs=true}if(r.utils.versionCompare(t.version,"7.6.0.0RC1",">=")){r.supportedFeatures.configurableSavedReportsChart=true}if(r.isNative&&$.os.tablet&&$.os.ipad&&r.utils.versionCompare($.os.version,"8",">=")){r.supportedFeatures.enumViaActionSheet=true}if(r.utils.versionCompare(t.version,r.config.localSecurity.minServerVersion,">=")){r.supportedFeatures.localSecurityServerSupport=true}if(r.utils.versionCompare(t.version,r.config.teamBasedAcl.minServerVersion,">=")){r.supportedFeatures.teamBasedAclServerSupport=true}this._patchConfig()},updateServerInfo:function M(){r.serverInfo=r.metadata.getServerInfo();this.updateSupportedFeatures()},_patchConfig:function A(){if(r.supportedFeatures.productsModule){r.config.modules.unsupportedModules=_.without(r.config.modules.unsupportedModules,"Products")}else if(!_.contains(r.config.modules.unsupportedModules,"Products")){r.config.modules.unsupportedModules.push("Products")}if(r.supportedFeatures.fileUploadForDocs){r.config.modules.nonCreatableModules=_.without(r.config.modules.nonCreatableModules,"Documents")}else if(!_.contains(r.config.modules.nonCreatableModules,"Documents")){r.config.modules.nonCreatableModules.push("Documents")}},isSevenUp:function C(e){return e?r.utils.versionCompare(e.version,"7.0RC",">="):false},resetMeta:function R(e,t){var n=r.cache.get("app:build")!==r.config.appBuild;var i=e||!r.config.cacheMeta||n;var a=r.metadata.getHash();if(i){r.logger.debug("Resetting meta");r.metadata.clearCache();r.cache.cut("user");var s=JSON.parse(JSON.stringify(r.baseMetadata));if(!e&&a&&!n)s._hash=a;r.metadata.set(s,false,true);r.cache.set("app:build",r.config.appBuild);r.loginManager.handleAppUpgrade()}if(i||t){r.cache.set("app:synced","0")}r.isSynced=!t&&!i&&r.config.cacheMeta&&r.cache.get("app:synced")==="1";r.logger.debug("App is synced: "+r.isSynced)},resetAuth:function D(){r[r.config.authStore].cut("AuthAccessToken");r[r.config.authStore].cut("AuthRefreshToken")},saveUser:function I(){r.cache.set("user",r.user.toJSON())},restoreUser:function O(){r.user.set(r.cache.get("user")||{})},cleanStores:function N(e){var t=[];e=e||function(){};_.each(r.nomad.stores,function n(e){t.push(_.bind(e.cutAll,e))});async.parallel(t,e)},getSetting:function F(e){return this._fetchCacheItem(this.SETTINGS_CACHE_KEY)[e]},setSetting:function B(e,t){this._setCacheItem(this.SETTINGS_CACHE_KEY,e,t)},removeSetting:function P(e){if(e){this._removeCacheItem(this.SETTINGS_CACHE_KEY,e)}},getLastState:function U(e){return this._fetchCacheItem(this.LAST_STATE_CACHE_KEY)[e]},setLastState:function Y(e,t){this._setCacheItem(this.LAST_STATE_CACHE_KEY,e,t)},removeLastState:function H(e){this._removeCacheItem(this.LAST_STATE_CACHE_KEY,e)},_fetchCacheItem:function G(e){return r.cache.get(e)?r.cache.get(e):{}},_saveCacheItem:function j(e,t){r.cache.set(e,t)},_setCacheItem:function V(e,t,n){var i=this._fetchCacheItem(e);if(_.isObject(t)){i=_.extend(i,t)}else{i[t]=n}this._saveCacheItem(e,i)},_removeCacheItem:function z(e,t){if(t){var n=this._fetchCacheItem(e);delete n[t];this._saveCacheItem(e,n)}else{r.cache.cut(e)}},resetBulkLoader:function q(){m.reset()},enableOffline:function W(e){r.offline.userEnabled=_.isUndefined(r.nomad.getSetting("offlineEnabled"))?true:!e&&Boolean(r.nomad.getSetting("offlineEnabled"))},getRelationshipLink:function K(e,t){var n=r.metadata.getModule(e);var i=_.find(n.fields,function(e){if(e.type==="link"){var n=r.metadata.getRelationship(e.relationship);return n&&(n.lhs_module===t||n.rhs_module===t)}});return i?i.name:null},getRelationship:function J(e,t){var n=r.metadata.getModule(e);var i=n.fields[t].relationship;return r.metadata.getRelationship(i)},onPause:function X(e){r.logger.debug("App was paused");r.logger.debug(e);this.timePaused=(new Date).getTime();_.each(r.modules,function(e){if(_.isFunction(e.onAppPause)){e.onAppPause()}});r.controller.layoutManager.onAppPause()},onResume:function Z(e){var t=((new Date).getTime()-(this.timePaused||0))/1e3;r.logger.debug("App resumed: "+t);r.logger.debug(e);_.each(r.modules,function(e){if(_.isFunction(e.onAppResume)){e.onAppResume()}});if(r.isSynced&&p.isActive()){p.show(function(){r.nomad._syncedAppStart()})}r.controller.layoutManager.onAppResume();_.delay(function(){var e=d;if(e!==r.nomad.computeOrientation()){r.trigger("app:orientation:changed",window.orientation)}},1e3);this._checkTrial()},onMemoryWarning:function Q(){r.controller.clean();r.logger.warn("App received memory warning");r.analytics.trackEvent("device","low-memory")},onBackButtonClicked:function ee(){r.analytics.trackEvent("device","back");if(r.overlay.isActive()){return}r.nomad.dismissAlerts();if(document.activeElement){document.activeElement.blur()}r.controller.handleBackButton()},onOrientationChange:function te(){var e=this;var t=$("body");if(r.isTablet&&document.activeElement)document.activeElement.blur();t.addClass("rotate");_.delay(function(){t.removeClass("rotate");if($.os.ios&&r.utils.versionCompare($.os.version,"7",">=")){window.scrollTo(0,window.scrollY)}e.computeOrientation();r.analytics.trackEvent("orientation",window.orientation);r.trigger("app:orientation:changed",window.orientation)},1e3)},computeOrientation:function ne(){if(r.isTablet&&(r.config.deviceMode.landscape||r.config.deviceMode.portrait)){if(r.config.deviceMode.landscape){d="landscape"}if(r.config.deviceMode.portrait){d="portrait"}}else{if($.os.ios){d=window.orientation===90||window.orientation===-90?"landscape":"portrait"}else{d=document.body.clientWidth>document.body.clientHeight?"landscape":"portrait"}}var e=$.os.ios?d==="portrait"?screen.height-window.innerHeight:screen.width-window.innerHeight:0;h.landscape=", height="+(screen.width-e);h.portrait=", height="+(screen.height-e);if(d==="landscape"){if($.os.ios&&r.isTablet){f.setAttribute("content",h.default+h.landscape)}$("html").removeClass("portrait").addClass("landscape")}else{if($.os.ios&&r.isTablet){f.setAttribute("content",h.default+h.portrait)}$("html").removeClass("landscape").addClass("portrait")}return d},getOrientation:function ie(){return d},dismissAlerts:function re(){r.alert.dismissAll("success");r.alert.dismissAll("error")},supportsFavs:function ae(e){var t=r.metadata.getModule(e);return t?t.favoritesEnabled:false},supportsMyItems:function se(e){var t=r.metadata.getModule(e);return t?!_.isUndefined(t.fields.assigned_user_id):false},buildLinkRoute:function oe(e,t,n,i,r){var a=_.isString(e)?e:e.get("module");a+="/"+t+"/link/"+n;if(i){a+="/"+i}if(r){a+="/"+r}return a},contextMetaViews:{list:{numberOfItems:2},detail:{numberOfItems:999},all:{numberOfItems:999,customModsOnly:true,useVarDef:true}},contextMeta:{},initializeContextMeta:function le(){var e=this;_.each(e.contextMetaViews,function(t,n){e.contextMeta[n]=e.contextMeta[n]||{};var i=t.type||n;var a=_.keys(r.metadata.getModules());if(t.customModsOnly){a=_.reject(a,function(e){return r.nomad.isStandardModule(e)})}_.each(a,function(t){if(r.metadata.getModule(t)){var a=r.data.createBean(t);e.contextMeta[n][t]=e.calculateContextMeta(a,t,i)}})})},calculateContextMeta:function ue(e,t,n){var i=this.contextMetaViews[n].numberOfItems||999;var a=r.metadata.getView(t,n);var s=[];var o;if(this.contextMetaViews[n].useVarDef){s=[r.metadata.getModule(t)]}else if(a){s=a.panels}_.each(s,function(t,n){o=e.getContextMetaData(t.fields,i)});return o},getContextMeta:function ce(e,t){var n=this.contextMeta[e]||{};return t?n[t]:n},isStandardModule:function de(e){return _.contains(r.config.modules.knownModules,e)},initSubpanels:function fe(){var e=r.metadata.getModuleNames({filter:"visible"});e.push("Users");_.each(e,function(t){var n=r.metadata.getModule(t,"layouts");var i=n?n.subpanels:null;if(!i||!i.meta||!_.isArray(i.meta.components))return;var a=[];_.each(i.meta.components,function(n,i){var s;var o;try{s=r.data.getRelatedModule(t,n.context.link);o=r.nomad.getRelationship(t,n.context.link)}catch(l){s=null;o=null}if(!_.contains(e,s))s=null;if(s&&o){n.module=s;n.creatable=(_.isUndefined(n.canCreate)&&_.isUndefined(n.creatable)?true:n.canCreate||n.creatable)&&!_.contains(r.config.modules.nonCreatableModules,s);n.linkable=(_.isUndefined(n.canLink)&&_.isUndefined(n.linkable)?true:n.canLink||n.linkable)&&!_.contains(r.config.modules.nonLinkableModules,s)&&!(_.contains(["Meetings","Calls","Notes","Tasks"],s)&&o.via_parent_id);n.unlinkable=_.isUndefined(n.unlinkable)?true:n.unlinkable}else{a.push(i)}});for(var s=0;s<a.length;++s){i.meta.components.splice(a[s]-s,1)}})},hasLinkableSubpanels:function he(e){return _.any(e,function(e){return e.linkable&&r.acl.hasAccess("list",e.module)})},hasCreatableSubpanels:function pe(e){return _.any(e,function(e){return e.creatable&&r.acl.hasAccess("create",e.module)})},getSubpanels:function me(e){var t=r.metadata.getModule(e,"layouts").subpanels;return t&&t.meta?t.meta.components:[]},canCreateModule:function _e(e){var t=r.metadata.getModuleNames({filter:["visible"],access:"create"});return _.contains(t,e)&&!_.include(r.config.modules.nonCreatableModules,e)},hasAccessToReqFields:function ge(e,t){var n=t||"edit";var i="edit";if(!r.metadata.getView(e,i)){return false}var a=r.metadata.getModule(e).fields;var s=a.assigned_user_name;var o=["team_name"];if(s&&s.type==="relate"){o.push(s.name,s.id_name)}return!_.chain(r.metadata.getView(e,i).panels[0].fields).filter(function(e){if(_.contains(o,e.name)){return false}return a[e.name]&&a[e.name].required}).find(function(t){return!r.acl.hasAccess(n,e,{field:t.name})}).value()},canCreateRelated:function ve(e,t,n){return this.canCreateModule(e)&&this._getSubpanel(t,n).creatable},canLinkRelated:function ye(e,t){return this._getSubpanel(e,t).linkable},canUnlinkRelated:function be(e,t){return this._getSubpanel(e,t).unlinkable},canDisplay:function xe(e,t){return!(e.context.get("link")&&(t.type==="parent"||t.type==="relate"&&_.include(e.relateFields,t.name)))},_getSubpanel:function we(e,t){return _.find(this.getSubpanels(e),function(e){return e.context.link===t})||{}},getSingularModuleName:function Le(e){return r.lang.getModuleName(e)},getPluralModuleName:function Se(e){return r.lang.getModuleName(e,{plural:true})},showEmailBody:function Ee(e,t){var n=_.isArray(e)?e[0]:e;var i=t.get(n.name);var a=r.view.fields.EmailbodyField.getPlainTextValue(n.name,t);var s="emailbody-edit";var o=r.context.getContext({create:true});o.prepare();r.controller.loadDynamic({layoutDef:{className:"EmailBodyView",gaTrack:"EmailBodyView",meta:{components:[{view:s,editedFieldName:r.lang.get(n.label,"Emails"),value:i||r.nomad.utils.nl2br(a)}]},context:o}})},isEmptyValue:function ke(e){return _.isNull(e)||_.isUndefined(e)||!_.isNumber(e)&&_.isEmpty(e)||_.isNumber(e)&&!_.isFinite(e)},redraw:function Te(e){var t=$(document.body);var n=$("<style> body {opacity: 0.99;}</style>");function i(){t.append(n);_.delay(function(){n.remove()},e)}if(!e){i()}else{_.delay(i,e)}},configure:function Me(e){var t=e.serverUrl;var n=e.pageUrl;if(t){r.analytics.trackEvent("deeplink","server",null,null)}if(n){r.analytics.trackEvent("deeplink","page",null,null)}function i(){var e=n.replace("#","")||r.nomad.DEFAULT_ROUTE;r.controller.navigate({url:e,initiator:c.CONFIGURE})}if(r.isNative&&_.isEmpty(t)||_.isEmpty(t)&&!_.isEmpty(n)){i();return}r.loginManager.reconfigure(e,function a(){i()})},updateAuthStore:function Ae(){if(r.isNative){r.keychain.OAUTH["meta:hash"]=r.metadata.getHash();r.keychain.OAUTH["userpref:hash"]=r.user.get("_hash")}},isDownloadTokenSupported:function Ce(){return!_.isEmpty(r.api.getDownloadToken())},getFileOptions:function Re(){var e=r.nomad.isDownloadTokenSupported();return{htmlJsonFormat:false,iframe:false,passOAuthToken:!e,passDownloadToken:e}},getProductVersion:function De(){return r.clientInfo.app.productVersion+"."+r.clientInfo.app.productBuild+(r.config.env!=="prod"?" ("+r.config.env+")":"")+(_.isEmpty(r.config.buildTag)?"":" "+r.config.buildTag)},getServerVersion:function Ie(){return r.serverInfo&&r.api.isAuthenticated()?r.serverInfo.version+" "+r.serverInfo.flavor:"N/A"},getServerUrl:function Oe(){return r.config.siteUrl+"/rest/v"+r.config.restVersion},getDesktopUrl:function Ne(){return r.config.siteUrl+"?mobile=0"},canFollow:function Fe(e){var t=e.module;return r.serverInfo.isSevenUp&&_.contains(r.config.modules.followableModules,t)&&r.acl.hasAccessToModel("view",e)},getModuleRelationships:function Be(e){var t=r.metadata.getModule(e);if(_.isEmpty(t.layouts.subpanels)){return}var n=t.layouts.subpanels.meta.components;var i=_.map(n,function(e){return e.context.link});var a=_.select(t.fields,function(e){return _.contains(i,e.name)&&e.type==="link"});return _.chain(a).pluck("name").map(function(t){return r.nomad.getRelationship(e,t)}).select(function(e){return!_.isEmpty(e)}).map(function(e,t){e.label=_.find(n,function(e){return e.context.link===a[t].name}).label;return e}).value()},configureSugarLogic:function Pe(){if(r.isSynced){var e=[r.view.views.EditView,r.view.views.DetailView,r.view.views.ListView];_.each(e,function(e){var t=e.prototype.plugins;var n=t.indexOf("SugarLogic");var i=n!==-1;if(r.config.sugarLogic.enabled&&!i){t.push("SugarLogic")}else if(!r.config.sugarLogic.enabled&&i){t.splice(n,1)}})}},setFontSize:function Ue(e){e||(e=r.config.ui.defaultFontSize);document.documentElement.style.fontSize=r.config.ui.fontSizes[e]+"px"},setHTMLDirection:function Ye(){var e=r.user.getPreference("language")||r.cache.get("lang");var t=["ar_SA","he_IL"];var n=_.contains(t,e)||r.config.ui.rtl||false;$("html").toggleClass("rtl",n);r.lang.direction=n?r.lang.DIRECTION_RTL:r.lang.DIRECTION_LTR},buildBulkRequest:function He(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t;var n="/v"+r.config.restVersion;var i=e.params;if(e.limit){e.params=e.params||{};i.max_num=e.limit}t=r.api.buildURL.call({serverUrl:n},e.module,null,e.attributes,e.params);return{url:t,method:e.method||"GET",headers:e.headers,data:e.data}},syncApp:function Ge(){$("html").addClass("syncApp");r.sync({callback:function e(t){var n=function i(){p.show(function(){m.setupBulkLoad(r.nomad._syncedAppStart)});r.overlay.hide("app:sync",true);$("html").removeClass("syncApp")};if(!t){g.start({migrate:true}).finally(function(){r.nomad.updateServerInfo();if(r.supportedFeatures.dashboards){r.nomad.dashboards.reset();r.nomad.dashboards.start();r.nomad.dashboards.fetchDashboards({notifyIfChanged:false},function(e){if(e){r.logger.error("Couldn't preload dashboards. Error: "+e);a.showAlert(r.lang.get("ERR_MOBILE_DASHBOARDS_FETCHING"))}n()})}else{n()}})}}})},getFtsEnabledModules:function je(){if(r.supportedFeatures.fts){var e=[];_.each(r.metadata.getModules(),function(t,n){if(t.ftsEnabled){e.push(n)}},this);return e}else{return null}},redirectToNativeApp:function Ve(){r.nomad._redirectToNativeApp()},initNavigation:function ze(){r.navigation={manager:o,history:new s};Backbone.history=r.navigation.history;r.navigation.manager.init()},isTeamBasedAclEnabledForModule:function $e(e){return r.config.teamBasedAcl.enabled&&r.supportedFeatures.teamBasedAclServerSupport&&!_.contains(r.config.teamBasedAcl.unsupportedModules,e)&&r.metadata.getModule(e,"isTBAEnabled")},utils:i};r.augment("nomad",v)},function(e,t){"use strict";var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=SUGAR.App;var r=/(?:(?:(?:(?:(?:(?:https?)|ftp|itms|itms-apps):\/\/)|skype:)[a-z0-9-\._~\:\/?#[\]@!$&'()*+,;=%]+)|(?:[a-z0-9]{1}(?:[a-z0-9-]+\.)+(?:com|net|gov|edu|us)(?:(?:\?|\/)[a-z0-9-\._~\:\/?#[\]@!$&'()*+,;=%]+)?))/gi;var a=/[.?,!]+$/;var s={"<":"&lt;",">":"&gt;","'":"&#x27;","/":"&#x2F;","\n":"<br>"};var o=_.extend({},s,{"&":"&amp;",'"':"&quot;"});$.merge=function(){return _.union.apply(this,arguments)};_.extend(async,{retry:function l(e,t,n){var i=5;var r=[];if(typeof e==="function"){n=t;t=e;e=i}e=parseInt(e,10)||i;var a=function s(i,a){var s=function o(e,t){return function(n){e(function(e,i){n(!e||t,{err:e,result:i})},a)}};while(e){r.push(s(t,!(e-=1)))}async.series(r,function(e,t){t=t[t.length-1];(i||n)(t.err,t.result)})};return n?a():a}});e.exports={urlHasProtocolRegExp:/^(?!javascript)[a-z-]+:/i,augmentZeptoDetect:function u(e){var t=$.os;var n=$.browser;t.desktop=!e&&(n.chrome||n.safari)&&!(t.phone||t.tablet||t.ipod||t.silk||t.kindle||t.rimtabletos||t.wp||t.blackberry||t.bb10||t.playbook||t.touchpad);

n.chromeMobile=n.chrome&&!e&&!t.desktop&&(t.ios||t.android&&t.phone);n.chromeWeb=n.chrome&&!e},execRegex:function c(e,t,n){var i;while((i=t.exec(e))!==null){if(i.index===t.lastIndex){t.lastIndex++}n(i)}},sizePicture:function d(e){var t=parseInt(e.height,10);var n=parseInt(e.width,10);var i=e.image.naturalHeight;var r=e.image.naturalWidth;if(i<r){e.sizeProp=t/i*r+"px "+t+"px"}else{e.sizeProp=n+"px "+n/r*i+"px"}},stripLastEmptyStrings:function f(e){var t=e.split("\n");while(t.length>0){if(_.isEmpty(_.last(t))){t.pop()}else break}return t.join("\n")},minutesToQuarterHours:function h(e){e=parseInt(e,10);if(e===0)return e;if(e<8)return 15;var t=Math.floor(e/15);var n=e%15;if(n>7)t=t+1;return t*15},pad:function p(e,t,n){n=n||"0";e=String(e);return e.length>=t?e:new Array(t-e.length+1).join(n)+e},getPrimaryEmail:function m(e,t){var n=_.find(e,this.isPrimaryEmail);if(t&&n){return n.email_address}return n},replaceGuid:function g(e,t){var n=/([\w\d]{8}\-[\w\d]{4}-[\w\d]{4}-[\w\d]{4}-[\w\d]{12})/;return e.replace(n,t)},extractAndSortEmails:function v(e){var t=_.flatten(_.map(e,_.values));t=_.reject(t,function(e){return Number(e.invalid_email)||Number(e.opt_out)});t=_.sortBy(t,function(e){return Number(e.primary_address)?0:1});t=_.pluck(t,"email_address");return t},isPrimaryEmail:function y(e){var t=e.primary_address;if(!_.isBoolean(t)){t=!!parseInt(e.primary_address,10)}return t},nl2br:function b(e){var t=e||"";t=String(t);return t.replace(/\n|\r|\r\n/g,"<br />")},iso2sugar:function x(e,t){if($.os.android&&(i.isNative||t.nativeSupport))return e;return e.replace(/\.?\d+?Z/,"+00:00")},getTimeZoneOffsetString:function w(e){var t=e||(new Date).getTimezoneOffset();var n=t>=0?"+":"-";t=Math.abs(t);var i=Math.floor(t/60);var r=t%60;return n+this.pad(i,2)+":"+this.pad(r,2)},getHash:function L(){var e=window.location.hash;if(e){e=e.split("~")[0]}return e||"#"},resolveUrl:function S(e,t){var n=document,i=n.getElementsByTagName("base")[0],r=i&&i.href,a=n.head||n.getElementsByTagName("head")[0],s=i||a.appendChild(n.createElement("base")),o=n.createElement("a"),l;s.href=t;o.href=e;l=o.href;if(i)i.href=r;else a.removeChild(s);return l},merge:function(){function e(e,t){return t}return function t(n,i,r){var a;if(_.isUndefined(n))a=i;else if(_.isUndefined(i))a=n;else{var s=_.first(arguments,2);var o=_.map(s,_.keys);var l=_.intersection.apply(_,o);var u={};_.each(s,function(e,t){_.each(o[t],function(t){u[t]=e[t]})});if(_.isUndefined(r))r=e;_.each(l,function(e){u[e]=r(n[e],i[e])});return u}return _.clone(a)}}(),deepClone:function E(e){var t={};_.each(e,function(e,n){t[n]=_.isObject(e)?E(e):e});return t},getOfflineStatusClass:function k(){var e=i.offline.status;if(e){if(e.state===i.offline.STATE.ERROR){return"status-error"}else if(e.state===i.offline.STATE.WARNING){return"status-warning"}}return"status-success"},humanFileSize:function(){var e=" K M G T P E Z Y".split(" ").map(function(e){return e+"B"});function t(t,n){var i=0;var r=1024;var a=n?0:1;while(t>r/10&&++i<e.length-1){t/=r}this.value=(t+.05).toFixed(a);this.units=e[i]}t.prototype._i18nUnits=function(){var e="LBL_FILE_SIZE_UNITS_"+this.units;var t=i.lang.get(e);return t===e?null:t};t.prototype.toString=function(e){var t=e&&this._i18nUnits()||this.units;return this.value+" "+t};return function(e,n){return e!==-1?new t(e,n):null}}(),isErrorEmulationEnabled:function T(){return i.config.errorEmulation.enabled&&i.user.get("user_name")===i.config.errorEmulation.user.toLowerCase()},parseQueryString:function M(e){function t(e,t){var n=String(e).replace(/^&/,"").replace(/&$/,"").split("&"),i=n.length,r,a,s,o,l,u,c,d,f,h,p,m,_,g,v,y=function b(e){return decodeURIComponent(e.replace(/\+/g,"%20"))};if(!t){t=this.window}for(r=0;r<i;r++){h=n[r].split("=");p=y(h[0]);m=h.length<2?"":y(h[1]);while(p.charAt(0)===" "){p=p.slice(1)}if(p.indexOf("\x00")>-1){p=p.slice(0,p.indexOf("\x00"))}if(p&&p.charAt(0)!=="["){g=[];_=0;for(a=0;a<p.length;a++){if(p.charAt(a)==="["&&!_){_=a+1}else if(p.charAt(a)==="]"){if(_){if(!g.length){g.push(p.slice(0,_-1))}g.push(p.substr(_,a-_));_=0;if(p.charAt(a+1)!=="["){break}}}}if(!g.length){g=[p]}for(a=0;a<g[0].length;a++){f=g[0].charAt(a);if(f===" "||f==="."||f==="["){g[0]=g[0].substr(0,a)+"_"+g[0].substr(a+1)}if(f==="["){break}}u=t;for(a=0,v=g.length;a<v;a++){p=g[a].replace(/^['"]/,"").replace(/['"]$/,"");c=a!==g.length-1;l=u;if(p!==""&&p!==" "||a===0){if(u[p]===d){u[p]={}}u=u[p]}else{s=-1;for(o in u){if(u.hasOwnProperty(o)){if(+o>s&&o.match(/^\d+$/g)){s=+o}}}p=s+1}}l[p]=m}}}var n={};t(e,n);return n},docIsAvailable:function A(e){return!_.isEmpty(e)&&(!i.offline||i.offline.isOnline())},isValidDate:function C(e){return _.isDate(e)&&!isNaN(e.getTime())},isModelSynchronized:function R(e,t){var n=["_last_fetched","_client_date_modified"];var r;var a;if(e.get("date_modified")!==t.date_modified){return false}a=_.omit(t,n);r=_.omit(e.toJSON(),n);return _.isEmpty(i.utils.getChangedProps(r,a,false))},getObjectPrimitives:function D(e){var t={};function n(e){return!_.isObject(e)&&!_.isFunction(e)}_.each(e,function(e,i){if(n(e)){t[i]=e}});return t},waitFor:function I(e,t,n){var i=false;var r=new Date-0;var a=false;n=n||2e3;var s=function o(){a=new Date-0-r>n;i=e();if(!i&&!a){window.setTimeout(o,200)}else{t(a?{message:"Max wait timeout"}:null)}};window.setTimeout(s,200)},deepExtend:function O(){var e=this;if(arguments.length<1||n(arguments[0])!=="object"){return false}if(arguments.length<2)return arguments[0];var t=arguments[0];var i=Array.prototype.slice.call(arguments,1);var r;var a;var s;i.forEach(function(i){if((typeof i==="undefined"?"undefined":n(i))!=="object")return;for(var o in i){if(i[o]!==void 0){a=t[o];r=i[o];if(r===t)continue;if((typeof r==="undefined"?"undefined":n(r))!=="object"||r===null){t[o]=r;continue}if((typeof a==="undefined"?"undefined":n(a))!=="object"){s=Array.isArray(r)?[]:{};t[o]=e.deepExtend(s,r);continue}if(Array.isArray(r)){s=Array.isArray(a)?a:[]}else{s=!Array.isArray(a)?a:{}}t[o]=e.deepExtend(s,r)}}});return t},isTabletLandscapeMode:function N(){return i.isTablet&&i.nomad.getOrientation()==="landscape"},isForecastConfigValid:function F(){var e=true;var t=i.metadata.getModule("Forecasts","config");var n=t.sales_stage_won;var r=t.sales_stage_lost;var a=t.sales_stage_won.concat(t.sales_stage_lost);var s=i.lang.getAppListStrings("sales_stage_dom");if(n.length===0||r.length===0||_.isEmpty(s)){e=false}else{e=_.every(a,function(e){return e!==""&&_.has(s,e)},this)}return e},getForecastNotSetUpMessage:function B(e){var t=e?"LBL_DASHLET_FORECAST_NOT_SETUP_ADMIN":"LBL_DASHLET_FORECAST_NOT_SETUP";var n=i.lang.get(t,"Forecasts");var r=i.config.siteUrl.indexOf("?")===-1?"?":"&";if(e){var a=i.lang.get("LBL_DASHLET_FORECAST_CONFIG_LINK_TEXT","Forecasts");n+='  <a class="lnk-non-forecast" href="'+i.config.siteUrl+r+'mobile=0#Forecasts/config">'+a+"</a>"}return n},wrapAsyncCallback:function P(e){return{success:function t(n){e(null,n)},error:e}},isAccessibleModule:function U(e,t){t=t||"list";return!_.contains(i.config.modules.unsupportedModules,e)&&_.contains(i.metadata.getModuleNames({filter:"visible",access:t}),e)},getClosedStatusValue:function Y(e){var t={Calls:"Held",Tasks:"Completed",Meetings:"Held"};return t[e]},isModuleVisible:function H(e){var t=i.metadata.get().modules_info[e];return t&&t.visible},getForecastModule:function G(){return i.metadata.getModule("Forecasts","config").forecast_by||(this.isModuleVisible("RevenueLineItems")?"RevenueLineItems":"Opportunities")},getHashCode:function j(e){var t=0;var n;var i;var r;if(e.length===0)return t;for(n=0,r=e.length;n<r;n++){i=e.charCodeAt(n);t=(t<<5)-t+i;t|=0}return t},charToHtmlEntity:function V(e,t){var n=void 0;var i=t?s:o;return i[e]||e},stringToHtmlEntities:function z(e){var t=this;var n=e.stringToTransform,i=e.allowUrlChars;var r="";_.each(n,function(e){r+=t.charToHtmlEntity(e,i)},this);return r},htmlEntitiesToString:function q(e){var t=e.stringToTransform,n=e.allowUrlChars;var i=n?s:o;var r=t;_.each(i,function(e,t){r=r.replace(new RegExp(e,"g"),t)});return r},escapeRegExp:function W(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},migrateKeyValueStore:function K(e,t){var n=i.config.env+":"+i.config.appId+":";if(e.get(n+"store:version")!==e.version){_.chain(localStorage).keys().filter(function(e){return e.indexOf(n)===0}).each(function(t){e.set(t,i.cache.get(t));localStorage.removeItem(t)}).value();e.set(n+"store:version",e.version)}var r=t.getAll();if(!_.isEmpty(r)){_.each(r,function(t,n){e.set(n,t)});t.cutAll()}},formatLinks:function J(e){var t="";if(e&&e.length>0){t=e.replace(r,_.bind(function(e){var t=e.match(a)||"";if(t){e=e.replace(a,"")}var n=this.urlHasProtocolRegExp.test(e)?e:"http://"+e;return'<a href="'+n+'">'+e+"</a>"+t},this))}return t},isElVisible:function X(e){return e&&e.get(0)&&e.get(0).offsetParent!==null},isDirectionLTR:function Z(){return i.lang.direction!==i.lang.DIRECTION_RTL},_normalizeUrl:function Q(e,t){if(t){e=encodeURI(e)}if(i.nomad.utils.urlHasProtocolRegExp.test(e))return e;if(/^\.\.\//.test(e)){var n=window.location.href.split("#")[0].split("index.html")[0];e=n+e;return e}return"http://"+e},buildActionHandlerName:function ee(e){return _.reduce(e.split(":"),function(e,t){return e+i.utils.capitalize(t)},"on")},isComponentChildOf:function te(e,t){var n=t.parentClass;var i=false;while(n){i=n===e;n=!i&&n.parentClass}return i},getRange:function ne(e,t){return(Math.floor(e/t)+1)*t}}},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(251);var a=n(252);var s={enabled:true,prefetch:{},storageSize:5,storageProvider:"sql",storageAdapter:"webSql",syncTimeout:5e3,debug:{render:false,online:true,forceMigrate:false,syncManagerEnabled:true,monitorStatus:true}};var o={start:function l(){var e=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.migrate,r=n===undefined?false:n;return Promise.try(function(){var t=i.cache.get("offline:version");var n=r||!t;i.config.offline=_.extend(s,i.config.offline);if(i.config.offline.debug.ignoreEnabled){i.config.offlineEnabled=true}i.offlineEnabled=i.offline.isOfflineEnabled();if(!i.offlineEnabled){if(t){e.onOfflineToggled(false);return e.stop({dropStorage:true})}}else{if(!i.offline.initStorage()){i.logger.error("Storage unavailable");i.trigger("offline:failure",i.offline.Error.StorageUnavailableError)}else{i.offline.registerEvents();if(!i.offline._initialized){i.offline.initialize()}return i.offline.prepareDb(n).then(function(){e.onOfflineStarted();return null}).catch(function(e){i.offline.uninitialize();i.offlineEnabled=false;if(e.code===5){i.trigger("offline:failure",i.offline.Error.StorageUnavailableError)}throw e})}}})},stop:function u(){var e=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.dropStorage,r=n===undefined?false:n;var a=Promise.resolve();i.logger.debug("Offline mode disabled");i.offline.syncManager.dispose();i.offline.stopMonitorStatus();if(i.offline.isInitialized()){i.offline.uninitialize()}if(r){a=a.then(function(){return i.offline.dropStorage()})}return a.then(function(){return e.onOfflineToggled(false)})},onAppResume:function c(){if(i.api.isAuthenticated()&&i.offlineEnabled){return this.runDbStatsOperations()}},onOfflineStarted:function d(){i.offline.startSyncManager();i.offline.startMonitorStatus();this.onOfflineToggled(true);i.logger.debug("Offline started");return this.runDbStatsOperations()},onOfflineToggled:function f(e){i.trigger("offline:toggled",e);r.onOfflineToggled(e)},getOfflineDbStats:function h(){return new Promise(function(e,t){i.offline.storage.getStats({success:function n(t){var n=_.reduce(t.count,function(e,t){return e+=t},0);e(_.extend(t,{totalRecords:n}))},error:function r(e){t(new Error(e))}})})},runDbStatsOperations:function p(){var e=n(247);var t=n(229);return this.getOfflineDbStats().then(function(n){var i=e.getState();if(i.state===t.State.IDLE){a.cleanUp(n)}r.processPeriodicAnalytics(n);return null}).catch(function(e){return i.logger.error(e.message)})}};i.augment("offlineProvider",o,false);e.exports=o},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(249);e.exports={LAST_SENT_TIMESTAMP:"offline:db_analytics:last_sent_timestamp",_onBulkLoadProgress:function a(e,t){var r=n(247);var a=n(229);if(e===a.ProgressEventType.COMPLETE&&t===a.BucketType.COMPLETE){(function(){var e=[];_.each(r.getCache().status,function(t,n){if(t.status!==200){e.push(_.extend({name:n},t))}});if(e.length===0){i.analytics.trackEvent("bulkload","success",null,i.clientInfo.device.uuid)}else{i.analytics.trackEvent("bulkload","failure",null,i.clientInfo.device.uuid);_.each(e,function(e){i.analytics.trackEvent("bulkload-error-"+e.name,e.status,undefined,i.clientInfo.device.uuid)})}})()}},onOfflineToggled:function s(e){if(!i.config.analytics.enabled){return}if(e){i.nomad.setLastState(this.LAST_SENT_TIMESTAMP,(new Date).getTime());i.events.on("offline:bulkload:progress",this._onBulkLoadProgress,this);i.events.on("offline:cleanup:completed",this._trackModulesLimitHit,this)}else{i.events.off("offline:bulkload:progress",this._onBulkLoadProgress,this);i.events.off("offline:cleanup:completed",this._trackModulesLimitHit,this);i.nomad.removeLastState(this.LAST_SENT_TIMESTAMP)}},_trackModulesLimitHit:function o(e){_.each(e,function(e){i.analytics.trackEvent("db-limit",e.moduleName,null,i.clientInfo.device.uuid)})},processPeriodicAnalytics:function l(e){if(!i.config.analytics.enabled){return}var t=i.nomad.getLastState(this.LAST_SENT_TIMESTAMP);var n=(new Date).getTime();var r=i.config.analytics.dbAnalyticsInterval*60*60*1e3;if(!t){i.nomad.setLastState(this.LAST_SENT_TIMESTAMP,n);return}var a=n-t;if(a>=r){this._sendRecordsCountAnalytics(e);i.nomad.setLastState(this.LAST_SENT_TIMESTAMP,n)}},_sendRecordsCountAnalytics:function u(e){_.each(e.count,function(e,t){var n=r.getRange(e,1e3);i.analytics.trackEvent("db-"+t+"-count",n,undefined,i.clientInfo.device.uuid)});i.analytics.trackEvent("db-count",r.getRange(e.totalRecords,1e3),undefined,i.clientInfo.device.uuid)}}},function(e,t,n){"use strict";var i="db_cleanup";var r=SUGAR.App;e.exports={_working:false,_offlineConfirmedCacheKey:"offline:cleanup:confirmed",cleanUp:function a(e){var t=this;if(this._working){return Promise.resolve()}var i=n(250);var a=r.nomad.getLastState(this._offlineConfirmedCacheKey);var s=e?Promise.resolve(e):i.getOfflineDbStats();return s.then(function(e){var n=t._getModulesToCleanUp(e);if(_.isEmpty(n)){return null}return a?t.cleanUpStorage(n):t.showCleanupAlert(n)}).catch(function(e){return r.logger.error(e.message)})},showCleanupAlert:function s(e){var t=this;var i=n(253);return new Promise(function(e){i.showAlert(r.lang.get("ERR_OFFLINE_CLEAN_UP_CONFIRMATION"),{callback:function n(i){r.nomad.setLastState(t._offlineConfirmedCacheKey,true);r.nomad.dismissAlerts();e()}})}).then(function(){return t.cleanUpStorage(e)})},_getModulesToCleanUp:function o(e){var t=[];var n=r.config.offline.staticModules||[];var i=r.config.offline.dbLimits;_.each(e.count,function(e,r){if(!_.contains(n,r)&&e>(i.modules[r]||i.default)){t.push({moduleName:r,recordsCount:e})}});return t},cleanUpStorage:function l(e){var t=this;return new Promise(function(n,a){var s=(new Date).getTime();var o=1e3*60*60*24;var l=new Date(s-o*r.config.offline.cleanUp.defaultPurgeInterval);t._working=true;l=r.utils.getTimestamp(l);r.overlay.show("offline:cleanup",{spinner:false});r.alert.show(i,{level:"info",messages:r.lang.get("LBL_OFFLINE_DB_CLEANING_IN_PROGRESS"),autoClose:false,closable:false});r.offline.compactStorage({expirationDate:l,modules:e,callback:function u(s){r.overlay.hide("offline:cleanup",{spinner:false});r.alert.dismiss(i);r.events.trigger("offline:cleanup:completed",e);t._working=false;s?a(s):n()}})}).then(function(){r.alert.show(i,{level:"success",messages:r.lang.get("LBL_OFFLINE_DB_CLEANING_COMPLETED"),autoClose:true,closable:true})}).catch(function(e){if(e!==r.offline.Error.OfflineDisabledError){r.alert.show(i,{level:"error",messages:r.lang.get("ERR_OFFLINE_DB_CLEANING_ERROR"),autoClose:true,closable:true})}})}}},function(e,t,n){"use strict";var i=SUGAR.App;var r;r=e.exports={showAlert:function a(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=t.title,r=n===undefined?i.lang.get("LBL_WARNING"):n,a=t.buttonLabels,s=a===undefined?i.lang.get("LBL_OK"):a,o=t.callback;this._showAlert(e,o,r,s)},showConfirm:function s(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=t.title,r=n===undefined?i.lang.get("LBL_CONFIRM"):n,a=t.buttonLabels,s=a===undefined?[i.lang.get("LBL_NO"),i.lang.get("LBL_YES")]:a,o=t.callback;this._showConfirm(e,o,r,s)},showActionSheet:function o(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_.defaults(t,{title:""});this._showActionSheet(e,t)},showPrompt:function l(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_.defaults(t,{title:i.lang.get("LBL_CONFIRM"),defaultText:"",inputStyle:1,buttonLabels:[i.lang.get("LBL_CANCEL_BUTTON_LABEL"),i.lang.get("LBL_OK")],callback:function n(){}});this._showPrompt(e,t)}};if(true){_.extend(r,n(254))}else{_.extend(r,require("%app.js%/native/dialog"))}},function(e,t,n){"use strict";var i=n(255);e.exports={_showAlert:function r(e,t,n,i){alert(e);if(t){t()}},_showConfirm:function a(e,t,n,i){var r=confirm(e)?2:1;t(r)},_showActionSheet:function s(e,t){i.show(t.title,e,t.onSelectCb,t.onCancelCb)},_showPrompt:function o(e,t){var n=window.prompt(e,"");var i={buttonIndex:n!==null?2:1,input1:n};t.callback(i)}}},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(256);e.exports=r.extendView(a,"ActionSheet",{events:{"touchstart .item":"onItemTouchStart","touchmove .item":"onItemTouchMove","click .item":"onSelect","click .cancel":"onCancel"},name:"actionsheet",initialize:function s(e){var t=this;$(window).on("orientationchange.actionsheet",function(){$(t.popup).addClass("invisible");_.delay(function(){t.position()},1e3)});this.container=$("#actionsheet-overlay");this.orientationSupport=_.isNumber(window.orientation);_.defaults(e,{title:"",template:"actionsheet",items:[],onSelect:false,onCancel:false,cancelText:i.lang.get("LBL_CANCEL_BUTTON_LABEL")});this._super(e);this.show()},onItemTouchStart:function o(e){this._moved=false},onItemTouchMove:function l(e){this._moved=true},onSelect:function u(e){if(this._moved){this._moved=false;return false}var t=parseInt(e.target.dataset.index,10);var n=this.options.items[t];var i=true;if(this.options.onSelect){i=this.options.onSelect.call(this,n,t)}if(i!==false){this.remove()}},onCancel:function c(){this.remove();if(this.options.onCancel){this.options.onCancel.call(this)}},render:function d(){var e=this.options.template(this.options);var t=$(e);this.popup=t;this.container.empty();this.$el.empty().append(t).appendTo(this.container);_.delay(_.bind(this.position,this),20)},show:function f(){this.render();this.container.show();i.activeComponents.add(this)},hide:function h(){this.container.hide();if($.os.ios){r.redraw(100)}i.activeComponents.remove(this)},onClose:function p(){this.onCancel()},position:function m(){var e=this.popup;var t=this.orientationSupport&&_.contains([90,-90],window.orientation);e.toggleClass("compact",t);var n=document.documentElement;var i=e.get(0);var r=n.clientWidth;var a=n.clientHeight;var s=i.offsetWidth;var o=i.offsetHeight;var l=a-o;var u=r-s;var c;var d;if(l<=0){c=0}else{c=l/2}if(u<=0){d=0}else{d=u/2}e.css({top:c+"px",left:d+"px"}).removeClass("invisible")},remove:function g(){this._super();this.hide();i.activeComponents.remove(this.name);this.container.empty();$(window).off("orientationchange.actionsheet")}},{show:function v(e,t,n,r){return new i.view.views.ActionSheetView({title:e,items:t,onSelect:n,onCancel:r})}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(257);var s=r.extendView(a,"Static",{loadData:function o(e,t){}},{getOverridableMethods:function l(){return _.difference(a.getOverridableMethods(),["loadData"])}});e.exports=s},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(260);var o=i.view.NomadView=r.extendView(i.view.View,"Nomad",{ACTION_NAME:"component:action",shouldFetchContext:true,initialize:function l(e){e=e||{};if(e.globalEvents){this.globalEvents=e.globalEvents}this.config=i.config;var t=e.template||this.template;if(t){t=_.isString(t)?i.template.get(t):t;e.template=t}this._super(e);this.displayFields=_.getNested(this,"meta.panels.0.fields")||[]},onHeaderClick:function u(){},onAppPause:function c(){},onAppResume:function d(){},loadData:function f(e,t){return this._super(e,t)},delegateEvents:function h(e){if(!(e||(e=_.result(this,"events"))))return;_.extend(e,{"click a[href]":"handleLinkClick"});this._super(e)},_render:function p(){this.onBeforeRender();this._super();this.onAfterRender();this._rendered=true;this.trigger("view:after:render");return this},bindGlobalEvents:function m(){var e=this._populateGlobalEvents(this);_.each(e,function(e,t){e=_.isFunction(e)?e:this[e];i.events.on(t,e,this)},this);_.each(this.fields,function(e){_.each(e.globalEvents,function(e,t){e=_.isFunction(e)?e:this[e];i.events.on(t,e,this)},e)})},unbindGlobalEvents:function g(){var e=this._populateGlobalEvents(this);_.each(e,function(e,t){i.events.off(t,null,this)},this);_.each(this.fields,function(e){_.each(e.globalEvents,function(e,t){i.events.off(t,null,this)},e)})},_populateGlobalEvents:function v(e){var t=[];var n={};var i=function r(e,t){if(e){t.push(e.constructor.prototype.globalEvents);r(e.constructor.__super__,t)}};if(this.hasOwnProperty("globalEvents")){t.push(this.globalEvents)}i(e,t);_.each(t.reverse(),function(e){n=_.extend(n,e)});return n},initRelationshipFields:function y(e,t){var n=i.data.getRelationshipFields(e,t);if(n&&n.length){this.relationshipFields=_.map(n,function(e){return i.metadata.getModule(this.module).fields[e]},this)}return this.relationshipFields},getFieldNames:function b(e){if(!this.module)return[];var t=i.metadata.getModule(this.module,"mergedFields")||[];if(this.model instanceof i.Bean){if(this.model.canHaveAttachments()){t.push("attachment_list")}}if(this.relationshipFields){t=_.union(t,_.pluck(this.relationshipFields,"name"))}if(e){t=_.filter(t,function(e){var t=this._getFieldViewDef(e);if(_.isEmpty(t)){return false}return t.type!=="fieldset"&&r.canDisplay(this,t)},this)}return t},_getFieldViewDef:function x(e){var t;_.find(this.meta.panels[0].fields,function(n){if(n.name===e){t=n}else if(!_.isEmpty(n.fields)){t=_.find(n.fields,function(t){return t.name===e})}return t});return t},isEditView:function w(){return false},onAfterRender:function L(){},onAfterShow:function S(){if(this.collection){s.hideSyncAlert()}},onBeforeRender:function E(){},handleLinkClick:function k(e){if(e.defaultPrevented){return}var t=e.target.tagName.toLowerCase()==="a"?e.target:e.currentTarget;var n=t.getAttribute("href");if(/^#.*/.test(n)){e.preventDefault();e.stopPropagation();i.controller.navigate(n,{initiator:this.navigationName})}else if(r.utils.urlHasProtocolRegExp.test(n)){e.preventDefault();a.openUrl(n)}},abortActiveRequests:function T(){return false},onDetach:function M(){},propagateComponentAction:function A(e){this.trigger(this.ACTION_NAME,e)},handleComponentAction:function C(e,t){var n=this[e];if(_.isFunction(n)){n.call(this,t)}}},{getOverridableMethods:function R(){return["initialize","onBeforeRender","onAfterRender","onAfterShow","onAppPause","onAppResume","loadData","getHeaderConfig"]}});e.exports=o},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(253);var s;s=e.exports={sendEmail:function o(e){var t=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=n.subject,s=r===undefined?"":r,o=n.body,l=o===undefined?"":o;if(e.length>1){a.showActionSheet(e,{title:i.lang.get("LBL_MOBILE_CHOOSE_RECIPIENT"),onSelectCb:function u(e,n){return t._showEmailComposer(e,s,l)}})}else{this._showEmailComposer(e[0],s,l)}},sendConsoleLog:function l(){var e=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.email,r=n===undefined?i.config.about.supportEmail:n,a=t.subject,s=a===undefined?"":a,o=t.body,l=o===undefined?"":o;this._getConsoleLogFilename(function(t){e._showEmailComposer(r,s,l,t)})},shareRecord:function u(e){var t=i.nomad.utils.resolveUrl(i.config.siteUrl,window.location.href)+"#"+i.router.buildRoute(e.get("_module"),e.get("id"));var n={url:t,appId:i.config.brandName,module:r.getSingularModuleName(e.module),name:e.get("name")};n.subject=i.lang.get("TPL_RECORD_SHARE_SUBJECT",null,n);n.body=i.lang.get("TPL_RECORD_SHARE_BODY",null,n);this._share(n)},shareUrl:function c(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};t.url=e;t.shareLabel=i.lang.get("LBL_RECORD_SHARE_BUTTON");this._share(t)},sendSms:function d(e,t){var n=this;if(_.isArray(e)&&e.length>1){var r=i.lang.get("LBL_MOBILE_CHOOSE_PHONE");var s=this._buildNamedList(e);a.showActionSheet(s,{title:r,onSelectCb:function o(i,r){return n._showSmsComposer(n._extractValue(e,r),t)}})}else{this._showSmsComposer(this._extractValue(e),t)}},callPhone:function f(e){var t=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(n.model){_.extend(n,{module:n.model.module,recordId:n.model.id,recordName:n.model.get("name")})}if(_.isArray(e)&&e.length>1){var r=this._buildNamedList(e);a.showActionSheet(r,{title:i.lang.get("LBL_MOBILE_CHOOSE_PHONE"),onSelectCb:function s(r,a){i.telephony.callPhone(t._extractValue(e,a),n)}})}else{i.telephony.callPhone(this._extractValue(e),n)}},openUrl:function h(e){var t=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},s=n.encode,o=s===undefined?false:s;if(_.isArray(e)&&e.length>1){var l=_.map(e,function(e){_.keys(e)[0]});a.showActionSheet(l,{title:i.lang.get("LBL_MOBILE_CHOOSE_URL"),onSelectCb:function u(n,i){return t._browseUrl(r.utils._normalizeUrl(t._extractValue(e,i),o))}})}else{this._browseUrl(r.utils._normalizeUrl(this._extractValue(e),o))}},openWebPage:function p(e){this._browseWebPage(e)},showDateTimePicker:function m(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=t.mode,i=n===undefined?"showDatePicker":n,r=t.callback;this._showDateTimePicker(e,i,r)},openDoc:function g(e){var t=this;if(_.isArray(e)&&e.length>1){var n=_.map(e,function(e,t,n){return i.nomad.utils.replaceGuid(_.keys(e)[0],i.lang.get("LBL_MOBILE_DOC")+" "+(t+1))});a.showActionSheet(n,{title:i.lang.get("LBL_MOBILE_CHOOSE_DOC"),onSelectCb:function r(n,i){return t._openDocWorker(e,i)}})}else{this._openDocWorker(e)}},openAddress:function v(){var e=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=i.clientInfo.device;var r=!n.ios||n.ios&&!i.isNative?"g":"a";var s=t.showDirections;if(t.addresses){if(_.isArray(t.addresses)&&t.addresses.length>1){var o=_.map(t.addresses,function(e){return _.keys(e)[0]});a.showActionSheet(o,{title:i.lang.get("LBL_MOBILE_CHOOSE_LOCATION"),onSelectCb:function l(n,i){e._openMap(e._extractValue(t.addresses,i),r)}})}else{this._openMap(this._extractValue(t.addresses),r,s)}}else{this._openMapWithGeoLocation(t.location,r,s)}},registerForPushNotifications:function y(){this._registerForPushNotifications()},sendLocalNotification:function b(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e.title=e.title||i.config.brandName;this._sendLocalNotification(e)},_openDocWorker:function x(e,t){var n=_.clone(this._extractValue(e,t));var a=r.utils._normalizeUrl(n.url);n.url=a.replace("{download_token}",i.api.getDownloadToken()).replace("{oauth_token}",i.api.getOAuthToken());this._flushCacheUrl(n);n.openExternally?this._browseUrl(n.url):this._browseDoc(n)},_flushCacheUrl:function w(e){if(_.has(e,"noCache")&&!e.noCache){return}var t=e.url.split("#")[0];var n=[t,t.indexOf("?")!==-1?"&":"?","__ts=",+new Date];e.noCache=false;e.url=n.join("")},_openMap:function L(e,t,n){var r="";var a=t==="a"?"maps.apple.com":"maps.google.com";if(!e){e=""}else{var s="";if(e.country&&_.isString(e.country)){s=e.country.replace(/\s?\,\s?/g,",");if(/ of$/.test(s)||/ of the$/.test(s)){var o=s.split(",");s=o[o.length-1];for(var l=0;l<o.length-1;l++){s=s.concat(" "+o[l])}}else{s=e.country.replace(/\,/g,"")}}e=_.compact([e.street,e.city,e.state,e.postalcode,s]).join(",")}if(n){r="http://"+a+"/?saddr="+encodeURI("Current Location")+"&daddr="+encodeURI(e)}else{r="http://"+a+"/maps?q="+encodeURI(e)}i.logger.debug("Opening map: "+r);this._browseUrl(r)},_openMapWithGeoLocation:function S(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var r="";var s=t==="a"?"maps.apple.com":"maps.google.com";var o=new RegExp("^[-+]?([1-8]?\\d(.\\d+)?|90(\\.0+)?)$");var l=new RegExp("^[-+]?(180(\\.0+)?|((1[0-7]\\d)|([1-9]?\\d))(\\.\\d+)?)$");if(!o.test(e.latitude)||!l.test(e.longitude)){a.showAlert(i.lang.get("ERR_GEOLOCATION_INVALID_COORDINATES_MSG"));return}e=_.compact([e.latitude,e.longitude]).join(",");if(n){r="http://"+s+"/?saddr="+encodeURI("Current Location")+"&daddr="+encodeURI(e)}else{r="http://"+s+"/maps?q="+encodeURI(e)}i.logger.debug("Opening map: "+r);this._browseUrl(r)},_extractValue:function E(e,t){t=t||0;return _.isString(e)?e:_.values(e[t])[0]||e[t].value||e[t]},_buildNamedList:function k(e){return _.map(e,function(e){return _.keys(e)[0]+" - "+_.values(e)[0]})},redirectToNativeApp:function T(){s._redirectToNativeApp()}};if(true){_.extend(s,n(259))}else{_.extend(s,require("%app.js%/native/device"))}if(window.JASMINE){_.extend(r,s)}},function(e,t,n){"use strict";var i=n(248);var r=n(253);var a=SUGAR.App;e.exports={_showEmailComposer:function s(e,t,n){window.location="mailto:"+e+"?subject="+t+"&body="+n},_getConsoleLogFilename:function o(e){e()},_share:function l(e,t){var n=this;var i=a.lang.get("LBL_RECORD_SHARE_BUTTON");var s=[a.lang.get("LBL_EMAIL_BUTTON"),a.lang.get("LBL_SMS_BUTTON")];r.showActionSheet(s,{title:i,onSelectCb:function o(t,i){var r=encodeURIComponent(e.body+"\r\n\r\n"+e.url);if(i===0){n._showEmailComposer("",e.subject,r)}else{n._showSmsComposer("",r)}}})},_showSmsComposer:function u(e,t){if(t){if($.os.ios){window.location="sms:"+e+"&body="+t}else{window.location="sms:"+e+"?body="+t}}else{window.location="sms:"+e}},_callPhone:function c(e){window.location="tel:"+e},_browseUrl:function d(e){window.open(e)},_browseWebPage:function f(e){window.open(e)},_showDateTimePicker:function h(e,t,n){},_browseDoc:function p(e){if(e.oauth){this._downloadDoc(e)}else{this._browseUrl(e.url)}},_downloadDoc:function m(e){var t=this;var n=new window.XMLHttpRequest;var i="download_doc";n.open("GET",e.url);n.addEventListener("loadend",function(){a.alert.dismiss(i);var r=t._getBlob(n.response,e.file_mime_type);t._makeBlobUrl(r,function(e){window.location=e})},false);n.setRequestHeader("OAuth-Token",a.api.getOAuthToken());n.overrideMimeType("application/octet-stream; charset=x-user-defined");n.responseType="arraybuffer";n.send(null);a.alert.show(i,{level:"info",messages:a.lang.get("LBL_MOBILE_DOWNLOAD_STARTED",null,e.filename),autoClose:true,closeable:false})},_getBlob:function _(e,t){var n;try{n=new Blob([e],{type:t})}catch(i){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(i.name=="TypeError"&&window.BlobBuilder){var r=new BlobBuilder;r.append([e.buffer]);n=r.getBlob(t)}else if(i.name=="InvalidStateError"){n=new Blob([e.buffer],{type:t})}else{throw i}}return n},_makeBlobUrl:function g(e,t){var n=window.URL||window.webkitURL;var i=$.os.ios&&(a.utils.versionCompare($.os.version,7,"<")||$.browser.chromeMobile);if(n&&!i){t(n.createObjectURL(e))}else{r.onloadend=function(){t(r.result)};var r=new window.FileReader;r.readAsDataURL(e)}},_getGeoPlacemarks:function v(e,t){if(t&&t.errorCb){t.errorCb({code:4})}},_redirectToNativeApp:function y(){if($.os.desktop||i.getSetting("redirectDone")){i.setSetting("redirectDone",false);return}var e=window.location.hash.substr(1);var t=new RegExp("^Configure\\?/?");var n=t.test(e)?e:"Configure?page="+encodeURIComponent(e);

var r;if($.os.ios){i.setSetting("redirectDone",true);window.setTimeout(function(){window.location.reload()},5e3);r=a.config.deepLinking.scheme+":///"+n}else{r="intent://"+n+"#Intent;scheme="+a.config.deepLinking.scheme+";end"}window.location=r},_registerForPushNotifications:function b(){},_sendLocalNotification:function x(e){}}},function(e,t){"use strict";(function(t){var n={inProgress:{read:"LBL_LOADING",update:"LBL_SAVING",create:"LBL_SAVING","delete":"LBL_DELETING",unlink:"LBL_UNLINKING",backgroundFetch:"LBL_OFFLINE_SERVER_FETCH"},finished:{update:"LBL_SAVED",create:"LBL_SAVED","delete":"LBL_DELETED",unlink:"LBL_UNLINKED"}};var i="DATA_SYNCING";var r={requestsInProgress:null,init:function a(){this._subscribeSyncEvents();t.events.on("data:sync:error data:sync:abort",this.onSyncError,this)},_subscribeSyncEvents:function s(){t.events.on("data:sync:start",this.onSyncStart,this).on("data:sync:success",this.onSyncSuccess,this)},_unsubscribeSyncEvents:function o(){t.events.off("data:sync:start data:sync:success",null,this)},onSyncStart:function l(e,t,n){n=n||{};if(!this._shouldShowAlert(e,t,n)){return}this.showSyncAlert(e,t,n);this.requestsInProgress++},onSyncSuccess:function u(e,t,n){n=n||{};if(!this._shouldShowAlert(e,t,n)){return}if(this.requestsInProgress){this.requestsInProgress--}if(!this.requestsInProgress){n.requestFinished=true;this.showSyncAlert(e,t,n)}},onSyncError:function c(){if(this.requestsInProgress){this.requestsInProgress--}this.hideSyncAlert()},pause:function d(e,t,n){n=n||{};this._unsubscribeSyncEvents();this.onSyncStart(e,t,n)},resume:function f(e,t,n,i){i=i||{};this._subscribeSyncEvents();if(!n){this.onSyncSuccess(e,t,i)}},showSyncAlert:function h(e,i,r){var a=r.requestFinished;var s=a?"finished":"inProgress";var o;if(a){this.hideSyncAlert()}else{if(!this._overlayDisabled(e,i,r)){this.showOverlay()}}if(e==="delete"&&r.relate){e="unlink"}if(r.backgroundFetch){e="backgroundFetch"}o=t.lang.get(n[s][e]);if(o){this._showAlert(o,a)}},_shouldShowAlert:function p(e,t,n){return!(n.backgroundSync||this.isOfflineRead(e,t,n)||this._isSuccessAlertCurrentlyShowing())},_showAlert:function m(e,n){var r=this.getAlertOptions(e,n);t.alert.show(i,r)},getAlertOptions:function g(e,t){var n={level:"success",autoClose:true,messages:e};if(!t){_.extend(n,{level:"load",closeable:false,autoClose:false})}return n},hideSyncAlert:function v(){this.hideOverlay();if(!this._isSuccessAlertCurrentlyShowing()){t.alert.dismiss(i)}},_overlayDisabled:function y(e,n,i){return i.backgroundFetch||e==="read"&&n instanceof t.BeanCollection},showOverlay:function b(){t.overlay.show("data:sync",{spinner:false})},hideOverlay:function x(){t.overlay.hide("data:sync")},isOfflineRead:function w(e,n,i){return t.offlineEnabled&&e==="read"&&!i.backgroundFetch&&!n.offlineReadDisabled},_isSuccessAlertCurrentlyShowing:function L(){var e=t.alert.get(i)||{};return e.level==="success"}};t.augment("syncAlertManager",r);e.exports=r})(SUGAR.App)},function(e,t){"use strict";var n=SUGAR.App;var i=Backbone.History.extend({_initialized:false,start:function r(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e.silent=true;Backbone.History.prototype.start.call(n.navigation.history,e);window.removeEventListener("popstate",this.checkUrl,false);window.removeEventListener("hashchange",this.checkUrl,false);if(!this._initialized){$(window).on("popstate",_.bind(this._handleBrowserNavigation,this));this._initialized=true}this.clear();n.controller.navigate(window.location.hash)},stop:function a(){this.clear();Backbone.History.prototype.stop.apply(this,arguments)},navigate:function s(e){var t=void 0;this._previous=this._current;if(e.back){this.pop();t=this._current.url}else{var n=this.getPrevStep();t=e.url;if(this._current&&!e.replaceCurrent){this._steps.push(this._current)}else if(n&&n.url===t){this._steps.pop()}this._current=_.omit(e,"replaceCurrent")}if(!e.updateUrlOnly){this._logRouteChange();this.loadUrl(t)}this._syncBrowserHistory()},getSteps:function o(){return this._steps},getCurrentStep:function l(){return this._current},getPrevStep:function u(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.includeSkipped;return t?this._previous:_.last(this._steps)},getCurrentUrl:function c(){return this._current?this._current.url:""},getStepById:function d(e){return _.findWhere(this._steps,{id:e})},clear:function f(){this._steps=[];this._current=this._previous=null},pop:function h(){if(this._steps.length!==0){this._current=this._steps.pop()}return this._current},getLength:function p(){return this._steps.length+1},go:function m(){},_handleBrowserNavigation:function g(e){var t=e.state;var i=window.location.hash;this._syncBrowserHistory();if(t){n.controller.handleBackButton()}else{n.controller.navigate(i)}},_syncBrowserHistory:function v(){var e=window.history;var t=window.location.hash;var n=this._steps;var i=n.length>1?n[n.length-2]:this._current;var r=i?i.url:t;var a=this._current?this._current.url:t;e.pushState({back:true},"",r);e.pushState({back:false},"",a)},_logRouteChange:function y(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.stepDef,i=e.options;var r="";if(t){r+='Route changed to "'+t.name+'"'}if(i){r+=" step options: "+JSON.stringify(i)}if(r){n.logger.debug(r)}}});e.exports=i},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(263);var a=n(264);var s=n(265).stepTypes;var o=true;e.exports={started:false,loadScreenError:{NO_DASHBOARDS_MODULE:1,NO_DASHBOARD:2,NO_DASHLET:3,NO_MODULE:4,NO_CREATE_ACCESS:5,NO_OFFLINE_MODE:6,NEED_LOGIN:7,CONVERT_ROUTE_HAPPENED:8,CONVERT_ROUTE_ERROR:9,NEED_APP_SYNC:10,UNKNOWN_STEP:11},_contextList:null,_contextRec:null,_stepsBlackList:null,_history:null,_seedId:0,init:function l(){a.init();this._history=i.navigation.history;this._stepsBlackList=[];this.started=true},navigate:function u(e){e.url=this._adjustUrl(e.url);if(!e.initiator){e.initiator=r.GENERIC}if(e.initiator===r.CONFIGURE){o=true}if(e.url===null){this._navigateByParams(e)}else{this._navigateByUrl(e)}},refresh:function c(){var e=this._history.getCurrentStep();var t=e?e.url:window.location.hash;i.controller.navigate(t)},forbidStep:function d(e){if(!_.contains(this._stepsBlackList,e.modelId)){this._stepsBlackList.push(e.modelId)}},getRoutes:function f(){return a.getRoutes()},getHistoryLength:function h(){return this._history.getLength()},hasStepChanged:function p(){var e=this._history.getPrevStep({includeSkipped:true});var t=this._history.getCurrentStep();return e&&e.stepDef.name!==t.stepDef.name},_isStepAvailable:function m(e){return!_.any(this._stepsBlackList,function(t){return e.url.indexOf(t)!==-1})},_getUpStepParams:function g(e){var t=e.stepDef;var n=this._history.getCurrentStep();var i=e.initiator;var a=void 0;if(!n){return null}a=e.replaceCurrent?n.upParentId:n.id;this._syncContextRefs(t,e);if(i===r.UP){a=e.upParentId}else if(_.contains([r.LIST,r.DASHLET_LIST],i)){if(this._isDetailOrActionStep(t)){a=this._contextList}}else if(i===r.SAVE){if(this._isDetailOrActionStep(t)&&!this._isQuickCreateRelated(n.stepDef)){a=this._contextList}}else if(i===r.DASHBOARD){if(_.contains(["home-dashboard-dashlet","record-dashboard-dashlet"],n.stepDef.name)){a=this._contextRec}}return{upParentId:a,contextList:this._contextList,contextRec:this._contextRec}},_syncContextRefs:function v(e,t){var n=this._history.getCurrentStep();var i=t.initiator;if(i===r.UP||i===r.BACK){if(t.contextList){this._contextList=t.contextList}if(t.contextRec){this._contextRec=t.contextRec}}else{if(this._isListStep(n.stepDef,i)){this._contextList=n.id}else if(n.stepDef.name==="home-dashboard"||this._isDetailStep(n.stepDef)&&e.name==="record-dashboard-dashlet"){this._contextRec=n.id}}},_isQuickCreateRelated:function y(e){var t=this._history.getPrevStep();return t&&this._isDetailStep(t.stepDef)&&e.name==="relationships-create"},_isListStep:function b(e,t){if(_.contains(["home-dashboard-dashlet","record-dashboard-dashlet","double-dashboard"],e.name)){return t===r.DASHLET_LIST}else{return e.stepType===s.LIST}},_isDetailOrActionStep:function x(e){return this._isDetailStep(e)||this._isActionStep(e)},_isDetailStep:function w(e){return e.stepType===s.DETAIL},_isActionStep:function L(e){return e.stepType===s.ACTION},_getContextUpStep:function S(){return this._history.getStepById(this._history.getCurrentStep().upParentId)},_getDefaultUpStep:function E(e,t){e=e||this._history.getCurrentStep().stepDef;var n=e.getMappedUpOptions(t||i.controller.getScreenContext());var r=e.getUpStep();var a=void 0;if(r){a={url:r.buildUrlFromTemplate(n),stepDef:r,screenOptions:n}}return a},_getUrlInfo:function k(e){var t=e.substr(1);var n=a.findStepByUrl(t);var i=void 0;if(n){var r=n.url.regexp.exec(t).slice(1);i=n.getScreenOptions.apply(this,r)}else{n={unknown:true}}return{url:e,stepDef:n,screenOptions:i}},_navigate:function T(e){var t=_.extend({},e,{id:++this._seedId,replaceCurrent:!this._shouldTrackCurrentStep(e.url)});var n=this._getUpStepParams(t);_.extend(t,n);this._history.navigate(t)},_shouldTrackCurrentStep:function M(e){var t=this._history.getCurrentStep();return t&&!t.updateUrlOnly&&!t.stepDef.skipTrack&&t.url!==e},_navigateByUrl:function A(e){var t=this;_.extend(e,this._getUrlInfo(e.url));var n=this.checkNavigationAllowed(e);if(n.errorType){this.onNavigationAbort(n,e)}else{this.checkNavigationCancelled(e,function(n){if(e.callback){e.callback(n)}if(!n.cancel){t._navigate(e)}})}},onNavigationAbort:function C(e,t){var n=e.errorType===this.loadScreenError.NEED_LOGIN;var a=i.api.isAuthenticated();if(t.callback){t.callback({cancel:true})}if(n||a){this._navigateByParams({error:e,originalParams:t,initiator:r.ERROR_LOAD_SCREEN,stepDef:t.stepDef})}if(n||!a){t.updateUrlOnly=true;this._navigate(t)}},_navigateByParams:function R(e){switch(e.initiator){case r.BACK:this._handleBackNavigation(e);break;case r.UP:this._handleUpNavigation(e);break;case r.HOME:this._handleHomeNavigation();break;case r.SAVE:this._handleSaveNavigation(e);break;case r.RELATE:this._handleRelateNavigation(e);break;case r.DELETE:this._handleDeleteNavigation(e);break;case r.ERROR_LOAD_SCREEN:this._handleLoadScreenError(e);break}},_handleBackNavigation:function D(){var e=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=void 0;while(!n&&this._history.getLength()!==1){n=this._history.getPrevStep();if(!this._canGoBack(n)){n=null;this._history.pop()}}this.checkNavigationCancelled(t,function(i){if(t.callback){t.callback(i)}if(!i.cancel){if(e._history.getLength()===1){e.exitApp()}else{n.initiator=r.BACK;e._syncContextRefs(n.stepDef,n);e._history.navigate({back:true})}}})},_handleUpNavigation:function I(e){var t=this._history.getSteps();var n=void 0;var a=void 0;var s=void 0;if(this._history.getCurrentStep()){n=this._getContextUpStep()||this._getDefaultUpStep()}while(n&&!a){var o=n&&this._isStepAvailable(n);if(o){a=n}else{s=this._history.getStepById(n.upParentId);if(s){n=s;t.length=_.indexOf(t,n)}else{n=this._getDefaultUpStep(n.stepDef,n.screenOptions)}}}if(a){e=_.extend({},e,a);e.initiator=r.UP;this.navigate(e)}else{i.controller.navigateToDefaultView()}},_handleHomeNavigation:function O(){var e=void 0;var t=void 0;var n=void 0;if(i.supportedFeatures.settingsDefaultView){if(i.supportedFeatures.dashboards){i.nomad.dashboards.verifyDefaultView()}e=i.loginManager.getSetting("default_view")||i.config.ui.defaultViewScheme;t=e.split(":");if(t[0]==="Modules"){if(_.contains(i.metadata.getModuleNames(),t[1])){t.shift()}else{i.nomad.removeSetting("default_view");t=[]}}n=t.join("/")}this.navigate({url:n||i.nomad.DEFAULT_ROUTE})},_handleSaveNavigation:function N(e){var t=e.initiator,n=e.contextOptions,r=n.module,a=n.modelId,s=n.parentModule,o=n.parentModelId,l=n.isCreate;var u=i.controller.getScreenContext().link;var c=i.controller.getScreenContextRoot();var d=void 0;if(l){d=c?c+"/":"";d+=u?i.nomad.buildLinkRoute(s,o,u,a):i.router.buildRoute(r,a);this.navigate({url:d,initiator:t})}else{this._handleUpNavigation()}},_handleRelateNavigation:function F(e){this._handleUpNavigation(e)},_handleDeleteNavigation:function B(e){this._stepsBlackList.push(e.contextOptions.modelId);this._handleUpNavigation()},_handleLoadScreenError:function P(e){var t=this.loadScreenError;switch(e.error.errorType){case t.NO_DASHLET:this._handleUpNavigation();break;case t.UNKNOWN_STEP:case t.NO_MODULE:var n=this._history.getCurrentStep()&&i.api.isAuthenticated()&&e.originalParams.initiator!==r.CONFIGURE;if(n){var a=e.originalParams.url.substring(1);this.showBackToSugarPage(a)}else{i.controller.navigateToDefaultView()}break;case t.NO_CREATE_ACCESS:this._loadErrorScreen({errorCode:403});break;case t.NO_DASHBOARDS_MODULE:case t.NO_DASHBOARD:case t.NO_OFFLINE_MODE:i.controller.navigateToDefaultView();break;case t.CONVERT_ROUTE_HAPPENED:i.controller.navigate({url:e.error.redirectUrl});break;case t.CONVERT_ROUTE_ERROR:this.showBackToSugarPage(e.error.redirectUrl);break;case t.NEED_APP_SYNC:i.nomad.syncApp();break;case t.NEED_LOGIN:i.router.login();break}},checkNavigationAllowed:function U(e){var t={};if(e.stepDef.isUnsecure||_.contains(i.config.unsecureRoutes,e.url)){return t}if(!i.api.isAuthenticated()){t.errorType=this.loadScreenError.NEED_LOGIN;return t}if(o&&!e.stepDef.isCustomStep){t=this._checkUrlOnFirstStart(e.url)}if(t.errorType){return t}if(e.stepDef.unknown){t.errorType=this.loadScreenError.UNKNOWN_STEP;return t}if(i.api.isAuthenticated()&&!i.isSynced){t.errorType=this.loadScreenError.NEED_APP_SYNC;return t}return this._checkCanLoadScreen(e.screenOptions)},_checkUrlOnFirstStart:function Y(e){var t={};e=e.replace("#","");o=false;i.logger.debug("PARSING ROUTE ON STARTUP FOR DETECTING SUGAR ROUTE");if(e){var n=i.routing.utils.convertExternalRoute(e);if(n!==e){if(_.isString(n)){t.errorType=this.loadScreenError.CONVERT_ROUTE_HAPPENED;t.redirectUrl=n}else{t.errorType=this.loadScreenError.CONVERT_ROUTE_ERROR;t.redirectUrl=e}}}return t},_checkCanLoadScreen:function H(e){var t=i.data.getRelatedModule(e.parentModule,e.link);var n=e.module||t||e.parentModule;var r=this.loadScreenError;var a=void 0;var s=void 0;if(e.dashboardId||e.root==="Dashboards"){if(!i.supportedFeatures.dashboards){s=r.NO_DASHBOARDS_MODULE}else{a=i.nomad.dashboards.getDashboard(e.dashboardId);if(!a){s=r.NO_DASHBOARD}else if(e.dashletId&&!i.nomad.dashboards.isDashletAvailable(e.dashboardId,e.dashletId)){s=r.NO_DASHLET}}}else if(!this._canLoadModuleScreen(e)){s=r.NO_MODULE}else if(!i.offlineEnabled&&(e.root==="Offline"||e.module==="TxLog")){s=r.NO_OFFLINE_MODE}else if(!_.contains(i.config.modules.nonAclModules,n)){if(e.action==="create"&&!i.nomad.canCreateModule(n)||!i.acl.hasAccess("access",n)){s=r.NO_CREATE_ACCESS}}return{errorType:s}},_canLoadModuleScreen:function G(e){var t=e.module,n=e.parentModule,r=e.link;var a=i.metadata.getModuleNames({filter:"visible"});var s=_.union(a,i.config.ui.constantlyVisibleViews);var o=[];if(t){o.push(t)}if(n){o.push(n)}if(n&&r){o.push(i.data.getRelatedModule(n,r))}return _.every(o,function(e){return _.contains(s,e)})},checkNavigationCancelled:function j(e,t){var n=_.compact(_.unique(i.controller.layoutManager.getLayouts()));var r=_.map(n,function(t){return function(n){t.onBeforeLeave({params:e,callback:function i(e){n(e&&e.cancel,e)}})}});async.parallel(r,function(e){t({cancel:e})})},_canGoBack:function V(e){return this._isStepAvailable(e)&&e.url!==this._history.getCurrentStep().url&&!this._checkCanLoadScreen(e.screenOptions).errorType},exitApp:function z(){i.logger.debug("Exiting Application");if(i.isNative&&navigator.app&&navigator.app.exitApp){navigator.app.exitApp()}},_loadErrorScreen:function $(e){i.controller.loadDynamic({layoutDef:{appendTo:"root",fullScreen:true,module:"Error",name:"error",create:true,cacheDisabled:true,backToSugar:true,code:e.errorCode,sugarRoute:e.sugarRoute}})},showBackToSugarPage:function q(e){this._loadErrorScreen({errorCode:404,sugarRoute:e})},_adjustUrl:function W(e){if(_.isString(e)){if(e[0]!=="#"){e="#"+e}}else{e=null}return e}}},function(e,t){"use strict";var n={GENERIC:{},UP:{},BACK:{},BACK_BUTTON:{},HOME:{},SAVE:{},DELETE:{},RELATE:{},LIST:{},DASHBOARD:{},ACTIVITIES_LIST:{},DASHLET_LIST:{},ERROR_LOAD_SCREEN:{},CONFIGURE:{}};_.each(n,function(e,t){n[t].name=t});e.exports=n},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,n,i){if(n)e(t.prototype,n);if(i)e(t,i);return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=n(265).routes;var s=n(267);var o=SUGAR.App;var l=void 0;var u=function(){function e(t,n){r(this,e);var i=void 0;_.extend(this,_.pick(t,"name","skipTrack","isUnsecure","isCustomStep","stepType"));this.getScreenOptions=n.getScreenOptions;i=this._buildUrlTpl(n);this.url={tpl:i,regexp:Backbone.Router.prototype._routeToRegExp(i)}}i(e,[{key:"buildUrlFromTemplate",value:function t(e){var t=this.url.tpl.replace(/[\(\)]/g,"");_.each(e,function(e,n){t=t.replace(":"+n,e)});return t.replace(/^\/*|\/*$/g,"")}},{key:"checkUrlMatch",value:function n(e){return this.url.regexp.test(e)}},{key:"setUpNavigation",value:function a(e,t){if(e){this.up={name:e,mappedOptions:t}}}},{key:"getUpStep",value:function s(){return this.up?l.stepsHash[this.up.name]:null}},{key:"getMappedUpOptions",value:function o(e){var t=this.up&&this.up.mappedOptions;var n=void 0;if(_.isFunction(t)){n=t(e)}else if(t){n=this._mapParams(e,t)}else{n=e}return n}},{key:"_mapParams",value:function u(e,t){var n={};_.each(t,function(t,i){n[t]=e[i]});return n}},{key:"_buildUrlTpl",value:function c(e){var t="";var n=_.indexOf(e.steps,_.findWhere(e.steps,{name:this.name}));_.each(e.steps,function(e,i){var r=i===0;var a=e.url[0]==="(";if(n===-1||i<=n){t+=a||r?e.url:"/"+e.url}});return t}}]);return e}();l={_ready:false,routes:[],steps:[],stepsHash:{},init:function c(){if(this._ready){return}this.addRoutes(a,{upNavigationMap:s,isInternal:true});this._ready=true},findStepByUrl:function d(e){return _.find(this.steps,function(t){return t.checkUrlMatch(e)})},getRoutes:function f(){return this.routes},addRoutes:function h(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=void 0;e=this._unifyRoutes(e);n=this._createRoutes(e,t);this._storeSteps(n.steps);this._storeRoutes(n.routes);this._prepareUpNavigation(t.upNavigationMap)},_unifyRoutes:function p(e){_.each(e,function(e){if(_.isString(e.steps)){e.steps=[{name:e.name,url:e.steps,skipTrack:e.skipTrack,isUnsecure:e.isUnsecure,stepType:e.stepType}];e.skipTrack=null}});return e},_createRoutes:function m(e){var t=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=[];var r=[];var a=!n.isInternal;var s=function o(){return{}};_.each(e,function(e){if(!e.getScreenOptions){e.getScreenOptions=s}_.each(e.steps,function(t){t.isCustomStep=a;r.push(new u(t,e))});i.push({name:e.name,getScreenOptions:e.getScreenOptions,callback:t._createRouteCallback(e),route:_.last(r).url.tpl})});return{routes:i,steps:r}},_createRouteCallback:function g(e){if(e.handler){return function(){var t=e.getScreenOptions.apply(this,arguments);e.handler(t)}}else{return function(){var t=e.getScreenOptions.apply(this,arguments);o.controller.loadScreen(t)}}},_storeSteps:function v(e){var t=this;this.steps.unshift.apply(this.steps,e);this._validateSteps(this.steps);_.each(e,function(e){t.stepsHash[e.name]=e})},_storeRoutes:function y(e){var t=e.length-1;if(o.router){_.each(e,function(n,i){n=e[t-i];o.router.route(n.route,n.name,n.callback)})}else{this.routes.unshift.apply(this.routes,e)}},_prepareUpNavigation:function b(e){var t=this;var n=function i(e,n,r){if(n==="mappedOptions"){return}if(n){t.stepsHash[n].setUpNavigation(r,e.mappedOptions)}_.each(e,function(e,t){i(e,t,n)})};n(e,null,null)},_validateSteps:function x(e){var t=_.pluck(e,"name");var n=true;_.each(_.groupBy(t),function(e,t){if(e.length>1){n=false;o.logger.error('duplicate step name "'+t+'"')}});if(!n){throw new Error("Routes config is invalid")}}};e.exports=l},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(266);var a={LIST:"LIST",DETAIL:"DETAIL",ACTION:"ACTION"};var s=[{name:"configure",steps:"Configure(/)(:serverUrl)(/)(:loginName)(/)(:pageUrl)(/)(:ssoOption)(/)(:showUrl)(/)(:useHttps)(/)",getScreenOptions:r.configure,skipTrack:true,isUnsecure:true,handler:function o(e){var t={serverUrl:e.serverUrl?decodeURIComponent(e.serverUrl):"",loginName:e.loginName?decodeURIComponent(e.loginName):"",pageUrl:e.pageUrl?decodeURIComponent(e.pageUrl):"#",ssoOption:e.ssoOption,showUrl:e.showUrl,useHttps:e.useHttps};i.nomad.configure(t)}},{name:"linked-list-dashboard",getScreenOptions:r.linkedListRecordDashboard,steps:":linkParentModule/:linkParentModelId/link/:moduleLink/:parentModelId/Dashboards/:dashboardId/:dashletId"},{name:"double-dashboard",getScreenOptions:r.twinDashboard,steps:"Dashboards/:parentDashboardId/:parentDashletId/:parentModule/:parentModelId/Dashboards/:dashboardId/:dashletId"},{name:"record-dashboard",getScreenOptions:r.recordDashboard,steps:[{name:"record-dashboard-dashlet",url:"(:root/):parentModule/:parentModelId/Dashboards/:dashboardId/:dashletId"},{name:"record-dashboard-detail",url:"(/:module)(/:modelId)",stepType:a.DETAIL},{name:"record-dashboard-action",url:"(/:action)",skipTrack:true}]},{name:"dashboard",getScreenOptions:r.dashboard,steps:[{name:"home-dashboard",url:"Dashboards/:dashboardId"},{name:"home-dashboard-dashlet",url:"(/:dashletId)"},{name:"home-dashboard-detail",url:"(/:module)(/:modelId)",stepType:a.DETAIL},{name:"home-dashboard-action",url:"(/:action)",skipTrack:true,stepType:a.ACTION}]},{name:"about",getScreenOptions:r.about,steps:"About",isUnsecure:true},{name:"settings",getScreenOptions:r.settings,steps:"Settings"},{name:"logout",handler:r.logout,steps:"logout(/?clear=:clear)",skipTrack:true},{name:"error-emulation",getScreenOptions:r.errorEmulation,steps:"ErrorEmulation"},{name:"offline",getScreenOptions:r.offline,steps:[{name:"offline",url:"Offline"},{name:"offline-list",url:"(/:module)"},{name:"offline-detail",url:"(/:modelId)"}]},{name:"record-createCall",getScreenOptions:r.createCall,steps:"createCall?direction=:direction&start_date=:start_date&duration_hours=:duration_hours&duration_minutes=:duration_minutes&status=:status",skipTrack:true},{name:"relationships-createCall",getScreenOptions:r.createRelatedCall,steps:":module/:id/link/:calls_link/createCall?direction=:direction&start_date=:start_date&duration_hours=:duration_hours&duration_minutes=:duration_minutes&status=:status&log_call=:log_call",skipTrack:true},{name:"relationships-list",getScreenOptions:r.relatedList,steps:":parentModule/:parentModelId/link/:link",stepType:a.LIST},{name:"relationships-create",getScreenOptions:r.createRelated,steps:":parentModule/:parentModelId/link/:link/create",skipTrack:true},{name:"relationships-associate",getScreenOptions:r.associate,steps:":parentModule/:parentModelId/link/:link/associate",skipTrack:true},{name:"relationships-action",getScreenOptions:r.relatedRecord,steps:[{name:"relationships-detail",url:":parentModule/:parentModelId/link/:link/:modelId",stepType:a.DETAIL},{name:"relationships-action",url:"(/:action)",skipTrack:true,stepType:a.ACTION}]},{name:"search-list",getScreenOptions:_.partial(r.list,"Search"),steps:"Search",stepType:a.LIST},{name:"search-create",getScreenOptions:_.partial(r.create,"Search"),steps:"Search/:module/create",skipTrack:true},{name:"search-record",getScreenOptions:_.partial(r.record,"Search"),steps:[{name:"search-record-detail",url:"Search/:module/:modelId",stepType:a.DETAIL},{name:"search-record-action",url:"(/:action)",skipTrack:true,stepType:a.ACTION}]},{name:"list",getScreenOptions:_.partial(r.list,""),steps:":module",stepType:a.LIST},{name:"list-create",getScreenOptions:_.partial(r.create,""),steps:":module/create",skipTrack:true},{name:"record",getScreenOptions:_.partial(r.record,""),steps:[{name:"record-detail",url:":module/:modelId",stepType:a.DETAIL},{name:"record-action",url:"(/:action)",skipTrack:true,stepType:a.ACTION}]},{name:"default-view",handler:r.defaultView,steps:"",skipTrack:true}];e.exports={routes:s,stepTypes:a}},function(e,t){"use strict";var n=SUGAR.App;e.exports={dashboard:function i(e,t,n,r,a){return{root:"Dashboards",dashboardId:e,dashletId:t,module:n,modelId:r,action:a}},recordDashboard:function r(e,t,n,i,a,s,o,l){return{root:e||"",parentModule:t,parentModelId:n,dashboardId:i,dashletId:a,module:s,modelId:o,action:l}},linkedListRecordDashboard:function a(e,t,i,r,s,o){return{linkParentModule:e,linkParentModelId:t,moduleLink:i,parentModule:n.data.getRelatedModule(e,i),parentModelId:r,dashboardId:s,dashletId:o}},twinDashboard:function s(e,t,n,i,r,a){return{root:"Dashboards",parentDashboardId:e,parentDashletId:t,parentModule:n,parentModelId:i,dashboardId:r,dashletId:a}},defaultView:function o(){n.controller.navigateToDefaultView()},list:function l(e,t){return{root:e,module:t}},record:function u(e,t,n,i){return{root:e,module:t,modelId:n,action:i}},create:function c(e,t){return{root:e,module:t,action:"create"}},relatedList:function d(e,t,n){return{link:n,parentModule:e,parentModelId:t}},relatedRecord:function f(e,t,n,i,r){return{link:n,parentModule:e,parentModelId:t,modelId:i,action:r}},associate:function h(e,t,n){return{link:n,parentModule:e,parentModelId:t,action:"associate"}},createRelated:function p(e,t,n){return{link:n,parentModule:e,parentModelId:t,action:"create"}},about:function m(){return{root:"About"}},logout:function _(e){n.activeComponents.closeAll();n.overlay.show("logout",{spinner:true,tint:true,label:"LBL_MOBILE_WAIT"});n.loginManager.handleLogoutRoute(e)},settings:function g(){return{root:"Settings"}},offline:function v(e,t){return{root:"Offline",module:e,modelId:t}},errorEmulation:function y(){return{root:"ErrorEmulation"}},createCall:function b(e,t,n,i,r){return{module:"Calls",action:"createCall",callData:{direction:e,startDate:t,durationHours:n,durationMinutes:i,status:r}}},createRelatedCall:function x(e,t,n,i,r,a,s,o,l){return{parentModule:e,parentModelId:t,action:"createCall",link:n,callData:{direction:i,startDate:r,durationHours:a,durationMinutes:s,status:o,logCall:l}}},configure:function w(e,t,n,i,r,a){return{serverUrl:e,loginName:t,pageUrl:n,ssoOption:i,showUrl:r,useHttps:a}}}},function(e,t){"use strict";e.exports={about:{},settings:{},logout:{},"error-emulation":{},offline:{"offline-list":{"offline-detail":{}}},list:{"home-dashboard":{"home-dashboard-dashlet":{"home-dashboard-detail":{"home-dashboard-action":{}}},"double-dashboard":{mappedOptions:{parentDashboardId:"dashboardId",parentDashletId:"dashletId"}}},"list-create":{},"record-detail":{"record-action":{},"relationships-list":{"relationships-create":{},"relationships-detail":{"linked-list-dashboard":{mappedOptions:{linkParentModule:"parentModule",linkParentModelId:"parentModelId",moduleLink:"link",parentModelId:"modelId"}},"relationships-createCall":{},"relationships-action":{}},mappedOptions:{parentModelId:"modelId",parentModule:"module"}},"record-dashboard-dashlet":{"record-dashboard-detail":{"record-dashboard-action":{}},mappedOptions:{parentModule:"module",parentModelId:"modelId"}},"relationships-associate":{mappedOptions:{parentModelId:"modelId",parentModule:"module"}},"record-createCall":{}}},"search-list":{"search-create":{},"search-record-detail":{"search-record-action":{}}},"default-view":{}}},function(e,t,n){"use strict";var i=SUGAR.App;var r=[];var a={registerBuddySteps:function s(){var e=i.context.getContext({create:true}).prepare();r=[{id:"localSecurity",controller:n(269),layoutDef:{name:"touchIdSetup",appendTo:"root",meta:{components:[{view:"TouchIdSetup"}]},context:e}}]},isSetupBuddySupported:function o(){return!i.config.skipSetupBuddy},isSetupBuddyItemCompleted:function l(e){return this._isStepCompleted(e)},resetPref:function u(){i.loginManager.removeSetting("setupBuddy");this.currentStepIndex=null},show:function c(e){this.registerBuddySteps();this._setupBuddyCompleteCallback=e;if(this.isSetupBuddySupported()){this._performSetupBuddy();return}this._setupBuddyCompleteCallback()},_performSetupBuddy:function d(){this.currentStepIndex=this.currentStepIndex||0;while(this.currentStepIndex<r.length){var e=r[this.currentStepIndex];if(e&&!this._isStepCompleted(e.id)&&e.controller.isStepNeeded()&&e.controller.canPerformStep()){this._showSetupBuddyView(e);break}if(e&&!e.controller.isStepNeeded()){this._setStepCompleted(e)}this.currentStepIndex++}if(this.currentStepIndex>=r.length){this._setupBuddyCompleteCallback()}},setupStepCompleted:function f(){var e=r[this.currentStepIndex];if(e){this._setStepCompleted(e.id)}this.currentStepIndex++;this._performSetupBuddy()},_showSetupBuddyView:function h(e){var t=i.controller.layoutManager.getRootLayout();var n=t&&t.name===e.layoutDef.name;if(!n){i.controller.loadDynamic({layoutDef:e.layoutDef})}},_cleanUp:function p(){_.each(r,function(e){e.controller.cleanupStep()})},_getPrefs:function m(){var e=i.loginManager.getSetting("setupBuddy")||{};e.viewed=e.viewed||{};return e},_isStepCompleted:function g(e){var t=this._getPrefs()||{};return t.viewed[e]},_setStepCompleted:function v(e){var t=this._getPrefs();t.viewed[e]=true;i.loginManager.setSetting("setupBuddy",t)},isActive:function y(){var e=this.currentStepIndex||0;return e<r.length}};e.exports=a},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(253);var a={kTouchIdForLogin:1,kPasskey:2,kTouchIdForPasskey:4,kTouchIdEnabledKey:"touchIdEnabled",isTouchIdAuthenticationSupported:function s(){var e=i.clientInfo.device;var t=e.touchIdSupported&&i.config.localSecurity.enabled;if(i.isSynced){t=t&&i.config.localSecurity.touchIdForLoginEnabled&&i.supportedFeatures.localSecurityServerSupport&&!i.loginManager.getSetting("isSSO")}return t},isPasskeyAuthenticationSupported:function o(){return i.supportedFeatures.localSecurityServerSupport&&i.isNative&&i.config.localSecurity.enabled&&i.config.localSecurity.passkeyEnabled},isTouchIdForLoginSetup:function l(){return this.isTouchIdAuthenticationSupported()&&Boolean(i.nomad.getSetting(this.kTouchIdEnabledKey))},isTouchIdEnrolled:function u(e){this._isTouchIdEnrolled(e)},storeCredentials:function c(e,t){this._storeCredentials(e,t);i.nomad.setSetting(this.kTouchIdEnabledKey,true)},resetCredentials:function d(){this._resetCredentials();i.nomad.setSetting(this.kTouchIdEnabledKey,false)},toggleTouchIdOnLogin:function f(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this._touchIdDisabledOnLogin=!e},isTouchIdEnabledOnLogin:function h(){return this.isTouchIdForLoginSetup()&&!this._touchIdDisabledOnLogin},performTouchId:function p(e,t){this._performTouchId(e,t)},isStepNeeded:function m(){return!this.isTouchIdForLoginSetup()},canPerformStep:function g(){return Boolean(this.getTempCredential())},cleanupStep:function v(){this.resetTempCredential()},setTempCredential:function y(e){this._tempTouchIdCredential=e},getTempCredential:function b(){return this._tempTouchIdCredential},resetTempCredential:function x(){this._tempTouchIdCredential=null},moveTempCredentialsToStorage:function w(){var e=i.loginManager.getSetting("loginName");this.storeCredentials(e,this._tempTouchIdCredential);this.resetTempCredential()},processConfig:function L(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t={};if(e.mobile&&i.config.localSecurity.enabled&&i.isNative&&$.os.ios){var n=e.mobile.localSecurityMask;if(_.isNumber(n)){var r=i.config.localSecurity;t.localSecurity=_.extend({},r,{touchIdForLoginEnabled:Boolean(n&this.kTouchIdForLogin),passkeyEnabled:Boolean(n&this.kPasskey),touchIdForPasskeyEnabled:Boolean(n&this.kTouchIdForPasskey)});if(r.touchIdForLoginEnabled!==t.localSecurity.touchIdForLoginEnabled){this.resetCredentials()}}}return t},performTouchIdSetup:function S(e){var t=this;async.series([function(e){t.isTouchIdEnrolled(function(t){if(t){var n=i.lang.get("LBL_TOUCH_ID_DISCLAIMER",null,{brandName:i.config.brandName})+i.lang.get("LBL_TOUCH_ID_ENABLE_CONFIRM_MSG");

r.showConfirm(n,{callback:function a(t){e(t!==2)},title:i.lang.get("LBL_ENABLE_TOUCHID")})}else{r.showAlert(i.lang.get("LBL_TOUCH_ID_NOT_ENROLLED_MSG",null,{brandName:i.config.brandName}),{title:i.lang.get("LBL_SETUP_TOUCHID")});e(true)}})},function(e){var n={title:"",buttonLabels:[i.lang.get("LBL_CANCEL_BUTTON_LABEL"),i.lang.get("LBL_ENABLE")],defaultText:i.lang.get("LBL_LOGIN_PASSWORD"),inputStyle:3};var a=void 0;var s="wait_to_verify_password";async.retry(i.config.localSecurity.maxAllowedPasswordAttempt,function(e){var o=(a?i.lang.get("ERR_MOBILE_INVALID_PASSWORD")+"\n\n":"")+i.lang.get("LBL_TOUCH_ID_ENTER_PASSWORD_TITLE",null,{brandName:i.config.brandName});i.overlay.show(s);r.showPrompt(o,_.extend({},n,{callback:function l(n){var r=n.buttonIndex;if(r===2){(function(){var r=n.input1;i.alert.show(s,{level:"info",messages:i.lang.get("LBL_MOBILE_WAIT"),autoClose:false,closable:false});t._verifyPasswordForTouchId(r,function(n,o){a=!n;var l=void 0;var u=!n;if(n){t.setTempCredential(r)}else if(o){u=false;l=true}i.alert.dismiss(s);i.overlay.hide(s);e(u,l)})})()}else{i.overlay.hide(s);e(false,true)}}}))},function(t,n){if(t){i.router.logout(true)}e(t||n)})}],function(t){e(!t)})},_verifyPasswordForTouchId:function E(e,t){i.alert.dismissAll("error");i.api.verifyPassword(e,{error:function n(e){i.error.handleHttpError(e,null,{params:{skipOfflineRead:true}});t(false,e)},success:function r(e){if(e.valid){t(true)}else{i.alert.show("auth_error",{level:"error",messages:i.lang.get("ERR_MOBILE_INVALID_PASSWORD"),autoClose:true});t(false)}}})}};if(true){_.extend(a,n(270))}else{_.extend(a,require("%app.js%/native/local-security"))}e.exports=a},function(e,t){"use strict";e.exports={_isTouchIdEnrolled:function n(e){e(false)},_performTouchId:function i(e,t){},_storeCredentials:function r(e,t){},_resetCredentials:function a(){}}},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(253);var s=n(269);var o=n(268);var l=n(272);var u={_loginConfigs:{},_currentConfigId:null,kLoginConfig:"loginManager:loginConfigs",kCurrentConfig:"loginManager:currentConfigId",kTempConfig:"loginManager:tempConfig",_reconfigDefaults:{ssoVisibilityOption:null,showUrl:true,useHttps:true},init:function c(){i.api.handleExternalLogin=this.handleExternalLogin;this._initializeLoginSettings()},_initializeLoginSettings:function d(){this._fetchLoginConfig();if(!i.isNative){if(this._loginConfigs["default"].siteUrl!==i.config.siteUrl){this._resetLoginSettings();this._fetchLoginConfig()}}this.applyLoginSettings()},_resetLoginSettings:function f(){this._resetTempSetting();this._currentConfigId=null;r.removeSetting(this.kCurrentConfig);this._loginConfigs={};r.removeSetting(this.kLoginConfig)},verifyExternalLogin:function h(e){i.api.ping(null,{complete:function t(){if(e){e()}},error:function n(e){if(e.status===401){i.error.handleExternalLoginNotAvailable()}else{i.error.handleHttpError(e)}}})},handleLoginSuccess:function p(){var e=this.getSetting();this._commitTempSetting();this._resetUserSettings(e)},handleSyncComplete:function m(){this._commitTempSetting();if(i.api.isExternalLogin()){this.setSetting({loginName:i.user.get("user_name")})}},handleAppUpgrade:function g(){this._readDefaultConfig();var e=["setupBuddy"];_.each(_.keys(this._loginConfigs),function(t){this._loginConfigs[t]=_.omit(this._loginConfigs[t],e)},this);r.setSetting(this.kLoginConfig,this._loginConfigs);var t=this.getTempSetting();this.applyLoginSettings(t)},handleLogoutRoute:function v(e){var t=this;e=e==="1";i.logout({success:function n(e){if(i.api.isExternalLogin()&&e&&e.url){t.handleExternalLogout(e.url)}},complete:function r(){i.controller.navigate("#");i.router.login()}},e,{timeout:i.config.login.logoutTimeout})},applyLoginSettings:function y(e){e=e||this.getSetting();i.config.siteUrl=e.siteUrl||"http://localhost:8888";i.api.serverUrl=r.getServerUrl();i.api.setExternalLogin(e.isSSO);i.logger.debug("Applying login config");i.logger.debug("Site URL: "+i.config.siteUrl);i.logger.debug("Server URL: "+i.api.serverUrl)},getSetting:function b(e){var t=this._loginConfigs[this._currentConfigId]||{};return e?t[e]:t},setSetting:function x(e,t){if(_.isObject(e)){_.extend(this._loginConfigs[this._currentConfigId],e)}else{this._loginConfigs[this._currentConfigId][e]=t}r.setSetting(this.kLoginConfig,this._loginConfigs)},removeSetting:function w(e){delete this._loginConfigs[this._currentConfigId][e];r.setSetting(this.kLoginConfig,this._loginConfigs)},getTempSetting:function L(){var e=r.getSetting(this.kTempConfig);e=_.extend({},this.getSetting(),e);var t=["loginName","loginUrl","isSSO","ssoVisibilityOption","showUrl","useHttps","siteUrl"];_.each(e,function(n,i){if(!_.contains(t,i)){delete e[i]}});return this._buildLoginConfig(e)},setTempSetting:function S(e){var t=this.getTempSetting();t=this._buildLoginConfig(_.extend(t,e));r.setSetting(this.kTempConfig,t);return t},_commitTempSetting:function E(){var e=r.getSetting(this.kTempConfig);if(e){this._resetTempSetting();e.loginTS=_.now();e=this._buildLoginConfig(e);this._currentConfigId=this._addToSettings(e);r.setSetting(this.kCurrentConfig,this._currentConfigId);this.applyLoginSettings()}},_resetTempSetting:function k(){r.removeSetting(this.kTempConfig)},reconfigure:function T(e,t){var n=this._getOptionValue(e.loginName,"");var r=this._getOptionValue(e.serverUrl,"");var s=this._getOptionBoolValue(e.ssoOption,this._reconfigDefaults.ssoVisibilityOption);var o=this._getOptionBoolValue(e.showUrl,this._reconfigDefaults.showUrl);var l=this._getOptionBoolValue(e.useHttps,this._reconfigDefaults.useHttps);var u={loginName:n,loginUrl:r,ssoVisibilityOption:i.config.login.externalLoginEnabled?s:false,showUrl:o,useHttps:l};i.logger.debug("Reconfiguring the client with "+JSON.stringify(u));if(!this._isUrlWhitelisted(r)){i.logger.warn("Configured server URL "+r+" is not whitelisted.");t();return}this._resetTempSetting();var c=this.getSetting();u=this._buildLoginConfig(u);var d=this.setTempSetting(u);var f=c.id!==d.id;if(i.api.isAuthenticated()){if(f){var h=this;a.showActionSheet([i.lang.get("LBL_MOBILE_RELOGIN_BUTTON"),i.lang.get("LBL_LATER")],{title:i.lang.get("LBL_RECONFIGURE_LOGIN_SETTINGS_CONFIRM"),onSelectCb:function m(e,n){if(n=="0"){i.logout({complete:function r(){p(t)}},true)}else{t()}},onCancelCb:function g(){h._resetTempSetting();t()}})}else{t()}}else{p(t)}function p(e){var t=i.controller.layoutManager.getRootLayout();if(t&&t.name==="login"){var n=t.model;if(n){n.set("password","")}t.render();if(e){e()}}else{i.router.login();_.delay(function(){if(e){e()}},1e3)}}},_readDefaultConfig:function M(){var e=this._buildLoginConfig({id:"default",loginName:"",loginUrl:this._getOptionValue(i.config.defaultServerUrl,""),siteUrl:i.config.siteUrl,ssoVisibilityOption:i.config.login.externalLoginEnabled?null:false,showUrl:!i.config.login.hideLoginUrl,useHttps:i.config.useHttps});return this._addToSettings(e)},_fetchLoginConfig:function A(){this._currentConfigId=r.getSetting(this.kCurrentConfig);this._loginConfigs=r.getSetting(this.kLoginConfig)||{};if(!this._currentConfigId){this._currentConfigId=this._readDefaultConfig();r.setSetting(this.kCurrentConfig,this._currentConfigId);var e=i.config.useHttps;var t=r.getSetting("siteUrl")||i.config.siteUrl;if(/^https?:\/\//.test(t)){e=/^https:\/\//.test(t)}var n={loginName:r.getSetting("loginName")||"",loginUrl:r.getSetting("loginUrl")||"",siteUrl:i.config.siteUrl,useHttps:e,isSSO:i.config.login.externalLoginEnabled&&r.getSetting("externalLogin"),fontSize:r.getSetting("fontSize")};this.setTempSetting(n);r.removeSetting("loginName");r.removeSetting("loginUrl");r.removeSetting("siteUrl");r.removeSetting("useHttps");r.removeSetting("fontSize");r.removeSetting("externalLogin");r.removeSetting("setupBuddyDone")}},_buildSettingsId:function C(e){var t=[e.siteUrl||"",!e.isSSO?e.loginName||"":""];return String(Math.abs(r.utils.getHashCode(t.join(":"))))},_addToSettings:function R(e){this._loginConfigs[e.id]=_.extend(this._loginConfigs[e.id]||{},e);if(_.size(this._loginConfigs)-1>i.config.login.loginSettingsLimit){this._loginConfigs=_.pick(this._loginConfigs,_.chain(this._loginConfigs).omit("default").sortBy(function(e){return e.loginTS}).last(i.config.login.loginSettingsLimit).pluck("id").value(),"default")}r.setSetting(this.kLoginConfig,this._loginConfigs);return e.id},_buildLoginConfig:function D(e){var t=this._loginConfigs["default"]||{};var n=_.extend({},t,e);if(e.loginUrl&&i.isNative){n.siteUrl=this._normalizeUrl(e.loginUrl,e.useHttps)}if(!i.isNative){n.showUrl=false;n.loginUrl=""}if(e.id!=="default"){n.id=this._buildSettingsId(n)}return n},_resetUserSettings:function I(e){var t=i.cache.get(r.SETTINGS_CACHE_KEY);var n=this.getSetting();var a=e.id!==n.id||e.loginName!==n.loginName&&n.isSSO;if(a){o.resetPref();r.removeLastState();r.resetBulkLoader();var u=[this.kLoginConfig,this.kCurrentConfig];_.each(t,function(e,n){if(!_.contains(u,n)){delete t[n]}});i.cache.set(r.SETTINGS_CACHE_KEY,t);i.cache.cut("lang");i.user.clear();r.saveUser();r.cleanStores();r.dashboards.cleanDashboardsCache();l.cleanCache();s.resetCredentials();r.setFontSize(n.fontSize)}r.enableOffline(a);if(t.default_view==="Recents"){r.removeSetting("default_view")}},_getOptionBoolValue:function O(e,t){var n=this._getOptionValue(e,t);return n===t?n:n==="1"?true:n==="0"?false:t},_getOptionValue:function N(e,t){var n=t;if(!_.isUndefined(e)){e=String(e);n=_.isEmpty(e)?t:e}return n},_isUrlWhitelisted:function F(e){var t=i.config.deepLinking.configUrlWhiteList;return _.isEmpty(t)||Boolean(_.find(t,function(t){return new RegExp(t).test(e)}))},_normalizeUrl:function B(e,t){e=e.trim();var n=/^no-ssl:\/\//.test(e);if(!n&&!/^https?:\/\//.test(e)){e="http://"+e}if(t&&!n&&e.indexOf("http://")===0){e="https:"+e.substr(5)}if(e.indexOf("no-ssl://")===0){e="http://"+e.substr(9)}return e.replace(/\/+$/,"")}};i.augment("loginManager",u,false);e.exports=u},function(e,t){"use strict";var n=SUGAR.App;function i(e,t){var n=void 0;var i=void 0;if(e){n=_.every(t.criteria,function(t){return t==="test_passed"?e.testing_enabled&&e.test_passed:e[t]});e._isValid=n}i=n?t.success:t.error;i(e)}e.exports={_cacheKey:"connectors",checkConnector:function r(e){var t=e.name;var r=n.cache.get(this._cacheKey);var a=r&&r[t];var s=false;if(a){i(a,e);s=a._isValid}if(!s){this.getConnectors(function(n){return i(n[t],e)})}},getConnectorModuleFieldMapping:function a(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};t=n.cache.get(this._cacheKey)[t];var i=_.getNested(t,"field_mapping.beans",{})[e]||{};return i},getConnectors:function s(e){var t=this;var i=n.api.buildURL("connectors");n.api.call("GET",i,{},{success:function r(i){var r=_.omit(i.connectors,"_hash")||{};_.each(r,function(e){e.connectorHash=i._hash});n.cache.set(t._cacheKey,r);e(r)}})},cleanCache:function o(){n.cache.cut(this._cacheKey)}}},function(e,t){"use strict";(function(e){e.offline.TxLogSyncExecutor=e.offline.SyncExecutor.extend({SYNC_ITERATION_COMPLETE_MESSAGE:"sync_iteration_complete",_immediateStop:false,_getBeanStub:function t(e){return{id:e._tx_bean_id,module:e._tx_bean_module,related_id:e._tx_related_id,related_module:e._tx_related_module}},_sync:function n(t){var n=this;var i=function a(i){e.logger.debug("TxLogSync completed");if(i===n.SYNC_ITERATION_COMPLETE_MESSAGE){i=null}t(i)};function r(){if(n._immediateStop){n._immediateStop=false;e.logger.debug("TxLogSync interrupted");return i()}n._syncOldestTransaction(function(e){if(e){i(e)}else r()})}r()},_syncOldestTransaction:function i(t){var n=this;e.offline.storage.readTransactions({limit:1,dateAsc:true,error:t,success:function i(r){if(!r){return t(n.SYNC_ITERATION_COMPLETE_MESSAGE)}var a=n._getBeanStub(r);e.offline.storage.readSingleRawRecord(a.module,a,{success:function s(i){i=i||{};var s=r._tx_updated_fields?JSON.parse(r._tx_updated_fields):{};var o={};if(r._tx_action!==e.offline.SYNC_ACTIONS.LINK&&r._tx_action!==e.offline.SYNC_ACTIONS.UNLINK){_.each(s,function(e,t){o[t]=e.after});if(r._tx_action!==e.offline.SYNC_ACTIONS.CREATE){o.date_modified=i.date_modified||e.utils.getTimestamp()}o.id=i.id||a.id}n._handleSyncTransaction(r,t,o);o={}},error:t})}})},_handleSyncTransaction:function r(t,n,i){var r;var a={id:t._tx_bean_id,module:t._tx_bean_module,related_id:t._tx_related_id,related_module:t._tx_related_module};if(t._tx_action===e.offline.SYNC_ACTIONS.CREATE||t._tx_action===e.offline.SYNC_ACTIONS.LINK){r="create"}else if(t._tx_action===e.offline.SYNC_ACTIONS.UPDATE){r="update"}else if(t._tx_action===e.offline.SYNC_ACTIONS.DELETE||t._tx_action===e.offline.SYNC_ACTIONS.UNLINK){r="delete"}else if(t._tx_action===e.offline.SYNC_ACTIONS.FAVORITE){r="favorite"}else if(t._tx_action===e.offline.SYNC_ACTIONS.FOLLOW){r="follow"}else{throw new Error("Undefined action in transaction log!")}if(t._tx_related_id&&t._tx_related_module){this._syncRelationships(r,a,t,n,i)}else if(r==="favorite"){this._syncFavorite(r,a,t,n,i)}else if(r==="follow"){this._syncFollow(r,a,t,n,i)}else{this._syncRecords(r,a,t,n,i)}},_syncRecords:function a(t,n,i,r,s){var o={};s=this._addXTimestampHeader(s,o);e.offline.api.callOriginalApi("records",[t,n.module,s,{viewed:true},{success:function l(t){e.offline.storage.resolveSuccess({module:n.module,transaction:i,serverData:t,callback:r})},error:function u(t){e.offline.storage.resolveError({error:t,updatedFields:s,txLog:i,callback:r})}},o])},_syncRelationships:function s(t,n,i,r,a){var s={};a=this._addXTimestampHeader(a,s);var o={id:n.related_id,link:i._tx_link,related:a?a:{id:n.id},relatedId:n.id};if(i._tx_action===e.offline.SYNC_ACTIONS.CREATE){o.relatedId=null}e.offline.api.callOriginalApi("relationships",[t,n.related_module,o,{},{success:function l(t){var a=_.extend(o,{related:t.related_record,record:t.record,recordModule:n.related_module,relatedModule:n.module});e.offline.storage.resolveSuccess({module:i._tx_related_module,transaction:i,serverData:t,relationshipData:a,callback:r})},error:function u(t){e.offline.storage.resolveError({error:t,updatedFields:a,txLog:i,callback:r})}},s])},_syncFavorite:function o(t,n,i,r,a){e.offline.api.callOriginalApi("favorite",[n.module,n.id,a.my_favorite,{success:function s(t){e.offline.storage.resolveSuccess({module:n.module,transaction:i,serverData:t,callback:r})},error:function o(t){e.offline.storage.resolveError({error:t,updatedFields:a,txLog:i,callback:r})}}])},_syncFollow:function l(t,n,i,r,a){e.offline.api.callOriginalApi("follow",[n.module,n.id,a.following,{success:function s(){e.offline.storage.resolveSuccess({module:n.module,transaction:i,serverData:{id:n.id,following:a.following},callback:r})},error:function o(t){e.offline.storage.resolveError({error:t,updatedFields:a,txLog:i,callback:r})}}])},_addXTimestampHeader:function u(e,t){if(e&&e.date_modified){t.headers={"X-TIMESTAMP":e.date_modified};e=_.omit(e,"date_modified")}return e},stop:function c(){this._immediateStop=true}})})(SUGAR.App)},function(e,t,n){var i=n(275);if(typeof i==="string")i=[[e.id,i,""]];var r=n(183)(i,{});if(i.locals)e.exports=i.locals;if(false){if(!i.locals){e.hot.accept("!!./../../node_modules/css-loader/index.js!./../../node_modules/less-loader/index.js?noIeCompat!./bootstrap-mobile.less",function(){var t=require("!!./../../node_modules/css-loader/index.js!./../../node_modules/less-loader/index.js?noIeCompat!./bootstrap-mobile.less");if(typeof t==="string")t=[[e.id,t,""]];r(t)})}e.hot.dispose(function(){r()})}},function(e,t,n){t=e.exports=n(182)();t.push([e.id,'/*!\n * Bootstrap v2.0.1\n *\n * Copyright 2012 Twitter, Inc\n * Licensed under the Apache License v2.0\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Designed and built with all the love in the world @twitter by @mdo and @fat.\n *//*!\n// https://github.com/FortAwesome/Font-Awesome\n// MIT License\n\nThis Font Software is licensed under the SIL Open Font License, Version 1.1.\nThis license is copied below, and is also available with a FAQ at:\nhttp://scripts.sil.org/OFL\n\n\n-----------------------------------------------------------\nSIL OPEN FONT LICENSE Version 1.1 - 26 February 2007\n-----------------------------------------------------------\n\nPREAMBLE\nThe goals of the Open Font License (OFL) are to stimulate worldwide\ndevelopment of collaborative font projects, to support the font creation\nefforts of academic and linguistic communities, and to provide a free and\nopen framework in which fonts may be shared and improved in partnership\nwith others.\n\nThe OFL allows the licensed fonts to be used, studied, modified and\nredistributed freely as long as they are not sold by themselves. The\nfonts, including any derivative works, can be bundled, embedded,\nredistributed and/or sold with any software provided that any reserved\nnames are not used by derivative works. The fonts and derivatives,\nhowever, cannot be released under any other type of license. The\nrequirement for fonts to remain under this license does not apply\nto any document created using the fonts or their derivatives.\n\nDEFINITIONS\n"Font Software" refers to the set of files released by the Copyright\nHolder(s) under this license and clearly marked as such. This may\ninclude source files, build scripts and documentation.\n\n"Reserved Font Name" refers to any names specified as such after the\ncopyright statement(s).\n\n"Original Version" refers to the collection of Font Software components as\ndistributed by the Copyright Holder(s).\n\n"Modified Version" refers to any derivative made by adding to, deleting,\nor substituting -- in part or in whole -- any of the components of the\nOriginal Version, by changing formats or by porting the Font Software to a\nnew environment.\n\n"Author" refers to any designer, engineer, programmer, technical\nwriter or other person who contributed to the Font Software.\n\nPERMISSION & CONDITIONS\nPermission is hereby granted, free of charge, to any person obtaining\na copy of the Font Software, to use, study, copy, merge, embed, modify,\nredistribute, and sell modified and unmodified copies of the Font\nSoftware, subject to the following conditions:\n\n1) Neither the Font Software nor any of its individual components,\nin Original or Modified Versions, may be sold by itself.\n\n2) Original or Modified Versions of the Font Software may be bundled,\nredistributed and/or sold with any software, provided that each copy\ncontains the above copyright notice and this license. These can be\nincluded either as stand-alone text files, human-readable headers or\nin the appropriate machine-readable metadata fields within text or\nbinary files as long as those fields can be easily viewed by the user.\n\n3) No Modified Version of the Font Software may use the Reserved Font\nName(s) unless explicit written permission is granted by the corresponding\nCopyright Holder. This restriction only applies to the primary font name as\npresented to the users.\n\n4) The name(s) of the Copyright Holder(s) or the Author(s) of the Font\nSoftware shall not be used to promote, endorse or advertise any\nModified Version, except to acknowledge the contribution(s) of the\nCopyright Holder(s) and the Author(s) or with their explicit written\npermission.\n\n5) The Font Software, modified or unmodified, in part or in whole,\nmust be distributed entirely under this license, and must not be\ndistributed under any other license. The requirement for fonts to\nremain under this license does not apply to any document created\nusing the Font Software.\n\nTERMINATION\nThis license becomes null and void if any of the above conditions are\nnot met.\n\nDISCLAIMER\nTHE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT\nOF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL THE\nCOPYRIGHT HOLDER BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nINCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL\nDAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM\nOTHER DEALINGS IN THE FONT SOFTWARE.\n*//*!\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */body,svg{-webkit-touch-callout:none}@keyframes triggerRepaint{0%,100%{width:100%}50%{width:100.001%}}@-webkit-keyframes triggerRepaint{0%,100%{width:100%}50%{width:100.001%}}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0)}to{-webkit-transform:rotate(360deg)}}.rotation{-webkit-animation-name:rotate;-webkit-animation-duration:2s;-webkit-animation-iteration-count:infinite;-webkit-animation-timing-function:linear}@-webkit-keyframes spinner_bounce{0%,100%,80%{transform:scale(0)}40%{transform:scale(1)}}@keyframes spinner_bounce{0%,100%,80%{transform:scale(0)}40%{transform:scale(1)}}@font-face{font-family:\'Open Sans\';font-style:normal;font-weight:600;src:url('+n(276)+") format('truetype')}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;src:url("+n(277)+') format(\'truetype\')}svg{-webkit-user-select:none;user-select:none;display:block;width:100%;height:100%;max-height:500px}.taggable-shadow,body{-webkit-user-select:none}svg text{font:400 13px "Helvetica Neue",Helvetica,Arial,sans-serif;fill:#555;stroke:none;cursor:default}svg .title{font:700 13px + 2 "Helvetica Neue",Helvetica,Arial,sans-serif}.nv-axis .nv-axisMaxMin text,.nv-labels text,.nv-noData{font-weight:700}.nv-axislabel,em{font-style:italic}.nv-background{fill:#fff}.nv-chart{min-width:300px;min-height:100px;position:relative}#nomad,.tooltip,.tooltip-arrow{position:absolute}.nv-chart svg{max-height:none}.nv-noData{font-size:17px}.nv-label-value text,.nv-title,text.nv-label-value{font-size:15px}.nv-labels text{fill:#666}.ios .nv-label-value text,.ios text.nv-label-value{transform:scaleY(.98)}.nv-label-box{fill:transparent}.nvtooltip{pointer-events:none}.nvtooltip-pending-removal{position:absolute;pointer-events:none}.nv-legend .nv-series{cursor:pointer;font-size:13px}.nv-legend .nv-series line{fill:none}.nv-legend .nv-series text{cursor:pointer}.nv-legend .disabled circle{fill:#fff}.nv-legend-background{fill:rgba(255,255,255,.9);stroke:rgba(161,160,160,.75);stroke-width:1px}.nv-legend-link{cursor:pointer;fill:#0679c8}.nv-legend-link:hover{fill:#055b96;text-decoration:underline}.tooltip-inner,a{text-decoration:none}.nv-lineLegend .nv-series,.nv-lineLegend .nv-series text{cursor:default}.nv-axis line,.nv-axis path,.nv-axis polyline{fill:none;stroke:#CDCCCB;stroke-width:2px;shape-rendering:crispEdges;pointer-events:none}.nv-axis line,.nv-axis polyline{stroke-opacity:.3}.nv-axis line.zero,.nv-axis path{stroke-opacity:.75}.nv-axis path.domain{stroke-width:2px;stroke:#bbb}.nv-x.nv-axis text{font-size:13px}.nv-axislabel{font-weight:900}.nv-multibar .nv-group rect{stroke-opacity:1;stroke-width:2px;stroke:#fff}.nv-multibar .nv-group.hover rect{fill-opacity:.75}.nv-texture{fill-opacity:0!important;pointer-events:none}.texture-line{stroke-width:1px}.nv-active .nv-texture{fill-opacity:1!important}.nv-active .nv-label-box{fill:inherit}.nv-inactive .nv-texture{fill-opacity:0!important}.calc-text-strings,.nv-multibar .nv-groups text{fill:#000;stroke:transparent;pointer-events:none}.nv-pie .nv-slice.hover path{fill-opacity:.75}.nv-pie .nv-slice polyline{stroke-width:1px;pointer-events:none}.nv-holeWrap text{text-anchor:middle}text.nv-pie-hole-value{font-size:32px;font-weight:700}text.nv-pie-hole-label{font-size:11px}.nv-groups path.nv-line{fill:none;stroke-width:2.5px;stroke-linecap:round;shape-rendering:geometricPrecision}.nv-groups path.nv-area{stroke:none;stroke-linecap:round;shape-rendering:geometricPrecision}.nv-line.hover path{stroke-width:6px}.nv-line .nv-scatter .nv-groups .nv-point{fill-opacity:1;stroke-opacity:1;stroke:#fff}.nv-scatter.nv-single-point .nv-groups .nv-point{stroke-width:2px}.nv-groups .nv-point.hover,.nv-scatter .nv-groups .nv-point.hover{stroke-width:16px;stroke-opacity:.5!important;stroke:inherit}.nv-point-paths path{stroke:transparent;stroke-opacity:0;fill:transparent;fill-opacity:0}.nv-indexLine{cursor:ew-resize}.nv-card .nv-expcoll,.nv-treemap .nv-children .nv-parent,.nv-treemap .nv-grandparent rect{cursor:pointer}.nv-distribution,.nv-groups .nv-point{pointer-events:none}.nv-groups .nv-point.hover{stroke-width:20px;stroke-opacity:.5}.nv-scatter .nv-point.hover{fill-opacity:1}.nv-stackedarea path.nv-area{fill-opacity:.7;stroke-opacity:0}.nv-stackedarea path.nv-area.hover{fill-opacity:.9}.nv-stackedarea .nv-groups .nv-point{stroke-opacity:0;fill-opacity:0}.nv-stackedarea .nv-groups .nv-point.hover{stroke-width:20px;stroke-opacity:.75;fill-opacity:1}.nv-odomText{font-weight:700;fill:#000}.nv-arc-group{fill:#4682b4}.nv-pointer{fill:#888;stroke:#fff}.nv-funnelChart .nv-slice.hover polygon{fill-opacity:.75}.nv-funnelChart .nv-y path{stroke:none}.nv-funnelChart .nv-label-value text.nv-label{font-size:13px}.nv-funnelChart .nv-label-value text.nv-value{font-size:15px}.nv-bubbleChart .nv-scatter.nv-single-point .nv-groups .nv-point{fill-opacity:1;stroke-opacity:1}.nv-multiBarWithLegend .nv-line .nv-scatter .nv-groups .nv-point{fill-opacity:1;stroke-opacity:1;stroke-width:2px}.nv-pareto .nv-quotaWrap line{opacity:.8;stroke:#444;stroke-width:4px;fill:none}.nv-pareto .nv-quotaWrap line.nv-quotaLineTarget{stroke:#777}.nv-pareto .nv-quotaWrap line.nv-quotaLineBackground{opacity:0;stroke-width:12px}.nv-pareto .nv-y.nv-axis .domain{display:none}.nv-pareto .nv-y.nv-axis text.nv-quotaValue,.nv-pareto .nv-y.nv-axis text.nv-targetQuotaValue{font-weight:700}.nv-pareto .nv-line .nv-groups path{stroke-width:4px}.nv-pareto .nv-linesWrap1 .nv-line .nv-groups path{stroke-width:6px}.nv-pareto .nv-linesWrap2 .nv-scatter .nv-groups circle,.nv-treemap rect{stroke:#fff}.nv-treemap{background-color:#fff}.nv-treemap text{pointer-events:none;fill:#fff}.nv-treemap .nv-depth text{fill:#fff}.nv-treemap .nv-grandparent text{font-weight:700;fill:#58595B}.nv-treemap .nv-children.hover .nv-parent{fill:#fff;opacity:.3}.nv-treemap .nv-grandparent rect,.nv-treemap .nv-parent{stroke-width:3px}.nv-treemap .nv-child{stroke-width:1px}.nv-treemap .nv-parent{fill:none;font-weight:400;pointer-events:all}.nv-treemap .nv-grandparent rect{fill:#fff}.nv-card{fill:#E9EFEF;stroke:#AAA;stroke-width:.5px}.nv-card .nv-circ-front{stroke-width:0}.nv-card line{stroke-width:2}.nv-tree path.link{fill:none;stroke:#ccc;stroke-width:1.5px}.nv-fill-green{fill:#33800d;background-color:#33800d}.nv-fill-red{fill:#e61718;background-color:#e61718}.nv-fill-blue{fill:#176de5;background-color:#176de5}.nv-fill00{fill:#e61718;background-color:#e61718}.nv-fill01{fill:#cc3314;background-color:#cc3314}.nv-fill02{fill:#e5a117;background-color:#e5a117}.nv-fill03{fill:#6a800d;background-color:#6a800d}.nv-fill04{fill:#33800d;background-color:#33800d}.nv-fill05{fill:#0d8046;background-color:#0d8046}.nv-fill06{fill:#0d806c;background-color:#0d806c}.nv-fill07{fill:#0f7799;background-color:#0f7799}.nv-fill08{fill:#1378bf;background-color:#1378bf}.nv-fill09{fill:#176de5;background-color:#176de5}.nv-fill10{fill:#1f12b3;background-color:#1f12b3}.nv-fill11{fill:#6d17e5;background-color:#6d17e5}.nv-fill12{fill:#e5176d;background-color:#e5176d}.nv-fill13{fill:#ff6fcf;background-color:#ff6fcf}.nv-legend .nv-fill00{stroke:#e61718}.nv-legend .nv-fill01{stroke:#cc3314}.nv-legend .nv-fill02{stroke:#e5a117}.nv-legend .nv-fill03{stroke:#6a800d}.nv-legend .nv-fill04{stroke:#33800d}.nv-legend .nv-fill05{stroke:#0d8046}.nv-legend .nv-fill06{stroke:#0d806c}.nv-legend .nv-fill07{stroke:#0f7799}.nv-legend .nv-fill08{stroke:#1378bf}.nv-legend .nv-fill09{stroke:#176de5}.nv-legend .nv-fill10{stroke:#1f12b3}.nv-legend .nv-fill11{stroke:#6d17e5}.nv-legend .nv-fill12{stroke:#e5176d}.nv-legend .nv-fill13{stroke:#ff6fcf}.nv-stroke00{stroke:#e61718;color:#e61718}.nv-stroke01{stroke:#cc3314;color:#cc3314}.nv-stroke02{stroke:#e5a117;color:#e5a117}.nv-stroke03{stroke:#6a800d;color:#6a800d}.nv-stroke04{stroke:#33800d;color:#33800d}.nv-stroke05{stroke:#0d8046;color:#0d8046}.nv-stroke06{stroke:#0d806c;color:#0d806c}.nv-stroke07{stroke:#0f7799;color:#0f7799}.nv-stroke08{stroke:#1378bf;color:#1378bf}.nv-stroke09{stroke:#58595B;color:#58595B}.nv-stroke10{stroke:#1f12b3;color:#1f12b3}.nv-stroke11{stroke:#6d17e5;color:#6d17e5}.nv-stroke12{stroke:#e5176d;color:#e5176d}.nv-stroke13{stroke:#ff6fcf;color:#ff6fcf}@media screen and (max-width:767px){.nv-funnelChart .nv-label-value text.nv-label,.nv-legend .nv-series,.nv-x.nv-axis text,svg text{font-size:11px}.nv-funnelChart .nv-label-value text.nv-value{font-size:14px}}.tooltip{display:block;visibility:visible;padding:5px;font-size:11px;opacity:0;z-index:1020;text-shadow:none;font-weight:400;word-wrap:break-word;pointer-events:none}.table th,strong{font-weight:700}.tooltip.top{margin-top:-3px}.tooltip.right{margin-left:3px}.tooltip.left{margin-left:-3px}.tooltip-inner{max-width:200px;padding:3px 8px;color:#fff;text-align:center;background-color:#000;border-radius:3px;white-space:pre-wrap;word-wrap:break-word}.tooltip-inner p b{unicode-bidi:bidi-override}.tooltip-arrow{width:0;height:0;border-color:transparent;border-style:solid}body,html{position:relative;overflow:hidden;height:100%}.tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-width:5px 5px 0;border-top-color:#000}.tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-width:5px 5px 5px 0;border-right-color:#000}.tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-width:5px 0 5px 5px;border-left-color:#000}.tooltip.bottom .tooltip-arrow{top:0;left:50%;margin-left:-5px;border-width:0 5px 5px;border-bottom-color:#000}.tooltip.bottom{margin-top:8px}.tooltip.in{opacity:1}.tooltip a,.tooltip div,.tooltip span{color:#fff}.tooltip-inner>div{text-align:left}.tooltip-inner>p{margin:0}.tooltip-inner h3{font-size:13px;color:#CDCCCB;line-height:normal;margin:3px 0}html{width:100%;font-size:14px;direction:ltr}body{margin:0;padding:0;background:#fff;-webkit-tap-highlight-color:transparent;-webkit-focus-ring-color:transparent;-webkit-text-size-adjust:none;-webkit-highlight:none;tap-highlight-color:transparent;focus-ring-color:transparent;touch-callout:none;text-size-adjust:none;user-select:none;highlight:none;font-family:"Open Sans",sans-serif;font-size:1em;line-height:1.286em;color:#555}fieldset,form,img,input,label,select,ul{margin:0;padding:0;border:0;outline:0}button,div,span{outline:0}#nomad{top:0;right:0;bottom:0;left:0}.control-group,.icon-ul>li{position:relative}.icondefault{font-size:16px;vertical-align:middle}a{color:#0679c8;-webkit-touch-callout:none;outline:0;-webkit-tap-highlight-color:transparent;-webkit-focus-ring-color:transparent}p{margin:0 0 .643em}p small{font-size:.857em;color:#CDCCCB}h1,h3{margin:0;color:#58595B;text-rendering:optimizelegibility}h1{line-height:36px}h3{line-height:27px;font-size:18px}h3 small{font-size:14px}.line-through{text-decoration:line-through}.actionsheet-select,.placeholder,input,select,textarea{background-color:transparent;border:none;font-size:1.214rem;font-family:"Open Sans",sans-serif;color:#111}textarea{height:auto}.checkbox.inline,.radio.inline{display:inline-block;padding-top:5px;margin-bottom:0;vertical-align:middle}.checkbox.inline+.checkbox.inline,.radio.inline+.radio.inline{margin-left:10px}input[disabled],input[readonly],select[disabled],select[readonly],textarea[disabled],textarea[readonly]{cursor:not-allowed;background-color:#f5f5f5;border-color:#ddd}.control-group.warning .help-block,.control-group.warning .help-inline,.control-group.warning input,.control-group.warning select,.control-group.warning textarea,.control-group.warning>label{color:#6e5e0c}.control-group.warning .input-append .add-on,.control-group.warning .input-prepend .add-on{color:#6e5e0c;background-color:#fcf8e3}.control-group.error .help-block,.control-group.error .help-inline,.control-group.error input,.control-group.error select,.control-group.error textarea,.control-group.error>label{color:#4d1e1e}.control-group.error .input-append .add-on,.control-group.error .input-prepend .add-on{color:#4d1e1e;background-color:#f2dede}.control-group.success .help-block,.control-group.success .help-inline,.control-group.success input,.control-group.success select,.control-group.success textarea,.control-group.success>label{color:#28471c}.control-group.success .input-append .add-on,.control-group.success .input-prepend .add-on{color:#28471c;background-color:#dff0d8}::-webkit-input-placeholder{color:#9aa5ad}.control-group{clear:both;padding:6px 0 0}.control-group:after{display:table;clear:both}.control-group.selected-item{background-color:#ededed}.control-group .control-label{display:block;padding-top:4px;padding-bottom:2px;font-size:.857rem;line-height:1em;color:#7e878d}.control-group .controls{padding-bottom:5px;border-bottom:1px solid #ebedef;transition:border-bottom .3s ease-out 0s}.control-group .placeholder{display:block;color:#9aa5ad;line-height:1.858rem}.control-group .placeholder.hide{display:none!important}.btn,.btn-filter,.icon,.icon-stack{display:inline-block}.control-group.error .control-label{color:#e61718}.control-group.error .controls{border-color:#e61718}.control-group.field_onfocus .controls{border-color:#0679c8}.control-group .field__error-message{padding-top:2px;clear:both;border-color:#e61718;font-size:1rem;color:#e61718}.email-body-content{padding:4px}.control__btn_remove{font-size:1rem}table{max-width:100%;background-color:transparent;border-collapse:collapse;border-spacing:0}.btn,.btn.active,button.close{background:0 0}.table{width:100%;margin-bottom:18px}.table td,.table th{padding:8px;line-height:18px;text-align:left;vertical-align:top;border-bottom:1px solid #e8e8e8}.table thead th{vertical-align:bottom}.table caption+thead tr:first-child td,.table caption+thead tr:first-child th,.table colgroup+thead tr:first-child td,.table colgroup+thead tr:first-child th,.table thead:first-child tr:first-child td,.table thead:first-child tr:first-child th{border-top:0}.table tbody+tbody{border-top:2px solid #e8e8e8}/*!\n *  Font Awesome 4.2.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */@font-face{font-family:FontAwesome;src:url('+n(278)+') format(\'truetype\');font-weight:400;font-style:normal}.icon{font-family:FontAwesome;font-style:normal;font-weight:400;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1,h2,h3,h4,h5,h6,svg text{font-family:"Open Sans",sans-serif}.icon-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.btn,.icon-stack,.offline-icon,.page__offline .ellipsis .label-module-sm,.page__offline .td-count,.view__login .btn .icon-spinner,.view__login .login__links .separator{vertical-align:middle}.icon-2x{font-size:2em}.icon-3x{font-size:3em}.icon-4x{font-size:4em}.icon-5x{font-size:5em}.icon-fw{width:1.28571429em;text-align:center}.icon-ul{padding-left:0;margin-left:2.14285714em;list-style-type:none}.icon-li{position:absolute;left:-2.14285714em;width:2.14285714em;top:.14285714em;text-align:center}.icon-li.icon-lg{left:-1.85714286em}.icon-border{padding:.2em .25em .15em;border:.08em solid #eee;border-radius:.1em}.icon.pull-left{margin-right:.3em}.icon.pull-right{margin-left:.3em}.icon-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.icon-rotate-90{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.icon-rotate-180{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.icon-rotate-270{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg)}.icon-flip-horizontal{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);-webkit-transform:scale(-1,1);-ms-transform:scale(-1,1);transform:scale(-1,1)}.icon-flip-vertical{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);-webkit-transform:scale(1,-1);-ms-transform:scale(1,-1);transform:scale(1,-1)}.icon-stack{position:relative;width:2em;height:2em;line-height:2em}.icon-stack-1x,.icon-stack-2x{position:absolute;left:0;width:100%;text-align:center}.icon-stack-1x{line-height:inherit}.icon-stack-2x{font-size:2em}.icon-inverse{color:#fff}.icon-circle-thin:before{content:"\\f1db"}.icon-glass:before{content:"\\f000"}.icon-music:before{content:"\\f001"}.icon-search:before{content:"\\f002"}.icon-envelope-o:before{content:"\\f003"}.icon-heart:before{content:"\\f004"}.icon-star:before{content:"\\f005"}.icon-star-o:before{content:"\\f006"}.icon-user:before{content:"\\f007"}.icon-film:before{content:"\\f008"}.icon-th-large:before{content:"\\f009"}.icon-th:before{content:"\\f00a"}.icon-th-list:before{content:"\\f00b"}.icon-check:before{content:"\\f00c"}.icon-close:before,.icon-remove:before,.icon-times:before{content:"\\f00d"}.icon-search-plus:before{content:"\\f00e"}.icon-search-minus:before{content:"\\f010"}.icon-power-off:before{content:"\\f011"}.icon-signal:before{content:"\\f012"}.icon-cog:before,.icon-gear:before{content:"\\f013"}.icon-trash-o:before{content:"\\f014"}.icon-home:before{content:"\\f015"}.icon-file-o:before{content:"\\f016"}.icon-clock-o:before{content:"\\f017"}.icon-road:before{content:"\\f018"}.icon-download:before{content:"\\f019"}.icon-arrow-circle-o-down:before{content:"\\f01a"}.icon-arrow-circle-o-up:before{content:"\\f01b"}.icon-inbox:before{content:"\\f01c"}.icon-play-circle-o:before{content:"\\f01d"}.icon-repeat:before,.icon-rotate-right:before{content:"\\f01e"}.icon-refresh:before{content:"\\f021"}.icon-list-alt:before{content:"\\f022"}.icon-lock:before{content:"\\f023"}.icon-flag:before{content:"\\f024"}.icon-headphones:before{content:"\\f025"}.icon-volume-off:before{content:"\\f026"}.icon-volume-down:before{content:"\\f027"}.icon-volume-up:before{content:"\\f028"}.icon-qrcode:before{content:"\\f029"}.icon-barcode:before{content:"\\f02a"}.icon-tag:before{content:"\\f02b"}.icon-tags:before{content:"\\f02c"}.icon-book:before{content:"\\f02d"}.icon-bookmark:before{content:"\\f02e"}.icon-print:before{content:"\\f02f"}.icon-camera:before{content:"\\f030"}.icon-font:before{content:"\\f031"}.icon-bold:before{content:"\\f032"}.icon-italic:before{content:"\\f033"}.icon-text-height:before{content:"\\f034"}.icon-text-width:before{content:"\\f035"}.icon-align-left:before{content:"\\f036"}.icon-align-center:before{content:"\\f037"}.icon-align-right:before{content:"\\f038"}.icon-align-justify:before{content:"\\f039"}.icon-list:before{content:"\\f03a"}.icon-dedent:before,.icon-outdent:before{content:"\\f03b"}.icon-indent:before{content:"\\f03c"}.icon-video-camera:before{content:"\\f03d"}.icon-image:before,.icon-photo:before,.icon-picture-o:before{content:"\\f03e"}.icon-pencil:before{content:"\\f040"}.icon-map-marker:before{content:"\\f041"}.icon-adjust:before{content:"\\f042"}.icon-tint:before{content:"\\f043"}.icon-edit:before,.icon-pencil-square-o:before{content:"\\f044"}.icon-share-square-o:before{content:"\\f045"}.icon-check-square-o:before{content:"\\f046"}.icon-arrows:before{content:"\\f047"}.icon-step-backward:before{content:"\\f048"}.icon-fast-backward:before{content:"\\f049"}.icon-backward:before{content:"\\f04a"}.icon-play:before{content:"\\f04b"}.icon-pause:before{content:"\\f04c"}.icon-stop:before{content:"\\f04d"}.icon-forward:before{content:"\\f04e"}.icon-fast-forward:before{content:"\\f050"}.icon-step-forward:before{content:"\\f051"}.icon-eject:before{content:"\\f052"}.icon-chevron-left:before{content:"\\f053"}.icon-chevron-right:before{content:"\\f054"}.icon-plus-circle:before{content:"\\f055"}.icon-minus-circle:before{content:"\\f056"}.icon-times-circle:before{content:"\\f057"}.icon-check-circle:before{content:"\\f058"}.icon-question-circle:before{content:"\\f059"}.icon-info-circle:before{content:"\\f05a"}.icon-crosshairs:before{content:"\\f05b"}.icon-times-circle-o:before{content:"\\f05c"}.icon-check-circle-o:before{content:"\\f05d"}.icon-ban:before{content:"\\f05e"}.icon-arrow-left:before{content:"\\f060"}.icon-arrow-right:before{content:"\\f061"}.icon-arrow-up:before{content:"\\f062"}.icon-arrow-down:before{content:"\\f063"}.icon-mail-forward:before,.icon-share:before{content:"\\f064"}.icon-expand:before{content:"\\f065"}.icon-compress:before{content:"\\f066"}.icon-plus:before{content:"\\f067"}.icon-minus:before{content:"\\f068"}.icon-asterisk:before{content:"\\f069"}.icon-exclamation-circle:before{content:"\\f06a"}.icon-gift:before{content:"\\f06b"}.icon-leaf:before{content:"\\f06c"}.icon-fire:before{content:"\\f06d"}.icon-eye:before{content:"\\f06e"}.icon-eye-slash:before{content:"\\f070"}.icon-exclamation-triangle:before,.icon-warning:before{content:"\\f071"}.icon-plane:before{content:"\\f072"}.icon-calendar:before{content:"\\f073"}.icon-random:before{content:"\\f074"}.icon-comment:before{content:"\\f075"}.icon-magnet:before{content:"\\f076"}.icon-chevron-up:before{content:"\\f077"}.icon-chevron-down:before{content:"\\f078"}.icon-retweet:before{content:"\\f079"}.icon-shopping-cart:before{content:"\\f07a"}.icon-folder:before{content:"\\f07b"}.icon-folder-open:before{content:"\\f07c"}.icon-arrows-v:before{content:"\\f07d"}.icon-arrows-h:before{content:"\\f07e"}.icon-bar-chart-o:before,.icon-bar-chart:before{content:"\\f080"}.icon-twitter-square:before{content:"\\f081"}.icon-facebook-square:before{content:"\\f082"}.icon-camera-retro:before{content:"\\f083"}.icon-key:before{content:"\\f084"}.icon-cogs:before,.icon-gears:before{content:"\\f085"}.icon-comments:before{content:"\\f086"}.icon-thumbs-o-up:before{content:"\\f087"}.icon-thumbs-o-down:before{content:"\\f088"}.icon-star-half:before{content:"\\f089"}.icon-heart-o:before{content:"\\f08a"}.icon-sign-out:before{content:"\\f08b"}.icon-linkedin-square:before{content:"\\f08c"}.icon-thumb-tack:before{content:"\\f08d"}.icon-external-link:before{content:"\\f08e"}.icon-sign-in:before{content:"\\f090"}.icon-trophy:before{content:"\\f091"}.icon-github-square:before{content:"\\f092"}.icon-upload:before{content:"\\f093"}.icon-lemon-o:before{content:"\\f094"}.icon-phone:before{content:"\\f095"}.icon-square-o:before{content:"\\f096"}.icon-bookmark-o:before{content:"\\f097"}.icon-phone-square:before{content:"\\f098"}.icon-twitter:before{content:"\\f099"}.icon-facebook:before{content:"\\f09a"}.icon-github:before{content:"\\f09b"}.icon-unlock:before{content:"\\f09c"}.icon-credit-card:before{content:"\\f09d"}.icon-rss:before{content:"\\f09e"}.icon-hdd-o:before{content:"\\f0a0"}.icon-bullhorn:before{content:"\\f0a1"}.icon-bell:before{content:"\\f0f3"}.icon-certificate:before{content:"\\f0a3"}.icon-hand-o-right:before{content:"\\f0a4"}.icon-hand-o-left:before{content:"\\f0a5"}.icon-hand-o-up:before{content:"\\f0a6"}.icon-hand-o-down:before{content:"\\f0a7"}.icon-arrow-circle-left:before{content:"\\f0a8"}.icon-arrow-circle-right:before{content:"\\f0a9"}.icon-arrow-circle-up:before{content:"\\f0aa"}.icon-arrow-circle-down:before{content:"\\f0ab"}.icon-globe:before{content:"\\f0ac"}.icon-wrench:before{content:"\\f0ad"}.icon-tasks:before{content:"\\f0ae"}.icon-filter:before{content:"\\f0b0"}.icon-briefcase:before{content:"\\f0b1"}.icon-arrows-alt:before{content:"\\f0b2"}.icon-group:before,.icon-users:before{content:"\\f0c0"}.icon-chain:before,.icon-link:before{content:"\\f0c1"}.icon-cloud:before{content:"\\f0c2"}.icon-flask:before{content:"\\f0c3"}.icon-cut:before,.icon-scissors:before{content:"\\f0c4"}.icon-copy:before,.icon-files-o:before{content:"\\f0c5"}.icon-paperclip:before{content:"\\f0c6"}.icon-floppy-o:before,.icon-save:before{content:"\\f0c7"}.icon-square:before{content:"\\f0c8"}.icon-bars:before,.icon-navicon:before,.icon-reorder:before{content:"\\f0c9"}.icon-list-ul:before{content:"\\f0ca"}.icon-list-ol:before{content:"\\f0cb"}.icon-strikethrough:before{content:"\\f0cc"}.icon-underline:before{content:"\\f0cd"}.icon-table:before{content:"\\f0ce"}.icon-magic:before{content:"\\f0d0"}.icon-truck:before{content:"\\f0d1"}.icon-pinterest:before{content:"\\f0d2"}.icon-pinterest-square:before{content:"\\f0d3"}.icon-google-plus-square:before{content:"\\f0d4"}.icon-google-plus:before{content:"\\f0d5"}.icon-money:before{content:"\\f0d6"}.icon-caret-down:before{content:"\\f0d7"}.icon-caret-up:before{content:"\\f0d8"}.icon-caret-left:before{content:"\\f0d9"}.icon-caret-right:before{content:"\\f0da"}.icon-columns:before{content:"\\f0db"}.icon-sort:before,.icon-unsorted:before{content:"\\f0dc"}.icon-sort-desc:before,.icon-sort-down:before{content:"\\f0dd"}.icon-sort-asc:before,.icon-sort-up:before{content:"\\f0de"}.icon-envelope:before{content:"\\f0e0"}.icon-linkedin:before{content:"\\f0e1"}.icon-rotate-left:before,.icon-undo:before{content:"\\f0e2"}.icon-gavel:before,.icon-legal:before{content:"\\f0e3"}.icon-dashboard:before,.icon-tachometer:before{content:"\\f0e4"}.icon-comment-o:before{content:"\\f0e5"}.icon-comments-o:before{content:"\\f0e6"}.icon-bolt:before,.icon-flash:before{content:"\\f0e7"}.icon-sitemap:before{content:"\\f0e8"}.icon-umbrella:before{content:"\\f0e9"}.icon-clipboard:before,.icon-paste:before{content:"\\f0ea"}.icon-lightbulb-o:before{content:"\\f0eb"}.icon-exchange:before{content:"\\f0ec"}.icon-cloud-download:before{content:"\\f0ed"}.icon-cloud-upload:before{content:"\\f0ee"}.icon-user-md:before{content:"\\f0f0"}.icon-stethoscope:before{content:"\\f0f1"}.icon-suitcase:before{content:"\\f0f2"}.icon-bell-o:before{content:"\\f0a2"}.icon-coffee:before{content:"\\f0f4"}.icon-cutlery:before{content:"\\f0f5"}.icon-file-text-o:before{content:"\\f0f6"}.icon-building-o:before{content:"\\f0f7"}.icon-hospital-o:before{content:"\\f0f8"}.icon-ambulance:before{content:"\\f0f9"}.icon-medkit:before{content:"\\f0fa"}.icon-fighter-jet:before{content:"\\f0fb"}.icon-beer:before{content:"\\f0fc"}.icon-h-square:before{content:"\\f0fd"}.icon-plus-square:before{content:"\\f0fe"}.icon-angle-double-left:before{content:"\\f100"}.icon-angle-double-right:before{content:"\\f101"}.icon-angle-double-up:before{content:"\\f102"}.icon-angle-double-down:before{content:"\\f103"}.icon-angle-left:before{content:"\\f104"}.icon-angle-right:before{content:"\\f105"}.icon-angle-up:before{content:"\\f106"}.icon-angle-down:before{content:"\\f107"}.icon-desktop:before{content:"\\f108"}.icon-laptop:before{content:"\\f109"}.icon-tablet:before{content:"\\f10a"}.icon-mobile-phone:before,.icon-mobile:before{content:"\\f10b"}.icon-circle-o:before{content:"\\f10c"}.icon-quote-left:before{content:"\\f10d"}.icon-quote-right:before{content:"\\f10e"}.icon-spinner:before{content:"\\f110"}.icon-circle:before{content:"\\f111"}.icon-mail-reply:before,.icon-reply:before{content:"\\f112"}.icon-github-alt:before{content:"\\f113"}.icon-folder-o:before{content:"\\f114"}.icon-folder-open-o:before{content:"\\f115"}.icon-smile-o:before{content:"\\f118"}.icon-frown-o:before{content:"\\f119"}.icon-meh-o:before{content:"\\f11a"}.icon-gamepad:before{content:"\\f11b"}.icon-keyboard-o:before{content:"\\f11c"}.icon-flag-o:before{content:"\\f11d"}.icon-flag-checkered:before{content:"\\f11e"}.icon-terminal:before{content:"\\f120"}.icon-code:before{content:"\\f121"}.icon-mail-reply-all:before,.icon-reply-all:before{content:"\\f122"}.icon-star-half-empty:before,.icon-star-half-full:before,.icon-star-half-o:before{content:"\\f123"}.icon-location-arrow:before{content:"\\f124"}.icon-crop:before{content:"\\f125"}.icon-code-fork:before{content:"\\f126"}.icon-chain-broken:before,.icon-unlink:before{content:"\\f127"}.icon-question:before{content:"\\f128"}.icon-info:before{content:"\\f129"}.icon-exclamation:before{content:"\\f12a"}.icon-superscript:before{content:"\\f12b"}.icon-subscript:before{content:"\\f12c"}.icon-eraser:before{content:"\\f12d"}.icon-puzzle-piece:before{content:"\\f12e"}.icon-microphone:before{content:"\\f130"}.icon-microphone-slash:before{content:"\\f131"}.icon-shield:before{content:"\\f132"}.icon-calendar-o:before{content:"\\f133"}.icon-fire-extinguisher:before{content:"\\f134"}.icon-rocket:before{content:"\\f135"}.icon-maxcdn:before{content:"\\f136"}.icon-chevron-circle-left:before{content:"\\f137"}.icon-chevron-circle-right:before{content:"\\f138"}.icon-chevron-circle-up:before{content:"\\f139"}.icon-chevron-circle-down:before{content:"\\f13a"}.icon-html5:before{content:"\\f13b"}.icon-css3:before{content:"\\f13c"}.icon-anchor:before{content:"\\f13d"}.icon-unlock-alt:before{content:"\\f13e"}.icon-bullseye:before{content:"\\f140"}.icon-ellipsis-h:before{content:"\\f141"}.icon-ellipsis-v:before{content:"\\f142"}.icon-rss-square:before{content:"\\f143"}.icon-play-circle:before{content:"\\f144"}.icon-ticket:before{content:"\\f145"}.icon-minus-square:before{content:"\\f146"}.icon-minus-square-o:before{content:"\\f147"}.icon-level-up:before{content:"\\f148"}.icon-level-down:before{content:"\\f149"}.icon-check-square:before{content:"\\f14a"}.icon-pencil-square:before{content:"\\f14b"}.icon-external-link-square:before{content:"\\f14c"}.icon-share-square:before{content:"\\f14d"}.icon-compass:before{content:"\\f14e"}.icon-caret-square-o-down:before,.icon-toggle-down:before{content:"\\f150"}.icon-caret-square-o-up:before,.icon-toggle-up:before{content:"\\f151"}.icon-caret-square-o-right:before,.icon-toggle-right:before{content:"\\f152"}.icon-eur:before,.icon-euro:before{content:"\\f153"}.icon-gbp:before{content:"\\f154"}.icon-dollar:before,.icon-usd:before{content:"\\f155"}.icon-inr:before,.icon-rupee:before{content:"\\f156"}.icon-cny:before,.icon-jpy:before,.icon-rmb:before,.icon-yen:before{content:"\\f157"}.icon-rouble:before,.icon-rub:before,.icon-ruble:before{content:"\\f158"}.icon-krw:before,.icon-won:before{content:"\\f159"}.icon-bitcoin:before,.icon-btc:before{content:"\\f15a"}.icon-file:before{content:"\\f15b"}.icon-file-text:before{content:"\\f15c"}.icon-sort-alpha-asc:before{content:"\\f15d"}.icon-sort-alpha-desc:before{content:"\\f15e"}.icon-sort-amount-asc:before{content:"\\f160"}.icon-sort-amount-desc:before{content:"\\f161"}.icon-sort-numeric-asc:before{content:"\\f162"}.icon-sort-numeric-desc:before{content:"\\f163"}.icon-thumbs-up:before{content:"\\f164"}.icon-thumbs-down:before{content:"\\f165"}.icon-youtube-square:before{content:"\\f166"}.icon-youtube:before{content:"\\f167"}.icon-xing:before{content:"\\f168"}.icon-xing-square:before{content:"\\f169"}.icon-youtube-play:before{content:"\\f16a"}.icon-dropbox:before{content:"\\f16b"}.icon-stack-overflow:before{content:"\\f16c"}.icon-instagram:before{content:"\\f16d"}.icon-flickr:before{content:"\\f16e"}.icon-adn:before{content:"\\f170"}.icon-bitbucket:before{content:"\\f171"}.icon-bitbucket-square:before{content:"\\f172"}.icon-tumblr:before{content:"\\f173"}.icon-tumblr-square:before{content:"\\f174"}.icon-long-arrow-down:before{content:"\\f175"}.icon-long-arrow-up:before{content:"\\f176"}.icon-long-arrow-left:before{content:"\\f177"}.icon-long-arrow-right:before{content:"\\f178"}.icon-apple:before{content:"\\f179"}.icon-windows:before{content:"\\f17a"}.icon-android:before{content:"\\f17b"}.icon-linux:before{content:"\\f17c"}.icon-dribbble:before{content:"\\f17d"}.icon-skype:before{content:"\\f17e"}.icon-foursquare:before{content:"\\f180"}.icon-trello:before{content:"\\f181"}.icon-female:before{content:"\\f182"}.icon-male:before{content:"\\f183"}.icon-gittip:before{content:"\\f184"}.icon-sun-o:before{content:"\\f185"}.icon-moon-o:before{content:"\\f186"}.icon-archive:before{content:"\\f187"}.icon-bug:before{content:"\\f188"}.icon-vk:before{content:"\\f189"}.icon-weibo:before{content:"\\f18a"}.icon-renren:before{content:"\\f18b"}.icon-pagelines:before{content:"\\f18c"}.icon-stack-exchange:before{content:"\\f18d"}.icon-arrow-circle-o-right:before{content:"\\f18e"}.icon-arrow-circle-o-left:before{content:"\\f190"}.icon-caret-square-o-left:before,.icon-toggle-left:before{content:"\\f191"}.icon-dot-circle-o:before{content:"\\f192"}.icon-wheelchair:before{content:"\\f193"}.icon-vimeo-square:before{content:"\\f194"}.icon-try:before,.icon-turkish-lira:before{content:"\\f195"}.icon-plus-square-o:before{content:"\\f196"}.icon-space-shuttle:before{content:"\\f197"}.icon-slack:before{content:"\\f198"}.icon-envelope-square:before{content:"\\f199"}.icon-wordpress:before{content:"\\f19a"}.icon-openid:before{content:"\\f19b"}.icon-bank:before,.icon-institution:before,.icon-university:before{content:"\\f19c"}.icon-graduation-cap:before,.icon-mortar-board:before{content:"\\f19d"}.icon-yahoo:before{content:"\\f19e"}.icon-google:before{content:"\\f1a0"}.icon-reddit:before{content:"\\f1a1"}.icon-reddit-square:before{content:"\\f1a2"}.icon-stumbleupon-circle:before{content:"\\f1a3"}.icon-stumbleupon:before{content:"\\f1a4"}.icon-delicious:before{content:"\\f1a5"}.icon-digg:before{content:"\\f1a6"}.icon-pied-piper:before{content:"\\f1a7"}.icon-pied-piper-alt:before{content:"\\f1a8"}.icon-drupal:before{content:"\\f1a9"}.icon-joomla:before{content:"\\f1aa"}.icon-language:before{content:"\\f1ab"}.icon-fax:before{content:"\\f1ac"}.icon-building:before{content:"\\f1ad"}.icon-child:before{content:"\\f1ae"}.icon-paw:before{content:"\\f1b0"}.icon-spoon:before{content:"\\f1b1"}.icon-cube:before{content:"\\f1b2"}.icon-cubes:before{content:"\\f1b3"}.icon-behance:before{content:"\\f1b4"}.icon-behance-square:before{content:"\\f1b5"}.icon-steam:before{content:"\\f1b6"}.icon-steam-square:before{content:"\\f1b7"}.icon-recycle:before{content:"\\f1b8"}.icon-automobile:before,.icon-car:before{content:"\\f1b9"}.icon-cab:before,.icon-taxi:before{content:"\\f1ba"}.icon-tree:before{content:"\\f1bb"}.icon-spotify:before{content:"\\f1bc"}.icon-deviantart:before{content:"\\f1bd"}.icon-soundcloud:before{content:"\\f1be"}.icon-database:before{content:"\\f1c0"}.icon-file-pdf-o:before{content:"\\f1c1"}.icon-file-word-o:before{content:"\\f1c2"}.icon-file-excel-o:before{content:"\\f1c3"}.icon-file-powerpoint-o:before{content:"\\f1c4"}.icon-file-image-o:before,.icon-file-photo-o:before,.icon-file-picture-o:before{content:"\\f1c5"}.icon-file-archive-o:before,.icon-file-zip-o:before{content:"\\f1c6"}.icon-file-audio-o:before,.icon-file-sound-o:before{content:"\\f1c7"}.icon-file-movie-o:before,.icon-file-video-o:before{content:"\\f1c8"}.icon-file-code-o:before{content:"\\f1c9"}.icon-vine:before{content:"\\f1ca"}.icon-codepen:before{content:"\\f1cb"}.icon-jsfiddle:before{content:"\\f1cc"}.icon-life-bouy:before,.icon-life-buoy:before,.icon-life-ring:before,.icon-life-saver:before,.icon-support:before{content:"\\f1cd"}.icon-circle-o-notch:before{content:"\\f1ce"}.icon-ra:before,.icon-rebel:before{content:"\\f1d0"}.icon-empire:before,.icon-ge:before{content:"\\f1d1"}.icon-git-square:before{content:"\\f1d2"}.icon-git:before{content:"\\f1d3"}.icon-hacker-news:before{content:"\\f1d4"}.icon-tencent-weibo:before{content:"\\f1d5"}.icon-qq:before{content:"\\f1d6"}.icon-wechat:before,.icon-weixin:before{content:"\\f1d7"}.icon-paper-plane:before,.icon-send:before{content:"\\f1d8"}.icon-paper-plane-o:before,.icon-send-o:before{content:"\\f1d9"}.icon-history:before{content:"\\f1da"}.icon-header:before{content:"\\f1dc"}.icon-paragraph:before{content:"\\f1dd"}.icon-sliders:before{content:"\\f1de"}.icon-share-alt:before{content:"\\f1e0"}.icon-share-alt-square:before{content:"\\f1e1"}.icon-bomb:before{content:"\\f1e2"}.icon-futbol-o:before,.icon-soccer-ball-o:before{content:"\\f1e3"}.icon-tty:before{content:"\\f1e4"}.icon-binoculars:before{content:"\\f1e5"}.icon-plug:before{content:"\\f1e6"}.icon-slideshare:before{content:"\\f1e7"}.icon-twitch:before{content:"\\f1e8"}.icon-yelp:before{content:"\\f1e9"}.icon-newspaper-o:before{content:"\\f1ea"}.icon-wifi:before{content:"\\f1eb"}.icon-calculator:before{content:"\\f1ec"}.icon-paypal:before{content:"\\f1ed"}.icon-google-wallet:before{content:"\\f1ee"}.icon-cc-visa:before{content:"\\f1f0"}.icon-cc-mastercard:before{content:"\\f1f1"}.icon-cc-discover:before{content:"\\f1f2"}.icon-cc-amex:before{content:"\\f1f3"}.icon-cc-paypal:before{content:"\\f1f4"}.icon-cc-stripe:before{content:"\\f1f5"}.icon-bell-slash:before{content:"\\f1f6"}.icon-bell-slash-o:before{content:"\\f1f7"}.icon-trash:before{content:"\\f1f8"}.icon-copyright:before{content:"\\f1f9"}.icon-at:before{content:"\\f1fa"}.icon-eyedropper:before{content:"\\f1fb"}.icon-paint-brush:before{content:"\\f1fc"}.icon-birthday-cake:before{content:"\\f1fd"}.icon-area-chart:before{content:"\\f1fe"}.icon-pie-chart:before{content:"\\f200"}.icon-line-chart:before{content:"\\f201"}.icon-lastfm:before{content:"\\f202"}.icon-lastfm-square:before{content:"\\f203"}.icon-toggle-off:before{content:"\\f204"}.icon-toggle-on:before{content:"\\f205"}.icon-bicycle:before{content:"\\f206"}.icon-bus:before{content:"\\f207"}.icon-ioxhost:before{content:"\\f208"}.icon-angellist:before{content:"\\f209"}.icon-cc:before{content:"\\f20a"}.icon-ils:before,.icon-shekel:before,.icon-sheqel:before{content:"\\f20b"}.icon-meanpath:before{content:"\\f20c"}.close{float:right;font-size:20px;font-weight:700;line-height:18px;color:#000;text-shadow:0 1px 0 #fff;opacity:.2}.close:active{color:#000;text-decoration:none;cursor:pointer;opacity:.4}button.close{padding:0;cursor:pointer;border:0;-webkit-appearance:none}.btn{padding:4px 10px;margin:0;font-size:1em;line-height:1.286em;color:#b9bec6;font-weight:500;text-align:center;cursor:pointer;border-radius:3px;border:none;outline:0}.btn.active{color:#0679c8!important;outline:0}.btn.disabled,.btn[disabled]{background-color:#e6e6e6;background-image:none}.btn.btn-inverse.disabled,.btn.btn-inverse[disabled]{background-color:#202020;color:#2c2c2c!important}.btn-large{padding:9px 14px;font-size:16px;line-height:normal;border-radius:5px}.btn-large .icondefault{margin-top:1px}.btn-small{padding:5px 9px;font-size:12px;line-height:16px}.btn-small .icondefault{margin-top:-1px}.btn-mini{padding:2px 6px;font-size:12px;line-height:14px}.btn-danger,.btn-info,.btn-inverse,.btn-primary,.btn-success,.btn-warning{color:#fff}.btn-danger.active,.btn-info.active,.btn-inverse.active,.btn-primary.active,.btn-success.active,.btn-warning.active{color:rgba(255,255,255,.75)}.btn{background-color:transparent}.btn.selected-item{background-color:#000}.btn-primary{border:1px solid #0a75b2;background-color:#0c89d1}.btn-area-more.selected-item .btn-primary,.btn-primary.disabled,.btn-primary.selected-item{border-color:#ccd6dc;background-color:#f8fafd;color:#000}.btn-warning{background-color:#cc3314}.btn-danger{background-color:#e61718}.btn-success{background-color:#33800d}.btn-info{background-color:#71a6f1}.btn-inverse{background-color:#000}.btn-inverse.selected-item{background-color:#202020}.btn-transparent{background-color:transparent;border:1px solid #717171}.btn-filter{min-width:20px;height:30px;line-height:30px;padding:0 5px;text-align:center;color:#000;font-size:1rem;font-weight:700}.btn-filter.active,.btn-filter.selected-item{background:#d4d4d4}.btn-group{position:relative}.btn-group:after{display:table;clear:both}.btn-group+.btn-group{margin-left:5px}.btn-group .btn{position:relative;float:left;padding-top:3px;padding-bottom:3px}.btn-group .btn:last-child{padding-right:0}.btn-group .btn.active,.btn-group .btn:active{z-index:2}.layout__Login{overflow:auto;top:0!important}.tablet .layout__Login{left:-54px!important}.tablet .no-main-menu{left:-54px}.view__login{position:relative;min-height:100%;width:100%;overflow:auto;background:#fff;text-align:center;opacity:0}.view__login .page__login{position:relative;min-height:100%;top:0;left:0;right:0}.view__login .login__header{padding:5px 0}.view__login .login__body{width:300px;margin:auto}.view__login .login__footer{border:none;padding:0 0 5rem;margin-top:30px;text-align:center}.view__login .login__footer.login__footer_show-attribution{padding-bottom:10rem}.view__login .control-group{padding-top:10px}.view__login .input-wrapper input{width:100%;height:2rem;line-height:2em;font-size:1.143rem;color:#000}.view__login .input-wrapper input::-webkit-input-placeholder{opacity:.3;color:#000;white-space:nowrap;text-overflow:ellipsis!important}#me,.box__header .header__inner .btn,.box__menu .menu__item .menu-item__link,.dashlets__list .dashlet__item .dashlet__title,.dashlets__title{text-overflow:ellipsis;white-space:nowrap}.view__login .control-ssl{position:relative;padding-top:4px;margin-bottom:10px;font-size:.857rem;color:#000;text-transform:lowercase}.view__login .control-ssl .checkbox_custom{height:30px}.view__login .btn{display:block;width:300px;padding:5px 0;margin:20px auto;line-height:2rem;background:#0c89d1;border:1px solid #0a75b2;color:#fff}.view__login .btn[disabled]{background:#f8fafd;border:1px solid #ccd6dc;color:#000}.view__login .btn[disabled] .icon-spinner .icon-spinner-path{fill:#000}.view__login .btn .icon-spinner{display:inline-block;width:16px;height:16px;margin-top:-1px;margin-right:4px}.view__login .btn .icon-spinner .icon-spinner-path{fill:#fff}.copyright__logo .copyright-logo__svg-color,.view__login .box__copyright .copyright-logo__svg-color{fill:#000}.view__login .control-group.error{position:relative;color:red}.view__login .control-group.error .icondefault{position:absolute;top:50%;right:-1.25em;margin-top:-.5em}.view__login .control-group.error .field__error-message{display:none}.view__login .login__links{position:absolute;bottom:25px;left:0;width:100%;font-size:.857rem;color:#000;text-align:center}.view__login .login__links .version{padding-bottom:15px;opacity:.3}.view__login .login__links .separator{position:relative;top:-1px;display:inline-block;width:1px;height:11px;font-size:0;line-height:0}.view__login .login__links .login-links__link{padding:0 8px}.view__login .box__copyright{color:#000}.box__copyright{text-align:center;color:#000;opacity:.3}.copyright__text{display:block;padding-bottom:3px;font-size:.857rem;line-height:1}.copyright__logo{display:block;width:125px;height:14px;margin:5px auto 6px}.copyright__version{position:relative;display:block;width:100px;margin:4px auto 25px;text-align:center}.box__preloader{position:absolute;width:100%;height:100%;top:0;left:0;z-index:9998;background:#fff}.box__preloader .preloader__header{position:absolute;top:50%;width:100%;margin-top:-100px;text-align:center}.box__preloader .preloader__message{text-align:center;font-size:.842em;font-size:1.143rem;color:#000}.box__preloader .preloader__message .icon-spinner-path{fill:#000!important}.page__about .pad{position:relative}.page__about .control-group>label{font-size:.857em}.page__about .show-attribution{padding-bottom:5rem}.page__about .box__copyright{position:absolute;bottom:15px;width:100%}.page__about .about__legal{display:block;clear:both;font-size:.786em}.page__offline .text-container{padding:10px}.page__offline .bucket-header{border-bottom:solid 1px #e8e8e8}.page__offline .bh__timestamp{margin-top:4px;font-size:.93em;font-weight:400;color:#6d6d72}.page__offline .offline__control-group .offline__control-label,.page__offline .offline__text-container .status-text{font-weight:700}.page__offline .table{table-layout:fixed;margin-bottom:-1px}.page__offline .table tr td:first-child{padding-left:10px}.page__offline .offline-row{padding:10px;line-height:19px}.page__offline .offline-row .icondefault{float:left;margin-right:5px;font-size:10px}.page__offline .icon-spinner{width:19px;height:19px;float:right;margin:0;display:none}.page__offline .icon-spinner .icon-spinner-path{fill:#666}.page__offline .offline__text-container{overflow:hidden;position:relative;padding:8px 10px 0;margin-bottom:8px}.page__offline .offline__text-container .el__spinner{display:none;float:right;margin-top:4px;margin-right:6px}.page__offline .btn-container{padding:0 10px;margin-bottom:18px}.page__offline .listing .content{margin:0 0 10px 10px}.page__offline .listing .content:before{content:\'\';display:block;clear:both}.page__offline .listing h4{margin:8px 0 0 10px;font-weight:700}.page__offline .listing select{width:92%;height:auto;margin:2px 0 10px 10px;padding:4px 10px;border:1px solid #999}.page__offline .listing .emulation-item{overflow:hidden}.page__offline .listing .emulation-item .error-emulation-check{float:left}.page__offline .listing .emulation-item .error-emulation-select{float:right;width:40%;margin:8px 10px 0 0}.page__offline .error-emulation-check .checkbox_default,.page__offline .offline-property .checkbox_default{height:35px;width:35px;margin:8px 10px 8px 0;vertical-align:middle}.page__offline .more{font-size:14px}.page__offline .modal-footer{padding-left:10px;text-align:left}.page__offline .btn-danger,.page__offline .btn-primary{line-height:1.575em}.page__offline .start_stop_button{font-size:.9em;float:right;line-height:1.3em;margin-top:7px}.page__offline .start_stop_button.active{background:#0679c8;color:#fff!important}.page__offline .td-count{text-align:right}.page__offline .td-count .lbl-count{float:right;padding-top:2px}.page__offline .td-count .icons{width:20px;float:right;min-height:22px;padding-left:5px}.page__offline .td-count .icon-check-circle,.page__offline .td-count .icon-exclamation-circle{font-size:1.6em;color:#368f01;display:none}.page__offline .td-count .icon-exclamation-circle{color:#bf2020}.page__offline .offline__control-group{margin-top:24px;margin-bottom:8px;position:relative;overflow:visible;padding:0 10px}.page__offline .offline__control-group .offline__controls{float:right;padding-top:13px}.page__offline .offline__control-group .offline__controls .checkbox_custom{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%}.page__offline .offline__control-group .offline__message-wifi{margin-top:4px;font-size:.929rem;color:#6d6d72}.page__offline .ellipsis{line-height:24px}.box__offline-list{margin:0;padding:0}.box__offline-list li{list-style:none}.box__offline-list .offline-list__item{display:block;padding:0 10px;line-height:41px;border-bottom:1px solid #d8d8d8;min-height:42px;position:relative}.box__offline-list .offline-list__item.selected-item{background-color:#ededed}.box__offline-list .offline-list__item .more{position:absolute;top:0;right:10px;line-height:inherit}@media screen and (max-width:350px){.page__offline .bucket-header .bh__timestamp{float:none;display:block}}.layout__bulkload{top:0!important}.layout__bulkload .pad{position:relative;padding-bottom:0!important}.layout__bulkload .view__bulkload{position:relative;min-height:100%;width:100%;overflow:auto;background:#fff;text-align:center}.layout__bulkload .view__bulkload .bulkload__title{font-size:25px;color:#262626;padding-top:13%}.layout__bulkload .view__bulkload .bulkload__message{font-size:1.15em;line-height:1.5em;margin:10% 15px 0}.layout__bulkload .view__bulkload .bulkload__form{text-align:left;margin-top:10%;padding-bottom:156px;position:relative}.layout__bulkload .view__bulkload .bulkload__form .control-group{border:1px solid #cdcdcd;border-width:1px 0;padding:17px 15px;overflow:visible;position:relative}.layout__bulkload .view__bulkload .bulkload__form .control-group .control-label{width:80%;float:left;font-weight:400;font-size:1.22em;color:#000}.layout__bulkload .view__bulkload .bulkload__form .control-group .controls{width:20%;margin-left:80%;text-align:right;border:none}.layout__bulkload .view__bulkload .bulkload__form .control-group .checkbox_custom{position:absolute;top:0;left:0;width:100%;height:100%}.layout__bulkload .view__bulkload .bulkload__form .control-group .bulkload__connect-message{position:absolute;left:15px;bottom:-26px;font-size:.93em;color:#6d6d72}.layout__bulkload .view__bulkload .bulkload__btns{padding:0 15px;position:absolute;right:0;left:0;bottom:0}.layout__bulkload .view__bulkload .bulkload__btns .btn{display:block;font-size:1.07em;padding:16px;border-radius:3px;margin-top:16px}.layout__bulkload .view__bulkload .bulkload__btns .btn.btn-primary{font-size:1.22em}.box__header{position:absolute;left:0;top:0;width:100%}.box__header.box__header_full-height{height:100%}.box__header .header__inner{background:#fff;border-bottom:1px solid #d3dbe1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;left:0;top:0;width:100%;height:50px;z-index:9000}.box__header .header__inner .header__title{position:absolute;left:76px;right:76px;top:50%;max-height:1.9em;padding:2px 0;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center;color:#000;font-size:1.143em;font-weight:700;line-height:1;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;letter-spacing:-.4px;-webkit-line-clamp:2;-webkit-box-orient:vertical;z-index:-1}.box__header .header__inner .backBtn+.header__title,.box__header .header__inner .dashHomeBtn+.header__title{left:90px}.box__header .header__inner .header-subtitle{display:inline;position:relative;top:-4px;font-size:.785rem;font-weight:400}.box__header .header__inner .header-subtitle:empty{display:none}.box__header .header__inner .header-subtitle:after{content:"\\A";white-space:pre}.menuBtn::after,.user-icon.withPicture:before{content:""}.box__header .header__inner .btn{max-width:50px;margin:0;line-height:22px;display:block;overflow:hidden;z-index:9002}.box__header .header__inner .btn-area-more{float:left;padding:9px 10px}.box__header .header__inner .btn-area-more.selected-item{background:#f5f5f5}.box__header .header__inner .btn-area-more .btn{color:#000}.box__header .header__inner .btn-area-more .btn.disabled{background:0 0;opacity:.7}.box__header .header__inner .btn-area-more.cancelBtn .btn{padding-left:0;color:#0c89d1;font-size:1.143rem}.box__header .header__inner .btn-area-more.saveBtn{padding-right:0}.box__header .header__inner .btn-area-more.saveBtn .btn{color:#0c89d1;font-size:1.143rem}.box__header .header__inner .btn-area-more.saveBtn.combined{right:32px;padding-right:0}.box__header .header__inner .btn-area-more.saveBtn.combined a{border-bottom-right-radius:0;border-top-right-radius:0}.box__header .header__inner .btn-area-more.caretBtn{width:22px;padding-left:0}.box__header .header__inner .btn-area-more.caretBtn .btn{color:#0c89d1;font-size:1.143rem;text-align:right;padding-right:0}.box__header .header__inner .btn-area-more.caretBtn>a{border-bottom-left-radius:0;border-top-left-radius:0}.box__header .header__inner .btn-area-more.caretBtn .saveArrow-icon{margin-top:-2px}.box__header .header__inner .save-container{float:right}.box__header .header__inner .offline-status.status-success{display:none}.box__header.btns-long .btn{max-width:100px}.box__header.has-edit-button.has-search .header__title{right:110px}.backBtn,.createBtn,.dashHomeBtn,.menuBtn,.offline-status,.searchBtn{float:left;height:49px;width:44px;line-height:50px;color:#000;text-align:center;z-index:2000}.backBtn.selected-item,.createBtn.selected-item,.dashHomeBtn.selected-item,.menuBtn.selected-item,.offline-status.selected-item,.searchBtn.selected-item{background:#f5f5f5}.menuBtn{position:relative;text-decoration:none}.menuBtn::after{position:absolute;top:0;left:0;bottom:0;right:0}.offline-icon{display:inline-block;width:8px;height:8px;background:0 0;line-height:0;font-size:0;border-radius:50%}.offline-icon.status-default{background:#000}.offline-icon.status-success{background:#368f01}.offline-icon.status-warning{background:#ffa800}.offline-icon.status-error{background:#c72516}.offline-status{width:12px}.createBtn,.searchBtn{float:right}.createBtn.active,.searchBtn.active{background:rgba(0,0,0,.5)}#menu-left,.box__menu{position:absolute;left:0;top:0;height:100%;width:100%}.box__menu .menu__inner{overflow:hidden;width:100%;height:100%;list-style:none;background:#d3dbe1;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}.box__menu .menu__item{background:#d3dbe1;border-bottom:solid 1px transparented}.box__menu .menu__item:first-child{min-height:49px}.box__menu .menu__item:first-child .menu-item__link{padding-top:15px}.box__menu .menu__item.selected-item{background:#9aa5ad}.box__menu .menu__item.current .menu-item__link{color:#fff;background:#9aa5ad}.box__menu .menu__item .menu-item__link{padding:13px 12% 13px 15px;color:#000;line-height:1.357rem;display:block;overflow:hidden}.box__menu .menu__item .menu-item__icon{display:inline-block;width:24px;text-align:center}.box__menu .menu__item .menu-item__icon .offline-icon{width:20px;height:20px}.box__menu .menu__item .menu-item__icon .icondefault{font-size:24px;color:#6b7479}.box__menu .menu__item .label-module-sm,.box__menu .menu__item .menu-item__icon,.box__menu .menu__item .user-icon{margin:-6px 7px -6px 0}.box__menu .menu__divider{display:block;height:1px;background-color:#9aa5ad}.right-menu .icon{margin:0 8px 0 -2px;line-height:1;vertical-align:inherit;color:#6b7479}.mobile .right-menu{display:none;position:absolute;top:0;right:0;bottom:0;left:14%}.mobile .right-menu.show{display:block}.tablet .right-menu__corner{position:absolute;top:-8px;right:10px;width:0;height:0;border-bottom:solid 8px #fff;border-left:solid 8px transparent;border-right:solid 8px transparent;z-index:9999}.tablet .right-menu{display:none;position:absolute;top:50px;right:4px;bottom:-50px;width:212px;z-index:9999}.tablet .right-menu .box__menu{position:static;top:140px;height:auto;max-height:100%;overflow-y:auto}.tablet .right-menu .box__menu .menu__item{background:0 0}.tablet .right-menu .box__menu .menu__item .menu-item__link{display:-webkit-box;display:-webkit-flex;display:flex;padding:0 15px}.tablet .right-menu .box__menu .menu__item .menu-item__icon{margin:auto 11px auto auto;vertical-align:middle}.tablet .right-menu .box__menu .menu__item .menu-item__label{flex:1;padding:12px 0;border-bottom:solid 1px #d8d8d8;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tablet .right-menu .box__menu .menu__item:last-child .menu-item__label{border-bottom:none}.tablet .right-menu .menu__inner{width:auto;border-radius:3px;background:#fff}.tablet .overlay__right-menu{position:absolute;top:-50px;left:0;right:0;bottom:-50px;z-index:9998;overflow:scroll;-webkit-overflow-scrolling:touch;visibility:hidden;opacity:0;background-color:rgba(0,0,0,.5);transition:visibility 0s .2s,opacity .2s linear}.tablet .overlay__right-menu.show{visibility:visible;opacity:1;transition:opacity .2s linear}.tablet #content .overlay__right-menu{left:-56px}#tutorial,#tutorial__view{left:0;top:0;z-index:999981;position:absolute}i.user-icon{width:26px;height:26px;line-height:26px;padding:0;border:none;border-radius:50%;font-size:13px;color:#454545}.user-icon.withPicture{background-size:100%;background-position:50% 50%}#me{display:block;overflow:hidden;font-weight:700}#createList,#moduleList{position:absolute;height:100%;width:100%;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;-webkit-transform:translate3d(-100%,0,0)}#tutorial__view{right:0;bottom:0;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);opacity:0;-webkit-transition:opacity .3s linear;transition:opacity .3s linear}#tutorial,.tablet #wrapper{-webkit-transform:translate3d(0,0,0)}#tutorial{max-height:inherit;transform:translate3d(0,0,0)}#tutorial-content .text{position:absolute;width:160px;padding:4px 10px 0;font-size:1rem;font-weight:700;line-height:1.25;color:#fff;z-index:999982}#tutorial-content .text-container{top:15%;position:absolute;left:50%;width:186px}#tutorial-content .text-container .text{position:relative;left:-50%;font-size:1.071em;font-weight:400;text-align:center;width:100%;border-radius:10px;border:2px solid #000;background-color:#313130;opacity:.8;padding:10px;margin-left:-12px}.dashboard,.dashlets__slider-area{position:absolute;overflow:hidden;top:0;right:0}.badge,.label{font-size:11.84px;line-height:14px;color:#fff;vertical-align:baseline;white-space:nowrap;background-color:#CDCCCB}.label{padding:1px 4px 2px;border-radius:3px}.badge{padding:1px 9px 2px;border-radius:9px}a.badge:hover,a.label:hover{color:#fff;text-decoration:none;cursor:pointer}.c-,.dashlet__item{background-color:#9F9F9F}.c-active-tasks{background-color:#73AC56}.c-planned-activities{background-color:#01d1ff}.c-inactive-tasks{background-color:#9C5BDD}.c-bubblechart{background-color:#CE595A}.c-history{background-color:#f2c500}.c-saved-reports-chart{background-color:#E35EA7}.c-activitystream-dashlet{background-color:#F5744C}.c-forecast-pipeline{background-color:#6CB86F}.c-forecastdetails{background-color:#5EA0D4}.c-webpage{background-color:#F96666}.c-dashablelist{background-color:#DAB652}.c-forecast-pareto{background-color:#CD7CDE}.c-twitter{background-color:#599EFF}.c-opportunity-metrics{background-color:#cc6cd9}.c-casessummary{background-color:#e61718}.dashlets__list,.dashlets__slider .dashlet__b:empty,.pagination__bar,.tabs__bar{background:#fff}.layout__Dashboards .backBtn{display:none}.layout__Dashboards.show-paginator .backBtn{display:block}.dashboard{left:0;bottom:0}.dashboard .dashlets__slider-area{visibility:hidden}.dashboard+.pagination__bar{display:none}.show-paginator .dashboard{bottom:51px}.show-paginator .dashboard+.pagination__bar{display:block}.show-dashlets .dashboard .dashlets__list{display:none}.show-dashlets .dashboard .dashlets__slider-area{visibility:visible}.actionsheet-overlay .invisible,.hide-tab,.invisible{visibility:hidden}.show-dashlets .dashboard .dashlets__slider{display:-webkit-box;display:-webkit-flex;display:flex}.dashlets__slider-area{z-index:1;left:0;bottom:0}.dashlets__list{position:relative;z-index:2;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;padding:10px;-webkit-box-sizing:border-box;box-sizing:border-box}.dashlets__list:after{display:table;clear:both}.dashlets__list .dashlet__item{overflow:hidden;min-height:90px;border-radius:6px;-webkit-box-sizing:border-box;box-sizing:border-box;font-size:1rem;text-align:center;color:#fff}.dashlets__list .dashlet__item .dashlet__title{display:block;overflow:hidden;padding:15px 10px 12px;text-transform:uppercase}.dashlets__list .dashlet__item .dashlet__icon{height:45px}.dashlets__list .dashlet__item .icondefault{font-size:30px;line-height:1em}.dashlets__list .dashlet__item.selected-item{opacity:.9}.dashlets__list__col{float:left;padding:5px;width:50%;-webkit-box-sizing:border-box;box-sizing:border-box}.layout__detail .dashlets__list__col{width:50%}@media screen and (min-width:700px){.dashlets__list__col{width:33.33333333%}}@media screen and (min-width:768px){.dashlets__list__col{width:25%}}@media screen and (min-width:1024px){.dashlets__list__col{width:20%}.layout__detail .dashlets__list__col{width:33.33333333%}}.dashlets__title{position:relative;width:100%;height:44px;line-height:44px;overflow:hidden;text-align:center;background:#fff;font-size:1.143rem;font-weight:700;display:none;z-index:1}.dashlets__title.show+.dashlets__slider-area{top:44px}.dashlets__slider{position:relative;width:100%;height:100%;z-index:1;display:-webkit-box;display:-webkit-flex;display:flex;box-shadow:content-box;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transition-property:-webkit-transform;transition-property:transform}.dashlets__slider .dashlet__b,.tabs__bar{display:-webkit-box;display:-webkit-flex}.dashlets__slider .dashlet__b{height:100%;position:relative;display:flex;transform-style:preserve-3d;-webkit-flex-shrink:0;flex-shrink:0}.pagination__bar{position:absolute;bottom:0;left:0;right:0;height:50px;line-height:50px;border-top:solid 1px #e5e5e5;text-align:center;color:#676767}.pagination__bar .icondefault{height:50px;line-height:50px;padding:0 2px;margin:0 2px;font-size:10px}.panel__addpost .btn,.panel__addpost .placeholder{white-space:nowrap;line-height:1.571rem;overflow:hidden;text-overflow:ellipsis}.pagination__bar .icondefault.disabled{color:#ccc}.pagination__bar .next,.pagination__bar .prev{padding:0 12px;font-size:20px}.pagination__bar .prev{float:left}.pagination__bar .next{float:right}.pagination__bar .icon-circle-thin{color:#a8a8a8}.hide-tab{position:absolute;display:block}.tabbed__dashlet{position:absolute;top:0;right:0;bottom:0;left:0}.tabbed__dashlet .tabs__bar{position:absolute;z-index:2}.tabbed__dashlet.has-dashlet-options .easy-scroller-parent{top:40px}.tabs__bar{position:absolute;width:100%;height:54px;display:flex;flex-flow:wrap;border-bottom:solid 1px #d8d8d8;z-index:2}.tabs__bar .tab{position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-flex-align:center;-webkit-align-items:center;align-items:center;border-bottom:4px solid transparent;list-style:none}.tabs__bar .tab:after{position:absolute;top:100%;left:0;right:0;height:17px;background:0 0;content:\' \'}.tabs__bar .tab.selected-item{background:#f6f6f6}.tabs__bar .tab .tab__title{overflow:hidden;display:block;width:100%;max-height:54px;font-size:.857rem;font-weight:700;text-align:center;text-transform:uppercase;color:#000}.tabs__bar .tab .title{display:-webkit-box;overflow:hidden;-webkit-line-clamp:1;-webkit-box-orient:vertical}.dropdown li .name,.line-clamp{-webkit-line-clamp:2;-webkit-box-orient:vertical}.tabs__bar .tab .count{display:inline-block;font-size:.857rem;min-width:22px;width:auto;padding:3px;background-color:#e61718;border-color:transparent;border-radius:3px;margin:2px 0;color:#fff}.tabs__bar .active-tab{border-color:#e61718;color:#000}.tabs__bar--dd{height:55px;padding:0 10px;-webkit-box-align:center;-webkit-flex-align:center;-webkit-align-items:center;align-items:center;border-bottom:1px solid;background:#f6f6f6}.tabs__container{position:absolute;top:0;right:0;bottom:0;left:0;overflow:hidden}.tabs__container .easy-scroller-holder{background:#fff}.tabs__bar+.tabs__container{top:55px}.activitystream-item{padding:0!important}.panel__addpost{display:-webkit-box;display:-webkit-flex;display:flex;padding:8px 10px}.panel__addpost .btn{display:block;font-weight:700}.panel__addpost .placeholder{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:block;padding:4px 10px;margin-right:10px;border:1px solid #ccc;border-radius:2px;background:#f8f8f8;color:#b9bec6}.as__detail{position:relative;min-height:46px;padding:8px 32px 8px 46px}.as__detail .as__icon,.as__detail .label-module-sm{float:left;margin:4px 0 0 -36px}.as__detail .user-icon{border:2px solid #999}.as__detail .as__title{padding-bottom:2px}.as__detail .as__info{font-size:.785rem;color:#717171}.comments-container{margin-left:46px}.comment__item{overflow:hidden;border-top:1px dotted #d8d8d8;padding:6px 10px 6px 38px;font-size:.857rem}.comment__item .user-icon{float:left;margin:4px 0 0 -38px;border:2px solid #999}.comment__item .comment__info{padding-top:3px;font-size:.785rem;color:#717171}.comments-more-btn{display:block;padding:10px 0;border-top:1px dotted #d8d8d8}.sugar_tag{display:inline-block;padding:2px 4px 1px;border-radius:2px;color:#fff;background:#000}.tb__detail{padding-top:4px}.tb__detail .tb__icon{float:left;padding:2px 5px 0 0}.tb__detail .tb__info{color:#717171}.tb__detail .user-icon{border:2px solid #999}.view__taggable{position:relative;height:100%;background:#fff}.taggable,.taggable-shadow{position:absolute;top:0;height:100%;width:100%;padding:10px;white-space:pre-wrap;word-wrap:break-word;text-indent:0;display:block;resize:none;-webkit-box-sizing:border-box;-webkit-line-break:after-white-space;-webkit-appearance:none;overflow-x:hidden;overflow-y:scroll;font-size:1.214rem;line-height:1.286em;outline:0}.taggable{-webkit-overflow-scrolling:auto;background-color:transparent;z-index:4;-webkit-box-shadow:0;letter-spacing:0}.ios .taggable{-webkit-transform:translate3d(-4px,0,0);transform:translate3d(-4px,0,0);left:0;right:-10px;width:auto}.taggable-shadow{background:#fff;border-color:transparent;color:transparent;left:0;right:0;top:0;bottom:0;pointer:none;word-spacing:0;letter-spacing:normal}.taggable-shadow .sugar_tag{display:inline;position:relative;z-index:5;padding:0;color:#fff}.chart-wrapper,.taggable-dropdown{position:absolute;background:#fff;left:0}.taggable-dropdown{top:100px;bottom:0;right:0;overflow-y:scroll;border-top:solid 1px #2d2d2d;border-bottom:solid 1px #2d2d2d;z-index:5}.taggable-dropdown .taggable-listItem{padding:0 10px;line-height:2.5rem;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.taggable-dropdown .taggable-listItem.disabled{color:#717275}.taggable-dropdown .taggable-status{float:right;font-style:italic}.taggable-dropdown .label-module-sm{margin:0 10px 0 0;vertical-align:middle}.show-dropdown .taggable,.show-dropdown .taggable-shadow{height:60px}.show-dropdown .taggable-dropdown{top:60px}.nv-chart{height:100%}.chart-wrapper{width:100%;min-height:100%;top:0;overflow-y:auto}.chart-wrapper.has-scroll{position:static}.chart-wrapper .chart{position:absolute;top:0;left:0;right:0;bottom:0}.chart-wrapper.has-dashlet-options .chart{top:40px}.chart-wrapper .warning-message{padding:20px 0}.forecast-details .fd__b{padding:20px}.forecast-details .fd__b .row-fluid{padding:10px;border-bottom:1px solid #e9e9e9;box-sizing:border-box}.forecast-details .fd__b .row-fluid:after{clear:both;display:table;content:"";line-height:0}.forecast-details .fd__b .row-fluid.deficitRow{border-top:1px solid #e9e9e9;font-weight:600}.forecast-details .fd__b .row-fluid.deficitRow.font-green{color:#33800d}.forecast-details .fd__b .row-fluid.deficitRow.font-red{color:#e61718}.forecast-details .fd__b .row-fluid.details-cols{padding:10px 0;border-bottom:none}.forecast-details .fd__b .row-fluid .span1{float:left;width:100%}.forecast-details .fd__b .row-fluid .span2{float:left;width:48.9%;margin-left:2.2%}.forecast-details .fd__b .row-fluid .span2:first-child{margin-left:0}.forecast-details .fd__b .row-fluid .span3{float:left;width:32%;margin-left:2%}.forecast-details .fd__b .row-fluid .span3:first-child{margin-left:0}.forecast-details .fd__b .row-fluid .ellipsis_inline{display:block!important;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.forecast-details .fd__b .row-fluid .ellipsis_inline.green{background:#33800d}.forecast-details .fd__b .row-fluid .ellipsis_inline.grayLight{background:#717171}.forecast-details .fd__b .row-fluid .ellipsis_inline.red{background:#e61718}.forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_amount,.forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_feedback,.forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_label{display:block}.forecast-details .fd__b .row-fluid:last-child div[class*=span]>.forecast_details_default_feedback{font-size:11px;line-height:16px;color:#fff;border-radius:3px;padding:8px;margin-top:4px}.forecast-details .fd__b .row-fluid .forecast_details_no_access{padding:3px 6px;color:#fff;background:#666;border-radius:4px;font-size:11px;display:inline-block;margin-top:3px}.forecast-details .warning-message{padding:20px}@media screen and (max-height:360px){.landscape .forecast-details .fd__b{padding:5px 20px 20px}.landscape .forecast-details .fd__b .row-fluid{padding:5px}.landscape .forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_amount,.landscape .forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_amount .fdf_ln1,.landscape .forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_feedback,.landscape .forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_feedback .fdf_ln1,.landscape .forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_label,.landscape .forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_label .fdf_ln1{display:inline}}.filters-wrap{display:-webkit-box;display:-webkit-flex;display:flex;padding:5px 5px 5px 10px}.filters-wrap .controls{border-bottom:none}.filter{white-space:nowrap;padding-right:20px}.filter .control-label,.filter .placeholder{display:none}.filter .actionsheet-select,.filter select{position:relative;padding-right:16px;-webkit-appearance:none;z-index:1}.dashlet-options{position:relative;height:40px;background:#fff;border-bottom:1px solid #e5e5e5;z-index:2;display:-webkit-box;display:-webkit-flex;display:flex}.dashlet-options .dashlet-options_bigbar{-webkit-box-flex:1;-webkit-flex:1;flex:1}.dashlet-options .visibility-switcher{min-height:28px;padding:5px 10px}.dashlet-options .my-items-btn{width:32px;height:36px;line-height:36px;padding:0;border:none;font-size:16px;text-align:center;color:#555;position:absolute;top:0;right:5px}.dashlet-options .my-items-btn.active{background-color:transparent;color:inherit!important}.dashlet-options .my-items-btn.active .user-icon:before{content:"\\f007"}.twitter-wrapper .tw__user_icon{border:none!important;border-radius:5px!important;background-color:#fff;width:26px;height:26px;background-size:100%;background-position:50% 50%}.twitter-wrapper .tw__as__title{padding-top:2px}.twitter-wrapper .tw__as_profile_link{color:#585858}.twitter-wrapper .tw__as_content_url{word-wrap:break-word;width:100%}.dashlet-webpage{height:100%;width:100%;background:#fff}.dashlet-webpage .wp__wrapper{position:absolute;top:40%;left:0;right:0;text-align:center}.dashlet-webpage .wp__container{display:inline-block;min-width:60%;max-width:70%;border:1px solid #ddd;padding:5px;-webkit-border-radius:3px;background-color:#f5f5f5}.dashlet-webpage .wp__favlogo{position:absolute;float:left;top:38%;padding-left:10px;color:#666}.dashlet-webpage .wp__content{overflow:hidden;text-align:left;padding-left:35px}.dashlet-webpage .wp__title{right:auto;padding:2px;color:#000}.dashlet-webpage .wp__url{font-size:.885rem;right:auto;padding:2px;word-wrap:break-word}.donut-chart{position:absolute;width:100%;height:100%;left:0;top:0}.donut-chart .nv-chart{position:absolute;width:100%;height:auto;min-height:50px;min-width:100px;top:0;bottom:0}.donut-chart .donut-chart-metric-container{position:absolute;width:100%;height:auto;bottom:0;left:0}.donut-chart .chart-metric{text-align:center;width:33%;position:relative;border-top:1px solid #e8e8e8;border-right:1px solid #e8e8e8;float:left;padding:14px 0 4px;-webkit-box-sizing:border-box;box-sizing:border-box;bottom:0}.donut-chart .chart-metric:last-child{border-right:none}.donut-chart .chart-metric span.label{width:26px;height:26px;padding:3px;position:absolute;top:-22px;left:50%;margin-left:-12px;border:none;font-size:1rem;line-height:1.786rem}.donut-chart .chart-metric div.metric-description span{float:none;display:inline-block;font-weight:700;font-size:10px;text-align:center;text-shadow:0 1px 0 #636363;margin-right:3px!important}.altview,.background{display:none}.donut-chart .chart-metric div.metric-amount{font-weight:700;-webkit-box-sizing:border-box;box-sizing:border-box}.opportunity-metrics-wrapper{position:absolute;height:100%;width:100%}.opportunity-metrics-wrapper .nv-chart{bottom:70px}.opportunity-metrics-wrapper .nv-chart .active{fill:#176de5}.opportunity-metrics-wrapper .nv-chart .won{fill:#33800d}.opportunity-metrics-wrapper .nv-chart .lost{fill:#e61718}#overlay .icon-spinner-path,#overlay.tint .icon-spinner-path{fill:#000}.opportunity-metrics-wrapper .chart-metric span.label.won{background-color:#33800d}.opportunity-metrics-wrapper .chart-metric span.label.lost{background-color:#e61718}.opportunity-metrics-wrapper .chart-metric span.label.active{background-color:#176de5}.opportunity-metrics-wrapper .chart-metric div.metric-amount.won{color:#33800d}.opportunity-metrics-wrapper .chart-metric div.metric-amount.lost{color:#e61718}.opportunity-metrics-wrapper .chart-metric div.metric-amount.active{color:#176de5}.background{position:absolute!important;top:50px;left:0;right:0;bottom:0;background:#fff;z-index:9999!important}.checkbox-icon,.checkbox_custom{position:relative;vertical-align:middle}.fno{float:none!important}.fleft{float:left!important}.fright{float:right!important}.vis_action_hidden{display:none!important}h1,h2,h3,h4,h5,h6{font-weight:400}h1{font-size:26px}.ellipsis{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.line-clamp{display:-webkit-box;overflow:hidden}.checkbox_default{-webkit-appearance:none;width:1.286rem;height:1.286rem;border-width:1px;border-style:solid;border-color:#999;border-radius:3px}.checkbox_default:checked:after{content:"\\2713";font-size:130%;line-height:16px}.checkbox_custom{width:1.286rem;height:1.571rem;-webkit-appearance:none;border:none;background:0 0;box-shadow:none;z-index:2}.checkbox_custom+.checkbox-icon{width:1.286rem;margin-left:-1.286rem;z-index:1}.checkbox-icon{display:inline-block;font-size:1.357rem;line-height:1;color:#111;text-align:left;z-index:1}.modal{position:absolute;top:10px;left:10px;right:10px;width:auto;margin:0}#overlay,.overlay-view,.overlay-view .message{position:absolute;left:0;width:100%}.modal.fade.in{top:auto}.modal .modal-header .close{padding:10px;margin:-10px}.overlay-view{top:0;height:100%;background-color:rgba(0,0,0,.7);z-index:1001}.overlay-view .message{top:45%;text-align:center;opacity:.8;color:#fff}#overlay{top:0;height:100%;z-index:999990;font-size:1.357rem;font-weight:700;text-align:center}#overlay #overlay-spinner{height:32px;width:32px;margin-top:20px;display:none}#overlay .current,#overlay.spinner #overlay-spinner,.label-module-sm{display:inline-block}#overlay #overlay-spinner .icon-spinner{width:32px;height:32px}#overlay .current{padding-bottom:10px}#overlay .completed{font-size:.632em;color:#CDCCCB}#overlay.spinner #overlay-message,#overlay.spinner #overlay-spinner{position:relative;top:40%}#overlay.tint{background:#fff;color:#000}#overlay .icon-spinner{display:inline-block;vertical-align:top;width:18px;height:18px;margin-right:3px}.dropdown li.filters-preloader .icon-spinner .icon-spinner-path,.listing .show-more-btn .loading-holder .icon-spinner .icon-spinner-path,.view__search .icon-spinner .icon-spinner-path{fill:#c2c2c2}.label-module-sm{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;height:24px;width:24px;font-weight:400;font-size:12px;line-height:24px;border-radius:50%;background:#9aa5ad;white-space:nowrap;text-align:center;color:#fff}.label-module-sm .icondefault{font-size:18px;width:18px;height:18px;line-height:18px;text-align:center;color:#58595b}.label-module-sm.has-icon-inside .label-module-sm_title{position:absolute;top:4px;left:4px}.label-module-sm .icon-th{margin-top:1px;color:#2b2b2b}.label-Bugs{background-color:#e61718}.label-Cases{background-color:#e85479}.label-ProspectLists,.label-Prospects,.label-TargetLists,.label-Targets{background-color:#6a800d}.label-CampaignLog,.label-Campaigns{background-color:#445208}.label-Opportunities{background-color:#a05cff}.label-RevenueLineItems{background-color:#00cbf3}.label-Products{background-color:#5dc8f8}.label-Forecasts{background-color:#0d8046}.label-Quotes{background-color:#0eba61}.label-Accounts{background-color:#51cd15}.label-Contacts{background-color:#cc6cd9}.label-Leads{background-color:#7651fc}.label-Reports{background-color:#ff973e}.label-Files{background-color:#6f1c0b}.label-Documents{background-color:#626bf5}.label-KBContents,.label-KBDocuments{background-color:#6f1c0b}.label-Calendar{background-color:#0d806c}.label-Meetings{background-color:#2ee0cd}.label-Calls{background-color:#01d1ff}.label-Emails{background-color:#1257b7}.label-Tasks{background-color:#ff5a9c}.label-Notes{background-color:#28bdf0}.label-Workflow{background-color:#1378bf}.label-Users{background-color:#111}.label-Employees{background-color:#2c97de}.view__search,.view__search .search-query{background:#fff;-webkit-box-sizing:border-box}.label-empty{background:#fff;border:1px solid #555;color:#555}.view__filters.filters-hidden{display:none}.box__filter{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;height:44px;padding:6px 7px;background:#f7f8f9;white-space:nowrap}.box__filter .filter__item{padding-left:4px}.box__filter .filter__item:first-child{padding-left:0}.box__filter .filter__seporate{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding-left:0}.box__filter .filter__item-by{max-width:160px}.box__filter .filter__item-sort{width:32px}.box__filter .btn-filter{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.view__search{display:none;position:absolute;top:-50px;left:0;width:100%;box-sizing:border-box;-webkit-transition:all .6s linear;transition:all .6s linear;height:46px;padding:6px 5px;z-index:9002;opacity:0}.view__search.show-search{display:-webkit-box;display:-webkit-flex;display:flex}.view__search .box__search-query{position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1}.view__search .box__search-icon{position:absolute;top:8px;left:10px;color:#c2c2c2}.view__search .icon-spinner{display:none;position:absolute;top:9px;left:9px;width:16px;height:16px}.view__search .search-query{box-sizing:border-box;width:100%;height:34px;padding:4px 35px 4px 32px;border-radius:2px}.view__search .clear-button{display:none;position:absolute;top:0;right:0;padding:6px 6px 5px 12px;margin:0;font-size:1rem;line-height:24px;color:#c2c2c2}.view__search .not-empty .clear-button{display:block}.view__search .searchCancelBtn{height:30px;padding:10px;margin:-7px -10px -6px 0;float:none}.view__search .searchCancelBtn.selected-item{background:#f5f5f5}.view__search .searchCancelBtn .btn{padding-top:6px;color:#0c89d1}.view__search-box.in-progress .box__search-icon{display:none}.view__search-box.in-progress .icon-spinner{display:block}.dropdown,.overlay-dropdown{position:absolute;top:44px;z-index:2;display:none}.overlay-dropdown{left:0;width:100%;height:1500px;background:#000;opacity:.55}.dropdown{overflow-y:auto;border-radius:0 0 2px 2px;background:#fff;max-height:70%}.dropdown.dropdown__filter{left:7px;width:190px}.dropdown.dropdown__sortBy{right:7px;width:183px}.dropdown li{display:block;border-top:1px solid #e8e8e8}.dropdown li:first-child{border:none}.dropdown li.filters-preloader{display:none}.dropdown li.filters-preloader .icon-spinner{display:inline-block;width:16px;height:16px;margin-right:8px;vertical-align:top}.dropdown li.filters-preloader.show{display:block}.dropdown li.selected-item{background:#f6f6f6}.dropdown li.filters-fetching-error{display:none;padding:8px 10px;text-align:center}.dropdown li a.active .check-icon,.dropdown li.filters-fetching-error.show{display:block}.dropdown li.filters-fetching-error span{font-size:.857rem}.dropdown li.filters-fetching-error .filters-try-again{font-size:1rem;color:#0679c8;text-decoration:underline}.dropdown li a{position:relative;display:block;height:2.857rem;color:#323232}.dropdown li a.active{color:#0679c8}.dropdown li a.filters-reload{height:auto}.dropdown li .name{position:absolute;top:50%;left:22px;right:7px;-webkit-transform:translateY(-50%);transform:translateY(-50%);max-height:2.857rem;overflow:hidden;text-overflow:ellipsis;display:-webkit-box}.dropdown li .check-icon{display:none;position:absolute;top:50%;left:6px;margin-top:-9px;font-size:13px}.listing .no-records-found p,.listing article p:last-child{margin:0}.dropdown li .loading-error{height:auto;padding:12px 0;text-align:center}.dropdown li .loading-error .message{display:block;padding-bottom:6px}.dropdown li .loading-error .link{color:#0679c8;text-decoration:underline}.mobile.show-content-child #content{display:none}.mobile.show-content-child #content-child{display:block}.tablet.android #menu-left{width:300px}.tablet #menu-left{overflow:hidden;width:54px}.tablet #menu-left .menu-item__label{opacity:0;-webkit-transition-duration:.3s;transition-duration:.3s}.tablet #menu-left .menu__inner.menu__item .menu-item__link{padding-right:15px}.tablet.show-menu-left #menu-left{width:300px}.tablet.show-menu-left #menu-left .menu-item__label{opacity:1}.tablet #wrapper{transform:translate3d(0,0,0);left:54px;background:#fff}.tablet.show-content-child #content{display:block;width:340px}.tablet.show-content-child #content-child{display:block;box-shadow:-2px 0 7px rgba(0,0,0,.1)}.tablet #moduleList{-webkit-transform:translate3d(0,0,0)}.tablet .layout__detail .bizcard{min-height:305px}.tablet .layout__detail .view__detail-tabs{top:305px}#content,#content-child,#wrapper{top:0;left:0;position:absolute;bottom:0;right:0}#content,#content-child{z-index:2002}#content-child{display:none}.layout__def{position:absolute;top:50px;bottom:0;left:0;right:0;z-index:1}.layout__def .box__header{top:-50px}.layout__def .box__edit{top:50px}#content-overlay{position:absolute;width:100%;left:0;top:50px;bottom:0;z-index:2003;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);overflow:scroll;-webkit-overflow-scrolling:touch;opacity:0}#content-overlay.full,.show-menu-left #content-overlay{top:0}.easy-scroller-parent{position:absolute;top:0;right:0;bottom:0;left:0}.view__filters~.easy-scroller-parent{top:44px}.filters-hidden .easy-scroller-parent{top:0}.easy-scroller-holder{position:absolute;top:0;min-height:100%;left:0;right:0;z-index:1}.layout__Dashboards .easy-scroller-holder,.layout__list .easy-scroller-holder{background:#fff}.actionsheet-overlay{top:0;background-color:rgba(0,0,0,.5);z-index:9999;width:100%;bottom:0;position:absolute;display:none}.actionsheet-overlay .popup{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);min-width:250px;max-width:90%;font-weight:700;background-color:#fff;color:#000;font-size:16px;position:absolute}.actionsheet-overlay .popup .footer .cancel.selected-item,.actionsheet-overlay .popup .items .item.selected-item{background:#666}.actionsheet-overlay .popup .header{border-bottom:3px solid #d3dbe1;padding:16px 0;text-align:center}.actionsheet-overlay .popup .items{max-height:120px;overflow:auto;overflow-x:hidden}.actionsheet-overlay .popup .items .item{height:40px!important;line-height:40px;width:auto;padding-left:20px;padding-right:20px;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.actionsheet-overlay .popup.compact .footer .cancel,.actionsheet-overlay .popup.compact .header{padding:10px!important}.actionsheet-overlay .popup.compact .items{max-height:80px!important}.actionsheet-overlay .popup .footer{border-top:2px solid #d3dbe1}.actionsheet-overlay .popup .footer .cancel{display:block;color:#000;text-align:center;padding:16px}.items article,.scroll>.pad>span .control-group,.view__summary .scroll>ul>li{position:relative}.ios .items article,.ios .scroll>.pad>span .control-group,.ios .view__summary .scroll>ul>li{-webkit-transform:translatez(0)}.listing{background:#fff;min-height:100%;width:100%;padding-bottom:1px;overflow:hidden;z-index:2}.listing .no-records-found{display:none;color:grey;background-color:#f4f4f4;padding:18px 15px 20px}.listing .bucket-header,.listing article{padding:8px 8px 8px 12px;border-top:1px solid #d8d8d8}.listing #activity-stream .no-records-found{background:#fff}.listing .bucket-header{min-height:15px;background:#f5f5f5;border-bottom:solid 1px #e8e8e8;font-weight:700}.listing article{display:block;background:#fff;min-height:52px}.listing article p{display:block}.listing article.item-checkbox_checked,.listing article.selected-item{background:#ededed!important}.listing article.current{background:#9aa5ad;border-color:#dcdcdc;color:#fff}.listing article.current .fields .value,.listing article.current .item-label,.listing article.current .item-name,.listing article.current .module-name,.listing article.current .module-name-comma,.listing article.current .tb__info,.listing article.current a,.listing article.current div.search-result{color:#fff!important}.listing article.deleted{opacity:0}.listing .list-item .txt{margin-top:6px;min-height:2.7em}.listing .list-item .txt .clip{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.listing .list-item .txt .clip a em{font-style:normal;color:#555}.listing .list-item .txt .item-name,.listing .list-item .txt>.clip:first-child{font-size:1.143rem;line-height:1.3em}.listing .list-item .txt .module-name{float:left;max-width:50%;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-style:normal;color:#000;font-size:1.143rem;line-height:1.3em}.listing .list-item .txt .module-name-comma{float:left;font-size:1.143rem;line-height:1.3em;padding-right:4px;color:#000}.listing .list-item .txt .highlight{font-weight:700;color:inherit}.listing .list-item .txt div.search-result{color:#000;font-size:1rem}.listing .list-item .txt div.search-result .highlight{padding:0 2px;background:#dfdfdf;color:#000;font-weight:400}.listing .list-item .txt div.search-result .relate-link{color:#000}.listing .list-item .search{height:auto}.listing .list-item .additional{padding-top:.3em;padding-bottom:.3em;font-size:.929rem}.listing .list-item .additional div.search-result{display:block}.listing .list-item .txt.has-access .item-name{color:#0679c8}.listing .list-item .fields{padding-top:2px}.listing .list-item .fields .value{color:#000}.listing .list-item .fields .field{overflow:hidden}.listing .list-item .fields .item-label{float:left;width:46%;padding-right:10px;font-weight:500;color:#000}.listing .list-item.tx-item{font-size:1.143rem;color:#0679c8}.listing .list-item.error{color:#fff;background:#e61718;border-top:none;border-bottom:solid 3px #8a1a0f}.listing .list-item.error .module-name,.listing .list-item.error .module-name-comma{color:#fff}.listing .list-item.warning{color:#fff;background:#ffa800;border-top:none;border-bottom:solid 3px #b27500}.listing .list-item.warning .module-name,.listing .list-item.warning .module-name-comma{color:#fff}.listing article.has-grip{padding-right:32px}.listing article.item-checkbox{position:relative;padding-right:32px}.listing article.item-checkbox .asscacct,.listing article.item-checkbox .checkbox-icon{position:absolute;top:50%;right:0;width:31px;margin-top:-.5em}.listing .show-more-btn{background:#f5f5f5;border-top:1px solid #d8d8d8;padding:0 14px;margin-bottom:0;min-height:42px;line-height:42px}.listing .show-more-btn.show-more-top-btn{z-index:1}.listing .show-more-btn:first-child,.listing .show-more-btn:nth-child(2),.listing .show-more-btn:nth-child(3){border-bottom:1px solid #d8d8d8;margin-bottom:-1px}.listing .show-more-btn .loading-holder .icon-spinner{display:inline-block;margin-right:5px;vertical-align:text-top}.picker-list-row{line-height:52px;font-size:1.143rem}.picker-list-row .label-module-sm{margin:-2px 9px 0 0}.picker-list-row a{color:#555}.menu-container-grip{position:absolute;top:0;right:0;height:100%;width:20px;padding:0 0 0 15px;font-size:14px;font-style:normal;line-height:68px}.menu-container{position:absolute;top:0;bottom:0;left:100%;width:100%;background:#f4f5f6;text-align:center}.menu-container.on{left:0}.menu-container a{display:inline-block;padding:18px 0 300px;height:26px;width:62px;color:#262626;text-align:center;font-size:11px;line-height:18px}.menu-container a .icondefault{font-size:20px;color:#262626}.menu-container a.selected-item .icondefault{color:#262626}.menu-container a .icon-spinner{display:inline-block;width:14px;height:14px}.menu-container a .icon-spinner .icon-spinner-path{fill:#262626}.menu-container .grip{position:absolute;top:0;left:0;height:100%;line-height:68px;width:16px;padding:0 2px 0 10px;font-size:14px;color:#262626}.menu-container .box__context-menu{display:-webkit-box;display:-webkit-flex;display:flex;justify-content:center}.menu-container .box__context-menu .disabled{opacity:.2}.menu-container .action-label{display:block}.ios .menu-container{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-transition-duration:.15s;transition-duration:.15s}.ios .menu-container.on{left:100%;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.error-box{padding:18px 15px 20px;background-color:#e61718;font-weight:700;color:#fff}.view__detail-tabs{position:absolute;top:195px;bottom:0;left:0;right:0}.box__related-actions{margin:0;padding:0}.box__related-actions .related-action__item{list-style:none;padding:0 0 0 10px;line-height:41px;border-bottom:1px solid #d8d8d8;min-height:42px;position:relative}.box__related-actions .related-action__item.selected-item{background-color:#ededed}.box__related-actions .related-action__item .related-action-item__link{position:relative;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:44px;color:#555;text-decoration:none}.box__edit .control-group .controls .line-through,.email_type_invalid{text-decoration:line-through}.box__related-actions .related-action__item .label-module-sm{margin:0 9px -6px 0}.box__related-actions .related-action__item .more{position:absolute;top:0;right:10px;line-height:inherit}.box__related-actions .related-action__item .related-action-item__add{position:absolute;right:0;top:0;width:44px;padding:0;text-align:center;color:#555}.box__related-actions .related-action__item.related-action__item_empty .related-action-item__link{color:#b2b2b2}.bizcard{position:absolute;left:0;top:0;width:100%;z-index:1000;min-height:195px;background:#033d64;color:#fff;font-size:1.071rem}.bizcard .avatar,.bizcard .label-module-sm{top:10px;left:10px;position:absolute;text-align:center}.bizcard .avatar{overflow:hidden;height:68px;width:68px;border-radius:36px;border:1px solid #9aa5ad;background-repeat:no-repeat;background-position:50% 50%;background-size:100%}.bizcard .avatar .icondefault{width:1em;height:1em;line-height:70px;font-size:38px;color:#fff}.bizcard .label-module-sm{width:68px;height:68px;line-height:68px;font-size:26px}.bizcard .label-module-sm .label-module-sm_title{top:13px;left:10px}.bizcard .label-module-sm .icondefault{font-size:50px;line-height:1em}.bizcard .input_upload{position:absolute;top:0;left:0;width:90px;height:90px;opacity:0;z-index:5}.bizcard .card{position:absolute;top:0;bottom:36px;left:0;right:0;padding:10px 42px 0 10px;line-height:2em;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}.bizcard .card .title{display:block;color:#fff;font-size:1.429rem;line-height:1.714rem}.bizcard .card .title.selected-item{color:#d3dbe1}.bizcard .card a{color:#fff}.bizcard .card .row-field{line-height:1.3em;padding-bottom:.857rem}.bizcard .card .row-field .value-label{display:none}.bizcard .card .row-field.textarea .value{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;white-space:normal}.bizcard .card .row-field .value,.bizcard .more .follow-label i,.bizcard-more .bizcard .card .value-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.bizcard .card .row-field .value{display:block}.bizcard .card .row-field .value .subvalue{font-size:.857rem}.bizcard .card .row-field .value .value-label{color:#d3dbe1}.bizcard .card .row-field .value .relate-link{padding:10px 0;color:#fff}.bizcard .card .row-field .value .relate-link.selected-item{color:#d3dbe1}.bizcard .card .row-field .horizontal-fieldset .row-field,.bizcard .card .row-field .horizontal-fieldset .value{display:inline}.bizcard .card .additionalFields{display:none}.bizcard .favorite-icon{position:absolute;bottom:0;right:3px;padding:10px 8px 12px 10px;font-size:1.286rem;line-height:1em;color:#fff;z-index:10}.bizcard .favorite-icon.color-disabled{color:#d3dbe1}.bizcard .followable .favorite-icon{right:82px}.bizcard .more{position:absolute;top:0;bottom:52px;left:0;right:0;color:#d3dbe1}.bizcard .more .follow-label{position:absolute;bottom:0;right:0;padding:10px 10px 10px 5px;font-size:12px;color:#d3dbe1;z-index:5}.bizcard .more .follow-label i{max-width:54px;display:block;padding:0 5px;border:2px solid #d3dbe1;border-radius:4px;font-style:normal;font-weight:400}.bizcard .more .show-more .icon__hide-more,.bizcard.noactions .box__record-action{display:none}.bizcard .more .follow-label.followed i{background:#fff;border-color:#fff;color:#033d64}.bizcard .more .goedit-icon{position:absolute;top:0;right:0;padding:15px 16px 10px;color:#d3dbe1}.bizcard .more .goedit-icon .icondefault{font-size:1.143rem}.bizcard .more .goedit-icon.selected-item{color:#fff}.bizcard .more .show-more{position:absolute;left:0;bottom:0;height:40px;line-height:40px;padding:0 15px 2px 10px;color:#d3dbe1;z-index:2}.bizcard #accountDescription{margin:10px 0 0}.bizcard .box__record-action{position:absolute;left:0;bottom:0;right:0;height:52px}.box__edit,.scroll,.textarea .scroll .pad{height:100%}.bizcard.noactions .more{bottom:0}.bizcard.icon-inside .card{padding-left:90px}.bizcard.icon-inside .show-more{left:80px}.bizcard-more .bizcard{min-height:100%!important}.bizcard-more .bizcard .avatar,.bizcard-more .bizcard .label-module-sm{opacity:.3}.bizcard-more .bizcard .card .row-field{margin-bottom:.2rem}.bizcard-more .bizcard .card .value-label{display:block;padding-bottom:3px;font-size:.857rem;line-height:1.2em;color:#d3dbe1}.bizcard-more .bizcard .card .value{white-space:normal}.bizcard-more .bizcard .card .textarea .value{-webkit-line-clamp:initial}.bizcard-more .bizcard .card .horizontal-fieldset .value-label{display:none}.bizcard-more .bizcard .card .horizontal-fieldset .value{display:inline}.bizcard-more .bizcard .card .additionalFields{display:block}.bizcard-more .bizcard .show-more .icon__show-more{display:none}.bizcard-more .bizcard .show-more .icon__hide-more{display:inline-block}.landscape .bizcard{min-height:190px}.landscape .view__summary .scroll{top:190px}.brand{background:url('+n(279)+") 50% 50% no-repeat;background-size:contain;text-indent:-7000px;overflow:hidden;margin:10px auto}.scroll{position:absolute;width:100%;left:0;top:0;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}.scroll .pad{padding-bottom:1px;min-height:100%;width:100%;background:#fff}.textarea .scroll .pad>textarea{-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;height:100%;padding:10px}.box__edit{display:block;margin:0}.box__edit .actionsheet-select,.box__edit .uneditable-input,.box__edit input:not([type=checkbox]),.box__edit select,.box__edit textarea{float:left;position:relative;height:3.286rem;line-height:1.858rem;width:85%;padding:.714rem 15% .714rem 0;margin:-.714rem 0;z-index:2}.box__edit .actionsheet-select{height:auto;min-height:20px}.box__edit .selector .actionsheet-select{width:auto}.box__edit select{width:100%;-webkit-appearance:none}.box__edit .parent input,.box__edit .relate input{padding-right:0;width:75%}.box__edit textarea{padding-top:5px;height:48px;line-height:17px}.box__edit .textarea-div{overflow-y:auto;padding-top:.357rem;min-height:48px;max-height:86px;line-height:1.214em;white-space:pre-wrap;color:#000}.box__edit .input-wrapper input{width:100%;padding-right:0}.box__edit .enum-list{width:100%;min-height:21px;padding-top:5px;cursor:pointer}.box__edit .enum-list .label{display:inline-block;position:relative;padding:8px 25px 8px 8px;margin-bottom:6px;background:#ebebeb;color:#696969;font-size:.929rem;line-height:1;white-space:normal}.box__edit .enum-list .label i{position:absolute;top:0;right:0;height:100%;padding:0 8px 0 10px;font-size:.857rem;color:#828282}.box__edit .enum-list .label i.selected-item{color:#1c1c1c}.box__edit .enum-list .label i:before{position:relative;top:8px}.box__edit .clip{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.box__edit .controls-flex{display:-webkit-box;display:-webkit-flex;display:flex}.box__edit .controls-flex .input-wrapper,.box__edit .controls-flex .picture-wrap{display:block;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-flex:1;-webkit-flex:1;flex:1}.box__edit .controls-flex .txt-value{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:1.858rem;line-height:1.858rem;font-size:1.214rem;color:#111}.box__edit .controls-flex .btn-group{display:-webkit-box}.box__edit .error .controls-flex{display:block}.box__edit .email.error .controls-flex{display:-webkit-box;display:-webkit-flex;display:flex}.box__edit .controls-flex+.controls-flex{margin-top:6px}.box__edit .email .controls-flex .input-wrapper{display:-webkit-box;display:-webkit-flex;display:flex}.box__edit .control-group .controls .span2 .enum-item,.box__edit_readonly.box__edit .control-group .controls.readonly-item .value{display:block}.box__edit .email .controls-flex .input-wrapper .input-email{height:1.858rem;margin-top:0;padding-top:0;margin-bottom:0;padding-bottom:0;line-height:1}.box__edit .email .controls-flex .input-wrapper .clear-button{margin-right:5px}.box__edit .email .controls-flex.error{position:relative}.box__edit .email .controls-flex.error .input-wrapper{margin-right:15px}.box__edit .email .controls-flex.error .input-wrapper .input-email{color:red}.box__edit .email .primary-address .input-email,.box__edit .email .primary-address .txt-value{font-weight:700}.box__edit .email .invalid-email .input-email,.box__edit .email.readonly .invalid-email .txt-value{text-decoration:line-through;font-weight:400}.box__edit .email .opt-out .input-email{color:#58595B;font-weight:400}.box__edit .email.readonly .opt-out .txt-value{color:#b5b5b5;font-weight:400}.box__edit .email .btn{min-width:35px;color:#262626}.box__edit .email .f-email__add{position:relative;padding-top:7px;font-size:1rem;color:#0679c8;z-index:2}.box__edit .uneditable-link{padding-top:4px;height:1.857em;display:block;vertical-align:middle}.box__edit .avatar{height:32px;width:32px;background-position:50% 50%;background-repeat:no-repeat}.box__edit .control-group{margin-left:10px;margin-right:10px}.box__edit .control-group.error .error-icon{position:absolute;top:1.1rem;right:15px;line-height:1em;color:red}#nomad .box__edit .control-group.readonly .textarea-div,#nomad .box__edit .control-group.readonly input,#nomad .box__edit .control-group.readonly label,#nomad .box__edit .control-group.readonly select{color:#b5b5b5}#nomad .box__edit_readonly.box__edit .control-group.readonly input,#nomad .box__edit_readonly.box__edit .control-group.readonly label,#nomad .box__edit_readonly.box__edit .control-group.readonly select{color:#7e878d}#nomad .box__edit_readonly.box__edit .control-group.readonly .subvalue{color:#111}.box__edit .control-group .controls{-webkit-box-sizing:border-box;box-sizing:border-box;min-height:32px;font-size:1.143rem}.box__edit .control-group .controls.clip{width:auto;margin-left:0}.box__edit .control-group .controls .span2{width:100%;margin:0;line-height:27px}.box__edit .control-group .controls .span2+.span2{clear:both;margin-top:5px}.box__edit .control-group .controls .checkbox_custom{width:65%;height:34px;margin-top:-5px;margin-bottom:-5px}.box__edit .control-group .controls .checkbox_custom+.checkbox-icon{margin:5px 0 0 -65%}.box__edit .control-group .controls.readonly-item{word-wrap:break-word;padding-top:.286rem;color:#b5b5b5}.box__edit .control-group .readonly-item.color-def,.box__edit_readonly.box__edit .control-group .controls.readonly-item{color:#111}.box__edit .control-group.radio .btn{min-height:24px;padding-top:2px;padding-bottom:2px;margin-top:2px;margin-bottom:2px}.box__edit .control-group .btn.fright{min-width:20px;padding-left:2px;padding-right:2px;margin-left:5px}.box__edit .control-group .btn.fright:last-child{margin-left:0}.box__edit .control-group.file .controls{min-height:40px}.box__edit .control-group.file .picture-wrap{height:28px;float:left}.box__edit .control-group.file .picture-wrap img{position:absolute;top:0;left:0;max-width:none}.box__edit .control-group.file .picture-wrap img.hide{display:none}.box__edit .control-group.file .picture-wrap .picture-icon .icondefault{line-height:26px;font-size:24px;color:#ccc}.box__edit .control-group.file .picture-wrap .input_upload{position:absolute;top:0;bottom:0;left:0;width:100%;padding:0;margin:0;opacity:0}.box__edit .control-group.file .picture-wrap .value{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:1.858rem;line-height:1.858rem;color:#111}.box__edit .control-group.file .picture-wrap .picture-icon+.placeholder{display:inline-block}.box__edit .control-group.file .picture-wrap .picture-icon.hide+.placeholder+.value,.box__edit .control-group.file .picture-wrap .picture-icon.hide+.value{display:block}.box__edit .control-group.file .file-remove{z-index:2}.box__edit .control-group.file .clear-button{float:right;height:28px;padding:.33em 5px 5px;margin:-.33em -5px -5px 0;font-size:1rem;line-height:28px;color:#c2c2c2}.box__edit .control-group.field__datetime .controls.has-btn-group{padding-right:1.5rem}.box__edit .control-group.field__datetime .date{float:left;overflow:hidden;width:8rem;height:2.5rem;margin:-.357rem 0}.box__edit .control-group.field__datetime .date input{display:table;padding:0;margin:0;width:100%;height:2.571rem;line-height:2.571rem}.box__edit .control-group.field__datetime .time{float:left;overflow:hidden;width:7rem;margin:-.357rem 0;border-left:solid 1px #f2f2f2}.box__edit .control-group.field__datetime .time input{width:auto;height:2.571rem;padding-left:10px}.box__edit .control-group.field__datetime input{float:none;-webkit-appearance:none;background:0 0;opacity:1;white-space:nowrap}.box__edit .control-group.field__date input.empty,.box__edit .control-group.field__datetime input.empty{opacity:0}.box__edit .control-group.field__datetime input::-webkit-calendar-picker-indicator,.box__edit .control-group.field__datetime input::-webkit-clear-button,.box__edit .control-group.field__datetime input::-webkit-inner-spin-button,.box__edit .control-group.field__datetime input::-webkit-outer-spin-button{display:none;-webkit-appearance:none}.box__edit .control-group.field__datetime input[disabled]{-webkit-text-fill-color:#111}.box__edit .control-group.field__datetime .btn-group{position:absolute;top:1.429rem;right:0}.box__edit .control-group.field__date input{-webkit-appearance:listitem;background:0 0}.box__edit .control-group.field__date input::-webkit-calendar-picker-indicator,.box__edit .control-group.field__date input::-webkit-clear-button,.box__edit .control-group.field__date input::-webkit-inner-spin-button,.box__edit .control-group.field__date input::-webkit-outer-spin-button{display:none;-webkit-appearance:none}.box__edit .control-group.field__date input[disabled]{-webkit-text-fill-color:#111;opacity:1}.box__edit .field__date .placeholder,.box__edit .field__datetime .placeholder,.box__edit .field__enum .placeholder{height:1.858rem;line-height:1.858rem;margin-bottom:-1.858rem}.box__edit .field__radio .controls{overflow:hidden}.box__edit .field__radio .controls .btn{position:relative;left:-5px;min-height:1.786rem;line-height:1.786rem;min-width:30px;padding:0 5px!important;margin:0 0 5px 5px;border:1px solid #9aa5ad;border-radius:1rem;font-size:1rem;font-weight:300;color:#9aa5ad}.box__edit .field__radio .controls .btn.active{color:#fff!important;background:#0679c8;border-color:#0679c8}.box__edit .horizontal-fieldset{display:-webkit-box}.box__edit .horizontal-fieldset>span{display:block;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-flex:1;-webkit-flex:1;flex:1}.box__edit .horizontal-fieldset .control-group{padding:0;margin:0}.box__edit .horizontal-fieldset .control-group .controls{border-bottom:none}.box__edit .horizontal-fieldset label{display:none}.box__edit .horizontal-fieldset select+.icondefault{float:left}.box__edit .horizontal-fieldset .checkbox_custom{min-width:25px}.box__edit .horizontal-fieldset .checkbox_custom+.checkbox-icon{width:18px}.box__edit .edit__footer{padding:18px 10px 30px;text-align:center}#nomad .box__edit.box__edit_readonly .control-group.readonly .textarea-div{color:#111}.input-wrapper{display:-webkit-box;display:-webkit-flex;display:flex}.input-wrapper input{display:block;width:100%;padding-right:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-flex:1;-webkit-flex:1;flex:1;line-height:1}.input-wrapper input:focus{outline:0;outline-offset:0}.input-wrapper .clear-button{position:relative;display:none;height:50px;line-height:50px;align-self:flex-end;padding:10px 10px 8px 30px;margin:-25px -10px -25px 0;font-size:1rem;cursor:pointer;color:#c2c2c2;z-index:99}.input-wrapper.not-empty input:focus+.clear-button{display:-webkit-box;display:-webkit-flex;display:flex}.delete{display:block;max-width:400px;margin:0 auto;line-height:1.575em;background-color:#e61718;color:#fff;font-size:1.214rem}.modal-footer{padding:20px 0 10px;border-top:1px solid #e8e8e8;text-align:center}.email_type_opt-out{opacity:.6}.currency_edit .wrapper{padding-left:70px}.currency_edit .wrapper .selector{position:relative;float:left;width:65px;margin-left:-70px}.currency_edit .wrapper .selector .selectArrow{font-size:1rem;float:left!important;margin-top:4px}.currency_edit .wrapper .selector select{width:100%;position:absolute;top:0;left:0;padding:0 0 0 15px;line-height:1}.btn .icondefault{margin-top:3px}.actionsheet-select+.icondefault,select+.icondefault{display:inline-block;width:16px;margin:0 0 0 -18px;font-size:1rem;text-align:right}.icon-size-md{font-size:20px}.box__record-action{display:-webkit-box;display:-webkit-flex;display:flex;text-align:center;background:#f7f8f9;border-bottom:solid 1px #ebedef;height:52px}.box__record-action .context-menu__item{display:block;-webkit-box-flex:1;-webkit-flex:1;flex:1;position:relative;height:52px;text-align:center;color:#011523}.box__record-action .context-menu__item:active{opacity:.7}.box__record-action .context-menu__item .icondefault{margin-top:13px;line-height:18px;font-size:20px}.box__record-action .context-menu__item.disabled{opacity:.3}.box__record-action .context-menu__item .action-label{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;position:absolute;left:0;right:0;font-size:11px;color:#6b7479}.box__record-action .context-menu__item .action-label:first-letter{text-transform:uppercase}.box__record-action .context-menu__item .icon-spinner{display:inline-block;width:18px;height:18px}.ios .alert{-webkit-transform:translateZ(0)}.alert{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-flex-align:center;-webkit-align-items:center;align-items:center;min-height:42px;overflow:hidden;padding:0 10px;margin:0;z-index:2002;opacity:.94;font-size:1.071rem;background:#f5f5f5;color:#5b5b5b}.alert.closeable{padding-right:25px}.alert .icondefault{position:absolute;top:14px;right:10px;font-size:14px;line-height:1;opacity:.8}.alert .icon-spinner{display:inline-block;position:absolute;top:14px;left:10px;right:auto;width:14px;height:14px}.alert .icon-spinner .icon-spinner-path{fill:#c2c2c2}.alert .icon-spinner+.message{padding-left:22px}.alert .message{padding:4px 0;line-height:15px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;font-weight:lighter}#alerts{position:absolute;bottom:0;left:0;height:auto;width:100%;overflow:hidden;z-index:9999}.syncApp #alerts{z-index:999999}#alerts .alert{position:relative}.b-vc-w,.data-unavailable-label{position:absolute;right:0;text-align:center}.has-pagination #alerts{bottom:50px}.legal:not(a){color:#696969}.tablet #alerts{left:50%;width:400px;margin-left:-200px}.tablet #alerts .alert{margin-bottom:2px;border-top:0}.data-unavailable-label{display:none;top:50%;left:0;margin-top:-20px}.alert-warning{background:#fbc02d;color:#262626}.alert-warning .close-icon{color:#262626}.alert-info{background:#095e94;color:#fff}.alert-info .close-icon,.alert-success .close-icon{color:#262626}.alert-success{background:#54cb14;color:#262626}.alert-error{background:#e61718;color:#fff}.alert-error .close-icon,.alert-load .close-icon{color:#262626}.alert-load{background:#f5f5f5}.alert[id^=demo-]{display:none}.alert:target{display:inline-block!important}.layout__Error{background:#000}.portrait .tablet #content .menuBtn,.portrait .tablet .layout__list .menuBtn{display:block}.landscape .tablet #content-child .menuBtn,.landscape .tablet #content-child .offline-status,.portrait .tablet #content-child .menuBtn,.portrait .tablet #content-child .offline-status{display:none}.portrait .tablet #content-child{left:340px}.portrait .tablet #content-child .backBtn{left:0}.landscape .tablet #content-child{left:340px}.b-vc,.b-vc-w:before{display:inline-block;vertical-align:middle}.page__settings .modal-footer{border-top:none}.b-vc-w{top:0;bottom:0;left:0}.b-vc-w:before{content:'';height:100%;margin-right:-.25em}.b-vc{width:90%}.error-message{color:red;font-size:18px}.sugar-back-link{color:#000;font-weight:700;padding:30px;text-align:center}.android .background{opacity:0}.android .controls-flex .input-wrapper{overflow:hidden}.bodyScroll,.bodyScroll body{overflow:visible}.bodyScroll body{background:#fff}.bodyScroll.loginView body{min-height:100%;height:auto;background:#fff}.bodyScroll.loginView body .view__login{position:static;background:0 0}.bodyScroll.loginView body #content,.bodyScroll.loginView body #wrapper{-webkit-transform:none!important}.bodyScroll #menu-left{overflow:hidden;position:absolute}.bodyScroll .menu__inner{background:0 0}.bodyScroll #menu-left:not(.hide)+#content{padding-top:50px}.bodyScroll .header-actions{top:50px}.bodyScroll #content,.bodyScroll #content .layout__def,.bodyScroll #content-child,.bodyScroll #content-child .layout__def,.bodyScroll #nomad,.bodyScroll #wrapper,.bodyScroll .box__header,.bodyScroll .box__menu,.bodyScroll .easy-scroller-holder,.bodyScroll .easy-scroller-parent,.bodyScroll .header__inner,.bodyScroll .scroll{position:static}.bodyScroll .header__inner{height:50px}.bodyScroll .scroll{overflow:visible}.bodyScroll #alerts{position:fixed}.bodyScroll .rotate #alerts{position:absolute}.bodyScroll #nomad{-webkit-animation:triggerRepaint .4s 1;animation:triggerRepaint .4s 1}.bodyScroll .dw-modal{position:absolute;top:0;right:0;bottom:0;left:0}.bodyScroll .actionsheet-overlay{position:fixed}.bodyScroll .mobile #wrapper{box-shadow:none}.bodyScroll #smartbanner{position:relative!important}.ellipsis .label-module-sm{margin-right:7px}@media screen and (max-width:767px){.portrait .tablet.show-content-child #content{width:44%}.portrait .tablet #content-child{left:44%}}.portrait .tablet.narrow-tablet-mode #moduleList{width:100%}.portrait .tablet.narrow-tablet-mode #content{right:0}.portrait .tablet.narrow-tablet-mode #content-child .menuBtn,.portrait .tablet.narrow-tablet-mode #content-child .offline-status{display:block}.portrait .tablet.narrow-tablet-mode #content-child .status-success,.portrait .tablet.narrow-tablet-mode.show-content-child #content{display:none}.portrait .tablet.narrow-tablet-mode.show-content-child #content-child{left:0;display:block}.btn .icondefault,.nav-tabs .icondefault{line-height:.9em;vertical-align:baseline}.icon-pipeline{width:1em;height:1em;background:url("+n(280)+") 50% 50% no-repeat;background-size:contain}.rotate{opacity:.99}.rotate #moduleList{overflow:hidden}.desktop .taggable{width:100%!important}.layout-detail .tag-item{display:inline-block;padding:2px 13px 1px;margin:5px 4px 5px 0;background-color:#fff;border-radius:11px;font-size:.86rem;color:#222}.view__login .control-ssl .icondefault,.view__login .login__links .login-links__link{color:#0679c8}.setupbuddy__wrapper{background-color:#fff}.setupbuddy__wrapper .sb__text__container{position:absolute;top:10%;left:50%;width:316px}.setupbuddy__wrapper .sb__text__container .sb__text{position:relative;width:100%;left:-50%;padding:10px;margin-left:-12px;text-align:center}.setupbuddy__wrapper .sb__text__container .sb__header{font-size:1.143rem;font-weight:700;margin:10px 0 20px}.setupbuddy__wrapper .sb__text__container .sb__icon{position:relative;text-align:center;left:50%;margin-bottom:40px}.setupbuddy__wrapper .sb__text__container .icon-touch-id{position:relative;width:70px;height:70px;left:-35px;background:url("+n(281)+") no-repeat;background-size:contain}.setupbuddy__wrapper .sb__text__container .sb__description{margin-top:10px}.setupbuddy__wrapper .sb__text__container .sb__controls{padding:40px 10px 0;position:relative}.setupbuddy__wrapper .sb__text__container .sb__controls .sb__control{padding:9px 10px;color:#0679c8}.setupbuddy__wrapper .sb__text__container .sb__controls .left{float:left}.pull-right,.rtl .backBtn,.rtl .dashHomeBtn,.rtl .menuBtn,.rtl .offline-status,.setupbuddy__wrapper .sb__text__container .sb__controls .right{float:right}.setupbuddy__wrapper .sb__footer{position:absolute;bottom:30px;left:0;width:100%;text-align:center;font-size:.857rem;padding:5px 10px}.el__spinner{width:38px}.el__spinner .spinner__circle{width:8px;height:8px;background-color:#ccc;border-radius:100%;display:inline-block;animation:spinner_bounce 1.4s infinite ease-in-out;animation-fill-mode:both}.el__spinner .spinner__circle_1{animation-delay:-.32s}.el__spinner .spinner__circle_2{animation-delay:-.16s}.pull-left{float:left}.hide{display:none}.show{display:block}.tcenter{text-align:center!important}.tleft{text-align:left!important}.tright{text-align:right!important}.brake-lines{white-space:pre-line!important}.rotate1{-webkit-animation:rotation1 .15s 1 linear;-webkit-transform:rotate(180deg)}@-webkit-keyframes rotation1{from{-webkit-transform:rotate(0)}to{-webkit-transform:rotate(180deg)}}.rotate2{-webkit-animation:rotation2 .15s 1 linear;-webkit-transform:rotate(0)}@-webkit-keyframes rotation2{from{-webkit-transform:rotate(180deg)}to{-webkit-transform:rotate(0)}}.rotate360{-webkit-animation:spin .7s infinite linear}@-webkit-keyframes spin{from{-webkit-transform:rotate(0)}to{-webkit-transform:rotate(359deg)}}.pull-to-refresh{z-index:-1;position:absolute;top:0;left:0;width:100%;background:#f5f5f5;height:50%;min-height:50%;padding-top:10px;text-align:center}.pull-to-refresh .icon-wrap{display:inline-block;width:1em;height:1em;padding:.1em;border-radius:1.1em;font-size:27px;line-height:1em;background-color:#e0e0e0;background-image:-webkit-gradient(linear,0 0,0 100%,from(#d3d3d3),to(#f4f4f4));background-image:-webkit-linear-gradient(top,#d3d3d3,#f4f4f4);background-image:linear-gradient(top,#d3d3d3,#f4f4f4);background-repeat:repeat-x;border-color:#f4f4f4 #f4f4f4 #cecece;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);box-shadow:inset 0 2px 2px 0 #c4c4c4;text-align:center;opacity:.4;-webkit-transition:opacity .6s}.rtl .box__header .cancelBtn .btn,.rtl .box__menu .cancelBtn .btn,.rtl .checkbox-icon,.rtl .table td,.rtl .table th{text-align:right}.pull-to-refresh .icon-wrap.color,.view__login .control-ssl{opacity:1}.pull-to-refresh .spinner{display:block;font-size:21px;line-height:inherit}#pull-to-refresh-div{position:relative!important;height:0;display:block!important}.rtl{direction:rtl}.rtl .box__header .save-container,.rtl .box__header .save-container .caretBtn,.rtl .box__header .save-container .saveBtn,.rtl .box__menu .save-container,.rtl .box__menu .save-container .caretBtn,.rtl .box__menu .save-container .saveBtn,.rtl .createBtn{float:left}.rtl .backBtn{-webkit-transform:scale(-1);transform:scale(-1)}.rtl .label-module-sm.has-icon-inside .label-module-sm_title{right:4px}.rtl .box__header .btn-area-more,.rtl .box__menu .btn-area-more{float:right}.rtl .box__header .cancelBtn,.rtl .box__menu .cancelBtn{padding-right:0}.rtl .box__header .saveBtn,.rtl .box__menu .saveBtn{padding-left:0}.rtl .box__header .right-menu .icondefault,.rtl .box__menu .right-menu .icondefault{margin:0 -2px 0 8px}.rtl .box__header .menu__item .menu-item__link,.rtl .box__menu .menu__item .menu-item__link{padding:13px 15px 13px 12%}.rtl .box__header .menu__item .label-module-sm,.rtl .box__header .menu__item .menu-item__icon,.rtl .box__header .menu__item .user-icon,.rtl .box__menu .menu__item .label-module-sm,.rtl .box__menu .menu__item .menu-item__icon,.rtl .box__menu .menu__item .user-icon{margin:-6px 0 -6px 7px}.rtl .box__header .header__inner .backBtn+.header__title,.rtl .box__header .header__inner .dashHomeBtn+.header__title,.rtl .box__menu .header__inner .backBtn+.header__title,.rtl .box__menu .header__inner .dashHomeBtn+.header__title{right:90px}.rtl #menu-left .menu__inner .menu__item .menu-item__link .user-icon{margin-left:5px;margin-right:0}.rtl .view__search-box .topelbar{padding:5px 5px 5px 121px}.rtl .view__search-box .search-query{padding:4px 32px 4px 35px}.rtl .view__search-box .view__search-box__actions{left:10px;right:auto}.rtl .view__search-box .clear-button{right:auto;left:0;padding-right:12px;padding-left:6px}.rtl .view__search-box .box__search-icon{right:10px;left:auto}.rtl .view__search-box .icon-spinner{right:9px;left:auto}.rtl .view__search-box .favoriteable{padding-left:134px}.rtl .view__search-box .favoriteable .search-query{padding-left:95px}.rtl .view__search-box .favoriteable .clear-button{left:70px;right:auto}.rtl .view__search-box .hidden-my-items{padding-left:74px}.rtl .view__search-box .view__search .searchCancelBtn{margin-right:0;margin-left:-10px}.rtl .taggable-dropdown .label-module-sm{margin:0 0 0 10px}.rtl .dropdown.dropdown__filter{left:auto;right:7px}.rtl .dropdown.dropdown__sortBy{left:7px;right:auto}.rtl .box__filter .filter__item{padding-left:0;padding-right:4px}.rtl .box__filter .filter__item:first-child{padding-right:0}.rtl .filters-wrap{padding-right:10px;padding-left:5px}.rtl .filter{padding-right:0;padding-left:20px}.rtl .filter .actionsheet-select,.rtl .filter select{padding-right:0;padding-left:16px}.rtl .listing .show-more-btn{padding:0 14px}.rtl .listing .show-more-btn .loading-holder .icon-spinner{margin-left:5px;margin-right:0}.rtl .listing article{padding:8px 12px 8px 8px}.rtl .listing article.has-grip,.rtl .listing article.item-checkbox{padding-left:32px}.rtl .menu-container-grip{left:0;right:auto;padding:0 15px 0 0}.rtl .menu-container .grip{right:0;left:auto;padding:0 10px 0 2px}.rtl .menu-container a{padding-right:5%;padding-left:0}.rtl .listing .list-item .module-name,.rtl .listing .list-item .module-name-comma,.rtl .listing .list-view-item .module-name,.rtl .listing .list-view-item .module-name-comma,.rtl .listing .parent-item .module-name,.rtl .listing .parent-item .module-name-comma{float:right}.rtl .listing article.item-checkbox .asscacct,.rtl .listing article.item-checkbox .checkbox-icon{left:0;right:auto}.rtl .picker-list-row .label-module-sm{margin:-2px 0 0 9px}.rtl .bizcard .avatar{left:auto;right:10px}.rtl .bizcard .input_upload{left:auto;right:0}.rtl .bizcard .label-module-sm{left:auto;right:10px;padding:13px 10px 0 0}.rtl .bizcard .card{padding:10px 42px 0 10px}.rtl .bizcard.icon-inside .card{padding:10px 90px 0 44px}.rtl .bizcard .more .goedit-icon{left:0;right:auto}.rtl .bizcard .more .show-more{left:auto;right:80px}.rtl .bizcard .more .follow-label{left:0;right:auto}.rtl .bizcard .favorite-icon{left:3px;right:auto}.rtl .bizcard .followable .favorite-icon{left:82px}.rtl .box__related-actions .related-action__item{padding-left:0;padding-right:10px}.rtl .box__related-actions .related-action__item .related-action-item__link{padding-left:44px;padding-right:0}.rtl .box__edit .control-group.field__datetime .time input,.rtl .btn-group .btn:last-child{padding-left:0;padding-right:10px}.rtl .box__related-actions .related-action__item .label-module-sm{margin-right:0;margin-left:9px}.rtl .box__related-actions .related-action__item .records-count{display:inline-block}.rtl .box__related-actions .related-action__item .related-action-item__add{left:0;right:auto}.rtl .box__related-actions .related-action__item .more{-webkit-transform:scale(-1);transform:scale(-1);left:10px;right:auto}.rtl .btn-group .btn{float:right;border-radius:0}.rtl .box__edit .control-group .controls .checkbox_custom+.checkbox-icon{margin:4px -65% 0 0}.rtl .box__edit .control-group.field__datetime .date{float:right;margin-right:0;margin-left:10px;border-right:none}.rtl .box__edit .control-group.field__datetime .date input{padding-left:0}.rtl .box__edit .control-group.field__datetime .time{float:right;border-right:solid 1px #f2f2f2;border-left:none}.rtl .box__edit .control-group.field__datetime .controls.has-btn-group{padding-left:1.5rem;padding-right:0}.rtl .box__edit .control-group.field__datetime .btn-group{right:auto;left:0}.rtl .box__edit .control-group.file .picture-wrap{float:right}.rtl .box__edit .control-group.file .picture-wrap .picture-icon+.placeholder{margin-left:0;margin-right:35px}.rtl .box__edit .uneditable-input,.rtl .box__edit input:not([type=checkbox]),.rtl .box__edit select,.rtl .box__edit textarea{float:right;padding-right:0;padding-left:15%;text-align:right}.rtl .box__edit .horizontal-fieldset .control-group .controls{float:none;margin:0}.rtl .field__radio .controls .btn{left:0}.rtl .currency_edit .wrapper{padding-left:0;padding-right:70px}.rtl .currency_edit .wrapper .selector{float:right;margin-left:0;margin-right:-70px}.rtl .currency_edit .wrapper .selector select{padding:0 15px 0 0}.rtl .dashboard,.rtl .pagination__bar{direction:ltr}.rtl .dashlet__b,.rtl .dashlets__list{direction:rtl}.rtl #tutorial,.rtl .chart{direction:ltr}.rtl .panel__addpost .placeholder{margin-left:10px;margin-right:0}.rtl .panel__addpost .btn{float:left}.rtl .as__detail{padding:8px 46px 8px 32px}.rtl .as__detail .as__icon .icondefault{margin-right:0}.rtl .as__detail .as__icon,.rtl .as__detail .label-module-sm{float:right;margin:4px -36px 0 0}.rtl .comments-container{margin-left:0;margin-right:46px}.rtl .comment__item{padding:6px 38px 6px 10px}.rtl .comment__item .user-icon{float:right;margin:4px -38px 0 0}.rtl .tb__detail .tb__icon{float:right;padding:2px 0 0 5px}.rtl .learning-resources .resource-list .resource .resource-info{margin-right:44px;margin-left:0}.rtl .alert.closeable{padding:4px 10px 4px 25px}.rtl .alert .icondefault{right:auto;left:10px}.rtl .alert .icon-spinner{right:10px;left:auto}.rtl .alert .icon-spinner+.message{padding:0 20px 0 0}.rtl .menu-container{left:auto;right:100%}.rtl .menu-container.on{right:0}.rtl .ios .menu-container{right:auto;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);-webkit-transition-duration:.15s;transition-duration:.15s}.rtl .ios .menu-container.on{left:0;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.rtl .view__login .input-wrapper .clear-button{margin-left:0}.rtl .view__login .icon-spinner{margin-right:0;margin-left:2px}.rtl .page__offline .offline-row .icon{float:right;margin-left:5px;margin-right:0}.rtl .page__offline .offline-list__item .more{left:10px;right:auto;-webkit-transform:scale(-1);transform:scale(-1)}.rtl .mobile .right-menu{left:0;right:14%}.rtl .tablet .right-menu{left:0;right:auto}.rtl .tablet #menu-left{left:auto;right:0}.rtl .tablet #wrapper{right:56px;left:0;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.rtl .tablet #content .overlay__right-menu,.rtl .tablet .layout__Login,.rtl .tablet .layout__def.no-main-menu{left:0;right:-56px}.rtl.portrait .tablet.narrow-tablet-mode.show-content-child #content-child{right:0}.rtl.portrait .tablet #moduleList{-webkit-transform:translate(100%,0,0);transform:translate(100%,0,0)}.rtl.portrait .tablet #content-child{left:0;right:340px}.rtl.portrait .tablet #content-child .backBtn{left:0;right:0}.rtl.landscape .tablet #content-child{left:0;right:340px}.rtl select+.icondefault{margin:4px -18px 0 0}.rtl .pull-right{float:left}.rtl .pull-left{float:right}.rtl .input-wrapper .clear-button{padding-right:30px;padding-left:10px;margin-right:0;margin-left:-10px}.rtl .page__offline .td-count{text-align:left}.rtl .page__offline .td-count .icons,.rtl .page__offline .td-count .lbl-count{float:left}.rtl .page__offline .td-count .icons{margin-right:3px}@media screen and (max-width:767px){.rtl.portrait .tablet #content-child{right:44%;left:0}}.brand{width:224px;height:60px}.view__login .login__links .separator{opacity:1;background:#91969f}",""]);

},function(e,t,n){e.exports=n.p+"../font/OpenSans-Semibold.ttf"},function(e,t,n){e.exports=n.p+"../font/OpenSans-Regular.ttf"},function(e,t,n){e.exports=n.p+"../font/fontawesome-webfont.ttf"},function(e,t,n){e.exports=n.p+"../img/logo-login.svg"},function(e,t,n){e.exports=n.p+"../img/icon-pipeline.svg"},function(e,t,n){e.exports=n.p+"../img/icon-touchid.svg"},function(e,t){e.exports={appId:"nomad",env:"prod",clientID:"sugar",restVersion:"10",platform:"mobile",debugSugarApi:false,logger:{level:"WARN",consoleWriter:"ConsoleWriter",formatter:"SimpleFormatter"},authStore:"cache",minServerVersion:"6.7.1",supportedServerFlavors:["PRO","CORP","ENT","ULT"],siteUrl:"..",defaultServerUrl:"",serverTimeout:30,maxQueryResult:20,cacheMeta:true,metadataTypes:["server_info","labels","ordered_labels","modules","relationships","currencies","_override_values","config","modules_info","views","editable_dropdown_filters"],additionalComponents:{"main-menu":{target:"#menu-left"}},syncConfig:false,sugarLogic:{enabled:true,minServerVersion:"7.2",isDynamic:false},appName:"nomad",keychainService:"SugarCRM",productName:"SugarCRM",brandName:"SugarCRM",appVersion:"4.1.1",appBuild:"50",sdkVersion:"4.1.1.385 beta1",buildTag:"",trialUntil:"",deviceMode:{type:"auto",landscape:false,portrait:false},keyValueStore:"sqlKeyValueStore",keyValueStoreEncryptionEnabled:true,nativeRedirectEnabled:true,useHttps:true,maxHttpCacheAge:10,fetchLimit:{activities:10,bulkQueryRelatedRecords:10,maxPageSize:60,recents:20,filters:100},about:{privacy:"http://sugarcrm.com/mobile_privacy",tos:"http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/",trademark:"http://www.sugarcrm.com/about/trademark-information",displayTrademarks:false,support:"http://support.sugarcrm.com",supportEmail:"support@sugarcrm.com",showSdkVersion:false,thirdPartySoftware:"http://www.sugarcrm.com/third-party-software",showAttribution:false,supportEmailVisible:"concealed",copyrightText:"Copyright  2004-2017 SugarCRM Inc. All Rights Reserved.",trademarkText:"Sugar and SugarCRM are trademarks owned by SugarCRM Inc. All other trademarks are the property of their respective owners.",trademark2Text:"SugarCRM , Sugar Enterprise and Sugar are trademarks of SugarCRM Inc."},analytics:{enabled:true,id:{web:"UA-33012372-6","native":"UA-33012372-5"},appName:"SugarCRM",optOut:false,debug:false,dryRun:false,dispatchInterval:120,sampleRate:100,anonymize:false,useHttps:true,instanceTracking:true,serverUrlWhiteList:["sugarinternal.sugarondemand.com",".*\\.sugarondemand.com"],instanceUrlTracking:false,dbAnalyticsInterval:24},transMap:null,skipStringCleanup:false,skipSetupBuddy:false,ui:{defaultFontSize:"normal",fontSizes:{tiny:10,small:12,normal:14,large:16,larger:18,huge:20,extra_huge:22},displayInitials:true,icons:{modules:{},menu:{user:"icon icon-user",search:"icon icon-search",activities:"icon icon-clock-o",about:"icon icon-info-circle",settings:"icon icon-cog",desktop:"icon icon-desktop",errorEmulation:"icon icon-support",logout:"icon icon-sign-out",duplicate:"icon icon-copy",createRelated:"icon icon-plus-circle",linkRelated:"icon icon-link",share:"icon icon-share-square-o",create:"icon icon-plus"},header:{menu:"icon icon-bars",dashboard:"icon icon-th",back:"icon icon-chevron-left",forward:"icon icon-chevron-right",search:"icon icon-search",overflow:"icon icon-ellipsis-v",saveBtnArrow:"icon icon-caret-down",clear:"icon icon-times-circle"},actions:{view:"icon icon-eye",edit:"icon icon-pencil",favorite:"icon icon-star",unfavorite:"icon icon-star-o",follow:"icon icon-check-circle",unfollow:"icon icon-check-circle-o",email:"icon icon-envelope",emailbody:"icon icon-font",unlink:"icon icon-minus-circle","delete":"icon icon-trash-o",close:"icon icon-times",call:"icon icon-phone",sms:"icon icon-comment",map:"icon icon-map-marker",url:"icon icon-external-link",file:"icon icon-file",comment:"icon icon-comment",reply:"icon icon-reply",retweet:"icon icon-retweet"},sorting:{asc:"icon icon-caret-up",desc:"icon icon-caret-down",checked:"icon icon-check",myItemsOnly:"icon icon-user",teamItems:"icon icon-users"},alert:{close:"icon icon-remove"},ptr:{spinner:"icon icon-refresh"},list:{grip:"icon icon-ellipsis-v"},detail:{goEdit:"icon icon-pencil",createRelated:"icon icon-plus",showMore:"icon icon-chevron-down",hideMore:"icon icon-chevron-up"},edit:{clear:"icon icon-times-circle",checkboxOff:"icon icon-square-o",checkboxOn:"icon icon-check-square",selectArrow:"icon icon-caret-down",error:"icon icon-exclamation-circle",remove:"icon icon-times-circle",star:"icon icon-star",lock:"icon icon-lock",unlock:"icon icon-unlock-alt",picture:"icon icon-picture-o",email:{actionsBtn:"icon icon-ellipsis-v",addBtn:"icon icon-plus"},multiselect:{remove:"icon icon-remove"}},swiper:{prev:"icon icon-arrow-left",next:"icon icon-arrow-right",bullet:"icon icon-circle-thin",bulletActive:"icon-circle"},dashlets:{"default":"icon icon-th-large",dashablelist:"icon icon-table","tabbed-dashlet":{"active-tasks":"icon icon-check-square-o","planned-activities":"icon icon-calendar-o","inactive-tasks":"icon icon-check",history:"icon icon-history"},"forecast-pareto":"icon icon-bar-chart",bubblechart:"icon icon-trophy","forecast-pipeline":"icon icon-pipeline","activitystream-dashlet":"icon icon-clock-o","saved-reports-chart":"icon icon-area-chart",forecastdetails:"icon icon-th-list",twitter:"icon icon-twitter",webpage:"icon icon-list-alt","opportunity-metrics":"icon icon-circle-o",casessummary:"icon icon-folder-open"}},fastClickEnabled:true,maxAlertsPerLayout:2,refreshOnResumeTimeout:3e4,searchDelay:600,configurableFontSize:true,numberOfAdditionalListFields:1,displayListFieldLabel:false,forceListReload:false,defaultViewScheme:"Search",showLogLevelSetting:false,skipTutorial:false,constantlyVisibleViews:["offlineSettings","offlineStats","offlineDataGeneration","TxLog","Activities","Teams","Users"],maxPreloaderPanelMessages:4},files:{resizeImagesOnUpload:600,imageResizeTimeout:8e3,iosCanvasSizeLimit:5,jpegEncoderQuality:80,fileSizeLimit:10},modules:{knownModules:["Settings","About","TxLog","Error","Forecasts","Users","Accounts","Contacts","Documents","Leads","Opportunities","RevenueLineItems","Meetings","Calls","Tasks","Notes","Reports","Cases","Quotes","Employees","Bugs","Campaigns","Contracts","KBDocuments","Products","Project","Prospects","Targets","Emails"],unsupportedModules:["Bugs","Campaigns","Contracts","KBDocuments","Products","Project","Prospects","Targets","Emails"],modulesWithFiles:["Documents"],modulesWithPDFs:["Reports"],modulesWithAvatars:["Contacts","Leads","Employees","Users"],nonDuplicatableModules:["Users","Documents","Employees","KBDocuments","Reports","Quotes","Emails"],nonCreatableModules:["TxLog","Users","Documents","Employees","KBDocuments","Reports","Quotes","Emails"],nonEditableModules:["KBDocuments","Quotes","Employees","Reports","Emails"],nonDeletableModules:["Users","Employees"],nonDeletableSalesStages:["Closed Won","Closed Lost"],nonLinkableModules:[],followableModules:["Accounts","Contacts","Leads","Opportunities","Cases","RevenueLineItems","Tasks","Notes","Products"],readonlyModules:["Teams","ProductTypes","ProductCategories","ProductTemplates","Manufacturers"],nonAclModules:["Error","Login","About"],hiddenModules:["Forecasts","Filters","Comments"]},login:{externalLoginEnabled:true,loginSettingsLimit:5,hideLoginUrl:false,logoutTimeout:3e3},deepLinking:{scheme:"sugarcrm",configUrlWhiteList:[]},localSecurity:{enabled:false,minServerVersion:"7.2",maxAllowedPasswordAttempt:3,touchIdForLoginEnabled:true,passkeyEnabled:false,touchIdForPasskeyEnabled:false},teamBasedAcl:{enabled:true,minServerVersion:"7.8.0.0RC1",unsupportedModules:[]},offline:{enabled:true,storageProvider:"sql",storageAdapter:"native",storageSize:5,dbEncryptionEnabled:true,debug:{ignoreEnabled:false,render:false,forceMigrate:false,online:true,syncManagerEnabled:true,monitorStatus:true,outOfSpace:false,performanceTracing:{enabled:false,defaultReporter:"console",zipkinServerUrl:"",zipkinPayload:null}},minServerVersion:"7.1.5RC1",httpThrottlingEnabled:false,httpThrottleTimeout:1e4,httpThrottleCacheSize:10,exclude:["About","Settings","Search","Login","Offline","Error","ErrorEmulation","Recents","Forecasts","BubbleChart","Dashboards","Activities","Filters","Comments","Home","SetupBuddy","TxLog"],customOfflineModules:["TxLog","Recents"],staticModules:["Users","Teams","ProductCategories","ProductTypes","ProductTemplates","Manufacturers"],bulkLoad:{enabled:true,pageSize:150,requestDelay:500,initial:{amount:{"default":20,modules:{ProductTypes:20}},modules:["Users","Teams","ProductCategories","ProductTypes","ProductTemplates","Manufacturers"]},complete:{amount:{"default":900,modules:{Accounts:2700,Contacts:2700,ProductTemplates:900}}}},syncManager:{enabled:true,syncTimeout:10,executors:{wins:{enabled:true,interval:180,priority:1,preSyncMaxRecords:100,syncPageSize:20,preSyncPageSize:20},txLog:{enabled:true,interval:20,priority:0}}},maxMixedCollectionQueryResult:30,monitorTimeout:5e3,cleanUp:{defaultPurgeInterval:90,recordsToKeepPercentage:90},dbLimits:{"default":1e3,modules:{Accounts:3e3,Contacts:3e3}}},dashboards:{enabled:true,minServerVersion:"7.2",recordDashboardsEnabled:true,dashlets:{dashablelist:{minServerVersion:"7.2"},"tabbed-dashlet":{minServerVersion:"7.2"},"forecast-pareto":{minServerVersion:"7.6.0.0RC3"},bubblechart:{minServerVersion:"7.2"},"forecast-pipeline":{minServerVersion:"7.6.0.0RC3"},"sales-pipeline":{minServerVersion:"7.8.0.0RC2",icon:"icon-trophy"},"activitystream-dashlet":{minServerVersion:"7.2"},"saved-reports-chart":{minServerVersion:"7.2"},forecastdetails:{minServerVersion:"7.6.0.0RC3"},twitter:{minServerVersion:"7.5.0.0"},webpage:{minServerVersion:"7.5.0.0"},"opportunity-metrics":{minServerVersion:"7.6.0.0RC3"},casessummary:{minServerVersion:"7.5.0.0"}}},raven:{enabled:true,env:"store",url:"https://0c866dad58bb4a29b88e405491cfc6a6@app.getsentry.com/22007",enhancedErrorReporting:true,maxLogSize:30},errorEmulation:{enabled:false,user:"Max"},scheme:"store"}},function(e,t){"use strict";var n=SUGAR.App.config;n.analytics.enabled=false;if(!n.siteUrl){n.siteUrl="../../../sugarcrm"}if(n.scheme!=="e2e"){n.offline.enabled=false}n.keyValueStoreEncryptionEnabled=false;n.offline.dbEncryptionEnabled=false},function(e,t){var n=SUGAR.App;SUGAR.expressions.FormatedNameExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.FormatedNameExpression,SUGAR.expressions.StringExpression,{className:"FormatedNameExpression",evaluate:function(){var e=this.getParameters();var t={s:e[0].evaluate(),f:e[1].evaluate(),l:e[2].evaluate(),t:e[3].evaluate()};var n="";for(i=0;i<name_format.length;i++){if(t[name_format.substr(i,1)]!=undefined){n+=t[name_format.substr(i,1)]}else{n+=name_format.substr(i,1)}}return n},getParamCount:function(){return 4}});SUGAR.expressions.SugarTranslateExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SugarTranslateExpression,SUGAR.expressions.StringExpression,{className:"SugarTranslateExpression",evaluate:function(){var e=this.getParameters();var t=e[1].evaluate();if(t=="")t="app_strings";var n=e[0].evaluate();return SUGAR.language.get(t,n)},getParamCount:function(){return 2}});SUGAR.expressions.DefineStringExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.DefineStringExpression,SUGAR.expressions.StringExpression,{className:"DefineStringExpression",evaluate:function(){var e=this.getParameters().evaluate(),t;if(e instanceof Date){var i=e.type=="date";t=n.date(e).formatUser(i)}else{t=e+""}return t},getParamCount:function(){return 1},getParameterTypes:function(){return["generic"]}});SUGAR.expressions.SugarDropDownValueExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SugarDropDownValueExpression,SUGAR.expressions.StringExpression,{className:"SugarDropDownValueExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var n=e[1].evaluate();var i=this.context.getAppListStrings(t);if(i=="undefined")return"";for(var r in i){if(typeof r=="string"&&r==n)return i[r]}return""},getParamCount:function(){return 2}});SUGAR.expressions.ContainsExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.ContainsExpression,SUGAR.expressions.BooleanExpression,{className:"ContainsExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate()+"";var n=e[1].evaluate();return t.indexOf(n)>-1?SUGAR.expressions.Expression.TRUE:SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 2},getParameterTypes:function(){return"string"}});SUGAR.expressions.CharacterAtExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.CharacterAtExpression,SUGAR.expressions.StringExpression,{className:"CharacterAtExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate()+"";var n=e[1].evaluate();return t.charAt(n)},getParamCount:function(){return 2},getParameterTypes:function(){return["string","number"]}});SUGAR.expressions.StrToUpperExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.StrToUpperExpression,SUGAR.expressions.StringExpression,{className:"StrToUpperExpression",evaluate:function(){var e=this.getParameters().evaluate()+"";return e.toUpperCase()},getParamCount:function(){return 1}});SUGAR.expressions.StrToLowerExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.StrToLowerExpression,SUGAR.expressions.StringExpression,{className:"StrToLowerExpression",evaluate:function(){var e=this.getParameters().evaluate()+"";return e.toLowerCase()},getParamCount:function(){return 1}});SUGAR.expressions.ConcatenateExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.ConcatenateExpression,SUGAR.expressions.StringExpression,{className:"ConcatenateExpression",evaluate:function(){var e="";var t=this.getParameters();for(var n=0;n<t.length;n++){e+=t[n].evaluate()}return e}});SUGAR.expressions.SubStrExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SubStrExpression,SUGAR.expressions.StringExpression,{className:"SubStrExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate()+"";var n=e[1].evaluate();var i=e[2].evaluate();return t.substr(n,i)},getParamCount:function(){return 3},getParameterTypes:function(){return["string","number","number"]}});SUGAR.expressions.ForecastCommitStageExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.ForecastCommitStageExpression,SUGAR.expressions.EnumExpression,{className:"ForecastCommitStageExpression",evaluate:function(){var e=this.getParameters().evaluate();if(n===undefined){return""}var t=n.metadata.getModule("Forecasts","config");if(t.forecast_setup===0){return""}var i=t[t.forecast_ranges+"_ranges"],r="";_.find(i,function(t,n){if(e>=t.min&&e<=t.max){r=n;return true}return false});return r},getParamCount:function(){return 1},getParameterTypes:function(){return["number"]}});SUGAR.expressions.DayOfWeekExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.DayOfWeekExpression,SUGAR.expressions.NumericExpression,{className:"DayOfWeekExpression",evaluate:function(){var e,t=this.getParameters().evaluate();if(_.isString(t)&&_.isEmpty(t)){return""}if(this.context.view){e=n.date(t).format("d").toString()}else{e=new Date(t).getDay()}return e},getParamCount:function(){return 1},getParameterTypes:function(){return["date"]}});SUGAR.expressions.MaxRelatedDateExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MaxRelatedDateExpression,SUGAR.expressions.DateExpression,{className:"MaxRelatedDateExpression",evaluate:function(){},getParameterTypes:function(){return["relate","string"]}});SUGAR.expressions.HoursUntilExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.HoursUntilExpression,SUGAR.expressions.NumericExpression,{className:"HoursUntilExpression",evaluate:function(){var e=this.getParameters().evaluate();var t=SUGAR.util.DateUtils.parse(e);if(!t&&t!==0)return false;var n=new Date;if(typeof e=="string"&&e.indexOf(" ")==-1&&e.indexOf("T")==-1){n.setHours(0,0,0,0)}var i=t-n;return~~(i/36e5)},getParamCount:function(){return 1},getParameterTypes:function(){return["date"]}});SUGAR.expressions.DefineDateExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.DefineDateExpression,SUGAR.expressions.DateExpression,{className:"DefineDateExpression",evaluate:function(){var e=this.getParameters().evaluate();var t=SUGAR.util.DateUtils.parse(e,"user");if(t==false)throw"Incorrect date format";return t},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.TodayExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.TodayExpression,SUGAR.expressions.DateExpression,{className:"TodayExpression",evaluate:function(){var e=new Date;e.setHours(0);e.setMinutes(0);e.setSeconds(0);if(this.context.view){e=n.date.format(e,"Y-m-d")}return e},getParamCount:function(){return 0}});SUGAR.expressions.AddDaysExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.AddDaysExpression,SUGAR.expressions.DateExpression,{className:"AddDaysExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();if(!t){return""}var i=parseInt(e[1].evaluate(),10);if(_.isNaN(i)){return""}var r=SUGAR.util.DateUtils.parse(t,"user");var a=new Date(r);a.setDate(a.getDate()+i);if(this.context.view){a=n.date.format(a,"Y-m-d")}return a},getParamCount:function(){return 2},getParameterTypes:function(){return["date","number"]}});SUGAR.expressions.DaysUntilExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.DaysUntilExpression,SUGAR.expressions.NumericExpression,{className:"DaysUntilExpression",evaluate:function(){var e=SUGAR.util.DateUtils.parse(this.getParameters().evaluate(),"user");var t=new Date;e.setHours(0);e.setMinutes(0);e.setSeconds(0);var n=e-t;var i=Math.ceil(n/864e5);return i},getParamCount:function(){return 1},getParameterTypes:function(){return["date"]}});SUGAR.expressions.NowExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.NowExpression,SUGAR.expressions.DateExpression,{className:"NowExpression",evaluate:function(){var e=SUGAR.util.DateUtils.getUserTime();e.setSeconds(0);if(this.context.view){e=n.date.format(e,"Y-m-d H:i:s")}return e},getParamCount:function(){return 0}});SUGAR.expressions.MonthOfYearExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MonthOfYearExpression,SUGAR.expressions.NumericExpression,{className:"MonthOfYearExpression",evaluate:function(){var e=this.getParameters().evaluate();return new Date(e).getMonth()+1},getParamCount:function(){return 1},getParameterTypes:function(){return["date"]}});SUGAR.expressions.TimestampExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.TimestampExpression,SUGAR.expressions.DateExpression,{className:"TimestampExpression",evaluate:function(){var e=this.getParameters().evaluate(),t,n=[],i=this.context.parseDate(e);return Math.round(+i.getTime()/1e3)},getParamCount:function(){return 1}});SUGAR.expressions.DefineTimeExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.DefineTimeExpression,SUGAR.expressions.TimeExpression,{className:"DefineTimeExpression",evaluate:function(){var e=this.getParameters().evaluate();var t=Date.parse(e);if(isNaN(t))throw"Incorrect time format";return t},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.HourOfDayExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.HourOfDayExpression,SUGAR.expressions.TimeExpression,{className:"HourOfDayExpression",evaluate:function(){var e=this.getParameters().evaluate();return new Date(e).getHours()},getParamCount:function(){return 1}});SUGAR.expressions.CurrencyRateExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.CurrencyRateExpression,SUGAR.expressions.GenericExpression,{className:"CurrencyRateExpression",evaluate:function(){if(n===undefined){return SUGAR.expressions.Expression.FALSE}var e=this.getParameters().evaluate();return n.metadata.getCurrency(e).conversion_rate},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.RelatedFieldExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.RelatedFieldExpression,SUGAR.expressions.GenericExpression,{className:"RelatedFieldExpression",evaluate:function(){var e=this.getParameters(),t=e[0].evaluate(),n=e[1].evaluate();if(typeof t=="string"&&t!=""){return this.context.getRelatedField(t,"related",n)}else if(typeof rel=="object"){}return""},getParamCount:function(){return 2},getParameterTypes:function(){return["relate","string"]}});SUGAR.expressions.IndexValueExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IndexValueExpression,SUGAR.expressions.GenericExpression,{className:"IndexValueExpression",evaluate:function(){var e=this.getParameters();var t=e[1].evaluate();var n=e[0].evaluate();if(typeof n=="string"&&!isNaN(n))n=Number(n);if(n>=t.length||n<0)throw"value_at: Attempt to access an index out of bounds";return t[n]},getParamCount:function(){return 2},getParameterTypes:function(){return["number","enum"]}});SUGAR.expressions.SugarFieldExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SugarFieldExpression,SUGAR.expressions.GenericExpression,{className:"SugarFieldExpression",evaluate:function(){var e=this.getParameters().evaluate();return SUGAR.forms.AssignmentHandler.getValue(e)},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.ConditionExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.ConditionExpression,SUGAR.expressions.GenericExpression,{className:"ConditionExpression",evaluate:function(){var e=SUGAR.expressions.Expression,t=this.getParameters(),n=t[0].evaluate();if(e.isTruthy(n)){return t[1].evaluate()}else{return t[2].evaluate()}},getParamCount:function(){return 3},getParameterTypes:function(){return["boolean","generic","generic"]}});SUGAR.expressions.AndExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.AndExpression,SUGAR.expressions.BooleanExpression,{className:"AndExpression",evaluate:function(){var e=this.getParameters();if(!(e instanceof Array))e=[e];for(var t=0;t<e.length;t++){if(e[t].evaluate()!=SUGAR.expressions.Expression.TRUE)return SUGAR.expressions.Expression.FALSE}return SUGAR.expressions.Expression.TRUE}});SUGAR.expressions.IsForecastClosedWonExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsForecastClosedWonExpression,SUGAR.expressions.BooleanExpression,{className:"IsForecastClosedWonExpression",evaluate:function(){var e=this.getParameters().evaluate();if(n===undefined){return SUGAR.expressions.Expression.FALSE}var t=n.metadata.getModule("Forecasts","config")||{},i=t.sales_stage_won||["Closed Won"];if(i.indexOf(e)===-1){return SUGAR.expressions.Expression.FALSE}return SUGAR.expressions.Expression.TRUE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.IsRequiredCollectionExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsRequiredCollectionExpression,SUGAR.expressions.BooleanExpression,{className:"IsRequiredCollectionExpression",evaluate:function(){var e=this.getParameters().evaluate();table=document.getElementById(e);children=YAHOO.util.Dom.getElementsByClassName("sqsEnabled","input",table);for(id in children){if(trim(children[id].value)!=""){return SUGAR.expressions.Expression.TRUE}}return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.IsInEnumExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsInEnumExpression,SUGAR.expressions.BooleanExpression,{className:"IsInEnumExpression",evaluate:function(){var e=this.getParameters();var t=e[1].evaluate();var n=e[0].evaluate();for(var i=0;i<t.length;i++){var r=t[i];if(r instanceof SUGAR.expressions.Expression)r=r.evaluate();if(r==n)return SUGAR.expressions.Expression.TRUE}return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 2},getParameterTypes:function(){return["generic","enum"]}});SUGAR.expressions.GreaterThanExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.GreaterThanExpression,SUGAR.expressions.BooleanExpression,{className:"GreaterThanExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var n=e[1].evaluate();if(t>n)return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 2},getParameterTypes:function(){return["number","number"]}});SUGAR.expressions.IsInRangeExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsInRangeExpression,SUGAR.expressions.BooleanExpression,{className:"IsInRangeExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var n=e[1].evaluate();var i=e[2].evaluate();if(t>=n&&t<=i)return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 3},getParameterTypes:function(){return["number","number","number"]}});SUGAR.expressions.IsValidTimeExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsValidTimeExpression,SUGAR.expressions.BooleanExpression,{className:"IsValidTimeExpression",evaluate:function(){var e=this.getParameters().evaluate();var t=/^(\d{1,2}):(\d\d)\s*([ap]m)?$/i;if(e.length==0)return SUGAR.expressions.Expression.TRUE;myregexp=new RegExp(t);if(!myregexp.test(e))return SUGAR.expressions.Expression.FALSE;var n=e.match(t);if(n[1]>23||n[2]>59){return SUGAR.expressions.Expression.FALSE}if(n[3]&&(n[1]>12||n[1]==0)){return SUGAR.expressions.Expression.FALSE}return SUGAR.expressions.Expression.TRUE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.NotExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.NotExpression,SUGAR.expressions.BooleanExpression,{className:"NotExpression",evaluate:function(){if(this.getParameters().evaluate()==SUGAR.expressions.Expression.FALSE)return SUGAR.expressions.Expression.TRUE;else return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 1}});SUGAR.expressions.IsValidDBNameExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsValidDBNameExpression,SUGAR.expressions.BooleanExpression,{className:"IsValidDBNameExpression",evaluate:function(){var e=this.getParameters().evaluate();if(e.length==0){return true}if(!/^[a-zA-Z][a-zA-Z\_0-9]+$/.test(e))return SUGAR.expressions.Expression.FALSE;return SUGAR.expressions.Expression.TRUE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.OrExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.OrExpression,SUGAR.expressions.BooleanExpression,{className:"OrExpression",evaluate:function(){var e=this.getParameters();for(var t=0;t<e.length;t++){if(e[t].evaluate()==SUGAR.expressions.Expression.TRUE)return SUGAR.expressions.Expression.TRUE}return SUGAR.expressions.Expression.FALSE}});SUGAR.expressions.IsValidDateExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsValidDateExpression,SUGAR.expressions.BooleanExpression,{className:"IsValidDateExpression",evaluate:function(){var e=this.getParameters().evaluate();if(typeof e!="string"||e=="")return SUGAR.expressions.Expression.FALSE;var t="Y-m-d";if(SUGAR.expressions.userPrefs)t=SUGAR.expressions.userPrefs.datef;var n=SUGAR.util.DateUtils.parse(e,t);if(n!=false&&n!="Invalid Date")return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.isAfterExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.isAfterExpression,SUGAR.expressions.BooleanExpression,{className:"isAfterExpression",evaluate:function(){var e=this.getParameters();var t=SUGAR.util.DateUtils.parse(e[0].evaluate());var n=SUGAR.util.DateUtils.parse(e[1].evaluate());if(!t||!n||isNaN(t)||isNaN(n)){return SUGAR.expressions.Expression.FALSE}if(t>n)return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 2},getParameterTypes:function(){return["date","date"]}});SUGAR.expressions.IsForecastClosedLostExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsForecastClosedLostExpression,SUGAR.expressions.BooleanExpression,{className:"IsForecastClosedLostExpression",evaluate:function(){var e=this.getParameters().evaluate();if(n===undefined){return SUGAR.expressions.Expression.FALSE}var t=n.metadata.getModule("Forecasts","config")||{},i=t.sales_stage_lost||["Closed Lost"];if(i.indexOf(e)===-1){return SUGAR.expressions.Expression.FALSE}return SUGAR.expressions.Expression.TRUE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.BinaryDependencyExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.BinaryDependencyExpression,SUGAR.expressions.BooleanExpression,{className:"BinaryDependencyExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var n=e[1].evaluate();if(t!=null&&n!=null&&t!=""&&n!="")return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 2},getParameterTypes:function(){return["string","string"]}});SUGAR.expressions.IsValidPhoneExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsValidPhoneExpression,SUGAR.expressions.BooleanExpression,{className:"IsValidPhoneExpression",evaluate:function(){var e=this.getParameters().evaluate();if(e.length==0)return SUGAR.expressions.Expression.TRUE;if(!/^\+?[0-9\-\(\)\s]+$/.test(e))return SUGAR.expressions.Expression.FALSE;return SUGAR.expressions.Expression.TRUE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.IsAlphaNumericExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsAlphaNumericExpression,SUGAR.expressions.BooleanExpression,{className:"IsAlphaNumericExpression",evaluate:function(){var e=this.getParameters().evaluate();if(/^[a-zA-Z0-9]+$/.test(e))return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.isBeforeExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.isBeforeExpression,SUGAR.expressions.BooleanExpression,{className:"isBeforeExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var n=e[1].evaluate();if(!t||!n||isNaN(t)||isNaN(n)){return SUGAR.expressions.Expression.FALSE}if(t<n)return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 2},getParameterTypes:function(){return["date","date"]}});SUGAR.expressions.IsNumericExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsNumericExpression,SUGAR.expressions.BooleanExpression,{
className:"IsNumericExpression",evaluate:function(){var e=this.getParameters().evaluate();if(e===""||e===null){return SUGAR.expressions.Expression.FALSE}if(isFinite(e)&&!isNaN(parseFloat(e))){return SUGAR.expressions.Expression.TRUE}return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.IsForecastClosedExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsForecastClosedExpression,SUGAR.expressions.BooleanExpression,{className:"IsForecastClosedExpression",evaluate:function(){var e=this.getParameters().evaluate();if(n===undefined){return SUGAR.expressions.Expression.FALSE}var t=n.metadata.getModule("Forecasts","config"),i=["Closed Won","Closed Lost"];if(!_.isUndefined(t)){i=_.union(t.sales_stage_won,t.sales_stage_lost)}if(i.indexOf(e)===-1){return SUGAR.expressions.Expression.FALSE}return SUGAR.expressions.Expression.TRUE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.IsAlphaExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsAlphaExpression,SUGAR.expressions.BooleanExpression,{className:"IsAlphaExpression",evaluate:function(){var e=this.getParameters().evaluate();if(/^[a-zA-Z]+$/.test(e))return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.IsValidEmailExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsValidEmailExpression,SUGAR.expressions.BooleanExpression,{className:"IsValidEmailExpression",evaluate:function(){var e=this.getParameters().evaluate();if(typeof e!="string")return SUGAR.expressions.Expression.FALSE;if(e=="")return SUGAR.expressions.Expression.TRUE;var t=e.charAt(e.length-1);if(!t.match(/[^\.]/i))return SUGAR.expressions.Expression.FALSE;var n=e.split(/[,;]/);for(var i=0;i<n.length;i++){var r=n[i];r=r.replace(/^\s+|\s+$/g,"");if(r!=""&&!/^.+@.+$/gi.test(r)){return SUGAR.expressions.Expression.FALSE}}return SUGAR.expressions.Expression.TRUE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.EqualExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.EqualExpression,SUGAR.expressions.BooleanExpression,{className:"EqualExpression",evaluate:function(){var e=SUGAR.expressions.Expression,t=this.getParameters(),n=t[0].evaluate(),i=t[1].evaluate(),r=t[0]instanceof SUGAR.expressions.BooleanExpression||t[1]instanceof SUGAR.expressions.BooleanExpression;if(n==i||r&&(e.isTruthy(n)&&e.isTruthy(i)||!e.isTruthy(n)&&!e.isTruthy(i))){return e.TRUE}return e.FALSE},getParamCount:function(){return 2},getParameterTypes:function(){return["generic","generic"]}});SUGAR.expressions.SugarListWhereExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SugarListWhereExpression,SUGAR.expressions.EnumExpression,{className:"SugarListWhereExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var n=e[1].evaluate();var i=[];for(var r=0;r<n.length;r++){if(n[r].length>0){if(n[r][0]==t){i=n[r][1];break}}}return i=="undefined"?[]:i},getParamCount:function(){return 2},getParameterTypes:function(){return["string","enum"]}});SUGAR.expressions.ForecastSalesStageExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.ForecastSalesStageExpression,SUGAR.expressions.EnumExpression,{className:"ForecastSalesStageExpression",evaluate:function(){if(n===undefined){return SUGAR.language.get("app_list_strings","sales_stage_dom")}var e=SUGAR.expressions.Expression,t=n.metadata.getModule("Forecasts","config"),i=this.getParameters(),r=i[0].evaluate(),a=i[1].evaluate(),s=n.lang.getAppListStrings("sales_stage_dom"),o=[];if(!e.isTruthy(r)){o=_.union(o,t.sales_stage_won)}if(!e.isTruthy(a)){o=_.union(o,t.sales_stage_lost)}return _.without(s,o)},getParamCount:function(){return 2},getParameterTypes:function(){return["boolean","boolean"]}});SUGAR.expressions.SugarTranslatedDropDownExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SugarTranslatedDropDownExpression,SUGAR.expressions.EnumExpression,{className:"SugarTranslatedDropDownExpression",evaluate:function(){var e=this.getParameters().evaluate(),t,i=[];if(n){t=n.lang.getAppListStrings(e)}else{t=SUGAR.language.get("app_list_strings",e)}if(t&&t!="undefined"){for(var r in t){if(typeof r=="string")i[i.length]=t[r]}}return i},getParamCount:function(){return 1},getParameterTypes:function(){return"string"}});SUGAR.expressions.DefineEnumExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.DefineEnumExpression,SUGAR.expressions.EnumExpression,{className:"DefineEnumExpression",evaluate:function(){var e=this.getParameters();var t=[];if(typeof e.length!="undefined"){for(var n=0;n<e.length;n++){t[t.length]=e[n].evaluate()}}else{return[e.evaluate()]}return t},getParameterTypes:function(){return"generic"}});SUGAR.expressions.SugarDropDownExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SugarDropDownExpression,SUGAR.expressions.EnumExpression,{className:"SugarDropDownExpression",evaluate:function(){var e=this.getParameters().evaluate(),t,i=[];if(n){t=n.lang.getAppListStrings(e)}else{t=SUGAR.language.get("app_list_strings",e)}if(t&&t!="undefined"){for(var r in t){if(typeof r=="string")i[i.length]=r}}return i},getParamCount:function(){return 1},getParameterTypes:function(){return"string"}});SUGAR.expressions.ForecastIncludedCommitStagesExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.ForecastIncludedCommitStagesExpression,SUGAR.expressions.EnumExpression,{className:"ForecastIncludedCommitStagesExpression",evaluate:function(){if(n===undefined){return SUGAR.language.get("app_list_strings","sales_stage_dom")}var e=n.metadata.getModule("Forecasts","config");return e.commit_stages_included},getParamCount:function(){return 0},getParameterTypes:function(){return[]}});SUGAR.expressions.StringLengthExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.StringLengthExpression,SUGAR.expressions.NumericExpression,{className:"StringLengthExpression",evaluate:function(){var e=this.getParameters().evaluate()+"";return e.length},getParamCount:function(){return 1},getParameterTypes:function(){return"string"}});SUGAR.expressions.NaturalLogExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.NaturalLogExpression,SUGAR.expressions.NumericExpression,{className:"NaturalLogExpression",evaluate:function(){return Math.log(this.getParameters().evaluate())},getParamCount:function(){return 1}});SUGAR.expressions.SubtractExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SubtractExpression,SUGAR.expressions.NumericExpression,{className:"SubtractExpression",evaluate:function(){var e=this.getParameters(),t=e[0].evaluate();for(var n=1;n<e.length;n++){t=this.context.subtract(t,e[n].evaluate())}return t}});SUGAR.expressions.MaxRelatedExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MaxRelatedExpression,SUGAR.expressions.NumericExpression,{className:"MaxRelatedExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var n=e[1].evaluate();if(typeof t=="string"&&t!=""){var i=this.context.getRelatedField(t,"rollupMax",n);if(typeof i=="object"){i=""}return i}else if(typeof rel=="object"){}return""},getParamCount:function(){return 2},getParameterTypes:function(){return["relate","string"]}});SUGAR.expressions.MinimumExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MinimumExpression,SUGAR.expressions.NumericExpression,{className:"MinimumExpression",evaluate:function(){var e=this.getParameters();var t=null;for(var n=0;n<e.length;n++){var i=e[n].evaluate();if(t==null||i<t)t=i}return t}});SUGAR.expressions.LogExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.LogExpression,SUGAR.expressions.NumericExpression,{className:"LogExpression",evaluate:function(){var e=this.getParameters();var t=e[1].evaluate();var n=e[0].evaluate();return this.context.divide(Math.log(n),Math.log(t))},getParamCount:function(){return 2}});SUGAR.expressions.AverageExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.AverageExpression,SUGAR.expressions.NumericExpression,{className:"AverageExpression",evaluate:function(){var e=0;var t=0;var n=this.getParameters();for(var i=0;i<n.length;i++){e=this.context.add(e,n[i].evaluate());t++}return this.context.divide(e,t)}});SUGAR.expressions.CountRelatedExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.CountRelatedExpression,SUGAR.expressions.NumericExpression,{className:"CountRelatedExpression",evaluate:function(){var e=this.getParameters().evaluate();if(typeof e=="string"&&e!=""){return this.context.getRelatedField(e,"count")}return""},getParamCount:function(){return 1},getParameterTypes:function(){return["relate"]}});SUGAR.expressions.AbsoluteValueExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.AbsoluteValueExpression,SUGAR.expressions.NumericExpression,{className:"AbsoluteValueExpression",evaluate:function(){return Math.abs(this.getParameters().evaluate())},getParamCount:function(){return 1}});SUGAR.expressions.AverageRelatedExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.AverageRelatedExpression,SUGAR.expressions.NumericExpression,{className:"AverageRelatedExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var n=e[1].evaluate();if(typeof t=="string"&&t!=""){return SUGAR.forms.AssignmentHandler.getRelatedField(t,"rollupAve",n)}else if(typeof rel=="object"){}return""},getParamCount:function(){return 2},getParameterTypes:function(){return["relate","string"]}});SUGAR.expressions.RoundExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.RoundExpression,SUGAR.expressions.NumericExpression,{className:"RoundExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var n=e[1].evaluate();return this.context.round(t,n)},getParamCount:function(){return 2}});SUGAR.expressions.AddExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.AddExpression,SUGAR.expressions.NumericExpression,{className:"AddExpression",evaluate:function(){var e=this.getParameters(),t=0;for(var n=0;n<e.length;n++){t=this.context.add(t,e[n].evaluate())}return t}});SUGAR.expressions.FloorExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.FloorExpression,SUGAR.expressions.NumericExpression,{className:"FloorExpression",evaluate:function(){return Math.floor(this.getParameters().evaluate())},getParamCount:function(){return 1}});SUGAR.expressions.ValueOfExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.ValueOfExpression,SUGAR.expressions.NumericExpression,{className:"ValueOfExpression",evaluate:function(){var e=this.getParameters().evaluate()+"";e=e.replace(/,/g,"");var t=0;if(e.indexOf(".")!=-1)t=parseFloat(e);else t=parseInt(e);if(isNaN(t))throw"Error: '"+e+"' is not a number";return t},getParamCount:function(){return 1},getParameterTypes:function(){return"generic"}});SUGAR.expressions.MaximumExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MaximumExpression,SUGAR.expressions.NumericExpression,{className:"MaximumExpression",evaluate:function(){var e=this.getParameters();var t=null;for(var n=0;n<e.length;n++){var i=e[n].evaluate();if(t==null||i>t)t=i}return t}});SUGAR.expressions.MinRelatedExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MinRelatedExpression,SUGAR.expressions.NumericExpression,{className:"MinRelatedExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var n=e[1].evaluate();if(typeof t=="string"&&t!=""){return this.context.getRelatedField(t,"rollupMin",n)}else if(typeof rel=="object"){}return""},getParamCount:function(){return 2},getParameterTypes:function(){return["relate","string"]}});SUGAR.expressions.MedianExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MedianExpression,SUGAR.expressions.NumericExpression,{className:"MedianExpression",evaluate:function(){var e=this.getParameters();var t=new Array;for(var n=0;n<e.length;n++)t[t.length]=parseFloat(e[n].evaluate());t.sort(function(e,t){return e-t});if(t.length%2==0){return(t[t.length/2]+t[t.length/2-1])/2}return t[Math.round(t.length/2)-1]}});SUGAR.expressions.MultiplyExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MultiplyExpression,SUGAR.expressions.NumericExpression,{className:"MultiplyExpression",evaluate:function(){var e=this.getParameters(),t="1";for(var n=0;n<e.length;n++){t=this.context.multiply(t,e[n].evaluate())}return t}});SUGAR.expressions.CeilingExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.CeilingExpression,SUGAR.expressions.NumericExpression,{className:"CeilingExpression",evaluate:function(){return Math.ceil(this.getParameters().evaluate())},getParamCount:function(){return 1}});SUGAR.expressions.NegateExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.NegateExpression,SUGAR.expressions.NumericExpression,{className:"NegateExpression",evaluate:function(){return this.context.multiply("-1",this.getParameters().evaluate())},getParamCount:function(){return 1}});SUGAR.expressions.SumRelatedExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SumRelatedExpression,SUGAR.expressions.NumericExpression,{className:"SumRelatedExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var n=e[1].evaluate();if(typeof t=="string"&&t!=""){return this.context.getRelatedField(t,"rollupSum",n)}else if(typeof rel=="object"){}return""},getParamCount:function(){return 2},getParameterTypes:function(){return["relate","string"]}});SUGAR.expressions.DivideExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.DivideExpression,SUGAR.expressions.NumericExpression,{className:"DivideExpression",evaluate:function(){var e=this.getParameters(),t=e[0].evaluate();denominator=e[1].evaluate();if(denominator==0){throw"Division by 0 error"}return this.context.divide(t,denominator)},getParamCount:function(){return 2}});SUGAR.expressions.StandardDeviationExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.StandardDeviationExpression,SUGAR.expressions.NumericExpression,{className:"StandardDeviationExpression",evaluate:function(){var e=this.getParameters();var t=new Array;var n=0;var i=e.length;for(var r=0;r<e.length;r++){value=e[r].evaluate();t[t.length]=value;n=this.context.add(n,value)}var a=this.context.divide(n,i);var s=0;for(var r=0;r<t.length;r++)s+=Math.pow(this.context.subtract(t[r],a),2);var o=this.context.multiply(this.context.divide(1,i),s);return Math.sqrt(o)}});SUGAR.expressions.PowerExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.PowerExpression,SUGAR.expressions.NumericExpression,{className:"PowerExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var n=e[1].evaluate();return Math.pow(t,n)},getParamCount:function(){return 2}});SUGAR.expressions.IndexOfExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IndexOfExpression,SUGAR.expressions.NumericExpression,{className:"IndexOfExpression",evaluate:function(){var e=this.getParameters();var t=e[1].evaluate();var n=e[0].evaluate();for(var i=0;i<t.length;i++){if(t[i]==n){return i}}return-1},getParamCount:function(){return 2},getParameterTypes:function(){return["generic","enum"]}});SUGAR.forms.SetPanelVisibilityAction=function(e,t){this.afterRender=true;if(_.isObject(e)){t=e.value;e=e.target}if(_.isString(e)&&_.isUndefined(SUGAR.App)){var n=$("#"+e).parents("div");if(n.length){e=n.attr("id")}}this.target=e;this.expr="cond("+t+', "", "none")'};SUGAR.util.extend(SUGAR.forms.SetPanelVisibilityAction,SUGAR.forms.AbstractAction,{hideChildren:function(){if(typeof SUGAR.forms.SetPanelVisibilityAction.hiddenFields=="undefined"){this.createFieldBin()}var e=document.getElementById(this.target);var t=e.getElementsByTagName("table")[0];if(t!=null){t.id=this.target+"_tbl";SUGAR.forms.SetPanelVisibilityAction.hiddenFields.appendChild(t)}},showChildren:function(){var e=document.getElementById(this.target);var t=document.getElementById(this.target+"_tbl");if(t!=null)e.appendChild(t)},createFieldBin:function(){var e=document.createElement("div");e.id="panelHiddenFields";e.style.display="none";document.body.appendChild(e);SUGAR.forms.SetPanelVisibilityAction.hiddenFields=e},exec:function(e){if(typeof e=="undefined")e=this.context;if(e.view)return this.sidecarExec(e);try{var t=this.evalExpression(this.expr,e);var n=document.getElementById(this.target);if(n!=null){if(n.style.display!="none")SUGAR.forms.animation.sizes[this.target]=n.clientHeight;if(SUGAR.forms.AssignmentHandler.ANIMATE){if(t=="none"&&n.style.display!="none"){SUGAR.forms.animation.Collapse(this.target,this.hideChildren,this);return}else if(t!="none"&&n.style.display=="none"){this.showChildren();SUGAR.forms.animation.Expand(this.target);return}}if(t=="none")this.hideChildren();else this.showChildren();n.style.display=t}}catch(i){if(console&&console.log)console.log(i)}},sidecarExec:function(e){var t=this.evalExpression(this.expr,e)==="none",n=e.view.$(".tab."+this.target),i=e.view.$("div.record-panel[data-panelname='"+this.target+"']"),r=n&&n.hasClass("active");if(!n||!n.length){if(i.length>0){if(t){i.hide()}else{i.show()}this.triggerFieldsVisibility(e,this.target,t)}else{console.log("unable to find panel "+this.target)}}else{if(t){n.hide();if(r){var a=e.view.$("li.tab:visible");if(a.length>0&&e.view.setActiveTab){e.view.setActiveTab({currentTarget:a[0].children[0]});e.view.handleActiveTab()}}}else{n.show()}this.triggerFieldsVisibility(e,this.target,t)}},triggerFieldsVisibility:function(e,t,n){_.each(this.getPanelFieldNames(e,t),function(t){var i=e.view.getField(t);if(i&&_.isUndefined(i.wasRequired)){i.wasRequired=i.def.required}e.setFieldDisabled(t,n);if(i.wasRequired===true)e.setFieldRequired(t,!n)})},getPanelFieldNames:function(e,t){var n=_.find(e.view.meta.panels,function(e){return e.name===t});return _.pluck(n.fields,"name")}});SUGAR.forms.animation.sizes={};SUGAR.forms.animation.Collapse=function(e,t,n){var i=document.getElementById(e);if(i==null)return;SUGAR.forms.animation.sizes[e]=i.clientHeight;i.style.overflow="hidden";var r=new YAHOO.util.Anim(e,{height:{to:0}},.5,YAHOO.util.Easing.easeBoth);r.onComplete.subscribe(function(){i.style.display="none";t.call(n)});r.animate()};SUGAR.forms.animation.Expand=function(e){var t=document.getElementById(e);if(t==null)return;t.style.overflow="hidden";t.style.height="0px";t.style.display="";var n=new YAHOO.util.Anim(e,{height:{to:SUGAR.forms.animation.sizes[e]}},.5,YAHOO.util.Easing.easeBoth);n.onComplete.subscribe(function(){t.style.height="auto"});n.animate()};SUGAR.forms.SetRequiredAction=function(e,t,n){if(_.isObject(e)){t=e.value;n=e.label;e=e.target}this.variable=e;this.expr=t;this.label=n;this._el_lbl=document.getElementById(this.label);if(this._el_lbl)this.msg=this._el_lbl.innerText};SUGAR.util.extend(SUGAR.forms.SetRequiredAction,SUGAR.forms.AbstractAction,{exec:function(e){if(typeof e=="undefined")e=this.context;this.required=this.evalExpression(this.expr,e);if(e.view){if(_.isEmpty(e.view.fields)){e.view.once("render",function(){this.exec(e)},this);return}e.setFieldRequired(this.variable,this.required)}else{this.bwcExec(e,this.required)}},bwcExec:function(e,t){var n=SUGAR.forms.AssignmentHandler.getElement(this.variable);if(typeof SUGAR.forms.FormValidator!="undefined")SUGAR.forms.FormValidator.setRequired(n.form.name,n.name,this.required);if(this._el_lbl!=null&&n!=null){var i=this._el_lbl,r=YAHOO.util.Dom.getElementsBy(function(e){return e.className=="req"},"span",i),a=false,s=n.name;if(r!=null&&r[0]!=null)a=r[0];if(this.required==true||this.required=="true"){if(!a){var o=document.createElement("span");o.innerHTML="<font color='red'>*</font>";o.className="req";this._el_lbl.appendChild(o);var l=this.findInValidate(e.formName,s);if(l>-1)validate[e.formName][l][2]=true;else addToValidate(e.formName,s,"text",true,this.msg)}}else{if(i!=null&&a!=false){a.parentNode.removeChild(a)}var l=this.findInValidate(e.formName,s);if(l>-1)validate[e.formName][l][2]=false}}},findInValidate:function(e,t){if(validate&&validate[e]){for(var n in validate[e]){if(typeof validate[e][n]=="object"&&validate[e][n][0]==t)return n}}return-1}});SUGAR.forms.StyleAction=function(e,t){this.target=e;this.attrs=t};SUGAR.util.extend(SUGAR.forms.StyleAction,SUGAR.forms.AbstractAction,{exec:function(e){if(SUGAR.App)return;if(typeof e=="undefined")e=this.context;try{var t={};for(var n in this.attrs){t[n]=this.evalExpression(this.attrs[n],e)}e.setStyle(this.target,t)}catch(i){return}}});SUGAR.forms.AssignToAction=function(e){if(_.isObject(e)){e=e.value}this.expr=e;this.target="assigned_user_name";if(_.isUndefined(SUGAR.App)){this.dataSource=new YAHOO.util.DataSource("index.php?",{responseType:YAHOO.util.XHRDataSource.TYPE_JSON,responseSchema:{resultsList:"fields",total:"totalCount",metaNode:"fields",metaFields:{total:"totalCount",fields:"fields"}},connMethodPost:true})}};SUGAR.util.extend(SUGAR.forms.AssignToAction,SUGAR.forms.AbstractAction,{exec:function(e){if(typeof e=="undefined"){e=this.context}this.userName=this.evalExpression(this.expr,e);if(e.view){if(_.isEmpty(e.view.fields)){e.view.once("render",function(){this.exec(e)},this);return}e.setAssignedUserName(this.target,this.userName)}else{this.bwcExec(e)}},bwcExec:function(e){if(typeof e=="undefined"){e=this.context}var t=SUGAR.util.paramsToUrl({to_pdf:"true",module:"Home",action:"quicksearchQuery",data:YAHOO.lang.JSON.stringify(sqs_objects["EditView_"+this.target]),query:this.userName});this.sqs=sqs_objects["EditView_"+this.target];this.dataSource.sendRequest(t,{success:function(e,t){if(t.results.length>0){var n=t.results[0];for(var i=0;i<this.sqs.field_list.length;i++){SUGAR.forms.AssignmentHandler.assign(this.sqs.populate_list[i],n[this.sqs.field_list[i]])}}},scope:this})},targetUrl:"index.php?module=Home&action=TaxRate&to_pdf=1"});var n=n||null;SUGAR.forms.SetVisibilityAction=function(e,t,n){this.afterRender=true;if(_.isObject(e)){t=e.value;e=e.target}this.target=e;this.expr="cond("+t+', "", "none")';this.view=n;if(!SUGAR.forms.SetVisibilityAction.initialized){var i=document.getElementsByTagName("head")[0];var r="span.vis_action_hidden, .vis_action_hidden * { visibility:hidden}";var a=document.createElement("style");a.setAttribute("type","text/css");if(a.styleSheet)a.styleSheet.cssText=r;else a.innerHTML=r;i.appendChild(a);SUGAR.forms.SetVisibilityAction.initialized=true}};SUGAR.util.extend(SUGAR.forms.SetVisibilityAction,SUGAR.forms.AbstractAction,{exec:function(e){if(typeof e=="undefined")e=this.context;try{var t=e&&e.getElement&&e.getElement(this.target)||null;if(t==null){return}var n=this.evalExpression(this.expr,e);var i=n=="none"||n=="hidden";if(SUGAR.App){this.sidecarExec(e,t,i)}else{this.legacyExec(e,t,i)}}catch(r){if(console&&console.log)console.log(r)}},sidecarExec:function(e,t,n){var i="vis_action_hidden",r=$(t).hasClass(i),a=e.view.getField(this.target),s=$(t).parents(".panel_body")[0];if(a&&_.isUndefined(a.wasRequired)){a.wasRequired=a.def.required}if(n){e.addClass(this.target,i,true);e.setFieldDisabled(this.target,true);if(a.wasRequired===true){e.setFieldRequired(this.target,false)}}else{e.removeClass(this.target,i,true);if(!a.def.calculated||!a.def.enforced){e.setFieldDisabled(this.target,false)}if(r){SUGAR.forms.FlashField(t,null,this.target)}if(a.wasRequired===true){e.setFieldRequired(this.target,true)}}if(s){this.checkRowSidecar(s,i)}},legacyExec:function(e,t,n){var i=YAHOO.util.Dom,r="vis_action_hidden",a=i.getAncestorByTagName(t,"TD"),s=i.getPreviousSiblingBy(a,function(e){return e.tagName=="TD"});this.wrapContent(s);this.wrapContent(a);var o=i.hasClass(s,r);if(n){i.addClass(s,r);i.addClass(a,r)}else{i.removeClass(s,r);i.removeClass(a,r);if(o&&this.view=="EditView"){SUGAR.forms.FlashField(t)}}this.checkRow(i.getAncestorByTagName(a,"TR"),r)},wrapContent:function(e){if(e&&this.containsPlainText(e)){var t=document.createElement("SPAN");var n=[];for(var i=0;i<e.childNodes.length;i++){n[i]=e.childNodes[i]}for(var i=0;i<n.length;i++){t.appendChild(n[i])}e.appendChild(t)}},containsPlainText:function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(n.nodeName=="#text"&&YAHOO.lang.trim(n.textContent)!=""){return true}}return false},checkRow:function(e,t){var n=true;for(var i=0;i<e.children.length;i++){var r=e.children[i];if(r.tagName.toLowerCase()=="td"&&!YAHOO.util.Dom.hasClass(r,t)){n=false;break}}e.style.display=n?"none":""},checkRowSidecar:function(e,t){if(!e||e.children){return}var n=true;for(var i=0;i<e.children.length;i++){var r=e.children[i];if(r.tagName.toLowerCase()=="div"&&!$(r).hasClass(t)&&$(r).children().length>1){n=false;break}}e.style.display=n?"none":""}});SUGAR.forms.SetValueAction=function(e,t){if(_.isObject(e)){this.expr=e.value;this.target=e.target;this.errorValue=!_.isUndefined(e.errorValue)?e.errorValue:null}else{this.expr=t;this.target=e}};SUGAR.util.extend(SUGAR.forms.SetValueAction,SUGAR.forms.AbstractAction,{exec:function(e){if(typeof e=="undefined"){e=this.context}try{var t=this.evalExpression(this.expr,e),n=e.getValue(this.target).evaluate();if(!_.isUndefined(t)&&t!==n&&this.canSetValue(e)){e.setValue(this.target,t)}}catch(i){if(!_.isUndefined(this.errorValue)&&!_.isNull(this.errorValue)){e.setValue(this.target,this.errorValue)}}}});SUGAR.forms.SetOptionsAction=function(e,t,n){this.afterRender=true;if(_.isObject(e)){n=e.labels;t=e.keys;e=e.target}this.keyExpr=t;this.labelExpr=n;this.target=e};SUGAR.util.extend(SUGAR.forms.SetOptionsAction,SUGAR.forms.AbstractAction,{exec:function(e){if(typeof e=="undefined")e=this.context;var t=this.evalExpression(this.keyExpr,e),i=this.evalExpression(this.labelExpr,e),r,a="";if(e.view){var s=e.getField(this.target);if(!s){return}a=[].concat(s.model.get(this.target));if(!this.canSetValue(e)){t=t.concat(a)}r=(_.size(t)===0||_.size(t)===1)&&(t[0]==undefined||t[0]==="");if(_.isString(i))s.items=_.pick(n.lang.getAppListStrings(i),t);else s.items=_.object(t,i);slContext=e;s.model.fields[this.target].options=s.items;var o=new SUGAR.forms.SetVisibilityAction(this.target,r?"false":"true","");o.setContext(e);o.exec();a=_.filter(a,function(e){return _.contains(t,e)});if((a.length==0||a.length==1&&a[0]=="")&&s.model.fields[s.name].type!="multienum"){a=[r?"":t[0]]}e.setValue(this.target,a)}else{var s=e.getElement(this.target);if(s==null)return null;if(t instanceof Array&&s.options!=null){var l=s.options;a=[];for(var u=0;u<l.length;u++){if(l[u].selected)a=a.concat(l[u].value)}while(l.length>0){s.remove(l[0])}if(typeof i=="string"){var c=SUGAR.language.get("app_list_strings",i);i=[];for(var u in t){i[u]=c[t[u]]}}var d;for(var u in t){if(i instanceof Array){if(typeof t[u]=="string"){if(typeof i[u]=="string"){d=l[l.length]=new Option(i[u],t[u],t[u]==a)}else{d=l[l.length]=new Option(t[u],t[u],t[u]==a)}}}else{if(typeof t[0]=="undefined"){if(typeof t[u]=="string"){d=l[l.length]=new Option(t[u],u)}}else{if(typeof value[u]=="string"){d=l[l.length]=new Option(t[u],t[u])}}}if(_.indexOf(a,t[u])>-1){d.selected=true}}if(!s.multiple&&s.value!=a){SUGAR.forms.AssignmentHandler.assign(this.target,s.value)}var r=s.multiple&&s.options.length==0||!s.multiple&&s.options.length<=1&&s.value=="";var o=new SUGAR.forms.SetVisibilityAction(this.target,r?"false":"true","");o.setContext(e);o.exec();if(SUGAR.forms.AssignmentHandler.ANIMATE&&!r)SUGAR.forms.FlashField(s)}else if(t instanceof Array&&(t.length==0||t.length==1&&t[0]=="")){var f=new SUGAR.forms.SetVisibilityAction(this.target,"false","");f.exec(e)}}}});SUGAR.forms.ReadOnlyAction=function(e,t){this.afterRender=true;if(_.isObject(e)){t=e.value;e=e.target}this.target=e;this.expr=t};SUGAR.util.extend(SUGAR.forms.ReadOnlyAction,SUGAR.forms.AbstractAction,{exec:function(e){if(typeof e=="undefined")e=this.context;var t=this.evalExpression(this.expr,e),n=t==SUGAR.expressions.Expression.TRUE;if(e.view){if(_.isEmpty(e.view.fields)){e.view.once("render",function(){this.exec(e)},this);return}e.setFieldDisabled(this.target,n)}else{this.bwcExec(e,n)}},bwcExec:function(e,t){var n=SUGAR.forms.AssignmentHandler.getElement(this.target);if(!n){return}this.setReadOnly(n,t);this.setDateField(n,t)},setReadOnly:function(e,t){var n=YAHOO.util.Dom;var i=e.type=="checkbox"||"select"?"disabled":"readonly";e[i]=t;if(t){n.setStyle(e,"background-color","#EEE");if(!SUGAR.isIE)n.setStyle(e,"color","#22")}else{n.setStyle(e,"background-color","");if(!SUGAR.isIE)n.setStyle(e,"color","")}},setDateField:function(e,t){var n=YAHOO.util.Dom,i=e.id,r=n.get(i+"_trigger");if(!r)return;var a=[n.get(i+"_date"),n.get(i+"_minutes"),n.get(i+"_meridiem"),n.get(i+"_hours")];for(var s in a)if(a[s]&&a[s].id)this.setReadOnly(a[s],t);if(t)n.setStyle(r,"display","none");else n.setStyle(r,"display","")}});SUGAR.FunctionMap={formatName:SUGAR.expressions.FormatedNameExpression,translateLabel:SUGAR.expressions.SugarTranslateExpression,translate:SUGAR.expressions.SugarTranslateExpression,toString:SUGAR.expressions.DefineStringExpression,string:SUGAR.expressions.DefineStringExpression,getDropdownValue:SUGAR.expressions.SugarDropDownValueExpression,getDDValue:SUGAR.expressions.SugarDropDownValueExpression,contains:SUGAR.expressions.ContainsExpression,charAt:SUGAR.expressions.CharacterAtExpression,strToUpper:SUGAR.expressions.StrToUpperExpression,strToLower:SUGAR.expressions.StrToLowerExpression,concat:SUGAR.expressions.ConcatenateExpression,subStr:SUGAR.expressions.SubStrExpression,forecastCommitStage:SUGAR.expressions.ForecastCommitStageExpression,dayofweek:SUGAR.expressions.DayOfWeekExpression,maxRelatedDate:SUGAR.expressions.MaxRelatedDateExpression,hoursUntil:SUGAR.expressions.HoursUntilExpression,date:SUGAR.expressions.DefineDateExpression,today:SUGAR.expressions.TodayExpression,addDays:SUGAR.expressions.AddDaysExpression,daysUntil:SUGAR.expressions.DaysUntilExpression,now:SUGAR.expressions.NowExpression,monthofyear:SUGAR.expressions.MonthOfYearExpression,timestamp:SUGAR.expressions.TimestampExpression,time:SUGAR.expressions.DefineTimeExpression,hourOfDay:SUGAR.expressions.HourOfDayExpression,currencyRate:SUGAR.expressions.CurrencyRateExpression,related:SUGAR.expressions.RelatedFieldExpression,valueAt:SUGAR.expressions.IndexValueExpression,sugarField:SUGAR.expressions.SugarFieldExpression,ifElse:SUGAR.expressions.ConditionExpression,cond:SUGAR.expressions.ConditionExpression,and:SUGAR.expressions.AndExpression,isForecastClosedWon:SUGAR.expressions.IsForecastClosedWonExpression,isRequiredCollection:SUGAR.expressions.IsRequiredCollectionExpression,isInList:SUGAR.expressions.IsInEnumExpression,isInEnum:SUGAR.expressions.IsInEnumExpression,greaterThan:SUGAR.expressions.GreaterThanExpression,isWithinRange:SUGAR.expressions.IsInRangeExpression,isValidTime:SUGAR.expressions.IsValidTimeExpression,not:SUGAR.expressions.NotExpression,isValidDBName:SUGAR.expressions.IsValidDBNameExpression,or:SUGAR.expressions.OrExpression,isValidDate:SUGAR.expressions.IsValidDateExpression,isAfter:SUGAR.expressions.isAfterExpression,isForecastClosedLost:SUGAR.expressions.IsForecastClosedLostExpression,
doBothExist:SUGAR.expressions.BinaryDependencyExpression,isValidPhone:SUGAR.expressions.IsValidPhoneExpression,isAlphaNumeric:SUGAR.expressions.IsAlphaNumericExpression,isBefore:SUGAR.expressions.isBeforeExpression,isNumeric:SUGAR.expressions.IsNumericExpression,isForecastClosed:SUGAR.expressions.IsForecastClosedExpression,isAlpha:SUGAR.expressions.IsAlphaExpression,isValidEmail:SUGAR.expressions.IsValidEmailExpression,equal:SUGAR.expressions.EqualExpression,getListWhere:SUGAR.expressions.SugarListWhereExpression,forecastSalesStages:SUGAR.expressions.ForecastSalesStageExpression,getDropdownValueSet:SUGAR.expressions.SugarTranslatedDropDownExpression,getTransDD:SUGAR.expressions.SugarTranslatedDropDownExpression,createList:SUGAR.expressions.DefineEnumExpression,"enum":SUGAR.expressions.DefineEnumExpression,getDropdownKeySet:SUGAR.expressions.SugarDropDownExpression,getDD:SUGAR.expressions.SugarDropDownExpression,forecastIncludedCommitStages:SUGAR.expressions.ForecastIncludedCommitStagesExpression,strlen:SUGAR.expressions.StringLengthExpression,ln:SUGAR.expressions.NaturalLogExpression,subtract:SUGAR.expressions.SubtractExpression,currencySubtract:SUGAR.expressions.SubtractExpression,sub:SUGAR.expressions.SubtractExpression,rollupMax:SUGAR.expressions.MaxRelatedExpression,min:SUGAR.expressions.MinimumExpression,log:SUGAR.expressions.LogExpression,average:SUGAR.expressions.AverageExpression,avg:SUGAR.expressions.AverageExpression,count:SUGAR.expressions.CountRelatedExpression,abs:SUGAR.expressions.AbsoluteValueExpression,rollupAve:SUGAR.expressions.AverageRelatedExpression,rollupAvg:SUGAR.expressions.AverageRelatedExpression,countConditional:SUGAR.expressions.CountConditionalRelatedExpression,round:SUGAR.expressions.RoundExpression,add:SUGAR.expressions.AddExpression,currencyAdd:SUGAR.expressions.AddExpression,floor:SUGAR.expressions.FloorExpression,number:SUGAR.expressions.ValueOfExpression,max:SUGAR.expressions.MaximumExpression,rollupMin:SUGAR.expressions.MinRelatedExpression,median:SUGAR.expressions.MedianExpression,multiply:SUGAR.expressions.MultiplyExpression,currencyMultiply:SUGAR.expressions.MultiplyExpression,mul:SUGAR.expressions.MultiplyExpression,ceil:SUGAR.expressions.CeilingExpression,ceiling:SUGAR.expressions.CeilingExpression,negate:SUGAR.expressions.NegateExpression,rollupSum:SUGAR.expressions.SumRelatedExpression,rollupCurrencySum:SUGAR.expressions.SumRelatedExpression,divide:SUGAR.expressions.DivideExpression,currencyDivide:SUGAR.expressions.DivideExpression,div:SUGAR.expressions.DivideExpression,rollupConditionalSum:SUGAR.expressions.SumConditionalRelatedExpression,stddev:SUGAR.expressions.StandardDeviationExpression,pow:SUGAR.expressions.PowerExpression,indexOf:SUGAR.expressions.IndexOfExpression};SUGAR.NumericConstants={pi:3.1415926535898,e:2.718281828459}},function(e,t){"use strict";(function(e){e.raven={initialize:function t(){},ravenDataCallback:function n(t){t.tags=_.extend(t.tags||{},{"native":e.isNative,osVersion:_.getNested(e,"clientInfo.device.osVersion"),uuid:_.getNested(e,"clientInfo.device.uuid"),device:_.getNested(e,"clientInfo.device.model"),offline:e.config.offline&&e.config.offline.enabled});t.extra=_.extend(t.extra||{},{model:_.getNested(e,"clientInfo.device.model"),modelName:_.getNested(e,"clientInfo.device.modelName"),bundleId:_.getNested(e,"clientInfo.app.bundleId"),serverUrl:e.nomad?e.nomad.getServerUrl():undefined,serverVersion:e.nomad?e.nomad.getServerVersion():undefined,extendedLog:e.enhancedErrorReporter.getLog()});return t},ravenShouldSendCallback:function i(){return e.config.raven.enabled},ravenReported:function r(t){if(e.error){var n=t.data||{};e.error.logFatalError(n.message,n)}},setUser:function a(e){Raven.setUser(e?{id:e}:null)}};if(e.config.raven&&e.config.raven.enabled&&!_.isEmpty(e.config.raven.url)){document.addEventListener("ravenSuccess",e.raven.ravenReported,false);document.addEventListener("ravenFailure",e.raven.ravenReported,false);Raven.config(e.config.raven.url,{tags:{version:e.config.appVersion,build:e.config.appBuild,env:e.config.raven.env},dataCallback:e.raven.ravenDataCallback,shouldSendCallback:e.raven.ravenShouldSendCallback}).install();e.events.on("app:start",function(){e.raven.setUser(e.api.isAuthenticated()?"authenticated":null)}).on("app:login:success",function(){e.raven.setUser("authenticated")}).on("app:logout",function(){e.raven.setUser()})}})(SUGAR.App)},function(e,t){"use strict";(function(e){var t=window.store;function n(e){this._async=!!e.async;this._bucketName=e.name+":"}_.extend(n.prototype,{version:1,_syncApi:{get:function i(e){return t.get(this._bucketName+e)},getAll:function r(){var e=this._bucketName;var n=e.length;var i={};_.each(t.getAll(),function(t,r){var a=r.indexOf(e);if(a===0){i[r.substr(n)]=t}});return i},has:function a(e){return t.has(this._bucketName+e)},set:function s(e,n){t.set(this._bucketName+e,n)},cut:function o(e){t.cut(this._bucketName+e)},cutAll:function l(){var e=this._bucketName;_.each(_.keys(this._syncApi.getAll.call(this)),function(n){t.cut(e+n)})}},_asyncApi:{get:function u(e,t){t.call(this,null,this._syncApi.get.call(this,e))},getAll:function c(e){e.call(this,null,this._syncApi.getAll.call(this))},has:function d(e,t){t.call(this,null,this._syncApi.has.call(this,e))},set:function f(e,t,n){this._syncApi.set.call(this,e,t);n&&n.call(this,null)},cut:function h(e,t){this._syncApi.cut.call(this,e);t&&t.call(this,null)},cutAll:function p(e){this._syncApi.cutAll.call(this);e&&e.call(this,null)}},init:function m(e){_.extend(this,this._async?this._asyncApi:this._syncApi);e&&e.call(this,null,this)}});e.localStorageKeyValueStore={open:function g(){},initBucket:function v(e,t){var i=new n(e);i.init(t)}}})(SUGAR.App)},function(e,t){"use strict";(function(e){var t=function r(){};var n={db:null,openDb:function a(t){this.db=e.nomad.openDb(t);if(!this.db){throw new Error("Can't open SQL database "+t.name)}},query:function s(e,t,n){var i=this;this.db.transaction(function r(a){a.executeSql(e,t||[],function s(e,t){n&&n.call(i,null,t)},function o(e,t){n&&n.call(i,t)})})},createDataTable:function o(e,t){var n=this;this.query("CREATE TABLE IF NOT EXISTS "+e+" (key STRING PRIMARY KEY, value TEXT)",[],function i(e,r){t&&t.apply(n,arguments)})},get:function l(e,t,n){var i=this;this.query("SELECT value FROM "+e+" WHERE key = ? LIMIT 1",[t],function r(e,t){if(e){n&&n.call(i,e);return}var r;if(t.rows.length){r=t.rows.item(0).value==="undefined"?undefined:JSON.parse(t.rows.item(0).value)}n&&n.call(i,null,r)})},getAll:function u(e,t){var n=this;this.query("SELECT key, value FROM "+e,[],function i(e,r){var a;var s={};var o;if(e){t&&t.call(n,e);return}for(o=r.rows.length,a=0;a<o;a++){var l=r.rows.item(a);s[l.key]=l.value==="undefined"?undefined:JSON.parse(l.value)}t&&t.call(n,null,s)})},has:function c(e,t,n){var i=this;this.query("SELECT key FROM "+e+" WHERE key = ? LIMIT 1",[t],function r(e,t){if(e){n&&n.call(i,e);return}n&&n.call(i,null,!!t.rows.length)})},set:function d(e,t,n,i){var r=this;this.query("REPLACE INTO "+e+" (key, value) values (?, ?)",[t,JSON.stringify(n)],function a(e,t){i&&i.apply(r,arguments)})},cut:function f(e,t,n){var i=this;this.query("DELETE FROM "+e+" WHERE key = ?",[t],function r(e,t){n&&n.apply(i,arguments)})},cutAll:function h(e,t){var n=this;this.query("DELETE FROM "+e,[],function i(e,r){t&&t.apply(n,arguments)})}};function i(e){this._async=!!e.async;if(!this._async){this._cache={}}this._bucketName=e.name}_.extend(i.prototype,{version:1,_syncApi:{get:function p(t){return _.isObject(this._cache[t])?e.utils.deepCopy(this._cache[t]):this._cache[t]},getAll:function m(){return e.utils.deepCopy(this._cache)},has:function g(e){return _.has(this._cache,e)},set:function v(t,i){n.set(this._bucketName,t,i);this._cache[t]=_.isObject(i)?e.utils.deepCopy(i):i},cut:function y(e){n.cut(this._bucketName,e);delete this._cache[e]},cutAll:function b(){n.cutAll(this._bucketName);this._cache={}}},_asyncApi:{get:function x(e,t){n.get(this._bucketName,e,_.bind(t,this))},getAll:function w(e){n.getAll(this._bucketName,_.bind(e,this))},has:function L(e,t){n.has(this._bucketName,e,_.bind(t,this))},set:function S(e,i,r){n.set(this._bucketName,e,i,r?_.bind(r,this):t)},cut:function E(e,i){n.cut(this._bucketName,e,i?_.bind(i,this):t)},cutAll:function k(e){n.cutAll(this._bucketName,e?_.bind(e,this):t)}},init:function T(e){var t=this;n.createDataTable(this._bucketName,function i(r){if(r){e&&e.call(t,r);return}if(t._async){_.extend(t,t._asyncApi);e&&e.call(t,null,t)}else{n.getAll(t._bucketName,function a(n,i){if(n){e&&e.call(t,n);return}t._cache=i;_.extend(t,t._syncApi);e&&e.call(t,null,t)})}})}});e.sqlKeyValueStore={open:function M(e){n.openDb(e)},initBucket:function A(e,t){var n=new i(e);n.init(t)}}})(SUGAR.App)},function(e,t){"use strict";var n=SUGAR.App;var i=n.utils.capitalize;var r=void 0;var a={layout:{},view:{},field:{}};function s(e,t,n){return function(){var i=this._super;var r=void 0;this._super=function a(n){var i=Array.prototype.slice.call(arguments);if(n===t){i=i[1]}return e.prototype[t].apply(this,i)}.bind(this);r=n.apply(this,arguments);this._super=i;i=null;return r}}function o(e){var t=n.nomad.utils.isComponentChildOf;var i=void 0;if(t(n.view.Field,e)){i="field"}else if(t(n.view.View,e)){i="view"}else if(t(n.view.Layout,e)){i="layout"}return i}function l(e,t,n,a,s){var o=r.declareComponent({parent:t},a,s);if(_.isString(n)){n={internalType:i(n)}}n.componentType=e;r.registerComponent(o,n);return o}function u(e,t){var i=t.fullType;var r=e+"s";var s=!!n.view[r][i];a[e][i]=t;n.view[r][i]=t.constructor;n.logger.trace((s?"Overriding":"Registering")+" "+e+': "'+i+'" type: "'+t.baseType+'" '+(t.module?"module: "+t.module:""))}r={declareComponent:function c(e,t,n){var i=[];var r=e.parent;var a=_.isFunction(e.privateOverrideCb)?e.privateOverrideCb:_.noop;if(_.isFunction(r.getOverridableMethods)){i=r.getOverridableMethods()}_.each(t,function(e,n){if(_.isFunction(e)&&_.isFunction(r.prototype[n])){t[n]=s(r,n,e)}if(_.isFunction(r.prototype[n])&&!_.contains(i,n)){a(n)}});var o=r.extend(t,n);o.parentClass=r;return o},registerComponent:function d(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=i(n.config.platform);var s=t.componentType||o(e);if(!s){throw new Error("Unable to detect component type based on constructor, specify component type explicitly via componentType option")}var l=a[s];var c=i(s);var d=t.module&&(_.isArray(t.module)?t.module:[t.module]);if(t.internalType){var f=t.internalType;var h=f+c;u(s,{constructor:e,baseType:f,fullType:h})}else if(t.type){(function(){var i=n.utils.capitalizeHyphenated(t.type);_.each(d||[""],function(t){var n=r+t+i+c;u(s,{constructor:e,module:t,baseType:i,fullType:n})})})()}else{(function(){var t=void 0;var n=function a(e){return e.constructor===i};var i=e.parentClass;while(i){t=_.select(l,n);i=_.isEmpty(t)&&i.parentClass}_.each(t,function(t){var n=d||[t.module||""];var i=t.baseType;_.each(n,function(t){var n=r+t+i+c;u(s,{constructor:e,module:t,baseType:i,fullType:n})})})})()}return{componentType:s}},extendView:function f(e,t,n,i){return l("view",e,t,n,i)},extendField:function h(e,t,n,i){return l("field",e,t,n,i)},_getComponentsLocalCache:function p(){return a}};_.extend(n.nomad,r)},function(e,t){"use strict";(function(e){e.view.NomadLayoutManager=_.extend({layoutCacheSize:10,_noCacheLayouts:["associate","pickerlist"],_dynamicLayout:null,init:function t(n){this.rootLayout={el:n.rootHolder,layoutRef:null};this.recordLayout={el:n.recordHolder,layoutRef:null};this.layoutCache=new e.nomad.hashmap;return this},loadStatic:function n(t){var n=this._getLayoutDefs(t);this._beforeLoadStatic(t,n);var i=this._buildLayoutsFromDef(n,t);if(e.isTablet&&this.getRecordLayout()&&n.length===1){this._disposeLayout(this.getRecordLayout())}this._afterLoad(t);_.invoke(this.getLayouts(),"onAfterShow");return i},loadDynamic:function i(e){var t;if(e.layout){e.layouts=[e.layout];t=_.extend(this._getLayoutDefs(e)[0],{appendTo:e.appendTo,model:e.model,collection:e.collection,context:e.context})}else{t=e.layoutDef}_.defaults(t,{isDynamic:true,animateRender:true,appendTo:"record"});t.appendTo=t.appendTo==="record"?this._getRecordLayoutContainer():this.rootLayout;var n=this._buildLayoutsFromDef([t])[0];this._updateMainMenuVisibility();this._afterLoad.apply(this,arguments);n.onAfterShow();return n},getLayouts:function r(){var t=[];if(this.getRootLayout()){t.push(this.getRootLayout())}if(this.getRecordLayout()){t.push(this.getRecordLayout())}if(e.isTablet){return t}else{return t.length?[_.last(t)]:[]}},onAppPause:function a(){e.activeComponents.closeAll();_.invoke(this.getLayouts(),"onAppPause")},onAppResume:function s(){var t=(new Date).getTime()-e.nomad.timePaused;_.each(this.getLayouts(),function(n){if(t>e.config.ui.refreshOnResumeTimeout&&n.name!=="edit"){n.context.resetLoadFlag();n.loadData()}n.onAppResume()})},_getRootLayoutDef:function o(t){var n;if(_.isEmpty(t.layouts)){switch(t.root){case"Recents":case"Search":n={mixed:true,module:"Search",name:"list"};break;case"Offline":if(t.module==="TxLog"){n={module:"TxLog",name:"list"}}else{n={module:t.root,name:t.module?t.module:"offline",create:true};n.cacheDisabled=true}break;case"About":case"Settings":case"ErrorEmulation":case"Error":case"Login":n={module:t.root,name:t.root.toLowerCase(),create:true,cacheDisabled:true};if(t.root==="Error"){n.code=t.errorCode;n.backToSugar=t.backToSugar;n.sugarRoute=t.sugarRoute}break;default:if(t.root==="Dashboards"||t.dashboardId){n=this._getDashboardLayoutParams(t,true);if(!n){return null}}else if(t.link){n={name:"list",link:t.link,module:e.data.getRelatedModule(t.parentModule,t.link),parentModelId:t.parentModelId,parentModule:t.parentModule,subType:"relationships"}}else{n={module:t.module,name:"list"}}break}}else{n=t.layouts[0]}n.appendTo=this.rootLayout;return n},_getRecordLayoutDef:function l(e){var t;var n=e.action;if(_.isEmpty(e.layouts)){if(e.module==="Dashboards"||!(e.modelId||e.dashboardId||n==="create"||n==="associate")){return null}if(e.link){if(n==="create"){t={link:e.link,parentModule:e.parentModule,parentModelId:e.parentModelId,create:true,name:"edit",layoutOptions:e.layoutOptions}}else if(n==="associate"){t={link:e.link,parentModule:e.parentModule,parentModelId:e.parentModelId,skipFetch:true,name:"list-selector",subType:"associate"}}else{t={link:e.link,parentModule:e.parentModule,parentModelId:e.parentModelId,modelId:e.modelId,name:n||"detail"}}}else{if(e.root==="Dashboards"||e.dashboardId){t=this._getDashboardLayoutParams(e,false);if(!t){return null}t.animateRender=false}else if(n==="create"){t={module:e.module,create:true,duplicate:e.dupe,name:"edit"}}else{t={module:e.module,modelId:e.modelId,name:n||"detail"}}}}else{if(e.layouts.length===2){t=e.layouts[1]}else{return null}}t.appendTo=this._getRecordLayoutContainer();if(_.isUndefined(t.animateRender)){t.animateRender=true}return t},_getLayoutDefs:function u(t){var n;var i;var r=[];if(!_.isEmpty(t.layouts)){t.layouts=t.layouts.map(function(e){return{type:e,controller:e}})}n=this._getRootLayoutDef(t);if(n){r.push(n)}i=this._getRecordLayoutDef(t);if(i){r.push(i)}if(e.isTablet){return r}else{return[_.last(r)]}},_beforeLoadStatic:function c(t,n){this.disposeDynamicLayout({disposeAll:true});e.activeComponents.closeAll();$(document.body).toggleClass("show-content-child",n.length===2);this._updateMainMenuVisibility()},_afterLoad:function d(e){this._checkAlerts()},_updateMainMenuVisibility:function f(){var t=e.nomad.mainMenu;var n=e.api.isAuthenticated();if(t){t.$el.toggle(n)}},_getLayout:function h(t){var n=this._getLayoutCacheId(t);var i=this.layoutCache.get(n);if(!i){var r=t.context||this._getPreparedContext(t);return e.view.createLayout(_.extend(_.omit(t,"appendTo","controller"),{context:r,def:t}))}else{i.options.def=t;return i}},_attachLayout:function p(t){var n=this;var i=t.options.def;var r=i.appendTo;var a=i.appendTo.layoutRef;function s(){if(a&&!e.isTablet&&$.os.android){a.$el.hide()}n._handleLayoutFullScreen(t,a);r.layoutRef=t;t.$el.show();$(r.el).append(t.$el);_.each([n.rootLayout,n.recordLayout],function(e){if(e!==t.getDefinition().appendTo&&e.layoutRef===t){e.layoutRef=null}})}if(!a||a&&a!==t){if(t.getDefinition().animateRender){t.getOverlay$El().show()}s();this._renderLayout(t)}return a},_renderLayout:function m(e){if(e.cached){e.renderFromCache({animation:{enabled:e.getDefinition().animateRender,preAnimationDelay:0,animationLength:200}})}else{e.render({animation:this._getFreshRenderAnimationOptions(e)})}},_getFreshRenderAnimationOptions:function g(e){return{enabled:e.getDefinition().animateRender,preAnimationDelay:200,animationLength:200}},_cacheLayout:function v(e){var t=e.options.def;var n=this._getLayoutCacheId(t);var i=this.layoutCache.get(n);if(!this._canCache(t)){return}if(i){this.layoutCache.remove(i);this.layoutCache.push(n,i)}else{e.cached=true;this.layoutCache.push(n,e)}if(this.layoutCache.count()>this.layoutCacheSize){var r=this.layoutCache.shift();this._disposeLayout(r,{hardDispose:true})}},_canCache:function y(e){var t=e.cacheDisabled||e.isDynamic||e.name==="edit"&&e.create===true||_.contains(this._noCacheLayouts,e.subType);return!t},_disposeLayout:function b(t,n){if(t.disposed===true){e.logger.debug("Trying to dispose already disposed layout "+t.name+".");return}n=n||{};t.onDetach();if(t.getDefinition().appendTo.layoutRef===t){t.getDefinition().appendTo.layoutRef=null}var i=this._dynamicLayout&&this._dynamicLayout.prevLayout===t;if((i||t.cached)&&!n.hardDispose){if(n.detachDelay){var r=this;_.delay(function(){if(!(_.contains(r.getLayouts(),t)||t.disposed)){t.$el.detach()}},n.detachDelay)}else{t.$el.detach()}}else{delete t.prevLayout;t.dispose()}},_getPreparedContext:function x(t){var n=e.context.getContext(t);n.prepare();if(t.parentModelId){this.layoutCache.iterate(function(e){var i=e.context.get("model");if(t.parentModelId===i.id){n.set("parentModel",i)}})}return n},_buildLayoutsFromDef:function w(e,t){var n=[];var i=t&&t.propagatingData;_.each(e,function(e){var t=this._getLayout(e);var r=t.model;if(i&&i.id===r.id&&_.contains(["detail","edit"],t.type)){r.inSync=true;r.set(i);r.inSync=null}var a=this._attachLayout(t);this._cacheLayout(t);if(t.isDynamic()){if(a){a.cached=true;t.prevLayout=a}this._dynamicLayout=t}else{this._dynamicLayout=null}if(a&&a!==t){this._disposeLayout(a,{detachDelay:200})}n.push(t)},this);return n},getRecordLayout:function L(){return this._getRecordLayoutContainer().layoutRef},getRootLayout:function S(){return this.rootLayout.layoutRef},isDynamicLayoutLoaded:function E(){return!!this._dynamicLayout},invalidateLayouts:function k(e){this.layoutCache.iterate(function(t){var n;var i;var r;n=e[t.type];if(!n){return}r=_.isArray(n)?n:n.items;if(n.modules){i=_.contains(n.modules,t.module)}else if(n.modelIds){i=_.contains(n.modelIds,t.model.get("id"))}else if(r){_.each(r,function(e){i=e.module===t.module&&(!e.modelId||e.modelId===t.model.get("id"));return!i})}if(i){t.needLoadParams=n.loadParams||e.loadParams||true}})},disposeDynamicLayout:function T(e){e=e||{};var t=this;function n(){if(e.disposeAll){return!!t._dynamicLayout}else{return false}}do{if(this._dynamicLayout){var i=this._dynamicLayout;var r=i.prevLayout;if(r){if(!e.skipAttachPrevious){this._attachLayout(r)}this._dynamicLayout=r.isDynamic()?r:null}else{this._dynamicLayout=null}this._disposeLayout(i,{hardDispose:true})}}while(n())},_getLayoutCacheId:function M(t){if(t.controller){return t.controller.config.enableCache?t.controller._layoutId:e.utils.generateUUID()}else{var n=_.chain(t).omit(["child","appendTo","context","animateRender","dashletId"]).keys().sort().value();return JSON.stringify(_.pick(t,n))}},_getRecordLayoutContainer:function A(){return e.isTablet?this.recordLayout:this.rootLayout},_checkAlerts:function C(){var t=e.alert.getAll();_.each(t,function(t,n){if(!t.viewCounter)t.viewCounter=0;t.viewCounter++;if(t.viewCounter>=(e.config.ui.maxAlertsPerLayout||2)){e.alert.dismiss(n)}})},_clean:function R(e){var t=this;var n=function r(e){function n(e,t){if(e.prevLayout===t){return true}else if(e.prevLayout){return n(e.prevLayout,t)}else{return false}}return t._dynamicLayout&&n(t._dynamicLayout,e)};if(e.disposeAll){this.disposeDynamicLayout({disposeAll:true});_.each(this.getLayouts(),function(e){if(e){this._disposeLayout(e,{hardDispose:true})}},this)}var i=[];this.layoutCache.iterate(function(e){if(this.getRootLayout()!==e&&this.getRecordLayout()!==e&&!n(e)){e.dispose();i.push(e)}else{if(_.isFunction(e.clean)){e.clean()}}},this);_.each(i,function(e){this.layoutCache.remove(e)},this)},_handleLayoutFullScreen:function D(t,n){var i;var r;if(!e.isTablet){return}i="show-content-child";r=t.options.def.fullScreen&&this.getLayouts().length>1;if(r){$(document.body).removeClass(i);t._inFullScreen=true}else if(n&&n._inFullScreen){n._inFullScreen=false;$(document.body).addClass(i)}},_getDashboardLayoutParams:function I(t,n){var i=!!t.modelId;var r=!!(t.parentModule&&t.parentModelId);var a;var s;var o;o={module:"Dashboards",name:"detail",dashletId:t.dashletId,dashboardId:t.dashboardId,parentModule:t.parentModule,parentModelId:t.parentModelId};if(r){if(t.parentDashboardId){a={name:"detail",module:"Dashboards",dashboardId:t.parentDashboardId,dashletId:t.parentDashletId}}else{a={name:"list",module:t.parentModule};if(t.linkParentModule){_.extend(a,{link:t.moduleLink,parentModule:t.linkParentModule,parentModelId:t.linkParentModelId,subType:"relationships"})}}}if(i){s={module:t.module,modelId:t.modelId,name:t.action||"detail"};if(t.action==="create"){s.name="edit";s.create=true}}if(e.isTablet){if(i){return n?o:s}else{if(n){return r?a:o}else{return r?o:null}}}else{return n||t.root&&!i?o:s}}},Backbone.Events)})(SUGAR.App)},function(e,t){"use strict";var n=SUGAR.App;var i={_components:[],add:function r(e){if(!_.isFunction(e.onClose)){throw new Error("Unable to register "+e+". Component `onClose` method is missed.")}else{this._components=_.union(this._components,[e])}},remove:function a(e){this._components=_.without(this._components,e)},close:function s(e){if(_.contains(this._components,e)){e.onClose();this.remove(e)}},closeAll:function o(){_.each(this._components,function(e){this.close(e)},this)},hasActiveComponents:function l(){return this._components.length>0},closeRecent:function u(){this.close(_.last(this._components))}};n.augment("activeComponents",i,false)},function(e,t){"use strict";(function(e){var t=e.data.sync;var n=e.data.createBeanCollection;var i=e.data.createMixedBeanCollection;_.extend(e.data,{sync:function r(n,i,a){var s;var o;a.apiOptions=a.apiOptions||{};a.apiOptions.cid=i.cid;a.apiOptions.pageHash=e.navigation.history.getCurrentUrl();a.params=a.params||{};a.query=a.params.q;if(n==="read"){e.offlineEnabled&&(a.params.skipOfflineRead=i.offlineReadDisabled)}if(i instanceof e.BeanCollection&&a.query){s=i.orderBy;i.orderBy=null}if(i instanceof e.MixedBeanCollection&&!_.isEmpty(i.module_list)){delete a.fields}else if(this._isRecentsCollection(i)){a.module_list=e.metadata.getModuleNames({filter:"visible",access:"list"});a.limit=e.config.fetchLimit.recents;delete a.fields}o=t.apply(this,arguments);if(s){i.orderBy=s}return o},_getMergedFields:function a(t){return _.chain(t).map(function(t){return e.metadata.getModule(t).mergedFields}).flatten().uniq().value()},_isRecentsCollection:function s(t){return t instanceof e.BeanCollection&&t.module==="Recents"},createBeanCollection:function o(e,t,i){return this._createCollection(n,arguments)},createMixedBeanCollection:function l(e){return this._createCollection(i,arguments)},_createCollection:function u(e,t){var n=e.apply(this,t);n.cid=_.uniqueId("c");return n}})})(SUGAR.App)},function(e,t,n){"use strict";var i=n(264);var r=SUGAR.App;var a=r.Router;r.Router=r.Router.extend({init:function s(){a.prototype.init.call(this);this.addRoutes(i.getRoutes())},login:function o(){var e=r.controller.layoutManager.getRootLayout(),t=e&&e.name==="login";if(!t){r.controller.clean({disposeAll:true});r.controller.loadScreen({root:"Login"})}},logout:function l(e){e=e==="1";r.logger.debug("Logging out: "+e);r.logout({complete:function t(){r.controller.navigate("#");r.router.login()}},e)},navigate:function u(e,t){r.controller.navigate(e,t)},go:function c(e){},goBack:function d(){r.controller.goBack()},refresh:function f(){r.navigation.manager.refresh()},_routeHandler:function h(e){var t=Array.prototype.slice.call(arguments,1),n=e.route;this._previousFragment=this._currentFragment;this._currentFragment=this.getFragment();e.apply(this,t);r.routing.after(n,t)},_addDefaultRoutes:function p(){}});r.routing.utils={convertExternalRoute:function m(e){if(_.isEmpty(e))return"";if(e==="logout"){return"logout"}if(e==="activities"){return"Activities"}var t=_.reduce(r.navigation.manager.getRoutes(),function(e,t){var n=t.route;if(_.isString(n)&&n.indexOf(":")===-1){e.push(n)}return e},[]);if(_.contains(t,e)){return e}var n=e.split("/"),i=n[0],a,s=["home","search","recents","dashboards"],o=_.contains(s,n[0].toLowerCase()),l=o?n[0]+"/":null;if(i==="bwc"){var u=n[1],c=u.split("?")[1],d=r.nomad.utils.parseQueryString(c);i=d["module"];if(!i)return"";var f=d["action"],h=d["record"];f=f.toLowerCase();if(f==="index"){a=[i]}else if(f==="detailview"&&!_.isEmpty(h)){a=[i,h]}else if(f==="editview"&&_.isEmpty(h)){if(d["parent_type"]&&d["parent_id"]){a=[d["parent_type"],d["parent_id"],"link",i.toLowerCase(),"create"]}else{a=[i,"create"]}}else{a=[i]}}else{a=n}var p=a.length;if(o){if(i==="Dashboards"){return e}else if(i==="Home"&&n.length===2){return e.replace("Home","Dashboards")}else{if(!a[1]||!_.contains(r.metadata.getModuleNames(),a[1])){return n[0].toLowerCase()==="home"?r.nomad.DEFAULT_ROUTE:n[0]}else{a.shift();i=a[0]}}}var m=a[1],g=a[2],v=a[3];function y(){var e=o?l:"";return e+_.toArray(arguments).join("/")}var b=r.metadata.getModule(i),x=(o?l:"")+a.join("/");if(o&&p===2||b&&(g==="Dashboards"||a[5]==="Dashboards")){return x}else if(i==="Offline"){var w=["TxLog","offlineStats","offlineSettings","offlineDataGeneration"];if(e===i||m==="TxLog"&&g||_.contains(w,m)&&a.length===2){return x}return false}else if(i==="Configure"||i.substring(0,10)==="createCall"){return x}else if(m==="offline"&&g==="TxLog"&&!_.isEmpty(v)){return x}else if(i==="error"){if(!m||m&&!g){return x}}else if(i){var L=["vcard-import","create"],S=m==="create";if(S){return y(i,"create")}else if(!_.isEmpty(m)&&!S){if(_.isEmpty(g)&&!_.contains(L,m)){return y(i,m)}else if(_.contains(["duplicate","edit"],g)&&(_.isEmpty(v)||_.isNumber(parseInt(v)))){return x}else if(g==="links"&&_.contains(["create","associate"],v)){return x}}var E=["vcard-import"];if(!_.isEmpty(m)&&_.contains(E,m)){return false}if(g==="link"){var k=a[4],T=a[5];if(!_.isEmpty(v)&&_.isEmpty(k)){return x}else if(v==="calls"&&k.split("?")[0]==="createCall"){return x}else if(k&&_.isEmpty(T)){return x}else if(k&&_.contains(["duplicate","edit"],T)){return x}else{return false}}return i}return false}}},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(263);var a=i.Controller.extend({_screenContext:{},_propagatingData:null,initialize:function s(){i.plugins.attach(this,"view");this.context=i.context.getContext();if(i.isTouchCapable&&i.config.ui.fastClickEnabled){window.FastClick.attach(document.body)}if(!_.isEmpty($.os)){$(document.body).addClass($.os.android?"android":"ios")}this.layoutManager=i.view.NomadLayoutManager.init({rootHolder:i.$contentEl,recordHolder:$("#content-child")});this._initializeNavigation();this._initializeOffline()},_duplicateRecord:function o(e){var t=this,n=e.link,r;var a=this.layoutManager.loadStatic(_.extend(e,{dupe:true,action:"create"}));if(n){var s=i.data.createBean(e.parentModule,{id:e.parentModelId});r=i.data.createRelatedBean(s,e.modelId,n)}else{r=i.data.createBean(e.module,{id:e.modelId})}r.fetch({relate:!!e.link,complete:function o(){var e=t.layoutManager.getRecordLayout();if(e){e.context.get("model").copy(r)}}});return a},_createCall:function l(e){var t=e.callData,n=this.layoutManager.loadStatic(_.extend(e,{action:"create",layoutOptions:{isLoggingCall:t&&t.logCall}}));var r=this.layoutManager.getRecordLayout().getComponent("edit");var a=i.nomad.utils.minutesToQuarterHours(t.durationMinutes);var s=t.durationHours;if(a===60){s=t.durationHours+1;a=0}r.setCallData({direction:t.direction,date_start:t.startDate,duration_hours:String(s),duration_minutes:String(a),status:t.status});return n},loadDynamic:function u(e){var t=this.layoutManager.loadDynamic(e);this._loadData([t]);this._afterLoad(e);return t},disposeDynamic:function c(e){this.layoutManager.disposeDynamicLayout(e)},loadScreen:function d(e){var t;this._beforeLoadStatic(e);if(e.action==="duplicate"){t=this._duplicateRecord(e)}else if(e.action==="createCall"){t=this._createCall(e)}else{if(this._propagatingData){e=_.extend({propagatingData:this._propagatingData},e)}t=this.layoutManager.loadStatic(e)}this._loadData(t);this._afterLoad(e)},getScreenContext:function f(){return this._screenContext},getScreenContextRoot:function h(){var e=this._screenContext.root;var t=this._screenContext;if(e==="Dashboards"){e=[e];if(t.parentDashboardId){e.push(t.parentDashboardId,t.parentDashletId)}else if(t.dashboardId){e.push(this._screenContext.dashboardId);t.dashletId&&e.push(t.dashletId)}e=e.join("/")}return e},onHeaderMenuClick:function p(e){i.nomad.mainMenu.toggleMenu()},onHeaderCancelClick:function m(e){i.controller.goUp()},onUserPictureChange:function g(e){i.nomad.mainMenu._loadUserPicture(e.options.pictureId)},onAssociateViewSave:function v(e){this._handleAfterLinkAction(e.options);i.controller.navigate({initiator:r.RELATE})},onEditViewSave:function y(e){var t={};var n=e.options;var a=n.model;var s=n.parentModel;if(n.isCreate){t={list:{modules:[a.module,"Recents","Search"]}}}else{t={list:{modules:["Search"]},detail:{items:[{module:a.module,modelId:a.get("id")}],loadParams:{partialLoad:true}}}}this.layoutManager.invalidateLayouts(t);if(a.link){this._invalidateAfterLinkAction(a)}var o=i.navigation.history.getPrevStep();if(!i.acl.hasAccessToModel("view",a)){this.layoutManager.invalidateLayouts({detail:[{module:a.module,modelId:a.get("id")}]});this.navigateToDefaultView();return}else if(n.isCreate&&this._screenContext.link&&(!o||this._screenContext.parentModelId===o.screenOptions.modelId)){this._handleAfterLinkAction(n)}i.controller.navigate({contextOptions:{module:a&&a.module,modelId:a&&a.id,parentModule:s&&s.module,parentModelId:s&&s.id,isCreate:n.isCreate},initiator:r.SAVE})},_afterLoad:function b(e){e=e||{};var t=e.layoutDef&&e.layoutDef.isDynamic?e:this._screenContext;i.trigger("app:view:change",_.clone(t))},_beforeLoadStatic:function x(e){this._screenContext=this._createScreenContext(e);if(e.root==="Login"){i.navigation.history.clear()}this._propagatingData=null;var t=i.navigation.history.getCurrentStep();if(e.modelId&&!_.contains([r.UP,r.BACK,r.SAVE],t.initiator)){_.each(this.layoutManager.getLayouts(),function(t){var n=t?t.getDataById(e.modelId):null;if(n){this._propagatingData=n}},this)}},_createScreenContext:function w(e){return i.utils.deepCopy(_.omit(e,"layouts"))},_loadData:function L(e){_.each(e,function(e){var t=e.context.isDataFetched();var n=false;var a=i.navigation.history.getCurrentStep()||{};var s=!_.contains([r.UP,r.BACK],a.initiator);var o={};var l;if(!t||e.isDynamic()){n=true}else if(e.needLoadParams){if(_.isObject(e.needLoadParams)){o=e.needLoadParams}e.needLoadParams=null;o.backgroundSync=true;n=true}else{if(_.contains(["detail","edit"],e.type)){n=s}else if(e.type==="list"){if(i.config.ui.forceListReload){n=true;l=i.offlineEnabled?{forceServerSync:true}:null}else{n=false}}}if(n){o.params=l;this._loadDataWithParams(e,o)}},this)},_loadDataWithParams:function S(e,t){t.params=t.params||{};if(e.name==="detail"||e.name==="edit"){t.params.viewed=true}if(t.partialLoad){e.loadDataPartial(t)}else{e.context.resetLoadFlag();e.loadData(t)}},_initializeNavigation:function E(){i.events.on("data:sync:success",function(e,t,n){var a={};var s=e==="delete";if(s){var o=this.layoutManager.getRootLayout(),l=_.without(["Recents"],o.module),u=o.context.get("parentModel"),c=o.context.get("parentModule");

a={list:{modules:l}};if(t.link){this._invalidateAfterLinkAction(t)}if(!_.isEmpty(u)){this.layoutManager.invalidateLayouts({detail:[{modelId:u.id,module:c}]})}this.layoutManager.invalidateLayouts(a)}var d=this.layoutManager.getRecordLayout();if(s&&d&&d.model.id===t.id){i.controller.navigate({initiator:r.DELETE,contextOptions:{modelId:t.id}})}else{if(s){i.navigation.manager.forbidStep({modelId:t.id})}if(n.params.viewed&&this.getScreenContextRoot()!=="Recents"){this.layoutManager.invalidateLayouts({list:{modules:["Recents"]}})}}},this);i.events.on("data:sync:error",function(e,t,n,r){var a=this._screenContext;if(r&&i.error.isAccessError(r)&&a.action==="edit"&&a.modelId){i.navigation.manager.forbidStep({modelId:t.id})}},this)},_invalidateAfterLinkAction:function k(e){var t={detail:[{modelId:e.link.bean.id,module:e.link.bean.module}]};this.layoutManager.invalidateLayouts(t)},_initializeOffline:function T(){i.events.on("offline:data:updated",function(e){if(e.action==="delete"){this.layoutManager.invalidateLayouts({list:{modules:[e.module,"Recents"]}})}if(e.isCollection){var t=this.layoutManager.getRootLayout();if(t.type!=="list"||t.module!==e.module){this.layoutManager.invalidateLayouts({list:{modules:[e.module]}})}}},this)},_handleAfterLinkAction:function M(e){var t=e.model;var n=e.parentModel;this.layoutManager.invalidateLayouts({list:{modules:[t.module,"Recents"]},detail:[{module:n.module,modelId:n.id}]})},clean:function A(e){e=e||{};this.disposeDynamic({disposeAll:true});i.activeComponents.closeAll();i.overlay.hideAll();if(e.disposeAll&&i.supportedFeatures.dashboards){i.nomad.dashboards.resetCollection()}this.layoutManager._clean(e)},navigate:function C(e,t){if(e instanceof Handlebars.SafeString){e=e.toString()}t=_.isObject(e)?e:_.extend({url:e},t);if(document.activeElement){document.activeElement.blur()}if(!this._isHandledByDynamic(t)){i.navigation.manager.navigate(t)}},navigateToDefaultView:function R(){i.controller.navigate({initiator:r.HOME})},goUp:function D(e){e=e||{};e.initiator=r.UP;this.navigate(e)},go:function I(){},goBack:function O(e){e=e||{};e.initiator=r.BACK;this.navigate(e)},handleBackButton:function N(e){e=e||{};e.initiator=r.BACK_BUTTON;this.navigate(e)},_isHandledByDynamic:function F(e){var t=this.layoutManager.isDynamicLayoutLoaded();var n=i.activeComponents.hasActiveComponents();var a=i.navigation.manager.getHistoryLength()>1;var s=this.layoutManager.isDynamicLayoutLoaded()&&!this.layoutManager.layoutCache.isEmpty();var o=false;switch(e.initiator){case r.BACK:if(t){this.disposeDynamic();o=true}else if(n){i.activeComponents.closeAll()}break;case r.BACK_BUTTON:if(t){this.disposeDynamic();o=true}else if(n){i.activeComponents.closeRecent();o=true}e.initiator=r.BACK;break;case r.UP:if(t){this.disposeDynamic();o=true}break;default:if(t){this.disposeDynamic({skipAttachPrevious:true})}i.activeComponents.closeAll();break}if(t&&o&&!a&&!s){if(i.api.isAuthenticated()){i.navigation.manager.exitApp()}else{o=!_.isEmpty(i.controller.layoutManager.getLayouts())}}return o}});i.augment("NomadController",a,false);e.exports=a},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(253);var s=n(295);var o=n(269);var l=n(250);var u=n(252);var c=window.nomadAppEventHandlerContext={};i.events.on("all",function(e){var t=[];var n=arguments;_.each(i.events._events,function(n,i){var r=i.split(".");if(r.length>1&&r[0]===e){t.push(i)}});if(t.length>0){_.each(t,function(e){n[0]=e;i.events.trigger.apply(i.events,n)})}});i.events.on("app:init",function(){window.clearInterval(i.metadata._validateMDInterval);i.metadata._validateMDInterval=null;i.isBodyScrollRequired=$.os.android&&!i.isTablet;_.extend(i.metadata.fieldTypeMap,{iframe:"url",link:"url",multienum:"multienum",name:"name","double":"float",username:"text",user_name:"text"});_.extend(s.prototype.viewFallbackMap,{view:"readonly",edit:"readonly",about:"readonly",settings:"edit"});i.lang.setCurrentLanguage(i.lang.getLanguage()||"en_us");r.updateServerInfo();r.resetMeta(false,false);r.restoreUser();r.enableOffline();r.initSubpanels();i.data.declareModels();r.updateAuthStore();i.config.sugarLogic=i.config.sugarLogic||{};if(i.config.sugarLogic.enabled&&i.config.sugarLogic.isDynamic)i.loadSugarLogic();r.configureSugarLogic();if(i.isSynced){r.initializeContextMeta()}if(i.isNative&&navigator.splashscreen){_.delay(function(){navigator.splashscreen.hide()},500)}},c).on("nativeMessage",function(e){i.logger.debug("Received native message: "+JSON.stringify(e));if(e.target==="redirect"&&!_.isEmpty(e.path)){i.controller.navigate(e.path)}}).on("app:sync",function(){r._isSyncing=true;i.overlay.show("app:sync",{template:"preloader-panel",label:"LBL_LOADING"})},c).on("app:sync:complete",function(){r._isSyncing=false;r._hasAskedForSync=false;i.logger.debug("Sync complete");i.loginManager.handleSyncComplete();i.hacks.hackModuleList();r.initSubpanels();i.hacks.hackAcls();r.saveUser();r.initializeContextMeta();r.updateAuthStore();i.analytics.init();r.configureSugarLogic()},c).on("app:sync:error",function(e){r._isSyncing=false;r._hasAskedForSync=false;i.logger.debug("Sync failed");if(!(e instanceof SUGAR.Api.HttpError)){var t=_.extend({version:"N/A",flavor:"N/A",minVersion:i.config.minServerVersion,supportedFlavors:i.config.supportedServerFlavors.join(", ")},e.server_info);e=i.lang.get(e.label,null,t)||(_.isString(e)?e:i.lang.get("LBL_MOBILE_META_SYNC_FAILED"));a.showAlert(e,{callback:function n(){i.nomad.dismissAlerts();i.overlay.hide("app:sync",true);i.router.login()},title:i.lang.get("ERR_GENERIC_TITLE")})}else if(e.code!=="invalid_grant"){a.showConfirm(i.lang.get("LBL_MOBILE_META_SYNC_FAILED_RETRY"),{callback:function s(e){i.nomad.dismissAlerts();if(e!==2){i.overlay.hide("app:sync",true);i.router.login()}else{i.nomad.syncApp()}},title:i.lang.get("ERR_GENERIC_TITLE"),buttonLabels:[i.lang.get("LBL_MOBILE_RELOGIN_BUTTON"),i.lang.get("LBL_YES")]})}else{i.overlay.hide("app:sync");i.error.handleInvalidGrantError()}},c).on("offline:encryption:start",function(){i.alert.show("offline_encryption",{level:"info",messages:i.lang.get("LBL_OFFLINE_ENCRYPTION_IN_PROGRESS"),autoClose:false,closable:false})},c).on("offline:encryption:complete",function(e){if(e){i.alert.dismiss("offline_encryption");i.alert.show("offline_error",{level:"error",messages:e.localizedMessage(),autoClose:true})}else{i.alert.show("offline_encryption",{level:"success",messages:i.lang.get("LBL_OFFLINE_ENCRYPTION_SUCCESS"),autoClose:true})}},c).on("app:login:success",function(){i.loginManager.handleLoginSuccess();r.syncApp()},c).on("app:logout",function(){i.alert.dismiss("logout");r.resetMeta(false,true);o.toggleTouchIdOnLogin(false);i.data.declareModels();i.controller.clean({disposeAll:true});_.each(i.additionalComponents,function(e){e.unbindGlobalEvents()});l.stop()}).on("app:start",function(){i.started=true},c).on("offline:failure",function(e){if(e===i.offline.Error.OfflineDisabledError){return}if(e===i.offline.Error.StorageUnavailableError){a.showAlert(e.localizedMessage()+"\n"+i.lang.get("LBL_OFFLINE_DISABLED"))}else if(e===i.offline.Error.OutOfSpaceError){u.cleanUp()}},c).on("app:dashboards:changed",function(){if(!i.api.isAuthenticated()){return}var e=i.lang.get("LBL_DASHBOARDS_CHANGED_PROMPT");i.nomad.dashboards.verifyDefaultView();a.showConfirm(e,{callback:function t(e){if(e===2){i.nomad.dismissAlerts();i.controller.navigateToDefaultView();i.controller.clean();i.nomad.mainMenu.render()}}})},c).on("app:locale:change",function(){i.nomad.setHTMLDirection()},c)},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=i.view.NomadField=r.extendField(i.view.Field,{type:"Text"},{events:{"focusin.base-field input":"_onFocus","touchstart.base-field select":"_onFocus"},initialize:function s(e){if(e.view.name==="view"){e.viewName="readonly"}this._super(e);if(e.view.name==="edit"&&(Boolean(this.def.calculated)&&Boolean(this.def.enforced)||Boolean(this.def.readonly))){e.viewName="readonly"}},_onFocus:function o(){var e={animate:false};i.alert.dismissAll(false,e)},delegateEvents:function l(e){if(_.isFunction(e||this.events)){Backbone.View.prototype.delegateEvents.call(this,e)}else{this._super(e)}},handleValidationError:function u(e){this._displayValidationMessage(e)},_displayValidationMessage:function c(e){var t;var n=[];var r=this.$(".control-group");r.children(".field__error-message").remove();r.removeClass("error");if(e){this.$(".control-group").addClass("error");_.each(e,function(e,t){n.push(i.error.getErrorString(t,e))});t=i.template.get("edit-field-error");r.append(t(n))}i.analytics.trackEvent("validation",this.name)},_render:function d(){this.onBeforeRender();i.view.Field.prototype._render.call(this);this.onAfterRender();this.hasAccess=this.getAccess();return this},_getFallbackTemplate:function f(e){if(e==="disabled"){return"readonly"}else{return i.view.Field.prototype._getFallbackTemplate.apply(this,arguments)}},getAccess:function h(){var e=this.options.def.view||this.options.viewName||(this.view.meta&&this.view.meta.type?this.view.meta.type:this.view.name);var t=e!==this.view.action?this.view.action:e;return i.acl.hasAccessToModel(t,this.model,this.name)},onBeforeRender:function p(){if(this.view.name==="edit"&&this.getAccess()&&!this.isDisabled()){this.action="edit"}},onAfterRender:function m(){},format:function g(e){return this._super(e)},unformat:function v(e){return _.isString(e)?e.trim():e},isDisabled:function y(){return this._super()||this.action==="readonly"},isReadOnly:function b(){return this.tplName==="readonly"},bindDomChange:function x(){if(!(this.model instanceof Backbone.Model))return;var e=this.$el.find(this.fieldTag);e.on("change",_.bind(this.onFieldChange,this));this._$fieldEl=e},onFieldChange:function w(){this.model.set(this.name,this.unformat(this._$fieldEl.val()))},bindDataChange:function L(){if(this.model){this.model.on("change:"+this.name,function(e,t,n){if(n&&n.disableRenderForContext===this.view){return false}this.render()},this)}},setRequired:function S(e){this.def=i.utils.deepCopy(this.def);this.def.required=e;this.render()},isRequired:function E(){return this.def.required},_loadTemplate:function k(){if(this.action==="disabled"){this.action="readonly"}this._super()}},{getOverridableMethods:function T(){return["initialize","onBeforeRender","onAfterRender","format","unformat","isRequired","isReadOnly","onFieldChange"]}});e.exports=a},function(e,t){"use strict";(function(e){var t=1024*1024;var n={set:function s(e,t,n){e[t]=n},push:function o(e,t,n){if(!e[t]){e[t]=[]}e[t].push(n)},pushDocField:function l(e,t,n){e.docFields[n.name]=n}};var i={byType:{name:{dataName:"nameField",action:n.set},fullname:{dataName:"fullNameField",action:n.set},image:{dataName:"imageField",action:n.pushDocField},phone:{dataName:"phoneFields",action:n.push},url:{dataName:"urlFields",action:n.push},email:{ignore:false,dataName:"emailFields",action:n.push},file:{dataName:"docFields",action:n.pushDocField},fieldset:{action:function u(e,t,r){var a=true;_.each(r.fields,function(t){var n=i.byType[t.type];if(n){n.action(e,n.dataName,r);a=false}});if(a)n.push(e,"otherFields",r)}},emailbody:{dataName:"emailbodyFields",action:n.push}},byNameRegEx:{"^(?=.*address)((?!email).)*$":{dataName:"addressFields",action:n.push}},"default":{dataName:"otherFields",action:n.push}};var r=function c(e){var t=null;_.each(i.byNameRegEx,function(n,i){var r=new RegExp(i);if(r.test(e.name)){t=n}});return t};var a=e.data.beanModel;e.NomadBean=e.data.beanModel.extend({initialize:function d(){this.addValidationTask("nomadValidation",_.bind(this._nomadValidator,this));a.prototype.initialize.apply(this,arguments)},_nomadValidator:function f(t,n,i){var r=e.metadata.getModule(this.module).fields;_.each(t,function(e,t){var i=r[t];if(i&&i.type==="image"){if(this._imageRequiredValidator(i,t,this)){n[t]=n[t]||{};n[t].required=true}}},this);i(null,t,n)},_imageRequiredValidator:function h(t,n,i){if(!e.supportedFeatures.fileUpload){return}var r=false;if(t.required){r=_.isEmpty(i.get(n))}return r},getContextMetaData:function p(t,n){var a=i;var s=this;var o={otherFields:[],phoneFields:[],urlFields:[],emailFields:[],addressFields:[],additionalListFields:[],docFields:{},emailbodyFields:[]};_.each(t,function(t,i){var s=a.byType[t.type]||r(t)||(o[a.default.dataName].length<n?a["default"]:null);if(s&&!s.ignore){s.action(o,s.dataName,t)}if(i>0&&i<=e.config.ui.numberOfAdditionalListFields){o.additionalListFields.push(t)}});o.headerField=o.fullNameField||o.nameField;o.subpanels=e.nomad.getSubpanels(this.module);o.hasLinkableSubpanels=e.nomad.hasLinkableSubpanels(o.subpanels);o.hasCreatableSubpanels=e.nomad.hasCreatableSubpanels(o.subpanels);o.listItemTitleField=t[0];o.avatarField=_.find(t,function(t){return t.type==="image"&&t.name==="picture"&&_.contains(e.config.modules.modulesWithAvatars,s.module)});o.addressFieldsGroups=_.groupBy(o.addressFields,function(e){if(e.type==="address"){return e.name}return s.fields[e.name].group});o.actions=this.getAvailableActions(o);return o},getAvailableActions:function m(e){var t={};var n=this._canHaveFiles(e.docFields)||this._canHavePDFs()||this.canHaveAttachments();var i=e.phoneFields.length;var r=[i&&"phone",i&&"message",e.urlFields.length&&"url",_.keys(e.addressFieldsGroups).length&&"map",n&&"doc",e.emailFields.length&&"email",e.emailbodyFields.length&&"emailbody"];_.each(r,function(e){if(e){t[e]=!!e}});return t},getAddresses:function g(t){var n;var i;var r;var a=this;return _.chain(t).map(function(t,s){if(s.lastIndexOf("_c")===s.length-2){s=s.replace("_c","")}r={};_.each(t,function(t,i){var o=a.get(t.name);if(o){n=t.name;n=n.replace(s+"_","");if(n.lastIndexOf("_c")===n.length-2)n=n.replace("_c","");if(t.type==="enum"){var l=e.metadata.getModule(a.module).fields[t.name];var u=e.lang.getAppListStrings(l.options)||{};o=u[o]||o}r[n]=o}});if(_.keys(r).length){i={};var o=e.lang.get("LBL_"+s.toUpperCase(),a.module);i[o]=r;return i}}).compact().value()},getDocuments:function v(t,n){var i=this;this.docsLoading=true;t=_.filter(t,function(t){return e.acl.hasAccessToModel("read",this,t.name)},this);if(this.canHaveAttachments()){var r=this.get("attachment_list");this._createDocData(r,t)}else if(this._canHaveFiles(t)){var a=[];var s=this.get("doc_url");if(_.has(this.fields,"doc_url")&&!_.isEmpty(s)){var o=this.get("filename");if(_.has(this.fields,"doc_type"))o+=" ("+this.get("doc_type")+")";a=this._createDocData([{name:o,uri:s,openExternally:true,nonSugarURL:true}],t,null,{silent:true})}if(n){i._createDocData(n,t,a)}else{this.getFiles({success:function l(e){i._createDocData(e,t,a)},error:function u(t){e.logger.debug("Error creating file url for "+i.module+" : "+t);i.docsLoading=false;i.trigger("docs:ready",a)}},{iframe:false,deleteIfFails:false})}}else if(this._canHavePDFs()){this._createDocData([{name:this.module+".pdf",uri:e.api.serverUrl+"/"+this.module+"/"+this.id+"/pdf",file_mime_type:"application/pdf",filename:this.get("name")+".pdf",oauth:true}],t)}else{this.docsLoading=false;this.trigger("docs:ready",[])}},_createDocData:function y(n,i,r,a){var s=this;var o=_.pluck(i,"name");this.docsLoading=false;a=a||{};r=r||[];function l(t){if(!_.isString(t)||s.module==="Documents")return false;return!e.acl.hasAccessToModel("read",s,t)||!_.contains(o,t)}_.each(n,function(n,a){var o;var u;var c;var d;var f=n.uri||n.file_uri;var h=n["content-length"];var p=n.name||n.document_revision_filename;if(!f||l(a)){return}u=_.find(i,function(e){return e.name===a});c=u?e.lang.get(u.label,s.module):p;if(p&&h){c+=" ("+s._fileSizeFormat(n["content-length"])+")";if(h>t)n.openExternally=true}if(p&&!n.nonSugarURL){d=f.split(/rest\/v\d*\//)[1];f=e.api.serverUrl+"/"+d+"?platform="+e.config.platform;if(e.nomad.isDownloadTokenSupported()){if(!n.oauth){f+="&download_token={download_token}"}}else{f+="&oauth_token={oauth_token}"}}o={};o[c]={url:f,openExternally:n.openExternally||false,isImage:u&&u.type==="image",file_mime_type:n.file_mime_type||this.get("file_mime_type")||n["content-type"]||"",filename:n.filename||this.get("filename")||n.name||"",oauth:n.oauth};r.push(o)},this);if(!a.silent)this.trigger("docs:ready",r);return r},_fileSizeFormat:function b(t){return t<=0?"0":""+e.nomad.utils.humanFileSize(t)},_canHaveFiles:function x(t){var n=e.config.modules.modulesWithFiles||[];return!_.isEmpty(t)||_.contains(n,this.module)||_.has(this.fields,"doc_url")},_canHavePDFs:function w(){var t=e.config.modules.modulesWithPDFs||[];return _.contains(t,this.module)},getFieldsDataArray:function L(t,n){var i;var r;var a;var s;var o=[];var l=this;var u;var c;_.each(t,function(t){s={};r=l.get(t.name);c=t.name;a=e.metadata.getModule(l.module).fields[c];if(r&&(_.isUndefined(n)||r.match(n))){u=t.label||a.label||a.vname||c;i=e.lang.get(u,l.module);s[i]=r;o.push(s)}});return o},getAccessibleFields:function S(t,n){n=n||"read";var i=this;t=_.filter(t,function(t){return e.acl.hasAccessToModel(n,i,t.name)});return t||[]},getAccessibleFieldsGroups:function E(e,t){var n={};var i=this;_.each(e,function(e,r){e=i.getAccessibleFields(e,t);if(e.length){n[r]=e}});return n},isDataDefined:function k(e,t){return _.any(e,function(e){var n=this.get(e.name);return t?_.isString(n)&&n.match(t):n},this)},hasActiveEmail:function T(e){return _.any(e,function(e){return _.any(this.get(e.name),function(e){return!Number(e.invalid_email)&&!Number(e.opt_out)})},this)},hasDeleteAccess:function M(){if(e.acl.hasAccessToModel("delete",this)&&!_.contains(e.config.modules.nonDeletableModules,this.module)){return!(e.serverInfo.isSevenUp&&(this.get("closed_revenue_line_items")||_.find(e.config.modules.nonDeletableSalesStages,function(e){return e===this.get("sales_status")||e===this.get("sales_stage")},this)))}},hasUnlinkAccess:function A(t,n){if(n.relationship_type==="many-to-many"){return true}if(!_.isEmpty(t)){return!_.find(t,function(t){return!e.acl.hasAccessToModel("edit",this,t.name)},this)}else if(n.via_parent_id){return e.acl.hasAccessToModel("edit",this,n.relationship_role_column)}else{return true}},changeCurrencyId:function C(t,n){n=n||{};var i=this.get("currency_id")||t;var r={};var a=n.silentField||{};_.each(this.fields,function(n,a){if(n.type!=="currency")return;var s=this.get(a);if(!!s){var o=e.currency.convertAmount(s,i,t);this.set(a,o,{silent:true})}r[a]=true},this);this.set("currency_id",t,{silent:true});if(!n.silent){_.each(r,function(e,t){if(a===t){return false}this.trigger("change:"+t)},this)}},getChangeDiff:function R(e,t){var n={};e=e||{};t=t||[];_.each(this.attributes,function(i,r){if(_.contains(t,r))return;var a=e[r];if(!_.isEqual(a,i)){n[r]=a}});return n},save:function D(e,t){t=t||{};t.lastModified=this.get("date_modified");return a.prototype.save.call(this,e,t)},uploadFile:function I(t,n,i,r){i=i||{};r=r||{};r.iframe=false;var a=this;r.deleteIfFails=!!r.isCreate;return e.api.file("create",{id:this.id,module:this.module,field:t},n,{success:function s(e,n,r){var s=e[t];if(s){a._onFileChange(e,t);if(i.success){i.success(e)}}else{var o=new SUGAR.Api.HttpError({xhr:r});o.responseText=e.xhr?e.xhr.message:o.responseText;if(i.error)i.error(o)}},error:function o(e){e.isFileUploadError=true;i.error.call(this,e)}},r)},deleteFile:function O(t,n,i,r){var a=this;var s;r=r||{};s={success:function o(e){a._onFileChange(e,t);if(i.success){i.success(e)}},error:function l(e){e.isFileUploadError=true;if(i.error){i.error(e)}}};return e.api.file("delete",{module:this.module,id:this.id,field:t},null,s,r)},_onFileChange:function N(e,t){this.set(t,e[t].name);if(e.record){this.set("date_modified",e.record.date_modified)}else{this._docsUpdated=true}},isCloseActionAvailable:function F(){var t=this.get("status");var n=e.nomad.utils.getClosedStatusValue(this.module);var i=n===t;return n&&!i&&e.acl.hasAccessToModel("edit",this,"status")&&!_.contains(e.config.modules.nonEditableModules,this.module)},copy:function B(e,t,n){_.each(this._defaults,function(e,t){this.set(t,"")},this);a.prototype.copy.call(this,e,t,n);this._unsetByDef();this._unsetByACL()},_unsetByDef:function P(){var t=this.get("email1");function n(e){if(_.isString(e)){this.unset(e)}else{_.each(this.attributes,function(t,n){if(e.test(n)){this.unset(n)}},this)}}_.each(e.NomadBean._getDoNotCopyFields(this.module),function(e){n.call(this,e)},this);var i=e.metadata.getModule(this.module);var r=i?i.fields:null;var a=_.chain(r).filter(function(t){return _.contains(e.NomadBean._doNotCopyFieldTypes,t.type)}).pluck("name").value();_.each(a,function(e){n.call(this,e)},this);if(t){this.set("email1",t)}},_unsetByACL:function U(){var t=_.getNested(e.metadata.getView(this.module,"edit"),"panels.0.fields");var n=e.metadata.getModule(this.module).fields||{};_.each(this.toJSON(),function(i,r){var a;var s;_.find(t,function(e){if(e.name===r){a=e}else if(e.fields){a=_.findWhere(e.fields,{name:r})}return a},this);s=a&&!_.isUndefined(a.readonly)?a.readonly:n[r].readonly;if(!e.acl.hasAccessToModel("edit",this,r)||s){this.unset(r)}},this)}},{_doNotCopyFieldNames:{All:["created_by","created_by_name","modified_by_name","modified_user_id","date_entered","date_modified","my_favorite","deleted",/^email([^_]|_(?!c$|reminder))+$/],Employees:["user_name","user_hash","system_generated_password","pwd_last_changed","authenticate_id","sugar_login","is_admin","picture","status"],Calls:["status"],Contacts:["portal_active","portal_app","portal_name","portal_password","portal_password1"],Notes:["contact_email","contact_phone","file_mime_type","file_url"],Tasks:["contact_email","contact_phone","status"],Meetings:["status"],RevenueLineItems:["quote_id","quote_name"],Opportunities:["closed_revenue_line_items"]},_doNotCopyFieldTypes:["file","password","image"],_getDoNotCopyFields:function(){var t=null;e.events.on("app:sync:complete",function(){t=null});var n={"7.0":{"ENT, ULT":{Opportunities:["amount","date_closed"]}}};function i(t,i){var r=_.find(n,function(n,r){if(!e.utils.versionCompare(i,r,">="))return false;var a=_.find(n,function(e,n){var i=n.split(/,\s*/);return _.contains(i,t)});return a});return r&&_.values(r)[0]}function r(){if(t!==null){return t}var n=e.metadata.getServerInfo();var r=n.flavor;var a=n.version;var s=e.NomadBean._doNotCopyFieldNames;var o=i(r,a);t=e.nomad.utils.merge(s,o,function(e,t){return _.union(e,t)});return t}return function(e){var t=r();var n=t.All;var i=t[e];if(i){n=_.union(n,i)}return n}}()});e.data.beanModel=e.NomadBean})(SUGAR.App)},function(e,t){"use strict";(function(e){var t=e.alert.show;var n={};e.events.on("offline:status:update",function(e){if(!e.noConnection){n={}}});e.events.on("app:view:change",function(e){if(e.layoutDef&&e.layoutDef.isDynamic)return;var t=!!(e.dashboardId&&e.dashletId&&!e.modelId);$(document.body).toggleClass("has-pagination",t)});e.alert.show=function(i,r){r=r||{};if(r.pageHash&&r.pageHash!==window.location.hash){return}if(r.uid&&e.offlineEnabled){var a=r.requestOptions?r.requestOptions.params:{};if(!a.skipOfflineRead&&n[r.uid]){return}n[r.uid]=1}return t.apply(this,arguments)}})(SUGAR.App)},function(e,t){"use strict";var n=SUGAR.App;var i={};var r={triggerViewSync:function a(e,t,n,r){_.each(i,function(i){if(this.shouldSync(i,e)){i.receiveSyncData(t,n,r)}},this)},shouldSync:function s(e,t){return e!==t},registerView:function o(e){i[e.cid]=e},unregisterView:function l(e){delete i[e.cid]},_getSyncableViews:function u(){return i},_reset:function c(){i={}}};e.exports=n.syncableViewsManager=r},function(e,t){"use strict";var n=SUGAR.App;e.exports=n.nomad.dashboards={_started:false,_cacheKey:"dashboards",_dashletTypeRegistry:{},isStarted:function i(){return this._started},reset:function r(){this._started=false},resetCollection:function a(){if(this.collection){this.collection.reset()}},start:function s(){this._started=true;this.cacheDashletStore=n.nomad.stores.dashlets;this.initCollection()},initCollection:function o(){var e=this.getCachedDashboards()||[];this.collection=this.collection||n.data.createBeanCollection("Dashboards");this.collection.reset(e,{silent:true})},fetchDashboards:function l(e,t){var i=this;async.waterfall([_.bind(i._fetchDashboards,i),_.bind(i._fetchDashboardMeta,i)],function(r,a){if(r){n.logger.debug("Error while fetching dashboards"+r)}else{i._processFetchResults(a,e)}t&&t(r)})},_fetchDashboards:function u(e){var t=this;var i=_.map(n.metadata.getModuleNames(),function(e){return n.nomad.buildBulkRequest({module:"Dashboards/"+e,limit:-1,params:{view_name:"record"}})});i.push(n.nomad.buildBulkRequest({module:"Dashboards"}));n.api.bulk({requests:i},{success:function r(n){e(null,t._getSuccessfullResponses(n))},error:e})},_fetchDashboardMeta:function c(e,t){var i=this;var r=_.map(e,function(e){return n.nomad.buildBulkRequest({module:"Dashboards",attributes:{id:e.id}})});n.api.bulk({requests:r},{success:function a(e){t(null,i._getSuccessfullResponses(e))},error:t})},_processFetchResults:function d(e,t){var i=this.collection.toJSON();t=t||{};e=_.filter(e,function(e){var t=e.metadata;this.adjustDashboardMetadata(t);return!_.isEmpty(t.dashlets)},this);this._cacheDashboards(e);this.cleanUnusedDashletsCache();this.collection.reset(e,{silent:true});if(t.notifyIfChanged&&this._isAnyDashboardChanged(i,e)){n.events.trigger("app:dashboards:changed")}},getDashboards:function f(e){var t;if(!this._started){return[]}t=this.collection.models;if(e){switch(e.type){case"home":t=_.filter(t,function(e){return e.get("dashboard_module")==="Home"});break;case"detail":t=_.filter(t,function(e){return e.get("dashboard_module")!=="Home"});break}if(e.module){t=_.filter(t,function(t){return t.get("dashboard_module")===e.module})}}return t},getDashboard:function h(e){return this.collection.get(e)},adjustDashboardMetadata:function p(e){var t=this;e.dashlets=[];_.each(e.components,function(i){_.each(i.rows,function(i){_.each(i,function(i){var r=i.view;var a;if(!r){return}a=_.values(r).join("");i.id=String(Math.abs(n.nomad.utils.getHashCode(a)));e.dashlets.push(i);t._normalizeDashletMeta(i)})})});e.components=null;this.cleanDashlets(e.dashlets)},cleanDashlets:function m(e){var t;var n=[];for(t=e.length-1;t>-1;t--){if(!_.contains(n,e[t].id)&&this.canCreateDashlet(e[t])){n.push(e[t].id)}else{e.splice(t,1)}}},canCreateDashlet:function g(e){var t=false;var i=this._getDashletType(e);if(this.isDashletSupported(e)){if(i==="tabbed-dashlet"){var r=n.metadata.getView(null,e.view.type);t=Boolean(r)&&_.any(r.tabs,function(e){return n.nomad.utils.isAccessibleModule(e.module,"list")})}else if(i==="dashablelist"){t=n.nomad.utils.isAccessibleModule(e.view.module,"list")}else if(i==="casessummary"){t=n.nomad.utils.isAccessibleModule("Cases","list")}else{t=true}}return t},isDashletSupported:function v(e){var t=this._getDashletType(e);var i=n.config.dashboards.dashlets[t];var r=this._dashletTypeRegistry[t];return r||i&&n.utils.versionCompare(n.serverInfo.version,i.minServerVersion,">=")},_normalizeDashletMeta:function y(e){var t=e.view;if(!t.module&&e.context&&e.context.module){t.module=e.context.module}if(!t.type&&t.name){t.type=t.name}},getDashboardDashlets:function b(e){var t=this.getDashboard(e);return t.get("metadata").dashlets},isDashletAvailable:function x(e,t){return _.chain(this.getDashboardDashlets(e)).pluck("id").contains(t).value()},getDashletTitle:function w(e){var t=e||{};var i=e.type;var r;var a=_.isFunction(e.type)?e.type:this._dashletTypeRegistry[e.type];if(a){r=a.prototype.getTitle(e)}else{r=e.label}var s=e.module;if(i==="dashablelist"){t={module:n.lang.getAppListStrings("moduleList")[s]||s}}else if(i==="bubblechart"&&!s){s=n.nomad.utils.getForecastModule()}return n.lang.get(r,s,t)},getDashletConfig:function L(e,t){var n=_.find(this.getDashboardDashlets(e)||[],function(e){return e.id.toString()===t});return n},_cacheDashboards:function S(e){n.cache.set(this._cacheKey,e)},getCachedDashboards:function E(){return n.cache.get(this._cacheKey)},verifyDefaultView:function k(){var e=n.loginManager.getSetting("default_view");if(!e){return}var t=e.split(":");var i=t[0]==="Dashboards"&&t[1];var r;var a;var s=true;if(i){a=!!this.getDashboard(i);r=t[2];s=a&&(r?this.isDashletAvailable(i,r):true);if(!s){n.loginManager.removeSetting("default_view")}}},cleanDashboardsCache:function T(e){n.cache.cut(this._cacheKey)},cleanDashletsCache:function M(e){e=e||function(){};this.cacheDashletStore.cutAll(e)},cleanUnusedDashletsCache:function A(e){var t=this;this.cacheDashletStore.getAll(function n(i,r){if(i){return e(i)}var a=[];var s=[];t.collection.each(function(e){var t=e.get("metadata");_.each(t.dashlets,function(e){if(!_.contains(a,e.id)){a.push(e.id)}})});_.each(r,function(e,n){if(!_.contains(a,n)){s.push(function(e){t.cacheDashletStore.cut(n,e)})}});async.parallel(s,e)})},_getDashletType:function C(e){var t=n.metadata.getView(null,e.view.type);return t&&t.tabs?"tabbed-dashlet":e.view.type},_isAnyDashboardChanged:function R(e,t){t=t||[];return e.length!==t.length||_.any(e,function(e){return!_.any(t,function(t){return e.id===t.id&&e.date_modified===t.date_modified},this)},this)},_getSuccessfullResponses:function D(e){var t=[];_.each(e,function(e){if(e.status===200){if(e.contents.records){t.push.apply(t,e.contents.records)}else if(e.contents&&e.contents.metadata){t.push(e.contents)}}});return t},registerDashlet:function I(e,t){this._dashletTypeRegistry[e]=t},getDashletTypeRegistry:function O(){return this._dashletTypeRegistry}}},function(e,t,n){"use strict";(function(e){var t=n(253);var i={INTERNET_UNAVAILABLE:-1,CONNECTION_FAILED:-2,CONNECTION_TIMEOUT:-3,INVALID_CREDENTIALS:-4};function r(){e.router.login()}var a=e.error.handleStatusCodesFallback;var s=e.error.enableOnError;var o=e.error.handleUnhandledError;e.error.statusCodes["200"]=e.error.statusCodes["0"];e.error=_.extend(e.error,{enableOnError:function l(){if(e.config.raven&&e.config.raven.enabled){return true}return s.apply(this,arguments)},_alertUnauthorized:function u(){e.alert.show("auth_error",{level:"error",messages:e.lang.get("ERR_MOBILE_NOT_AUTHORIZED"),autoClose:true})},_alertSystemError:function c(t){var n=t.status||t.status===0?t.status.toString():"N/A";var i;if(t instanceof e.offline.Error){i=t.localizedMessage()}else{i=e.lang.get("ERR_MOBILE_INTERNAL").replace("{{{code}}}",n)}e.alert.show("system_error",{level:"error",messages:i,autoClose:true,uid:"ERR_MOBILE_INTERNAL_"+n,pageHash:t.request?t.request.params.pageHash:null})},handleNeedLoginError:function d(){e.alert.show("auth_error",{level:"error",messages:e.lang.get("ERR_MOBILE_INVALID_CREDS"),autoClose:true});r();this._sendAnalytics(i.INVALID_CREDENTIALS)},handleInvalidGrantError:function f(){e.alert.show("auth_error",{level:"error",messages:e.lang.get("ERR_MOBILE_SESSION_EXPIRED"),autoClose:true});r()},handleUnhandledError:function h(t,n,i){try{this.logFatalError(t,{url:n,line:i,version:e.nomad.getProductVersion(),serverVersion:e.nomad.getServerVersion(),serverUrl:e.nomad.getServerUrl(),clientInfo:e.clientInfo})}catch(r){}},logFatalError:function p(t,n){try{var i=e.config.env==="prod";t=t||"Unknown error";e.logger.fatal(t+"\n"+JSON.stringify(n));t=i?e.lang.get("ERR_INTERNAL_ERR_MSG"):"FATAL: "+t;e.alert.show("system_error",{level:"error",messages:t,autoClose:true});e.analytics.trackEvent("device","exception")}catch(r){}},handleUnauthorizedError:function m(){this._alertUnauthorized();r()},handleForbiddenError:function g(e){this._alertUnauthorized();this._sendAnalytics(e.status)},handleNotFoundError:function v(t){e.alert.show("not_found_error",{level:"error",messages:this._adjustErrorMessage("ERR_MOBILE_NOT_FOUND",t),autoClose:true});this._sendAnalytics(t.status)},handleTimeoutError:function y(t){e.alert.show("system_error",{level:"error",messages:this._adjustErrorMessage("ERR_MOBILE_TIMEOUT",t),autoClose:true,uid:"ERR_MOBILE_TIMEOUT",pageHash:t.request.params.pageHash});this._sendAnalytics(i.CONNECTION_TIMEOUT)},handleMethodConflictError:function b(e){this._sendAnalytics(e.status)},handleStatusCodesFallback:function x(n,s,o){var l;var u=n.status;e.alert.dismissAll({animate:false});if(_.isUndefined(n.status)){if(n===e.offline.Error.OutOfSpaceError){e.alert.show("offline_error",{level:"error",messages:n.localizedMessage(),autoClose:true})}return}var c;if(n.status=="0"&&(n.textStatus==="error"||n.textStatus==="abort")&&_.isEmpty(n.errorThrown)){
if(!e.nomad.isOnline()){l="Device is offline";u=i.INTERNET_UNAVAILABLE}else{l="Server is unreachable. "+(navigator.connection?"Connection: "+navigator.connection.type:"");u=i.CONNECTION_FAILED}e.alert.show("network_error",this.prepareNetworkAlertParams(n,o))}else if(n.status=="412"){if(e.nomad._isSyncing||e.nomad._hasAskedForSync)return;e.nomad._hasAskedForSync=true;t.showConfirm(e.lang.get("ERR_MOBILE_METADATA_CHANGED_RELOAD"),{callback:function f(t){e.nomad.dismissAlerts();if(t===2){if(document.activeElement)document.activeElement.blur();e.controller.clean({disposeAll:true});e.nomad.syncApp()}else{e.nomad._hasAskedForSync=false;e.alert.show("meta_error",{level:"error",messages:e.lang.get("ERR_MOBILE_METADATA_CHANGED"),autoClose:true})}}})}else if(n.status=="422"&&n.message&&(c=n.message.match(/^(.*) is an invalid email address$/))){e.alert.show("meta_error",{level:"error",messages:e.lang.get("ERROR_EMAIL",null,{email:c[1]}),autoClose:false})}else if(n.status=="433"){if(e.config.scheme==="rebrand"){e.alert.show("incompatible_client",{level:"error",messages:e.lang.get("ERR_MOBILE_INCOMPATIBLE_REBRAND_CLIENT_VERSION",null,{brandName:e.config.brandName}),autoClose:false})}else{t.showConfirm(e.lang.get("ERR_MOBILE_INCOMPATIBLE_CLIENT_VERSION",null,{brandName:e.config.brandName}),{callback:function h(t){e.nomad.dismissAlerts();if(t===2){e.nomad.openAppStore()}r()}})}}else{this._alertSystemError(n);if(n.status=="400")r()}var d=!_.contains([0,433,412],n.status);if(d||!d&&e.logger.levels[e.config.logger.level].value<=e.logger.levels.DEBUG.value){if(l)e.logger.error(l);a(n);this._logRequestUrl(n)}this._sendAnalytics(u)},handleNotSupportedPlatform:function w(){window.location.replace("error-not-supported-platform.html?desktop_url="+e.nomad.getDesktopUrl())},handleExternalLoginNotAvailable:function L(){e.alert.show("sso_error",{level:"error",messages:e.lang.get("ERR_MOBILE_SSO_NOT_CONFIGURED"),autoClose:true})},isAccessError:function S(e){return _.contains([403,404],e.status)},prepareNetworkAlertParams:function E(t,n){var i;var r=e.nomad.isOnline()?this._adjustErrorMessage("ERR_MOBILE_CONNECTION_FAILED",t):e.lang.get("ERR_MOBILE_INTERNET_UNAVAILABLE");i={level:"error",messages:r,autoClose:true,pageHash:t.request.params.pageHash,requestOptions:n};if(!t.isFileUploadError){i.uid="ERR_MOBILE_CONNECTION_FAILED"}return i},_sendAnalytics:function k(t){t=t||"unknown";e.analytics.trackEvent("api-error",t)},_adjustErrorMessage:function T(t,n){var i=n&&n.request&&n.request.params?e.api.isLoginRequest(n.request.params.url):false;if(i)t+="_LOGIN";return e.lang.get(t,null,{brandName:e.config.brandName,minVersion:e.config.minServerVersion,supportedFlavors:e.config.supportedServerFlavors.join(", ")})},_logRequestUrl:function M(t){if(t.request&&t.request.params&&t.request.params.url)e.logger.error("URL of failed request: "+t.request.params.url)}});e.error.statusCodes["422"]=e.error.handleStatusCodesFallback})(SUGAR.App)},function(e,t,n){"use strict";var i=n(251);(function(t){var n={DIMENSIONS:{offlineMode:1,connection:2,sugarInstance:3},METRICS:{},initialized:false,trackEventSplitter:/^(.*):([\-\w]+)\.?(\S+)?$/,currentViewId:"",loginProcessed:true,init:function i(){if(t.config.analytics.enabled){t.nomad.loadAnalytics()}if(t.config.analytics.enabled&&typeof Analytics!=="undefined"&&Analytics){if(this.initialized)return;this.initialize();this._attachAnalytics();var e=t.config.analytics.id;e=_.isObject(e)?t.isNative?e.native:e.web:e;analytics.start(e,t.config.analytics);t.logger.debug("Analytics enabled - "+e)}else{t.events.off(null,null,this);this.initialized=false;t.logger.debug("Analytics disabled")}},processConfig:function r(e){var n={};if(e.analytics&&!t.isNative){n.analytics=_.extend({},t.config.analytics,{enabled:Boolean(e.analytics.enabled)})}return n},initialize:function a(){t.events.on("app:view:change",function(e){var t={module:"",layoutType:"",track:"",link:e.link};if(e.action){this._handleGAForActions(e,t)}else if(e.parentModelId){this._handleGAForParentModule(e,t)}else if(e.root){this._handleGAForRootModules(e,t)}else if(e.layoutDef){this._handleGAForLayout(e,t)}else{t.layoutType=e.modelId?"detail":"list";t.module=e.module||e.parentModule||e.root}this._buildViewIdAndTrack(t)},this).on("app:start",function(){if(t.api.isAuthenticated()){this._trackServerInstance(t.config.siteUrl)}},this).on("app:login:success",function(){if(!_.isEmpty(t.serverInfo.version)){t.analytics.trackEvent("login",t.serverInfo.version);t.analytics.loginProcessed=true}else{t.analytics.loginProcessed=false}t.analytics.trackEvent("useHttps",t.loginManager.getSetting("useHttps")?"enabled":"disabled");this._trackServerInstance(t.config.siteUrl)},this).on("app:sync:complete",function(){if(!t.analytics.loginProcessed){t.analytics.trackEvent("login",t.serverInfo.version);t.analytics.loginProcessed=true}},this).on("app:logout",function(){t.analytics.loginProcessed=false},this).on("offline:toggled",function(e){t.analytics.setDimension(t.analytics.DIMENSIONS.offlineMode,e?"enabled":"disabled")},this).on("offline:failure",function(e){t.analytics.trackEvent("offline-failure",e.code)},this).on("offline:encryption:complete",function(e){t.analytics.trackEvent("storage-encryption",e?"failed":"success")},this).on("offline:tx:create",function(e){t.analytics.trackEvent("tx-create",t.offline.utils.actionToSymbol(e.txOptions))},this).on("offline:tx:success",function(e){t.analytics.trackEvent("tx-success",t.offline.utils.actionToSymbol(e.tx),t.offline.utils.getTxAge(e.tx))},this).on("offline:tx:error",function(e){t.analytics.trackEvent("tx-error",e.errorCode||"unknown",t.offline.utils.getTxAge(e.tx),t.offline.utils.actionToSymbol(e.tx))},this).on("offline:tx:rollback",function(e){t.analytics.trackEvent("tx-rollback",t.offline.utils.actionToSymbol(e.tx),t.offline.utils.getTxAge(e.tx))},this).on("offline:wins:completed",function(e){t.analytics.trackEvent("offline:wins","synced",e.syncedRecords,"numRecords")});this.initialized=true},onAppPause:function s(e){this.trackEvent("device","pause")},onAppResume:function o(){this.trackEvent("device","resume")},_handleGAForParentModule:function l(e,t){t.module=e.parentModule;if(e.modelId){t.layoutType="details"}else if(e.dashletId){this._handleGAForDashlets(e,t)}else{t.layoutType="relationships"}},_handleGAForRootModules:function u(e,n){switch(e.root){case"Login":n.layoutType=e.root.toLowerCase();n.module=e.root;n.track="create";break;case"About":case"Settings":n.layoutType=e.root.toLowerCase();n.module=t.utils.capitalize(e.root);n.track="create";break;case"Offline":switch(e.module){case"TxLog":n.layoutType=e.modelId?"detail":"list";n.module=e.module;break;case"offlineStats":n.layoutType=e.module;n.module=e.root;n.track="create";break;default:n.layoutType=e.root.toLowerCase();n.module=e.root;n.track="create";break}break;case"Search":case"Recents":if(e.module&&e.modelId){n.layoutType="detail";n.module=e.module}else{n.layoutType="list";n.module=e.root}break;case"Dashboards":if(e.dashletId){this._handleGAForDashlets(e,n)}else{n.layoutType="dashboard"}break}},_handleGAForActions:function c(e,n){switch(e.action){case"duplicate":n.layoutType="edit";n.track="duplicate";break;case"associate":n.layoutType=e.action;n.module=t.data.getRelatedModule(e.parentModule,e.link);n.track=e.parentModule;break;default:n.layoutType=e.action?e.action:"detail";break}if(e.action==="create"&&e.parentModelId){n.layoutType="edit";n.module=e.parentModule;n.track=e.link;n.link="create"}if(!n.module){n.module=e.module||e.parentModule}},_handleGAForLayout:function d(e,n){var i=e.layoutDef.gaTrack;if(i==="teamset"){n.layoutType="multienum";n.module=t.controller.getScreenContext().module;n.track="teamset"}else if(i==="textarea"){n.layoutType=i;n.module=e.layoutDef.context.get("parentModel")?e.layoutDef.context.get("parentModel").module:null}else{n.layoutType=i;n.module=t.controller.getScreenContext().module;if(i==="relate"||i==="parent-list"){n.track=e.layoutDef.context.attributes.module}else if(i==="about"){n.module="Login"}}},_handleGAForDashlets:function f(e,n){var i=t.nomad.dashboards.getDashletConfig(e.dashboardId,e.dashletId).view;var r=e.root==="Dashboards";n.layoutType=r?"dashlet":"record-dashlet";if(i.template==="tabbed-dashlet"){n.layoutType="";n.module=""}else if(i.type==="dashablelist"){n.module=r?"list":e.parentModule;n.track=r?i.module:"list";n.link=r?n.link:i.module}else{n.module=r?i.type:e.parentModule;n.track=r?"":i.type}},_buildViewIdAndTrack:function h(e){var t=_.compact([e.layoutType,e.module,e.track,e.link]).join("/");if(!_.isEmpty(t)){this.setActiveView(t)}},setActiveView:function p(e,t){this.currentViewId=e;if(!t){this.trackPageView(e)}},trackPageView:function m(e){if(!this.initialized)return;t.logger.debug("GAN-page: "+e);if(t.offlineEnabled){this.setDimension(this.DIMENSIONS.connection,t.offline.status.noConnection?"offline":"online")}analytics.trackPageView(e)},trackEvent:function g(e,n,i,r){if(!this.initialized)return;n=""+(n||"[unknown]");r=_.isUndefined(r)?this.currentViewId:r;t.logger.debug("GAN-event: "+e+":"+n+"("+i+")"+" for "+r);analytics.trackEvent({category:e,action:n,label:r,value:i})},startSession:function v(){if(!this.initialized)return;analytics.startSession()},setDimension:function y(e,t){if(!this.initialized)return;analytics.setDimension({index:e,value:t})},setMetric:function b(e,t){if(!this.initialized)return;analytics.setMetric({index:e,value:t})},_attachAnalytics:function x(){document.addEventListener("click",this._trackListener,true);document.addEventListener("swipeLeft",this._trackListener,true);document.addEventListener("swipeRight",this._trackListener,true)},_detachAnalytics:function w(){document.removeEventListener("click",this._trackListener,true);document.removeEventListener("swipeLeft",this._trackListener,true);document.removeEventListener("swipeRight",this._trackListener,true)},_trackListener:function L(e){var n;if(e.path){n=e.path}else{n=$(e.target).parents();n.push(e.target)}_.each(n,function(n){var i=$(n);var r=i.attr("track");if(!r)return;var a=r.match(t.analytics.trackEventSplitter);var s=a[1].indexOf(e.type)+1;if(!s)return;var o=a[2]||n.id;var l=a[3]||"";t.analytics.trackEvent(e.type,o,l&&i.hasClass(l)?1:0)})},_trackServerInstance:function S(e){if(t.config.analytics.instanceTracking){t.analytics.setDimension(t.analytics.DIMENSIONS.sugarInstance,this._instanceKeyFromUrlWhitelist(e))}},_instanceKeyFromUrlWhitelist:function E(e){var n=_.find(t.config.analytics.serverUrlWhiteList||[],function(t){var n=new RegExp(t,"i");return n.test(e)});if(t.config.analytics.instanceUrlTracking){n=t.loginManager.getSetting("loginUrl")}return n?n:"others"},dispose:function k(){t.events.off(null,null,n);this.initialized=false}};t.augment("analytics",n,false);e.exports=n})(SUGAR.App)},function(e,t,n){"use strict";(function(e){var t=n(253);var i=n(258);e.events.on("nativeMessage",function(e){if(e.target==="telephony"){r.callStateChanged(e.calls)}});var r={CALL_STATE:{IDLE:"IDLE",DIALING:"DIALING",CONNECTED:"CONNECTED"},_callModule:"Calls",getCallLog:function a(){return e.nomad.getSetting("callLog")},setCallLog:function s(t){if(t&&t.recordId&&t.recordName){e.nomad.setSetting("callLog",t)}else{e.nomad.removeSetting("callLog")}},clearCallLog:function o(){e.nomad.removeSetting("callLog")},callPhone:function l(t,n){var r={phone:t,module:n.module,recordId:n.recordId,recordName:n.recordName};this.setCallLog(r);if(!e.isNative){this.bindCallEnd()}if(!$.os.phone){r.started=true;r.startedOn=(new Date).getTime()}e.logger.debug("Initiating a phone call to "+t);i._callPhone(t)},callStateChanged:function u(t){var n=this.getCallLog();if(t.length===0){if(n){n.endedOn=(new Date).getTime();e.logger.debug("End call: "+n.id+":"+n.state);this.setCallLog(n);this.onAppResume()}return}e.logger.debug("Call state changed: "+t.length);var i=t[0];e.logger.debug("First call: "+i.id+":"+i.state);if(n){if(i.state===this.CALL_STATE.DIALING){n.id=i.id;n.state=i.state;n.direction="Outbound";n.startedOn=(new Date).getTime();n.started=true;this.setCallLog(n)}else if(i.state===this.CALL_STATE.IDLE){n.id=i.id;n.state=i.state;n.endedOn=(new Date).getTime();this.setCallLog(n)}else if(i.state===this.CALL_STATE.CONNECTED){n.state=i.state;this.setCallLog(n)}}},onAppPause:function c(){},onAppResume:function d(){if(!e.isSynced)return;var n=this.getCallLog();if(_.isEmpty(n))return;if($.os.android&&n.state!==this.CALL_STATE.IDLE&&e.isNative)return;if(!n.started){this.clearCallLog();return}n.endedOn=n.endedOn||(new Date).getTime();var i=this;if(this._canLogCall(n)){t.showConfirm(e.lang.get("LBL_MOBILE_LOG_CALL_CONFIRM"),{callback:function r(e){if(e===2)i.logCall(n)}})}this.clearCallLog()},logCall:function f(t){var n=t.endedOn-t.startedOn;var i=n/1e3;var r=1;var a=0;if(i>60){r=i/60;if(r>60){a=r/60;r=r%60}}var s=e.nomad.getRelationshipLink(t.module,this._callModule);var o=t.direction==="Outbound"&&s?e.nomad.buildLinkRoute(t.module,t.recordId,s,null,"createCall"):"createCall";o+="?direction="+t.direction+"&start_date="+new Date(t.startedOn).toISOString()+"&duration_hours="+a+"&duration_minutes="+r+"&status=Held"+"&log_call=true";e.controller.navigate(o)},_canLogCall:function h(t){var n=["Employees","Calls"];var i=!_.contains(n,t.module);var r=e.metadata.getModule(this._callModule);var a=r&&e.acl.hasAccess("create",this._callModule);var s=t.module==="Users"&&t.recordId===e.user.get("id");return a&&r&&i&&!s},bindCallEnd:function p(){var t;var n=[{state:this.CALL_STATE.DIALING}];this.callStateChanged(n);if($.os.android){t=_.bind(function(){if(this._pageIsVisible()){e.logger.debug("bindCallEnd return handler called");document.removeEventListener("webkitvisibilitychange",t);this.onAppResume()}},this);document.addEventListener("webkitvisibilitychange",t,false)}else if($.os.ios){t=_.bind(function(){window.removeEventListener("pageshow",t);this.onAppResume()},this);window.addEventListener("pageshow",t,false)}},_pageIsVisible:function m(){return!document.webkitHidden}};e.augment("telephony",r,false)})(SUGAR.App)},function(e,t){"use strict";(function(e){var t=e.view.declareComponent;e.view.declareComponent=function(e,n){if(_.isFunction(n)){return n}else{return t.apply(this,arguments)}};SUGAR.forms.FlashField=function(){};SUGAR.forms.markField=SUGAR.forms.unmarkField=function(){};e.metadata.copy=function(t,n){n=n||{};if(n.bean instanceof e.Bean){return e.utils.deepCopy(t)}else{return t}};e.data.getEditableFields=function(t,n){var i={};_.each(n,function(n){if(e.acl.hasAccessToModel("edit",t,n)){i[n]=t.get(n)}});i["id"]=t.get("id");return i};var n=SUGAR.expressions.SidecarExpressionContext.prototype.setValue;SUGAR.expressions.SidecarExpressionContext.prototype.setValue=function(e,t){n.apply(this,arguments);var i=this.getField(e);if(i&&i.type==="enum"&&i.def.visibility_grid){i.render()}};SUGAR.expressions.SidecarExpressionContext.prototype.setFieldRequired=function(e,t){t=SUGAR.expressions.Expression.isTruthy(t);var n=this.view.getField(e,this.model);if(n){n.setRequired(t)}};_.extend(SUGAR.expressions.SidecarExpressionContext.prototype,{addClass:function o(e,t){var n=this.view.getField(e,this.model);if(n){n.$el.addClass(t)}},removeClass:function l(e,t){var n=this.view.getField(e,this.model);if(n){n.$el.removeClass(t)}}});e.error.errorName2Keys.email="ERR_MOBILE_EMAIL";e.MixedBeanCollection.prototype.fetch=function(t){var n=e.metadata.getModuleNames({filter:"visible",access:"list"});t=t||{};t.module_list=this.module_list=t.module_list||this.module_list||n;if(t.module_list!==n){t.module_list=_.filter(t.module_list,function(e){return _.contains(n,e)})}if(!t.module_list.length)return;var i=!_.isUndefined(t.myItems)?t.myItems:this.myItems;if(i){var r=_.select(t.module_list,function(t){return e.nomad.supportsMyItems(t)});t=_.extend({},t,{module_list:r})}return e.BeanCollection.prototype.fetch.call(this,t)};e.augment("hacks",{hackModuleList:function u(){var t=e.user.get("module_list"),n=e.metadata.getModules();for(var i=0;i<t.length;++i){if(!n[t[i]])t.splice(i--,1)}},hackAcls:function c(){var t=e.user.getAcls(),n=t.Users;if(_.isEmpty(t)){return}n["delete"]="no";if(_.isArray(n.fields)){n.fields={}}n.fields.status={create:"no",write:"no"};var i=["access","admin","delete","developer","edit","export","import","list","massupdate","view"];_.each(_.keys(t),function(n){if(!e.metadata.getModule(n)&&!_.contains(e.user.get("module_list"),n)){_.each(i,function(e){t[n][e]="no"})}});e.user.set("acl",t)}});delete e.validation.validators.datetime;delete e.validation.validators.primaryEmail;var i=$.param;$.param=function(e){if(e instanceof ArrayBuffer){return e}else return i.apply(this,arguments)};var r=$.ajax;$.ajax=function(e){if(e.files&&e.files.length>0){return a(e)}else{return r.apply($,arguments)}};function a(t){var n=t.files,i=t.files.fieldName,r=n.fileData.name||"newfile",a=n.fileData.type||"application/octet-stream",s=n.fileData.binary,o={"OAuth-Token":e.api.getOAuthToken()};function l(e){function t(e){return e.charCodeAt(0)&255}var n=Array.prototype.map.call(e,t);var i=new Uint8Array(n);return i.buffer}var u="xxxxxx",c="\r\n",d="";d+="--"+u+c;d+="Content-Disposition: form-data;";d+='name="'+i+'"; filename="'+r+'"'+c;d+="Content-Type: "+a+c+c;d+=s+c;d+="--"+u+"--";return $.ajax({complete:t.complete,error:t.error,success:t.success,type:"POST",url:t.url,data:l(d),processData:false,contentType:"multipart/form-data; boundary="+u,headers:o,dataType:"json"})}var s=e.metadata.sync;e.metadata.sync=function(t,n){if(e.lang.getLanguage()&&e.user.get("preferences")&&e.lang.getLanguage()!==e.user.get("preferences").language||!e.config.cacheMeta){n=n||{};n.forceRefresh=true;e.logger.debug("Forcing meta refresh as user language has changed")}s.call(this,t,n)};e.accessibility={run:function d(){}};e.logger.ServerWriter.write=function(){};e.cache.clean=function(){};e.events.on("app:init",function(){var t=e.api.records;e.api.records=function(n,i,r,a,s,o){var l;o=o||{};if(a.recents){delete a.recents;i="recent";if(s.success){l=s.success;s.success=function(e){e.next_offset=-1;l.apply(this,arguments)}}}return t.call(e.api,n,i,r,a,s,o)};var n=e.api.search;e.api.search=function(i,r,a){var s=e.serverInfo.isSevenUp&&_.contains(["Users","Employees"],i.module_list);if(s){i=_.extend({},i,{filter:[{$or:[{first_name:{$contains:i.q}},{last_name:{$contains:i.q}}]}],q:null});return t.call(this,"read",i.module_list,null,i,r,a)}else{return n.apply(this,arguments)}};function i(){var t=0;var n=false;$(window.document).on({ajaxSuccess:function i(r,a,s){var o,l,u;if(n||s.type.toUpperCase()!=="GET"){return}o=a.getResponseHeader("cache-control")||"";l=/max-age=(\d+)/i.exec(o)||[];l=+l[1]||0;if(l>e.config.maxHttpCacheAge){l=e.config.maxHttpCacheAge}u=new Date;u=u.setSeconds(u.getSeconds()+l);if(u>t){t=u}},ajaxError:function r(){n=t>(new Date).getTime()},ajaxBeforeSend:function a(i,r,s){var o=(new Date).getTime();if(s.type==="GET"){if(n&&t>o){s.url+=(s.url.indexOf("?")===-1?"?":"&")+"nomad_timestamp="+o}else{n=false}}else if(s.url!==e.api.buildURL("bulk")){n=t>o}}})}i();var r=e.api.buildURL;e.api.buildURL=function(e,t,n,i){var a=r.apply(this,arguments);if(t==="favorite"||t==="unfavorite"){var s={fields:"my_favorite,following"};if(t==="favorite"){s.viewed=1}a+="?"+$.param(s)}return a}})})(SUGAR.App)},function(e,t){"use strict";(function(e){e.baseMetadata={_hash:"_base_",modules:{Dashboards:{_hash:"DashboardsHash",fields:{_hash:"DashboardsFieldsHash",id:{name:"id",type:"id"},name:{name:"name",type:"varchar"},dashboard_type:{name:"dashboard_type",type:"varchar"},date_modified:{name:"date_modified",type:"datetime"},url:{name:"url",type:"varchar"},metadata:{name:"metadata",type:"metadata"}},layouts:{detail:{meta:{components:[{view:"dashboard"}]}}},views:{detail:{meta:{panels:[{fields:[]}]}}}},Comments:{_hash:"CommentsHash",layouts:{},fields:{name:{name:"name",type:"varchar"},date_entered:{name:"date_entered",type:"datetime"},date_modified:{name:"date_modified",type:"datetime"},created_by:{name:"created_by",type:"id"},created_by_name:{name:"created_by_name",type:"relate",link:"created_by_link"},activities:{name:"activities",type:"link",relationship:"comments",module:"Activities"},parent_id:{name:"parent_id",type:"id"},data:{name:"data",type:"json"},_hash:"CommentsFieldsHash"}},Activities:{_hash:"ActivitiesHash",layouts:{},fields:{_hash:"ActivitiesFieldsHash",name:{name:"name",type:"varchar"},date_entered:{name:"date_entered",type:"datetime"},date_modified:{name:"date_modified",type:"datetime"},parent_id:{name:"parent_id",type:"id"},parent_type:{name:"parent_type",type:"varchar"},activity_type:{name:"activity_type",type:"varchar"},data:{name:"data",type:"json"},comment_count:{name:"comment_count",type:"int"},last_comment:{name:"last_comment",type:"json"},created_by:{name:"created_by",type:"id"},comments:{module:"Comments",name:"comments",relationship:"comments",type:"link"}},mergedFields:[],filters:{_hash:"ActivitiesFiltersHash",activity:{meta:{create:false,default_filter:"all_records",quicksearch_field:[],quicksearch_priority:2,filters:[{id:"all_records",name:"LBL_LISTVIEW_FILTER_ALL",filter_definition:[],editable:false},{id:"messages_for_create",name:"LBL_ACTIVITY_CREATE",filter_definition:{$or:[{activity_type:"create"},{activity_type:"attach"}]},editable:false},{id:"messages_for_update",name:"LBL_ACTIVITY_UPDATE",filter_definition:{activity_type:"update"},editable:false},{id:"messages_for_link",name:"LBL_ACTIVITY_LINK",filter_definition:{activity_type:"link"},editable:false},{id:"messages_for_unlink",name:"LBL_ACTIVITY_UNLINK",filter_definition:{activity_type:"unlink"},editable:false},{id:"messages_for_post",name:"LBL_ACTIVITY_POST",filter_definition:{activity_type:"post"},editable:false}]}}},views:{list:{meta:{panels:[{fields:[]}]}},"activitystream-dashlet":{meta:{panels:[{fields:[]}],view:{auto_refresh:0,currentFilterId:"all_records",module:"Activities",type:"activitystream-dashlet"}}}}},Filters:{_hash:"FiltersHash",fields:{_hash:"FiltersFieldsHash"},layouts:{}},Teams:{_hash:"TeamsHash",favoritesEnabled:false,ftsEnabled:false,mergedFields:["id","name","name_2"],fields:{_hash:"TeamsFieldsHash",id:{name:"id",type:"id"},name:{name:"name",type:"varchar",unified_search:true},name_2:{name:"name_2",type:"varchar",unified_search:true},primary:{name:"primary",type:"boolean"}},views:{list:{meta:{panels:[{fields:[{name:"name",type:"text"},{name:"name_2",type:"varchar"}]}]}}},layouts:{list:{meta:{type:"list",components:[{view:"list"}]}}}},Login:{_hash:"LoginHash",fields:{_hash:"LoginFieldsHash",username:{name:"username",type:"username",required:true},password:{name:"password",type:"password",required:true},url:{name:"url",type:"url",required:true}},views:{login:{meta:{panels:[{label:"Login",fields:[{name:"username",label:"Username"},{name:"password",label:"Password"},{name:"url",label:"URL"}]}]}}},layouts:{login:{meta:{type:"login",components:[{view:"login"}]}}}},About:{_hash:"AboutHash",fields:{_hash:"AboutFieldsHash",app_version:{name:"app_version",type:"varchar"},sdk_version:{name:"sdk_version",type:"varchar"},server_version:{name:"server_version",type:"varchar"},server_url:{name:"server_url",type:"url"},support_email:{name:"support_email",type:"url"},support_website:{name:"support_website",type:"url"}},views:{about:{meta:{panels:[{label:"LNK_ABOUT",fields:[{name:"app_version",label:"LBL_MOBILE_APP_VERSION",view:"readonly"},{name:"sdk_version",label:"LBL_MOBILE_SDK_VERSION",view:"readonly"},{name:"server_version",label:"LBL_MOBILE_SERVER_VERSION",view:"readonly"},{name:"server_url",label:"LBL_MOBILE_SERVER_URL",css_class:"server_url"},{name:"support_email",label:"LBL_MOBILE_FEEDBACK",css_class:"support_email hide"},{name:"support_website",label:"LBL_MOBILE_SUPPORT",css_class:"support_website"}]}]}}},layouts:{about:{meta:{type:"about",components:[{view:"about"}]}}}},Error:{_hash:"Error",fields:{_hash:"ErrorHash",message:{name:"message",type:"varchar"}},layouts:{error:{meta:{type:"error",components:[{view:"error"}]}}},views:{error:{meta:{panels:[{fields:[]}]}}}},Settings:{_hash:"SettingsHash",fields:{_hash:"SettingsFieldsHash",language:{name:"language",type:"enum","default":"en_us"},logging:{name:"logging",type:"enum"},fontSize:{name:"fontSize",type:"enum","default":"normal"}},views:{settings:{meta:{panels:[{label:"LNK_SETTINGS",fields:[{name:"language",label:"LBL_LANGUAGE",options:"available_language_dom",view:"edit","default":"en_us"},{name:"logging",label:"LBL_LOG_LEVEL",options:["TRACE","DEBUG","INFO","WARN","ERROR","FATAL"],view:"edit"},{name:"fontSize",label:"LBL_SET_FONTSIZE",view:"edit","default":"normal"}]}]}}},layouts:{settings:{meta:{type:"settings",components:[{view:"settings"}]}}}},TxLog:{_hash:"txLogHash",fields:{_hash:"TxLogFieldsHash",_tx_action:{name:"_tx_action"},_tx_bean_module:{name:"_tx_bean_module"},_tx_updated_fields:{name:"_tx_updated_fields"},_tx_error_count:{name:"_tx_error_count"}},views:{list:{meta:{panels:[{label:"XXX",fields:[{name:"_tx_action"},{name:"_tx_bean_module"}]}]}},detail:{meta:{panels:[{label:"XXX",fields:[{name:"_tx_action"},{name:"_tx_bean_module"}]}]}}},layouts:{list:{meta:{type:"list",components:[{view:"list"}]}},detail:{meta:{type:"detail",components:[{view:"detail"}]}}}},Offline:{_hash:"OfflineHash",fields:{_hash:"OfflineFieldsHash"},views:{offline:{meta:{panels:[{label:"LNK_SETTINGS",fields:[]}]}}},layouts:{offline:{meta:{type:"offline",components:[{view:"offline"}]}},offlineSettings:{meta:{type:"offline",components:[{view:"offline-settings"}]}},offlineStats:{meta:{type:"offline",components:[{view:"offline-stats"}]}},offlineDataGeneration:{meta:{type:"offline",components:[{view:"offline-data-generation"}]}}}},Recents:{_hash:"RecentsHash",fields:{_hash:"RecentsFieldsHash"},views:{},layouts:{}},Search:{_hash:"SearchHash",fields:{_hash:"SearchFieldsHash",assigned_user_id:{name:"assigned_user_id"}},views:{list:{meta:{panels:[{fields:[]}]}}},layouts:{list:{meta:{type:"list"}}},favoritesEnabled:true},ErrorEmulation:{_hash:"ErrorEmulationHash",fields:{_hash:"ErrorEmulationHash",language:{name:"language",type:"enum","default":"en_us"}},views:{errors:{meta:{panels:[{label:"LNK_SETTINGS",fields:[]}]}}},layouts:{erroremulation:{meta:{type:"errors",components:[{view:"error-emulation"}]}}}},ProductTypes:{_hash:"ProductTypesHash",fields:{_hash:"ProductTypesFieldsHash",id:{name:"id",type:"id"},name:{name:"name",type:"varchar",vname:"LBL_NAME"}},views:{list:{meta:{panels:[{fields:[{name:"name"}]}]}}},layouts:{list:{meta:{type:"list",components:[{view:"list"}]}}},mergedFields:["name"],ftsEnabled:false,favoritesEnabled:false,_patched:true},ProductCategories:{_hash:"ProductCategoriesHash",fields:{_hash:"ProductCategoriesFieldsHash",id:{name:"id",vname:"LBL_ID",type:"id",required:true},name:{name:"name",vname:"LBL_NAME",type:"varchar",len:50,required:true},parent_id:{name:"parent_id",type:"id",vname:"LBL_PARENT_NAME"},parent_name:{id_name:"parent_id",link:"member_categories",module:"ProductCategories",name:"parent_name",source:"non-db",type:"relate",unified_search:true,vname:"LBL_PARENT_CATEGORY"}},views:{list:{meta:{panels:[{fields:[{name:"name"},{name:"parent_name"}]}]}}},layouts:{list:{meta:{type:"list",components:[{view:"list"}]}}},mergedFields:["name","parent_name","parent_id"],ftsEnabled:false,favoritesEnabled:false,_patched:true},ProductTemplates:{_hash:"ProductTemplatesHash",fields:{_hash:"ProductTemplatesFieldsHash",id:{name:"id",vname:"LBL_ID",type:"id",required:true},deleted:{name:"deleted",vname:"LBL_DELETED",type:"bool",required:false,"default":"0"},date_entered:{name:"date_entered",vname:"LBL_DATE_ENTERED",type:"datetime"},date_modified:{name:"date_modified",vname:"LBL_DATE_MODIFIED",type:"datetime"},modified_user_id:{name:"modified_user_id",rname:"user_name",id_name:"modified_user_id",vname:"LBL_MODIFIED_ID",type:"assigned_user_name"},created_by:{name:"created_by",rname:"user_name",id_name:"modified_user_id",vname:"LBL_CREATED_ID",type:"assigned_user_name"},type_id:{name:"type_id",type:"id",required:false,vname:"LBL_TYPE_ID"},manufacturer_id:{name:"manufacturer_id",type:"id",required:false,vname:"LBL_LIST_MANUFACTURER_ID"},manufacturer_name:{name:"manufacturer_name",rname:"name",id_name:"manufacturer_id",type:"relate",vname:"LBL_MANUFACTURER_NAME",join_name:"manufacturers",link:"manufacturer_link",module:"Manufacturers"},category_id:{name:"category_id",type:"id",required:false,vname:"LBL_LIST_CATEGORY_ID"},category_name:{name:"category_name",rname:"name",id_name:"category_id",vname:"LBL_CATEGORY_NAME",join_name:"product_categories",type:"relate",link:"category_link",module:"ProductCategories",source:"non-db"},type_name:{name:"type_name",rname:"name",id_name:"type_id",vname:"LBL_TYPE",join_name:"product_types",type:"relate",link:"type_link",module:"ProductTypes",source:"non-db"},name:{name:"name",vname:"LBL_NAME",type:"varchar",len:50,required:true},mft_part_num:{name:"mft_part_num",vname:"LBL_MFT_PART_NUM",type:"varchar",len:50},vendor_part_num:{name:"vendor_part_num",vname:"LBL_VENDOR_PART_NUM",type:"varchar",len:50},date_cost_price:{name:"date_cost_price",vname:"LBL_DATE_COST_PRICE",type:"date"},cost_price:{name:"cost_price",vname:"LBL_COST_PRICE",type:"currency",required:true,len:null},discount_price:{name:"discount_price",vname:"LBL_DISCOUNT_PRICE",required:true,type:"currency",len:null},list_price:{name:"list_price",vname:"LBL_LIST_PRICE",required:true,type:"currency",len:null},cost_usdollar:{name:"cost_usdollar",vname:"LBL_COST_USDOLLAR",type:"currency",len:null},discount_usdollar:{name:"discount_usdollar",vname:"LBL_DISCOUNT_USDOLLAR",type:"currency",len:null},list_usdollar:{name:"list_usdollar",vname:"LBL_LIST_USDOLLAR",type:"currency",len:null},currency_id:{name:"currency_id",vname:"LBL_CURRENCY",type:"currency_id",required:false,"default":"-99"},currency_symbol:{name:"currency_symbol",type:"varchar",vname:"LBL_CURRENCY_SYMBOL_NAME",source:"non-db"},currency:{name:"currency",vname:"LBL_CURRENCY",type:"varchar",required:false,sortable:false},status:{name:"status",vname:"LBL_STATUS",type:"enum",options:"product_template_status_dom",len:100},tax_class:{name:"tax_class",vname:"LBL_TAX_CLASS",type:"enum",options:"tax_class_dom",len:100},date_available:{name:"date_available",vname:"LBL_DATE_AVAILABLE",type:"date"},website:{name:"website",vname:"LBL_URL",type:"varchar",len:255},weight:{name:"weight",vname:"LBL_WEIGHT",type:"decimal",len:12,precision:"2"},qty_in_stock:{name:"qty_in_stock",vname:"LBL_QUANTITY",type:"int",len:5},description:{name:"description",vname:"LBL_DESCRIPTION",type:"text"},support_name:{name:"support_name",vname:"LBL_SUPPORT_NAME",type:"varchar",len:50},support_description:{name:"support_description",vname:"LBL_SUPPORT_DESCRIPTION",type:"varchar",len:255},support_contact:{name:"support_contact",vname:"LBL_SUPPORT_CONTACT",type:"varchar",len:50},support_term:{name:"support_term",vname:"LBL_SUPPORT_TERM",type:"enum",options:"support_term_dom",len:100},pricing_formula:{name:"pricing_formula",vname:"LBL_PRICING_FORMULA",type:"varchar",len:100},pricing_factor:{name:"pricing_factor",vname:"LBL_PRICING_FACTOR",type:"decimal",len:8,precision:"2"},created_by_link:{name:"created_by_link",type:"link",relationship:"product_templates_created_by",vname:"LBL_CREATED_BY_USER",link_type:"one",module:"Users",source:"non-db"},modified_user_link:{name:"modified_user_link",type:"link",relationship:"product_templates_modified_user",vname:"LBL_MODIFIED_BY_USER",link_type:"one",module:"Users",source:"non-db"},category_link:{name:"category_link",type:"link",relationship:"product_templates_product_categories",vname:"LBL_PRODUCT_CATEGORIES",link_type:"one",module:"ProductCategories",source:"non-db"},type_link:{name:"type_link",type:"link",relationship:"product_templates_product_types",vname:"LBL_PRODUCT_TYPES",link_type:"one",module:"ProductTypes",source:"non-db"},manufacturer_link:{name:"manufacturer_link",type:"link",relationship:"product_templates_manufacturers",vname:"LBL_MANUFACTURERS",link_type:"one",module:"Manufacturers",source:"non-db"}},views:{list:{meta:{panels:[{fields:[{name:"name",label:"LBL_NAME"
},{name:"category_name",label:"LBL_CATEGORY_NAME"}]}]}}},layouts:{list:{meta:{type:"list",components:[{view:"list"}]}}},mergedFields:["currency_id","category_id","category_name","cost_price","cost_usdollar","discount_price,","discount_usdollar","list_price","list_usdollar","mft_part_num","name","tax_class","weight"],ftsEnabled:false,favoritesEnabled:false,_patched:true},Forecasts:{_hash:"ForecastsHash",config:{sales_stage_won:["Closed Won"],sales_stage_lost:["Closed Lost"]}},Manufacturers:{_hash:"ManufacturersHash",fields:{_hash:"ManufacturersFieldsHash",id:{name:"id",type:"id"},name:{name:"name",type:"name",unified_search:true}},views:{list:{meta:{panels:[{fields:[{name:"name",label:"LBL_NAME","default":true,enabled:true,type:"name"}]}]}}},layouts:{list:{meta:{type:"list",components:[{view:"list"}]}}},mergedFields:["name"],ftsEnabled:false,favoritesEnabled:false},Home:{_hash:"HomeHash",layouts:{},fields:{_hash:"HomeFieldsHash"},mergedFields:[],views:{casessummary:{meta:{dashlets:[{description:"LBL_CASE_SUMMARY_CHART_DESC",label:"LBL_CASE_SUMMARY_CHART"}],tabs:[{filters:{status:{$in:["New"]}},status:"New",link:"cases",module:"Cases"},{filters:{status:{$in:["Pending Input"]}},status:"Pending Input",link:"cases",module:"Cases",favoritesEnabled:false,ftsEnabled:false},{filters:{status:{$in:["Assigned"]}},status:"Assigned",link:"cases",module:"Cases",favoritesEnabled:false,ftsEnabled:false}]}}}}},views:{"activitystream-dashlet":{meta:{}}},relationships:{comments:{lhs_key:"id",lhs_module:"Activities",lhs_table:"activities",name:"comments",relationship_type:"one-to-many",rhs_key:"parent_id",rhs_module:"Comments",rhs_table:"comments"},product_templates_product_types:{lhs_key:"id",lhs_module:"ProductTypes",lhs_table:"product_types",name:"product_templates_product_types",relationship_type:"one-to-many",rhs_key:"type_id",rhs_module:"ProductTemplates",rhs_table:"product_templates"},product_templates_product_categories:{lhs_key:"id",lhs_module:"ProductCategories",lhs_table:"product_categories",name:"product_templates_product_categories",relationship_type:"one-to-many",rhs_key:"category_id",rhs_module:"ProductTemplates",rhs_table:"product_templates"}},app_strings:{LBL_TRY_AGAIN:"Try again",LBL_NEW_RECORDS:"Recently Created",LBL_ASSIGNED_TO_ME:"My {{{module}}}",LBL_LISTVIEW_FILTER_ALL:"All {{{module}}}",LBL_UNFAVORITE:"Unfavorite",LBL_ACTIVITY_CREATE:"Created {{{record}}} {{{module}}}",LBL_ACTIVITY_UPDATE:"Updated {{{changes}}} on {{{record}}} {{{module}}}",LBL_ACTIVITY_LINK:"Linked {{{relatedRecord}}} to {{{record}}} {{{module}}}",LBL_ACTIVITY_UNLINK:"Unlinked {{{relatedRecord}}} from {{{record}}} {{{module}}}",LBL_OFFLINE_PREFETCHING_RELATIONSHIP:"{{relationship}} for {{parentModule}}",LBL_OFFLINE_PREFETCH_RELATED_ACTION:"Download related records...",ERR_OFFLINE_NO_CONNECTION_ENABLE_ERROR:"Failed to enable offline mode. Unable to reach the server.",LBL_SHOWING_CACHED_DATA:"Unable to reach the server. Showing latest available data ({{lastFetched}})",LBL_FUTURE:"Future",LBL_CLOSE_AND_SAVE_BUTTON:"Close {{moduleSingular}} and save",LBL_DASHBOARDS_CHANGED_PROMPT:"Your dashboard configuration has changed. Do you want to reload?",LBL_RECORDS:"Records",LBL_DASHBOARDS:"Dashboards",LBL_MOBILE_SEARCH_PLACEHOLDER:"Search {{searchCriteria}}...",LBL_MOBILE_SPECIFIC_DASHBOARD:"Specific Dashboard",LBL_MOBILE_SPECIFIC_MODULE:"Specific Module",LBL_MOBILE_DEFAULT_VIEW:"Start Screen",LBL_MOBILE_DEFAULT_MODULE:"Selected Module",LBL_MOBILE_DEFAULT_DASHBOARD:"Selected Dashboard",LBL_MOBILE_DEFAULT_DASHLET:"Selected Dashlet",LBL_ALL_DASHLETS:"All Dashlets",LBL_MOBILE_GLOBAL_SEARCH:"Global Search",LBL_MOBILE_ACTIVITYSTREAM_POST_PLACEHOLDER:"Type @ to mention a user. Type # to reference a record.",LBL_MOBILE_NEW_COMMENT:"New comment",LBL_MOBILE_TUTORIAL_HOME_MENU:"Main menu",LBL_MOBILE_TUTORIAL_HOME_PLUS:"Quick create new record",LBL_MOBILE_TUTORIAL_HOME_SWIPE:"Swipe for more options",LBL_DETAIL_RELATED:"Related",LBL_RECORD_SHARE_BUTTON:"Share",LBL_RECORD_NOT_FOUND:"Record not found.",LBL_RELATED_RECORD_NOT_FOUND:"Related record not found.",LBL_NOT_AUTHORIZED:"You are not authorized to view this record.",LBL_SET_FONTSIZE:"Font size",LBL_FONTSIZE_TINY:"Tiny",LBL_FONTSIZE_SMALL:"Small",LBL_FONTSIZE_NORMAL:"Normal (default)",LBL_FONTSIZE_LARGE:"Large",LBL_FONTSIZE_LARGER:"Larger",LBL_FONTSIZE_HUGE:"Huge",LBL_FONTSIZE_EXTRA_HUGE:"Extra huge",LBL_CLOSE_SAVE_BUTTON:"Close task and save",LBL_MOBILE_PROCESSING_FILE:"Preparing file...",ERR_MOBILE_FILE_SIZE_LIMIT_EXCEEDED:"File is too big. Maximum allowed size is {{size}}",LBL_MOBILE_TUTORIAL_DETAIL_EDIT_ACTION:"Edit record",LBL_LATER:"Later",LBL_LOADING_FILES:"Still loading document list. Please try again later",LBL_NEW_WEB_VERSION:"A new version of this application is available. Would you like to update?",LBL_MOBILE_DOWNLOAD_FAILED:"Download failed\r\n{{{this}}}",LBL_MOBILE_DETAIL_SHOW_MORE:"More...",LBL_MOBILE_DETAIL_SHOW_LESS:"...Less",LBL_OFFLINE_MODE:"Offline Mode",LBL_OFFLINE_PREFETCH_PROMPT:"Downloading your assigned, favorited, and followed records for offline access may take some time to complete. A fast connection is recommended. Would you like to proceed?",LBL_OFFLINE_PREFETCH_FIRST_PROMPT:"Do you want your assigned, favorited, and followed records to be downloaded now for offline access? A fast connection is recommended as this operation may take some time. You may download later from Main Menu > Offline.",LBL_OFFLINE_PREFETCH_SUCCESS:"Records downloaded successfully",LBL_OFFLINE_PREFETCH_ACTION:"Download your records...",LBL_OFFLINE_PREFETCH_ERROR:"Error while downloading records",LBL_OFFLINE_PREFETCHING:"Loading records...",LBL_OFFLINE_PREFETCHING_MODULE:"Loading {{module}} {{progressValue}}...",LBL_OFFLINE_PREFETCHING_EST_TIME:"Time left is about {{estimatedTime}}s...",LBL_OFFLINE_PREFETCHING_MODULE_COMPLETE:"Loading {{module}} completed",LBL_OFFLINE_DB_CLEANING_IN_PROGRESS:"Cleaning storage...",LBL_OFFLINE_DB_CLEANING_COMPLETED:"Clean-up completed",LBL_OFFLINE_ROLLBACK_PROMPT:"Do you want to rollback this change?",LBL_OFFLINE_ROLLBACK_SUCCESS:"Rollback completed",LBL_OFFLINE_ROLLBACK_FAILED:"Rollback failed",LBL_OFFLINE_CLEAR_DB:"Clear Storage...",LBL_OFFLINE_COMPACT_DB:"Compact Storage...",LBL_OFFLINE_CLEAN_UP_PROMPT:"This action will delete records you haven't accessed in a while. Proceed?",LBL_OFFLINE_CLEAR_DB_PROMPT:"Do you want to delete all records from the local storage?",LNK_OFFLINE_SETTINGS:"Offline",LBL_OFFLINE_SETTINGS:"Debug settings",LBL_OFFLINE_STATUS_NO_PENDING_TX:"No changes pending synchronization.",LBL_OFFLINE_STATUS_PENDING_TX:"Changes are pending synchronization.",LBL_OFFLINE_STATUS_ONLINE:"Device is online.",LBL_OFFLINE_STATUS_OFFLINE:"Device is offline.",LBL_OFFLINE_STATUS_BAD_NETWORK:"Unable to reach the server.",LBL_OFFLINE_STATUS_SYNC_FAILED:"Last synchronization attempt failed. Check the transaction log.",LBL_OFFLINE_SYNC_IN_PROGRESS:"Synchronization in progress...",LBL_OFFLINE_TRANSACTION_SYNCED:"Transaction synchronized.",LBL_OFFLINE_ENABLE_PROMPT:"Are you sure you want to turn on offline support?",LBL_OFFLINE_DISABLE_PROMPT:"Do you want to turn off offline support? All changes pending synchronization will be lost.",LBL_OFFLINE_ENABLED:"Offline mode enabled",LBL_OFFLINE_DISABLED:"Offline mode disabled",LBL_OFFLINE_STATS:"Storage statistics",LBL_OFFLINE_SERVER_FETCH:"Fetching from server...",LBL_OFFLINE_MERGE_DATA_CONFIRM:"Someone has edited the same record on the server. Confirm to auto-merge your changes or reject to discard them.",LBL_OFFLINE_LAST_SYNC_TS:"Last synchronization attempt: {{ts}}",LBL_ACTION_UPDATE:"UPDATE",LBL_ACTION_CREATE:"CREATE",LBL_ACTION_DELETE:"DELETE",LBL_ACTION_LINK:"LINK",LBL_ACTION_UNLINK:"UNLINK",LBL_ACTION_FAVORITE:"FAVORITE",LBL_ACTION_FOLLOW:"FOLLOW",LBL_ACTION_CREATE_EXPLANATION:'Created {{module}} "{{name}}"',LBL_ACTION_UPDATE_EXPLANATION:'Updated {{module}} "{{name}}"',LBL_ACTION_DELETE_EXPLANATION:'Deleted {{module}} "{{name}}"',LBL_ACTION_LINK_EXPLANATION:'Linked {{module}} "{{name}}" to {{relatedModule}} "{{relatedName}}"',LBL_ACTION_UNLINK_EXPLANATION:'Unlinked {{module}} "{{name}}" from {{relatedModule}} "{{relatedName}}"',LBL_ACTION_FOLLOW_EXPLANATION:'Followed {{module}} "{{name}}"',LBL_ACTION_UNFOLLOW_EXPLANATION:'Unfollowed {{module}} "{{name}}"',LBL_ACTION_FAVORITE_EXPLANATION:'Favorited {{module}} "{{name}}"',LBL_ACTION_UNFAVORITE_EXPLANATION:'Unfavorited {{module}} "{{name}}"',LBL_ACTION_CREATE_RELATED_EXPLANATION:'Created {{module}} "{{name}}" related to {{relatedModule}} "{{relatedName}}"',LBL_EMAIL_ACTION_SET_PRIMARY:"Primary",LBL_EMAIL_ACTION_SET_OPT_OUT:"Opt-out",LBL_EMAIL_ACTION_SET_OPT_IN:"Opt-in",LBL_EMAIL_ACTION_SET_VALID:"Valid",LBL_EMAIL_ACTION_SET_INVALID:"Invalid",LBL_ROLLBACK_BUTTON:"Rollback",LBL_TX_LOG:"Transaction Log",LBL_TX_LOG_DETAIL:"Transaction Detail",LBL_RECORD_DELETED:"(Record deleted)",LBL_FILE_SIZE_UNITS_B:"Bytes",LBL_FILE_SIZE_UNITS_KB:"kB",LBL_FILE_SIZE_UNITS_MB:"MB",LBL_CHOOSE_ITEMS:"Choose items",LBL_OFFLINE_DB_SIZE:"Database size",LBL_OFFLINE_DATA_ENCRYPTION_ENABLED:"Data encryption is enabled.",LBL_OFFLINE_RECORDS_PER_MODULE:"Records per module",LBL_OFFLINE_TOTAL_RECORDS:"Total Records",LBL_OFFLINE_LAST_DOWNLOAD:"Last download",LBL_RECENTLY_VIEWED:"Recently Viewed",ERR_MOBILE_METADATA_CHANGED_RELOAD:"Server configuration has changed and reload is required. Proceed?",ERR_MOBILE_CONFLICT:"Someone has edited the same record on the server. Confirm to auto-merge your changes or reject to discard them.",ERR_MOBILE_METADATA_CHANGED:"Server configuration has changed.",ERR_MOBILE_FILE_READ:"Failed to read the file",ERR_MOBILE_FILE_NOT_FOUND:"File not found",ERR_MOBILE_FILE_NOT_READABLE:"File not readable",ERR_MOBILE_FILE_ABORTED:"Read operation was aborted",ERR_MOBILE_FILE_SECURITY:"File is locked",ERR_MOBILE_VIEW_NOT_SUPPORTED:"Mobile version does not support this functionality. Do you want to open the desktop version?",ERR_OFFLINE:"Offline error",ERR_OFFLINE_STORAGE_UNAVAILABLE:"Failed to open local storage",ERR_OFFLINE_STORAGE_CREATE:"Failed to create local storage",ERR_OFFLINE_START_FAILED_OUT_OF_SPACE:"Failed to create local storage: you've run out of space.",ERR_OFFLINE_OUT_OF_SPACE:"You've run out of space for local storage.",ERR_OFFLINE_DB_CLEANING_ERROR:"Database clean-up failed",ERR_OFFLINE_CLEAN_UP_CONFIRMATION:"You have reached the maximum record limit for offline mode so we will be periodically cleaning up older records",ERR_OFFLINE_PREFETCH_FAILED:"Failed to prefetch records from server",ERR_OFFLINE_SYNC_ERROR:"Synchronization error",ERR_OFFLINE_SYNC_CONFLICT:"Synchronization conflict",ERR_OFFLINE_SERVERTIME_UNAVAILABLE:"Failed to get server time",ERR_MOBILE_DASHBOARDS_FETCHING:"Failed to load dashboards from server",ERR_FILTERS_FETCHING:"Unable to fetch your filters",ERR_OFFLINE_ENCRYPTION_FAILED:"Failed to encrypt local storage",LBL_OFFLINE_ENCRYPTION_IN_PROGRESS:"Encrypting offline data. This may take several minutes.",LBL_OFFLINE_ENCRYPTION_SUCCESS:"Offline data encryption completed.",LBL_OK:"OK",LBL_YES:"Yes",LBL_NO:"No",LBL_CANCEL_BUTTON_LABEL:"Cancel",LBL_SKIP:"Skip",LBL_MOBILE_RELOGIN_BUTTON:"Re-login",LBL_MOBILE_META_SYNC_FAILED:"Unable to sync with server.",LBL_MOBILE_META_SYNC_FAILED_RETRY:"Unable to sync with server. Retry?",LBL_LOADING:"Loading...",LBL_WARNING:"Warning",LBL_CONFIRM:"Confirm",LBL_ENABLE:"Enable",LNK_ABOUT:"About",LBL_MOBILE_APP_VERSION:"App Version",LBL_MOBILE_SDK_VERSION:"SDK Version",LBL_MOBILE_SERVER_VERSION:"Server Version",LBL_MOBILE_SERVER_URL:"Server URL",LBL_MOBILE_FEEDBACK:"Feedback",LBL_MOBILE_SUPPORT:"Support",LBL_LOGIN_USERNAME:"Username",LBL_LOGIN_PASSWORD:"Password",LNK_TERMS_OF_USE:"Terms of Use",LNK_PRIVACY_POLICY:"Privacy Policy",LNK_THIRD_PARTY_SOFTWARE:"Third Party Software",LBL_LOGIN_BUTTON_TITLE:"Log In",LBL_EXTERNAL_LOGIN_BUTTON_TITLE:"Single Sign-On",LBL_LOG_LEVEL:"Log Level",LBL_NOT_AVAILABLE:"N/A",LBL_USE_HTTPS:"Use secure connection",LBL_RECONFIGURE_LOGIN_SETTINGS_CONFIRM:"Login settings have been reconfigured.",LBL_TRIAL_PERIOD_EXPIRED:"Your trial period has expired.",LBL_TOUCHID:"Touch ID",LBL_ENABLE_TOUCHID:"Enable Touch ID",LBL_SETUP_TOUCHID:"Setup Touch ID",LBL_TOUCH_ID_AUTHENTICATE_SUBTITLE:"Sign in using your finger",LBL_TOUCH_ID_NOT_ENROLLED_MSG:"Oops. Touch ID is not yet set up on your device. \n\nGo to your device settings to set up Touch ID. Once set up, enable Touch ID for {{{brandName}}} in Main Menu > Settings.",LBL_TOUCH_ID_DISCLAIMER:"Using Touch ID with {{{brandName}}} will allow you to use your fingerprint instead of entering your username and password to access {{{brandName}}}. \n\nAnyone with a fingerprint registered on your device can access your data. ",LBL_TOUCH_ID_ENABLE_CONFIRM_MSG:"Would you like to proceed with Touch ID?",LBL_TOUCH_ID_ENTER_PASSWORD_TITLE:"Enter {{{brandName}}} Password to Enable Touch ID",LBL_SETUPBUDDY_HEADER_TITLE:"Setup",LBL_SETUPBUDDY_TOUCH_ID_ADDITIONAL_DISCLAIMER:"Turn off Touch ID at any time in Main Menu > Settings.",ERR_GEOLOCATION_PERMISSION_DENIED:"Please give {{{brandName}}} access to your location via your device's settings.",ERR_GEOLOCATION_POSITION_UNAVAILABLE_MSG:"Current location is not available",ERR_GEOLOCATION_POSITION_TIMEOUT_MSG:"Current location retrieval timed out. \nPlease try again.",ERR_GEOLOCATION_PLACEMARKS_UNAVAILABLE_MSG:"Location placemarks are not available",ERR_GEOLOCATION_INVALID_COORDINATES_MSG:"Location coordinates are invalid",ERR_SYNC_FAILED:"Unable to sync with server.",ERR_INTERNAL_ERR_MSG:"Internal error",ERR_MOBILE_NOT_AUTHORIZED:"Access not authorized.",ERR_MOBILE_INVALID_CREDS:"Invalid username or password.",ERR_MOBILE_INVALID_PASSWORD:"Invalid password.",ERR_MOBILE_SESSION_EXPIRED:"Your session expired.",ERR_MOBILE_SSO_NOT_CONFIGURED:"SSO login is unavailable. Ensure the instance is on Sugar 7.5 or greater and configured for SSO.",ERR_MOBILE_NOT_FOUND:"Resource not found.",ERR_MOBILE_TIMEOUT:"Server is not responding.",ERR_MOBILE_CONNECTION_FAILED:"Can't reach the server.",ERR_MOBILE_NOT_FOUND_LOGIN:"No {{{brandName}}} server found at the given URL.",ERR_MOBILE_TIMEOUT_LOGIN:"Server is not responding at the given URL.",ERR_MOBILE_CONNECTION_FAILED_LOGIN:"Server unavailable at the given URL.",ERR_MOBILE_INTERNET_UNAVAILABLE:"Internet connection unavailable.",ERR_MOBILE_INTERNAL:"Internal error ({{{code}}}). Please try again later.",ERR_MOBILE_VALIDATION:"Record is invalid",ERR_SERVER_FLAVOR_INCOMPATIBLE:"Incompatible server flavor: {{{flavor}}}. Supported flavors: {{{supportedFlavors}}}.",ERR_SERVER_VERSION_INCOMPATIBLE:"Incompatible server version: {{{version}}}. Minimum required version: {{{minVersion}}}.",ERR_MOBILE_INCOMPATIBLE_REBRAND_CLIENT_VERSION:"Your app is outdated and is no longer compatible with the {{{brandName}}} instance you are connecting to.",ERR_MOBILE_INCOMPATIBLE_CLIENT_VERSION:"Your app is outdated and is no longer compatible with the {{{brandName}}} instance you are connecting to. Do you want to download the new version from App Store?",ERR_GENERIC_TITLE:"Error",LBL_MOBILE_BY:"By",LBL_MOBILE_FILTER_IS_NOT_AVAILABLE:"This filter is not available in offline",LBL_BULK_LOAD_OFFLINE_RECORDS:"Offline Records",LBL_BULK_LOAD_DOWNLOAD_SETTINGS:"Download Settings",LBL_BULK_LOAD_PREFETCH_MESSAGE:"Download your assigned, favorite, and followed records for offline access. You can update your preferences in offline settings.",LBL_BULK_LOAD_COMPLETED_MESSAGE:"Your records have finished \n downloading. You can now access them in offline mode.",LBL_BULK_LOAD_ERROR_CONFIRM:"Not all your records were downloaded.\n Do you want to try again?",LBL_BULK_LOAD_USE_CELLULAR:"Use cellular data",LBL_BULK_LOAD_NOT_RIGHT_NOW:"Not right now",LBL_BULK_LOAD_PAUSED_MESSAGE:"Download has paused and it will resume when you open the app again.",LBL_BULK_LOAD_STATUS_DOWNLOADING:"Downloading {{module}}: {{count}}",LBL_BULK_LOAD_STATUS_IDLE:"Update Latest Records",LBL_BULK_LOAD_STATUS_WAITING_FOR_CONNECTION:"Waiting for connection",LBL_BULK_LOAD_STATUS_PAUSED:"Paused",LBL_BULK_LOAD_STATUS_STOPPING:"Stopping",LBL_BULK_LOAD_BTN_DOWNLOAD:"Download",LBL_BULK_LOAD_BTN_PAUSE:"Pause",LBL_BULK_LOAD_BTN_RESUME:"Resume",LBL_BULK_LOAD_CONNECTION_USE_MESSAGE:"Only WiFi connection is used by default"}};e._mod_strings=["LBL_MODULE_NAME","LBL_MODULE_NAME_SINGULAR","LBL_RELATED_RECORD_DEFAULT_NAME","LBL_RELATED_MODULE","LBL_CREATE_RELATED","LBL_CREATE_MODULE","LBL_RELATED_MODULE","LBL_EDIT_RELATED","LBL_EDIT","LBL_ASSOC_EXISTING","LBL_ASSOC","LBL_ASSIGN","LBL_RELATED_MODULE_PLURAL","LBL_DASHLET_FORECAST_NOT_SETUP","LBL_DASHLET_FORECAST_NOT_SETUP_ADMIN","LBL_DASHLET_FORECAST_CONFIG_LINK_TEXT","LBL_FORECASTS_MISSING_SALES_STAGE_VALUES","LBL_CLOSED","LBL_FORECAST_DETAILS_SURPLUS","LBL_FORECAST_DETAILS_EXCEED","LBL_FORECAST_DETAILS_DEFICIT","LBL_FORECAST_DETAILS_SHORT","LBL_FORECAST_DETAILS_NO_DATA","LBL_FORECAST_DETAILS_MEETING_QUOTA","LBL_SALES_STAGE","LBL_AMOUNT","LBL_PERCENT","LBL_CUMULATIVE_TOTAL","LBL_OW_PROBABILITY","LBL_QUOTA","LBL_QUOTA_ADJUSTED","LBL_DASHLET_TOP10_SALES_OPPORTUNITIES_NAME","LBL_NEW_RECORDS","LBL_ASSIGNED_TO_ME","LBL_LISTVIEW_FILTER_ALL","LBL_MY_SCHEDULED_ITEMS","LBL_MY_SCHEDULED_CALLS","LBL_MY_SCHEDULED_MEETINGS"];e._app_list_strings=["record_type_display","moduleIconList","moduleList","moduleListSingular","available_language_dom","forecasts_options_dataset","forecasts_chart_options_group","top10_opportunities_duration_options","history_filter_options","generic_timeperiod_options","opportunity_metrics_dom"];e._app_strings=_.union(_.keys(e.baseMetadata.app_strings),["LBL_TRY_AGAIN","LBL_FAVORITES_FILTER","LBL_ACTIVITY_STREAM","LBL_RECORD_NOT_FOUND","LBL_RELATED_RECORD_NOT_FOUND","LBL_NOT_AUTHORIZED","LBL_SET_FONTSIZE","LBL_LATER","LBL_ACTION_UPDATE","LBL_ACTION_CREATE","LBL_ACTION_DELETE","LBL_ACTION_LINK","LBL_ACTION_UNLINK","LBL_ACTION_FAVORITE","LBL_ACTION_FOLLOW","LBL_ROLLBACK_BUTTON","LBL_UNLINKING","LBL_DELETING","LBL_SAVING","LBL_UNLINKED","LBL_DELETED","LBL_SAVED","LBL_MOBILE_CHOOSE_RECIPIENT","LBL_MOBILE_CHOOSE_PHONE","LBL_MOBILE_CHOOSE_URL","LBL_MOBILE_DOC","LBL_MOBILE_CHOOSE_DOC","LBL_MOBILE_CHOOSE_LOCATION","LBL_MOBILE_WAIT","LBL_MOBILE_LOG_CALL_CONFIRM","LBL_MOBILE_TUTORIAL_HOME_MENU","LBL_MOBILE_TUTORIAL_HOME_PLUS","LBL_MOBILE_TUTORIAL_DETAIL_EDIT_ACTION","LBL_MOBILE_TUTORIAL_HOME_SWIPE","LBL_MOBILE_DOWNLOAD_STARTED","LBL_MOBILE_DOWNLOAD_COMPLETED","LBL_UPCOMING","LBL_MOBILE_NO_RECORDS","LBL_RECENTLY_UPDATED","LBL_RECENTLY_VIEWED","LBL_MOBILE_NO_ACTIONS_AVAILABLE","LBL_DELETE_BUTTON","LBL_SAVE_BUTTON_LABEL","LBL_HOME","LBL_ENABLE","LBL_SKIP","LBL_MOBILE_DESKTOP","LBL_LOGOUT","LBL_RECORDS","LBL_MOBILE_SEARCH_PLACEHOLDER","LBL_DONE_BUTTON_LABEL","LBL_OPTIONAL","LBL_CHOOSE_LINK","LBL_NO_ACCESS","LBL_NO_ACCESS_LOWER","LBL_CHOOSE_PARENT_TYPE","LBL_RELATED_MODULE","LBL_MOBILE_UPLOAD_IN_PROGRESS","LBL_MOBILE_UPLOAD_SUCCESS","LBL_MOBILE_PROCESSING_IMAGE","LBL_MOBILE_PROCESSING_FILE","LBL_MOBILE_DELETE_CONFIRM","LBL_DUPLICATE_BUTTON_LABEL","LBL_CREATE_RELATED_RECORD","LBL_ASSOC_RELATED_RECORD","LBL_MOBILE_SELECT_TEAMS","LBL_CHOOSE_ITEMS","LBL_VIEW_BUTTON","LBL_EDIT_BUTTON","LBL_UNLINK_BUTTON","LBL_CALL_BUTTON","LBL_SMS_BUTTON","LBL_EMAIL_BUTTON","LBL_MAP_BUTTON","LBL_URL_BUTTON","LBL_FILE_BUTTON","LBL_FOLLOW","LBL_UNFOLLOW","LBL_FAVORITE","LBL_UNFAVORITE","LBL_FOLLOWING","LBL_MOBILE_SHOW_MORE_TOP","LBL_MOBILE_SHOW_MORE","LBL_MOBILE_DETAIL_SHOW_MORE","LBL_MOBILE_DETAIL_SHOW_LESS","LBL_MOBILE_PTR_RELEASE","LBL_LOADING_FILES","LBL_MOBILE_UNLINK_CONFIRM","LBL_INVITEES","LBL_SEND_INVITE","LBL_SELECT_ACTION_LABEL","LNK_SETTINGS","LBL_LANGUAGE","LBL_NAME","LBL_NONE","LBL_TIME_RELATIVE","LBL_TIME_AGO_NOW","LBL_TIME_AGO_SECONDS","LBL_TIME_AGO_MINUTE","LBL_TIME_AGO_MINUTES","LBL_TIME_AGO_HOUR","LBL_TIME_AGO_HOURS","LBL_TIME_AGO_DAY","LBL_TIME_AGO_DAYS","LBL_TIME_AGO_YEAR","LBL_TIME_UNTIL_SECONDS","LBL_TIME_UNTIL_MINUTE","LBL_TIME_UNTIL_MINUTES","LBL_TIME_UNTIL_HOUR","LBL_TIME_UNTIL_HOURS","LBL_TIME_UNTIL_DAY","LBL_TIME_UNTIL_DAYS","LBL_TIME_UNTIL_YEAR","LBL_NOT_AVAILABLE","LBL_FILE_SIZE_UNITS_B","LBL_FILE_SIZE_UNITS_KB","LBL_FILE_SIZE_UNITS_MB","LBL_USE_HTTPS","LBL_RECONFIGURE_LOGIN_SETTINGS_CONFIRM","LBL_TRIAL_PERIOD_EXPIRED","LBL_TOUCHID","LBL_ENABLE_TOUCHID","LBL_SETUP_TOUCHID","LBL_TOUCH_ID_AUTHENTICATE_SUBTITLE","LBL_TOUCH_ID_NOT_ENROLLED_MSG","LBL_TOUCH_ID_DISCLAIMER","LBL_TOUCH_ID_ENABLE_CONFIRM_MSG","LBL_TOUCH_ID_ENTER_PASSWORD_TITLE","LBL_SETUPBUDDY_HEADER_TITLE","LBL_SETUPBUDDY_TOUCH_ID_ADDITIONAL_DISCLAIMER","ERR_GEOLOCATION_PERMISSION_DENIED","ERR_GEOLOCATION_POSITION_UNAVAILABLE_MSG","ERR_GEOLOCATION_POSITION_TIMEOUT_MSG","ERR_GEOLOCATION_PLACEMARKS_UNAVAILABLE_MSG","ERR_GEOLOCATION_INVALID_COORDINATES_MSG","LBL_REMOVE","LBL_TODAY","LBL_FUTURE","LBL_CLOSE_BUTTON_TITLE","LBL_CLOSE_AND_SAVE_BUTTON","LBL_MOBILE_SPECIFIC_DASHBOARD","LBL_MOBILE_SPECIFIC_MODULE","LBL_MOBILE_DEFAULT_VIEW","LBL_MOBILE_DEFAULT_MODULE","LBL_MOBILE_DEFAULT_DASHBOARD","LBL_MOBILE_DEFAULT_DASHLET","LBL_MOBILE_GLOBAL_SEARCH","LBL_DASHBOARDS_CHANGED_PROMPT","LBL_DEFAULT_HELP_DASHBOARD_TITLE","LBL_DEFAULT_HELP_DASHLET_TITLE","LBL_LEARNING_RESOURCES_NAME","LBL_DASHLET_RECENT_TWEETS_SUGARCRM_NAME","TPL_DASHLET_MY_MODULE","LBL_DEFAULT_DASHBOARD_TITLE","LBL_ACTIVE_TASKS_DASHLET_DUE_NOW","LBL_ACTIVE_TASKS_DASHLET_UPCOMING","LBL_ACTIVE_TASKS_DASHLET_TODO","LBL_COMMENT","LBL_ACTIVITY_CREATE","LBL_ACTIVITY_UPDATE","LBL_ACTIVITY_LINK","LBL_ACTIVITY_UNLINK","LBL_MOBILE_ACTIVITYSTREAM_POST_PLACEHOLDER","LBL_SUBMIT_BUTTON_LABEL","LBL_SHOWING_CACHED_DATA","LBL_DASHLET_FORECASTS_GROUPBY","LBL_DASHLET_FORECASTS_DATASET","LBL_DASHLET_FORECASTS_CHART_NAME","LBL_LIKELY","LBL_BEST","LBL_ACTIVE_TASKS_DASHLET","LBL_INACTIVE_TASKS_DASHLET_DEFERRED","LBL_INACTIVE_TASKS_DASHLET_COMPLETED","LBL_ALL_DASHLETS","LBL_MOBILE_NEW_COMMENT","LBL_TWITTER_REPLY","LBL_TWITTER_RETWEET","LBL_TWITTER_FAVORITE","LBL_CONNECT_TEST_FAIL","LBL_ERROR_CANNOT_FIND_TWITTER","LBL_CONFIGURE_TWITTER","LBL_PLANNED_ACTIVITIES_DASHLET","LBL_HISTORY_DASHLET","LBL_DASHLET_OPPORTUNITY_NAME","LBL_DASHLET_CASES_SUMMARY_NAME","LBL_DASHLET_CASESSUMMARY_SUMMARY","LBL_DASHLET_CASESSUMMARY_OPEN_CASES","LBL_DASHLET_CASESSUMMARY_CLOSE_CASES","LBL_OFFLINE_MODE","LBL_OFFLINE_PREFETCH_PROMPT","LBL_OFFLINE_PREFETCH_FIRST_PROMPT","LBL_OFFLINE_PREFETCH_SUCCESS","LBL_OFFLINE_PREFETCH_ERROR","LBL_OFFLINE_PREFETCH_ACTION","LBL_OFFLINE_PREFETCH_RELATED_ACTION","LBL_OFFLINE_PREFETCHING","LBL_OFFLINE_PREFETCHING_MODULE","LBL_OFFLINE_PREFETCHING_EST_TIME","LBL_OFFLINE_PREFETCHING_RELATIONSHIP","LBL_OFFLINE_PREFETCHING_MODULE_COMPLETE","LBL_OFFLINE_DB_CLEANING_IN_PROGRESS","LBL_OFFLINE_DB_CLEANING_COMPLETED","LBL_OFFLINE_ROLLBACK_PROMPT","LBL_OFFLINE_ROLLBACK_FAILED","LBL_OFFLINE_ROLLBACK_SUCCESS","LNK_OFFLINE_SETTINGS","LBL_OFFLINE_ENABLE_PROMPT","LBL_OFFLINE_DISABLE_PROMPT","LBL_OFFLINE_ENABLED","LBL_OFFLINE_DISABLED","LBL_OFFLINE_CLEAR_DB","LBL_OFFLINE_COMPACT_DB","LBL_OFFLINE_CLEAN_UP_PROMPT","LBL_OFFLINE_CLEAR_DB_PROMPT","LBL_OFFLINE_SERVER_FETCH","LBL_OFFLINE_MERGE_DATA_CONFIRM","LBL_OFFLINE_LAST_SYNC_TS","LBL_OFFLINE_SYNC_IN_PROGRESS","LBL_OFFLINE_TRANSACTION_SYNCED","LBL_OFFLINE_TOTAL_RECORDS","LBL_OFFLINE_LAST_DOWNLOAD","LBL_OFFLINE_DB_SIZE","LBL_OFFLINE_DATA_ENCRYPTION_ENABLED","LBL_OFFLINE_RECORDS_PER_MODULE","LBL_TX_LOG","LBL_TX_LOG_DETAIL","LBL_OFFLINE_SETTINGS","LBL_OFFLINE_STATS","LBL_ACTION_CREATE_EXPLANATION","LBL_ACTION_UPDATE_EXPLANATION","LBL_ACTION_DELETE_EXPLANATION","LBL_ACTION_LINK_EXPLANATION","LBL_ACTION_UNLINK_EXPLANATION","LBL_ACTION_FAVORITE_EXPLANATION","LBL_ACTION_FOLLOW_EXPLANATION","LBL_ACTION_UNFOLLOW_EXPLANATION","LBL_ACTION_UNFAVORITE_EXPLANATION","LBL_ACTION_CREATE_RELATED_EXPLANATION","LBL_EMAIL_ACTION_SET_PRIMARY","LBL_EMAIL_ACTION_SET_OPT_OUT","LBL_EMAIL_ACTION_SET_OPT_IN","LBL_EMAIL_ACTION_SET_VALID","LBL_EMAIL_ACTION_SET_INVALID","LBL_EMAIL_ADD","LBL_RECORD_DELETED","LBL_COLLECTION_PRIMARY","LBL_TEAM_SET_SELECTED","ERR_MOBILE_EMAIL","ERR_MOBILE_FILE_NOT_SUPPORTED","ERR_MOBILE_FILE_READ","ERR_MOBILE_FILE_NOT_FOUND","ERR_MOBILE_FILE_NOT_READABLE","ERR_MOBILE_FILE_ABORTED","ERR_MOBILE_FILE_SECURITY","ERR_MOBILE_FILE_SIZE_LIMIT_EXCEEDED","ERR_MOBILE_BROWSER_NOT_AUTHORIZED","ERR_MOBILE_BROWSER_FORBIDDEN","ERR_MOBILE_BROWSER_PAGE_NOT_FOUND","ERR_MOBILE_BROWSER_INTERNAL_SERVER_ERROR","ERR_MOBILE_BROWSER_SERVICE_UNAVAILABLE","ERR_MOBILE_STORAGE_UNAVAILABLE","ERR_MOBILE_GENERIC_NATIVE_ERROR","ERR_MOBILE_FILE_PROCESSING","ERR_MOBILE_METADATA_CHANGED","ERR_MOBILE_DASHBOARDS_FETCHING","ERR_FILTERS_FETCHING","ERR_NO_DOCS","ERR_MOBILE_UPLOAD","ERR_MOBILE_VALIDATION","ERR_NO_RECORDS_SELECTED","ERR_RENDER_FAILED_TITLE","ERR_RENDER_FAILED_MSG","ERR_RENDER_FIELD_FAILED_MSG","ERR_CONTACT_TECH_SUPPORT","ERR_NO_VIEW_ACCESS_TITLE","ERR_LAYOUT_RENDER_TITLE","ERR_INTERNAL_ERR_MSG","ERROR_MAXVALUE","ERROR_MINVALUE","ERROR_MAX_FIELD_LENGTH","ERROR_MIN_FIELD_LENGTH","ERROR_DATETIME","ERROR_FIELD_REQUIRED","ERROR_EMAIL","ERROR_NUMBER","ERROR_IS_BEFORE","ERROR_IS_AFTER","ERROR_IS_GREATER_THAN","ERROR_IS_LESS_THAN","ERROR_DUPLICATE_EMAIL","ERR_MOBILE_CONFLICT","ERR_MOBILE_VIEW_NOT_SUPPORTED","ERR_OFFLINE","ERR_OFFLINE_STORAGE_UNAVAILABLE","ERR_OFFLINE_STORAGE_CREATE","ERR_OFFLINE_START_FAILED_OUT_OF_SPACE","ERR_OFFLINE_OUT_OF_SPACE","ERR_OFFLINE_CLEAN_UP_CONFIRMATION","ERR_OFFLINE_PREFETCH_FAILED","ERR_OFFLINE_DB_CLEANING_ERROR","ERR_OFFLINE_SYNC_CONFLICT","ERR_OFFLINE_SYNC_ERROR","ERR_OFFLINE_SERVERTIME_UNAVAILABLE","ERR_OFFLINE_NO_CONNECTION_ENABLE_ERROR","ERR_OFFLINE_ENCRYPTION_FAILED","LBL_OFFLINE_ENCRYPTION_IN_PROGRESS","LBL_OFFLINE_ENCRYPTION_SUCCESS","LBL_RELATED_RECORD_DEFAULT_NAME","LBL_RELATED_MODULE","LBL_CREATE_RELATED","LBL_CREATE_MODULE","LBL_RELATED_MODULE","LBL_EDIT_RELATED","LBL_EDIT","LBL_ASSOC_EXISTING","LBL_ASSOC","LBL_ASSIGN","LBL_RELATED_MODULE_PLURAL","LBL_CHART_LEGEND_CLOSE","LBL_CHART_LEGEND_OPEN","LBL_CHART_NO_DATA","LBL_DASHLET_TOP10_SALES_OPPORTUNITIES_NAME","LBL_DASHLET_PIPLINE_NAME","LBL_CHART_UNDEFINED","LBL_NO_FIELD_ACCESS","LBL_RECORD_SHARE_BUTTON","TPL_RECORD_SHARE_SUBJECT","TPL_RECORD_SHARE_BODY","LBL_MOBILE_BY","LBL_MOBILE_FILTER_IS_NOT_AVAILABLE","LBL_BULK_LOAD_OFFLINE_RECORDS","LBL_BULK_LOAD_DOWNLOAD_SETTINGS","LBL_BULK_LOAD_PREFETCH_MESSAGE","LBL_BULK_LOAD_COMPLETED_MESSAGE","LBL_BULK_LOAD_ERROR_CONFIRM","LBL_BULK_LOAD_USE_CELLULAR","LBL_BULK_LOAD_NOT_RIGHT_NOW","LBL_BULK_LOAD_PAUSED_MESSAGE","LBL_BULK_LOAD_STATUS_DOWNLOADING","LBL_BULK_LOAD_STATUS_IDLE","LBL_BULK_LOAD_STATUS_WAITING_FOR_CONNECTION","LBL_BULK_LOAD_STATUS_PAUSED","LBL_BULK_LOAD_STATUS_STOPPING","LBL_BULK_LOAD_BTN_DOWNLOAD","LBL_BULK_LOAD_BTN_PAUSE","LBL_BULK_LOAD_BTN_RESUME","LBL_BULK_LOAD_CONNECTION_USE_MESSAGE"]);e.mod_strings={}})(SUGAR.App)},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(269);(function a(){var e=i.metadata.set;var t=["collection"];var n=["teamset","multienum","image","file"];function a(e){var t=e.filters;if(!t||!t.basic||!t.basic.meta){return[]}return _.pluck(t.basic.meta.filters,"name")}function s(e,t,n,r){var a,s=/.*?(?:translateLabel\((?:'|")(\w+)(?:'|")\s*,\s*(?:'|")(\w*)(?:'|")\)).*?/gm,o=[/.*?(?:getDropdownValue\((?:'|")(\w+)(?:'|"))+.*?/gm,/.*?(?:getDropdownKeySet\((?:'|")(\w+)(?:'|"))+.*?/gm,/.*?(?:getDropdownValueSet\((?:'|")(\w+)(?:'|"))+.*?/gm];i.nomad.utils.execRegex(e,s,function(e){var i=e[2];if(!_.isEmpty(i)){n[i]=n[i]||{};n[i][e[1]]=true}else{t[e[1]]=true}});var l=function u(e){r[e[1]]=true};for(a=0;a<3;++a){i.nomad.utils.execRegex(e,o[a],l)}}function o(e){_.each(e,function(t,n){if(i.config.dashboards.dashlets[n]||t.meta&&t.meta.tabs){if(t.templates){t.templates=null}}else{delete e[n]}})}function l(e,t){if(t&&e){_.each(t,function(n,i){if(e[i])return;delete t[i]})}}function u(e){var t=_.chain(e.subpanels.subpanel_setup).values().sortBy(function(e){return e.order}).value();_.each(t,function(e){e.context={link:e.get_subpanel_data};e.label=e.title_key;f(e,["subpanel_name","title_key","get_subpanel_data","order"])});e.layouts=_.extend(e.layouts||{},{subpanels:{meta:{components:t}}});delete e.subpanels}function c(e,t){if(e._hash==="_base_")return;var r=null;e.modules=_.omit(e.modules,"Forecasts");_.each(e.modules,function(a,s){var o=[];_.each(a.views,function(e){if(e.meta&&e.meta.panels){var t=_.chain(e.meta.panels[0].fields).filter(function(e){return e.type!=="link"}).map(function(e){return _.isString(e)?{name:e}:e}).value();_.each(t,function(e){if(_.contains(n,e.type)){e.sortable=0}});r=new i.view.View({context:i.context.getContext(),meta:{panels:[{fields:t}]}});o=_.union(o,r.getFieldNames(s));r.dispose();if(_.contains(o,"email")){o.push("email1")}}});if(s==="Activities"){return}o=_.union(o,t?["name","my_favorite","following"]:["name"]);if(_.find(o,function(e){return a.fields[e]&&a.fields[e].type==="currency"})){o=_.union(o,["currency_id"])}if(s==="Opportunities"){o=_.union(o,["closed_revenue_line_items"])}if(s==="Documents"){o=_.union(o,["doc_url","doc_type","filename"])}if(!e.server_info.ftsEnabled||!a["ftsEnabled"]){o=_.chain(a.fields).filter(function(e){return!!e.unified_search&&e.type!=="link"}).map(function(e){return e.name}).union(o).value()}a.mergedFields=_.union(a.mergedFields||[],o);var l=/\$[a-z_]+/gi,u=[];a.fields&&_.each(a.mergedFields,function c(e){if(a.fields[e]&&a.fields[e].formula){var t=a.fields[e].formula.match(l);_.each(t,function(e){e=e.substr(1);if(a.fields[e]&&a.fields[e].type!=="link"&&!_.contains(u,e)&&!_.contains(a.mergedFields,e)){u.push(e);c(e)}})}});a.mergedFields=_.union(a.mergedFields,u)})}function d(e){var t=e.toUpperCase();if(t.substr(-2)==="_C"){t=t.substr(0,t.length-2)}return"LBL_"+t}function f(e,t){_.each(t,function(t){if(t instanceof RegExp){f(e,_.filter(_.keys(e),function(e){return t.test(e)}))}else{delete e[t]}})}i.metadata.set=function(n,h,p){var m=_.getNested(n,"modules.Opportunities.config.opps_view_by");if(n.modules_info&&n.modules_info.RevenueLineItems&&m&&m!=="RevenueLineItems"){n.modules_info.RevenueLineItems.visible=n.modules_info.RevenueLineItems.display_tab=false}if(n._override_values){_.each(n._override_values,function(e,t){if(!n[e]){delete n._override_values[t]}})}if(n.config){var g={};_.extend(g,i.analytics.processConfig(n.config));_.extend(g,r.processConfig(n.config));g.offlineEnabled=Boolean(n.config.offlineEnabled);n.config=g}var v=false;if(n.server_info){v=i.nomad.isSevenUp(n.server_info);n.server_info.isSevenUp=v}else{n.server_info={}}if(!p&&n._hash!=="_base_"){o(n.views);var y=i.metadata.getHash();if(y!==n._hash&&y!=="_base_"){if(n.modules){i.logger.debug("Metadata hash has changed. Resetting to base.");i.metadata.reset();i.metadata.set(JSON.parse(JSON.stringify(i.baseMetadata)),false,true)}else{n._hash=y}}i.nomad.initSupportedFeatures();i.nomad.updateSupportedFeatures(n);if(n.app_list_strings&&n.app_list_strings.available_language_dom)delete n.app_list_strings.available_language_dom[""];if(!n.currencies){n.currencies={}}_.each(n.currencies,function(e){e.conversion_rate=e.conversion_rate||e.rate});_.each(n.modules_info,function(e,t){if(_.contains(i.config.modules.unsupportedModules,t)){delete n.modules_info[t]}});if(n.modules_info){_.each(i.config.modules.hiddenModules,function(e){if(n.modules_info[e]){n.modules_info[e].visible=false}})}if(!n.mod_strings)n.mod_strings={};n.mod_strings=_.extend({},i.mod_strings,n.mod_strings);var b=i.config.modules.unsupportedModules||[];_.each(n.modules,function(e,t){if(_.contains(b,t)){delete n.modules[t];delete n.mod_strings[t]}});var x=_.contains(["ENT","ULT"],n.server_info.flavor);var w="portal_flag";if(_.isEmpty(n.relationships))n.relationships={};var L=n.relationships.tasks_notes;if(L){L.relationship_role_column="parent_type";L.relationship_role_column_value="Tasks";L.relationship_type="one-to-many"}_.each(n.relationships,function(e,t){if(t==="_hash"){return}e=e||{};e.relationship_type=e.true_relationship_type||e.relationship_type;if(n.modules[e.lhs_module]&&n.modules[e.rhs_module]){if(e.relationship_role_column==="parent_type"||t==="contact_tasks"||t==="contact_notes"){e.via_parent_id=true}}else{delete n.relationships[t]}});if(n.relationships.accounts_opportunities){n.relationships.accounts_opportunities={
lhs_key:"id",lhs_module:"Accounts",lhs_table:"accounts",name:"accounts_opportunities",relationship_type:"one-to-many",rhs_key:"account_id",rhs_module:"Opportunities",rhs_table:"opportunities"}}_.extend(n.relationships,i.baseMetadata.relationships);var S={};var E={};var k={};_.each(n.modules,function(e,r){if(e._patched)return;if(v)delete e.subpanels;var a=k[r]||{},o={};k[r]=a;var l=["fieldTemplates","menu"];if(r!=="Forecasts"){l.push("config")}f(e,l);if(r!=="Activities"&&e.filters){e.filters={basic:e.filters.basic,"default":e.filters.default}}if(e.layouts){f(e.layouts,_.filter(_.keys(e.layouts),function(e){return!_.contains(["list","detail","edit","subpanels"],e)}));if(e.layouts.subpanels&&e.layouts.subpanels.meta&&e.layouts.subpanels.meta.components){if(!_.isArray(e.layouts.subpanels.meta.components)){delete e.layouts.subpanels}else{_.each(e.layouts.subpanels.meta.components,function(e){a[e.label]=true})}}}if(e.views){f(e.views,_.filter(_.keys(e.views),function(e){return!_.contains(["list","detail","edit","forecast-pipeline"],e)}))}if(e.views&&e.views["forecast-pipeline"]){var c=e.views["forecast-pipeline"];_.extend(c.meta.timeperiod[0],{type:"enum",view:"edit"});delete c.meta.panels;delete c.templates}if(!x){delete e.fields[w]}if(r==="RevenueLineItems"||r==="Products"){if(e.fields.opportunity_name&&e.fields.opportunity_id&&e.fields.opportunity_id.required){e.fields.opportunity_name.required=true}}_.each(e.fields,function(n,i){if(_.contains(t,n.type)){delete e.fields[i];return}if(i!=="_hash"&&_.isEmpty(n.name)){delete e.fields[i];return}f(n,["comment","dbType","isnull","table","reportable","audited","join_name","merge_filter","duplicate_merge","bean_name","cols","rows","function","importable","massupdate","studio","bean_filter_field","link_class","link_file","rhs_key_override","enable_range_search","duplicate_merge_dom_value","help","no_default","comments","custom_module","db_concat_fields","sort_on","subquery","query_type","operator","db_field","custom_type"]);a[n.vname]=true;if(n.type==="id")delete n.len;if(n.formula)s(n.formula,S,k,E);if(n.options)E[n.options]=true;if(n.type==="relate"||n.type==="parent")delete n.len;if(n["link-type"]&&!n.link_type)n.link_type=n["link-type"];if(n.relationship_fields){o[n.name]=true;_.each(n.relationship_fields,function(t){o[t]=true;var n=e.fields[t];if(n){a[n.vname]=true;if(n.options)E[n.options]=true}})}if(n.required&&e.fields.email&&n.name==="email1"){e.fields.email.required=true}});var h=e.fields.team_name;if(h){delete h.len;h.type="teamset"}h=e.fields.name;if(h){h.type="name"}if(r==="Meetings"){h=e.fields.date_start;if(h&&h.validation){delete h.validation.compareto}}else if(r==="Activities"){e.views=i.baseMetadata.modules.Activities.views;e.views["activitystream-dashlet"].meta.view.limit=i.config.fetchLimit.activities}if(e.views){delete e.views.listview;delete e.views.search;if(e.views.edit&&e.views.edit.meta&&e.views.edit.meta.panels){_.each(e.views.edit.meta.panels[0].fields,function(e){if(_.isObject(e)&&(e.name==="reminder"||e.name==="email_reminder")){_.each(["fields","related_fields"],function(t){_.find(e[t],function(n,i){if((n.name||n)===e.name+"_checked"){e[t].splice(i,1);return true}})})}})}}var p;if(n.mod_strings&&n.mod_strings[r]){if(n.mod_strings[r].LBL_EMAIL)p="LBL_EMAIL";else if(n.mod_strings[r].LBL_EMAIL_ADDRESS)p="LBL_EMAIL_ADDRESS"}var m=/^(?=.*address)((?!email).)*$/;var g=_.find(e.fields,function(e){return e.type==="file"});if(r!=="Forecasts"){_.each(e.views,function(t,n){if(t.meta){delete t.meta.templateMeta;if(t.meta.panels){if(t.meta.panels.length)t.meta.panels.length=1;if(t.meta.panels[0]){var s=[];var l=t.meta.panels[0].fields;var u=-1;delete t.meta.panels[0].label;l=_.reject(l,function(t){var a=_.isString(t)?t:t.name;var s=_.isEmpty(e.fields[a])&&t.type!=="fieldset";if(s)i.logger.error(r+"."+n+"."+a+" field is missing vardef");return s});if(n==="list"){l=_.filter(l,function(e){return!!e["default"]})}t.meta.panels[0].fields=l;_.each(l,function(t,i){var r=_.isObject(t),c=r?t.name:t,h=e.fields[c],g;if(t.options)E[t.options]=true;o[c]=true;a[t.label||h.vname]=true;if(h){if(h.options)E[h.options]=true;if(h.type==="relate"){o[h.id_name]=true;o[h.link]=true}else if(h.type==="parent"){o["parent_id"]=true;o["parent_type"]=true}}if(t.type==="fieldset"){_.each(t.fields,function(t){o[t.name]=true;if(t["default"])a[t["default"]]=true;else a[t.label||e.fields[t.name].vname]=true;if(t.options)E[t.options]=true})}if(!x&&c===w){u=i}if(r){f(t,["default","enabled","link","width","wireless_edit_only","customCode"]);if(m.test(t.name)&&h){if(n==="edit"||n==="detail"){g=_.extend(t,{index:i});if(!g.group){g.group=h.group}if(g.group)s.push(g)}else if(t.group||h.group){a[d(t.group||h.group)]=true}}if(t.name==="email1"){l[i]={name:"email",type:"email",label:t.label||p,required:h.required};a[t.label||p]=true;o.email=true}}else{if(m.test(c)&&h){if((n==="edit"||n==="detail")&&h.group){s.push({name:c,group:h.group,index:i})}else if(h.group){a[d(h.group)]=true}}if(t==="email1"){l[i]={name:"email",type:"email",label:p,required:h.required};a[p]=true;o.email=true}}});if(u!==-1){l.splice(u,1)}var c={};if(s.length>0){c=_.groupBy(s,"group");var h=0;_.each(c,function(e,t){var n=e[0].index-h;_.each(e,function(e){l.splice(n,1)});var i={name:t,fields:_.pluck(e,"name"),type:"address",label:d(t)};l.splice(n,0,i);h+=e.length-1;a[i.label]=true})}if(n==="edit"&&(r==="Meetings"||r==="Calls")){l.push({name:"send_invites",type:"bool",label:"LBL_SEND_INVITE"});l.push({name:"invitees",type:"invitees",label:"LBL_INVITEES"})}}}var v=_.map(t.meta.panels[0].fields,function(e){return e.name||e});if(g&&!_.contains(v,g.name)&&n==="edit"&&r!=="Notes"){t.meta.panels[0].fields.push(g.name)}}})}var y=[];var L=[];var T=function M(e,t,r){y.push(t);t=e[t];if(t){var s=1e3;_.each(t.collection_list,function(t,o){if(!e[o]&&!t.generate_select&&!_.contains(L,t.module)&&!_.contains(b,t.module)){t.title_key="LBL_"+t.get_subpanel_data.toUpperCase()+"_SUBPANEL_TITLE";t.order=-s++;t.creatable=!_.contains(i.config.modules.nonCreatableModules,t.module);t.linkable=false;e[o]=t;var l=n.mod_strings[r];if(l&&!l[t.title_key]){l[t.title_key]=t.module}a[t.title_key]=true;L.push(t.module)}})}};if(_.isObject(e.subpanels)&&!_.isArray(e.subpanels)&&!_.isEmpty(e.subpanels.subpanel_setup)){_.each(e.subpanels.subpanel_setup,function(t,s){if(!t)return;if(s!=="activities"&&s!=="history"){if((r==="Meetings"||r==="Calls")&&_.contains(["Users","Leads","Contacts"],t.module)){t.linkable=true;t.creatable=t.module!=="Users";a[t.title_key]=true}else{if(t.panel_definition){if(t.module!=="Users"){t.creatable=!_.contains(i.config.modules.nonCreatableModules,t.module)&&!_.isEmpty(_.find(t.top_buttons,function(e){return!e.widget_class||e.widget_class.indexOf("Create")>-1}));t.linkable=!_.contains(i.config.modules.nonLinkableModules,t.module)&&!_.isEmpty(_.find(t.top_buttons,function(e){return!e.widget_class||e.widget_class.indexOf("Select")>-1}));a[t.title_key]=true}else{y.push(s)}}else{t.creatable=(_.isUndefined(t.canCreate)?true:t.canCreate)&&!_.contains(i.config.modules.nonCreatableModules,t.module);t.linkable=(_.isUndefined(t.canLink)?true:t.canLink)&&!_.contains(i.config.modules.nonLinkableModules,t.module);a[t.title_key]=true}}if(t.panel_definition)t.order=-t.order;if(t.get_subpanel_data&&t.get_subpanel_data.indexOf("function:")===0)t.get_subpanel_data=t.set_subpanel_data;var o=e.fields[t.get_subpanel_data];if(!o||!n.relationships[o.relationship]){y.push(s);delete a[t.title_key];if(n.modules[t.module])i.logger.error("Invalid "+r+"."+s+" subpanel")}}f(t,["add_subpanel_data","set_subpanel_data","top_buttons","panel_definition","sort_by","sort_order","subpanel_name"])});T(e.subpanels.subpanel_setup,"activities",r);T(e.subpanels.subpanel_setup,"history",r);_.each(y,function(t){delete e.subpanels.subpanel_setup[t]});u(e)}else{delete e.subpanels}});n.views&&_.each(i.baseMetadata.views,function(e,t){if(!n.views[t]){n.views[t]=e}});if(!i.config.skipStringCleanup){if(_.isEmpty(n.modules)&&!_.isEmpty(i.metadata.getModules())){l(i.metadata.getStrings("app_strings"),n.app_strings);l(i.metadata.getStrings("app_list_strings"),n.app_list_strings);if(!_.isEmpty(n.mod_strings)){var T=i.metadata.getStrings("mod_strings");_.each(T,function(e,t){l(e,n.mod_strings[t])})}}else{if(n.mod_strings&&!n.mod_strings._patched){n.mod_strings=_.pick(n.mod_strings,_.union(_.keys(n.modules),[m]));_.each(n.mod_strings,function(e,t){_.each(e,function(e,r){var s=n.modules[t];var o=k[t]||{};var l=[];if(s){l=a(s)}if(!o[r]&&!_.contains(_.union(i._mod_strings,l),r)){delete n.mod_strings[t][r]}_.each(o,function(e,t){if(!n.mod_strings[t])S[t]=true})})});n.mod_strings._patched=true}if(n.app_list_strings&&!n.app_list_strings._patched){_.each(n.app_list_strings,function(e,t){if(!E[t]&&!_.contains(i._app_list_strings,t)){delete n.app_list_strings[t]}});n.app_list_strings._patched=true}if(n.app_strings&&!n.app_strings._patched){_.each(i._app_strings,function(e){S[e]=true});_.each(n.app_strings,function(e,t){if(!S[t]){delete n.app_strings[t]}});n.app_strings._patched=true}}}if(n.app_list_strings.reminder_time_options){if(!_.isArray(n.app_list_strings.reminder_time_options)){var M=[],A=_.keys(n.app_list_strings.reminder_time_options).sort(function(e,t){return e-t});_.each(A,function(e){M.push([e,n.app_list_strings.reminder_time_options[e]])});n.app_list_strings.reminder_time_options=M}var C=_.find(n.app_list_strings.reminder_time_options,function(e){return e[0]==-1});if(!C){n.app_list_strings.reminder_time_options.unshift([-1,n.app_strings.LBL_NONE])}}}if(n.views&&n.views["forecastdetails"]){n.views["forecastdetails"].meta.timeperiod[0].type="enum"}if(n.views&&n.views["bubblechart"]){_.extend(n.views["bubblechart"].meta.filter_duration[0],{type:"enum",view:"edit"})}e.call(this,n,h,p);c(n,v)}})();(function s(){var e={base:1,bool:1,currency:1,date:1,datetimecombo:1,email:1,emailbody:1,"enum":1,"float":1,file:1,image:1,"int":1,multienum:1,name:1,parent:1,password:1,phone:1,radioenum:1,relate:1,address:1,invitees:1,send_invites:1,teamset:1,text:1,textarea:1,url:1,tag:1};var t={image:function s(){return i.supportedFeatures["fileUpload"]?undefined:["edit"]},password:["edit"],emailbody:["list"],html:[],encrypt:[],currency_id:[]},r={currency_symbol:[]};var a=i.metadata._patchMetadata;i.metadata._patchMetadata=function(i,s){if(!s||s._patched===true){return s}a.apply(this,arguments);_.each(s.views,function(i,a){if(i.meta){_.each(i.meta.panels,function(i){var o=[];_.each(i.fields,function(i,l){if(_.isString(i)){return}var u=t[i.type];if(_.isFunction(u)){u=u()}if(u&&(u.length===0||_.contains(u,a))){o.push(l)}var c=r[i.name];if(c&&(c.length===0||_.contains(c,a))){o.push(l)}if(a==="edit"&&!(e[i.type]||_.contains(n(306).getCustomFields(),i.type))){i.view="readonly"}if(a==="edit"&&i.name==="date_modified"){i.view="readonly"}if(a==="edit"&&i.name==="date_entered"){i.view="readonly"}if(a==="edit"&&i.type==="url"&&s.fields[i.name]){var d=s.fields[i.name].gen,f=!isNaN(parseInt(d,10))?!!parseInt(d,10):!!d;if(f){i.view="readonly"}}});_.each(o,function(e,t){i.fields.splice(e-t,1)})},this)}},this);return s}})()},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(264);var s=n(262);var o=n(307);var l=n(312);var u=n(257);var c=n(295);var d=n(324);var f=[];var h=[];var p=[];var m=function y(e){i.logger.warn("Attempt to override the private method '"+e+"'")};function g(e,t,n,i){t=t||{};t.privateOverrideCb=m;if(!t.parent){switch(e){case"layout":t.parent=l;break;case"view":t.parent=u;break;case"field":t.parent=c;break;case"dashlet":t.parent=o;break}}var a=r.declareComponent(t,n,i);var s=t.register;if(_.isObject(s)){if(!s.componentType){s.componentType=e==="dashlet"?"view":e}v.registerComponent(a,s)}return a}var v=e.exports={declareView:function b(e,t,n){return g("view",e,t,n)},declareLayout:function x(e,t,n){e=e||{};n=n||{};n.config=_.omit(e,"register");n._layoutId=i.utils.generateUUID();return g("layout",e,t,n)},declareField:function w(e,t,n){return g("field",e,t,n)},registerComponent:function L(e,t){var n=r.registerComponent(e,t);if(t&&t.type){if(n.componentType==="view"&&r.utils.isComponentChildOf(o,e)){r.dashboards.registerDashlet(t.type,e)}else if(n.componentType==="field"){f.push(t.type)}}},declareDashlet:function S(e,t,n){var i=g("dashlet",e,t,n);i.prototype.defaults=_.pick(e,["iconKey","title"]);return i},registerRecordAction:function E(e){e.custom=true;h.push(e)},registerRoutes:function k(e,t){if(s.started){a.addRoutes(e)}else{i.events.once("app:init",function(){a.addRoutes(e,t)})}},getCustomActions:function T(){return h},getCustomFields:function M(){return f},registerMainMenuItem:function A(e){if(!e.route){e.route=i.utils.generateUUID()}p.push(e)},getCustomMainMenuItems:function C(){return _.select(p,function(e){return _.isFunction(e.isVisible)?e.isVisible():true})},registerListItemDataProvider:function R(e){d.add(e)}}},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(257);var s=n(308);e.exports=r.extendView(s,"BaseDashlet",{events:{"click .visibility-switcher":"changeVisibility"},initialize:function o(e){var t=e.meta.view.type;var n=this._getDefaultSettings(t);e.meta=i.utils.deepCopy(e.meta);if(n){e.meta.view=_.defaults(e.meta.view,n)}if(i.offlineEnabled){this.cacheStorage=i.nomad.dashboards.cacheDashletStore}this.dashletParams=i.metadata.getView("Home",t)||{};var r=_.defaults({type:this.name,module:this.module},e.meta.view);this.title=i.nomad.dashboards.getDashletTitle(r);this.activeRequests=[];this._super(e);this.initDashletOptions()},getTitle:function l(e){return _.getNested(this,"defaults.title")||e.label},_getDefaultSettings:function u(e){var t={"active-tasks":{visibility:"user"},"inactive-tasks":{visibility:"user"},history:{filter:7,visibility:"user"},"planned-activities":{date:"today",visibility:"user"}};return t[e]},dismissNetworkAlerts:function c(){i.alert.dismiss("network_error",{animate:false})},applyViewState:function d(e){if(!_.isEmpty(e.filters)){this.viewState.filters.set(e.filters,{silent:true})}if(e.visibility){this.viewState.visibility=e.visibility;this.viewState.myItemsOnly=e.visibility==="user";this.previousVisibilityState=this.viewState.visibility}this.viewState.filtersDef=e.filtersDef;this.render()},initDashletOptions:function f(){var e=this.getState(this.options.dashboardId,this.meta.id)||{};this.viewState={visibility:e.visibility||this.meta.view.visibility};this.viewState.myItemsOnly=this.viewState.visibility==="user";this.dashletOptionsTemplate=i.template.get("dashlet-options");this.initFilters(e);this.enableOptionsToolbar()},enableOptionsToolbar:function h(){if(this.dashletOptionsEnabled()){this.$el.addClass("has-dashlet-options")}},abortActiveRequests:function p(){var e=this._super();if(_.isEmpty(this.activeRequests)){return e}_.each(this.activeRequests,function(e){i.api.abortRequest(e.uid)});this.activeRequests=[];this.loaded=false;return true},onBeforeHide:function m(){i.alert.dismissAll()},onInvokedFromDashboard:function g(){},_render:function v(){this._super();if(this.dashletOptionsEnabled()){this.$el.prepend(this.dashletOptionsTemplate(this));this.$switcher=this.$(".visibility-switcher");this.$switcherBtns=this.$switcher.find(".btn");if(!_.isEmpty(this.fields)){this._renderFields()}}},_dispose:function y(){var e=this.getViewContainer();if(e){e.remove()}this.$switcher=this.$switcherBtns=null;this._super()},changeVisibility:function b(e){e.preventDefault();e.stopPropagation();var t=$(e.target);var n=t.hasClass("btn")?t:t.parent();var i=n.data("value");var r="active";if(i!==this.viewState.visibility){this.$switcherBtns.removeClass(r);n.addClass(r);this.viewState.visibility=i;this.refreshData()}},initFilters:function x(e){this.viewState.filtersDef={};this.viewState.filters=i.data.createBean("Filters");this.updateFiltersViewState(e);this.listenTo(this.viewState.filters,"change",function(){this.refreshData()})},updateFiltersViewState:function w(){},dashletOptionsEnabled:function L(){return this.viewState&&(this.viewState.visibility||!_.isEmpty(this.viewState.filtersDef))},refreshData:function S(e){this.saveState();this.abortActiveRequests();this.loadData(e)},saveState:function E(){var e=this.getSettingName();var t=i.nomad.getSetting(e)?JSON.parse(i.nomad.getSetting(e)):[];var n={visibility:this.viewState.visibility,filters:this.viewState.filters.toJSON(),dashboardId:this.options.dashboardId,dashletId:this.meta.id};var r;_.each(t,function(e,i){if(n.dashboardId===e.dashboardId&&n.dashletId===e.dashletId){t[i]=r=n}});if(!r){t.push(n)}i.nomad.setSetting(e,JSON.stringify(t))},getState:function k(e,t){var n=this.getSettingName();var r=i.nomad.getSetting(n);var a=r&&JSON.parse(r);if(_.isEmpty(a)){return}return _.find(a,function(n){return n.dashboardId===e&&n.dashletId===t})},getSettingName:function T(){return"dashlet_states"},apiCall:function M(){this.activeRequests.push(i.api.call.apply(i.api,arguments))},isSwipable:function A(){return true},toggleDashletSwipe:function C(){this.$el.toggleClass("no-swiping",!this.isSwipable())},onDetach:function R(){this.onBeforeHide();this._super()},getViewContainer:function D(){return this.$el}},{getOverridableMethods:function I(){return _.union(a.getOverridableMethods(),["apiCall","onBeforeHide","onInvokedFromDashboard","getViewContainer"])}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(257);var s=n(309);var o=n(310);var l=n(311);var u={TABS:s,DROPDOWN:o,PAGINATION:l};e.exports=r.extendView(a,"Container",{template:"container",activeIndex:0,viewSwitcher:null,omitSwitcherForOneView:true,lazyInit:true,lazyLoad:true,loadViewOnSwitch:false,loadSelfData:false,activeTabStorageKey:"",viewContainerCss:"tabs__container",switcherCss:"views__switcher",hiddenViewCss:"hide-tab",currentView:null,_viewDefs:null,_views:null,constructor:function c(e){var t=e.meta?e.meta.className:e.className;if(t!==undefined){this.className=t}this._super(e)},initialize:function d(e){var t=this;this._super(e);var n=e.meta||e;var i=["activeIndex","viewSwitcher","lazyInit","lazyLoad","loadViewOnSwitch","activeTabStorageKey","omitSwitcherForOneView","loadSelfData"];_.each(i,function(e){if(n[e]!==undefined){t[e]=n[e]}});if(this.activeTabStorageKey){this._restoreState()}if(!this.lazyLoad&&this.lazyInit){this.lazyInit=false}this._views=[];this.initViews(n.views,e);this.createSwitcher();if(!this.viewSwitcher){this.activeIndex=this.lazyInit=this.lazyLoad=false}if(!this.lazyInit){this.createViews()}},initViews:function f(e,t){this._viewDefs=e||t.views||[]},createViews:function h(){_.each(this._viewDefs,this.createView,this)},loadData:function p(e){this.loadOwnData(e);this.loadViewsData(e)},loadOwnData:function m(e){if(this.loadSelfData){a.prototype.loadData.apply(this,arguments)}},loadViewsData:function g(e){this._eachView(function(e){return e._dataObsolete=true});if(this.currentView){this.loadViewData(this.currentView,e)}if(!this.lazyLoad){this._eachView(function(t){if(t!==this.currentView){this.loadViewData(t,e)}})}},loadViewData:function v(e,t){var n=e.options;if(n.loadDataFn){if(n.getLoadParams){t=n.getLoadParams.call(e)}n.loadDataFn.call(e,t)}else{e.loadData(t)}e._dataObsolete=false},_render:function y(){this._super();if(!this.currentView&&_.isNumber(this.activeIndex)){this.switchView({index:this.activeIndex,skipLoad:true})}},onAfterRender:function b(){this._super();this.$viewContainer=this.$el.find("."+this.viewContainerCss).first();this.renderSwitcher();if(!this.lazyInit){_.each(this._views,this._renderView,this)}},renderSwitcher:function x(){if(!this.viewSwitcher){return}this.viewSwitcher.render();this.$el.find("."+this.switcherCss).first().append(this.viewSwitcher.$el).addClass(this.viewSwitcher.parentCss)},createSwitcher:function w(){if(_.isEmpty(this._viewDefs)||this.omitSwitcherForOneView&&this._viewDefs.length===1){this.viewSwitcher=null}if(!this.viewSwitcher){return}var e=_.map(this._viewDefs,function(e,t){return{title:e.title,index:t,gaData:e.gaData}});var t=_.isFunction(this.viewSwitcher)?this.viewSwitcher:this.viewSwitcher.switcherType;var n={views:e,activeIndex:this.activeIndex};_.extend(n,this.viewSwitcher.options);this.viewSwitcher=new t(n);this.listenTo(this.viewSwitcher,"view:switch",this.onSwitchView)},onSwitchView:function L(e){this.switchView(e)},switchView:function S(e){if(!this.viewSwitcher){return}var t=e.index;var n=this.currentView;var r=this._views[t]||this._viewDefs[t];if(!r){return}if(!(r instanceof i.view.views.NomadView)){r=this.createView(t);this._renderView(r)}if(n){this._getViewEl(n).addClass(this.hiddenViewCss);n.unbindGlobalEvents();if(n.abortActiveRequests()){n._dataObsolete=true}this.stopListening(n,this.ACTION_NAME)}this.currentView=r;this.activeIndex=t;this._getViewEl(r).removeClass(this.hiddenViewCss);r.bindGlobalEvents();var a=!e.skipLoad&&(r._dataObsolete||this.loadViewOnSwitch);if(a){this.loadViewData(r,e.loadParams)}if(this.activeTabStorageKey){this._storeState()}this._syncSwitcher(e);this.listenTo(r,this.ACTION_NAME,this.propagateComponentAction);this.trigger("views:switch",r,t)},abortActiveRequests:function E(){var e=false;this._eachView(function(t){return e=t.abortActiveRequests()||e});return e},bindGlobalEvents:function k(){this._super();this._currentOrEachView(function(e){return e.bindGlobalEvents()})},unbindGlobalEvents:function T(){this._super();this._eachView(function(e){return e.unbindGlobalEvents()})},handleComponentAction:function M(e){this._currentOrEachView(function(t){return t.handleComponentAction(e)});this._super(e)},getViews:function A(){return _.compact(this._views)},getViewIndex:function C(e){return _.indexOf(this._views,e)},updateSwitcherSubtitle:function R(e,t){if(this.viewSwitcher){this.viewSwitcher.updateSubtext(e,t)}},clean:function D(){var e=this;this._eachView(function(t,n){if(t!==e.currentView){t.dispose();e._views[n]=null}})},_syncSwitcher:function I(e){if(this.viewSwitcher){this.viewSwitcher.syncActive(e)}},createView:function O(e){var t=_.isObject(e);var n=t?e:this._viewDefs[e];var r=t?_.indexOf(this._viewDefs,e):e;var a={name:n.view,module:this.module,layout:this.layout,context:this.context};e=i.view.createView(_.extend(a,n));e._dataObsolete=true;this._views[r]=e;this.trigger("views:create",e,r);return e},_renderView:function N(e){e.render();var t=this._getViewEl(e);if(this.viewSwitcher){t.addClass(this.hiddenViewCss)}this.getViewParentEl(e).append(t);return e},getViewParentEl:function F(e){return this.$viewContainer},_eachView:function B(e,t){var n=this;_.each(this._views,function(i,r){if(i){e.call(t||n,i,r)}})},_currentOrEachView:function P(e,t){if(this.currentView){e.call(t||this,this.currentView)}else if(!this.viewSwitcher){this._eachView(e,t)}},_dispose:function U(){this._super();this._disposeChildViews();this._disposeSwitcher();this.currentView=this.$viewContainer=null},_disposeChildViews:function Y(){this._eachView(function(e){return e.dispose()});this._views=this._viewDefs=null},_disposeSwitcher:function H(){if(this.viewSwitcher){this.viewSwitcher.dispose();this.viewSwitcher=null}},_storeState:function G(){return i.nomad.setLastState(this.activeTabStorageKey,this.activeIndex)},_restoreState:function j(){var e=i.nomad.getLastState(this.activeTabStorageKey);if(e!==undefined){this.activeIndex=+e}},_getViewEl:function V(e){return e.getViewContainer?e.getViewContainer():e.$el},onDetach:function z(){this.unbindGlobalEvents();this.abortActiveRequests();this._eachView(function(e){return e.onDetach()});this._super("onDetach")}},{switcherTypes:u})},function(e,t,n){"use strict";var i=n(248);var r=n(256);var a=SUGAR.App;e.exports=i.extendView(r,"TabSwitcher",{template:"tab-switcher",parentCss:"tabs__bar",subtextCss:"subtitle",activeTabCss:"active-tab",events:function s(){return{"click .tab":"_onTabClick"}},initialize:function o(e){this.tabs=e.views;if(_.isString(e.subtextCss)){this.subtextCss=e.subtextCss}this._super(e)},updateSubtext:function l(e,t){this.$(".tab").eq(e).find("."+this.subtextCss).removeClass("hide").addClass("count").text(t)},syncActive:function u(e){var t=e.index;var n=this.$(".tab");n.removeClass(this.activeTabCss);$(n[t]).addClass(this.activeTabCss)},_onTabClick:function c(e){var t=$(e.target).closest(".tab").data("tab-index");var n=this.tabs[t].gaData;this.trigger("view:switch",{index:t});if(n){a.analytics.trackEvent(n.category,n.action,null,n.label)}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(256);e.exports=r.extendView(a,"DropdownSwitcher",{template:"dropdown-switcher",parentCss:"tabs__bar",initialize:function s(e){this._super(e);var t={};var n=i.data.createBean();n.set("view_index",e.activeIndex);_.each(e.views,function(e,n){t[n]=e.title});this.ddSwitcher={name:"view_index",view:"edit",type:"enum",options:t,model:n,optional:false};this.listenTo(n,"change:view_index",this._onSelect)},updateSubtext:function o(e,t){},syncActive:function l(e){var t=e.index;this.getField("view_index").model.set("view_index",t)},_onSelect:function u(e){var t=+e.get("view_index");this.trigger("view:switch",{index:t})}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(256);e.exports=r.extendView(a,"PaginationSwitcher",{className:"pagination__bar",template:"pagination-switcher",events:function s(){return{swipeRight:"swipeRight",swipeLeft:"swipeLeft"}},onAfterRender:function o(){this._super();var e='<span class="icondefault {0}"></span>';if(this.Swiper){return}this.Swiper=new Swiper(this.options.$parentEl.find(this.options.containerSelector),_.extend({noSwipingClass:"no-swiping",pagination:this.$(".pagination").get(0),bulletClass:i.config.ui.icons.swiper.bullet,bulletActiveClass:i.config.ui.icons.swiper.bulletActive,nextButton:this.$(".next").get(0),prevButton:this.$(".prev").get(0),buttonDisabledClass:"disabled",paginationBulletRender:function t(n,r){return i.utils.formatString(e,[r])},onTouchMove:function n(e,t){if(i.activeComponents.hasActiveComponents()){e.lockSwipes()}else{i.nomad.isSwiping=true}},onTouchEnd:function r(e){i.nomad.isSwiping=false;e.unlockSwipes()},onClickNext:_.bind(function(){this._handleSwipe("next")},this),onClickPrev:_.bind(function(){this._handleSwipe("prev")},this),onSlide:_.bind(function(e){this._handleSwipe(e)},this)},this.options.settings));if(this._activeIndex){this.syncActive({index:this._activeIndex,disableAnimation:true})}},_handleSwipe:function l(e){var t=_.isString(e);if(t){e=this._activeIndex+(e==="next"?1:-1)}var n=e<0||e>=this.options.views.length;if(t&&n){return}if(e===this._activeIndex||n){this.Swiper.slideTo(e)}else{this._activeIndex=e;this.trigger("view:switch",{index:e})}},_dispose:function u(){if(this.Swiper){this.Swiper.destroy();this.Swiper=null}this._super()},update:function c(){if(this.Swiper){this.Swiper.update(true)}},syncActive:function d(e){var t=e.index,n=e.disableAnimation;this._activeIndex=t;if(this.Swiper&&this.Swiper.activeIndex!==t){this.Swiper.slideTo(t,n?0:this.Swiper.params.speed)}},updateSubtext:function f(e,t){},swipeRight:function h(){this._handleSwipe("prev")},swipeLeft:function p(){this._handleSwipe("next")}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(313);var a=i.view.NomadLayout=i.nomad.declareComponent({parent:i.view.Layout},{shouldFetchContext:true,initialize:function s(e){e.meta=e.meta||{};e.meta.components=e.meta.components||[];var t=_.getNested(this.constructor,"config.views");if(t){e.meta.components=_.map(t,function(e){return{view:{name:e}}})}if(e.name!=="login"&&!e.noHeader&&_.getNested(this.constructor,"config.header")!==false&&!_.find(e.meta.components,function(e){return/^header/.test(e.view)})){e.meta.components.unshift({view:this.getHeaderComponentName(e)})}this._super(e);var n=this.initComponents();this.initializeHeader();this.initializeLoadContext();var i=this.module?"layout__"+this.module:"";var r=this.meta.type?"layout__"+this.meta.type:"";var a=!_.isEmpty(this.options.link);var s=this.options.def?this.options.def.name:"";this.$el.addClass(i+" "+r+" layout__def"+(a?" related":""));this.$el.attr("layout-name",s);_.each(n,function(e){this.listenTo(e,"component:action",function(t){this.handleComponentAction(e,t)})},this)},initializeHeader:function o(){this.header=_.find(this._components,function(e){return e instanceof i.view.views.HeaderView});if(!this.header){return}this.header.config=this.getHeaderConfig();this.model.on("data:sync:complete",function(){var e=this.getHeaderConfig();this.header.config.title=e.title;this.header.config.subtitle=e.subtitle;this.header.$(".header-title").text(this.header.config.title);this.header.$(".header-subtitle").text(this.header.config.subtitle)},this)},initializeLoadContext:function l(){var e=this.shouldFetchContext===false||_.any(this._components,function(e){return(_.isFunction(e.shouldFetchContext)?e.shouldFetchContext():e.shouldFetchContext)===false});if(e){this.context.setFetch(false)}},getHeaderComponentName:function u(e){var t="header";var n=t+"-"+e.name;var r=i.view.declareComponent("view",n,e.module);return r===i.view.NomadView?t:n},getComponent:function c(e){if(_.isFunction(e)){return _.find(this._components,function(t){return t instanceof e})}else{return this._super(e)}},bindGlobalEvents:function d(){_.invoke(this._components,"bindGlobalEvents")},unbindGlobalEvents:function f(){_.invoke(this._components,"unbindGlobalEvents")},onDetach:function h(){this.unbindGlobalEvents();_.invoke(this._components,"onDetach")},onAppResume:function p(){_.invoke(this._components,"onAppResume")},onAppPause:function m(){_.invoke(this._components,"onAppPause")},render:function g(e){var t=this;this._prepareBodyScroll();e=e||{animation:{enabled:false}};this._handleRenderWithAnimation(function(){i.view.Layout.prototype.render.apply(t,arguments)},e)},renderFromCache:function v(e){var t=this;this._prepareBodyScroll();this._handleRenderWithAnimation(function(){_.each(t._components,function(e){_.each(e.fields,function(e){if(e.cacheDisabled===true||e.hasAccess!==e.getAccess()){e.render()}})})},e)},reloadData:function y(e){},loadDataPartial:function b(e){_.each(this._components,function(t){var n=t.options.meta&&t.options.meta.partialLoadEnabled;if(n){t.loadData(e)}})},onAfterShow:function x(){var e=this.constructor.config;if(e&&this.header){this.header.setButtonVisible({save:_.getNested(e,"header.buttons.save")})}this.bindGlobalEvents();_.invoke(this._components,"onAfterShow")},getHeaderConfig:function w(){var e={};_.each(this._components,function(t){if(t.getHeaderConfig){e=t.getHeaderConfig()}});e.layoutOptions=this.options.def;e.offlineEnabled=i.offlineEnabled;return this._applyCustomHeaderConfig(e)},_applyCustomHeaderConfig:function L(e){var t=_.getNested(this.constructor,"config.header");if(t){var n=t.buttons;var i={title:t.title,cancelLabel:_.getNested(n,"cancel.label"),saveLabel:_.getNested(n,"save.label")};if(n){_.each(r.getBaseButtonNames(),function(e){if(!_.isUndefined(n[e])){i[e]=!!n[e]}})}_.each(i,function(t,n){if(!_.isUndefined(t)){e[n]=t}})}return e},isDynamic:function S(){return this.options.def&&this.options.def.isDynamic},getDefinition:function E(){return this.options.def},getOverlay$El:function k(){var e=this.getDefinition().appendTo.el.find(".background");return e.length?e:null},getDataById:function T(e){if(this.model.id===e){return this.model.toJSON()}else if(this.collection&&this.collection.get(e)){return this.collection.get(e).toJSON()}else return null},_handleRenderWithAnimation:function M(e,t){var n=this.getOverlay$El();if(t.animation.enabled&&n){n.show();e();_.delay(function(){n.animate({opacity:0},{duration:t.animation.animationLength,complete:function e(){n.hide();n.css("opacity",1)}})},t.animation.preAnimationDelay)}else{e();if(n){n.hide()}}},_prepareBodyScroll:function A(){if(i.isBodyScrollRequired){var e=_.find(this._components,function(e){return e._bodyScroll});if(e){$("html").addClass((this.name==="login"?"loginView":"")+" bodyScroll");_.defer(function(){document.body.scrollTop=0})}else{$("html").removeClass("bodyScroll loginView");var t=$("#alerts");t.remove();_.defer(function(){document.body.scrollTop=0;$("#nomad").append(t)})}}},_dispose:function C(){if(this.model){
this.stopListening(this.model)}this.$el.off();i.view.Layout.prototype._dispose.call(this)},onBeforeLeave:function R(e){var t=_.chain(this._components).filter(function(e){return!!e.onBeforeLeave}).map(function(e){return function(t){e.onBeforeLeave({callback:function n(e){t(e&&e.cancel,e)}})}}).value();async.parallel(t,function(t){e.callback({cancel:t})})},handleComponentAction:function D(e,t){var n=i.nomad.utils.buildActionHandlerName(t.name);var r=this[n];var a;if(_.isFunction(r)){a=r.call(this,t.options)}if(!a){_.each(this._components,function(i){if(i!==e){i.handleComponentAction(n,t.options)}});if(_.isFunction(i.controller[n])){i.controller[n](t)}}}});i.nomad.registerComponent(a,{type:"Nomad"});e.exports=a},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(256);var s=n(314);var o;var l=r.extendView(a,"Header",{template:"header",className:"view__header",events:{"click .menuBtn":"onMenuClick","click .create-entity":"onAddClicked","click .saveBtn":"onSaveClicked","click .cancelBtn":"onCancelClicked","click .backBtn":"onBackClicked","click .dashHomeBtn":"onDashboardHomeClicked","click h1":"onTitleClicked",swipeLeft:function u(e){if(r.utils.isDirectionLTR()){this.onSwipeLeft(e)}else{this.onSwipeRight(e)}},swipeRight:function c(e){if(r.utils.isDirectionLTR()){this.onSwipeRight(e)}else{this.onSwipeLeft(e)}}},buttonSelectorMap:{back:".backBtn",mainMenu:".menuBtn",save:".saveBtn",cancel:".cancelBtn",caret:".caretBtn",dashHome:".dashHomeBtn"},_saveBtnDisabled:false,dataContainer:null,globalEvents:{"offline:status:update":function d(e){var t=this.$el.find(".offline-icon, .offline-status");t.removeClass("status-success status-warning status-error status-default");t.addClass(r.utils.getOfflineStatusClass())},"app:orientation:changed":function f(){if(!i.isTablet)return;window.scrollTo(0,0);if(i.controller.layoutManager.getRecordLayout()){o.addClass("show-content-child")}}},offlineStatusIconPartial:"offline-status-icon",offlineStatusClass:function h(){return r.utils.getOfflineStatusClass()},initialize:function p(e){this.initHeaderActions();this._super(e);this.defaults={title:i.config.productName,mainMenu:true,rightMenu:true,back:false,save:false,cancel:false};o=$(document.body);if(this.model){this.listenTo(this.model,"data:sync:error",function(e,t,n){if(_.contains([404,403],n.status)){this.$(".createBtn").hide()}})}},initHeaderActions:function m(){var e={click:"click",menuClick:"menu:click",save:"save:click",cancel:"cancel:click",dashboardHome:"dashboard:home:click"};this.headerActions=e},onBeforeRender:function g(){this._super();if(this.config.rightMenu&&this.model&&!this.rightMenu){this.rightMenu=i.view.createView({name:s,layout:this.layout,model:this.model})}this.config.isMenuButtonSupported=this._isMenuButtonSupported();this.config.ui={hasEditButton:this.config.save||this.config.cancel}},onAfterShow:function v(){this._super();if(this.rightMenu){if(this.rightMenu.isActionListAvailable()){this.rightMenu.render();if(i.isTablet){this.$rightMenu=this.$el.find(".right-menu__container_tablet")}else{this.$rightMenu=o.find("#right-menu")}this.$rightMenu.html(this.rightMenu.$el)}else if(!this.rightMenu.quickAction){this.$(".createBtn").hide()}}},onTitleClicked:function y(e){this._processAction(e,this.headerActions.click)},onSaveClicked:function b(e){if(!this.$(".saveBtn .btn").hasClass("disabled")){this._processAction(e,this.headerActions.save)}},onCancelClicked:function x(e){if(!this.$(".cancelBtn .btn").hasClass("disabled")){this._processAction(e,this.headerActions.cancel)}},onDashboardHomeClicked:function w(e){this._processAction(e,this.headerActions.dashboardHome)},onBackClicked:function L(e){this._processAction(e,this.headerActions.cancel)},onMenuClick:function S(e){e.preventDefault();if(!this._isMenuButtonSupported()){return}this._processAction(e,this.headerActions.menuClick);r.dismissAlerts()},onSwipeLeft:function E(e){if(i.nomad.mainMenu.isOpened()){this.onMenuClick(e)}else if(!this.isRightMenuOpened()&&this.rightMenu&&!this.rightMenu.quickAction){this.onAddClicked(e)}},onSwipeRight:function k(e){if(r.getOrientation()==="landscape"&&i.isTablet){return}if(this.isRightMenuOpened()){this.onAddClicked(e);return}this.onMenuClick(e)},_processAction:function T(e,t,n){if(e){e.preventDefault()}t="header:"+t;r.dismissAlerts();this.trigger(this.ACTION_NAME,{name:t,options:n})},onAddClicked:function M(e){e.preventDefault();e.stopPropagation();r.dismissAlerts();if(this.rightMenu.isActionListAvailable()){this.rightMenu.toggle();i.tutorial.show("plus-menu")}else{this.rightMenu.executeAction(this.rightMenu.quickAction)}},setTitle:function A(e){this.$el.find(".header-title").text(e)},setSubtitle:function C(e){this.$el.find(".header-subtitle").text(e)},setButtonVisible:function R(e){_.each(e,function(e,t){e=Boolean(e);this.$el.find(this.buttonSelectorMap[t]).toggle(e);if(t==="save"){this.$(".save-container").toggle(e)}},this)},_isMenuButtonSupported:function D(){return this.config.mainMenu},setSaveBtnState:function I(e){this._saveBtnDisabled=_.isEmpty(e);this.$(".saveBtn .btn").toggleClass("disabled",this._saveBtnDisabled)},_dispose:function O(){if(this.rightMenu){this.rightMenu.dispose();this.rightMenu=undefined}this._super()},isRightMenuOpened:function N(){return this.rightMenu&&this.rightMenu.isActionListAvailable()&&this.rightMenu._isRightMenuOpened}},{getOverridableMethods:function F(){return _.union(a.getOverridableMethods(),["onBackClicked","onCancelClicked","onDashboardHomeClicked","onTitleClicked","onHomeClicked","onSaveClicked"])},getBaseButtonNames:function B(){return["back","rightMenu","search","mainMenu","cancel","save"]}});e.exports=l},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(256);var s=n(315);var o=n(325);var l=n(318);var u=r.extendView(a,"RightMenu",{template:"right-menu",events:{click:function c(){this.toggle(false)},"click .menu-item__link":"onItemClick"},quickAction:undefined,initialize:function d(e){this._super(e);this.$body=$(document.body);this.availableActions=this.getAvailableActions();var t=_.first(this.availableActions);if(this.availableActions.length===1&&_.contains(["create","create-related"],t.name)){this.quickAction=t}this._parentView=this.layout.name==="list"?this.layout.getComponent(s):this.layout.getComponent(o)},onAfterRender:function f(){this._super();this.$contentWrapper=i.$rootEl.find("#wrapper")},isActionListAvailable:function h(){return!_.isEmpty(this.availableActions)&&!this.quickAction},getAvailableActions:function p(){return l.getRightMenuActions({model:this.model,viewType:this.layout.name,view:this._parentView})},toggle:function m(e,t,n){var a=this;var s=void 0;var o=r.utils.isDirectionLTR()?1:-1;e=_.isUndefined(e)?!this._isRightMenuOpened:e;s={show:e,disableAnimation:t,callback:n,view:this};if(e){this.$body.one("touchstart.header"+this.cid,function(e){var t=$(e.target);var n=(t.hasClass("create-entity")||t.hasClass("header-icon__plus"))&&!_.isEmpty(a.layout.header.$el.find(t));var r=i.isTablet?!_.isEmpty(a.layout.$el.find(".right-menu").find(t)):!_.isEmpty($("#right-menu").find(t));if(!(n||r)){_.delay(function(){return a.toggle(false)},100)}})}if(i.isTablet){this._isRightMenuOpened=e;this.$(".createBtn").toggleClass("active",e);i.$rootEl.find(".box__header").toggleClass("box__header_full-height",e);i.$rootEl.find(".overlay__right-menu").toggleClass("show",e);this.$(".right-menu")[e?"fadeIn":"fadeOut"]();this.registerActiveComponent(s)}else{this.registerActiveComponent(s);var l=t||!i.supportedFeatures.menuAnimation?0:200;var u=this.$(".right-menu");var c={contentAnimation:{"-webkit-transform":e?"translate3d("+o*-86+"%, 0, 0)":"translate3d(0, 0, 0)"},overlayAnimation:{"-webkit-transform":e?"translate3d("+o*-86+"%, 0, 0)":"translate3d("+o*-100+"%, 0, 0)"}};var d=function f(){a.$body.toggleClass("show-right-menu",e);a._isRightMenuOpened=e;if(n){n()}};this.animateMenu({isShowing:e,data:c,$menu:u,callback:d,duration:l})}},registerActiveComponent:function g(e){var t=this;if(e.show){this.onClose=function(){return t.toggle(false,e.disableAnimation,e.callback)};i.activeComponents.add(this)}else{this.onClose=undefined;i.activeComponents.remove(this)}},animateMenu:function v(e){var t=e.data,n=e.isShowing,r=e.$menu,a=e.callback,s=e.duration;if(n){r.addClass("show")}this.$contentWrapper.animate(t.contentAnimation,s,"ease-out",function(){if(!n){_.delay(function(){return r.removeClass("show")},s)}if(t.overlayAnimation){i.$rootEl.find("#content-overlay").animate(t.overlayAnimation,0)}if(a){a()}})},onItemClick:function y(e){e.preventDefault();e.stopPropagation();var t=$(e.currentTarget).attr("action");var n=_.findWhere(this.availableActions,{name:t});this.executeAction(n)},executeAction:function b(e){if(e&&_.isFunction(e.handler)){e.handler(this._parentView,this.model)}}});e.exports=u},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(263);var s=n(253);var o=n(316);var l=n(317);var u=n(323);var c=n(324);function d(e,t){var n=e[t];e[t]=function(){n.apply(e,arguments);if(this._currentRecordId){this.selectCurrentRecord({modelId:this._currentRecordId})}}}var f=r.extendView(o,"List",{template:"list",events:function h(){return{"click article .grip":"onGripClick","click .menu-container":"onContextMenuClick","click article":"onItemElementClick","swipeLeft article":"onItemSwipe","swipeRight article":"onItemSwipe","longTap article":"onItemLongTap","click.pagination .show-more-top-btn":"paginateTop","click.pagination .show-more-bottom-btn":"paginateBottom"}},plugins:[],listItemDataProvider:"list-item",listItemTpl:"list-item",multiselect:false,navigationName:a.LIST,isPaginationEnabled:true,isPtrEnabled:true,_offlineDisabled:false,_currentState:null,_isFetchRunning:false,globalEvents:{"offline:data:updated":"_offlineRefetch"},_offlineRefetch:function p(e,t){var n=this.getCurrentState();var r={};_.extend(r,n,{skipServerSync:true,serverNextOffset:e.serverNextOffset});if(this.collection.query){return}if(this.isCurrentListUpdated(e)){t=_.extend({add:true,reset:!this.collection.getOption("update"),params:r,offset:e.requestParams&&e.requestParams.offset?e.requestParams.offset:0,limit:e.requestParams&&e.requestParams.max_num?e.requestParams.max_num:i.config.maxQueryResult},t);this.collection.fetch(t)}},initialize:function m(e){this._super(e);this._currentState={};this.listViewId=e.listViewId||"listing-"+this.module;this.relationshipFields=null;this.unlinkVisible=false;var t=this.context.get("link");if(t){var n=this.context.get("parentModule");var a=i.metadata.getModule(n,"fields")[t];this.relationship=i.metadata.getRelationship(a.relationship);this.relateFields=i.data.getRelateFields(n,t);this.unlinkVisible=r.canUnlinkRelated(n,t)&&_.reduce(this.relateFields,function(e,t){return e&&!t.required},true);this.initRelationshipFields(n,t)}this.modContextData=r.getContextMeta("list");this.listenTo(this.collection,"data:sync:start",function(e,t){this.onDataSyncStart(e,this.collection,t)});this.listenTo(this.collection,"sync",this.onDataSyncSuccess);this.listenTo(this.collection,"data:sync:error",this.onDataSyncError);this.initLabels();this._initNoRecFoundLabelBehavior();this._createItemsConfig(e);this.initCurrentRecordHighlighting();this.isListItemSwippable=this.module!=="Activities"&&this.layout&&this.layout.module!=="Dashboards"||this.module==="Search"||this.module==="Recents";this.initContextMenu(e);this.initPagination(e);if(this.isPtrEnabled){u({view:this,ptrAction:_.bind(this.ptrRefresh,this)})}},initContextMenu:function g(e){this.contextMenuOnSwipeDisabled=this.contextMenuDisabled||e.contextMenuOnSwipeDisabled||!i.isNative&&$.os.ios;if(this.contextMenuDisabled){return}this.contextMenu=i.view.createView({name:l,parentView:this})},initCurrentRecordHighlighting:function v(){if(!i.isTablet){return}this._currentRecordId=null;this.listenTo(i,"app:view:change",function(e){if(e.layoutDef&&e.layoutDef.isDynamic){return}this.selectCurrentRecord(e)});d(this,"onAfterRender")},selectCurrentRecord:function y(e){var t=e.modelId||e.parentModelId;var n=i.controller.layoutManager.getLayouts();var r=t&&n.length>1&&n[0]===this.layout;this.$el.find(".current").removeClass("current");this._currentRecordId=t;if(r){this.getListItemEl(t).addClass("current")}},_createItemsConfig:function b(e){if(e.itemsConfig){this.itemsConfig=_.extend(this.itemsConfig||{},e.itemsConfig)}this.setListItemDataProvider(e.listItemDataProvider);this.setListItemTpl(e.listItemTpl||(e.meta?e.meta.listItemTpl:null))},setListItemTpl:function x(e){if(e){this.listItemTpl=e}},getListItemTpl:function w(){return this.listItemTpl},setListItemDataProvider:function L(e){if(e){this.listItemDataProvider=e}},getListItemDataProvider:function S(){return this.listItemDataProvider},initLabels:function E(){this.labelLoading=i.lang.get("LBL_LOADING");this.labelNoRecords=i.lang.get("LBL_MOBILE_NO_RECORDS");this.labelShowMoreTop=i.lang.get("LBL_MOBILE_SHOW_MORE_TOP");this.labelShowMoreBottom=i.lang.get("LBL_MOBILE_SHOW_MORE")},onBeforeRender:function k(){},getViewContainer:function T(){return this.$easyScrollerParent},setCurrentState:function M(e){this._currentState=e},getCurrentState:function A(){if(this._currentState.q){this._currentState.filter=null;this._currentState.order_by=null}return this._currentState},_applyCurrentStateParams:function C(e){e=e||{};e.params=e.params||{};_.extend(e.params,this.getCurrentState());return e},ptrRefresh:function R(){var e=this;var t={complete:function n(){e.hidePtrSpinner()}};i.analytics.trackEvent("app","ptr");if(i.offlineEnabled&&!this.collection.query){t.params={forceServerSync:true}}this.refresh(t)},getHeaderConfig:function D(){var e=this.modulePlural;var t=false;if(this.context.get("link")){e=i.lang.get("LBL_RELATED_MODULE_PLURAL",this.module,this.modulePlural);t=true}return{title:e,mainMenu:true,back:t,rightMenu:true}},onHeaderClick:function I(){if(this.scroll){this.scroll.scroller.scrollTo(0,0,true)}},onItemAdded:function O(e,t,n){this.$el.find(".no-records-found").hide();var r=i.view.getFieldId();var a=Handlebars.helpers.listItems([e],this,{hash:{}});if(n.addTop){this.$(".items").prepend(a.toString())}else{this.$(".items").append(a.toString())}for(var s=r+1;s<=i.view.getFieldId();++s){this._renderField(this.fields[s])}},onItemRemoved:function N(e){this.getListItemEl(e).remove()},bindDataChange:function F(){if(this.collection){this.collection.on("reset",this.render,this);this.collection.on("add",this.onItemAdded,this);this.collection.on("remove",this.onItemRemoved,this)}},getMaxPageSize:function B(){return Math.max(i.config.fetchLimit.maxPageSize,i.config.maxQueryResult)},onDataSyncStart:function P(e,t,n){},onDataSyncSuccess:function U(e,t,n){this.onDataSyncComplete(n.method,n,null,e)},onDataSyncError:function Y(e,t,n){this.onDataSyncComplete(e,t,n)},onDataSyncComplete:function H(e,t,n){this.hideContextMenu();if(e==="update"){return}if(n&&n.status===403){var r=i.template.get("list-not-authorized");this.$el.html(r(n))}},onContextMenuClick:function G(e){return false},onGripClick:function j(e){e.preventDefault();e.stopPropagation();var t=this.getModel($(e.currentTarget).closest("article").attr("data-id"));if(this.contextMenu){this.contextMenu.onGripClick(e,t)}},onItemElementClick:function V(e){if(e.isDefaultPrevented()||e.isPropagationStopped()){return}var t=this.getModel($(e.currentTarget).attr("data-id"));this.trigger("list:item:clicked");this.onItemClick(t,e)},onItemSwipe:function z(e){if(this.contextMenuOnSwipeDisabled){return}var t=r.utils.isDirectionLTR();var n=this.getModel($(e.currentTarget).attr("data-id"));if(e.type==="swipeLeft"&&t||e.type==="swipeRight"&&!t){this.contextMenu.onItemSwipeLeft(e,n)}else{this.contextMenu.onItemSwipeRight(e,n)}},onItemLongTap:function q(e){if(this.contextMenuDisabled||this.contextMenu.isItemHasContextMenuOpened(e.currentTarget)||r.isSwiping){return}var t=this.getModel($(e.currentTarget).attr("data-id"));this.contextMenu.onItemLongTap(e,t)},onItemClick:function W(e,t){if(e&&i.acl.hasAccessToModel("view",e)){var n=this._buildRecordRoute({model:e,hash:{link:this.context.get("link"),appendRoot:true}});if(n){i.controller.navigate(n,{initiator:this.navigationName})}}},getModel:function K(e){var t=f.listItemDataProviders[this.getListItemDataProvider()];e=t.extractId(e);return this.collection.get(e)},loadData:function J(e,t){this.collection.dataFetched=false;this._super(e,t)},refresh:function X(e){e=this._applyCurrentStateParams(e);if(e.isPagination){this.collection.setOption({update:true,remove:false});delete e.isPagination;this.collection.paginate(e)}else{this.collection.setOption({update:false,remove:true});this.collection.fetch(e)}},bindViewSyncListener:function Z(){this.listenTo(this.collection,"sync",this.publishCollectionSyncData)},unbindViewSyncListener:function Q(){this.stopListening(this.collection,"sync",this.publishCollectionSyncData)},publishCollectionSyncData:function ee(e,t,n){this.publishSyncData(e.toJSON(),null,n)},getAllSyncableCollections:function te(){return[this.collection]},receiveSyncData:function ne(e,t,n){if(e&&e.id){_.each(this.getAllSyncableCollections(),function(i){this.processCollection(i,e,t,n)},this)}},processCollection:function ie(e,t,n,a){var s=e.get(t.id);if(s){if(n&&n.status===404||!n&&a.method==="delete"){e.remove(s)}else if(!n&&!r.utils.isModelSynchronized(s,t)){s.set(t);if(!i.acl.hasAccessToModel("list",s)){e.remove(s)}}}},_dispose:function re(){var e=this.getViewContainer();this.stopListening(this.collection,"data:sync:start");this.stopListening(this.collection,"sync");this.stopListening(this.collection,"data:sync:error");this.stopListening(i.events,"offline:collection:read");if(e){e.remove()}if(this.contextMenu){this.contextMenu.dispose()}this._super()},isCurrentListUpdated:function ae(e){var t=this.context.get("parentModule");var n=this.context.get("link");if(!(this.collection instanceof i.BeanCollection)){return false}return this.collection.cid===e.cid},setOfflineEnabled:function se(e){this.collection.offlineReadDisabled=!e},_initNoRecFoundLabelBehavior:function oe(){var e=this;var t=".no-records-found";if(i.offlineEnabled){this.listenTo(i.events,"offline:collection:read",function(n){if(e.isCurrentListUpdated(n.apiOptions)){var r=n.status===i.offline.api.ReadCollectionStatus.FINISH&&!n.isDataUpdated?!e.collection.length:false;e.$(t).toggle(r)}})}else{this.listenTo(this.collection,"data:sync:start",function(){return e.$(t).hide()});this.listenTo(this.collection,"sync",function(n,i,r){if(r.method!=="update"&&e.collection.length===0){e.$(t).show()}})}},setSortByField:function le(){var e=this.getCurrentState();var t=e.order_by?e.order_by.split(":")[0]:null;this.sortBy=null;if(t&&t!=="name"&&t!=="date_modified"){var n=this.modContextData[this.module].additionalListFields;if(_.isEmpty(_.findWhere(n,{name:t}))){var r=i.metadata.getModule(this.module).fields[t];this.sortBy={name:t,type:r.type,label:r.vname}}}},abortActiveRequests:function ue(){var e=this.collection;var t=false;if(e.getFetchRequest()){this.context.resetLoadFlag();e.abortFetchRequest();t=true}return t},_buildRecordRoute:function ce(e){return Handlebars.helpers.buildRoute(e.model,{hash:e.hash})},getListItemEl:function de(e){var t;var n;if(!_.isObject(e)){e=this.collection.get(e)}if(e){t=f.listItemDataProviders[this.getListItemDataProvider()].buildId(e);n=i.utils.formatString('article[data-id="{0}"]',[t])}return $(this.$(n))},_deleteRecord:function fe(e,t){var n=i.lang.get(t?"LBL_MOBILE_UNLINK_CONFIRM":"LBL_MOBILE_DELETE_CONFIRM");this.hideContextMenu();s.showConfirm(n,{callback:function r(n){if(n===2){e.destroy({relate:t,wait:true})}}});return false},onToggleFieldValue:function he(e,t,n){var i=e.get(n);e[t](!i,{error:_.bind(function(){e.set(n,i);this.hideContextMenu()},this)});this.hideContextMenu()},hideContextMenu:function pe(){if(this.contextMenu&&this.contextMenu.isOpened()){this.contextMenu.hide()}},isActionVisible:function me(e,t){return e.isVisible&&i.acl.hasAccessToModel(e.access||e.name,t)},initPagination:function _e(e){if(e.isPaginationEnabled!==undefined){this.isPaginationEnabled=e.isPaginationEnabled}if(i.offlineEnabled){this.listenTo(i.events,"offline:collection:read",this._showFetchingMsg)}if(this.isPaginationEnabled){this.listenTo(this.collection,"sync",this._updatePaginationElements)}},_showFetchingMsg:function ge(e){if(this.collection.offlineReadDisabled||!this.isCurrentListUpdated(e.apiOptions)){return}e.backgroundFetch=true;var t=this._isFetchRunning;var n=e.status===i.offline.api.ReadCollectionStatus.START;if(n&&!this._isFetchRunning){this._isFetchRunning=true}else if(!n&&!e.isDataUpdated){this._isFetchRunning=false}if(t!==this._isFetchRunning){if(this._isFetchRunning){i.syncAlertManager.onSyncStart("read",this.collection,e)}else{i.syncAlertManager.onSyncSuccess("read",this.collection,e)}this.scrollReflow()}},_updatePaginationElements:function ve(){if(!this.collection){return}while(this.collection.length>this.getMaxPageSize()){this.collection.shift()}this.$(".show-more-top-btn").toggle(this.needShowMoreTopButton());this.$(".show-more-bottom-btn").toggle(this.needShowMoreBottomBtn());this.scrollReflow()},paginateTop:function ye(){if(!this.isPaginationEnabled){return}var e=Math.max(this.collection.offset-this.collection.length-i.config.maxQueryResult,0);this.refresh({offset:e,limit:this.getMaxPageSize()})},paginateBottom:function be(){if(this.isPaginationEnabled){this.refresh({isPagination:true})}},needShowMoreTopButton:function xe(){return this.collection.dataFetched&&Math.max(this.collection.next_offset,this.collection.offset)>this.getMaxPageSize()},needShowMoreBottomBtn:function we(){return this.collection.dataFetched&&this.collection.next_offset!==-1}},{listItemDataProviders:c.storage});e.exports=f},function(e,t,n){"use strict";var i=n(248);var r=n(298);var a=n(257);var s=i.extendView(a,"Syncable",{initialize:function o(e){this._super(e);r.registerView(this);this.bindViewSyncListener()},_dispose:function l(){r.unregisterView(this);this.unbindViewSyncListener();this._super()},bindViewSyncListener:function u(){},unbindViewSyncListener:function c(){},publishSyncData:function d(e,t,n){r.triggerViewSync(this,e,t,n)},receiveSyncData:function f(e,t){}});e.exports=s},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(253);var a=n(318);var s=n(248);var o=n(256);e.exports=s.extendView(o,"ContextMenu",{ACTIVE_COMPONENT_ID:"list_view_context_menu",tagName:"span",events:{"click .context-menu__item:not(.disabled)":"onItemClick"},initialize:function l(e){var t=this;this._super(e);this.parentView=e.parentView;this.listenTo(i,"app:orientation:changed",function(){if(t.activeItem){t._refresh()}})},_getAvailableActions:function u(e,t){return a.getRecordActions({view:this.parentView,model:e,type:"context-menu",maxCount:t})},onGripClick:function c(e,t){var n=$(e.currentTarget).closest("article");var i=this.isItemHasContextMenuOpened(n.get(0));if(this.isOpened()){this.hide()}if(!i){this.show(n,t)}return false},onItemSwipeLeft:function d(e,t){if($.__swipeHelper.swipeOrientation!=="vertical"){var n=$(e.currentTarget).closest("article");if(this.isItemHasContextMenuOpened(n.get(0))){return false}if(this.isOpened()){this.hide()}this.show(n,t)}},onItemSwipeRight:function f(e,t){if(this.isItemHasContextMenuOpened(e.currentTarget)){this.hide()}},_getDocuments:function h(e,t,n){var i=this;var r=_.findWhere(this.contextItems,{name:"file"});t.once("docs:ready",function(n){t.docData=n;a.updateActionState({action:r,view:i.parentView,model:t});i.renderContextMenu(e,t)});t.getDocuments(n)},renderContextMenu:function p(e,t){var n={contextMenuItems:this.contextItems,isEmptyMenu:_.isEmpty(this.contextItems),following:!!t.get("following"),myFavorite:!!t.get("my_favorite")};e.find(".box__context-menu").remove();this.$el.html(i.template.get("context-menu")(n));e.append(this.$el)},_getMaxMenuItemsCount:function m(){var e=this.parentView.$el.width();var t=63;return Math.floor(e/t)},setActiveItem:function g(e,t){this.activeItem={$el:e,model:t}},show:function v(e,t){var n=e.find(".menu-container");if(_.isEmpty(n)){return}this.setActiveItem(e,t);this._refresh();if(t){this.listenTo(t,"change",this._refresh)}n.addClass("on");this.activeItem.$el.addClass("active-list-item");i.activeComponents.add(this)},hide:function y(){var e=this.isOpened();if(!e){return}var t=this.activeItem.$el;var n=this.activeItem.model;var r=t.find(".menu-container");r.removeClass("on").find(".box__context-menu").remove();t.removeClass("active-list-item");if(n){n.off("docs:ready");this.stopListening(n,"change",this._refresh)}this.activeItem=undefined;i.activeComponents.remove(this)},onClose:function b(){this.hide()},_refresh:function x(){var e=this.activeItem.model;var t=this.activeItem.$el.find(".menu-container");this.contextItems=this._getAvailableActions(e,this._getMaxMenuItemsCount());var n=this.parentView.modContextData&&this.parentView.modContextData[e.module];var i=n&&n.docFields;var r=_.findWhere(this.contextItems,{name:"file"});if(r){this._getDocuments(t,e,i);a.updateActionState({action:r,view:this.parentView,model:e})}this.renderContextMenu(t,e)},isOpened:function w(){return!!this.activeItem},isItemHasContextMenuOpened:function L(e){return this.activeItem&&this.activeItem.$el.get(0)===e},onItemClick:function S(e){e.preventDefault();e.stopPropagation();var t=$(e.currentTarget).attr("action");var n=_.findWhere(this.contextItems,{name:t});if(_.isFunction(n.handler)){n.handler(this.parentView,this.activeItem.model)}if(!n.isMultipleChoice&&n.autoClose){this.hide()}},onItemLongTap:function E(e,t){if(!$.os.android){return}i.analytics.trackEvent("longTap","c-menu");if(this.isOpened()){this.hide()}this.showActionSheet(e,t)},showActionSheet:function k(e,t){var n=this;var a=$(e.currentTarget).closest("article");var s=this.parentView.modContextData&&this.parentView.modContextData[t.module];var o=[];var l=[];var u=this._getAvailableActions(t);this.setActiveItem(a,t);if(!_.isEmpty(u)){r.showActionSheet(_.map(u,function(e){return i.lang.get(e.label)}),{title:i.lang.get("LBL_SELECT_ACTION_LABEL"),onSelectCb:function c(e,r){var s=u[r];if(_.isFunction(s.handler)){s.handler(n.parentView,t)}n.onCloseActionSheet(a);if(i.isNative)return;return!s.isMultipleChoice},onCancelCb:function d(){return n.onCloseActionSheet(a)}})}t.once("docs:ready",function(e){t.docData=e});s&&t.getDocuments(s.docFields)},onCloseActionSheet:function T(e){e.removeClass("selected-item");this.activeItem=undefined}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(319);var a=n(321);var s=n(322);e.exports={getRecordActions:function o(e){var t=e.view,i=e.model,a=e.type,s=e.maxCount;var o=n(306);var l=o.getCustomActions();var u=this._isMetaRelatedView(i,t)&&r({view:t,model:i});var c=t.contextMenuActions||_.union(u,l);c=_.chain(this.processRecordActions({actions:c,view:t,model:i,type:a})).filter(function(e){return t&&_.isFunction(t.isActionVisible)?t.isActionVisible(e,i):e.isVisible}).value();if(s){c=c.slice(0,s)}return c},getRightMenuActions:function l(e){var t=e.view,i=e.model,r=e.viewType;var s=r==="list"?"right-menu-list":"right-menu-detail";var o=n(306);var l=this._isMetaRelatedView(i,t)&&a({model:i,viewType:r});var u=this.processRecordActions({actions:_.union(l,o.getCustomActions()),view:t,model:i,type:s});return _.where(u,{isVisible:true})},getEditViewActions:function u(e){var t=e.view,i=e.model;var r=n(306);var a=this._isMetaRelatedView(i,t)&&s({view:t,model:i});var o=this.processRecordActions({actions:_.union(a,r.getCustomActions()),view:t,model:i,type:"edit-menu"});return _.where(o,{isVisible:true})},processRecordActions:function c(e){var t=this;var n=e.actions,i=e.view,r=e.model,a=e.type;var s=[];var o=[];n=_.filter(n,function(e){return _.contains(e.types,a)&&(!e.modules||_.contains(e.modules,r.module))});_.each(n,function(e){var t=e.name;if(_.contains(o,t)){return}var i=void 0;if(!e.custom){i=_.find(n,function(e){return e.custom&&t===e.name})}s.push(_.extend({},e,i));o.push(e.name)});return _.chain(s).each(function(e){return t.updateActionState({action:e,view:i,model:r})}).sortBy("rank").value()},updateActionState:function d(e){var t=e.action,n=e.view,i=e.model;_.each(t.stateHandlers,function(e,r){t[r]=!!e.call(t,n,i)});_.defaults(t,{isVisible:true,isEnabled:true})},_isMetaRelatedView:function f(e){return e.module&&e instanceof i.NomadBean}}},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(320);var o={name:"phone",types:["context-menu","toolbar"],access:"list",label:"LBL_CALL_BUTTON",iconKey:"actions.call",stateHandlers:{isVisible:function u(e,t){var n=e.modContextData[t.module];if(!n.actions.phone){return false}var i=t.getAccessibleFields(n.phoneFields);return t.isDataDefined(i)},isMultipleChoice:function c(e,t){var n=t.getAccessibleFields(e.modContextData[t.module].phoneFields);var i=t.getFieldsDataArray(n);return i.length>1},isEnabled:function d(e,t){return this.stateHandlers.isVisible(e,t)}},handler:function f(e,t){var n=t.getAccessibleFields(e.modContextData[t.module].phoneFields);var i=t.getFieldsDataArray(n);a.callPhone(i,{model:t})},autoClose:true,rank:5};var l=_.extend({},o,{name:"message",types:["context-menu","toolbar"],access:"list",label:"LBL_SMS_BUTTON",iconKey:"actions.sms",handler:function h(e,t){var n=t.getAccessibleFields(e.modContextData[t.module].phoneFields);var i=t.getFieldsDataArray(n);a.sendSms(i)},rank:7});e.exports=function p(e){var t=e.view;var n=e.model;return[{name:"favorite",types:["context-menu"],label:n.get("my_favorite")?"LBL_UNFAVORITE":"LBL_FAVORITE",stateHandlers:{isVisible:function u(e,t){return i.acl.hasAccessToModel("view",t)&&!_.contains(i.config.modules.nonEditableModules,t.module)}},isFavorite:true,handler:function c(e,t){e.onToggleFieldValue(t,"favorite","my_favorite")},rank:10},{name:"view",types:["context-menu"],label:"LBL_VIEW_BUTTON",iconKey:"actions.view",stateHandlers:{isVisible:function d(e,t){return!i.acl.hasAccessToModel("edit",t)||_.contains(i.config.modules.nonEditableModules,t.module)}},handler:function f(e,t){var n=e._buildRecordRoute({model:t,hash:{link:e.context.get("link"),appendRoot:true,action:"edit"}});i.controller.navigate(n,{initiator:e.navigationName})},rank:10},{name:"edit",types:["context-menu"],label:"LBL_EDIT_BUTTON",iconKey:"actions.edit",stateHandlers:{isVisible:function h(e,t){return i.acl.hasAccessToModel("view",t)&&!_.contains(i.config.modules.nonEditableModules,t.module)}},handler:function p(e,t){var n=e._buildRecordRoute({model:t,hash:{link:e.context.get("link"),appendRoot:true,action:"edit"}});i.controller.navigate(n,{initiator:e.navigationName})},rank:10},{name:"email",types:["context-menu","toolbar"],access:"list",label:"LBL_EMAIL_BUTTON",iconKey:"actions.email",stateHandlers:{isVisible:function m(e,t){var n=e.modContextData[t.module];var i=false;if(n.actions.email){var r=t.getAccessibleFields(n.emailFields);i=t.hasActiveEmail(r)}return i},isEnabled:function g(e,t){return this.stateHandlers.isVisible(e,t)},isMultipleChoice:function v(e,t){var n=t.getAccessibleFields(e.modContextData[t.module].emailFields);var r=t.getFieldsDataArray(n);var a=i.nomad.utils.extractAndSortEmails(r);return a.length>1}},handler:function y(e,t){var n=t.getAccessibleFields(e.modContextData[t.module].emailFields);var i=t.getFieldsDataArray(n);var s=r.utils.extractAndSortEmails(i);if(!_.isEmpty(s)){a.sendEmail(s)}},autoClose:true,rank:6},{name:"follow",types:["context-menu"],label:n.get("following")?"LBL_UNFOLLOW":"LBL_FOLLOW",stateHandlers:{isVisible:function b(e,t){return i.nomad.canFollow(t)}},isFollow:true,handler:function x(e,t){e.onToggleFieldValue(t,"follow","following")},rank:10},{name:"unlink",types:["context-menu"],label:"LBL_UNLINK_BUTTON",iconKey:"actions.unlink",stateHandlers:{isVisible:function w(e,t){return e.unlinkVisible&&t.hasUnlinkAccess(e.relateFields,e.relationship)}},handler:function L(e,t){return e._deleteRecord(t,true)},rank:8},{name:"delete",types:["context-menu"],label:"LBL_DELETE_BUTTON",iconKey:"actions.delete",stateHandlers:{isVisible:function S(e,t){return!t.link&&t.hasDeleteAccess()}},handler:function E(e,t){return e._deleteRecord(t);

},rank:10},o,l,{name:"map",types:["context-menu","toolbar"],access:"list",label:"LBL_MAP_BUTTON",iconKey:"actions.map",stateHandlers:{isVisible:function k(e,t){var n=e.modContextData[t.module];if(!n.actions.map)return false;var i=e.addressFieldsGroups||t.getAccessibleFieldsGroups(n.addressFieldsGroups);var r=t.getAddresses(i);return _.any(r)},isEnabled:function T(e,t){return this.stateHandlers.isVisible(e,t)},isMultipleChoice:function M(e,t){var n=t.getAccessibleFieldsGroups(e.modContextData[t.module].addressFieldsGroups);var i=t.getAddresses(n);return i.length>1}},handler:function A(e,t){var n=e.addressFieldsGroups||t.getAccessibleFieldsGroups(e.modContextData[t.module].addressFieldsGroups);var i=t.getAddresses(n);a.openAddress({addresses:i})},autoClose:true,rank:8},{name:"url",types:["context-menu","toolbar"],access:"list",label:"LBL_URL_BUTTON",iconKey:"actions.url",stateHandlers:{isVisible:function C(e,t){var n=e.modContextData[t.module];if(!n.actions.url)return false;var r=t.getAccessibleFields(n.urlFields);var a=i.view.fields.UrlField.prototype.regexp;return t.isDataDefined(r,a)},isEnabled:function R(e,t){return this.stateHandlers.isVisible(e,t)},isMultipleChoice:function D(e,t){var n=t.getAccessibleFields(e.modContextData[t.module].urlFields);var i=t.getFieldsDataArray(n,s.prototype.regexp);return i.length>1}},handler:function I(e,t){var n=t.getAccessibleFields(e.modContextData[t.module].urlFields);var i=t.getFieldsDataArray(n,s.prototype.regexp);a.openUrl(i,{encode:true})},autoClose:true,rank:10},{name:"file",types:["context-menu","toolbar"],access:"list",label:"LBL_FILE_BUTTON",iconKey:"actions.file",stateHandlers:{isVisible:function O(e,t){var n=t.getAccessibleFields(e.modContextData[t.module].docFields);var r=!_.isEmpty(n)||!_.isEmpty(t.docData)||t._canHaveFiles()||t.canHaveAttachments()||t._canHavePDFs();var a=i.acl.hasAccessToModel("view",t);return r&&a},isMultipleChoice:function N(e,t){return t.docData&&t.docData.length>1},isLoading:function F(e,t){return t.docsLoading},isEnabled:function B(e,t){return t.docsLoading||r.utils.docIsAvailable(t.docData)}},handler:function P(e,t){var n=t.docData;if(_.isEmpty(n)){alert(i.lang.get(t.docsLoading?"LBL_LOADING_FILES":"ERR_NO_DOCS"));return}a.openDoc(t.docData)},autoClose:true,rank:9},{name:"close",types:["context-menu"],label:"LBL_CLOSE_BUTTON_TITLE",iconKey:"actions.close",stateHandlers:{isVisible:function U(e,t){return t.isCloseActionAvailable()}},handler:function Y(e,t){var n="status";t.set(n,i.nomad.utils.getClosedStatusValue(t.module||e.module));t.save(null,{fields:[n],error:function r(){t.set(n,t.previousAttributes()[n])},success:function a(){if(t.collection&&_.isArray(t.collection.filterDef)&&_.find(t.collection.filterDef,function(e){return e[n]&&e[n]["$not_in"]&&_.contains(e[n]["$not_in"],t.get(n))})){e.collection.remove(t);e.collection.next_offset!==-1&&--e.collection.next_offset;if(!e.collection.length){e.collection.fetch()}}}})},autoClose:true,rank:10}]}},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(295);e.exports=r.extendField(s,"Url",{regexp:/^(https?:\/\/)?[\w-]+(\.[\w-]+)+([\w\s.,@?^=%&amp;:\/~+#-]*)?$/,events:{"click .value a":"openUrl"},unformat:function o(e){var t="://";var n=e;e=$.trim(e);if(e.indexOf(t)>-1){n=e.split(t)[1];if(!n)return""}return e},openUrl:function l(){a.openUrl(this.model.get(this.name),{encode:true})}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);e.exports=function(e){var t=e.model,n=e.viewType;var s=t.link;var o=s?s.bean.module:t.module;var l=s&&i.data.getRelatedModule(s.bean.module,s.name);var u=i.metadata.getModuleNames({filter:"visible"});var c=function h(e,t){i.controller.loadDynamic({layoutDef:{name:"pickerlist",parentModelId:e.id,parentModule:o,action:t,create:true}})};var d=function p(e,t){var n=Handlebars.helpers.buildRoute(e,{hash:{link:s&&s.name,appendRoot:true,action:t}});i.controller.navigate(n)};var f=[{name:"create",types:["right-menu-list"],label:i.lang.get("LBL_CREATE_MODULE",o,r.getSingularModuleName(o)),iconKey:"menu.create",stateHandlers:{isVisible:function m(){if(t.link){return false}return r.canCreateModule(o)}},handler:function g(){return d(t,"create")}},{name:"duplicate",types:["right-menu-detail"],label:"LBL_DUPLICATE_BUTTON_LABEL",iconKey:"menu.duplicate",stateHandlers:{isVisible:function v(){return r.canCreateModule(o)&&!_.include(i.config.modules.nonDuplicatableModules,o)}},handler:function y(){return d(t,"duplicate")},rank:10},{name:"create-related",types:["right-menu-detail","right-menu-list"],label:s?i.lang.get("LBL_CREATE_RELATED",l,r.getSingularModuleName(l)):"LBL_CREATE_RELATED_RECORD",iconKey:"menu.create",stateHandlers:{isVisible:function b(){var e=t.link;if(!e&&n==="list"||e&&n==="detail"){return false}return l?r.canCreateRelated(l,o,e.name):r.hasCreatableSubpanels(r.getSubpanels(o))}},handler:function x(){n==="list"?d(t,"create"):c(t,"create")},rank:20},{name:"link-related",types:["right-menu-detail","right-menu-list"],label:s?i.lang.get("LBL_ASSOC_EXISTING",l,r.getSingularModuleName(l)):"LBL_ASSOC_RELATED_RECORD",iconKey:"menu.linkRelated",stateHandlers:{isVisible:function w(){var e=t.link;if(!e&&n==="list"||e&&n==="detail"){return false}if(e&&n==="list"){return r.canLinkRelated(o,e.name)}else{return r.hasLinkableSubpanels(r.getSubpanels(o))}}},handler:function L(){n==="list"?d(t,"associate"):c(t,"associate")},rank:10},{name:"share",types:["right-menu-detail"],label:"LBL_RECORD_SHARE_BUTTON",iconKey:"menu.share",handler:function S(){return a.shareRecord(t)},rank:30}];_.each(u,function(e){f.push({name:"create-"+e+"-record",module:e,modules:["Search"],types:["right-menu-list"],label:i.lang.get("LBL_CREATE_MODULE",e,r.getSingularModuleName(e)),stateHandlers:{isVisible:function t(){return r.canCreateModule(e)}},handler:function n(){return i.controller.navigate("Search/"+e+"/create")},rank:40})});return f}},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);e.exports=function a(e){var t=e.view,n=e.model;return[{name:"close",types:["edit-menu"],label:"LBL_CLOSE_AND_SAVE_BUTTON",stateHandlers:{isVisible:function i(e,t){return t.isCloseActionAvailable()}},handler:function a(e,t){e.model.set("status",r.utils.getClosedStatusValue(e.module));e.save()},rank:10}]}},function(e,t){"use strict";var n=SUGAR.App;var i=function s(e){e._ptrAction=null;if(!e.scroll){return}if(e.$el&&e.$el.pullToRefresh){e.$el.pullToRefresh("destroy")}e.scroll.destroy();e.scroll=null};var r=function o(e){if(e.scroll){e.scroll.reflow();return}if(!e.$easyScrollerParent){e.$el.wrap('<div class="easy-scroller-parent"><div class="easy-scroller-holder"></div></div>');e.$easyScrollerParent=e.$el.closest(".easy-scroller-parent")}var t=e.$easyScrollerParent;var i=t.get(0);var r=t.find(".easy-scroller-holder").get(0);e.scroll=new window.EasyScroller(r,i,{scrollingY:true,scrollingX:false});e.$el.pullToRefresh({callback:e._ptrAction,template:n.template.get("ptr"),templateTarget:e.$easyScrollerParent,height:50,scroller:e.scroll.scroller,action:n.lang.get("LBL_MOBILE_PTR_RELEASE"),refresh:n.lang.get("LBL_LOADING")})};var a={_dispose:function l(){i(this)},onAfterRender:function u(){r(this)},hidePtrSpinner:function c(){if(this.$el){this.$el.pullToRefresh("hide")}this.scrollReflow()},scrollReflow:function d(){if(this.scroll){this.scroll.reflow()}}};e.exports=function(e){var t=e.view,i=e.ptrAction;_.each(a,function(e,n){var i=t[n];t[n]=function(){var t=void 0;for(var n=arguments.length,r=Array(n),a=0;a<n;a++){r[a]=arguments[a]}if(_.isFunction(i)){t=i.apply(this,r)}e.apply(this,r);return t}});t._ptrAction=i;t.listenTo(n,"app:orientation:changed",t.scrollReflow);t.listenTo(n,"app:keyboard:hide",t.scrollReflow)}},function(e,t){"use strict";var n=SUGAR.App;var i={storage:{},add:function a(e){var t=this.storage[e.parent]||e.parent||r;var i=_.extend({},t,e);var a=_.map(i.name.split("-"),n.utils.capitalize).join("");i.parent=i.name==="list-item"?null:t;this.storage[i.name]=this.storage[a]=i}};var r={name:"list-item",parent:null,prepareItemData:function s(e,t){var i=this.prepareFields(e,t);var r=t.itemsConfig;var a=!!t.collection.query;var s=(n.acl.hasAccessToModel("view",e)?"has-access":"")+" "+(a?"search":"");var o={model:e,view:t,isMenuVisible:!t.contextMenuDisabled,isMenuGripVisible:!t.isListItemSwippable&&!t.contextMenuDisabled,moduleName:e.module,itemId:this.buildId(e),hasSearch:a,detailsCss:s,isModuleVisible:false};return _.extend(o,i,r)},buildId:function o(e){return e.id},extractId:function l(e){return e},prepareFields:function u(e,t){var n=e.module;var i=t.modContextData[n]||{};var r=i.additionalListFields;var a=t.relationshipFields?t.relationshipFields[0]:null;if(t.collection.query){var s=e.searchInfo&&e.searchInfo.highlighted;if(s){r=_.filter(r,function(e){return!s[e.name]})}}return{titleField:i.listItemTitleField,relationshipField:a,additionalFields:_.isEmpty(r)?null:r,showLabel:t.config.ui.displayListFieldLabel}}};i.add({});i.add({name:"list-item-associate",prepareFields:function c(){var e=r.prepareFields.apply(this,arguments);if(e.additionalFields){e.additionalFields=[e.additionalFields[0]]}return e}});i.add({name:"list-item-picker",prepareItemData:function d(e,t){return{view:t,model:e,label:e.get("label"),value:e.get("value"),module:e.get("module"),itemId:this.buildId(e)}},buildId:function f(e){return e.cid}});e.exports=i},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(318);var s=n(326);var o=n(320);var l=r.extendView(s,"Detail",{className:"view__summary",events:{"click .box__record-action .context-menu__item:not(.disabled)":"onActionBtnClick","click .show-more":"toggleSummaryView","click a.show-edit-view":"handleLinkClick"},plugins:[],globalEvents:{"offline:data:updated":function u(e){if(e.id!==this.model.id)return;if(e.action==="delete"){this.showRecordOverlay(e.data,e.status);return}this.model.fetch({params:{skipServerSync:true}})}},_afterShowTasks:{},_docsRequestTimestamp:null,initialize:function c(e){this._super(e);var t;var n=this.meta.panels[0].fields||[];var i=this.context.get("link");var a=999;if(i){var s=this.initRelationshipFields(this.context.get("parentModule"),i);if(s){n=_.union(s,n)}}if(n.length>a){n.length=a}this.modContextData=r.getContextMeta("detail");t=this.modContextData[this.model.module];this.headerField=t.headerField;this.avatarField=t.avatarField;this.hasLinkableSubpanels=t.hasLinkableSubpanels;this.hasCreatableSubpanels=t.hasCreatableSubpanels;this.phoneFields=t.phoneFields;this.emailFields=t.emailFields;this.urlFields=t.urlFields;this.docFields=t.docFields;this.emailbodyFields=t.emailbodyFields;this.displayFields=_.reject(n,function(e){return e===this.headerField||e===this.avatarField||_.has(this.docFields,e.name)},this);this.addressFieldsGroups={};_.each(t.addressFieldsGroups,function(e,t){this.addressFieldsGroups[t]=e[0].fields},this);this.actions=t.actions;if(this.actions.doc){this.actions.file=true}this.isFollowable=r.canFollow(this.model);this.model.on("docs:ready",function(e){this.model.docData=e;this._setDocLoading(false)},this)},getAddressFields:function d(e){return _.map(e||[],function(e,t){return{name:t,type:"address",fields:e,label:"LBL_"+t.toUpperCase().replace(/_C$/,"")}},this)},onDataSyncComplete:function f(e,t,n){this._super("onDataSyncComplete",arguments);this._renderActionButtons();this._requestDocuments()},receiveSyncData:function h(e,t,n){var r=this.layout===i.controller.layoutManager.getRecordLayout();var a;var s;var o;this._super(e);n=n||{};a=n.responseData||{};s=a[n.fileFieldName];if(this._isModelUpdated){if(s){o={};o[n.fileFieldName]=s;this._afterShowTasks.file=_.bind(this._requestDocuments,this,o)}if(r){this._renderActionButtons();this._requestDocuments()}}},isActionVisible:function p(e,t){return e.custom?e.isVisible:!!this.actions[e.name]},_getAvailableActions:function m(e){return a.getRecordActions({view:this,model:this.model,type:"toolbar",maxCount:e})},_getMaxMenuItemsCount:function g(){var e=this.$el.width();var t=70;return Math.floor(e/t)},_renderActionButtons:function v(){var e=i.template.get("record-actions");var t=this.$(".box__record-action");var n=this._getMaxMenuItemsCount();this.actionBtns=this._getAvailableActions(n);t.html(e(this.actionBtns));this.$el.find(".bizcard").toggleClass("noactions",_.isEmpty(this.actionBtns))},_setDocLoading:function y(e){if(!this.actions.doc)return;this.model.docsLoading=e;this._renderActionButtons()},getHeaderConfig:function b(){var e=this.context.get("link")?i.lang.get("LBL_RELATED_MODULE",this.module,this.moduleSingular):this.moduleSingular;var t=!!this.context.get("link");var n=!i.isTablet||i.isTablet&&!t;return{title:e,mainMenu:true,rightMenu:true,back:n,hasRels:this.hasLinkableSubpanels,hasCreatableRels:this.hasCreatableSubpanels}},onActionBtnClick:function x(e){var t=$(e.currentTarget).attr("action");var n=_.findWhere(this.actionBtns,{name:t});if(_.isFunction(n.handler)){n.handler(this,this.model,e)}},onAfterShow:function w(){this._super();this.expanded=false;this.$el.removeClass("bizcard-more");this._renderActionButtons();this._performAfterShowTasks();i.tutorial.show(this.name,this.module)},onAfterRender:function L(){this._super();if($.os.ios&&window.ScrollFix){var e=new ScrollFix(this.$el.find(".card").get(0));var t=new ScrollFix(this.$el.find(".scroll").get(0))}},toggleSummaryView:function S(){var e=this.$el.find(".show-more");if(this.expanded){this.$el.removeClass("bizcard-more")}else{this.$el.addClass("bizcard-more")}this._redrawScrollFix();this.expanded=!this.expanded;return false},_redrawScrollFix:function E(){this.el.querySelector(".card").style.display="none";this.el.querySelector(".card").offsetHeight;this.el.querySelector(".card").style.display="block"},_onFileFieldChange:function k(e,t,n){this._super(e,t,n);if(n==="preparing"){this._showOverlay()}else if(n==="prepared"){this._postFile(e,t)}else if(n==="error"){this._hideOverlay();i.alert.show("file_upload_error",{level:"error",messages:arguments[1],autoClose:true,closeable:true});this.render()}},_showOverlay:function T(){i.overlay.show("uploading_image",{spinner:false});i.alert.show("upload_mask",{level:"info",messages:i.lang.get("LBL_MOBILE_UPLOAD_IN_PROGRESS"),autoClose:false,closeable:false})},_hideOverlay:function M(){i.overlay.hide("uploading_image");i.alert.dismiss("upload_mask")},_postFile:function A(e,t){var n={success:_.bind(function(t){i.alert.show("file_upload_success",{level:"success",messages:i.lang.get("LBL_MOBILE_UPLOAD_SUCCESS"),autoClose:true,closeable:true});this.model.set(e.name,t[e.name].name);this._requestDocuments();this._hideOverlay()},this),error:_.bind(function(t){i.error.handleHttpError(t);e.render();this._hideOverlay()},this)};this.model.uploadFile(e.name,t,n,{htmlJsonFormat:false})},_performAfterShowTasks:function C(){_.each(this._afterShowTasks,function(e,t){e.call(this);delete this._afterShowTasks[t]},this)},_requestDocuments:function R(e){var t=this.model.get("date_modified");this._setDocLoading(false);if(e||!this._docsRequestTimestamp||this.model._docsUpdated||this._docsRequestTimestamp<t){this._docsRequestTimestamp=t;this.model._docsUpdated=false;this._setDocLoading(true);this.model.getDocuments(this.docFields,e)}},handleLinkClick:function D(e){if($(e.currentTarget).hasClass("show-edit-view")){e.preventDefault();this._openEditView()}else{this._super(e)}},_openEditView:function I(){var e=Handlebars.helpers.buildRoute(this.model,{hash:{action:"edit",link:this.context.get("link"),appendRoot:true}});i.controller.navigate(e,{initiator:this.navigationName})}});e.exports=l},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(316);var s=r.extendView(a,"Record",{_statusMessageMap:{403:"LBL_NOT_AUTHORIZED",404:"LBL_RECORD_NOT_FOUND",link:"LBL_RELATED_RECORD_NOT_FOUND"},_modelEvents:{sync:"onDataSyncSuccess","data:sync:error":"onDataSyncError","data:sync:complete":"onDataSyncComplete"},_isModelUpdated:false,initialize:function o(e){this._super(e);this.fileFields=_.select(this.displayFields,function(e){return _.contains(["image","file"],e.type)});this._bindModelEvents()},_listenFileFieldEvents:function l(){_.each(this.fileFields,function(e){var t=this.getField(e.name,this.model);if(t){this.listenTo(t,"file:field:change",function(e,n){this._onFileFieldChange(t,e,n)});this.listenTo(t,"file:field:clear",function(){this._onFileFieldClear(t)})}},this)},_onFileFieldChange:_.noop,_onFileFieldClear:_.noop,onBeforeRender:function u(){this._super();this.model.dataFetched=false},_renderFields:function c(){this._super.apply(this,arguments);if(!_.isEmpty(this.fileFields)){this._listenFileFieldEvents()}},_dispose:function d(){this._super();this._unbindModelEvents()},showRecordOverlay:function f(e,t){if(document.activeElement){document.activeElement.blur()}t=e.link&&t===404?"link":t;var n=i.lang.get(this._statusMessageMap[t]);if(n&&!this.$el.find(".overlay-view").length){this.overlayIsShown=true;this.$el.append("<div class='overlay-view'><span class='message'>"+n+"</span></div>")}},hideRecordOverlay:function h(){this.overlayIsShown=false;this.$el.find(".overlay-view").remove()},bindViewSyncListener:function p(){this.listenTo(this.model,"sync",this.publishModelSyncData)},unbindViewSyncListener:function m(){this.stopListening(this.model,"sync",this.publishModelSyncData)},publishModelSyncData:function g(e,t,n){this.publishSyncData(e.toJSON(),null,_.extend({},n,{responseData:t}))},receiveSyncData:function v(e){var t;var n=false;if(_.isArray(e)){t=_.find(e,function(e){return e.id===this.model.id},this)}else if(e&&e.id===this.model.id){t=e}if(t&&!r.utils.isModelSynchronized(this.model,t)){this.model.set(t);n=true}this._isModelUpdated=n},onDataSyncSuccess:function y(e,t,n){if(this.overlayIsShown){this.hideRecordOverlay()}},onDataSyncError:function b(e,t,n){if(e==="read"){this.showRecordOverlay(this.model,n.status);if(i.error.isAccessError(n)){this.publishSyncData(this.model.toJSON(),n);this._clearModel()}}},onDataSyncComplete:function x(e,t,n){},_clearModel:function w(){var e={};_.each(this.model.attributes,function(t,n){if(n!=="id"){e[n]=void 0}});this.model.set(e,{unset:true})},_bindModelEvents:function L(){_.each(this._modelEvents,function(e,t){this.listenTo(this.model,t,this[e])},this)},_unbindModelEvents:function S(){_.each(this._modelEvents,function(e,t){this.stopListening(this.model,t,this[e])},this)}});e.exports=s},function(e,t){"use strict";(function(e){var t=function n(){this.stack=[];this.hash={}};t.prototype={clear:function i(){this.stack=[];this.hash={}},iterate:function r(e,t){_.each(this.stack,function(t,n){e.call(this,t.item,n)},t)},remove:function a(e,t){var n=[];if(!_.isFunction(e)){var i=-1;var r;for(var a=0;a<this.stack.length;a++){if(_.isString(e)?this.stack[a].uid===e:this.stack[a].item===e){i=a;r=this.stack[a];break}}if(i>-1&&r){delete this.hash[r.uid];this.stack.splice(i,1)}}else{_.each(this.stack,function(i,r){var a=e.call(t,i.item,r);if(a){n.push(i)}},this);_.each(n,function(e){this.remove(e.uid)},this)}},shift:function s(){var e=this.stack.shift();delete this.hash[e.uid];return e.item},pop:function o(){var e=this.stack.pop();delete this.hash[e.uid];return e.item},push:function l(e,t){if(!this.hash[e]){this.stack.push({uid:e,item:t})}this.hash[e]=t},get:function u(e){return this.hash[e]},getByIndex:function c(e){var t=this.stack[e];return t?t.item:null},count:function d(){return this.stack.length},isEmpty:function f(){return!this.stack.length}};e.nomad.hashmap=t})(SUGAR.App)},function(e,t){"use strict";(function(e){e.augment("overlay",{init:function t(){this.overlayHash={}},show:function n(t,i){if(this.overlayHash[t]){return false}i=_.extend({tint:false,spinner:true,template:false},i);var r=i.message||"";if(!r&&i.label){r=e.lang.get(i.label)}var a=$(e.template.get("overlay")());if(i.template){a.html(e.template.get(i.template)({message:r}))}else{var s=a.find("#overlay-message");a.toggleClass("tint",i.tint);a.toggleClass("spinner",i.spinner);s.text(r).show()}e.$rootEl.append(a);a.show();this.overlayHash[t]=a},hide:function i(e,t){var n=this.overlayHash[e];if(n){if(t){n.animate({opacity:"0"},500,"ease",function(){n.remove()})}else{n.remove()}}delete this.overlayHash[e]},hideAll:function r(){_.each(this.overlayHash,function(e,t){if(e){e.remove();delete this.overlayHash[t]}},this)},isActive:function a(){return!_.isEmpty(e.overlay.overlayHash)}})})(SUGAR.App)},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(312);var a=i.nomad.declareComponent({parent:r},{className:"layout__list",isFilterEnabled:true,isSearchEnabled:true,initialize:function s(e){var t=[];var n="filters";var i="search-box";this.stateComponents=[];this.isFilterEnabled=this.isFiltersAvailable(e);this.isSearchEnabled=this.isSearchAvailable(e);if(this.isSearchEnabled){t.push({view:i})}if(this.isFilterEnabled){t.push({view:n})}t=_.union(t,this.getListComponents(e));this.options.meta={type:"list",components:t};this._super(e);this.$el.attr("layout-name",this.options.def.subType||this.options.def.name||"");this._list=this.getComponent(this._getListName(e));this._searchBox=this.getComponent(i);this._filter=this.getComponent(n);if(this._searchBox){this.stateComponents.push(this._searchBox);this.listenTo(this.collection,"data:sync:complete",function(e,t,n){this._searchBox.hideProgress()});this.enableSearch()}if(this._filter){this.stateComponents.push(this._filter);this.listenTo(this._filter,"filter:changed",this.filterChanged);this.listenTo(this._filter,"sort:changed",this.sortingChanged)}},onAfterShow:function o(){this._super();i.tutorial.show(this.name,this.module)},getListComponents:function l(e){var t=this._getListName(e);var n=[];if(e.listMeta){n.push({view:_.extend({name:t},i.metadata.getView(e.module,t),e.listMeta)})}else{n.push({view:t})}return n},getHeaderConfig:function u(){var e=this._super();e.search=this.isSearchEnabled;return e},filterChanged:function c(){this._unbindListCollectionEvents();this.getCurrentList().collection.once("data:sync:error",this._onFilterListFailed,this);this.getCurrentList().collection.once("sync",this._onFilterListSuccess,this);this.updateSearchPlaceholder();this.reloadData()},sortingChanged:function d(){this.reloadData()},reloadData:function f(){var e={relate:this.options.subType==="relationships"};this._super();this.updateListViewState();this.getCurrentList().refresh(e)},loadData:function h(e,t){var n=this.getCurrentList().collection;var r=i.tutorial.hasStepToShow(this.name,this.module);e=e||{};e.params=e.params||{};if(n.options){delete n.options.update;n.options.offset=0;n.options.page=0}if(this._filter){_.extend(e.params,this._filter.getPreparedState());this.updateListViewState()}this.context.set("collection",n);this._super(e,t);if(r){n.on("sync",this._onTutorialShow,this)}},_onTutorialShow:function p(){i.tutorial.show(this.name,this.module)},updateListViewState:function m(){var e={};var t=this.getCurrentList();_.each(this.stateComponents,function(t){_.extend(e,t.getPreparedState())},this);t.setCurrentState(e);t.setSortByField()},enableSearch:function g(){this.listenTo(this._searchBox,"search:toggle",this.onToggleSearch);this.listenTo(this._searchBox,"search:text",this.search)},onToggleSearch:function v(e){this.searchActivated=e;if(this._filter){this._filter.toggleSearchMode(e,this._searchBox._searchText)}this.updateSearchPlaceholder()},updateSearchPlaceholder:function y(){if(this.searchActivated){var e=this._filter?this._filter.getActiveFilter().name:this.getCurrentList().modulePlural;this._searchBox.setPlaceholder(e)}},toggleFiltersView:function b(e){if(!this._filter){return}this._filter.toggle(e);this.getCurrentList().scrollReflow();this.$el.toggleClass("filters-hidden",!e)},search:function x(){this.reloadData();i.analytics.trackEvent("search",this.module,0)},_getListName:function w(e){var t=_.getNested(this.constructor,"config.views",[]);var n;var r={selector:"list-selector",associate:"list-associate",relationships:"list"};if(t.length===1){n=t[0]}else if(this.listComponent){n=this.listComponent}else if(_.contains(i.config.modules.readonlyModules,e.module)&&!e.editable){n="readonly-list"}else if(e.subType){n=r[e.subType]}else{n=e.name||"list"}return n},isSearchAvailable:function L(e){var t=_.isUndefined(e.isSearchEnabled)?this.isSearchEnabled:e.isSearchEnabled;t=t&&!(_.contains(i.config.modules.readonlyModules,e.module)&&!e.editable||e.module==="Recents"||e.module==="Dashboards"||e.module==="TxLog"||e.subType==="relationships");return t},isFiltersAvailable:function S(e){var t=_.isUndefined(e.isFilterEnabled)?this.isFilterEnabled:e.isFilterEnabled;t=t&&!_.contains(["Activities","Teams","TxLog"],e.module)&&!_.contains(i.config.modules.readonlyModules,e.module)&&i.metadata.getView(e.module,"list");return t},_onFilterListSuccess:function E(){this._unbindListCollectionEvents()},_onFilterListFailed:function k(e,t,n){this._unbindListCollectionEvents();if(i.offlineEnabled){if(t.params.skipOfflineRead){i.alert.dismiss("network_error",{animate:false});i.alert.show("network_error",{level:"error",messages:i.lang.get("LBL_MOBILE_FILTER_IS_NOT_AVAILABLE"),autoClose:true,pageHash:n.request.params.pageHash,requestOptions:t});this._filter.resetToPreviousFilter()}}else{this._filter.resetToPreviousFilter()}},_unbindListCollectionEvents:function T(){this.getCurrentList().collection.off("data:sync:error",this._onFilterListFailed);this.getCurrentList().collection.off("sync",this._onFilterListSuccess)},getCurrentList:function M(){return this._list},onDetach:function A(){this._super();this.getCurrentList().abortActiveRequests();this._unbindListCollectionEvents()}});i.nomad.registerComponent(a,{type:"List"});e.exports=a},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(312);var s=n(308);var o=r.declareComponent({parent:a},{initialize:function l(e){var t=e.module;var n=i.supportedFeatures.activities&&i.metadata.getModule(t).activityStreamEnabled;var r=this._createDashboards(e);var a=[];if(r){a.push(r)}a.push({title:i.lang.get("LBL_DETAIL_RELATED"),name:"related-records",module:t,modelId:e.modelId,loadDataFn:function o(){this.loadData()},gaData:{category:"click",action:"tab-related"}});if(n){a.push({title:i.lang.get("LBL_ACTIVITY_STREAM"),name:"activitystream-dashlet",module:"Activities",parentModel:e.context.get("model"),loadDataFn:function l(){this.context.resetLoadFlag();this.loadData()},gaData:{category:"click",action:"tab-activity-stream"}})}e.meta.components=[{view:"detail"},{view:{className:"view__detail-tabs",name:"container",partialLoadEnabled:true,views:a,viewSwitcher:s.switcherTypes.TABS}}];this._super("initialize",arguments)},_createDashboards:function u(e){var t=r.dashboards.getDashboards({module:e.module});var n=e.modelId;var a;if(!i.config.dashboards.recordDashboardsEnabled||_.isEmpty(t)||!i.config.dashboards.enabled){return}a=_.map(t,function(t){return{id:t.id,name:"dashboard",module:"Dashboards",title:i.lang.get(t.get("name")),parentModelId:n,parentModule:e.module,model:t}});return{title:i.lang.get("LBL_DASHBOARDS"),name:"container",views:a,viewSwitcher:s.switcherTypes.DROPDOWN,gaData:{category:"click",action:"tab-dashboard"}}}});r.registerComponent(o,{type:"Detail"});e.exports=o},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(329);var a=i.nomad.declareComponent({parent:r},{listComponent:"activitystream-dashlet",dashlet:null,initialize:function s(){this._super("initialize",arguments);this.dashlet=this.getComponent(this.listComponent)},isSearchAvailable:function o(){return false},loadData:function l(e,t){if(this.disposed)return;this.dashlet.loadData(e,t)},getHeaderConfig:function u(){return{mainMenu:true,title:i.lang.getAppString("LBL_ACTIVITY_STREAM"),offlineEnabled:i.offlineEnabled}}});i.nomad.registerComponent(a,{module:"Activities"});e.exports=a},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(329);var s=r.declareComponent({parent:a},{_listViews:[],DEFAULT_SORTING:{field:"date_modified",direction:"desc"},initialize:function o(e){this._super(e);this._listViews=[];this._search=this.createView("Search");this._adjustSearchCollectionParams(this._search.collection,null);this._listViews.push(this._search);if(i.supportedFeatures.recents){this._recents=this.createView("Recents");this._recents.collection.limit=i.config.fetchLimit.recents;this._recents.active=true;this._listViews.push(this._recents)}else{this._search.active=true}_.each(this.getListViews(),function(e){this.addComponent(e)},this)},onAfterShow:function l(){this._super();var e=this._filter.getPreparedState();this.toggleSearchList(!e.recents)},filterChanged:function u(e){this.toggleSearchList(!e.recents);this._super(e)},createView:function c(e){var t=e==="Search"?i.data.createMixedBeanCollection():i.data.createBeanCollection(e);return i.view.createView({name:"list",module:e,context:i.context.getContext({module:e,collection:t,model:i.data.createBean(e)})})},toggleSearchList:function d(e){if(this._search.active!==e){this._unbindListCollectionEvents()}this._search.active=e;if(this._recents){this._recents.active=!e}_.each(this.getListViews(),function(e){e.unbindGlobalEvents();if(e.active){e.getViewContainer().show();e.bindGlobalEvents()}else{e.getViewContainer().hide();if(e.collection.getFetchRequest()){e.collection.abortFetchRequest()}}})},search:function f(){var e=this._searchBox.getPreparedState().q;var t=!!e||!this._filter.getPreparedState().recents;if(i.supportedFeatures.recents){this.toggleSearchList(t)}this._adjustSearchCollectionParams(this._search.collection,e);this.listenTo(this._search.collection,"sync",function(e,t,n){this._searchBox.hideProgress()});this._super()},loadData:function h(e,t){var n=this.getCurrentList().collection;n.dataFetched=false;this._super(e,t)},getFieldNames:function p(e){var t=i.metadata.getModuleNames({filter:"visible",access:"list"});var n=this._super(e);_.each(t,function(e){var t=i.metadata.getModule(e).mergedFields;if(t){n=_.union(n,t)}});return n},_adjustSearchCollectionParams:function m(e,t){e.orderBy=t?null:this.DEFAULT_SORTING;delete e.limit;e.query=t;e.module_list=i.nomad.getFtsEnabledModules()},getHeaderConfig:function g(){return _.defaults({title:i.lang.get("LBL_MOBILE_GLOBAL_SEARCH"),mainMenu:true,rightMenu:true},this._super())},getListComponents:function v(e){return[]},getListViews:function y(){return this._listViews},getCurrentList:function b(){return _.findWhere(this._listViews,{active:true})}});r.registerComponent(s,{module:"Search"});e.exports=s},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(312);var s={type:"list",components:[{view:"list-picker"}]};var o=r.declareComponent({parent:a},{className:"layout__list list-picker",initialize:function l(e){this.options.meta=s;this._super("initialize",arguments);var t=this.getComponent("list-picker");var n=this.context.get("action");var a=this.context.get("parentModule");var o=r.getSubpanels(a);var l=n==="create"?_.filter(o,function(e){return r.canCreateRelated(e.module,a,e.context.link)}):_.filter(o,function(e){return e.linkable&&i.acl.hasAccess("list",e.module)});l=_.map(l,function(e){return{value:e.module,label:i.lang.get(e.label,a),module:e.module,context:e.context}});t.setData({items:l});t.on("selection:submit",function(e){var n=r.buildLinkRoute(a,this.context.get("parentModelId"),e.get("context").link,null,this.context.get("action"));i.controller.navigate(n,{initiator:t.navigationName})},this)}});r.registerComponent(o,{type:"Pickerlist"});e.exports=o},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(329);var a=i.nomad.declareComponent({parent:r},{initialize:function s(e){var t=this;this._super("initialize",[e]);var n=this.getCurrentList();var r=n.collection;var a=function s(){return t.header.setSaveBtnState(n.getSelectedIds())};a();this.listenTo(n,"selection:change",function(){var e=n.getSelectedIds();if(!_.isEmpty(e)){this._searchBox&&this._searchBox.hideSearch();this.toggleFiltersView()}a()});if(i.offlineEnabled){this.listenTo(i.events,"offline:collection:read",function(e){if(n.isCurrentListUpdated(e.apiOptions)&&e.status===i.offline.api.ReadCollectionStatus.FINISH&&!e.isDataUpdated){a()}})}else{this.listenTo(r,"sync",a);

}},onToggleSearch:function o(e){if(e){this.toggleFiltersView(true)}this._super("onToggleSearch",[e])}});i.nomad.registerComponent(a,{type:"ListSelector"});e.exports=a},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(312);var s=r.declareComponent({parent:a},{_isRecordDashboard:false,_prevLayoutContainer:null,initialize:function o(e){var t=r.dashboards.getDashboard(e.dashboardId);this._isRecordDashboard=!!(e.parentModule&&e.parentModelId);if(this._isRecordDashboard){var n=e.context.get("parentModel");this.parentModel=e.parentModel=i.data.createBean(e.parentModule,n?n.toJSON():{id:e.parentModelId});if(!n){this.listenTo(this.parentModel,"sync",function a(){this.header.setTitle(this._getDashboardName())});this.parentModel.fetch()}}e.context.set({model:t,parentModel:this.parentModel});this._super("initialize",[e]);this.dashboardView=this.getComponent("dashboard");if(!this._isRecordDashboard){this.listenTo(this.dashboardView,"views:switch",this.onDashletChanged)}},_getDashboardName:function l(){var e=this._isRecordDashboard?this.parentModel.get("name"):this.model.get("name");return i.lang.get(e)||null},onDashletChanged:function u(e){var t;var n=this.$el.find(".dashHomeBtn");if(!e){n.hide();t=this._getDashboardName()}else{n.show();t=e.title;if(e.dataTitle){t+=e.dataTitle}}this.header.setTitle(t)},showDashboardHome:function c(){i.controller.goUp()},loadData:function d(){},getFieldNames:function f(e){return null},getHeaderConfig:function h(){var e=this._isRecordDashboard;return{subtitle:e&&r.getSingularModuleName(this.parentModel.module),dashboardHome:!e,back:true,mainMenu:true,title:this._getDashboardName()||i.lang.get("LBL_LOADING"),offlineEnabled:i.offlineEnabled}},onAfterShow:function p(){this.dashboardView.handleActiveDashlet();var e=i.controller.layoutManager;var t=i.isTablet&&this===e.getRootLayout();var n=t&&!!e.getRecordLayout();var r=this._isRecordDashboard&&!t;var a=t&&n?"root":"record";this.dashboardView.setPaginatorVisible(a!=="root");this.header.setButtonVisible({back:r});this._prevLayoutContainer=a;this._super()},clean:function m(){this.dashboardView.clean()},onHeaderDashboardHomeClick:function _(){this.showDashboardHome();return true}});i.nomad.registerComponent(s,{type:"DashboardsDetail"});e.exports=s},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(312);var a=function o(){};var s=i.nomad.declareComponent({parent:r},{loadData:function l(e){var t=this;this.model.sync=function(e,n,r){var s=r.success;async.waterfall([function(e){r.success=function(t){e(null,t)};i.offline.storage.readTransactions(r,{id:n.id})},function(e,t){if(!e){t(new a)}else{i.offline.storage.fillTxLogData([e],function(){t(null,e)})}}],function(e,n){if(!e){s(n);t.render()}else if(e instanceof a){i.controller.clean();i.controller.goBack()}})};this.model.fetch(e)}});i.nomad.registerComponent(s,{type:"TxLogDetail"});e.exports=s},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(313);var s=n(253);var o=n(318);var l=r.extendView(a,"HeaderEdit",{events:{"click .saveBtn":"onSaveClicked","click .cancelBtn":"onCancelClicked","click .caretBtn":"onCaretClicked"},initialize:function u(e){this._super(e);this.addCancelSaveHandlers()},initHeaderActions:function c(){this._super();var e={additionalAction:"additional:action"};_.extend(this.headerActions,e)},onBeforeRender:function d(){if(this.config.save&&!this.context.get("create")&&!this.layout.isDynamic()){this.config.saveHidden=true}},addCancelSaveHandlers:function f(){var e=this;this.model.on("data:sync:start",function(t,n,i){return e.setButtonsEnabled(false)},this).on("sync",function(t,n,i,r){return e.setButtonsEnabled(true,null,i.method)},this).on("data:sync:error",function(t,n,i){return e.setButtonsEnabled(true,i,t)},this)},setButtonsEnabled:function h(e,t,n){if(e){var r=this._hasAccessToSave();if(r){this._refreshHeaderActions()}this.$(".save-container").toggle(r);if(t&&(t.status===404||t.status===403&&n==="read"||n==="read"&&(!i.offlineEnabled||t instanceof i.offline.Error))){this.$(".save-container").hide()}if(!this._saveBtnDisabled){this.$(".saveBtn .btn").removeClass("disabled")}this.$(".cancelBtn .btn").removeClass("disabled")}else{this.$(".saveBtn .btn").addClass("disabled");this.$(".cancelBtn .btn").addClass("disabled")}},_refreshHeaderActions:function p(){this.availableAdditionalActions=o.getEditViewActions({view:this,model:this.model,viewType:this.layout.name});var e=!_.isEmpty(this.availableAdditionalActions);this.$(".caretBtn").toggle(e);this.$(".saveBtn").toggleClass("combined",e)},onBackClicked:function m(){},onDashboardHomeClicked:function g(){},onHomeClicked:function v(){},onTitleClicked:function y(){},onCaretClicked:function b(e){var t=this;e.preventDefault();e.stopPropagation();var n=_.map(this.availableAdditionalActions,function(e){return _.unescape(i.lang.get(e.label,null,t))});if(n.length){s.showActionSheet(n,{title:i.lang.get("LBL_SELECT_ACTION_LABEL"),onSelectCb:function r(n,i){t._processAction(e,t.headerActions.additionalAction,{action:t.availableAdditionalActions[i].handler})}})}},_hasAccessToSave:function x(){return!this.model.get("id")||i.acl.hasAccessToModel("edit",this.model)&&!_.contains(i.config.modules.nonEditableModules,this.module)}},{getOverridableMethods:function w(){return _.difference(a.getOverridableMethods(),["onBackClicked","onDashboardHomeClicked","onHomeClicked","onTitleClicked"])}});e.exports=l},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(256);e.exports=r.extendView(s,"MainMenu",{events:{"click #desktop":function o(e){e.preventDefault();a.openUrl(e.currentTarget.href)},"click .menu__item.disabled .menu-item__link":function l(e){e.preventDefault();e.stopPropagation()},'click .menu__item:not(.disabled) .menu-item__link:not([target="_blank"])':"onMenuItemClicked",swipe:function u(e){e.stopPropagation()}},globalEvents:{"app:logout":function c(){this.avatar=null},"offline:status:update":function d(e){var t=this.$el.find(".offline-icon");t.removeClass("status-success status-warning status-error status-default");t.addClass(r.utils.getOfflineStatusClass())},"app:view:change":function f(e){if(e.layoutDef&&e.layoutDef.isDynamic){return}this.highlightActiveMenuItem(e);this.toggleMenu(false,true)},"app:orientation:changed":function h(){if(!i.isTablet){return}this.toggleMenu(false,true)}},offlineStatusIconPartial:"offline-status-icon",_isOpened:false,isOpened:function p(){return this._isOpened},initialize:function m(e){var t=this;var n=$(document.body);this.$contentWrapper=i.$rootEl.find("#wrapper");this._super(e);n.on("click.menu swipe.menu",function(){if(t.isOpened()){t.toggleMenu(false)}});this._isOpened=n.hasClass("show-menu-left");r.mainMenu=this},start:function g(){this.render();this._loadUserPicture()},onMenuItemClicked:function v(e){var t=e.currentTarget;var n=t.getAttribute("href").substr(1);var r=_.findWhere(this.menuItems,{route:n});if(!i.isTablet){this.toggleMenu(false)}if(r&&_.isFunction(r.handler)){e.preventDefault();r.handler()}else{this.handleLinkClick(e)}},onBeforeRender:function y(){this._super();this.buildMenu()},onAfterRender:function b(){this._super();var e=i.controller.getScreenContext();this.highlightActiveMenuItem(e)},toggleMenu:function x(e,t,n){var a=this;var s=t||!i.supportedFeatures.menuAnimation?0:200;var o=a.$("#moduleList");var l=$(document.body);var u=r.utils.isDirectionLTR()?1:-1;var c;n=n||function(){};if(e===undefined){e=!this.isOpened()}var d={contentAnimation:{"-webkit-transform":e?"translate3d("+u*244+"px, 0, 0)":"translate3d(0, 0, 0)"},overlayAnimation:{"-webkit-transform":e?"translate3d("+u*244+"px, 0, 0)":"translate3d("+u*-100+"%, 0, 0)"}};var f={menuAnimation:{"-webkit-transform":e?"translate3d(0, 0, 0)":"translate3d("+u*-100+"%, 0, 0)"},contentAnimation:{"-webkit-transform":e?"translate3d("+u*86+"%, 0, 0)":"translate3d(0, 0, 0)"},overlayAnimation:{"-webkit-transform":e?"translate3d("+u*86+"%, 0, 0)":"translate3d("+u*-100+"%, 0, 0)"}};c=i.isTablet?d:f;var h=function p(){l.toggleClass("show-menu-left",e);a._isOpened=e;if(e){a.onClose=function(){a.toggleMenu(false,t,n)};i.activeComponents.add(a)}else{a.onClose=undefined;i.activeComponents.remove(a)}n()};this.animateMenu({isShowing:e,data:c,$menu:o,callback:h,duration:s})},animateMenu:function w(e){var t=e.data;var n=e.isShowing;if(n){$(document.body).addClass("show-menu-left");e.$menu.animate(t.menuAnimation,0)}this.$contentWrapper.animate(t.contentAnimation,e.duration,"ease-out",function(){if(!n){e.$menu.animate(t.menuAnimation,0)}if(t.overlayAnimation){i.$rootEl.find("#content-overlay").animate(t.overlayAnimation,0)}if(e.callback){e.callback()}})},_loadUserPicture:function L(e){if(!i.api.isAuthenticated()){return}var t=i.api.buildFileURL({field:"picture",module:"Users",id:i.user.get("id")},r.getFileOptions());var n=new Image;var a;if(e){t+="&id="+e;a=true}if(!this.avatar){a=true}n.onload=_.bind(this._applyUserPicture,this,{img:n,url:t});if(a){n.src=t}else{this._applyUserPicture(this.avatar)}},_applyUserPicture:function S(e){if(this.disposed){return}var t=this.$("#me i");var n={image:e.img,height:t.css("height"),width:t.css("width")};if(e.el){t.replaceWith(e.el);return}r.utils.sizePicture(n);t.css({backgroundSize:n.sizeProp,backgroundImage:"url("+e.url+")"}).addClass("withPicture");this.avatar={url:e.url,el:t}},highlightActiveMenuItem:function E(e){var t=e.root||e.module||e.parentModule;if(t==="TxLog"){t="Offline"}else if(t==="Dashboards"){t+="/"+e.dashboardId}this.$el.find("li").removeClass("current");this.$el.find("a[href='#"+t+"']").parent("li").addClass("current")},buildMenu:function k(){var e=[];_.each(r.dashboards.getDashboards({type:"home"}),function(t){var n=t.get("metadata");if(n&&n.dashlets.length){e.push({id:t.id,label:i.lang.getAppString(t.get("name"))||t.get("name")})}});this.menuItems=this._getMenuItems();_.extend(this,{items:this.menuItems,userName:i.user.get("full_name"),userId:i.user.get("id"),desktopURI:r.getDesktopUrl(),offlineEnabled:i.offlineEnabled,errorEmulationEnabled:r.utils.isErrorEmulationEnabled(),offlineStatusIconPartial:this.offlineStatusIconPartial,offlineStatusClass:r.utils.getOfflineStatusClass(),dashboards:e.length?e:undefined,dashboardsSupported:i.supportedFeatures.dashboards,activitiesSupported:i.supportedFeatures.activities})},_getMenuItems:function T(){var e=n(306);var t=_.map(i.metadata.getModuleNames({filter:["visible","display_tab"],access:"list"}),function(e){return{route:e,label:r.getPluralModuleName(e),rank:10}});var a=e.getCustomMainMenuItems();return _.sortBy(t.concat(a),"rank")},_dispose:function M(){i.events.off("app:user:picturechanged",null,this);$(document.body).off("click.menu swipe.menu");i.nomad.mainMenu=null}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(256);e.exports=r.extendView(s,"About",{events:{"click .legal a":function o(e){e.preventDefault();a.openUrl(e.target.href)},"click .support_email":function l(e){e.preventDefault();var t=i.isNative?"\n\n\nrequest ID: "+i.clientInfo.device.uuid:"";a.sendConsoleLog({email:i.config.about.supportEmail,subject:i.config.productName+" support request",body:t})},"click .support_website":function u(e){e.preventDefault();a.openUrl(i.config.about.support)},"click .server_url a":function c(e){e.preventDefault();a.openUrl(this._getServerUrl())},"swipeRight .support_website":function d(e){if(i.config.about.supportEmailVisible!=="concealed")return;this._feedBack=(this._feedBack||0)+1;if(this._feedBack>=3){this.getField("support_email").$el.removeClass("hide")}}},onAfterRender:function f(){if(i.config.about.supportEmailVisible==="visible"){this.getField("support_email").$el.removeClass("hide")}if(!i.config.about.support){this.getField("support_website").$el.addClass("hide")}if(!i.config.about.showSdkVersion){this.getField("sdk_version").$el.addClass("hide")}},initialize:function h(e){var t=i.nomad.getServerVersion();var n;this._super(e);_.extend(this,{showAttribution:i.config.about.showAttribution,fallbackFieldTemplate:"readonly",_displayTrademarks:i.config.about.displayTrademarks,_copyrightText:i.config.about.copyrightText,_trademarkText:i.config.about.trademarkText,_trademark2Text:i.config.about.trademark2Text});n=this._getServerUrl().replace(/(http:\/\/)|(https:\/\/)|(\/rest\/v10\/)/,"");this.model.set({app_version:r.getProductVersion(),sdk_version:i.config.sdkVersion,server_version:t,server_url:n,support_email:i.config.about.supportEmail,support_website:i.config.about.support,privacy:i.config.about.privacy,tos:i.config.about.tos,thirdPartySoftware:i.config.about.thirdPartySoftware})},_getServerUrl:function p(){var e;var t=i.api.isAuthenticated()?i.loginManager.getSetting():i.loginManager.getTempSetting();if(i.isNative){e=t.loginUrl;if(!e&&i.config.login.hideLoginUrl&&i.config.defaultServerUrl){e=i.config.defaultServerUrl}}else{e=t.siteUrl;if(e.indexOf("..")===0)e=i.nomad.utils.resolveUrl(e,window.location.href)}return e||""},getHeaderConfig:function m(){return{title:i.lang.get("LNK_ABOUT"),mainMenu:i.api.isAuthenticated()&&i.isSynced,rightMenu:false,back:true}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(253);var s=n(257);var o=n(269);var l=n(247);var u=n(250);e.exports=r.extendView(s,"Settings",{_bodyScroll:true,_defaultViewSplitter:":",_defaultViewFieldName:"default_view",events:{"click #touchid-toggle":"_enableTouchIdClicked"},initialize:function c(e){this._modelBackup=null;this._showOfflineButton=i.config.offline.enabled&&(i.config.offlineEnabled||i.config.offline.debug.ignoreEnabled)&&i.supportedFeatures.offline;this._offlineEnabled=i.offlineEnabled;this._configurableFontSize=i.config.ui.configurableFontSize;var t=new Backbone.Model(i.user.get("preferences"));var n=i.logger.levels[i.config.logger.level];if(n){t.set("logging",n.value-1)}var r=i.loginManager.getSetting("fontSize")||"normal";if(this._configurableFontSize&&r){t.set("fontSize",r)}this._showTouchIdButton=o.isTouchIdAuthenticationSupported();this._touchIdEnabled=o.isTouchIdForLoginSetup();t.set("touchIdEnabled",this._touchIdEnabled);e.layout.context.set("model",t);e.layout.model=t;this._super(e);if(this._configurableFontSize){var a=this.getFieldMeta("fontSize");a.options={};_.each([["tiny","LBL_FONTSIZE_TINY"],["small","LBL_FONTSIZE_SMALL"],["normal","LBL_FONTSIZE_NORMAL"],["large","LBL_FONTSIZE_LARGE"],["larger","LBL_FONTSIZE_LARGER"],["huge","LBL_FONTSIZE_HUGE"],["extra_huge","LBL_FONTSIZE_EXTRA_HUGE"]],function(e){a.options[e[0]]=i.lang.get(e[1])})}else{this.meta.panels[0].fields=_.filter(this.meta.panels[0].fields,function(e){return e.name!=="fontSize"})}if(i.supportedFeatures.settingsDefaultView){this._defineDefaultViewFields();this._adjustDefaultViewOptions();this.applyDefaultViewOnModel()}this.listenTo(this.model,"change",this.onSettingChange)},isEditView:function d(){return true},_canSetValue:function f(e,t){if(!t.dependencies.length)return true;return!!_.find(t.dependencies,function(t){var n=this.model.get(t.parentField);return!t.result||_.has(t.result(n),e)},this)},_defineDefaultViewFields:function h(){var e=this.meta.panels[0].fields;this._defaultViewFields=[{name:"default_view",label:"LBL_MOBILE_DEFAULT_VIEW",options:{Modules:i.lang.get("LBL_MOBILE_SPECIFIC_MODULE")},view:"edit",type:"enum",dependencies:[]},{name:"default_module",label:"LBL_MOBILE_DEFAULT_MODULE",options:{},view:"edit",type:"enum",dependencies:[{parentField:"default_view",condition:function t(e){var t=e.get(this.parentField);return t==="Modules"},result:function n(){var e=i.metadata.getModuleNames({filter:"visible"});return _.object(e,_.map(e,r.getPluralModuleName))}}]},{name:"default_dashboard",label:"LBL_MOBILE_DEFAULT_DASHBOARD",options:{},view:"edit",type:"enum",dependencies:[{parentField:"default_view",condition:function a(e){var t=e.get(this.parentField);return t==="Dashboards"},result:function s(){var e={};_.each(r.dashboards.getDashboards({type:"home"}),function(t){e[t.id]=i.lang.get(t.get("name"))});return e}}]},{name:"default_dashlet",label:"LBL_MOBILE_DEFAULT_DASHLET",options:{},view:"edit","default":"-1",type:"enum",dependencies:[{parentField:"default_dashboard",condition:function o(e){var t=e.get("default_view");return t==="Dashboards"},result:this._getDashboardDashlets}]}];_.each(this._defaultViewFields,function(t){var n=_.find(e,function(e){return e.name===t.name});if(!n){e.push(t)}},this);this._defaultViewFieldNames=_.pluck(this._defaultViewFields,"name")},resetDefaultView:function p(){this.defaultView=i.config.ui.defaultViewScheme;_.each(this._defaultViewFields,function(e){this.model.unset(e.name,{silent:true})},this);this.applyDefaultViewOnModel()},applyDefaultViewOnModel:function m(){this.defaultView=this.defaultView||i.loginManager.getSetting(this._defaultViewFieldName)||i.config.ui.defaultViewScheme;if(!this.defaultView)return;var e=this.defaultView.split(this._defaultViewSplitter);_.find(this._defaultViewFields,function(t){var n=!_.isEmpty(t.dependencies)&&t.dependencies[0].parentField;var i=this.model.get(n);var r=true;var a;if(i){r=!!_.find(t.dependencies,function(e){return e.condition(this.model)},this)}if(r){a=e.shift();if(!this._canSetValue(a,t)){this.resetDefaultView();return true}this.model.set(t.name,a,{silent:true})}return _.isEmpty(e)},this)},onSettingChange:function g(e){var t=_.keys(e.changed);var n=_.intersection(this._defaultViewFieldNames,t);_.each(n,function(e){this._onDefaultViewChange(e)},this)},_adjustDefaultViewOptions:function v(){var e=_.find(this.meta.panels[0].fields,function(e){return e.name===this._defaultViewFieldName},this);if(i.supportedFeatures.dashboards){var t=r.dashboards.getDashboards({type:"home"});e.options.Search=i.lang.get("LBL_MOBILE_GLOBAL_SEARCH");if(!_.isEmpty(t)){e.options.Dashboards=i.lang.get("LBL_MOBILE_SPECIFIC_DASHBOARD")}}if(i.supportedFeatures.activities){e.options.Activities=i.lang.get("LBL_ACTIVITY_STREAM")}},_getDependentFields:function y(e){var t=[];_.each(this._defaultViewFields,function(n){if(_.contains(_.pluck(n.dependencies,"parentField"),e)){t.push(n)}});return t},_getDashboardDashlets:function b(e){var t=r.dashboards.getDashboard(e).get("metadata");var n=t.dashlets;var a=_.chain(n).pluck("view").pluck("label").value();var s;a=_.map(a,function(e,t){var i=n[t].view;var a=_.defaults({label:e},i);return r.dashboards.getDashletTitle(a)});s=_.object(_.pluck(n,"id"),a);s[-1]=i.lang.get("LBL_ALL_DASHLETS");return s},_onDefaultViewChange:function x(e,t){var n=this.getField(e);var i=n.getValue();var r=this._getDependentFields(e);_.each(r,function(e){var n=e.name;var r=this.getField(n);var a={};if(!r){return}_.each(e.dependencies,function(e){if(e.condition(this.model)){a=e.result;if(_.isFunction(a)&&!_.isUndefined(i)){a=a(i)}}},this);this._adjustSubviewGrid(r,a,t)},this)},_adjustSubviewGrid:function w(e,t,n){if(_.isObject(t)){e.def.options=t;if(!n&&!_.isEmpty(this.model.changed)||_.isUndefined(this.model.get(e.name))){this.model.set(e.name,e.getDefaultValue())}e.render()}},getHeaderConfig:function L(){return{title:i.lang.get("LNK_SETTINGS"),save:true,cancel:true}},onAfterRender:function S(){this.backupModel();this.$pad=this.$(".pad");this.$modalFooter=this.$(".modal-footer");this.$touchidItem=this.$("#touchid-toggle");if(!i.config.ui.showLogLevelSetting){this.getField("logging").remove()}_.each(this._defaultViewFieldNames,function(e){this.getField(e).$el.detach().appendTo(this.$pad);this._onDefaultViewChange(e,true)},this);this.$modalFooter.detach().appendTo(this.$pad);var e=i.config.ui.icons.edit.checkboxOn;var t=i.config.ui.icons.edit.checkboxOff;var n=this;$(".checkbox_custom").on("change",function(){if(this.checked){$(this).next(".checkbox-icon").removeClass(t).addClass(e)}else{$(this).next(".checkbox-icon").removeClass(e).addClass(t)}})},onHeaderSaveClick:function E(){this.save()},save:function k(){this.setFontSize();var e=this;var t=this.model.get("language");var n=this.$el.find("#offline-toggle").attr("checked");var a=n!==i.offlineEnabled;var s=false;var u=this.$touchidItem.attr("checked");var c=false;var d=false;var f=_.once(function g(){i.controller.clean()});var h=[function(){return e._showOfflineButton&&a},function(){return e.model.get("fontSize")!==e._modelBackup.fontSize},function(){var t=false;_.each(e._defaultViewFieldNames,function(n){if(t){return}var i=e.model.get(n);if(i){t=i!==e._modelBackup[n]}},this);return t},function(){return e.model.get("logging")!==e._modelBackup.logging},function(){var e=t!==i.user.getLanguage();if(e){d=true}return e},function(){var t=e._showOfflineButton&&a;if(t&&n){d=true}return t},function(){c=e._showTouchIdButton&&(u&&o.getTempCredential()||u!==Boolean(e._modelBackup.touchIdEnabled));return c}];var p=[function(t){e._showOfflineToggleConfirm(!i.offlineEnabled,function(e){if(e){s=e}t()})},function(t){var n=e.model?e.model.get("fontSize"):e._modelBackup.fontSize;i.loginManager.setSetting("fontSize",n);t(null)},function(t){var n=e._modelBackup.default_view;if(e.model){n=_.reduce(e._defaultViewFieldNames,function(t,n){var i=e.model.get(n);if(n==="default_dashlet"&&parseInt(i,10)===-1){return t}if(i){t.push(e.model.get(n))}return t},[]).join(e._defaultViewSplitter)}i.loginManager.setSetting(e._defaultViewFieldName,n);t(null)},function(t){var n=e.getField("logging");i.config.logger.level=n.options.def.options[n.value];i.config.debugSugarApi=n.value<=1;t(null)},function(e){f();i.lang.setLanguage(t,function(t){e(t)})},function(t){if(s){f();e.toggleOffline(!i.offlineEnabled,t)}else{t()}},function(e){if(c){if(u){o.moveTempCredentialsToStorage()}else{o.resetCredentials()}}e()}];var m;m=_.select(p,function(t,n){return h[n].call(e)});if(m.length){if(d){i.overlay.show("app:sync",{template:"preloader-panel",label:"LBL_LOADING"})}async.series(m,function(e){i.overlay.hide("app:sync");if(!e){if(i.offlineEnabled&&s){l.setupBulkLoad(function(){r.mainMenu.render();i.controller.goUp()})}else{r.mainMenu.render();i.controller.goUp()}}})}else{i.controller.goUp()}},onHeaderCancelClick:function T(){this.cancel()},cancel:function M(){r.setFontSize(i.loginManager.getSetting("fontSize"));o.resetTempCredential();this.restoreModel()},backupModel:function A(){var e=JSON.stringify(this.model.toJSON());this._modelBackup=JSON.parse(e)},restoreModel:function C(){i.user.set("preferences",this._modelBackup)},toggleOffline:function R(e,t){var n=this;if(e&&!r.isOnline()){this.showOfflineConnectionError(t);return false}i.logger.debug("Offline enabled: "+e);this.toggleOfflineUserSetting(e);if(e){u.start().then(function(){return n.onOfflineEnabled()}).catch(function(e){return n.onOfflineFailure(e)}).finally(t)}else{this.stopOffline(t)}},showOfflineConnectionError:function D(e){e=e||function(){};var t="offline_enable_error";i.alert.show(t,{level:"error",messages:i.lang.get("ERR_OFFLINE_NO_CONNECTION_ENABLE_ERROR"),autoClose:true});e(t)},onOfflineEnabled:function I(e){if(e){l.start({isInitialBulkLoad:true})}},onOfflineFailure:function O(e){this.toggleOfflineUserSetting(false);if(!e.err){return}if(e.err.status===0&&_.contains(["error","abort","timeout"],e.err.textStatus)){i.alert.dismiss("offline_error");this.showOfflineConnectionError()}this.stopOffline()},toggleOfflineUserSetting:function N(e){i.offline.userEnabled=e;r.setSetting("offlineEnabled",e)},stopOffline:function F(e){e=e||_.noop;var t=[function(e){return r.dashboards.cleanDashletsCache(e)},function(e){return u.stop({dropStorage:true}).then(function(){return e()}).catch(e)}];async.parallel(t,e)},_showOfflineToggleConfirm:function B(e,t){var n=e?"LBL_OFFLINE_ENABLE_PROMPT":"LBL_OFFLINE_DISABLE_PROMPT";a.showConfirm(i.lang.get(n),{callback:function r(e){t(e===2)}})},_enableTouchIdClicked:function P(e){if(this.$touchidItem.attr("checked")){var t=this;o.performTouchIdSetup(function(e){if(!e){t.$touchidItem.prop("checked",false)}})}},setFontSize:function U(){var e=this.model.get("fontSize");r.setFontSize(e)}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(257);var s=n(268);var o=n(269);e.exports=r.extendView(a,"TouchIdSetup",{_bodyScroll:true,events:{"click .sbSkipBtn":"onTouchIdSkip","click .sbEnableBtn":"onTouchIdEnableClick","click .sbOkBtn":"onTouchIdOkClick"},initialize:function l(e){this._super(e);this.template=i.template.get("touchid-setup")},onAppResume:function u(){this.loadData()},loadData:function c(){var e=this;o.isTouchIdEnrolled(function(t){e._isTouchIdEnrolled=t;e.sbHeader=i.lang.get(t?"LBL_ENABLE_TOUCHID":"LBL_SETUP_TOUCHID");e.sbDescription=t?i.lang.get("LBL_TOUCH_ID_DISCLAIMER",null,{brandName:i.config.brandName})+i.lang.get("LBL_SETUPBUDDY_TOUCH_ID_ADDITIONAL_DISCLAIMER"):i.lang.get("LBL_TOUCH_ID_NOT_ENROLLED_MSG",null,{brandName:i.config.brandName});e.render()})},getHeaderConfig:function d(){return{title:i.lang.get("LBL_SETUPBUDDY_HEADER_TITLE"),save:false,cancel:false}},onTouchIdSkip:function f(e){s.setupStepCompleted()},onTouchIdOkClick:function h(e){s.setupStepCompleted()},onTouchIdEnableClick:function p(e){o.moveTempCredentialsToStorage();s.setupStepCompleted()}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(257);e.exports=r.extendView(a,"Offline",{_devMode:i.config.offline.debug.render,globalEvents:{"offline:status:update":"onOfflineStatusUpdated"},offlineStatusIconPartial:"offline-status-icon",initialize:function s(e){this._super(e);this.offlineDbEncrypted=i.cache.get("offline:encrypted")},render:function o(e){this.offlineStatusClass=r.utils.getOfflineStatusClass();this.offlineMessage=this.getOfflineMessage();this._super(e)},onOfflineStatusUpdated:function l(){var e=this.$el.find(".offline-icon");var t=this.$el.find("#offline-message");e.removeClass("status-success status-warning status-error status-default");e.addClass(r.utils.getOfflineStatusClass());t.html(this.getOfflineMessage())},getHeaderConfig:function u(){return{title:i.lang.get("LNK_OFFLINE_SETTINGS"),mainMenu:true,back:true}},getOfflineMessage:function c(){var e=i.offline.status;var t="";var n="";var r="LBL_OFFLINE_STATUS_ONLINE";var a="LBL_OFFLINE_STATUS_NO_PENDING_TX";var s="ERR_OFFLINE_OUT_OF_SPACE";if(!e)return"...";if(e.isSyncing){n="LBL_OFFLINE_SYNC_IN_PROGRESS"}else if(e.lastSyncTs&&e.totalTransactions>0){t=i.lang.get("LBL_OFFLINE_LAST_SYNC_TS",null,{ts:e.lastSyncTs.toLocaleString()})}if(!i.offline.isOnline()){r="LBL_OFFLINE_STATUS_OFFLINE"}else if(e.noConnection){r="LBL_OFFLINE_STATUS_BAD_NETWORK"}if(e.state===i.offline.STATE.ERROR){a="LBL_OFFLINE_STATUS_SYNC_FAILED"}else if(e.state===i.offline.STATE.WARNING&&e.totalTransactions>0){a="LBL_OFFLINE_STATUS_PENDING_TX"}return i.lang.get(a)+" "+(e.isOutOfSpace?i.lang.get(s)+" ":"")+i.lang.get(r)+" "+i.lang.get(n)+" "+t}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(257);e.exports=r.extendView(a,"OfflineSettings",{_cacheKey:"offline_debug",events:function s(){return{"change .offline-property input":"onPropChange"}},initialize:function o(e){var t=this;this._super(e);this._restoreSettings();var n=i.config.offline.debug;this.sections={configProperties:{}};_.each(["online","forceMigrate","syncManagerEnabled","monitorStatus","outOfSpace"],function(e){t.sections.configProperties[e]={isBoolean:true,value:n[e]}});if(n.performanceTracing.enabled){this.sections.performanceTracing={enableZipkin:{isBoolean:true,value:n.performanceTracing.defaultReporter==="zipkin"},zipkinServerUrl:{isString:true,value:n.performanceTracing.zipkinServerUrl}}}},getHeaderConfig:function l(){return{title:i.lang.get("LBL_OFFLINE_SETTINGS"),mainMenu:true,back:true}},onPropChange:function u(e){var t=$(e.target);var n=t.data("section");var i=t.data("key");var r=this.sections[n][i].isBoolean?e.target.checked:t.val();if(n==="configProperties"){this._updateBaseConfig(i,r)}else{this._updatePerfConfig(i,r)}},_updateBaseConfig:function c(e,t){i.config.offline.debug[e]=t},_updatePerfConfig:function d(e,t){var n=i.config.offline.debug.performanceTracing;if(e==="enableZipkin"){n.defaultReporter=t?"zipkin":"console"}else{n.zipkinServerUrl=t}this._storeSettings()},_restoreSettings:function f(){var e=i.cache.get(this._cacheKey);_.extend(i.config.offline.debug.performanceTracing,e&&e.performanceTracing)},_storeSettings:function h(){i.cache.set(this._cacheKey,{performanceTracing:i.config.offline.debug.performanceTracing})}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(253);var s=n(257);var o=n(247);var l=n(229);var u=n(271);e.exports=r.extendView(s,"OfflineStats",{globalEvents:{"offline:bulkload:progress":function c(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._updateBulkLoaderView();var n=l.ProgressEventType;if(!(e===n.START||e===n.PAGE_START)){var i={modules:t.module?[t.module]:undefined,updateRecCount:true};this._updateDbStatsView(i)}},"offline:cleanup:completed":function d(){this._updateBulkLoaderView();this._updateDbStatsView({updateRecCount:true})}},dbStats:null,bulkLoaderEnabled:false,events:function f(){return{"click .start_stop_button":"_onStartStopButtClick","click .checkbox_custom":"_onCellularCheckboxClick"}},useCellularData:false,showCellularCb:false,statusText:null,startStopButtText:null,getHeaderConfig:function h(){return{title:i.lang.get("LBL_BULK_LOAD_OFFLINE_RECORDS"),mainMenu:true,back:true}},initialize:function p(e){var t=this;this._super(e);this.bulkLoaderEnabled=i.config.offline.bulkLoad.enabled;if(this.bulkLoaderEnabled){this.useCellularData=!!u.getSetting(l.SettingsKey.ALLOW_CELLULAR);this.showCellularCb=i.isNative||i.config.scheme==="e2e";this.listenTo(this,"render",function(){return t._updateBulkLoaderView()})}this._updateDbStatsView()},_toggleSpinner:function m(e){var t=e.state===l.State.WORKING;this.$el.find(".el__spinner").toggle(t)},_populateTimestamp:function g(){var e=this.$(".bh__timestamp");var t=o.getCache().lastCompletedTs;if(t){$("span",e).text(i.date.format(new Date(t),"m/d/Y g:iA"))}},_getStatusText:function v(e){switch(e.state){case l.State.WORKING:return i.lang.get("LBL_BULK_LOAD_STATUS_DOWNLOADING",null,{module:r.getPluralModuleName(e.module),count:e.count});case l.State.IDLE:return i.lang.get("LBL_BULK_LOAD_STATUS_IDLE");case l.State.PAUSED_BY_CONNECTION:return i.lang.get("LBL_BULK_LOAD_STATUS_WAITING_FOR_CONNECTION");case l.State.PAUSED_BY_USER:return i.lang.get("LBL_BULK_LOAD_STATUS_PAUSED");default:return"Unknown error. Please connect support."}},_getButtonText:function y(e){switch(e.state){case l.State.WORKING:return i.lang.get("LBL_BULK_LOAD_BTN_PAUSE");case l.State.IDLE:return i.lang.get("LBL_BULK_LOAD_BTN_DOWNLOAD");case l.State.PAUSED_BY_CONNECTION:return i.lang.get("LBL_BULK_LOAD_BTN_PAUSE");case l.State.PAUSED_BY_USER:return i.lang.get("LBL_BULK_LOAD_BTN_RESUME");default:return"Error!"}},_updateBulkLoaderView:function b(){var e=o.getState();if(!(e.state===l.State.WORKING&&!e.module)){this.$el.find(".status-text").text(this._getStatusText(e))}this.$el.find(".start_stop_button").text(this._getButtonText(e));this._populateTimestamp(e);this._updateModuleIconsView()},_updateModuleIconsView:function x(){var e=this;var t=o.getCache().status;_.each(t,function(n,i){var r=t[i];var a=e.$("tr[data-id="+i+"] i");if(r.status===200){a.hide()}else{var s=void 0;s=r.status==="in_progress"?"warning":"error";a.removeClass();a.addClass("offline-icon status-"+s);a.show()}})},_onStartStopButtClick:function w(e){if(this.$el.find(".start_stop_button").hasClass("disabled")){return}var t=o.getState();switch(t.state){case l.State.WORKING:this._pauseBulkLoader();break;case l.State.IDLE:o.queueCompleteDownload();this._updateBulkLoaderView();break;case l.State.PAUSED_BY_CONNECTION:this._pauseBulkLoader();break;case l.State.PAUSED_BY_USER:o.userResume();this._updateBulkLoaderView();break;default:}},_pauseBulkLoader:function L(){var e=this;this.$el.find(".status-text").text(i.lang.get("LBL_BULK_LOAD_STATUS_STOPPING"));this.$el.find(".start_stop_button").toggleClass("disabled",true);o.userPause(function(){if(e.disposed){return}e.$el.find(".start_stop_button").toggleClass("disabled",false);e._updateDbStatsView()})},_updateDbStatsView:function S(){var e=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};i.offline.storage.getStats({
modules:t.modules,success:function n(a){if(e.disposed){return}if(a.dbSize){i.logger.trace("Database size as calculated by offline.storage.getStats: "+a.dbSize)}var s=i.metadata.getModuleNames({filter:"enabled"});var o=_.filter(i.offline.utils.getOfflineModules(),function(e){return i.acl.hasAccess("access",e)}).map(function(t){var n=r.getPluralModuleName(t);var i=a.count[t];var o=s.indexOf(t)!==-1?"a"+n:"b"+n;if(!_.isNumber(i)){i=e.dbStats?_.findWhere(e.dbStats.modules,{name:t}).count:0}return{moduleName:n,name:t,count:i,sortString:o}}).sort(function(e,t){return e.sortString.localeCompare(t.sortString)});e.dbStats={modules:o,totalRecordsCount:_.reduce(o,function(e,t){return e+t.count},0)};if(t.updateRecCount){e._renderRecCount(a)}else{e.render()}}})},_renderRecCount:function E(e){var t=this;_.each(e.count,function(e,n){return t.$("tr[data-id="+n+"] span.lbl-count").text(e)});this.$("span.total-count").text(this.dbStats.totalRecordsCount)},_onCellularCheckboxClick:function k(){this.useCellularData=!this.useCellularData;if(this.useCellularData){this.$(".checkbox-icon").removeClass(i.config.ui.icons.edit.checkboxOff).addClass(i.config.ui.icons.edit.checkboxOn)}else{this.$(".checkbox-icon").removeClass(i.config.ui.icons.edit.checkboxOn).addClass(i.config.ui.icons.edit.checkboxOff)}u.setSetting(l.SettingsKey.ALLOW_CELLULAR,this.useCellularData);o.processChangingConnection()}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);r.extendView(i.view.AlertView,{type:"Alert",componentType:"view"},{className:"alert",autoCloseDelay:6e3,tpl:"alert",events:{click:"onClick"},initialize:function a(e){if(_.isUndefined(e.closeable)){e.closeable=e.level!=="info"}this._super(e)},show:function s(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_.defaults(t,{autoCloseDelay:this.autoCloseDelay});this._super(e,t)},close:function o(e){if(this.disposed){return}var t=this.dispose.bind(this);e=e||{};var n=!($.os.android&&this.options.level==="load");n=!_.isUndefined(e.animate)?e.animate:n;if(n){this.$el.animate({minHeight:"0",height:"0",borderTop:"0"},500,"ease",function(){t()})}else{t()}},render:function l(){var e=this.options;if(e.closeable){this.$el.addClass("closeable")}this.$el.addClass("alert-"+e.level);var t=i.template.get(e.tpl||this.tpl)||i.template.empty;this.$el.html(t(e))},onClick:function u(){if(this.options.closeable){i.alert.dismiss(this.key)}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(308);var s=n(263);e.exports=r.extendView(a,"Dashboard",{navigationName:s.DASHBOARD,template:"dashboard",lazyInit:true,lazyLoad:true,activeIndex:null,switcherCss:"dashboard-container",hiddenViewCss:"",events:function o(){return{"click .dashlets__list .dashlet__item":"_onDashletItemClick"}},globalEvents:{"app:orientation:changed":"_onOrientationChange"},_dashlets:null,_isRecordDashboard:false,_$dashboard:null,_dashletTypeMap:{"tabbed-dashlet":"tabbed-list-container-dashlet",dashablelist:"list-container-dashlet",casessummary:"cases-summary","sales-pipeline":"forecast-pipeline",twitter:"twitter-container-dashlet"},createSwitcher:function l(){this.omitSwitcherForOneView=false;this.viewSwitcher={switcherType:a.switcherTypes.PAGINATION,options:{$parentEl:this.$el,containerSelector:".dashlets__slider-area",settings:{wrapperClass:"dashlets__slider",slideClass:"dashlet__b",spaceBetween:2}}};this._super()},initViews:function u(e,t){var n=this.model;var r=this.model.get("metadata")||{};e=[];this._isRecordDashboard=n.get("dashboard_module")!=="Home"&&n.get("view_name")==="record";this._dashlets=[];_.each(r.dashlets,function(t,n){var r=t.view;this._dashlets.push({index:n,meta:t,title:i.nomad.dashboards.getDashletTitle(r),icon:this._getDashletIcon(r)});e.push(this._getDashletViewCfg(t))},this);this._super(e,t)},_getDashletViewCfg:function c(e){var t=e.view.type;var n=i.metadata.getView(null,t);var r=this.options.parentModel||this.context.get("parentModel");var a=i.nomad.dashboards.getDashletTypeRegistry();if(n&&n.tabs){t="tabbed-dashlet"}t=a[t]||this._dashletTypeMap[t]||t;return{dashletId:e.id,name:t,meta:e,module:e.view.module,layout:this.layout,dashboardId:this.model.id,parentModel:r}},getViewParentEl:function d(e){var t='.dashlet__b[data-dashlet-index="'+this.getViewIndex(e)+'"]';return this.$(".dashlets__slider").find(t)},getActiveDashletId:function f(){var e=this._dashlets[this.activeIndex];return e&&e.meta.id},_checkSwiperUpdateRequired:function h(){if(i.navigation.manager.hasStepChanged()){this.viewSwitcher.update()}},handleActiveDashlet:function p(){var e=this.layout.options.def.dashletId;var t=this.getActiveDashletId()===e;this._$dashboard=this._$dashboard||this.$el.parent(".layout__Dashboards");if(!e){this.home()}else{var n=!this.currentView||this.currentView.meta.id!==e;var i=this.currentView&&this.currentView._dataObsolete;this._checkSwiperUpdateRequired();if(n){var r=_.findIndex(this._dashlets,function(t){return t.meta.id===e});this.switchView({index:r,disableAnimation:t})}else if(i){this.loadViewData(this.currentView)}}},home:function m(){this.setDashletsVisible(false);this.setSubtitleVisible(false);if(this.currentView){this.currentView.onBeforeHide()}this.abortActiveRequests();this._currentOrEachView(function(e){e.unbindGlobalEvents()});this.activeIndex=this.currentView=null;this.trigger("views:switch")},loadViewData:function g(e,t){e.loadData()},_onDashletItemClick:function v(e){var t=$(e.currentTarget).data("dashlet-index");var n=this._dashlets[t];if(n.meta.view){_.extend(n.meta.view,{invokedFromDashboard:true})}this.navigateByIndex(t)},switchView:function y(e){if(this.currentView){this.currentView.onBeforeHide()}else{e.disableAnimation=true}this._super(e);var t=this._dashlets[this.activeIndex];if(t.meta.view.invokedFromDashboard){this.currentView.onInvokedFromDashboard();t.meta.view.invokedFromDashboard=false}this.setDashletsVisible(true);if(this._isRecordDashboard){this.setSubtitle(t.title);this.setSubtitleVisible(true)}},onSwitchView:function b(e){if(e.index!==this.activeIndex){this.navigateByIndex(e.index)}},navigateByIndex:function x(e){var t=""+this._dashlets[e].meta.id;this.navigateToDashlet(t)},navigateToDashlet:function w(e){var t=this.model;var n=i.controller.getScreenContext();var r;var a;var s;if(this._isRecordDashboard){if(n.link){a=[n.parentModule,n.parentModelId,"link",n.link,n.modelId,"Dashboards",t.id,e]}else if(n.moduleLink){a=[n.linkParentModule,n.linkParentModelId,"link",n.moduleLink,n.parentModelId,"Dashboards",n.dashboardId,e]}else{r=this.options.parentModelId||this.context.get("parentModelId");a=[t.get("dashboard_module"),r,"Dashboards",t.id,e];if(n.root){a.splice(0,0,i.controller.getScreenContextRoot())}}s=a.join("/")}else{s=i.router.buildRoute(this.module,t.id,e)}i.controller.navigate(s,{initiator:this.navigationName})},_getDashletIcon:function L(e){var t=i.nomad.dashboards.getDashletTypeRegistry()[e.type];var n=t&&_.getNested(t.prototype,"defaults.iconKey");if(n){return n}var r=e.template==="tabbed-dashlet";var a=r?i.config.ui.icons.dashlets["tabbed-dashlet"]:i.config.ui.icons.dashlets;var s=r?"dashlets.tabbed-dashlet":"dashlets";return a[e.type]&&s+"."+e.type||"dashlets.default"},refreshData:function S(){this._currentOrEachView(function(e){e.refreshData()})},setSubtitle:function E(e){this.$el.find(".dashlets__title").text(e)},setSubtitleVisible:function k(e){this.$el.find(".dashlets__title").toggleClass("show",e)},setPaginatorVisible:function T(e){if(!this.currentView){e=false}this._$dashboard.toggleClass("show-paginator",e)},setDashletsVisible:function M(e){this._$dashboard.toggleClass("show-dashlets",e);this.setPaginatorVisible(e)},_dispose:function A(){this._super();this._dashlets=this._$dashboard=null}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(256);var o=n(268);var l=n(269);var u=r.extendView(s,"Login",{className:"view__login",privacyLink:i.config.about.privacy,tosLink:i.config.about.tos,useHttps:i.config.useHttps,_bodyScroll:true,events:{"click .about-link":function c(){var e=i.context.getContext({module:"About",create:true,skipFetch:true}).prepare();i.controller.loadDynamic({layoutDef:{className:"no-main-menu",module:"About",name:"about",appendTo:"root",gaTrack:"about",meta:{components:[{view:"header"},{view:"about"}]},context:e}});$(document.body).removeClass("show-content-child")},"click #login_btn":function d(){return this.login.apply(this,arguments)},"click #external_login_btn":function f(){return this.externalLogin.apply(this,arguments)},"click .legal-link":function h(e){e.preventDefault();a.openUrl(e.target.href)},"keypress input":function p(e){if(e.which===13){e.srcElement.blur();this.login()}},"keyup input":"_updateBtnsState","focusout input":"_updateBtnsState","change input":"_updateBtnsState"},initialize:function m(e){this._super(e);this.productVersion=i.clientInfo.app.productVersion;this.showAttribution=i.config.about.showAttribution},onAppResume:function g(e){if(l.isTouchIdForLoginSetup()&&_.isEmpty(this.model.get("password"))){this.login()}},onAfterShow:function v(){_.delay(_.bind(function(){i.overlay.hideAll();if(!this.disposed){this.$el.animate({opacity:"1"},500,"ease");if(l.isTouchIdEnabledOnLogin()&&_.isEmpty(this.model.get("password"))){this.login()}l.toggleTouchIdOnLogin(true)}},this),100)},login:function y(){var e=this;var t=function r(){e.reEnableLogin("#login_btn","LBL_LOGIN_BUTTON_TITLE")};var n={password:e.model.get("password"),username:e.model.get("username")};async.series([function(t){if(l.isTouchIdForLoginSetup()&&_.isEmpty(e.model.get("password"))){l.performTouchId(n.username,function(i,r){if(i){e.$el.find("#password").val(r);n.password=r;e.model.set("password",r);e._updateBtnsState()}t(!i)})}else{t()}},function(i){if(!e.updateButtonAndInfo("#login_btn",n.username,false)){i(true);return}var r=e.model.fields;if(_.isEmpty(e.$("input[type=url]"))){r={username:e.model.fields.username,password:e.model.fields.password}}e.model.doValidate(r,function(e){if(!e){t()}i(!e)})},function(r){i.alert.dismiss("field_validation_error");i.logger.debug("Username: "+n.username);i.login(n,i.clientInfo,{error:function a(n){if(e.disposed){return}if(n&&n.status>=400&&n.status<=403){e.model.unset("password")}t()},success:function s(){if(l.isTouchIdAuthenticationSupported()&&o.isSetupBuddySupported()&&!o.isSetupBuddyItemCompleted("localsecurity")){l.setTempCredential(n.password)}_.delay(function(){t()},500)},complete:function u(){r()}})}])},externalLogin:function b(){if(this.updateButtonAndInfo("#external_login_btn","",true)){var e=this;i.loginManager.verifyExternalLogin(function t(){e.reEnableLogin("#external_login_btn","LBL_EXTERNAL_LOGIN_BUTTON_TITLE")})}},updateButtonAndInfo:function x(e,t,n){var r=this.$(e);r.focus();if(r.is("[disabled=disabled]"))return false;i.alert.dismissAll();var a=this.model.get("url");var s=this.$el.find("#control_ssl_chkbox");var o=s.length?s.attr("checked"):i.config.useHttps;this.$el.find(".btn").attr("disabled","disabled");r.html(Handlebars.templates.spinner()+" "+i.lang.get("LBL_LOADING"));i.overlay.show("login",{spinner:false});var l={loginName:t||"",loginUrl:a||"",useHttps:o,isSSO:n};l=i.loginManager.setTempSetting(l);i.loginManager.applyLoginSettings(l);return true},reEnableLogin:function w(e,t){i.overlay.hide("login");if(this.disposed)return;this.$(e).text(i.lang.get(t));this._updateBtnsState()},render:function L(){var e=i.loginManager.getTempSetting();i.loginManager.applyLoginSettings(e);var t=e.loginUrl||i.config.defaultServerUrl;var n=e.ssoVisibilityOption;this.model.set({username:n?"":e.loginName,url:t===""?null:t},{silent:true});this.useHttps=e.useHttps;this._super();if(i.isNative){if(!e.showUrl){this.getField("url").hide()}}else{this.getField("url").remove();this.$el.find(".control-ssl").remove()}if(n){this.getField("username").remove();this.getField("password").remove();this.$("#login_btn").hide()}else if(n===false){this.$("#external_login_btn").hide()}this._updateBtnsState();var r=i.config.ui.icons.edit.checkboxOn;var a=i.config.ui.icons.edit.checkboxOff;var s=this;$("#control_ssl_chkbox").on("change",function(){if(this.checked){s.$("#control_ssl_chkbox + .checkbox-icon").removeClass(a).addClass(r)}else{s.$("#control_ssl_chkbox + .checkbox-icon").removeClass(r).addClass(a)}});return this},_updateBtnsState:function S(){if(i.config.login.externalLoginEnabled)this._setSsoBtnState();this._setLoginBtnState()},_setLoginBtnState:function E(){var e=["username","password"];var t=0;if(!_.isEmpty(this.$("input[type=url]"))){e.push("url")}_.each(e,function(e){if($("input[name="+e+"]").val()){++t}});if(e.length===t){this.$("#login_btn").removeAttr("disabled")}else{this.$("#login_btn").attr("disabled","disabled")}},_setSsoBtnState:function k(){var e=$("input[name=url]");if(!i.isNative||e&&e.val()){this.$("#external_login_btn").removeAttr("disabled")}else{this.$("#external_login_btn").attr("disabled","disabled")}}});e.exports=u},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(257);var s=r.extendView(a,"Filters",{template:"filters",className:"view__filters",isFilterDDOpened:false,customFilters:null,sortable:true,_cacheKey:"filters",_customFiltersSynced:false,isSortingDDOpened:false,SORT_DEFAULT:"date_modified",SORT_CHANGED_EVENT:"sort:changed",FILTER_CHANGED_EVENT:"filter:changed",events:{"click .filter__item-main a":"onFilterBtnClick","click .dropdown__filter [data-filter-id]":"onFilterClick","click .dropdown__filter .filters-reload":"onFiltersReloadClick","click .filter__item-by a":"onSortingBtnClick","click .filter__item-sort a":"onSortDirectionBtnClick","click .dropdown__sortBy [data-fieldname]":"onSortableFieldClick"},modulesCustomSortConfig:{Meetings:[{field:"date_start",direction:"asc",isDefault:true}]},initialize:function o(e){this._super(e);this.$body=$(document.body);this.cacheStore=r.stores.filters;this._persistLastState=!this._isOnStatelessLayout();this._searchMode=this._isOnSearchLayout();this._initFilters();this._initSorting()},_isOnSearchLayout:function l(){return this.options.module==="Search"},_isOnStatelessLayout:function u(){return _.contains(["associate","selector"],this.layout.options.subType)},_initFilters:function c(){this.unsupportedFilterIds=this._getUnsupportedFilterIds();this.compatibleFilters=this._getCompatibleFilters();this.filtersFromMetadata=this._getFiltersFromMetadata();if(i.supportedFeatures.filters&&!this._searchMode){this.customFilters=i.data.createBeanCollection("Filters");this.listenTo(this.customFilters,"data:sync:start",this.onCustomFiltersSyncStart);this.listenTo(this.customFilters,"data:sync:error",this.onCustomFiltersSyncError);this.listenTo(this.customFilters,"sync",this.onCustomFiltersSync)}this.filters=this._getAvailableFilters();this._addRecentsFilter(false)},_getUnsupportedFilterIds:function d(){var e=[];var t=i.metadata.getModule(this.options.module);if(!t.favoritesEnabled){e.push("favorites")}if(!_.getNested(t,"fields.assigned_user_id")){e.push("assigned_to_me")}return e},_getAvailableFilters:function f(){return!i.supportedFeatures.filters||this._searchMode||this._isOnSearchLayout()?this.compatibleFilters.slice():_.union(this.filtersFromMetadata,this._getFiltersFromCache())},_getCompatibleFilters:function h(){var e=this;var t=this._isOnSearchLayout()?i.lang.get("LBL_RECORDS"):r.getPluralModuleName(this.options.module);return _.reject([{id:"all_records",name:i.lang.get("LBL_LISTVIEW_FILTER_ALL",null,{module:t})},{id:"favorites",name:i.lang.get("LBL_FAVORITES_FILTER"),params:{favorites:true}},{id:"assigned_to_me",name:i.lang.get("LBL_ASSIGNED_TO_ME",null,{module:t}),params:{my_items:true}}],function(t){return _.contains(e.unsupportedFilterIds,t.id)})},_getFiltersFromMetadata:function p(){var e=this;var t=r.getPluralModuleName(this.options.module);var n=i.metadata.getModule(this.options.module,"filters");var a;var s;if(!_.isArray(_.getNested(n,"basic.meta.filters"))){return[]}a=i.utils.deepCopy(n.basic.meta.filters);s=n.default?n.default.meta.default_filter:"all_records";a.forEach(function(n){if(n.id==="favorites"){n.name="LBL_FAVORITES_FILTER"}if(n.id===s){n.active=true}n.name=i.lang.get(n.name,e.options.module,{module:t});if(!_.isArray(n.filter_definition)){n.filter_definition=[n.filter_definition]}});return _.reject(a,function(t){return _.contains(e.unsupportedFilterIds,t.id)})},_getCustomFilters:function m(){var e={limit:i.config.fetchLimit.filters,params:{filter:[{created_by:i.user.get("id"),module_name:this.options.module}]}};this.customFilters.fetch(e)},_addRecentsFilter:function g(e){if(!this.filters.length||!i.supportedFeatures.filters||!this._isOnSearchLayout()||e){return}this.filters.push({id:"recently_viewed",name:i.lang.get("LBL_RECENTLY_VIEWED"),params:{recents:true}})},_initSorting:function v(){var e=this.module;var t=i.metadata.getView(e,"list").panels[0].fields;var n=i.metadata.getModule(e,"fields");var r=this.modulesCustomSortConfig[e];var a;this.sortableFields=_.chain(t).filter(function(t){return i.utils.isSortable(e,t)}).map(function(t){return{label:i.lang.get(t.label,e),name:t.name}}).value();a=[this.SORT_DEFAULT];if(r){a=_.union(a,_.pluck(r,"field"))}_.each(a,function(t){if(n[t]&&!_.findWhere(this.sortableFields,{name:t})){this.sortableFields.unshift({name:t,label:i.lang.get(n[t].vname,e)})}},this);if(!this._isSortAvailable()){this.sortable=false}else{this._setDefaultSortState()}},_isSortAvailable:function y(){return!_.isEmpty(this.sortableFields)},_setDefaultSortState:function b(){var e=i.metadata.getModule(this.module);var t=this._persistLastState&&this._getLastState().sorting;var n=e.views.list.meta.orderBy;var r=_.findWhere(this.modulesCustomSortConfig[this.module],{isDefault:true});var a=i.metadata.getModule(this.module,"fields");var s={direction:"desc"};var o=[t,n,r&&_.pick(r,"field","direction"),a[this.SORT_DEFAULT]&&{field:this.SORT_DEFAULT},{field:this.sortableFields[0].name}];_.each(o,function(e){if(e&&!s.field&&_.findWhere(this.sortableFields,{name:e.field})){_.extend(s,e)}},this);this.sortState=s},onCustomFiltersSyncStart:function x(){this.$filters.preloader.addClass("show");this.$filters.fetchingErr.removeClass("show")},onCustomFiltersSyncError:function w(){this.$filters.preloader.removeClass("show");this.$filters.fetchingErr.addClass("show")},onCustomFiltersSync:function L(e,t){var n=this.getActiveFilter();var r=[];_.each(t,function(e){if(_.isEmpty(e.filter_definition)){return}r.push({id:e.id,name:e.name,filter_definition:e.filter_definition,custom:true})});this._setFiltersToCache(r);this.filters=this._getAvailableFilters();_.each(this.filters,function(e){e.active=e.id===n.id});this._customFiltersSynced=true;this.render();i.analytics.trackEvent("app","custom-filter",this.customFilters.length)},onAfterRender:function S(){this._super();this.$overlay=this.$(".overlay-dropdown");if(this.filters.length){this.$filters={DD:this.$(".dropdown__filter"),DDItems:this.$(".dropdown__filter a"),btn:this.$(".filter__item-main a"),preloader:this.$(".filters-preloader"),fetchingErr:this.$(".filters-fetching-error")};this._setActiveFilter(this.getActiveFilter());if(this.isFilterDDOpened){this.activeUI=this.$filters}}if(this.sortable){this.$sorting={DD:this.$(".dropdown__sortBy"),DDItems:this.$(".dropdown__sortBy a"),btn:this.$(".filter__item-by a"),btnLbl:this.$(".filter__item-by .field-name"),directionBtn:this.$(".filter__item-sort .icondefault")};this._setActiveSortState();if(this.isSortingDDOpened){this.activeUI=this.$sorting}}},_setActiveSortState:function E(){this._setSortField(this.sortState.field);this._setSortDirection(this.sortState.direction)},_setSortDirection:function k(e){var t=i.config.ui.icons.sorting.asc;var n=i.config.ui.icons.sorting.desc;this.sortState.direction=e;if(e==="desc"){t=n;n=i.config.ui.icons.sorting.asc}this.$sorting.directionBtn.removeClass(n).addClass(t).attr("data-direction",e);this._setLastState()},_setSortField:function T(e){this.sortState.field=e;this.$sorting.DDItems.removeClass("active");this.$sorting.DDItems.filter("[data-fieldname="+e+"]").addClass("active");this.$sorting.btnLbl.text(_.findWhere(this.sortableFields,{name:e}).label);this._setLastState()},onFilterBtnClick:function M(e){this.toggleDD(this.$filters);e.stopPropagation();e.preventDefault()},onSortingBtnClick:function A(e){this.toggleDD(this.$sorting);e.stopPropagation();e.preventDefault()},onSortDirectionBtnClick:function C(){var e=this.$sorting.directionBtn.attr("data-direction")==="asc"?"desc":"asc";this._setSortDirection(e);this.trigger(this.SORT_CHANGED_EVENT,this.getPreparedState())},toggleDD:function R(e){var t=this.activeUI&&this.activeUI!==e;var n=this;var r;var a;if(t){this._closeActiveDD()}this.activeUI=e;r=this.activeUI===this.$filters;a=r?!this.isFilterDDOpened:!this.isSortingDDOpened;this.activeUI.DD.toggleClass("show",a);this.activeUI.btn.toggleClass("active",a);this.$overlay.toggleClass("show",a);if(a){if(r&&i.supportedFeatures.filters&&!this._customFiltersSynced&&!this._searchMode&&!this._isOnSearchLayout()){this._getCustomFilters();this.$filters.fetchingErr.removeClass("show")}this.$body.on("click.filters",function(e){if(_.isEmpty($(e.target).closest(n.activeUI.DD))){n._closeActiveDD();e.stopPropagation();e.preventDefault()}})}else{this._removeOutsideClickHandling()}if(r){this.isFilterDDOpened=!this.isFilterDDOpened}else{this.isSortingDDOpened=!this.isSortingDDOpened}},onFilterClick:function D(e){var t=$(e.currentTarget);var n=t.attr("data-filter-id");var r=this.getFilter(n);var a=this.getActiveFilter();this._closeActiveDD();if(r.id!==a.id){this._setActiveFilter(r);this.trigger(this.FILTER_CHANGED_EVENT,this.getPreparedState())}var s=r.custom?"custom":r.id;i.analytics.trackEvent("filter",s);e.preventDefault();e.stopPropagation()},onSortableFieldClick:function I(e){var t=$(e.currentTarget);var n=t.attr("data-fieldname");this._closeActiveDD();if(n!==this.sortState.field){this._setSortField(n);this.trigger(this.SORT_CHANGED_EVENT,this.getPreparedState())}i.analytics.trackEvent("sort",n);e.preventDefault();e.stopPropagation()},onFiltersReloadClick:function O(e){this._getCustomFilters();e.preventDefault();e.stopPropagation()},getFilter:function N(e){return _.findWhere(this.filters,{id:e})},getActiveFilter:function F(){if(!this.filters.length){return}var e=this._persistLastState&&this._getLastState();var t=e?e.filter:null;var n=[{id:t},{active:true},this._isOnSearchLayout()&&{id:"recently_viewed"},{id:"all_records"}];var i;_.each(n,function(e){i=i||_.findWhere(this.filters,e)},this);if(!i){i=this.filters[0]}return i},resetToPreviousFilter:function B(){var e=_.findWhere(this.filters,{previouslyActive:true});if(e){this._setActiveFilter(e)}},toggleSearchMode:function P(e,t){if(!this.filters.length){return}var n=this.getActiveFilter();this._searchMode=e;this.filters=this._getAvailableFilters();this._addRecentsFilter(this._searchMode);this._persistLastState=this._searchMode?false:!this._isOnStatelessLayout();this.sortable=this._searchMode?false:this._isSortAvailable();this.render();if(this._searchMode&&_.findWhere(this.filters,{id:n.id})){this._setActiveFilter(n)}if(!this._searchMode&&!t&&this.getActiveFilter().id!==n.id){this.trigger(this.FILTER_CHANGED_EVENT,this.getPreparedState())}},getPreparedState:function U(){var e=this.getActiveFilter()||{};var t=e.params||{};var n=e.filter_definition;if(!_.isEmpty(n)){_.extend(t,{filter:n})}if(this.sortable){_.extend(t,{order_by:this.sortState.field+":"+this.sortState.direction})}return t},toggle:function Y(e){this.$el.toggleClass("filters-hidden",!e)},_closeActiveDD:function H(){if(!this.activeUI){return}this.activeUI.DD.removeClass("show");this.activeUI.btn.removeClass("active");this.$overlay.removeClass("show");this._removeOutsideClickHandling();if(this.activeUI===this.$filters){this._abortPendingRequests();this.isFilterDDOpened=false}else{this.isSortingDDOpened=false}this.activeUI=null},_setActiveFilter:function G(e){this.$filters.DDItems.removeClass("active");_.each(this.filters,function(t,n){if(t.id!==e.id){t.previouslyActive=false;if(t.active){t.previouslyActive=true;t.active=false}}else{this.$filters.DDItems[n].classList.add("active");this.$filters.btn.text(t.name);this.$filters.btn.data("active-filter-id",t.id);t.active=true;this._setLastState(t.id)}},this)},_removeOutsideClickHandling:function j(){this.$body.off("click.filters")},_getStoreCacheKey:function V(){return this.options.module},_getLastStateKey:function z(){var e=this.layout.options.parentModule||this.options.module;var t=this.layout.options.link||"";return["filters",e,t].join(":")},_setLastState:function q(e){if(!this._persistLastState){return}var t=this._getLastState()||{};if(e){t.filter=e}if(this.sortState){t.sorting=this.sortState}r.setLastState(this._getLastStateKey(),t)},_getLastState:function W(){return r.getLastState(this._getLastStateKey())||{}},_setFiltersToCache:function K(e){e=e||[];this.cacheStore.set(this._getStoreCacheKey(),JSON.stringify(e))},_getFiltersFromCache:function J(){var e=this.cacheStore.get(this._getStoreCacheKey());e=e?JSON.parse(e):[];return e},onDetach:function X(){this._abortPendingRequests();this._super()},_abortPendingRequests:function Z(){if(this.customFilters&&this.customFilters.getFetchRequest()){this.customFilters.abortFetchRequest()}},_dispose:function Q(){this.$body.off("click.filters");this._super()}});e.exports=s},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(257);var s=n(350);var o=2;var l=30;var u=8;var c=100;var d=50;var f=s.searchDelay;var h="@";var p="#";var m=["name","first_name","last_name"].join();e.exports=r.extendView(a,"Taggable",{className:"view__taggable",tagListOptionTemplate:Handlebars.compile('<li><a class="taggable-listItem {{#if noAccess}}disabled{{/if}}">{{#if noAccess }}<span class="taggable-status">{{str "LBL_NO_ACCESS_LOWER"}}</span>{{/if}}<div class="label label-module-sm label-{{module}}" {{debug-attributes "attribute" "record_id" id}}>{{moduleIconLabel module}}</div>{{{htmlName}}}</a></li>'),tagShadowTemplate:Handlebars.compile('<span class="sugar_tag {{class}} label-{{module}}">{{text}}</span>'),tagTextTemplate:Handlebars.compile("@[{{module}}:{{id}}:{{name}}]"),_taggableEnabled:false,_taggableListOpen:false,_taggableModuleName:null,_taggableModuleList:null,_taggableModelId:null,_searchForTagsTimerId:null,_lastSearch:null,_prevValue:"",_tags:null,_textareaSelector:".taggable",_shadowSelector:".taggable-shadow",_dropdownSelector:".taggable-dropdown",$textarea:null,textarea:null,$shadow:null,$dropdown:null,events:{"input .taggable":"onInput","click .taggable-dropdown li":"onSearchResultClick","click .sugar_tag":function g(){this.$textarea.focus()}},initialize:function v(e){this._super(e);this._tags={};this._taggableModuleList=_.filter(i.metadata.getModuleNames({filter:"visible"}),function(e){return e!=="Employees"&&e!=="Users"});if(this.model.link){this._taggableModuleName=this.model.link.bean.get("parent_type");this._taggableModelId=this.model.link.bean.get("parent_id")}else{this._taggableModuleName=this.model.module;this._taggableModelId=this.model.id}this._resetLastSearch()},_dispose:function y(){this._abortRequests(true);this._super()},getHeaderConfig:function b(){return{save:!this.options.isReadOnly,saveLabel:"LBL_COMMENT",cancel:true,btnsLong:true}},getPost:function x(){var e={};var t=this.textarea.value;var n=0;var i=t.length;var r;var a={};var s;e.value="";while(n<i){r=this._tags[n];if(r){s={id:r.model.get("id"),module:r.model.get("_module"),name:r.model.get("name")};a[s.id]=s;e.value+=this.tagTextTemplate(s);n+=r.text.length}else{e.value+=t[n];++n}}e.tags=_.values(a);return e},save:function w(){var e=this.getPost();var t=r.utils.stripLastEmptyStrings(e.value);this.model.set("tags",e.tags,{silent:true});this.model.set("value",t);this.model.trigger("save")},onHeaderSaveClick:function L(){this.save()},onAfterRender:function S(){this.$shadow=this.$el.find(this._shadowSelector);this.$dropdown=this.$el.find(this._dropdownSelector);this.$textarea=this.$el.find(this._textareaSelector);this.textarea=this.$textarea[0];this.$textarea.focus().scroll(_.bind(this.onScroll,this))},onScroll:_.throttle(function E(){var e=this.$textarea.scrollTop();this.$shadow.scrollTop(e)},d),onInput:function k(){_.defer(_.bind(function e(){if(this.disposed)return;var e;var t;if(this.textarea.value!==this._prevValue){this._fixTags();this._refreshShadow();e=this._findSearchTerm();t=e.offset!==-1;if(!t&&this._taggableEnabled){this._closeDropdown();this._resetLastSearch()}this._taggableEnabled=t;this._abortRequests(!this._taggableEnabled);this._taggableEnabled&&this._searchForTags(e);this._prevValue=this.textarea.value}},this))},onSearchResultClick:function T(e){var t=$(e.target).closest("li");var n=t.closest("ul").children("li").index(t);var i=this._lastSearch.results.models[n];i.get("has_access")===false||this._insertSearchResult(i,this._lastSearch.searchTerm)},onDataFetch:function M(e,t){if(this._taggableEnabled&&_.isEqual(this._findSearchTerm(),e)){this._lastSearch.searchTerm=e;this._lastSearch.results=t;this._populateTagList(t,e)}},_isReferenceOrMention:function A(e){return e===h||e===p},_refreshShadow:_.throttle(function C(){if(this.disposed)return;var e;var t=this.textarea.value;var n=0;var i=t.length;var a="";var s=r.utils.charToHtmlEntity;while(n<i){e=this._tags[n];if(e){a+=e.html;n+=e.text.length}else{a+=s(t[n]);++n}}this.$shadow.html(a).trigger("scroll")},c),_findSearchTerm:function R(){var e={offset:-1,action:"",term:""};var t="";var n=0;var i=this.textarea.selectionEnd-1;var r=l;var a=this.textarea.value;if(this.textarea.selectionEnd&&this.textarea.selectionStart===this.textarea.selectionEnd){while(i>=0&&r){if(this._isReferenceOrMention(a[i])){if(n>=o){e.offset=i;e.action=a[i];e.term=t}break}else if(a[i]==="\n"){break}else if(a[i]!==" "){++n;--r}t=a[i]+t;--i}}return e},_abortRequests:function D(e){var t=false;if(this._searchForTagsTimerId){window.clearTimeout(this._searchForTagsTimerId);this._searchForTagsTimerId=null}if(this._lastSearch.referenceCollection.getFetchRequest()){this._lastSearch.referenceCollection.abortFetchRequest();t=true}if(this._lastSearch.mentionCollection.getFetchRequest()){this._lastSearch.mentionCollection.abortFetchRequest();t=true}e&&t&&i.alert.dismiss("data_syncing")},_resetLastSearch:function I(){var e={offset:-1,action:"",term:""};if(this._lastSearch){this._lastSearch.searchTerm=e;this._lastSearch.results=[]}else{this._lastSearch={searchTerm:e,results:[],referenceCollection:i.data.createMixedBeanCollection(),mentionCollection:i.data.createBeanCollection("Users")}}},_matchLastSearch:function O(e){var t=this._lastSearch.searchTerm;var n=false;if(t.action===e.action){if(t.action===e.action&&t.offset===e.offset&&(t.term.trim()===e.term.trim()||!e.term.trim().indexOf(t.term.trim())&&!this._lastSearch.results.length)){n=true}}return n},_getUserFilter:function N(e){var t=e.term.trim();var n=null;var i;var r;var a;i=t.match(/([^\s]+)(\s?)(.*)/);if(i){r=i[1].trim();a=i[3].trim();n=[{$and:[{status:{$not_equals:"Inactive"}},{$or:[{first_name:{$starts:t}},{last_name:{$starts:t}}]}]}];if(a){n[0].$and[1].$or.push({$and:[{first_name:{$starts:r}},{last_name:{$starts:a}}]});n[0].$and[1].$or.push({$and:[{first_name:{$starts:a}},{last_name:{$starts:r}}]})}}return n},_searchForTags:function F(e){this._searchForTagsTimerId=window.setTimeout(_.bind(function t(e){this._searchForTagsTimerId=null;if(this.disposed||this._matchLastSearch(e)||!r.isOnline()){return}var t=_.bind(this.onDataFetch,this,e);if(e.action===h){var n=this._getUserFilter(e);if(n){this._lastSearch.mentionCollection.offlineReadDisabled=i.offlineEnabled;this.listenTo(this._lastSearch.mentionCollection,"sync",t);this._lastSearch.mentionCollection.fetch({limit:u,filter:n,params:{has_access_module:this._taggableModuleName,has_access_record:this._taggableModelId}})}}else if(e.action===p){this._lastSearch.referenceCollection.offlineReadDisabled=i.offlineEnabled;this.listenTo(this._lastSearch.referenceCollection,"sync",t);this._lastSearch.referenceCollection.fetch({limit:u,fields:["name"],module_list:this._taggableModuleList,
params:{search_fields:m,q:e.term}})}},this,e),f)},_populateTagList:function B(e,t){if(!e.length){this._closeDropdown();return}this.$dropdown.empty();e.each(function(e){var n=r.utils.escapeRegExp(r.utils.stringToHtmlEntities({stringToTransform:t.term}));var i=Handlebars.Utils.escapeExpression(e.get("name")).replace(new RegExp("("+n+")","ig"),function(e,t){return"<strong>"+t+"</strong>"});var a={module:e.get("_module"),id:e.get("id"),name:e.get("name"),htmlName:i,noAccess:e.get("has_access")===false};var s=$(this.tagListOptionTemplate(a));this.$dropdown.append(s)},this);if(!this._taggableListOpen){this._taggableListOpen=true;this.$el.addClass("show-dropdown");document.activeElement.blur();this.textarea.focus();this.$dropdown.show()}},_closeDropdown:function P(){if(this._taggableListOpen){this.$el.removeClass("show-dropdown");this.$dropdown.empty().hide();this._taggableListOpen=false}},_insertSearchResult:function U(e,t){var n=this.textarea.value||"";var i=n.slice(t.offset,t.offset+t.term.length+1);var r;var a=e.get("name");var s=this.textarea.selectionStart;var o=this.textarea.selectionEnd;var l;var u;var c;var d;if(i===t.action+t.term){r=n.slice(0,t.offset)+a+n.slice(t.offset+i.length);this.textarea.value=r;this._fixTags();this._prevValue=r;this.textarea.focus();if(this.textarea.setSelectionRange){l=Math.min(s,o);u=Math.max(s,o);if(l>t.offset&&l<t.offset+i.length||u>t.offset&&u<t.offset+i.length||l<=t.offset&&u>=t.offset+i.length){c=t.offset+a.length;d=c}else if(u>=t.offset+i.length){c=s-i.length+a.length;d=o-i.length+a.length}else{c=s;d=o}this.textarea.setSelectionRange(c,d)}this._addTag({model:e,offset:t.offset,text:a});this._refreshShadow()}this._closeDropdown()},_addTag:function Y(e){var t={text:e.text,module:e.model.get("_module")};t.class=t.module==="Users"?"mention":"reference";this._tags[e.offset]=e;this._tags[e.offset].html=this.tagShadowTemplate(t)},_fixTags:function H(){var e=this.textarea.value;var t=e.length-this._prevValue.length;var n;var i={};if(t===-1){n=_.find(this._tags,function(t){return t.text.length>1&&e.slice(t.offset,t.offset+t.text.length)!==t.text&&e.slice(t.offset,t.offset+t.text.length-1)===t.text.slice(0,-1)});if(n){e=e.slice(0,n.offset)+e.slice(n.offset+n.text.length-1);this.textarea.value=e;this.textarea.setSelectionRange(n.offset,n.offset);t=-n.text.length}}_.each(this._tags,function(n){if(e.slice(n.offset,n.offset+n.text.length)===n.text){}else if(e.slice(n.offset+t,n.offset+n.text.length+t)===n.text){n.offset+=t}else{return}i[n.offset]=n});this._tags=i}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(257);var s=r.extendView(a,"SearchBox",{className:"view__search-box",touchOutsideEventName:"touchstart.outside",_toggleSearchEventName:"search:toggle",events:{"textInput .search-query":"onKeyUp","keyup .search-query":"onKeyUp","cut   .search-query":"onChange","paste .search-query":"onChange","change .search-query":"onChange","focusin .search-query":"onFocusIn","click .searchCancelBtn":"onCancelSearch"},initialize:function o(e){this._super(e);this.timerId=null;this._searchText="";this.$searchBox=null;if($.os.ios){this.$el.find(".search-query").on("textInput",this.onKeyUp,this)}},showSearch:function l(){this.$(".view__search").addClass("show-search").animate({opacity:1},200);this.hideProgress();this.$searchBox.focus();this.trigger(this._toggleSearchEventName,true)},onCancelSearch:function u(){this.$searchBox.val("").trigger("change");this.hideSearch()},hideSearch:function c(){this.$(".view__search").animate({opacity:0},200,function(){$(this).removeClass("show-search")});this.trigger(this._toggleSearchEventName,false)},onAfterRender:function d(){this._super();this.$searchBox=this.$(".search-query")},onAfterShow:function f(){this.hideProgress();if($.os.android){var e=this;_.delay(function(){e.offsetHeight=parseInt(document.body.offsetHeight,10)},600)}if(!this.$searchBtn){this.$searchBtn=this.$el.closest(".layout__list").find(".searchBtn");this.$searchBtn.on("click.search",_.bind(this.showSearch,this))}},onKeyUp:function h(e){this._clearTimer();var t=this;var n=t.$searchBox.val();this.timerId=window.setTimeout(function(){t.search(n);if(n===""){t.focusSearchBox()}},s.searchDelay)},onChange:function p(e){var t=this;window.setTimeout(function(){t.onKeyUp(e)},200)},onFocusIn:function m(){this._bindTouchOutside();if($.os.android){var e=this;_.delay(function(){var t=window.setInterval(function(){e.trigger(e.ACTION_NAME,{name:"app:keyboard:hide"});window.clearInterval(t)},200)},600)}},resetSearch:function g(){this._clearTimer()},loadData:function v(){},focusSearchBox:function y(){this.$searchBox.get(0).focus()},search:function b(e){if(this._searchText===e){return}e=e.trim();this._searchText=e;this.trigger("search:text");this.showProgress()},getPreparedState:function x(){var e={};if(this._searchText){e.q=this._searchText}return e},showProgress:function w(){this.$el.addClass("in-progress")},hideProgress:function L(){this.$el.removeClass("in-progress")},getFieldNames:function S(){return[]},_clearTimer:function E(){if(this.timerId){window.clearTimeout(this.timerId)}},_dispose:function k(){this._clearTimer();if(this.$searchBtn){this.$searchBtn.off("click.search")}this._super()},setPlaceholder:function T(e){var t=i.lang.get("LBL_MOBILE_SEARCH_PLACEHOLDER",null,{searchCriteria:e});this.$searchBox.attr("placeholder",t)},_bindTouchOutside:function M(){var e=this;var t=this.$searchBox.get(0);$(document).bind(this.touchOutsideEventName,function(n){if(n.target!==t){document.activeElement.blur();e._unbindTouchOutside()}})},_unbindTouchOutside:function A(){$(document).unbind(this.touchOutsideEventName)},onDetach:function C(){if(this.$searchBtn){this.$searchBtn.off("click.search");this.$searchBtn=null}}},{searchDelay:600});e.exports=s},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(257);e.exports=r.extendView(s,"Error",{className:"list-layout",events:{"click #sugar_url":function o(e){e.preventDefault();a.openUrl(e.target.href)}},errors:{403:"ERR_MOBILE_NOT_AUTHORIZED"},defaultErrorLabel:"ERR_GENERIC_TITLE",onBeforeRender:function l(){if(this.context.get("backToSugar")){this.showSugarBackLink=true;this.sugarLink=r.getDesktopUrl()+"#"+this.context.get("sugarRoute")}this.errorCode=this.context.get("code");this.errorLabel=this.errors[this.errorCode]||this.defaultErrorLabel},getHeaderConfig:function u(){return{title:i.lang.get("ERR_GENERIC_TITLE"),mainMenu:true}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(257);e.exports=r.extendView(a,"RelatedRecords",{className:"scroll",initialize:function s(e){var t;this._super(e);this._requestsInProgress={};t=r.getContextMeta("detail",this.module);this.relatedList=_.chain(t.subpanels).filter(function(e){return i.acl.hasAccess("list",e.module)}).map(function(e){return _.extend({canCreate:r.canCreateRelated(e.module,this.module,e.context.link)},e)},this).value()},loadData:function o(){if(i.supportedFeatures.bulkApi&&r.isOnline()){this.getRelationshipData(function(e,t){if(!e){this._prepareListData(t);this.render()}})}},getRelationshipData:function l(e,t){var n=this;var a;var s;var o;t=t||this;a=_.map(this.relatedList,function(e){return r.buildBulkRequest({module:this.module,limit:i.config.fetchLimit.bulkQueryRelatedRecords,attributes:{id:this.model.id,link:e.context.link},params:{fields:"id"}})},this);if(_.isEmpty(a)){return}s={success:function l(n){e.call(t,null,n)},error:function u(r){i.logger.debug("Get related records error "+n.module+" : "+r);e.call(t,r)},complete:function c(){if(o){n._requestsInProgress[o.uid]=null}}};o=i.api.bulk({requests:a},s);if(o){this._requestsInProgress[o.uid]=o.uid}},_prepareListData:function u(e){this.relatedList=_.map(this.relatedList,function(t,n){var r=e[n];t.recordsCount=undefined;if(r.status===200){var a=r.contents;if(_.isArray(a.records)){var s=a.records.length;var o=i.config.fetchLimit.bulkQueryRelatedRecords;t.recordsCount=s;if(a.next_offset!==-1){t.recordsCount=o+"+"}t.isEmpty=!s}}else{t.recordsCount="!";if(i.error.isAccessError(r)){this.trigger(this.ACTION_NAME,{name:"app:access:error",options:{module:t.module}})}}t.showCount=!_.isUndefined(t.recordsCount);return t},this)},_dispose:function c(){_.each(this._requestsInProgress,function(e,t){i.api.abortRequest(t)});this._super()}})},function(e,t){"use strict";(function(e){var t={"list~Step1":{updatedVersion:2.7,content:[{selector:".logo",text:"LBL_MOBILE_TUTORIAL_HOME_MENU"},{selector:".createBtn",text:"LBL_MOBILE_TUTORIAL_HOME_PLUS"}]},list:{updatedVersion:2.7,content:[{show:"native",selector:".list-item.has-menu:nth-child(1)",text:"LBL_MOBILE_TUTORIAL_HOME_SWIPE",fromRight:true,vertAdj:5,horizAdj:-50,customMarker:"tutorial-swipe"}]},"detail~TxLog~Dashboards":{updatedVersion:2.7,content:[{selector:".bizcard .goedit-icon",text:"LBL_MOBILE_TUTORIAL_DETAIL_EDIT_ACTION",vertAdj:2,horizAdj:-2}]}};e.tutorial=e.tutorial||{};e.tutorial.config=t})(SUGAR.App)},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=20;var s=2;var o=_.extend({instance:null,show:function u(e,t){if(i.config.ui.skipTutorial){return}else if(i.tutorial.data){this.doTutorial(e,t)}else{i.tutorial.data=this.prepareData(i.tutorial.config);this.doTutorial(e,t)}},prepareData:function c(e){var t={};_.each(e,function(e,n){var r=_.filter(e.content,function(e){var t;if(e.show){t=e.show==="native"&&i.isNative||e.show==="web"&&!i.isNative}else{t=true}return t});if(r.length){t[n]=e;t[n].content=r}});return t},doTutorial:function d(e,t){var n=this.getStepName(e,t);var r=i.tutorial.data[n];var a=this.getPrefs();if(r&&!i.tutorial.instance){this.createInstance(r,n,a)}},getStepName:function f(e,t){var n=this.getPrefs();var r=new RegExp("^"+e+"([~:].*)?$","i");var a=_.chain(i.tutorial.data).keys().select(function(e){return r.test(e)}).value().sort(function(e,t){return e.indexOf(":")>-1?1:e.indexOf("~")>-1&&t.indexOf(":")<0?1:-1});var s=this;var o;_.each(a,function(n){if(n.indexOf(":")>-1&&_.contains(n.split(":"),t)&&s.isNewStep(n)){o=n}else if(n.indexOf("~")>-1&&!_.contains(n.split("~"),t)&&s.isNewStep(n)){o=n}else if(n===e&&s.isNewStep(n)){o=n}});return o},isNewStep:function h(e){var t=i.tutorial.getPrefs();var n=i.tutorial.data[e];var r=n?n.updatedVersion||0:0;var a=t.viewed[e]||0;return!t.viewed[e]||i.utils.versionCompare(a,r,"<")},createInstance:function p(e,t,n){var i=this;var r=_.any(e.content,function(e){return i.getItem(e.selector).length});if(!r){return}this.instance=new l(_.extend(e,{tutorialName:t}));this.instance.show()},getPrefs:function m(){var e=i.loginManager.getSetting("tutorialPrefs")||{};e.viewed=e.viewed||{};return e},resetPrefs:function g(e){e=e||{};e.viewed={};i.loginManager.setSetting("tutorialPrefs",e)},hasStepToShow:function v(e,t){if(i.config.ui.skipTutorial){return}else if(!i.tutorial.data){return true}else{return!!this.getStepName(e,t)}},getItem:function y(e){var t=i.controller.layoutManager.getRootLayout();var n=i.controller.layoutManager.getRecordLayout();var a;if(n){a=n.$el.find(e)}else{a=t.$el.find(e)}if(!r.utils.isElVisible(a)){a=[]}return a}});var l=Backbone.View.extend({events:{click:"onClose",swipe:"onClose"},name:"tutorial",initialize:function b(e){this.content=e.content;this.tutorialName=e.tutorialName;this.tplContext={brandName:i.config.brandName};i.events.on("app:orientation:changed",this._onOrientationChange,this)},_onOrientationChange:function x(){var e=this;this.removeHighlight();_.each(this.content,function(t){e.highlightItem(t)})},onClose:function w(e){var t=this;if(e&&!_.isString(e)){e.preventDefault();e.stopPropagation()}this.setStepViewed();$(this.$el).animate({opacity:0},300,"ease",function(){t.remove()})},show:function L(){var e=this;this.render();_.each(e.content,function(t){e.highlightItem(t)});$(this.$el).css({opacity:"1"});i.activeComponents.add(this)},setStepViewed:function S(){var e=i.tutorial.getPrefs();e.viewed[this.tutorialName]=i.config.sdkVersion;i.loginManager.setSetting("tutorialPrefs",e)},highlightItem:function E(e){var t=i.tutorial.getItem(e.selector);var n=this;if(_.isEmpty(t)){return}var a=document.createElementNS("http://www.w3.org/2000/svg","use");a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.customMarker?"#"+e.customMarker:"#marker");this.$marker=$(a);this.$svg.append(a);var s=e.horizAdj||0;var o=t.offset().left;var l=t.offset().top+(e.vertAdj||0);var u=t.offset().width;var c=this.$marker.width();var d;if(r.utils.isDirectionLTR()){d=o+s+(e.fromRight?u-c:0);o=d}else{d=-(o-s+(e.fromRight?c:u));o=-d-c;a.setAttributeNS(null,"transform","scale(-1, 1)")}a.setAttributeNS(null,"x",d);a.setAttributeNS(null,"y",l);this.appendItemGlow(e,o,l);this.showHighlightText(e,o,l)},appendItemMarker:function k(e,t,n){var i=document.createElementNS("http://www.w3.org/2000/svg","use");i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.customMarker?"#"+e.customMarker:"#marker");this.$marker=$(i);this.$svg.append(i)},appendItemGlow:function T(e,t,n){var i=r.utils.isDirectionLTR()?s:-s;if(e.customMarker){return}this.glow=document.createElementNS("http://www.w3.org/2000/svg","circle");this.glow.setAttributeNS(null,"cx",t+a+i);this.glow.setAttributeNS(null,"cy",n+a+s);this.glow.setAttributeNS(null,"r",a);this.glow.setAttributeNS(null,"fill","black");this.glow.setAttributeNS(null,"class","marker-glow");this.$glowWrap.append(this.glow)},showHighlightText:function M(e,t,n){var r=i.lang.get(e.text,null,this.tplContext);var s=$('<div class="text">'+r+"</div>").appendTo(this.$textWrap);var o=this.$marker;var l=t;var u=n;var c=o.width();var d=o.height();var f=s.width();var h=s.height();var p=$(window).width();var m=$(window).height();if(l-f>0){s.css("left",t-f+c);s.css("text-align","right")}else if(l+c+f<p){s.css("left",l);s.css("text-align","left")}else{s.css("left","50%");s.css("marginLeft",-f/2);s.css("text-align","center")}if(u+d+h<m){s.css("top",u+d)}else{s.css("top",u-h-a*1.5)}},render:function A(){var e=i.template.get("tutorial");$("body").append(e());this.$el=$("#tutorial__view");this.$svg=this.$el.find("#tutorial");this.$glowWrap=this.$el.find("#marker-glow");this.$textWrap=this.$el.find("#tutorial-content");this.delegateEvents();this.$el.show();return this},remove:function C(){delete this.$marker;delete this.$svg;delete this.$textWrap;Backbone.View.prototype.remove.call(this);i.activeComponents.remove(this);i.events.off("app:orientation:changed",this._onOrientationChange,this);i.tutorial.instance=null},removeHighlight:function R(){this.$textWrap.empty();this.$glowWrap.find(".marker-glow").remove();this.$svg.find("use").remove()}});i.tutorial=i.tutorial||{};i.tutorial=_.extend(i.tutorial,o);e.exports=i.tutorial},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(257);var s=n(271);var o=n(247);var l=n(229);var u=r.extendView(a,{type:"bulk-load-setup"},{className:"view__bulkload",events:function c(){return{"click .btn-cancel":"_onBtnClick","click .btn-download":"_onBtnClick","click .checkbox_custom":"_onCellularCheckboxClick"}},template:"bulk-load-setup",allowCellular:false,shouldShowCellularCheckbox:false,initialize:function d(e){this._super(e);this.shouldShowCellularCheckbox=i.isNative||i.config.scheme==="e2e";if(!_.isUndefined(s.getSetting(l.SettingsKey.ALLOW_CELLULAR))){this.allowCellular=s.getSetting(l.SettingsKey.ALLOW_CELLULAR)}},onAfterRender:function f(){this._super();i.alert.dismiss("offline_encryption")},_onBtnClick:function h(e){var t=e.target.attributes["data-id"].value==="ok";if(this.layout.options.callback){this.layout.options.callback(t)}},_onCellularCheckboxClick:function p(){this.allowCellular=!this.allowCellular;s.setSetting(l.SettingsKey.ALLOW_CELLULAR,this.allowCellular);this.render()}});e.exports=u},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(315);e.exports=r.extendView(a,{module:"Search"},{template:"list",initialize:function s(e){this.itemsConfig={isModuleVisible:true};this._super(e);this.modContextData=i.nomad.getContextMeta("list");this.listViewId="listing-home"},loadData:function o(){}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(253);var s=n(315);e.exports=r.extendView(s,"ListSelector",{globalEvents:{"offline:data:updated":function o(e){this._offlineRefetch(e,{relate:false})}},listItemDataProvider:"list-item-associate",multiselect:true,clearOnSubmit:true,allowEmptySelection:false,contextMenuDisabled:true,_selections:null,_headerData:null,initialize:function l(e){var t=e.meta||{};if(t.multiselect!==undefined){this.multiselect=t.multiselect}if(t.listItemTpl){this.listItemTpl=t.listItemTpl}if(t.listItemDataProvider){this.listItemDataProvider=t.listItemDataProvider}this._super(e);this.template=i.template.get(t.template||"list");this.meta=i.metadata.getView(this.module,"list");this.fallbackFieldTemplate="list";this._setHeaderData(e.headerData||t.headerData);this.setSelectedIds(e.selections)},onAfterRender:function u(){this._super();this._syncSelectionUI()},setSelectedIds:function c(e,t){this._selections=(t?_.union(this.getSelectedIds(),e):e)||[];this._syncSelectionUI()},getSelectedIds:function d(){return this._selections},getSelectedModels:function f(){var e=this.getSelectedIds();var t=[];_.each(e,function(e){var n=this.collection.get(e);if(n){t.push(n)}},this);return t},toggleItemSelected:function h(e,t){var n=this.getSelectedIds();var i=_.indexOf(n,e);var r=i!==-1;if(t===undefined){t=!r}if(t&&!r){if(!this.multiselect&&n[0]!==e){n.pop()}n.push(e)}else if(!t&&r){n.splice(i,1)}this._syncSelectionUI()},getHeaderConfig:function p(){return this._headerData},onItemElementClick:function m(e){if(e.defaultPrevented||e.cancelBubble){return}var t=$(e.currentTarget).closest("article");var n=t.attr("data-id");this.toggleItemSelected(n);if(!this.multiselect){this.submitSelection()}else{this.trigger("selection:change")}},validateSelection:function g(){var e=true;if(_.isEmpty(this.getSelectedIds())&&!this.allowEmptySelection){a.showAlert(i.lang.get("ERR_NO_RECORDS_SELECTED"));e=false}return e},submitSelection:function v(){if(!this.validateSelection()){return}var e=this.getSelectedModels();if(this.clearOnSubmit){this.clearSelection()}this.trigger("selection:submit",this.multiselect?e:e[0])},clearSelection:function y(){this._selections=[];this._syncSelectionUI()},_setHeaderData:function b(e){var t={save:true,cancel:true,rightMenu:false,saveLabel:"LBL_DONE_BUTTON_LABEL"};this._headerData=_.extend(t,this._headerData,e)},onHeaderSaveClick:function x(){this.submitSelection()},_syncSelectionUI:function w(){if(!this.multiselect){return}var e=[];var t=i.config.ui.icons.edit.checkboxOn;var n=i.config.ui.icons.edit.checkboxOff;var r=".checkbox-icon."+t.split(" ").join(".");this.$(".item-checkbox_checked").removeClass("item-checkbox_checked");this.$(r).removeClass(t).addClass(n);_.each(this.getSelectedModels(),function(i){var r=this.getListItemEl(i);r.addClass("item-checkbox_checked");r.find(".checkbox-icon").removeClass(n).addClass(t);e.push(i.id||i.cid)},this);this._selections=e},onDetach:function L(){this._super();this.clearSelection()}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(357);e.exports=r.extendView(a,"ListAssociate",{initialize:function s(e){this._headerData={save:true};this._super(e);if(!this._headerData.title){this._headerData.title=i.lang.get("LBL_ASSOC",this.module,this.moduleSingular)}this.parentModule=this.context.get("parentModule");this.parentModelId=this.context.get("parentModelId");this.link=this.context.get("link");this.parentModel=this.context.get("parentModel")||i.data.createBean(this.parentModule,{id:this.parentModelId});this.multiselect=i.data.canHaveMany(this.parentModule,this.link);this.initRelationshipFields(this.parentModule,this.link);i.logger.debug("Record(s) are to be associated with "+this.parentModel+" via link "+this.link);i.logger.debug("Multiselect: "+this.multiselect)},onBeforeRender:function o(){var e=this.collection.get(this.parentModelId);if(e){this.collection.remove(e,{silent:true})}this._super()},refresh:function l(e){e=e||{};e.relate=false;this._super(e)},loadData:function u(){this.collection.fetch({relate:false})},submitSelection:function c(){var e=this;if(!this.validateSelection()){return}var t;i.syncAlertManager.pause("update",this.model);var n=async.queue(function(e,n){e.relateBean.save(null,{relate:true,fields:["id"],success:function i(){n()},error:function r(e){t=e;n(e)}})},1);n.drain=function(){return e._onAssociateComplete(t)};_.each(this.getSelectedIds(),function(t){n.push({relateBean:i.data.createRelatedBean(e.parentModel,t,e.link)})})},_onAssociateComplete:function d(e){i.syncAlertManager.resume("update",this.model,e);if(e){return}a.prototype.submitSelection.call(this);this.trigger(this.ACTION_NAME,{name:"associate:view:save",options:{model:{module:this.module},parentModel:{id:this.parentModel.get("id"),module:this.parentModule},isCreate:true}})}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(357);e.exports=r.extendView(a,"ListPicker",{listItemDataProvider:"list-item-picker",listItemTpl:"list-item-picker",multiselect:false,isPtrEnabled:false,initialize:function s(e){this._headerData={title:i.lang.get("LBL_CHOOSE_LINK"),save:false};this._super(e);this.template=i.template.get("list-picker");this.options.templateOptions={}},setData:function o(e){this.collection.reset(e.items)}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(257);var s=n(361);e.exports=r.extendView(a,{type:"CommentsList"},{template:"comments-list",events:{"click .comments-more-btn":"_showMoreComments"},_moreCommentsCount:0,initialize:function o(e){this._super(e);var t=this.options.parentModel;var n=[];if(t.get("last_comment").id){n.push(t.get("last_comment"))}this.collection=i.data.createRelatedCollection(t,"comments",n);this.listenTo(this.collection,"sync",this.onDataSyncSuccess);this.listenTo(this.collection,"data:sync:error",this.onDataSyncError);this._updateMoreCommentsCount(this.collection.length)},_updateMoreCommentsCount:function l(e){this._moreCommentsCount=this.options.parentModel.get("comment_count")-e;if(this._moreCommentsCount<0){this._moreCommentsCount=0}},_showMoreComments:function u(e){e.preventDefault();this.collection.paginate({relate:true,add:true})},onDataSyncSuccess:function c(){this._updateMoreCommentsCount(this.collection.length);this.render()},onCreateCommentItem:function d(e){var t=i.data.createRelatedBean(e,i.data.createBean("Comments"),"comments",{parent_id:e.get("id")});var n=this;s.createPost(t,{appendTo:"root",savePost:function r(e){t.save(null,{relate:true,fields:["parent_id","data"],params:{skipOfflineRead:true},success:function i(t){n.collection.unshift(t);n.render();e(null)},error:e})}})},onDataSyncError:function f(e){}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(362);var s=n(263);e.exports=r.extendView(a,{type:"ActivitystreamDashlet"},{navigationName:s.ACTIVITIES_LIST,events:function o(){return{"click .panel__addpost":"onAddPost"}},getListDef:function l(e,t){if(t.parentModel){t.listParams=_.extend({link:"activities"},t.listParams)}return this._super(e,t)},_getMenuActions:function u(){var e=this;return[{name:"comment",types:["context-menu"],label:"LBL_COMMENT",iconKey:"actions.comment",autoClose:true,handler:function t(n,i){var r=_.find(e._commentsViews,function(e){return e.options.parentModel.id===i.id});r.onCreateCommentItem(i)}}]},_getFilterDefFromMeta:function c(e){var t;if(e){var n=i.metadata.getModule("Activities");if(_.isObject(n)){_.isObject(n.filters)&&_.each(n.filters,function(n){_.isObject(n.meta)&&_.each(n.meta.filters,function(n){if(n.id===e){t=n}})})}}return t},overrideListView:function d(e){this._super(e);e.disableItemClick=true;e.template=i.template.get("activity-list");e.contextMenuActions=this._getMenuActions();e.getListItemTpl=function(e){var t=e.get("activity_type");return t==="post"?"activity-"+t:"activity-item"};e.listenTo(e.collection,"add",_.bind(this.onItemAdded,this));e.listenTo(e.collection,"data:sync:complete",_.bind(this.initComments,this));var t=this._getFilterDefFromMeta(this.meta.view.currentFilterId);if(t){e.collection.filterDef=t.filter_definition}this.listView=e},onItemAdded:function f(e,t){var n;t.each(function(t,i){if(t.id===e.id){n=i;return}});this.createCommentsView(e,n)},initComments:function h(){this.resetCommentsViews();this.listView.collection.each(_.bind(this.createCommentsView,this));_.each(this._commentsViews,function(e){this.listenTo(e,"view:after:render",this.listReflowScroll,this)},this);this.listView.scrollReflow()},listReflowScroll:function p(){this.listView.scrollReflow()},createCommentsView:function m(e,t){this.$(".activitystream-item").eq(t).append('<div class="clip comments-container"></div>');var n=this.$(".comments-container").eq(t);var r=i.view.createView({name:"list",module:"Comments",parentModel:e,el:n,layout:this.layout});r.render();this._commentsViews.push(r)},resetCommentsViews:function g(){_.each(this._commentsViews,function(e){this.stopListening(e,"view:after:render",this.listReflowScroll);e.dispose()},this);this._commentsViews=[]},onAddPost:function v(){var e=i.data.createBean("Activities");var t=this.listView.context.get("parentModule");var n=["activity_type","data"];var r=this;var a;if(t){a=this.listView.options.listParams.parentModel;e.set({parent_id:a.id,parent_type:t});n.push("parent_id","parent_type")}this.constructor.createPost(e,{appendTo:"root",savePost:function s(t){e.save(null,{fields:n,params:{skipOfflineRead:true},success:function i(e){r.listView.collection.unshift(e);r.listView.render();t(null,e)},error:t})}})},_dispose:function y(){this.resetCommentsViews();this._super()}},{createPost:function b(e,t){t=t||{};var n=i.context.getContext({create:true,model:e});n.prepare();i.controller.loadDynamic({layoutDef:{fullScreen:true,appendTo:t.appendTo,meta:{components:[{view:{name:"taggable",context:n}}]},context:n}});var r=function a(){e.off("save");i.controller.goBack()};e.on("save",function s(){var n=e.get("value");if(!n){r();return}var a=(new Date).getTime().toString();i.overlay.show(a);e.set("data",{value:n,tags:e.get("tags")},{silent:true});t.savePost(function s(e){i.overlay.hide(a);!e&&r()})})}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(307);var s=n(263);e.exports=r.extendView(a,"ListContainerDashlet",{navigationName:s.DASHLET_LIST,contextMenuOnSwipeDisabled:true,isManager:true,lazyInit:false,lazyLoad:false,initViews:function o(e,t){e=e||[this.getListDef(t.meta.view,t)];this._super(e,t)},createView:function l(e){var t=this._super(e);t.setOfflineEnabled(false);this.overrideListView(t);this.listenTo(t,this.ACTION_NAME,this.propagateAction);return t},getListDef:function u(e,t){var n=["planned-activities","active-tasks","inactive-tasks","history"];var i=_.contains(n,this.meta.view.type)?"user-activity-list-item":null;this._updateLinkOption(e,t);var r=_.extend({parentModel:t.parentModel},e,t.listParams);return{name:"configurable-list",module:e.module,layout:t.layout,listParams:r,contextMenuOnSwipeDisabled:this.contextMenuOnSwipeDisabled,listItemTpl:i,loadDataFn:this._getLoadListFn(e)}},overrideListView:function c(e){_.extend(e,{name:"list",action:"list",_buildRecordRoute:this._getBuildRouteFn(e),navigationName:this.navigationName})},_updateLinkOption:function d(e,t){var n=_.isString(e.linked_fields)&&e.linked_fields;if(e.link||!n){return}var i=Boolean(_.isString(e.intelligent)?+e.intelligent:e.intelligent);if(i){e.link=n}},_getBuildRouteFn:function f(e){function t(t){var n=this.options;var r=t.model;var a=n.parentModel;var s=i.controller.getScreenContext();var o=i.controller.layoutManager.getRootLayout()===this.layout;var l;if(s.parentDashboardId&&o){l=[i.controller.getScreenContextRoot(),r.module,r.id].join("/")}else if(n.parentModel){l=[a.module,a.id,"Dashboards",n.dashboardId,n.dashletId,r.module,r.id];if(t.hash.action){l.push(t.hash.action)}l=l.join("/")}else{l=i.view.views.ListView.prototype._buildRecordRoute.apply(e,arguments)}return l}return _.bind(t,this)},_getLoadListFn:function h(e){var t=i.metadata.getModule(e.module);var n=this;return function(e){e=e||{};this.loadData(_.extend(e,{myItems:n.viewState.myItemsOnly,fields:t?t.mergedFields:null}))}},updateFiltersViewState:function p(e){this._super(e);var t=this.dashletParams.filter||[];if(this.meta.view.date){t.push({name:"date",type:"radioenum",options:{today:i.utils.capitalize(i.lang.get("LBL_TODAY")),future:i.utils.capitalize(i.lang.get("LBL_FUTURE"))},gaTrack:{today:"click:today",future:"click:future"}})}_.each(t,function(t){var n=this.meta.view[t.name];if(e.filters&&e.filters[t.name]){n=e.filters[t.name]}if(_.isEmpty(t.options)){t.options=i.lang.getAppListStrings(t.options)}_.extend(t,{view:"edit"});this.viewState.filters.set(t.name,n);this.viewState.filtersDef[t.name]=t},this)},refreshData:function m(){var e=this.viewState;var t=this.getFilters();var n=_.map(this.getViews(),function(n,i){return function(){var r={myItems:e.visibility==="user",params:{forceServerSync:true}};t&&t[i]&&(r.filter=t[i]);n.refresh(r)}});this.saveState();async.parallel(n,function(e){})},getFilters:function g(){}},{getOverridableMethods:function v(){return _.union(a.getOverridableMethods(),["overrideListView","getFilters"])}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(315);var s=r.extendView(a,{type:"ReadonlyList"},{events:{},fallbackFieldTemplate:"list",contextMenuDisabled:true,initialize:function o(e){e.meta=i.metadata.getView(e.module,"list");this._super(e);this.modContextData=r.getContextMeta("list")},getHeaderConfig:function l(){var e=this._super();e.rightMenu=e.save=false;return e}});r.registerComponent(s,{module:"Teams"});e.exports=s},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(253);var s=n(315);e.exports=r.extendView(s,"ConfigurableList",{disableItemClick:false,isLiveRelativeDateEnabled:true,initialize:function o(e){var t=this.listParams=e.listParams;var n=this.getCollection(t);e=_.extend({},e,{meta:this.calculateListMeta(t),collection:n,context:this.getContext(e,n),template:this.template});_.extend(e,_.pick(t,"template","listItemDataProvider","listItemTpl"));this._super(e);if(this.isLiveRelativeDateEnabled){this.listenTo(this.collection,"data:sync:start",function(){this.$("time").liverelativedate("destroy")});this.listenTo(this.collection,"data:sync:complete",function(){this.$("time").liverelativedate()})}},getContext:function l(e,t){var n=this.listParams;var r=n.parentModel;var a=i.metadata.getModule(n.module);var s={fields:a&&a.mergedFields,model:i.data.createBean("Filters"),collection:t,module:n.module,limit:n.limit,link:r&&n.link,parentModule:r&&r.module};return i.context.getContext(s)},getCollection:function u(e){var t={limit:e.limit};var n=e.parentModel&&e.link?i.data.createRelatedCollection(e.parentModel,e.link):i.data.createBeanCollection(e.module,null,t);this.setFilter(n,e);n.options=t;n.limit=t.limit;return n},setFilter:function c(e,t){var n=t.filter;var r=t.filter_id||"assigned_to_me";if(!n){var a=i.metadata.getModule(t.module,"filters");if(a&&a.basic){n=_.find(a.basic.meta.filters,function(e){return e.id===r})}}if(n){e.filterDef=n.filter_definition||n}else{e.filterId=r}},calculateListMeta:function d(e){var t=i.metadata.getModule(e.module,"fields");var n=[];_.each(e.display_columns,function(e){n.push(t[e])});return{panels:[{fields:n}]}},refresh:function f(e){this.collection.resetOptions();this._super(e)},getFieldNames:function h(){return this.listParams.display_columns},loadData:function p(e){var t=this;this.loadUserFilter(function n(i){if(i){return}t._super(e,false)})},loadUserFilter:function m(e){var t=i.data.createBean("Filters",{id:this.collection.filterId});var n=this;if(!this.collection.filterDef&&this.collection.filterId){t.fetch({success:function r(t,i){n.collection.filterDef=i.filter_definition;e()},error:function s(t){a.showAlert(i.lang.get("ERR_MOBILE_CONNECTION_FAILED"));e(t)}})}else{e()}},onItemElementClick:function g(e){if(!this.disableItemClick&&!$(e.target).closest("a").length){this._super(e)}return true}})},function(e,t,n){"use strict";var i=SUGAR.App;

var r=n(248);var a=n(315);e.exports=r.extendView(a,{module:"Recents"},{isPaginationEnabled:false,onBeforeRender:function s(){this.collection.each(function(e){var t=e.attributes._module;e.module=t;e.fields=i.metadata.getModule(t,"fields")});this._super()},initialize:function o(e){this.itemsConfig={isModuleVisible:true};this._super(e)},loadData:function l(){}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(253);var s=n(315);e.exports=r.extendView(s,{module:"TxLog"},{contextMenuActions:[{name:"delete",types:["context-menu"],label:"LBL_ROLLBACK_BUTTON",iconKey:"actions.delete",handler:function o(e,t){if(i.offline.syncManager.isSyncing()){a.showAlert(i.lang.get("LBL_OFFLINE_SYNC_IN_PROGRESS"))}else{e._rollbackTx(t)}}}],globalEvents:{"offline:tx:delete":"onTxDeleted"},listItemTpl:"list-item-tx-log",onAfterRender:function l(){this._super();this.toggleNoRecLbl()},onAfterShow:function u(){this._super();this.refresh()},getHeaderConfig:function c(){return{title:i.lang.get("LBL_TX_LOG"),mainMenu:true,back:true}},_rollbackTx:function d(e){var t=this;a.showConfirm(i.lang.get("LBL_OFFLINE_ROLLBACK_PROMPT"),{callback:function n(r){if(r===2){i.offline.storage.rollbackTransaction(e.attributes,{},function(n){if(!n){t.collection.remove(t.collection.get(e.id));i.alert.show("rollback_success",{level:"success",messages:i.lang.get("LBL_OFFLINE_ROLLBACK_SUCCESS"),closeable:true,autoClose:true});i.controller.clean();if(i.controller.getScreenContext().modelId){i.controller.goBack()}t.toggleNoRecLbl()}else{i.alert.show("rollback_success",{level:"error",messages:i.lang.get("LBL_OFFLINE_ROLLBACK_FAILED"),closeable:true,autoClose:true});i.logger.error(""+n)}})}}})},onTxDeleted:function f(e){var t=this.collection.where({_tx_uid:e.txOptions.txId})[0];this.collection.remove(t);this.toggleNoRecLbl();this.scroll.reflow()},toggleNoRecLbl:function h(){if(!this.collection.length){this.$(".no-records-found").show()}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(253);var s=n(257);e.exports=r.extendView(s,{type:"Detail",module:"TxLog"},{events:{"click .delete:not(.disabled)":"rollbackRecord"},globalEvents:{"offline:tx:delete":"onTxDeleted"},getHeaderConfig:function o(){var e=i.lang.get("LBL_TX_LOG_DETAIL");return{title:e,cancel:true}},_render:function l(){if(!this.model.get("_tx_action"))return;this._super()},onBeforeRender:function u(){var e=this.model.get("_tx_bean_module");var t=parseInt(this.model.get("_tx_action"),10);var n=i.metadata.getModule(e);var a=n||{fields:{}};this.updatedFields=i.utils.deepCopy(this.model.get("_tx_updated_fields"));if(this.updatedFields){var s=this.updatedFields.currency_id;var o=this.updatedFields.parent_type;if(o){o=_.clone(o)}else if(this.updatedFields.parent_id){this.model.attributes.parent_type=this.model.attributes.bean.parent_type}switch(t){case i.offline.SYNC_ACTIONS.CREATE:case i.offline.SYNC_ACTIONS.UPDATE:var l=this._getViewableFields(e);this.updatedFields=l?_.pick(this.updatedFields,this._getViewableFields(e)):this.updatedFields}if(i.offline.SYNC_ACTIONS.LINK===t||i.offline.SYNC_ACTIONS.UNLINK===t){this.updatedFields.link=true}else{_.each(this.updatedFields,function(t,l){if(l==="my_favorite"){t.vname="LBL_ACTION_FAVORITE";delete t.before;t.after=""+t.after}else if(l==="following"){if(r.canFollow(this.model)){t.vname="LBL_ACTION_FOLLOW";delete t.before;t.after=""+t.after}else{delete this.updatedFields.following}}else{var u=_.contains(["assigned_user_id","deleted","currency_id"],l)||t.type==="id";if(n&&(!a.fields[l]||!i.config.offline.debug.render&&u)){delete this.updatedFields[l];return}t.vname=a.fields[l]||l;_.extend(t,a.fields[l]);var c={def:a.fields[l]||{type:"varchar",name:l},view:this,model:this.model,module:e};if(c.def.type==="email"){c.def=_.defaults({type:"varchar"},c.def);t.before=_.pluck(t.before,"email_address").join(", ");t.after=_.pluck(t.after,"email_address").join(", ")}var d=i.view.createField(c);var f=i.view.createField(c);if(t.before||t.before===0){d.model.set(l,t.before,{silent:true});if(t.type==="currency"&&s){d.model.set("currency_id",s.before,{silent:true})}else if(t.type==="parent"&&o){d.model.set("parent_type",o.before,{silent:true})}t.before=d.render()}f.model.set(l,t.after,{silent:true});if(t.type==="currency"&&s){f.model.set("currency_id",s.after,{silent:true})}else if(t.type==="parent"&&o){f.model.set("parent_type",o.after,{silent:true})}t.after=f.render()}},this)}}this.fields={};this._super()},_getViewableFields:function c(e){var t=i.metadata.getView(e,"edit");if(t){return _.reduce(t.panels,function(e,t){var n=[];_.each(t.fields,function(e){if(e.fields){n.push.apply(n,_.pluck(e.fields,"name"))}else{n.push(e.name)}});return _.union(e,n)},[])}else return null},onAfterRender:function d(){this._super();_.each(this.updatedFields,function(e,t){if(t==="my_favorite"||t==="following"||!e){return}if(e.before){e.before.dispose();e.before=null}if(e.after){e.after.dispose();e.after=null}},this)},_rollbackTx:function f(){var e=this;a.showConfirm(i.lang.get("LBL_OFFLINE_ROLLBACK_PROMPT"),{callback:function t(n){if(n===2){i.offline.storage.rollbackTransaction(e.model.attributes,{},function(t){if(!t){e.collection.remove(e.collection.get(e.model.id));i.alert.show("rollback_success",{level:"success",messages:i.lang.get("LBL_OFFLINE_ROLLBACK_SUCCESS"),closeable:true,autoClose:true});i.controller.clean();i.controller.goBack()}else{i.alert.show("rollback_success",{level:"error",messages:i.lang.get("LBL_OFFLINE_ROLLBACK_FAILED"),closeable:true,autoClose:true});i.logger.error(""+t)}})}}})},rollbackRecord:function h(e,t){if(i.offline.syncManager.isSyncing()){a.showAlert(i.lang.get("LBL_OFFLINE_SYNC_IN_PROGRESS"))}else{this._rollbackTx()}},onTxDeleted:function p(e){if(e.txOptions.txId===this.model.get("_tx_uid")){this.$el.find(".btn.delete").addClass("disabled").html(i.lang.get("LBL_OFFLINE_TRANSACTION_SYNCED"))}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(260);var s=n(257);e.exports=r.extendView(s,{type:"AddressEdit"},{_bodyScroll:true,initialize:function o(e){this._super(e);this.action="edit";this.fallbackFieldTemplate="edit";this.addressFields=this.context.get("addressFields");this.addressFieldsNames=_.pluck(this.addressFields,"name");this.model=this.context.get("model")},getHeaderConfig:function l(){var e=this.context.get("editedFieldName");return{title:e,save:true,saveLabel:"LBL_DONE_BUTTON_LABEL",cancel:true}},save:function u(){var e=this;a.showOverlay();this.model.doValidate(this.addressFieldsNames,function(t){a.hideOverlay();if(t){_.each(e.addressFields,function(t){e.context.get("parentModel").set(t.name,e.model.get(t.name))});i.controller.goBack()}})},onHeaderSaveClick:function c(){this.save()}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(257);e.exports=r.extendView(a,"TextareaEdit",{editElTag:"textarea",getHeaderConfig:function s(){var e=this.options.editedFieldName;return{title:e,save:!this.options.isReadOnly,saveLabel:"LBL_DONE_BUTTON_LABEL",cancel:true}},setValue:function o(e){var t=this.$(this.editElTag);var n=this.context.get("isReadOnly");t.val(e);if(n){t.attr("readOnly",n)}if(e||n)return;t.attr("tabindex",1e5).attr("name","somename").get(0).focus()},getValue:function l(){return this.$(this.editElTag).val()},save:function u(){var e=this.getValue();var t=r.utils.stripLastEmptyStrings(e);this.context.get("parentModel").set(this.context.get("fieldName"),t);i.controller.goBack()},onHeaderSaveClick:function c(){this.save()}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(369);e.exports=r.extendView(s,"EmailbodyEdit",{events:{"click .email-body-content a":function o(e){e.preventDefault();e.stopPropagation();var t=e.target.getAttribute("href");a.openUrl(t)}},getHeaderConfig:function l(){var e=this.options.editedFieldName;return{title:e,save:false,cancel:true}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(253);var s=n(326);var o=r.extendView(s,"Edit",{NOTHING_CHANGED_ERR:"nothing_changed",VALIDATION_ERR:"validation_error",_bodyScroll:true,events:function l(){return{"click .delete":"deleteRecord"}},plugins:[],globalEvents:{"offline:data:updated":function u(e){if(e.isCollection||e.id!==this.model.id)return;if(e.action==="delete"){this.showRecordOverlay(e.data,e.status);return}if(!this._modelBackup||e.date_modified===this._modelBackup.date_modified)return;var t=i.lang.get("LBL_OFFLINE_MERGE_DATA_CONFIRM");var n=_.pick(this.model.attributes,this._getChangedFields());var r=e.complete;if(!_.isEmpty(n)){a.showConfirm(t,{callback:_.bind(function(t){if(t===2){var i=this.model;e.complete=function(){i.set(n);if(r){r.apply(this,arguments)}}}this.model.fetch(_.extend(e,{params:{skipServerSync:true}}))},this)})}else{this.model.fetch({params:{skipServerSync:true}})}}},initialize:function c(e){this._super(e);this._fileUploads={};this._modelBackup=null;this.relateFields=null;this.selectedItem=null;var t=this.context.get("link");if(t){var n=this.context.get("parentModule");var a=i.data.getRelateFields(n,t);this.relateFields=_.isEmpty(a)?null:_.pluck(a,"name");this.initRelationshipFields(n,t)}if(this.context.isCreate()){var s=i.metadata.getModule(this.module).fields.assigned_user_name;if(s&&s.type==="relate"){var o={};o[s.id_name]=i.user.get("id");o[s.name]=i.user.get("full_name");this.model.set(o)}var l=i.metadata.getModule(this.module).fields.team_name;if(l){var u=this.model.get(l.name)||i.user.getPreference("default_teams")||[];if(!u.length){u.push({id:1,name:"Global",primary:true})}this.model.set(l.name,u)}}this.displayFields=_.select(this.displayFields,function(e){return r.canDisplay(this,e)},this);this._updateReadOnlyStatus()},isEditView:function d(){return true},_render:function f(){this.action=this.context.isCreate()?"create":"edit";if(this.action==="edit"){this._updateReadOnlyStatus();this.action=this.name=this.isReadOnly?"view":"edit"}this._super()},onBeforeRender:function h(){this._super();this.model.off("error:validation");this.model.on("error:validation",function(){i.alert.show("validation_error",{level:"error",messages:i.lang.get("ERR_MOBILE_VALIDATION"),autoClose:true})},this)},onAfterRender:function p(){this._super();var e=i.metadata.getStrings("mod_strings")[this.module];var t=e?e.LBL_RELATED_RECORD_DEFAULT_NAME:null;var n=this.context.isCreate();var a=this.context.get("link");var s=this.context.get("parentModule");var o=this.context.get("parentModel");var l=o&&o.dataFetched;var u=this;var c=t&&n&&a&&!this.context.get("duplicate")&&this.model&&_.isEmpty(this.model.get("name"));var d=n&&a&&r.isStandardModule(s)&&!o.parentInfoPopulated;function f(e){if(e){t=i.lang.get("LBL_RELATED_RECORD_DEFAULT_NAME",u.module,e);var n=i.metadata.getModule(u.module);var r=n?n.fields.name:null;var a=r?r.len:null;if(a&&a<t.length){t=t.substr(0,a-3)+"..."}u.model.set("name",t)}}if(c&&l){f(o.get("full_name")||o.get("name"))}if(d&&l){this._populateParentInfo(o.toJSON(),s,a)}if(o&&!l){o.fetch({success:function h(){if(!u.model)return;if(c&&_.isEmpty(u.model.get("name"))){f(o.get("full_name")||o.get("name"))}if(d){u._populateParentInfo(o.toJSON(),s,a);o.parentInfoPopulated=true}}})}},getField:function m(e,t){var n=this._super(e,t);if(!n){_.each(this.fields,function(t){if(!n&&t.getSubfield){n=t.getSubfield(e)}})}return n},_parsePopulateList:function g(e,t){var n=_.isArray(e);_.each(e,function(e,r){r=n?e:r;if(!_.isUndefined(t[r])&&_.isEmpty(this.model.get(e))&&i.acl.hasAccessToModel("edit",this.model,e)){this.model.set(e,t[r])}},this)},_populateParentInfo:function v(e,t){var n=this.model.fields;var r=this.context.get("link");var a=i.data.getRelateFields(t,r);var s=i.metadata.getModule(t).fields[r];if(i.supportedFeatures.populateList){if(s&&s.populate_list){this._parsePopulateList(s.populate_list,e)}if(!_.isEmpty(a)){_.each(a,function(t){this.model.set(t.name,e[t.rname]);this.model.set(t.id_name,e.id);if(t.populate_list){this._parsePopulateList(t.populate_list,e)}},this)}}else{var o=(t==="Accounts"||e.account_id)&&!(t==="Opportunities"&&this.module==="Contacts")&&n.account_id&&n.account_name&&!(this.model.get("account_id")||this.model.get("account_name"))&&i.acl.hasAccessToModel("edit",this.model,"account_name");if(o){this.model.set({account_id:e.account_id||e.id,account_name:e.account_name||e.name})}}},_updateReadOnlyStatus:function y(){this.isReadOnly=!i.acl.hasAccessToModel("edit",this.model)||i.config.modules.nonEditableModules.indexOf(this.model.module)>=0},getHeaderConfig:function b(){var e=this.onlyRelationshipEdit;var t=this.context.get("link");var n=this.context.get("create");var r;var a;a={save:true,cancel:true,mainMenu:false};if(e){r=i.lang.get("LBL_MOBILE_EDIT_REL")}else{if(n){var s=this.context.get("layoutOptions")&&this.context.get("layoutOptions").isLoggingCall;r=t&&!s?i.lang.get("LBL_CREATE_RELATED",this.module,this.moduleSingular):i.lang.get("LBL_CREATE_MODULE",this.module,this.moduleSingular)}else if(this.isReadOnly){r=t?i.lang.get("LBL_RELATED_MODULE",this.module,this.moduleSingular):this.moduleSingular}else{r=t?i.lang.get("LBL_EDIT_RELATED",this.module,this.moduleSingular):i.lang.get("LBL_EDIT",this.module,this.moduleSingular)}}a.title=r;return a},onDataSyncSuccess:function x(e,t,n){this._super(e,t,n);this._onDataSyncComplete(n.method,e,n)},onDataSyncError:function w(e,t,n){this._super(e,t,n);var r=this;this._onDataSyncComplete(e,this.model,t,n);if(n.status===409){a.showConfirm(i.lang.get("ERR_MOBILE_CONFLICT"),{callback:function s(e){var t={};var a=r.model;var s=n.payload.record;if(s){if(e===2){_.each(r._getChangedFields(),function(e){t[e]=a.get(e)});r.backupModel(s);s=i.data.beanModel.merge(s,t,r.module)}else{r.backupModel(s)}a.set(s)}}})}},_onDataSyncComplete:function L(e,t,n,r){if(!this.context.isCreate()&&this.context.isDataFetched()){if(e==="read"){this.backupModel()}if(i.config.modules.nonEditableModules.indexOf(this.model.module)===-1&&this.action!==(i.acl.hasAccessToModel("edit",this.model)?"edit":"view")){this.render()}this.$(".btn.delete").toggleClass("hide",!(this.model.hasDeleteAccess()&&!(r&&e==="read")))}},deleteRecord:function S(){var e=this;a.showConfirm(i.lang.get("LBL_MOBILE_DELETE_CONFIRM"),{callback:function t(n){if(n===2){e.model.destroy({wait:true})}}})},save:function E(e){var t=this.context.get("create");this._removeErrorMessages();var n=this.model.get("email");if(n){n=_.filter(n,function(e){return!_.isEmpty(e.email_address)});this.model.set("email",n)}var r=this;var a=this._getSavingTasks(e);async.series(a,function(e){i.syncAlertManager.hideOverlay();if(e===r.VALIDATION_ERR){return}if(e===r.NOTHING_CHANGED_ERR){return i.controller.goBack()}if(!e){r.handleSaveSuccess()}else{r.handleSaveError(e)}i.syncAlertManager.resume("update",r.model,e)})},onHeaderSaveClick:function k(){this.save()},onHeaderAdditionalAction:function T(e){e.action(this,this.model)},handleSaveSuccess:function M(){this.trigger(this.ACTION_NAME,{name:"edit:view:save",options:{model:this.model,parentModel:{id:this.context.get("parentModelId"),module:this.context.get("parentModule")},isCreate:this.context.get("create")}})},handleSaveError:function A(e){if(e.isFileUploadError){i.error.handleHttpError(e)}},_getSavingTasks:function C(e){var t;var n=this.getFieldNames(true);var r=this.context.get("duplicate")?_.keys(this.model.attributes):this._getChangedFields(n);var a=this;e=e||[];if(this._sendParentId||_.include(r,"parent_id")){e.push("parent_id","parent_type","parent_name")}r=_.isEmpty(r)?null:_.union(r,e);t=[function s(e){a._validateRecord(e,r,n)},function o(e){i.syncAlertManager.pause("update",a.model);e()},function l(e){a._saveRecord(e,a._omitFileFields(r))}];_.each(this._fileUploads,function(e){t.push(_.bind(e,this))},this);return t},onBeforeValidate:function R(){i.syncAlertManager.showOverlay()},_validateRecord:function D(e,t,n){var r={};var a=i.metadata.getModule(this.module).fields;var s=_.filter(n,function(e){var t={};_.each(this.fields,function(n){if(n.name===e){t=n}},this);return!!a[e]&&!_.isEmpty(t)&&t.action!=="disabled"},this);this.onBeforeValidate();_.each(s,function(e){var t=a[e];var n=this.getField(e);if(n){t=n.def}if(t.type==="address"){_.each(t.fieldNames,function(e){r[e]=a[e]})}else if(t.required||!(t.calculated&&t.enforced)){r[t.name]=t}},this);if(this.context.get("duplicate")||!this.context.isCreate()){_.each(r,function(e,t){if(!i.acl.hasAccessToModel("edit",this.model,t)){delete r[t]}},this)}var o=this;this.model.doValidate(r,function(n){if(n){if(!_.isEmpty(t)){e(null)}else{e(o.NOTHING_CHANGED_ERR)}}else{e(o.VALIDATION_ERR)}})},_shouldUpdateNameAndFullname:function I(e){var t=i.metadata.getModule(this.model.module).fields;var n=t.name;var r=t.full_name;var a="last_name";if(_.intersection(e,["first_name","last_name","salutation","title"]).length===0){return false}return n&&r&&n.group===a&&r.group===a},_saveRecord:function O(e,t){if(!this.model){return}var n=i.metadata.getModule(this.module).fields.name;if(i.offlineEnabled&&_.intersection(t,n.fields).length!==0){if(this._shouldUpdateNameAndFullname(t)){var r=i.utils.formatNameModel(this.model.module,this.model.attributes);this.model.set("full_name",r);this.model.set("name",r);t.push("full_name");t.push("name")}else{var a=n.fields[0];this.model.set("name",this.model.get(a));t.push("name")}}if(!_.isEmpty(t)){this.model.save(null,{relate:!this._viaParent&&!!this.context.get("link"),fields:t,modelBackup:this._modelBackup,viewed:true,success:function s(){e()},error:function o(t){e(t)}})}else{e()}},_removeErrorMessages:function N(){var e=this.$(".control-group");e.find(".field__error-message").remove();e.removeClass("error")},backupModel:function F(e){this._modelBackup=i.utils.deepCopy(e||this.model.attributes);this.context.set("_modelBackup",this._modelBackup)},restoreModel:function B(){this.model.set(this.model.getChangeDiff(this._modelBackup))},receiveSyncData:function P(e){},_getChangedFields:function U(){return _.keys(this.model.getChangeDiff(this._modelBackup))||[]},_omitFileFields:function Y(e){var t=_.filter(i.metadata.getModule(this.module).fields,function(e){return e.type==="image"||e.type==="file"}).map(function(e){return e.name});return _.difference(e,t)},_onFileFieldChange:function H(e,t,n){this._super(e,t,n);var r=this;if(n==="preparing"){this._showOverlay(e.type)}else if(n==="prepared"){this._hideOverlay();this._enqueueFileHandler("create",e,t);var a=t.fileData.name;this._setFileFieldValue(e,a);r.model.doValidate([e.name],function(t){if(t){e.handleValidationError()}})}else if(n==="error"){this._hideOverlay();i.alert.show("file_upload_error",{level:"error",messages:arguments[1],autoClose:true,closeable:true});this.render()}},_setFileFieldValue:function G(e,t){this.model.set(e.name,t,{silent:true});if(!_.isEmpty(e.def.fields)){_.each(e.def.fields,function(e){this.model.set(e,t,{silent:true})},this)}},_onFileFieldClear:function j(e){this._super(e);this._enqueueFileHandler("delete",e);this._setFileFieldValue(e,"")},_enqueueFileHandler:function V(e,t,n){var i;var r=this;i=function a(i){var a=r.model.get(t.name);var s=n&&n.fileData.name||"";var o={success:function l(e){r.model.trigger("change:attachment_list");r.model.trigger("sync",r.model,e,{fileFieldName:t.name});i()},error:function u(e){delete r._fileUploads[t.name];r.model.set(t.name,a);i(e)}};r.model.set(t.name,s);if(e==="create"){_.defer(function(){r.model.uploadFile(t.name,n,o,{htmlJsonFormat:false,isCreate:r.context.get("create")})})}else{r.model.deleteFile(t.name,n,o,{htmlJsonFormat:false})}};this._fileUploads[t.name]=i},_showOverlay:function z(e){var t=e==="image"?"LBL_MOBILE_PROCESSING_IMAGE":"LBL_MOBILE_PROCESSING_FILE";i.overlay.show("preparing_image",{spinner:false});i.alert.show("upload_mask",{level:"info",messages:i.lang.get(t),autoClose:false,closeable:false})},_hideOverlay:function $(){i.alert.dismiss("upload_mask");i.overlay.hide("preparing_image")}},{getOverridableMethods:function q(){return _.union(s.getOverridableMethods(),["onBeforeValidate"])}});e.exports=o},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(371);e.exports=r.extendView(a,"EditRelationship",{template:"edit",initialize:function s(e){this._super(e);this.meta=i.metadata.getView(this.module,"edit");this.fallbackFieldTemplate="edit";this.onlyRelationshipEdit=true},save:function o(){this.trigger(this.ACTION_NAME,{name:"edit:view:save"})}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(371);var s=r.declareComponent({parent:a},{_populateParentInfo:function o(e,t,n){var r=i.acl.hasAccessToModel("edit",this.model,"parent_name");var a=i.acl.hasAccessToModel("edit",this.model,"contact_name");var s=i.metadata.getRelationship(i.metadata.getModule(t,"fields")[n].relationship)||{};if(s.via_parent_id)this._viaParent=true;if(t==="Contacts"){if(a){this.model.set({contact_id:e.id,contact_name:e.full_name||e.name});this._sendContactId=true}if(r){this.model.set({parent_id:e.account_id,parent_type:"Accounts",parent_name:e.account_name});this._sendParentId=true}}else if(r){this.model.set({parent_name:e.name,parent_id:e.id,parent_type:t});this._sendParentId=true}},save:function l(e){e=e||[];if(this._sendContactId)e.push("contact_id");this._super(e)}});i.nomad.registerComponent(s,{module:["Tasks","Notes"]});e.exports=s},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(373);var s=r.declareComponent({parent:a},{_isDateRangeMode:false,initialize:function o(e){this._super(e);this._initDateRangeProperty();if(this._isDateRangeMode){this.model.addValidationTask("date_range_validation",_.bind(this._validateRange,this))}},_initDateRangeProperty:function l(){var e=["date_start","date_end"];this._isDateRangeMode=_.some(this.options.meta.panels[0].fields,function(t){return t.type==="fieldset"&&_.intersection(t.related_fields,e).length===e.length})},onAfterRender:function u(){if(!this.context.isCreate()){var e=this.getField("invitees");if(e)e.$el.hide()}this._super();this._setDefaultDateValues()},setCallData:function c(e){this.model.set(e);if(this._isDateRangeMode){this._populateEndDateByDuration(e)}this._skipSetDefaults=true},save:function d(e){e=e||[];e.push("send_invites");if(this._isDateRangeMode){if(_.intersection(this._getChangedFields(),["date_start","date_end"]).length){e.push("duration_hours","duration_minutes")}}else{this.model.unset("date_end")}this.sendInvites=this.model.get("send_invites");this._super(e)},_saveRecord:function f(e,t){t=_.without(t,"invitees");this._populateDurationValues();this._super(e,t)},_validateRange:function h(e,t,n){var r=this.model.get("date_start");var a=this.model.get("date_end");var s;var o;var l;if(r&&a){l=i.date.compare(r,a)<1;if(!l){s=this.getField("date_start");o=this.getField("date_end");t.date_start={isBefore:o.label};t.date_end={isAfter:s.label}}}n(null,e,t||{})},_setDefaultDateValues:function p(){var e=i.date().seconds(0);if(this._skipSetDefaults||!this.context.isCreate()){return}if(e.minutes()>30){e.add("h",1).minutes(0)}else if(e.minutes()>0){e.minutes(30)}this.model.set({date_start:e.formatServer(),duration_hours:0,duration_minutes:30});if(this._isDateRangeMode){this._populateEndDateByDuration()}this.model.set({send_invites:false});this._skipSetDefaults=true},_populateEndDateByDuration:function m(e){var t=this.model;var n=t.get("date_start");var r;var a;var s;if(!n){return}a=e?e.duration_hours:t.get("duration_hours");s=e?e.duration_minutes:t.get("duration_minutes");r=i.date(n).add("h",a).add("m",s).formatServer();t.set("date_end",r)},_populateDurationValues:function g(){var e;var t;if(!this._isDateRangeMode){return}t=this.model;e=i.date(t.get("date_end")).diff(t.get("date_start"));t.set("duration_hours",Math.floor(i.date.duration(e).asHours()));t.set("duration_minutes",i.date.duration(e).minutes())},_getSavingTasks:function v(e){var t=i.view.views.EditView.prototype._getSavingTasks.call(this,e);var n=this;var r=this.model.get("invitees");if(r){_.each(r,function(e){t.push(function(t){var r=i.data.createRelatedBean(n.model,e.id,e.link);r.save(null,{relate:true,fields:["id"],success:function a(){t()},error:function s(e){t(e)}})})})}if(this.sendInvites&&this.context.isCreate()){t.push(function(e){n.model.set({send_invites:true},{silent:true});n._saveRecord(e,["send_invites"])})}return t},onBeforeValidate:function y(){if(this.context.isCreate()){this.model.unset("send_invites",{silent:true})}},handleSaveError:function b(e){this._super(e);if(!e.isFileUploadError){if(this.model){this.model.set({send_invites:this.sendInvites},{silent:true})}}}});i.nomad.registerComponent(s,{module:["Meetings","Calls"]});e.exports=s},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(371);e.exports=r.extendView(a,{module:"RevenueLineItems"},{onAfterRender:function s(){this._super();var e;if(this.model.link){e=this.model.link.bean.id}if(this.context.isCreate()&&_.isEmpty(this.model.get("opportunity_id"))){this.model.set("opportunity_id",e)}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(371);e.exports=r.extendView(a,{module:"Users"},{initialize:function s(e){this._super(e);this.model.on("change:attachment_list",_.bind(this._onChangeAttachmentList,this))},_onChangeAttachmentList:function o(){if(this.model.hasChanged("picture")){this.trigger(this.ACTION_NAME,{name:"user:picture:change",options:{pictureId:this.model.get("picture")}})}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(307);var s=n(323);e.exports=r.extendView(a,"BaseChart",{className:"chart-wrapper",chart:null,chartData:null,isManager:false,showManagerData:false,loaded:false,responseDataAttr:"data",LATEST_AVAILABLE_WARN_KEY:"LATEST_AVAILABLE_DATA",_chartElSize:null,ERR_NO_DATA_AVAILABLE:"NO_DATA_AVAILABLE",globalEvents:{"app:orientation:changed":function o(){this._updateChartElSize();this._onOrientationChange()}},initialize:function l(e){this._super(e);this.isManager=i.user.get("is_manager");s({view:this,ptrAction:_.bind(this.ptrRefresh,this)})},_updateChartElSize:function u(){this._maxLegendRows=r.getOrientation()==="landscape"&&!i.isTablet?1:4},_onOrientationChange:function c(){if(this.chart){if(this.chart.legend){this.chart.legend.rowsCount(this._maxLegendRows)}this.dispatchChartMethod("tooltipHide");this.rerenderChart()}},onBeforeRender:function d(){this.enableOptionsToolbar();this._updateChartElSize();this._super()},renderChart:function f(){this.$(".nv-chart svg").remove();nv.tooltip.cleanup();return this.chartData.data.length},onAfterRender:function h(){this._super();this.$chartEl=this.$(".nv-chart");this.$dataUnavailableLbl=this.$(".data-unavailable-label");this.listenTo(this.$(".nv-chart"),"click",_.bind(function(e){this.dispatchChartMethod("chartClick")},this))},loadData:function p(){if(this.loaded){if(this.chart){this.dispatchChartMethod("tooltipHide");this.updateChart()}return}this.showPreloader();var e=this;var t=[_.bind(this.loadChartData,this)];if(!this._isChartInitialized&&this.loadInitData){t.unshift(_.bind(this.loadInitData,this))}async.series(t,function n(t,r){e.activeRequests=[];e.hidePtrSpinner();if(t){if(!t.request.aborted){e.loadDataError(t)}return}var a=_.last(r);if(e.isDataEmpty(a,r)){e.loadDataError(e.ERR_NO_DATA_AVAILABLE);return}e.loadDataSuccess(a,function s(e){e&&i.logger.error(e+" Couldn't cache chart data")})})},showLatestAvailableDataWarn:function m(e){var t=i.date(e.last_fetched).fromNow();i.alert.dismiss(this.LATEST_AVAILABLE_WARN_KEY);i.alert.show(this.LATEST_AVAILABLE_WARN_KEY,{level:"warning",messages:i.lang.get("LBL_SHOWING_CACHED_DATA",null,{lastFetched:t}),autoClose:false,closeable:true})},isDataEmpty:function g(e,t){return _.isEmpty(e)||(this.responseDataAttr?_.isEmpty(e[this.responseDataAttr]):false)},showPreloader:function v(){i.alert.show("chart-loading",{level:"load",messages:i.lang.get("LBL_LOADING"),autoClose:false,closeable:false});this.$dataUnavailableLbl.hide()},hidePreloader:function y(){i.alert.dismiss("chart-loading")},refreshData:function b(e){this.loaded=false;if(!e){this.showPreloader()}this._super(e)},loadDataSuccess:function x(e,t){if(e.title){this.dataTitle=e.title;this.layout.onDashletChanged(this)}this.dispatchCacheStorageMethod("set",this.options.dashletId,{chartData:e,filters:this.viewState.filters,filtersDef:this.viewState.filtersDef,visibility:this.viewState.visibility,last_fetched:i.utils.getTimestamp()},t);this.loaded=true;this.hidePreloader();this.$chartEl.show();this.$dataUnavailableLbl.hide();this.processData(e)},loadDataError:function w(e){this.hidePreloader();var t=this;if(e===this.ERR_NO_DATA_AVAILABLE){this.$chartEl.hide();this.$dataUnavailableLbl.show();return}i.error.handleHttpError(e,this.model);if(_.contains([403,412,422],e.status)){return}this.dismissNetworkAlerts();this.dispatchCacheStorageMethod("get",this.options.dashletId,function n(e,i){var r=Boolean(!e&&i);t.$chartEl.toggle(r);if(!r){t.$dataUnavailableLbl.show();return}t.showLatestAvailableDataWarn(i);t.applyViewState(i);t.hidePreloader();t.processData(i.chartData)})},dispatchCacheStorageMethod:function L(e){if(!this.cacheStorage){if(e==="get"){this.$chartEl.hide();this.$dataUnavailableLbl.show()}return false}var t=_.toArray(arguments).slice(1);this.cacheStorage[e].apply(this.cacheStorage,t)},processData:function S(e){this.prepareChartObject();this.renderChart();this.toggleDashletSwipe()},applyViewState:function E(e){this._super(e);if(!_.isUndefined(this._isChartInitialized)){this._isChartInitialized=true}},setFilters:function k(e){var t=this.getState(this.options.dashboardId,this.meta.id)||{};var n=_.isEmpty(t.filters)?e:t.filters;this.viewState.filters.set(n,{silent:true})},ptrRefresh:function T(){this.refreshData(true)},getViewContainer:function M(){return this.$easyScrollerParent},isSwipable:function A(){return _.isEmpty(this.$chartEl.find(".nv-scroll-wrap").attr("clip-path"))},dispatchChartMethod:function C(e){this.chart&&this.chart.dispatch[e]()},updateChart:function R(){if(_.isFunction(this.chart.update)){this.chart.update()}else{this.renderChart()}this.toggleDashletSwipe()},rerenderChart:function D(){if(_.isFunction(this.chart.render)){this.chart.render()}else if(_.isFunction(this.chart.update)){this.chart.update()}else{this.renderChart()}this.toggleDashletSwipe()},getUserCurrencyFormatter:function I(){var e=i.user.getPreference("currency_id");var t=i.currency.getBaseCurrencyId();return function(n){var r=i.currency.convertAmount(n,t,e);return i.currency.formatAmountLocale(r,e,0)}},getUserCurrencyFormatterSi:function O(){var e=i.currency.getBaseCurrencyId();var t=i.user.getPreference("currency_id");var n=i.currency.getCurrencySymbol(t);var r=i.user.getPreference("decimal_separator");return function(a,s){var o=s||2;var l=parseFloat(i.currency.convertAmount(a,e,t));var u=d3.format(",."+o+"s")(l);return n+u.replace(".",r)}}},{getOverridableMethods:function N(){return _.union(a.getOverridableMethods(),["isDataEmpty"])}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(362);e.exports=r.extendView(a,"TabbedListContainerDashlet",{className:"tabbed__dashlet",dashletParams:null,_defaultTabStorageKey:"dashboards:{0}:dashlets:{1}:default_tab_id",_extraFields:{"planned-activities":["assigned_user_id","assigned_user_name"],"inactive-tasks":["assigned_user_id","assigned_user_name"]},viewSwitcher:a.switcherTypes.TABS,initialize:function s(e){this.activeTabStorageKey=i.utils.formatString(this._defaultTabStorageKey,[e.dashboardId,e.meta.view.type]);this._super(e)},initViews:function o(e,t){this.dashletParams.tabs=_.select(this.dashletParams.tabs,function(e){return r.utils.isAccessibleModule(e.module,"list")});e=_.map(this.dashletParams.tabs,function(e){var t=_.pluck(i.metadata.getModule(e.module,"views").list.meta.panels[0].fields,"name");var n=this._extraFields[this.meta.view.type]||[];e.display_columns=_.union(t,n);e.filters=this.adjustFilters(e.filters);return this.getListDef(e,{layout:this.layout,contextMenuOnSwipeDisabled:this.contextMenuOnSwipeDisabled,parentModel:this.options.parentModel,listParams:{limit:this.meta.view.limit}})},this);this._super(e,t)},getListDef:function l(e,t){var n=this._super(e,t);n.listViewId=[this.options.dashboardId,this.options.dashletId,_.indexOf(this.dashletParams.tabs,e)].join("_");

n.title=i.lang.get(e.label)||r.getPluralModuleName(e.module);return n},createView:function u(e){var t=this._super(e);var n=_.bind(this._updateTabInfo,this,t);t.listenTo(t.collection,"sync",n);t.listenTo(t.collection,"remove",n);return t},switchView:function c(e){this._super(e);this.saveState();this._gaHandler()},refreshData:function d(){this.saveState();this.loadData({forceServerSync:true,refresh:true})},_getLoadListFn:function f(e){var t=_.indexOf(this.dashletParams.tabs,e);var n=i.metadata.getModule(e.module).mergedFields;var r=this;return function(i){var a;var s;var o=r.getFilters();i=i||{};if(e.order_by){a=e.order_by.split(":");this.collection.orderBy={field:a[0],direction:a[1]}}this.collection.filterDef=o[t];s=_.extend({},i,{fields:n,limit:r.meta.view.limit});if(i.refresh){delete s.refresh;this.refresh(s)}else{this.loadData(s)}}},_updateTabInfo:function h(e){var t=e.collection;var n=e.collection.length;var i=this.getViewIndex(e);if(!(t.next_offset===-1||_.isUndefined(t.next_offset))){n+="+"}if(this.viewSwitcher){this.viewSwitcher.updateSubtext(i,n)}},adjustFilters:function p(e){var t=new Date;t.setHours(23,59,59);t.toISOString();if(e.date_due){_.each(e.date_due,function(n,i){if(n==="today"){e.date_due[i]=t}})}return e},getFilters:function m(){this._super();var e=[];_.each(this.dashletParams.tabs,function(t,n){var r=e[n]=[];Array.prototype.push.apply(r,this.getCollectionFilters(t));_.each(this.viewState.filters.attributes,function(e,t){var a={};var s;var o=parseInt(e,10);if(isNaN(o)){o=0}s=i.date().subtract("days",o).format("YYYY-MM-DD");a[this.dashletParams.tabs[n].filter_applied_to]=t==="date"&&e==="today"?{$lte:s}:{$gt:s};r.push(a)},this)},this);return e},getCollectionFilters:function g(e){var t=[];_.each(e.filters,function(e,n){var i={};i[n]=e;t.push(i)});if((e.module==="Meetings"||e.module==="Calls")&&this.viewState.visibility==="user"){t.push({$or:[{assigned_user_id:i.user.id},{"users.id":i.user.id}]})}else if(this.viewState.visibility==="user"){t.push({assigned_user_id:i.user.id})}return t},_gaHandler:function v(){if(!i.config.analytics.enabled){return}var e=this.activeIndex;var t=this.meta.view.type;var n;var r=this.options&&this.options.parentModel?this.options.parentModel.module:null;var a=r?["record-dashlet",r,t]:["dashlet",t];switch(t){case"casessummary":case"inactive-tasks":case"active-tasks":n=e;break;default:n=this.dashletParams.tabs[e].module;break}a.push(n);i.analytics.setActiveView(a.join("/"))}},{getOverridableMethods:function y(){return _.union(a.getOverridableMethods(),["_getCollectionFilters"])}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(377);e.exports=r.extendView(a,"ForecastChart",{initialize:function s(e){this.forecastBy=i.nomad.utils.getForecastModule();this._super(e)},buildChartUrl:function o(){}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(379);e.exports=r.extendView(s,"ForecastPareto",{_isChartInitialized:false,isForecastSetup:false,isForecastConfigValid:false,forecastsNotSetUpMsg:"",$groupByFilter:null,template:"forecast-pareto",events:function o(){var o=i.view.views.BaseChartView.prototype.events;return _.extend({},o,{"click .lnk-non-forecast":function e(t){t.preventDefault();a.openUrl(t.target.href)}})},initialize:function l(e){this._super(e);this.forecastConfig=i.metadata.getModule("Forecasts","config");this.isForecastSetup=this.forecastConfig.is_setup;this.isForecastsConfigValid=r.utils.isForecastConfigValid();this.showManagerData=false;if(this.isForecastSetup){this.dashletConfig=i.metadata.getView(null,"forecast-pareto");if(_.isString(this.dashletConfig.dataset.options)&&_.isString(this.dashletConfig.group_by.options)){var t=i.lang.getAppListStrings(this.dashletConfig.dataset.options);this.dashletConfig.group_by.options=i.lang.getAppListStrings(this.dashletConfig.group_by.options);this.dashletConfig.dataset.options={};if(this.forecastConfig.show_worksheet_worst&&i.acl.hasAccess("read",this.forecastBy,{field:"worst_case"})){this.dashletConfig.dataset.options.worst=t.worst}if(this.forecastConfig.show_worksheet_likely&&i.acl.hasAccess("read",this.forecastBy,{field:"likely_case"})){this.dashletConfig.dataset.options.likely=t.likely}if(this.forecastConfig.show_worksheet_best&&i.acl.hasAccess("read",this.forecastBy,{field:"best_case"})){this.dashletConfig.dataset.options.best=t.best}}}else{var n=_.isUndefined(i.user.getAcls().Forecasts.admin);this.forecastsNotSetUpMsg=r.utils.getForecastNotSetUpMessage(n)}},refreshData:function u(e){if(this.previousVisibilityState!==this.viewState.visibility){this.previousVisibilityState=this.viewState.visibility;this._super(e);if(this.$groupByFilter){this.$groupByFilter.toggle()}}else if(e){this._super(e)}else if(this._serverData){this.saveState();this.renderChart()}},loadData:function c(){if(this.isForecastSetup){this._super()}else{this.hidePreloader()}},loadDataError:function d(e){this._super(e);this._serverData=null},processData:function f(e){this._serverData=e;if(this._serverData){this._super(e)}},loadInitData:function h(e){var t=this;function n(n){t.initForecast(n);e(null,n)}this.apiCall("GET",i.api.buildURL("Forecasts/init"),null,{success:function r(e){var i=t.options.parentModel;if(i){i.once("sync",function(){n(e)}).fetch()}else{n(e)}},error:e})},loadChartData:function p(e){var t={};var n;t.no_data=this.viewState.filters.get("no_data")===true;if(this.isManager){t.target_quota=this.viewState.filters.get("show_target_quota")?1:0}n=i.api.buildURL(this.buildChartUrl(),null,null,t);this.apiCall("read",n,{},r.utils.wrapAsyncCallback(e))},initForecast:function m(e){var t={user_id:i.user.get("id"),show_target_quota:false,selectedTimePeriod:e.defaultSelections.timeperiod_id.id,timeperiod_id:e.defaultSelections.timeperiod_id.id,timeperiod_label:e.defaultSelections.timeperiod_id.label,dataset:e.defaultSelections.dataset,group_by:e.defaultSelections.group_by,ranges:_.keys(i.lang.getAppListStrings(this.forecastConfig.buckets_dom))};this._isChartInitialized=true;this.viewState.filtersDef={group_by:this.dashletConfig.group_by,dataset:this.dashletConfig.dataset};this.previousVisibilityState=this.viewState.visibility;this.setFilters(t);this.render()},prepareChartObject:function g(){var e=this.getUserCurrencyFormatter();var t=this.getUserCurrencyFormatterSi();this.chartId=this.cid+"_chart";this.chart=nv.models.paretoChart().margin({top:0,right:10,bottom:0,left:10}).showTitle(false).tooltips(true).tooltipQuota(function(t,n,i,r,a){return"<p><b>"+r.key+": <b>"+e(r.val)+"</b></p>"}).tooltipLine(function(t,n,r,a,s){return"<p><b>"+i.lang.get("LBL_CUMULATIVE_TOTAL","Forecasts")+"</b></p><p>"+t+": <b>"+e(a.point.y)+"</b></p>"}).tooltipBar(_.bind(function(t,n,r,a,s){var o=i.lang.get("LBL_SALES_STAGE","Forecasts");if(this.viewState.filters.get("group_by")==="probability"){o=i.lang.get("LBL_OW_PROBABILITY","Forecasts")+" (%)"}return"<p>"+o+": <b>"+t+"</b></p>"+"<p>"+i.lang.get("LBL_AMOUNT","Forecasts")+": <b>"+e(a.value)+"</b></p>"+"<p>"+i.lang.get("LBL_PERCENT","Forecasts")+": <b>"+n+"%</b></p>"},this)).colorData("default").colorFill("default").valueFormat(function(e){return t(e,2)}).barClick(function(e,t,n,i){return}).id(this.chartId).strings({legend:{close:i.lang.getAppString("LBL_CHART_LEGEND_CLOSE"),open:i.lang.getAppString("LBL_CHART_LEGEND_OPEN")},noData:i.lang.getAppString("LBL_CHART_NO_DATA")})},renderChart:function v(){if(this.isManager&&this.viewState.visibility==="group"){this.showManagerData=true;this.convertManagerDataToChartData()}else{this.showManagerData=false;this.convertUserDataToChartData()}this.generateD3Chart()},convertUserDataToChartData:function y(){_.each(this._serverData.data,function(e){if(_.has(e,"likely")&&isNaN(e.likely)){e.likely=0}if(_.has(e,"best")&&isNaN(e.best)){e.best=0}if(_.has(e,"worst")&&isNaN(e.worst)){e.worst=0}});var e=this.viewState.filters.get("group_by");var t=this.viewState.filters.get("dataset");var n=this.viewState.filters.get("ranges");var r=0;var a=[];var s=this._serverData["x-axis"].map(function(e,t){return{series:r,x:t+1,y:0}});var o={key:this._serverData.labels.dataset[t],type:"line",series:r,values:[],valuesOrig:[]};var l={properties:{name:this._serverData.title,yDataType:"currency",xDataType:"string",quota:parseFloat(this._serverData.quota),quotaLabel:i.lang.get("LBL_QUOTA","Forecasts"),groupData:this._serverData["x-axis"].map(function(e,t){return{group:t,l:e.label,t:0}})},data:[]};var u=this._serverData.data;var c=!_.isEmpty(n)?u.filter(function(e){return _.contains(n,e.forecast)}):u;_.each(this._serverData.labels[e],function(n,o){var u=c.filter(function(t){return t[e]==o});if(!_.isEmpty(u)){var d=this._serverData["x-axis"].map(function(e,t){return{series:r,x:t+1,y:0,y0:0}});var f=this._serverData["x-axis"];_.each(u,function(e){for(var n=0;n<f.length;n++){if(e.date_closed_timestamp>=f[n].start_timestamp&&e.date_closed_timestamp<=f[n].end_timestamp){var i=parseFloat(e[t]);d[n].y+=i;l.properties.groupData[n].t+=i;s[n].y+=i;break}}},this);a.push({key:n,series:r,type:"bar",values:d,valuesOrig:i.utils.deepCopy(d)});r++}},this);if(!_.isEmpty(a)){var d=0;_.each(s,function(e,t,n){n[t].y+=d;d=n[t].y});o.values=s;o.valuesOrig=i.utils.deepCopy(s);a.push(o);l.data=a}this.chartData=l},convertManagerDataToChartData:function b(){var e=this.viewState.filters.get("dataset");var t=this._serverData.data;var n={properties:{name:this._serverData.title,quota:parseFloat(this._serverData.quota),quotaLabel:i.lang.get(this.viewState.filters.get("show_target_quota")?"LBL_QUOTA_ADJUSTED":"LBL_QUOTA","Forecasts"),groupData:t.map(function(t,n){return{group:n,l:t.name,t:parseFloat(t[e])+parseFloat(t[e+"_adjusted"])}})},data:[]};var r=[e,e+"_adjusted"].map(function(e,n){var i=t.map(function(t,i){return{series:n,x:i+1,y:parseFloat(t[e]),y0:0}});return{key:this._serverData.labels.dataset[e],series:n,type:"bar",values:i,valuesOrig:i}},this);var a=[e,e+"_adjusted"].map(function(e,n){var i=t.map(function(t,i){return{series:n,x:i+1,y:parseFloat(t[e])}});var r=0;_.each(i,function(e,t,n){n[t].y+=r;r=n[t].y});return{key:this._serverData.labels.dataset[e],series:n,type:"line",values:i,valuesOrig:i}},this);if(this.viewState.filters.get("show_target_quota")){n.properties.targetQuota=+this._serverData.target_quota;n.properties.targetQuotaLabel=i.lang.get("LBL_QUOTA","Forecasts")}n.data=r.concat(a);this.chartData=n},generateD3Chart:function x(){if(!this._super())return;this.chart.barLegend.rowsCount(this._maxLegendRows);this.chart.lineLegend.rowsCount(this._maxLegendRows);this.chart.stacked(!this.showManagerData);d3.select(this.el).select(".nv-pareto").append("svg").datum(this.chartData).call(this.chart)},_onOrientationChange:function w(){if(this.chart){if(this.chart.barLegend){this.chart.barLegend.rowsCount(this._maxLegendRows)}if(this.chart.lineLegend){this.chart.lineLegend.rowsCount(this._maxLegendRows)}this.dispatchChartMethod("tooltipHide");this.rerenderChart()}},buildChartUrl:function L(){var e=this.options.parentModel;var t=e&&e.get("date_closed_timestamp");var n=t||this.viewState.filters.get("timeperiod_id");var i=[this.viewState.visibility==="group"?"ForecastManagerWorksheets":"ForecastWorksheets","chart",n,this.viewState.filters.get("user_id")];return i.join("/")},onAfterRender:function S(){this._super();this.$groupByFilter=this.$(".filter.group_by");if(this.viewState.visibility==="group"){this.$groupByFilter.hide()}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(379);e.exports=r.extendView(a,"Bubblechart",{params:null,likelyField:"",filterDuration:null,responseDataAttr:"records",template:"bubblechart",initialize:function s(e){this._super(e);var t=["id","name","account_name","base_rate","currency_id","assigned_user_name","date_closed","probability","account_id","sales_stage","commit_stage"];var n;this.dashletConfig=i.metadata.getView(null,"bubblechart");this.filterDuration=this.dashletConfig.filter_duration[0];this.setFilterDurationOptions();this.viewState.filtersDef.filter_duration=this.filterDuration;this.likelyField=this.forecastBy==="Opportunities"?"amount":"likely_case";t.push(this.likelyField);n=this.likelyField+":desc";this.params={fields:t.join(","),max_num:10,order_by:n};this.tooltiptemplate=i.template.getView("bubblechart-tooltip");this.setFilters({filter_duration:_.keys(this.viewState.filtersDef.filter_duration.options)[0]})},setFilterDurationOptions:function o(){if(!_.isString(this.filterDuration.options)){return false}this.filterDuration.options=i.lang.getAppListStrings(this.filterDuration.options);if(_.isEmpty(this.filterDuration.options)){this.filterDuration.options=i.lang.getAppListStrings("generic_timeperiod_options")}},loadChartData:function l(e){this.setDateRange();var t=[{date_closed:{$gte:this.dateRange.begin}},{date_closed:{$lte:this.dateRange.end}}];if(!this.isManager||this.viewState.visibility==="user"){t.push({$owner:""})}var n=_.extend({filter:t},this.params);var a=i.api.buildURL(this.forecastBy,null,null,n,this.params);this.apiCall("read",a,null,r.utils.wrapAsyncCallback(e))},processData:function u(e){this.evaluateResult(e);if(!_.isEmpty(e.records)){this._super(e)}this.$chartEl.toggle(!_.isEmpty(e.records));this.$dataUnavailableLbl.toggle(_.isEmpty(e.records))},prepareChartObject:function c(){var e=this;this.chart=nv.models.bubbleChart().x(function(e){return d3.time.format("%Y-%m-%d").parse(e.x)}).y(function(e){return e.y}).tooltipContent(function(t,n,i,r,a){r.point.close_date=d3.time.format("%x")(d3.time.format("%Y-%m-%d").parse(r.point.x));r.point.amount=r.point.currency_symbol+d3.format(",.2d")(r.point.base_amount);return e.tooltiptemplate(r.point).replace(/(\r\n|\n|\r)/gm,"")}).showTitle(false).tooltips(true).showLegend(true).bubbleClick(function(t){i.controller.navigate(i.router.buildRoute(e.forecastBy,t.point.id),{initiator:e.navigationName})}).colorData("class",{step:2}).groupBy(function(t){return e.isManager&&e.viewState.visibility==="user"?t.sales_stage_short:t.assigned_user_name}).filterBy(function(e){return e.probability}).strings({legend:{close:i.lang.getAppString("LBL_CHART_LEGEND_CLOSE"),open:i.lang.getAppString("LBL_CHART_LEGEND_OPEN")},noData:i.lang.getAppString("LBL_CHART_NO_DATA")})},renderChart:function d(){if(!this._super())return;this.chart.legend.rowsCount(this._maxLegendRows);d3.select(this.el).select(".nv-chart-bubble").append("svg").datum(this.chartData).transition().duration(500).call(this.chart)},evaluateResult:function f(e){this.total=e.records.length;var t="sales_stage_dom";var n=i.metadata.getModule(this.forecastBy,"fields");if(n){t=n.sales_stage.options||t}this.chartData={data:e.records.map(function(e){var n=i.lang.getAppListStrings(t)[e.sales_stage]||e.sales_stage;return{id:e.id,x:e.date_closed,y:Math.round(parseInt(e[this.likelyField],10)/parseFloat(e.base_rate)),shape:"circle",account_name:e.account_name,assigned_user_name:e.assigned_user_name,sales_stage:n,sales_stage_short:n,probability:parseInt(e.probability,10),base_amount:parseInt(e[this.likelyField],10),currency_symbol:i.currency.getCurrencySymbol(e.currency_id)}},this),properties:{title:i.lang.getAppString("LBL_DASHLET_TOP10_SALES_OPPORTUNITIES_NAME"),value:e.records.length,xDataType:"datetime",yDataType:"string"}}},setDateRange:function h(){var e=i.date();var t=this.getDateRangeDuration();var n;var r;var a;if(t===12){n=i.date().startOf("year");r=i.date().endOf("year")}else{a=Math.floor(e.month()/3)*3;n=i.date(new Date(e.year(),a+t,1));r=i.date(new Date(n.year(),n.month()+3,0))}this.dateRange={begin:n.format("YYYY-MM-DD"),end:r.format("YYYY-MM-DD")}},getDateRangeDuration:function p(){var e=parseInt(this.viewState.filters.get("filter_duration"),10);var t={current:0,next:3,year:12};if(isNaN(e)){e=t[this.viewState.filters.get("filter_duration")]}return e}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(379);e.exports=r.extendView(a,"ForecastPipeline",{_isChartInitialized:false,forecastAdmin:false,forecastConfig:null,isForecastSetup:false,isForecastsConfigValid:false,forecastsNotSetUpMsg:null,template:"forecast-pipeline",initialize:function s(e){this._super(e);this.forecastConfig=i.metadata.getModule("Forecasts","config");this.isForecastSetup=this.forecastConfig.is_setup;this.isForecastsConfigValid=r.utils.isForecastConfigValid();this.forecastAdmin=_.isUndefined(i.user.getAcls().Forecasts.admin);this.salesStageLabels=i.lang.getAppListStrings("sales_stage_dom");if(!this.isForecastSetup){if(_.isEmpty(i.metadata.getModule("Forecasts").views)){this.forecastsNotSetUpMsg=r.utils.getForecastNotSetUpMessage(this.forecastAdmin)}else{this.viewState.filtersDef.timeperiod=i.utils.deepCopy(i.metadata.getModule("Forecasts").views["forecast-pipeline"].meta.timeperiod[0]);this.viewState.filtersDef.timeperiod.options=i.lang.getAppListStrings("generic_timeperiod_options");this.setFilters({selectedTimePeriod:this.viewState.filtersDef.timeperiod.options[0]});this._isChartInitialized=true}}},loadData:function o(){var e=!i.metadata.getModule("Opportunities");var t=!i.acl.hasAccess("view","Opportunities");var n=!_.contains(i.metadata.getModuleNames({filter:"visible"}),"RevenueLineItems");if(e||t&&n){this.loadDataError(this.ERR_NO_DATA_AVAILABLE)}else if(this.forecastsNotSetUpMsg){this.hidePreloader()}else{this._super()}},loadInitData:function l(e){var t=this;async.parallel({loadTimeperiodOptions:function n(e){t.apiCall("read",i.api.buildURL("Forecasts/enum/selectedTimePeriod"),null,r.utils.wrapAsyncCallback(e))},loadCurrentTimeperiod:function a(e){t.apiCall("GET",i.api.buildURL("TimePeriods/current"),null,r.utils.wrapAsyncCallback(e))}},function s(n,r){if(n){e.apply(this,arguments);return}t.viewState.filtersDef.timeperiod=i.utils.deepCopy(i.metadata.getModule("Forecasts").views["forecast-pipeline"].meta.timeperiod[0]);t.viewState.filtersDef.timeperiod.options=r.loadTimeperiodOptions;t.saveState();t.setFilters({selectedTimePeriod:r.loadCurrentTimeperiod.id});t._isChartInitialized=true;t.render();e(null,r)})},loadChartData:function u(e){var t=[this.forecastBy,"chart","pipeline"];var n;t.push(this.viewState.filters.get("selectedTimePeriod"));t.push(this.viewState.visibility);n=i.api.buildURL(t.join("/"));this.apiCall("GET",n,null,r.utils.wrapAsyncCallback(e))},processData:function c(e){if(e&&e.data&&this.salesStageLabels){_.each(e.data,function(e){if(e&&e.key&&this.salesStageLabels[e.key]){e.key=this.salesStageLabels[e.key]}},this)}this.chartData=e;this._super(e)},prepareChartObject:function d(){var e=this;var t=this.getUserCurrencyFormatter();this.chart=nv.models.funnelChart().showTitle(false).tooltips(true).wrapLabels(false).tooltipContent(function(e,n,i,r,a){return"<p>"+SUGAR.App.lang.get("LBL_SALES_STAGE","Forecasts")+": <b>"+e+"</b></p>"+"<p>"+SUGAR.App.lang.get("LBL_AMOUNT","Forecasts")+": <b>"+t(i)+"</b></p>"+"<p>"+SUGAR.App.lang.get("LBL_PERCENT","Forecasts")+": <b>"+n+"%</b></p>"}).colorData("class",{step:2}).fmtValue(function(e){var n=e.value||(isNaN(e)?0:e);return t(n)}).strings({legend:{close:i.lang.getAppString("LBL_CHART_LEGEND_CLOSE"),open:i.lang.getAppString("LBL_CHART_LEGEND_OPEN")},noData:i.lang.getAppString("LBL_CHART_NO_DATA")})},renderChart:function f(){if(!this._super())return;this.chart.legend.rowsCount(this._maxLegendRows);d3.select(this.el).select(".nv-funnelChart").append("svg").datum(this.chartData).transition().duration(500).call(this.chart)}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(377);e.exports=r.extendView(a,"SavedReportsChart",{responseDataAttr:"chartData",template:"saved-reports-chart",initialize:function s(e){this._super("initialize",arguments);this.chartId=Math.floor(Math.random()*1e4)},loadChartData:function o(e){var t=this.meta.view.saved_report_id;this.apiCall("create",i.api.buildURL("Reports/chart/"+t),null,r.utils.wrapAsyncCallback(e))},isDataEmpty:function l(e){if(this._super(e)){return true}var t=e.chartData.properties[0].type;var n=this.getChartConfig(t);var i=this._getDataAttribute(n);return _.isEmpty(e.chartData[i])},processData:function u(e){if(e&&e.chartData){this.rawChartData=e.chartData}this._super(e)},prepareChartObject:function c(){var e=this.rawChartData;var t={minColumnWidth:120,show_title:true,show_legend:true,show_controls:false,show_tooltips:true,show_y_label:false,y_axis_label:"",show_x_label:false,x_axis_label:"",wrapTicks:true,staggerTicks:true,rotateTicks:true,reduceXTicks:false,overflowHandler:false,allowScroll:false,vertical:true,showValues:false,hideEmptyGroups:true,stacked:true,colorData:"default",margin:{top:10,right:10,bottom:10,left:10}};var n=e.properties[0].type;if(i.supportedFeatures.configurableSavedReportsChart){_.extend(t,this.meta.view);n=this.meta.view.chart_type}var r=this.getChartConfig(n);this.chartData=this.translateDataToD3(e,t,r);this.chart=this.getChartModel(t,r);this.chart.id(this.chartId).margin(t.margin).showTitle(t.show_title).showLegend(t.show_legend).tooltips(t.show_tooltips).tooltipContent(function(e,t,n,i,r){return"<h3>"+e+"</h3>"+"<p>"+n+"</p>"}).colorData(t.colorData).strings({legend:{close:i.lang.get("LBL_CHART_LEGEND_CLOSE"),open:i.lang.get("LBL_CHART_LEGEND_OPEN")},noData:i.lang.get("LBL_CHART_NO_DATA")});if(r.ReportModule){this.chart.legend.showAll(true)}},renderChart:function d(){if(!this._super())return;this.chart.legend.rowsCount(this._maxLegendRows);d3.select(this.el).select(".nv-chart-reports").append("svg").datum(this.chartData).transition().duration(500).call(this.chart);this.$el.on("touchcancel",function(e){var t=d3.select(window);_.each(_.keys(window),function(e){var n=e.match(/^__on((?:touch|drag|select).+)$/);n&&t.on(n[1],null)})})},getChartModel:function f(e,t){var n;switch(t.chartType){case"pieChart":n=nv.models.pieChart();break;case"funnelChart":n=nv.models.funnelChart();break;case"lineChart":n=nv.models.lineChart();n.useVoronoi(true).clipEdge(false).wrapTicks(e.wrapTicks).staggerTicks(e.staggerTicks).rotateTicks(e.rotateTicks);if(e.show_x_label){n.xAxis.axisLabel(e.x_axis_label)}if(e.show_y_label){n.yAxis.axisLabel(e.y_axis_label)}var i=[];var r=function o(e){return e};var a=function l(e){return e[0]};var s=function u(e){return e[1]};if(this.chartData.data.length){if(this.chartData.properties.labels){i=this.chartData.properties.labels.map(function(e){return e.l||e})}if(this.chartData.data[0].values.length&&this.chartData.data[0].values[0]instanceof Array){if(nv.utils.isValidDate(this.chartData.data[0].values[0][0])){r=function c(e){return d3.time.format("%x")(new Date(e))}}else if(i.length>0){r=function d(e){return i[e]||" "}}}else{a=function f(e){return e.x};s=function h(e){return e.y};if(i.length>0){r=function p(e){return i[e-1]||" "}}}}n.x(a).y(s);n.xAxis.tickFormat(r).highlightZero(false).reduceXTicks(false);break;case"barChart":n=nv.models.multiBarChart().vertical(t.orientation==="vertical"?true:false).stacked(t.barType==="stacked"?true:true).showControls(e.show_controls).showValues(e.showValues).wrapTicks(e.wrapTicks).staggerTicks(e.staggerTicks).rotateTicks(e.rotateTicks).reduceXTicks(e.reduceXTicks);n.yAxis.tickSize(0);if(e.show_x_label){n.xAxis.axisLabel(e.x_axis_label)}if(e.show_y_label){n.yAxis.axisLabel(e.y_axis_label)}break;default:n=nv.models.multiBarChart();break}return n},getChartConfig:function h(e){var t;switch(e){case"pie chart":t={pieType:"basic",tip:"name",chartType:"pieChart"};break;case"line chart":t={lineType:"basic",tip:"name",chartType:"lineChart"};break;case"funnel chart":case"funnel chart 3D":t={lineType:"basic",tip:"name",chartType:"funnelChart"};break;case"stacked group by chart":t={orientation:"vertical",barType:"stacked",tip:"title",chartType:"barChart"};break;case"group by chart":t={orientation:"vertical",barType:"grouped",tip:"name",chartType:"barChart"};break;case"bar chart":t={orientation:"vertical",barType:"basic",tip:"label",chartType:"barChart"};break;case"horizontal group by chart":t={orientation:"horizontal",barType:"stacked",tip:"name",chartType:"barChart"};break;case"horizontal bar chart":case"horizontal":t={orientation:"horizontal",barType:"basic",tip:"label",chartType:"barChart"};break;default:t={orientation:"vertical",barType:"stacked",tip:"name",chartType:"barChart"};break}this.chartType=t.chartType;return t},translateDataToD3:function p(e,t,n){var r=[];var a=0;var s=i.lang.get("LBL_CHART_UNDEFINED");var o=this._getDataAttribute(n);var l=e[o];var u;var c;function d(e){return e.reduce(function(e,t){return parseFloat(e)+parseFloat(t)},0)}function f(e){var t=[].concat(e)[0];return t?t:s}if(e.values.filter(function(e){return e.values&&e.values.length}).length){switch(n.chartType){case"barChart":c=d3.max(e.values,function(e){return e.values.length})===1;u=n.barType==="stacked"||n.barType==="grouped"?c?function(n,i){return{key:t.report_module||"Module",type:"bar",values:e.values.map(function(e,t){return{x:t+1,y:d(e.values)}})}}:function(t,n){return{key:f(t),type:"bar",values:e.values.map(function(e,t){return{x:t+1,y:parseFloat(e.values[n])||0}})}}:function(t,n){return{key:t.values.length>1?t.label:f(t.label),type:"bar",values:e.values.map(function(e,t){return{x:t+1,y:n===t?d(e.values):0}})}};break;case"pieChart":u=function h(e,t){return{key:f(e.label),value:d(e.values)}};break;case"funnelChart":l=e[o].reverse();u=function p(e,t){return{key:f(e.label),count:e.values.length,values:[{label:e.valuelabels[0]?e.valuelabels[0]:e.values[0],x:0,y:d(e.values)}]}};break;case"lineChart":c=d3.max(e.values,function(e){return e.values.length})===1;u=function m(e,t){return{key:f(e.label),values:c?e.values.map(function(e,n){return[t,parseFloat(e)]}):e.values.map(function(e,t){return[t,parseFloat(e)]})}};break}}if(u){r=l.map(u)}return{properties:{title:this.meta.view.report_title,yDataType:e.properties[0].yDataType,groups:n.chartType==="gaugeChart"?[{group:1,total:a}]:n.chartType==="lineChart"&&e.label?e.label.map(function(e,t){return{label:f(e)}}):e.values.filter(function(e){return e.values.length}).map(function(e,t){return{label:f(e.label)}})},data:r}},_getDataAttribute:function m(e){var t;switch(e.chartType){case"barChart":t=e.barType==="stacked"||e.barType==="grouped"?"label":"values";break;default:t="values";break}return t}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(379);e.exports=r.extendView(a,"Forecastdetails",{className:"chart-wrapper has-scroll",template:"forecastdetails",forecastConfig:null,isForecastSetup:false,isForecastsConfigValid:false,forecastsNotSetUpMsg:false,isAdmin:false,isTopLevelManager:false,showTargetQuota:false,spanCSS:"",detailsDataSet:null,responseDataAttr:null,initialize:function s(e){this._super(e);this.forecastConfig=i.metadata.getModule("Forecasts","config");this.isForecastSetup=this.forecastConfig.is_setup;this.isForecastsConfigValid=r.utils.isForecastConfigValid();this.isAdmin=_.isUndefined(i.user.getAcls().Forecasts.admin);if(this.isForecastSetup){this.serverData=i.data.createBean("Forecasts");this.model=i.data.createBean("Forecasts");var t=this.forecastBy==="RevenueLineItems"?"likely_case":"amount";this.fieldDataAccess={likely:i.acl.hasAccess("read",this.forecastBy,{field:t}),best:i.acl.hasAccess("read",this.forecastBy,{field:"best_case"}),worst:i.acl.hasAccess("read",this.forecastBy,{field:"worst_case"})};this.spanCSS=_.compact([this.forecastConfig.show_worksheet_likely,this.forecastConfig.show_worksheet_best,this.forecastConfig.show_worksheet_worst]).length;this.spanCSS=_.compact([this.forecastConfig.show_worksheet_likely,this.forecastConfig.show_worksheet_best,this.forecastConfig.show_worksheet_worst]).length;this.model.set({opportunities:0,spanCSS:this.spanCSS,isForecastSetup:this.isForecastSetup,isForecastAdmin:this.isForecastAdmin});this.isTopLevelManager=i.user.get("is_top_level_manager");this.showTargetQuota=this.isManager&&!this.isTopLevelManager;this.detailsDataSet=this.getDetailsDataSet()}else{this.forecastsNotSetUpMsg=r.utils.getForecastNotSetUpMessage(this.isAdmin)}},onAfterRender:function o(){this._super();this.$chartEl=this.$(".fd__wrapper")},loadData:function l(e){if(this.isForecastSetup){this._super(e)}else{this.hidePreloader()}if(!this.loaded&&!e){this.$chartEl.hide()}},loadInitData:function u(e){var t=this;var n=this.options.parentModel;var a;if(n&&!n.inSync){n.once("sync",function(){t.loadInitData(e)}).fetch();return}a=n&&n.get("date_closed")||"current";async.parallel({loadTimeperiodOptions:function s(e){t.apiCall("read",i.api.buildURL("Forecasts/enum/selectedTimePeriod"),null,r.utils.wrapAsyncCallback(e))},loadCurrentTimeperiod:function o(e){t.apiCall("GET",i.api.buildURL("TimePeriods/"+a),null,r.utils.wrapAsyncCallback(e))}},function l(n,r){if(n){e.apply(this,arguments);return}t.viewState.filtersDef.timeperiod=i.metadata.getView(null,"forecastdetails").timeperiod[0];t.viewState.filtersDef.timeperiod.options=r.loadTimeperiodOptions;t.setFilters({timePeriods:r.loadCurrentTimeperiod.id,selectedTimePeriod:r.loadCurrentTimeperiod.id});t._isChartInitialized=true;e(null,r)})},loadChartData:function c(e){var t=this.buildChartUrl();this.apiCall("read",t,null,r.utils.wrapAsyncCallback(e))},processData:function d(e){e=this.adjustDashletData(e);this.calculateData(e);this.render();this.applyCSSChanges();this.hidePreloader();this.$chartEl.show()},getDetailsDataSet:function f(){var e=i.metadata.getStrings("app_list_strings").forecasts_options_dataset||[];var t={};_.each(e,function(e,n){if(this.forecastConfig["show_worksheet_"+n]===1){t[n]=e}},this);return t},buildChartUrl:function h(){var e=this.isManager?"progressManager":"progressRep";var t=["Forecasts",this.viewState.filters.get("selectedTimePeriod"),e,i.user.get("id")];var n={};if(this.isManager){n={target_quota:this.showTargetQuota?1:0}}return i.api.buildURL(t.join("/"),"create",null,n)},adjustDashletData:function p(e){if(this.isManager){e.likely=e.likely_adjusted||e.likely_case;e.best=e.best_adjusted||e.best_case;e.worst=e.worst_adjusted||e.worst_case}else{e.likely=e.amount;e.best=e.best_case;e.worst=e.worst_case;e.closed_amount=e.won_amount;if(_.isUndefined(e.closed_amount)){delete e.closed_amount}}return e},calculateData:function m(e){this.serverData.set(e);var t=_.extend({},e,this.serverData.toJSON());var n=this.forecastConfig;var r=i.user.getPreference("currency_id");this.likelyTotal=t.likely;this.bestTotal=t.best;this.worstTotal=t.worst;t.quota_amount_str=i.currency.formatAmountLocale(t.quota_amount,r);t.closed_amount_str=i.currency.formatAmountLocale(t.closed_amount,r);if(this.showTargetQuota){t.target_quota_amount_str=i.currency.formatAmountLocale(t.target_quota_amount,r)}else{this.serverData.unset("target_quota_amount_str")}t.showTargetQuota=this.showTargetQuota;t.deficit_amount=Math.abs(i.math.sub(t.quota_amount,t.closed_amount));t.deficit_amount_str=i.currency.formatAmountLocale(t.deficit_amount,r);t.is_deficit=parseFloat(t.quota_amount)>parseFloat(t.closed_amount);var a=t.is_deficit?"LBL_FORECAST_DETAILS_DEFICIT":"LBL_FORECAST_DETAILS_SURPLUS";t.deficit_label=i.lang.get(a,"Forecasts");t.detailsOpts=[];if(n.show_worksheet_worst){t.detailsOpts.push(this.getDetailsForCase("worst",this.worstTotal,t.quota_amount,t.closed_amount))}if(n.show_worksheet_likely){t.detailsOpts.push(this.getDetailsForCase("likely",this.likelyTotal,t.quota_amount,t.closed_amount))}if(n.show_worksheet_best){t.detailsOpts.push(this.getDetailsForCase("best",this.bestTotal,t.quota_amount,t.closed_amount))}if(this.isManager&&!_.isEmpty(i.user.get("reports_to_id"))){t.quota_label=i.lang.get("LBL_QUOTA_ADJUSTED","Forecasts")}else{t.quota_label=i.lang.get("LBL_QUOTA","Forecasts")}this.model.set(t,{silent:true})},getDetailsForCase:function g(e,t,n,r){var a={};var s=parseFloat(i.math.add(t,r));var o=parseFloat(n);var l=0;var u=i.user.getPreference("currency_id");a.label=i.lang.get("LBL_"+e.toUpperCase(),"Forecasts");a.spanCSS=this.spanCSS;a.case=e;a.shortOrExceed="&nbsp;";a.openPipeline="&nbsp;";a.feedbackLn1="";a.feedbackLn2="";a.hasAccess=true;if(!this.isManager&&!this.fieldDataAccess[e]){a.hasAccess=false}if(a.hasAccess){if(t){a.amount=i.currency.formatAmountLocale(t,u);a.labelAmount=a.label+": "+a.amount.toString()}if(s===0&&o===0){a.amount=i.lang.get("LBL_FORECAST_DETAILS_NO_DATA","Forecasts");

}else if(s!==0&&o!==0&&s===o){a.shortOrExceed=i.lang.get("LBL_FORECAST_DETAILS_MEETING_QUOTA","Forecasts")}else{if(s>o){a.shortOrExceed=i.lang.get("LBL_FORECAST_DETAILS_EXCEED","Forecasts");l=i.math.sub(s,o)}else{a.shortOrExceed=i.lang.get("LBL_FORECAST_DETAILS_SHORT","Forecasts");l=i.math.sub(o,s)}a.percent=this.getPercent(l,o);a.openPipeline="("+i.currency.formatAmountLocale(l,u)+")"}a.feedbackLn1=a.shortOrExceed;if(a.percent){a.feedbackLn1+=" "+a.percent}a.feedbackLn2=a.openPipeline}return a},applyCSSChanges:function v(){this.checkPropertySetCSS("worst");this.checkPropertySetCSS("likely");this.checkPropertySetCSS("best");var e=this.model.get("is_deficit");var t="";if(e){t=this.getClassBasedOnAmount(0,1,"color")}else{t=this.getClassBasedOnAmount(1,0,"color")}if(t!==""){this.$el.find(".deficitRow").addClass(t)}},checkPropertySetCSS:function y(e){if(this.forecastConfig["show_worksheet_"+e]&&(this.isManager||!this.isManager&&this.fieldDataAccess[e])){var t=this.getClassBasedOnAmount(i.math.add(this.serverData.get(e),this.serverData.get("closed_amount")),this.model.get("quota_amount"),"background-color");if(t!==""){this.$el.find(".forecast_details_"+e+"_feedback").addClass(t)}}},getClassBasedOnAmount:function b(e,t,n){var i="";e=parseFloat(e);t=parseFloat(t);if(n==="color"){if(e===t){}else if(e>t){i="font-green"}else{i="font-red"}}else if(n==="background-color"){if(e===t&&e!==0){i="grayLight"}else if(e>t){i="green"}else if(e<t){i="red"}}return i},getPercent:function x(e,t){var n=0;if(t>0&&e>0){n=e/t*100;if(n>1){n=Math.round(n)}else{n=Math.round(n*100)/100}}return Math.abs(n)+"%"}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(362);var s=n(386);e.exports=r.extendView(a,"TwitterContainerDashlet",{className:"twitter-wrapper",getListDef:function o(e,t){var n=_.extend({parentModel:t.parentModel},e,t.listParams);return{name:s,layout:t.layout,listParams:n,skipFetch:true,contextMenuOnSwipeDisabled:true,listItemTpl:"twitter-list-item",loadDataFn:function i(e){this.loadTwitterData(e)}}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(364);var o=n(272);var l=function u(e,t,n){var r=i.utils.formatString(e,[n.id]);a.openUrl(r)};e.exports=r.extendView(s,"TwitterList",{contextMenuActions:[{name:"reply",types:["context-menu"],label:"LBL_TWITTER_REPLY",iconKey:"actions.reply",handler:function c(e,t){l(e._urlTweetReply,e,t)}},{name:"retweet",types:["context-menu"],label:"LBL_TWITTER_RETWEET",iconKey:"actions.retweet",handler:function d(e,t){l(e._urlRetweet,e,t)}},{name:"favorite",types:["context-menu"],label:"LBL_TWITTER_FAVORITE",iconKey:"actions.favorite",handler:function f(e,t){l(e._urlTweetFavorite,e,t)}}],_urlTweetReply:"https://twitter.com/intent/tweet?in_reply_to={0}",_urlRetweet:"https://twitter.com/intent/retweet?tweet_id={0}",_urlTweetFavorite:"https://twitter.com/intent/favorite?tweet_id={0}",_urlTweetOpen:"https://twitter.com/{0}/status/{1}",_urlTwitterProfile:"https://twitter.com/{0}",isPaginationEnabled:false,initialize:function h(e){this.connectorCriteria=["eapm_bean","test_passed"];this._super(e)},onItemClick:function p(e){var t=i.utils.formatString(this._urlTweetOpen,[e.screen_name,e.id]);a.openUrl(t)},refresh:function m(e){this.loaded=false;this.collection.resetOptions();this.loadTwitterData(e)},loadTwitterData:function g(e){if(this.loaded){return}this.tried=false;this._checkConnector(e)},loadDataWithValidConnector:function v(e,t){var n=this;t=t||{};var r=function a(t,r,s,l){if(!n.getTwitterName()){return}var u=parseInt(n.listParams.limit||i.config.maxQueryResult);var c=i.api.buildURL("connector/twitter","",{id:n.twitter},{count:u,connectorHash:e.connectorHash});var d=l.success;var f=l.error;l.success=function(e,t){if(_.isArray(e)){_.each(e,function(e){e=_.extend(e,n.processRawTweet(e))},this)}else{e=[]}if(d)d({next_offset:-1,records:e},t)};l.error=function(e){if(d)d({next_offset:-1,records:[]},e.request);if(e.code){if(!n.tried){n.tried=true;o.getConnectors(function(){return n._checkConnector(s)})}else{n.handleLoadError(null)}}else{f(e)}};return i.api.call("read",c,null,l)};this.collection.fetch({endpoint:r,complete:function s(){n.loaded=true;if(_.isFunction(t.complete)){t.complete()}}})},_checkConnector:function y(e){var t=this;o.checkConnector({name:"ext_rest_twitter",criteria:this.connectorCriteria,success:function n(i){t.loadDataWithValidConnector(i,e)},error:function i(n){t.handleLoadError(n);if(e&&e.complete){e.complete()}}})},processRawTweet:function b(e){var t=i.date(e.created_at,"ddd MMM DD HH:mm:ss Z YYYY").toDate();var n=e.retweeted_status?"RT @"+e.retweeted_status.user.screen_name+": "+e.retweeted_status.text:e.text;var r=e.source;var a=e.id_str;var s=e.user.name;var o=n.split(" ");var l=e.user.screen_name;var u=i.utils.formatString(this._urlTwitterProfile,[e.user.screen_name]);var c=e.user.profile_image_url_https;var d;var f=new Date;var h=(f.getTime()-t.getTime())/(1e3*60*60*24);var p=h>1;for(d=0;d<o.length;d++){if(o[d].charAt(0)==="h"&&o[d].charAt(1)==="t"){o[d]="<a class='tw__as_content_url' href="+'"'+o[d]+'"'+" target='_blank'>"+o[d]+"</a>"}}n=o.join(" ");return{id:a,name:s,screen_name:l,tw_profile_url:u,tw_profile_image_url:c,text:n,source:r,date:t,useAbsTime:p}},handleLoadError:function x(e){var t=i.lang.get("LBL_CONFIGURE_TWITTER");if(!e&&this.twitter){t=i.lang.get("LBL_ERROR_CANNOT_FIND_TWITTER")+this.twitter}else if(e&&!e.test_passed&&e.testing_enabled){t=i.lang.get("LBL_CONNECT_TEST_FAIL")}this.$(".no-records-found").show();i.alert.show("twitter_error",{level:"error",messages:t,autoClose:true})},getTwitterName:function w(){var e=this.listParams;var t=e.parentModel;var n;var i;if(e.twitter){n=e.twitter}else if(t){i=o.getConnectorModuleFieldMapping("ext_rest_twitter",t.module)||{};n=t.get("twitter")||t.get(i.name)||t.get("name")||t.get("account_name")||t.get("full_name")}if(n){n=n.replace(/ /g,"");this.twitter=n}return n}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(307);e.exports=r.extendView(s,"Webpage",{className:"dashlet-webpage",template:"webpage",events:{"click .wp__container":function o(e){e.preventDefault();a.openWebPage(this.url)}},initialize:function l(e){this.url=r.utils._normalizeUrl(e.meta.view.url);this.title=e.meta.view.title;this._super(e)},onInvokedFromDashboard:function u(){a.openWebPage(this.url)}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(377);e.exports=r.extendView(a,"Donutchart",{template:"donutchart",initialize:function s(e){this.metricsCollection=null;this.total=0;this._super(e);this._prepareChartObject()},render:function o(){this._super();if(this.hasChartData()){this.renderChart();this.toggleDashletSwipe()}else{this.displayNoData(true)}},hasChartData:function l(){return this.total!==0},displayNoData:function u(e){if(e){this.$chartEl.hide();this.$dataUnavailableLbl.show()}else{this.$chartEl.show();this.$dataUnavailableLbl.hide()}},processData:function c(e){this.evaluateResult(e);this.render()},_prepareChartObject:function d(){this.chart=nv.models.pieChart().x(function(e){return e.key}).y(function(e){return e.value}).margin({top:0,right:0,bottom:5,left:0}).donut(true).donutLabelsOutside(true).donutRatio(.447).rotateDegrees(0).arcDegrees(360).maxRadius(110).hole(this.total).showTitle(false).tooltips(true).showLegend(false).colorData("data").direction(i.lang.direction).valueFormat(_.bind(function(e){return this._valueFormat(e)},this)).labelFormat(_.bind(function(e){return this._labelFormat(e)},this)).tooltipContent(function(e,t,n,i,r){return"<p><b>"+e+" "+(i.point.valueLabel?i.point.valueLabel:parseInt(n,10))+"</b></p>"}).strings({noData:i.lang.get("LBL_CHART_NO_DATA")})},renderChart:function f(){if(!this._super()){this.displayNoData(true);return}this.chart.hole(this.total);d3.select(this.el).select(".nv-chart-donut").append("svg").datum(this.chartData).transition().duration(500).call(this.chart)},_valueFormat:function h(e){var t=e.data?this.chart.pie.y()(e.data):e;return nv.utils.numberFormatSI(t,2,false)},_labelFormat:function p(e){var t=e.data?this.chart.pie.x()(e.data):e;return t}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(388);e.exports=r.extendView(a,"OpportunityMetrics",{template:"donutchart",className:"opportunity-metrics-wrapper",initialize:function s(e){this._super(e);this.parentModel=e.parentModel||{}},loadChartData:function o(e){var t=i.api.buildURL(this.parentModel.module,"opportunity_stats",{id:this.parentModel.get("id")});this.apiCall("read",t,null,r.utils.wrapAsyncCallback(e))},evaluateResult:function l(e){var t=0;_.each(e,function(n,r){e[r].formattedAmount=i.currency.formatAmountLocale(n.amount_usdollar,null,0);e[r].cssClass=r==="won"?"won":r==="lost"?"lost":"active";e[r].dealLabel=r;e[r].stageLabel=i.lang.getAppListStrings("opportunity_metrics_dom")[r];t+=n.count});this.total=t;this.metricsCollection=e;this.chartData={data:_.map(this.metricsCollection,function(e,t){return{key:e.stageLabel,value:e.count,classes:t}})}},isDataEmpty:function u(e,t){var n=_.isEmpty(e);var i=0;e=e||{};_.each(e,function(e,t){i+=e.count});return i===0}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(378);e.exports=r.extendView(a,"CasesSummary",{getListDef:function s(e,t){var n=this._super(e,t);var r=i.metadata.getModule("Cases","fields").status.options;var a=i.lang.getAppListStrings(r);n.title=a[e.status];return n}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);e.exports=r.extendField(a,"Bool",{events:{"touchstart .checkbox_custom":"onTouchCheckbox"},format:function s(e){return e=="1"},onBeforeRender:function o(){this._super();if(this.model&&this.view.isEditView()&&!this.model.has(this.name)){this.model.set(this.name,false,{silent:true})}},unformat:function l(){return!!this.$(this.fieldTag)[0].checked},onTouchCheckbox:function u(e){e.stopPropagation()}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);e.exports=r.extendField(a,"Int",{isFloat:false,fieldType:"text",initialize:function s(e){this._super(e);if($.os.ios){this.fieldType="number";this.events=_.extend({"keypress ._numeric":"onNumericKeyPress"},this.events);this.events=_.extend({"paste ._numeric":"onItemPaste"},this.events)}else if($.os.android){this.fieldType="tel"}},onItemPaste:function o(e){var t=e.target;var n=$(t).val();_.delay(function(){var e=$(t).val();if(_.isEmpty(e)){$(t).val(n)}},1)},onNumericKeyPress:function l(e){var t=e.keyCode||e.which;if(t===46&&this.isFloat){var n=$(e.target).val();if(n===""){$(e.target).val("0")}else if(n.indexOf(".")>-1){e.preventDefault();return false}}else if(t<48||t>57){e.preventDefault();return false}},format:function u(e){if(!e&&e!==0||_.isString(e)&&e.trim().length===0)return"";if(!isNaN(e)){var t="";if(this.action!=="edit"&&this.action!=="create"||this.tplName==="readonly"){t=this.def.disable_num_format?"":this.def.number_group_seperator||i.user.getPreference("number_grouping_separator")}e=i.utils.formatNumber(e,null,this.isFloat?this.def.precision||i.user.getPreference("decimal_precision"):0,t,this.def.decimal_seperator||i.user.getPreference("decimal_separator"));if(this.isFloat){this.model.set(this.name,this.unformat(e),{silent:true})}}return e},unformat:function c(e){var t=i.utils.unformatNumberStringLocale(e.toString(),this.isFloat);return t===""||isNaN(t)?e:t}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(392);var s=n(253);e.exports=r.extendField(a,"Currency",{events:{"change select":"onCurrencySelection"},isFloat:true,initialize:function o(e){this._super(e);if(this.context.isCreate()&&i.metadata.getCurrency(i.user.getPreference("currency_id")).status==="Active"){this.model.set("currency_id",i.user.getPreference("currency_id"),{silent:true})}},onBeforeRender:function l(){this._super();if(_.isEmpty(this.model.get("currency_id"))){this.model.set("currency_id",i.user.getPreference("currency_id")||"-99",{silent:true})}this.availableCurrencies=this._getCurrencies()},_getCurrencies:function u(){var e=this.model;var t=e.get("currency_id");var n=i.user.getPreference("currency_id");var r={};var a=i.metadata.getCurrencies();var s;_.each(a,function(e,n){var i=_.clone(e);i.id=n;if(i.status==="Active"){r[n]=i;s=i}else if(i.id===t){i.disabled=true;r[n]=i}});var o="-99";if(t&&_.has(r,t)){o=t}else if(_.has(r,n)){o=n}var l=r[o]||s;if(l){l.selected="selected"}return r},onAfterRender:function c(){var e=this;this._super();if(i.supportedFeatures.enumViaActionSheet){var t=[];_.each(this.availableCurrencies,function(e){t.push(e.iso4217)});this.$ct=this.$el.find(".actionsheet-select");this.$ct.bind("click",function(){s.showActionSheet(t,{title:e.label,onSelectCb:function n(t){var n=null;_.each(e.availableCurrencies,function(e,i){if(e.iso4217===t){n=i}});e.$ct.attr("value",n);e.$ct.text(t);e.onCurrencySelection()}})})}else{this.$ct=$("select",this.$el)}if(!this.model.get("currency_id")&&this.context.isCreate()){this.model.changeCurrencyId(this.$ct.val()||this.$ct.attr("value"),{silent:true})}},format:function d(e){if(!e&&e!==0||_.isString(e)&&e.trim().length===0)return"";var t=e;if(!isNaN(parseFloat(i.currency.unformatAmountLocale(e)))){var n=this.model.get("currency_id");var r=i.user.getPreference("currency_id");if(_.contains(["list","list-associate"],this.action)&&n!==r){t=i.currency.formatAmountLocale(e,n)}else if((this.action==="edit"||this.action==="create")&&this.tplName!=="readonly"){var a=i.user.getPreference("decimal_separator");var s=i.user.getPreference("decimal_precision");var o=i.currency.formatAmount(e,n,s,"",a);var l=i.currency.getCurrencySymbol(n);t=o.replace(l,"")}else{t=i.currency.formatAmountLocale(e,n)}}return t},onCurrencySelection:function f(){this.model.changeCurrencyId(this.$ct.val()||this.$ct.attr("value"));var e=this.format(this.model.get(this.name));this.$("input").val(e)},onFieldChange:function h(){this.model.set(this.name,this.unformat(this._$fieldEl.val()),{disableRenderForContext:this.view})}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(295);var o=r.extendField(s,"Date",{events:function l(){var l={"focusout input":"onBlur"};if(i.isNative&&!o.nativeSupport){l["click input"]="onClick"}var e=$.os.desktop?"click":"touchstart";l[e+" .clear-button"]="onClear";return l},validDateRE:/^\d{4}-\d{2}-\d{2}$/,ONCLICK_BLOCKER_TIMEOUT:2e3,initialize:function u(e){this._super(e);if(!o._dateFormat){o.initFormat()}this.setFormatting()},onBeforeRender:function c(){this._super();this.setDefaultValue();this.setClearButtonVisibility()},onAfterRender:function d(){this._super();this.placeholder=this.$el.find(".placeholder").eq(0);this.setControls();this.toggleControls()},bindDomChange:function f(){if(!this.model){return}this.setInputs();if(o.nativeSupport){this.dateInput.on($.browser.chromeWeb?"change":"blur",_.bind(this.handleValueChange,this))}},format:function h(e){if(_.isEmpty(e)||this.isFormView()&&o.nativeSupport&&!this.isReadOnly()){if(e&&!this.validDateRE.test(e)){var t=new Date(e);e=i.date.format(t,"Y-m-d")}return e}var n=new Date(e);if(isNaN(n.getDate())){n=i.date.parse(e,"Y-m-d")}var r=$.os.android&&$.os.version&&i.utils.versionCompare("4.1",$.os.version,">=");var a=i.isNative&&r?0:n.getTimezoneOffset()*6e4;var s=new Date(n.getTime()+a);return i.date.format(s,o._dateFormat)},unformat:function p(e){var t;if(_.isEmpty(e)||o.nativeSupport&&this.isFormView()){return e}t=i.date.parse(e,o._dateFormat);return t?i.date.format(t,"Y-m-d"):null},setInputs:function m(){this.dateInput=this.$el.find("input");this.inputs=this.dateInput},onClick:function g(e){if(this.isOnClickLocked())return;this.setOnClickBlocker();this.showDatePicker(e)},onBlur:function v(){this.toggleControls()},onClear:function y(e){this.setChanged();if(!o.nativeSupport&&$.os.android){this.setOnClickBlocker(500)}this.model.set(this.name,"");return false},setFormatting:function b(){this.shouldFormatValues=!o.nativeSupport&&this.isFormView()},setDefaultValue:function x(){if(this.context.isCreate()&&!this.getValue()&&this.def.display_default&&!this._changed){var e=i.date.parseDisplayDefault(this.def.display_default);this.model.set(this.name,this._adjustDefaultValue(e),{silent:true})}},_adjustDefaultValue:function w(e){return i.date.format(e,"Y-m-d")},getDateInputValue:function L(){var e=this.dateInput.val();if(e&&this.shouldFormatValues){var t=i.date.parse(e,o._dateFormat);e=i.date.format(t,"Y-m-d")}return e},setDateInputValue:function S(e){if(e&&this.shouldFormatValues){var t=i.date.parse(e,"Y-m-d");e=i.date.format(t,o._dateFormat)}this.dateInput.val(e)},setClearButtonVisibility:function E(){this.showClearButton=!this.def.required&&!_.isEmpty(this.getValue())},setControls:function k(){this.input=this.$el.find("input");this.clearButton=this.$el.find(".clear-button")},toggleControls:function T(){var e=_.isEmpty(this.getValue());this.input.toggleClass("empty",!this.def.required&&e);this.clearButton.toggle(!this.def.required&&!e);if(!this.def.required&&this.placeholder){this.placeholder.toggle(e)}},setChanged:function M(){this._changed=true},getValue:function A(){return this.model.get(this.name)},handleValueChange:function C(e){this.setChanged();this.model.set(this.name,this.unformat(this.getDateInputValue()),{disableRenderForContext:this.view});this.toggleControls()},showDatePicker:function R(e){var t=this.unformat(this.value)||"";if(o.ios7){var n=new Date;if(t){var s=i.date.parse(t,"Y-m-d");if(r.utils.isValidDate(s)){n=s}}var l={date:n,mode:"date"};this._setPopoverCoordinates(l,e);var u=i.date.format(l.date,"Y-m-d");this.setDateInputValue(u);this.model.set(this.name,u);this.toggleControls();window.datePicker.show(l,_.bind(function c(e){this.clearOnClickBlocker();if(!e)return;var t=i.date.format(e,"Y-m-d");this.model.set(this.name,t)},this));return}a.showDateTimePicker(t,{callback:_.bind(function(e){this.clearOnClickBlocker();this.model.set(this.name,e)},this)})},_setPopoverCoordinates:function D(e,t){var n=t.screenX;var i=t.screenY;var r=document.body.scrollTop;if(i-r<250){i+=30}i-=r;e.x=String(n);e.y=String(i)},isFormView:function I(){return _.contains(["create","edit"],this.view.action)},isOnClickLocked:function O(){return o._onClickBlocker},setOnClickBlocker:function N(e){o._onClickBlocker=window.setTimeout(_.bind(this.clearOnClickBlocker,this),e||this.ONCLICK_BLOCKER_TIMEOUT)},clearOnClickBlocker:function F(){window.clearTimeout(o._onClickBlocker);o._onClickBlocker=false},_dispose:function B(){this.clearOnClickBlocker();this.clearButton&&this.clearButton.off();this._super()}},{initFormat:function P(){o._dateFormat=i.user.getPreference("datepref")},setNativeSupport:function U(){this.nativeSupport=$.os.ios||$.browser.chromeWeb||!$.os.ios&&!$.os.android&&$.browser.webkit||false;this.ios7=$.os.ios&&$.os.version&&($.os.version[0]==="7"||i.utils.versionCompare($.os.version,"8",">=")&&$.os.tablet);if(this.ios7&&i.isNative&&this.iosDatePickerPlugin){this.nativeSupport=false}},iosDatePickerPlugin:true});i.events.on("app:sync:complete",function(){o.initFormat()}).on("app:init",function(){o.setNativeSupport()});e.exports=o},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(394);var o=r.extendField(s,"Datetimecombo",{initialize:function l(e){this._super(e);if(!o._tsFormat){o.initFormat()}},onBeforeRender:function u(){this._super();this.setDefaultValue();this.calculateAndBackupInputValues();this.setClearButtonVisibility()},bindDomChange:function c(){this.setInputs();if(o.nativeSupport){this.inputs.on($.browser.chromeWeb?"change":"blur",_.bind(this.handleValueChange,this))}},format:function d(e){var t=_.isEmpty(e);if(t||this.view.name==="edit"&&o.nativeSupport&&!this.isReadOnly()){return e}return i.date.format(new Date(e),o._tsFormat)},unformat:function f(e){return e},setInputs:function h(){this.dateInput=this.$("input[data-type=date]");this.timeInput=this.$("input[data-type=time]");this.inputs=this.dateInput.add(this.timeInput)},calculateAndBackupInputValues:function p(){var e="";var t="";var n=this.getValue();var r;if(n){r=new Date(n);e=i.date.format(r,"Y-m-d");t=i.date.format(r,"H:i"+":00")}this.values={date:e,time:t};this.formattedValues=null;if(n&&this.shouldFormatValues){r=new Date(n);this.formattedValues={date:i.date.format(r,o._dateFormat),time:i.date.format(r,o._timeFormat)}}this._prevValues=this.values},handleValueChange:function m(e){this.setChanged();this.setDefaultInputValues();this.setModelValue(this.getDateInputValue(),this.getTimeInputValue());this.calculateAndBackupInputValues();this.toggleControls()},setDefaultInputValues:function g(){var e=this.getDateInputValue();var t=this.getTimeInputValue();var n=this._prevValues.date&&!e;var r=this._prevValues.time&&!t;if(e&&!t&&!r){var a=this.def.default_current_time?i.date.format(new Date,"H:i"):"00:00";this.setTimeInputValue(a)}else if(t&&!e&&!n){var s=i.date.format(new Date,"Y-m-d");this.setDateInputValue(s)}else if(n){this.setTimeInputValue("")}else if(r){this.setDateInputValue("")}},onClick:function v(e){if(this.isOnClickLocked())return false;var t=e.target.getAttribute("data-type");this.setOnClickBlocker();this.showDateTimePicker(t,e)},onBlur:function y(){this.toggleControls()},getTimeInputValue:function b(){var e=this.timeInput.val();if(e&&this.shouldFormatValues){var t=i.date.parse(e,o._timeFormat);e=i.date.format(t,"H:i")+":00"}return e},setTimeInputValue:function x(e){if(e&&this.shouldFormatValues){var t=i.date.parse(e,"H:i");e=i.date.format(t,o._timeFormat)}this.timeInput.val(e)},setModelValue:function w(e,t){var n="";var i=new Date(this.getValue());var r;var a;if(o.nativeSupport){a={disableRenderForContext:this.view}}if(e&&t){r=this._getDate(e+" "+t+":00",true);n=r.toISOString()}if(!(r&&r.getTime()===i.getTime())){this.model.set(this.name,n,a)}},showDateTimePicker:function L(e,t){var n=e==="date";var s=this.getDateInputValue()||i.date.format(new Date,"Y-m-d");var l=this.getTimeInputValue()||(this.def.default_current_time?i.date.format(new Date,"H:i"):"00:00");if(o.ios7){var u=this._getDate(s+" "+l+":00",true);if(!r.utils.isValidDate(u)){u=new Date}var c={date:u,mode:n?"date":"time"};this._setPopoverCoordinates(c,t);this.setDateInputValue(s);this.setTimeInputValue(l);this.setModelValue(s,l);this.toggleControls();window.datePicker.show(c,_.bind(function(e){this.clearOnClickBlocker();if(!e)return;if(n){var t=i.date.format(e,"Y-m-d H:i")+":00";this.setDateInputValue(t)}else{this.setTimeInputValue(e)}this.setDefaultInputValues();this.setModelValue(this.getDateInputValue(),this.getTimeInputValue());this.toggleControls()},this));return}a.showDateTimePicker(n?s:l,{mode:n?"showDatePicker":"showTimePicker",callback:_.bind(function(e){this.clearOnClickBlocker();if(n){this.setDateInputValue(e)}else{this.setTimeInputValue(e)}this.setDefaultInputValues();this.setModelValue(this.getDateInputValue(),this.getTimeInputValue());this.toggleControls()},this)})},_adjustDefaultValue:function S(e){return e.toISOString()},_getDate:function E(e,t){var n=e.split(/[^0-9]/);var i=new Date(n[0],n[1]-1,n[2],n[3],n[4],n[5]);var r=t?0:i.getTimezoneOffset()*6e4;return new Date(i.getTime()-r)},_dispose:function k(){this._super();this.inputs&&this.inputs.off()}},{initFormat:function T(){o._tsFormat=i.user.getPreference("datepref")+" "+i.user.getPreference("timepref");o._dateFormat=i.user.getPreference("datepref")||"Y-m-d";o._timeFormat=i.user.getPreference("timepref")}});i.events.on("app:sync:complete",function(){o.initFormat()}).on("app:init",function(){o.setNativeSupport()});e.exports=o},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);e.exports=r.extendField(a,"Invitees",{cacheDisabled:true,events:{"click .secondary-btn":"onSecondaryClick","click .invitees":"onClick"},fieldTag:"invitees",onClick:function s(e){if(e.defaultPrevented)return false;var t=i.context.getContext({layout:"picker-list",module:this.module,model:this.model,collection:new i.BeanCollection,skipFetch:true});t.prepare();var n=i.controller.loadDynamic({layoutDef:{className:"layout__list",gaTrack:"invitees-picker-list",meta:{components:[{view:"list-picker"}]},context:t}});var a=n.getComponent("list-picker");var s=i.metadata.getModuleNames({filter:"visible",access:"list"});if(i.acl.hasAccess("list","Users"))s.push("Users");var o=_.intersection(["Contacts","Leads","Users"],s);var l=_.map(o,function(e){return{value:e,label:r.getPluralModuleName(e),module:e}}).sort(function(e,t){return e.label>t.label?1:-1});a.setData({items:l});a.on("selection:submit",function(e){this.createListLayout(e.get("value"),this.model)},this);a.render()},createListLayout:function o(e){var t=i.context.getContext({module:e});t.prepare();var n=t.get("module");var r=i.lang.get("LBL_ASSOC",n,i.lang.getAppListStrings("moduleListSingular")[n]);var a=i.controller.loadDynamic({layoutDef:{gaTrack:"invitees-list",name:"list-selector",subType:"selector",editable:true,context:t,listMeta:{multiselect:true,headerData:{title:r,save:true}}}});var s=a.getComponent("list-selector");s.on("selection:submit",function(t){t=_.map(t,function(t){var n=_.pick(t.attributes,"id","name");n.link=e.toLowerCase();return n},this);var n=_.compact(this.model.get("invitees"));var r=_.pluck(n,"id");r=_.map(r,function(e){return e.toString()});t=_.chain(t).reject(function(e){return _.include(r,e.id.toString())}).union(n).value();this.model.set("invitees",t);i.controller.disposeDynamic({disposeAll:true})},this)},onSecondaryClick:function l(e){var t=this.model.get("invitees");var n=$(e.currentTarget).attr("uid");var i=_.reject(t,function(e){return e.id==n});this.model.set("invitees",i);return false}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);var s=false;e.exports=r.extendField(a,"File",{events:{"click .input_upload":"_onInputClick","click .file-remove":"_onClearClick","change .input_upload":"_onFileSelected"},supportedTypes:$.os.android?["*/*"]:["image/*","video/*"],_fileType:null,_fileIsTooBigMessage:"9f2e903a-5bd9-4c8f-a822-83c125c43e5f",_fileErrorCodesToStrings:{1:"ERR_MOBILE_FILE_NOT_SUPPORTED",2:"ERR_MOBILE_FILE_NOT_READABLE",3:"ERR_MOBILE_FILE_ABORTED",4:"ERR_MOBILE_FILE_SECURITY"},initialize:function o(e){this.inputAccept=this.supportedTypes.join(",");this._super(e)},onAfterRender:function l(){this._super();this._dirty=false;this.$fileInput=this.$el.find(".input_upload");this.$fileRemoveBtn=this.$el.find(".file-remove");if(this.def.required){this.$fileRemoveBtn.addClass("hide")}var e=this.value=this.model.get(this.name);this.$el.attr("file-id",e||"")},bindDomChange:function u(){return},_onInputClick:function c(e){if(!i.acl.hasAccessToModel("edit",this.model,this.name)){e.preventDefault();e.stopPropagation()}},_onFileSelected:function d(){if(this.$fileInput[0].files.length===0){return}var e=this.$fileInput[0].files[0].type;this._fileType=this._getFileType(e);if(e&&!this._fileType){this.trigger("file:field:change",i.lang.get("ERR_MOBILE_FILE_NOT_SUPPORTED"),"error");return}this._dirty=true;this.prepareFile()},_onClearClick:function f(){this._changeFieldState();this._dirty=true;this.trigger("file:field:clear")},prepareFile:function h(){this.trigger("file:field:change",this.$fileInput,"preparing");var e=[_.bind(this._readFileData,this)];if(this._fileType==="image"){e.push(_.bind(this._resizeImage,this))}async.series(e,_.bind(function t(e){if(!e){this.$fileInput.fieldName=this.name;this._changeFieldState(true);this.trigger("file:field:change",this.$fileInput,"prepared")}else{this.trigger("file:field:change",e.message||i.lang.get("ERR_MOBILE_FILE_PROCESSING"),"error")}},this))},_changeFieldState:function p(e){if(e){if(!this.def.required){this.$fileRemoveBtn.removeClass("hide")}this.$el.find(".picture-icon").addClass("hide");this.$el.find(".value").text(this.$fileInput.fileData.name);this.$el.find(".placeholder").hide()}else{if(!this.def.required){this.$fileRemoveBtn.addClass("hide")}this.$el.find(".picture-icon").removeClass("hide");this.$el.find(".value").text("");this.$el.find(".placeholder").show();this._resetField()}},_readFileData:function m(e){var t=this.$fileInput[0].files[0];if(t){var n=this;var a=new FileReader;var s=this._binaryToDataUri;a.onload=function(i){n.$fileInput.fileData={name:t.name,size:t.size,type:t.type,binary:i.target.result,dataURI:s(i.target.result,t.type)};if($.os.ios){n.$fileInput.fileData.name=n._getUniqFileName(t.name)}try{n._setImageOrientation(i.target.result,t.name)}catch(r){}finally{e()}};a.onerror=function(t){var r=t.target.error;e({message:i.lang.get(n._fileErrorCodesToStrings[r.code]||"ERR_MOBILE_FILE_READ")});i.logger.error("Failed to read file: ["+r.code+"]")};if(t.size>i.config.files.fileSizeLimit*1024*1024||t.name===n._fileIsTooBigMessage){return e({message:i.lang.get("ERR_MOBILE_FILE_SIZE_LIMIT_EXCEEDED",null,{size:r.utils.humanFileSize(i.config.files.fileSizeLimit*1024*1024,true)})})}a.readAsBinaryString(t)}else{e({message:"No file selected"})}},_resizeImage:function g(e){var t=new Image;var n=this;var r=false;t.onload=function(){r=true;var t=n._resizeWithCanvas(this);if(t.split(",")[1].length===0){e({message:"Image resizing failed (Failed to render to canvas)"});return}function i(){n.$fileInput.fileData.type=t.split(",")[0].split(";")[0].split(":")[1];n.$fileInput.fileData.dataURI=t;n.$fileInput.fileData.binary=n._dataUriToBinary(t);e()}if(s){$(n._canvas).css({position:"fixed",top:200,left:0,border:"2px red solid",zIndex:999999999}).appendTo("body").on("click",function(){$(n._canvas).remove();i()})}else{i()}};t.src=this.$fileInput.fileData.dataURI;_.delay(function a(){if(!r){e({message:"Image resizing failed (Failed to load file as image)"})}},i.config.files.imageResizeTimeout)},_resizeWithCanvas:function v(e){var t=$.os.ios?this._iosRenderWithCanvas:this._commonRenderWithCanvas;var n=document.createElement("canvas");n.width=e.naturalWidth;n.height=e.naturalHeight;return t.call(this,e,n,{width:e.naturalWidth,height:e.naturalHeight,orientation:this.$fileInput.fileData?this.$fileInput.fileData.orientation:1})},_iosRenderWithCanvas:function y(e,t,n){var r=new MegaPixImage(e);var a={maxWidth:n.width,maxHeight:n.height,orientation:n.orientation};if(n.width*n.height>i.config.files.iosCanvasSizeLimit*1024*1024){_.extend(a,this._scaleImage(n))}r.render(t,a);return t.toDataURL("image/jpeg")},_scaleImage:function b(e){var t=e.width/e.height;var n=i.config.files.iosCanvasSizeLimit*1024*1024;var r;var a;r=Math.sqrt(n/t);a=r*t;return{maxHeight:Math.floor(r),maxWidth:Math.floor(a)}},_commonRenderWithCanvas:function x(e,t,n){var i=t.getContext("2d");i.clearRect(0,0,n.width,n.height);function r(e,t,n,i){switch(i){case 5:case 6:case 7:case 8:e.width=n;e.height=t;break;default:e.width=t;e.height=n}var r=e.getContext("2d");switch(i){case 2:r.translate(t,0);r.scale(-1,1);break;case 3:r.translate(t,n);r.rotate(Math.PI);break;case 4:r.translate(0,n);r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI);r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI);r.translate(0,-n);break;case 7:r.rotate(.5*Math.PI);r.translate(t,-n);r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI);r.translate(-t,0);break;default:break}}if(n.orientation){r(t,n.width,n.height,n.orientation)}i.drawImage(e,0,0,n.width,n.height);return this._getJpegImage(t)},_getJpegImage:function w(e){var t;if(!i.supportedFeatures.canvasJpegEncoding){var n=new JPEGEncoder;var r=e.getContext("2d");var a=r.getImageData(0,0,e.width,e.height);t=n.encode(a,i.config.files.jpegEncoderQuality)}else{t=e.toDataURL("image/jpeg",i.config.files.jpegEncoderQuality/100)}return t},_setImageOrientation:function L(e,t){var n=new JpegMeta.JpegFile(e,t);var r;var a=this;if(!("tiff"in n)){r="No TIFF tags in image"}else if(!("Orientation"in n.tiff)){r='No "Orientation" tag in image'}else{a.$fileInput.fileData.orientation=parseInt(n.tiff.Orientation,10);r="Orientation tag: "+n.tiff.Orientation}if(s){i.alert.show("orientation info",{level:"info",messages:r,closeable:true,autoClose:true})}},_binaryToDataUri:function S(e,t){return"data:"+t+";base64,"+window.btoa(e)},_dataUriToBinary:function E(e){return window.atob(e.split(",")[1])},_getFileType:function k(e){var t=e.split("/");var n=_.find(this.supportedTypes,function(e){
var n=e.split("/");return _.every(n,function(e,n){return e==="*"||e===t[n]})});if(n){return n.split("/")[0]}},_getUniqFileName:function T(e){var t=e.match(/.*(\..+)$/i)[1];var n=e.match(/^(.+)\./i)[1];return n+"_"+ +new Date+t},_resetField:function M(){this.$fileInput.replaceWith(this.$fileInput.clone());this.$fileInput=this.$(".input_upload")}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(397);e.exports=r.extendField(a,"Image",{supportedTypes:["image/jpeg","image/png","image/gif"],initialize:function s(e){this._super(e);this._canvas=document.createElement("canvas")},onAfterRender:function o(){this._super();if(this.value){this._showAndPositionImage()}},_setForcedRefresh:function l(e){this.cacheDisabled=e},_showAndPositionImage:function u(e){var t=this;var n=new Image;var a=this.$el;var s=a.find("div.avatar");var o=e||i.api.buildFileURL({field:this.name,module:this.module,id:this.model.id},r.getFileOptions())+"&_id="+this.model.get(this.name);var l;n.onload=function(){t._setForcedRefresh(false);var i={image:n,height:s.css("height"),width:s.css("width")};r.utils.sizePicture(i);l=e||t._resizeWithCanvas(n);s.css({backgroundSize:i.sizeProp,backgroundImage:"url("+l+")"})};n.onerror=function(){t._setForcedRefresh(true);var e=t.context.get("name");var n=i.utils.formatString("url(img/offline-{0}.svg)",[e]);s.css({backgroundImage:n})};n.src=o},prepareFile:function c(){this.trigger("file:field:change",this.$fileInput,"preparing");async.series([_.bind(this._readFileData,this),_.bind(this._resizeImage,this),_.bind(this._applyPreview,this)],_.bind(function e(t){if(!t){this.$fileInput.fieldName=this.name;this._changeFieldState(true);this.trigger("file:field:change",this.$fileInput,"prepared")}else{this.trigger("file:field:change",t.message||i.lang.get("ERR_MOBILE_FILE_PROCESSING"),"error")}},this))},_changeFieldState:function d(e){if(e){if(!this.def.required){this.$fileRemoveBtn.removeClass("hide")}this.$el.find(".picture-icon").hide();this.$el.find(".placeholder").hide()}else{if(!this.def.required){this.$fileRemoveBtn.addClass("hide")}this.$el.find(".picture-icon").show();this.$el.find("div.avatar").css({backgroundImage:"none"});this.$el.find(".placeholder").show()}},_readFileData:function f(e){var t=this.$fileInput[0].files[0];if(t){var n=this;var r=new FileReader;var a=this._binaryToDataUri;r.onload=function(i){n.$fileInput.fileData={name:t.name,size:t.size,type:t.type,binary:i.target.result,dataURI:a(i.target.result,t.type)};try{n._setImageOrientation(i.target.result,t.name)}catch(r){}finally{e()}};r.onerror=function(t){var r=t.target.error;e({message:i.lang.get(n._fileErrorCodesToStrings[r.code]||"ERR_MOBILE_FILE_READ")});i.logger.error("Failed to read file: ["+r.code+"]")};r.readAsBinaryString(t)}else{e({message:"No file selected"})}},_applyPreview:function h(e){this.$el.find(".user-icon").hide();this._showAndPositionImage(this.$fileInput.fileData.dataURI);e()},_resizeWithCanvas:function p(e){var t=this._canvas;var n=i.config.files.resizeImagesOnUpload;var r=e.naturalWidth;var a=e.naturalHeight;var s=Math.max(r,a);var o=$.os.ios?this._iosRenderWithCanvas:this._commonRenderWithCanvas;if(!n)n=s;var l=s<n?1:n/s;var u=Math.round(r*l);var c=Math.round(a*l);t.width=u;t.height=c;return o.call(this,e,t,{width:u,height:c,orientation:this.$fileInput.fileData?this.$fileInput.fileData.orientation:1})}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(392);e.exports=r.extendField(a,"Float",{isFloat:true})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);e.exports=r.extendField(a,"Follow",{events:{"click .follow-label":"onClick"},onClick:function s(e){e.preventDefault();e.stopPropagation();this.model.follow(!this.model.get("following"),{error:_.bind(this.onError,this)})},onError:function o(){this.model.set("following",!this.model.get("following"))}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(253);var s=n(295);e.exports=r.extendField(s,"Enum",{cacheDisabled:true,initialize:function o(e){if(i.supportedFeatures.enumViaActionSheet){_.extend(this,{_viaActionSheet:true,fieldTag:".actionsheet-select",events:{"click .actionsheet-select":"onFocus"}})}else{_.extend(this,{_viaActionSheet:false,fieldTag:"select",events:{"focusin select":"onFocus","focusout select":"onBlur"}});var t=e.view.isEditView()||e.def.view==="edit";if(i.isNative&&$.os.ios&&!i.isTablet&&t){this.events.touchend=function(e){e.preventDefault()}}}this._super(e)},_sortResults:function l(e){if(this.def.sort_alpha){return _.sortBy(e,function(e){return e[1]})}if(!_.isEmpty(this.items)||this.def.visibility_grid){return e}return this._getSortedItems(e)},_getSortedItems:function u(e){var t;var n;var i=this._getOrderedKeys();var r=this._getFilteredKeys();t=_.map(e,function(e){return e[0]});n=r||i||t;return _.map(n,function(t){return _.find(e,function(e){return e[0]===t})})},_getOrderedKeys:function c(){var e=i.lang.getAppListKeys(this.def.options);if(!_.isEmpty(e)){return _.map(e,function(e){return e.toString()})}},_getFilteredKeys:function d(){var e=i.metadata.getEditableDropdownFilter(this.def.options);var t=this.getValue();if(!_.isEmpty(e)){return _.chain(e).filter(function(e){return e[1]||t===e[0].toString()}).map(function(e){return e[0].toString()}).value()}},_getItemByValue:function f(e){return _.find(this.renderItems,function(t){return t[1]===e})},_getItemByKey:function h(e){return _.find(this.renderItems,function(t){return t[0]===e})},getItems:function p(){var e=this.def.options;if(!_.isEmpty(this.items)){e=this.items}else if(_.isString(this.def.options)){e=i.lang.getAppListStrings(this.def.options)}if(_.isEmpty(e)){return[]}if(!_.isArray(e)){e=_.pairs(e)}else{e=_.map(e,function(e,t){return[t.toString(),e]})}return e},setRenderItems:function m(){var e=this.getItems();this.renderItems=[];if(!_.isEmpty(e)){this.renderItems=this._sortResults(e)}},onBeforeRender:function g(){this._super();var e=this.getValue();this.setRenderItems();if(this.view.isEditView()||this.def.view==="edit"){if(_.isEmpty(this.renderItems)){return}if(this.model&&_.isUndefined(e)){e=this.getDefaultValue();if(e!==""){this.model.set(this.name,e,{silent:true})}}else if(e===""&&!this.hasEmptyOption()){this.renderItems.unshift(["",""])}if(this._viaActionSheet){var t=this._getItemByKey(e);this.valueText=t?t[1]:e}}},onAfterRender:function v(){this._super();this.placeholder=this.$el.find(".placeholder").eq(0);this.placeholder.toggle(r.isEmptyValue(this.getValue()));this.$el.toggle(!_.isEmpty(this.renderItems))},onFocus:function y(){this.placeholder.hide();if(this._viaActionSheet){var e=this;a.showActionSheet(this.getValues(this.renderItems),{onSelectCb:function t(n){var i=e._getItemByValue(n)[0];e._$fieldEl.attr("value",i);e._$fieldEl.text(n);e.onFieldChange()}})}},onBlur:function b(){this.placeholder.toggle(r.isEmptyValue(this.getValue()));document.activeElement.blur()},onFieldChange:function x(){var e=this.unformat(this._$fieldEl.val()||this._$fieldEl.attr("value"));this.value=e;this.model.set(this.name,e,{disableRenderForContext:this.view});this.onBlur()},getValue:function w(){var e=this.model.get(this.name);return _.isNumber(e)?e.toString():e},getDefaultValue:function L(){var e=this.def["default"];var t=this._getFilteredKeys()||this.getKeys();if(_.isNumber(e))e=e.toString(10);if(!_.contains(t,e)&&!_.isEmpty(t)){e=t[0]}return _.isNumber(e)?e.toString():e},hasEmptyOption:function S(){var e=this.getKeys();return _.contains(e,"")},getKeys:function E(){var e=[];if(_.isString(this.def.options)){e=i.lang.getAppListKeys(this.def.options)}else if(_.isObject(this.def.options)){e=_.keys(this.def.options)}return e},getValues:function k(e){return _.map(e,function(e){return e[1]})},format:function T(e){return _.isNumber(e)?e.toString():e}})},function(e,t,n){"use strict";var i=n(258);var r=n(253);var a=SUGAR.App;var s=n(248);var o=n(295);e.exports=s.extendField(o,"Email",{_errorIcon:'<span class="icondefault error-icon {0}></span>',events:{"click .actions-btn":"showActions","click .value a":"sendEmail","click .f-email__add":"onNewEmailBtnClick",'keyup [email-id="-1"] input':"onNewEmailFieldKeyUp"},_getValue:function l(){return this.model.get(this.name)},_getPrimaryEmail:function u(){return _.findWhere(this._getValue(),{primary_address:true})},_render:function c(){var e=this._getValue();if(e&&e.length){_.each(e,function(e){_.each(["primary_address","opt_out","invalid_email"],function(t){e[t]=!!Number(e[t])})});e=_.sortBy(e,function(e){return-Number(e.primary_address)});this.model.set(this.name,e,{silent:true})}this._super()},onAfterRender:function d(){var e=this._getPrimaryEmail();if(!this.model.get("email1")&&e){this._setEmail1Value(e.email_address)}this._super()},_modelHasEmail1:function f(){return!!this.model.fields.email1},_setEmail1Value:function h(e){if(this._modelHasEmail1()){this.model.set("email1",e,{silent:true})}},_getEmailObject:function p(e){var t=e.closest("[email-id]").attr("email-id");return t!=-1&&this._getValue()[t]||null},setPrimaryEmail:function m(e){var t=this._getValue();var n=this._getPrimaryEmail();if(n){n.primary_address=false}this.$el.find(".primary-address").removeClass("primary-address");n=t[e];n.primary_address=true;this._setEmail1Value(n.email_address);this.$el.find('[email-id="'+e+'"]').addClass("primary-address")},_toggleAttr:function g(e,t){var n=this._getValue()[e];var i=t.replace("_","-");var r=n[t]=!n[t];this._getEmailFieldRow(e)[r?"addClass":"removeClass"](i)},toggleOptOut:function v(e){this._toggleAttr(e,"opt_out")},toggleInvalid:function y(e){this._toggleAttr(e,"invalid_email")},_getEmailFieldRow:function b(e){return this.$el.find('.controls-flex[email-id="'+e+'"]')},removeEmail:function x(e){var t=this._getValue();var n=t.splice(e,1)[0];if(n.primary_address){var i="";if(t.length){t[0].primary_address=true;i=t[0].email_address}this._setEmail1Value(i)}this.model.trigger("change:email")},_makeEmail:function w(e){var t=!this._getValue().length;if(_.isUndefined(e))e="";if(t)this._setEmail1Value(e);return{email_address:e,primary_address:t,invalid_email:false,opt_out:false}},onFieldChange:function L(e){var t=$(e.currentTarget);var n=this._getEmailObject(t);var i=this.unformat(t.val());var r;if(n){n.email_address=i}else if(i){r=this._getValue();if(!r){r=[];this.model.set(this.name,r,{silent:true})}r.push(this._makeEmail(i))}this.model.trigger("change:email")},onNewEmailFieldKeyUp:function S(e){var t=$(e.currentTarget);var n=this.unformat(t.val());this.$el.find(".add-btn").css({visibility:n?"visible":"hidden"})},onNewEmailBtnClick:function E(e){var t=this.$el.find(".f-email__add + .controls-flex");t.show();t.find("input").focus()},_displayValidationMessage:function k(e){var t;var n=[];var i=this.$(".control-group");var r=this;i.children(".field__error-message").remove();i.removeClass("error");this.$("[email-address]").removeClass("error").remove("."+a.config.ui.icons.edit.error);if(e){var s=[];i.addClass("error");_.each(this._getValue(),function(t,n){if(_.contains(e.email,t.email_address))s.push(n)});_.each(s,function(e){this.$('[email-id="'+e+'"]').addClass("error").append(a.utils.formatString(r._errorIcon,[a.config.ui.icons.edit.error]))});_.each(e,function(e,t){n.push(a.error.getErrorString(t,e))});t=a.template.get("edit-field-error");i.append(t(n))}a.analytics.trackEvent("validation",this.name)},showActions:function T(e){var t=$(e.currentTarget);t.addClass("active");var n=t.closest("[email-id]").attr("email-id");var i=this._getValue()[n];var s=[this.toggleOptOut,this.toggleInvalid,this.removeEmail];var o=[i.opt_out?"LBL_EMAIL_ACTION_SET_OPT_IN":"LBL_EMAIL_ACTION_SET_OPT_OUT",i.invalid_email?"LBL_EMAIL_ACTION_SET_VALID":"LBL_EMAIL_ACTION_SET_INVALID","LBL_REMOVE"];if(!i.primary_address){o.unshift("LBL_EMAIL_ACTION_SET_PRIMARY");s.unshift(this.setPrimaryEmail)}s=_.map(s,function(e){return _.bind(e,this,n)},this);o=_.map(o,function(e){return a.lang.get(e)});function l(){t.removeClass("active")}r.showActionSheet(o,{onSelectCb:function u(e,t){s[t]();l()},onCancelCb:l});return false},sendEmail:function M(e){var t=$(e.target);var n=t.data("index");var r=!_.isUndefined(n)&&!t.hasClass("email_type_invalid")&&!t.hasClass("email_type_opt-out");if(r){var a=this._getValue();if(_.isObject(a[n])){i.sendEmail([a[n].email_address])}}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(295);e.exports=r.extendField(s,"Phone",{events:{"click .value a":"callPhone"},onFieldChange:function o(){var e=this.format(this.unformat(this._$fieldEl.val()))||"";var t=this.model.get(this.name);this.model.set(this.name,e);if(t===e){this.model.trigger("change:"+this.name,this.model,e)}},callPhone:function l(){a.callPhone(this.value,{model:this.model})}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);e.exports=r.extendField(a,"Textarea",{fieldTag:"textarea",events:{"click .textarea":"onClick"},onClick:function s(e){var t=this.isReadOnly();if(_.isEmpty(this.value)&&t){return}var n=this.getContext();var i=this.getLayoutDef(n);this.show(i)},getContext:function o(){var e=i.context.getContext({create:true,parentModel:this.model,fieldName:this.def.name,isReadOnly:this.isReadOnly()});e.prepare();return e},getLayoutDef:function l(e){return{className:"textarea",gaTrack:"textarea",meta:{components:[{view:"textarea-edit",editedFieldName:this.label}]},context:e}},show:function u(e){var t=i.controller.loadDynamic({layoutDef:e});var n=t.getComponent("textarea-edit");n.setValue(this.model.get(this.name)||"")}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(404);var s=r.extendField(a,"Emailbody",{fieldTag:"textarea",events:{"click textarea":"onClick"},onClick:function o(e){if(_.isEmpty(this.value)&&this.isReadOnly()){return}i.nomad.showEmailBody(this.def,this.model)},format:function l(e){if(_.isEmpty(e)){e=s.getPlainTextValue(this.name,this.model)}return e}},{getPlainTextValue:function u(e,t){var n=e.replace(/_html$/,"");var i=t.get(n)||"";return $.trim(i)}});e.exports=s},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);e.exports=r.extendField(a,"Radioenum",{events:{"click .btn-group .btn":"onClick"},onClick:function s(e){this.model.set(this.name,$(e.currentTarget).data("value"))}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);e.exports=r.extendField(a,"Relate",{events:{"click .secondary-btn":"onSecondaryClick","click .relate":"onClick"},onBeforeRender:function s(){this._super();var e=this.def.module;this.hasAccess=i.acl.hasAccess("read",e)&&!_.isEmpty(i.metadata.getModule(e));var t=this.model.get(this.def.id_name);this.link=!_.contains(i.config.modules.readonlyModules,e)&&t&&i.acl.hasAccess("view",e)?i.router.buildRoute(e,t):null;if(!this.hasAccess&&this.view.name==="edit"){this.options.viewName="readonly"}},onClick:function o(e){if(e.defaultPrevented){return false}var t=i.metadata.getModule(this.module).fields[this.name];var n=t.module;var r=i.context.getContext({module:n}).prepare();var a=i.controller.loadDynamic({layoutDef:{gaTrack:"relate",name:"list",subType:"selector",editable:true,context:r,listMeta:{multiselect:false,headerData:{title:i.lang.get("LBL_ASSIGN",r.get("module"),i.lang.getAppListStrings("moduleListSingular")[r.get("module")]),save:false}}}});var s=a.getComponent("list-selector");s.on("selection:submit",function(e){this.onRelatedItemSelected(e);i.controller.goBack()},this)},onRelatedItemSelected:function l(e){var t={};var n=i.metadata.getModule(this.view.module).fields[this.name];t[n.id_name]=e.get("id");t[n.name]=e.get("name");if(n.populate_list&&n.auto_populate){_.each(n.populate_list,function(n,r){r=_.isNumber(r)?n:r;var a=e.get(r);if(!_.isUndefined(a)&&i.acl.hasAccessToModel("edit",this.model,n)){t[n]=a;if(this.view.module==="RevenueLineItems"&&r==="discount_price"){_.each(["likely_case","best_case","worst_case"],function(e){t[e]=a})}}if(r==="currency_id"&&this.model.get("currency_id")!==a){this.model.changeCurrencyId(a)}},this)}this.model.set(t)},onSecondaryClick:function u(e){this.model.set(this.name,"");this.model.set(this.def.id_name,"");return false}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);e.exports=r.extendField(a,"Multienum",{events:{"touchstart .remove":"highlightRemoveClick","click .remove":"onRemoveClick","click .multiselect":"onClick"},onBeforeRender:function s(){this._super();var e=this.model.get(this.name);if(this.view.isEditView()&&_.isArray(e)&&!this.def.required&&e.length===1&&e[0]===""){this.model.set(this.name,[],{silent:true})}},onClick:function o(e){if(e.defaultPrevented||this.isReadOnly()){return false}var t=i.context.getContext({create:true});t.prepare();var n=i.controller.loadDynamic({layoutDef:{className:"layout__list multienum__list",gaTrack:"multienum",meta:{components:[{view:{name:"list-picker",multiselect:true,headerData:{title:i.lang.get("LBL_CHOOSE_ITEMS"),saveLabel:"LBL_DONE_BUTTON_LABEL",save:true}}}]},context:t}});var r=n.getComponent("list-picker");r.setData({items:this._getItemsToShow()});r.on("selection:submit",this.onSelectionEnd,this);r.render();e.preventDefault()},_getItemsToShow:function l(){var e=this.model.fields[this.name].options;var t=i.lang.getAppListStrings(this.def.options);var n=i.metadata.getEditableDropdownFilter(this.def.options);var r=[];if(_.isObject(e)&&!_.isEmpty(e)){t=_.pick(t,_.keys(e))}if(!_.isEmpty(n)){var a=_.chain(n).filter(function(e){return e[1]===false}).map(function(e){return e[0]}).value();t=_.omit(t,a)}_.each(t,function(e,t){if(!_.contains(this.value,t)&&t!==""){r.push({label:e,value:t})}},this);return r},onSelectionEnd:function u(e){var t=_.map(e,function(e){return e.get("value")});var n=_.compact(this.model.get(this.name));this.model.set(this.name,_.union(n,t));i.controller.disposeDynamic()},highlightRemoveClick:function c(e){$(e.target).addClass("selected-item")},onRemoveClick:function d(e){var t=this.model.get(this.name);var n=$(e.target).is("[item-id]")?$(e.target):$(e.target).closest("[item-id]");var i=n.attr("item-id");var r=_.without(t,i);this.model.set(this.name,r);return false}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);e.exports=r.extendField(a,"Favorite",{events:{"click .favorite-icon":"onClick"},onClick:function s(e){e.preventDefault();e.stopPropagation();i.alert.dismissAll();var t=$(e.currentTarget);var n=!t.hasClass("color-disabled");var r=this.model;var a=function s(){r.set("my_favorite",n)};r.favorite(!n,{error:a});return false}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);e.exports=r.extendField(a,"Fieldset",{fields:null,subfields:"",initialize:function s(e){this._super(e);_.each(this.def.fields,function(e){if(e.type==="label"){var t=e.css_class.match(/label_[^\s]+/);if(t.length>0){var n=t[0].substring(6);this.model.on("change:"+n,function(){var e=this.model.get(n);if(e||e===0||e===""){this.$el.find(".label_"+n).removeClass("hide")}else{this.$el.find(".label_"+n).addClass("hide")}},this)}}},this)},_render:function o(){if(this.template===i.template.empty){this._super()}},getPlaceholder:function l(){var e="";var t=this;if(!this.fields){this.fields=[];_.each(this.def.fields,function(n){var r=i.view.createField({def:n,view:t.view,model:t.model});t.fields.push(r);e+=r.getPlaceholder()})}if(this.def.orientation==="horizontal"){this.subfields=new Handlebars.SafeString(e);return this._super()}else{return new Handlebars.SafeString(e)}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);e.exports=r.extendField(a,"Teamset",{cacheDisabled:true,events:{"click .primary-btn":"onPrimaryClick","click .selected-btn":"onSelectedClick","click .secondary-btn":"onSecondaryClick","click .teamset":"onClick"},initialize:function s(e){this._super(e);this.isTBAEnabled=r.isTeamBasedAclEnabledForModule(this.module);this.model.on("change:team_name",function(){this.$el.find("[team-id]").removeClass("active")},this)},_render:function o(){var e=this.model.get(this.name);if(_.isArray(e)){e=_.sortBy(e,function(e){return e.primary!==true});this.model.set(this.name,e,{silent:true})}this._super()},onClick:function l(e){if(e.defaultPrevented||this.isReadOnly()){return false}var t="Teams";var n=i.context.getContext({module:t}).prepare();var r=i.controller.loadDynamic({layoutDef:{name:"list-selector",subType:"selector",editable:true,gaTrack:"teamset",context:n,listMeta:{listItemTpl:"list-item-teamset",headerData:{title:i.lang.get("LBL_MOBILE_SELECT_TEAMS"),saveLabel:"LBL_DONE_BUTTON_LABEL"}}}});r.getComponent("list-selector").on("selection:submit",this.onSave,this)},onSave:function u(e){e=_.map(e,function(e){return _.pick(e.attributes,"id","name","name_2")});var t=_.compact(this.model.get("team_name"));var n=_.pluck(t,"id");n=_.map(n,function(e){return e.toString()});var r=_.chain(e).reject(function(e){return _.include(n,e.id.toString())}).union(t).value();this.model.set("team_name",r);i.controller.goBack()},onPrimaryClick:function c(e){var t=this.$el.find("[team-id].primary-btn.active").removeClass("active").attr("team-id");var n=$(e.currentTarget);n.addClass("active");var i=_.find(this.model.get("team_name"),function(e){return e.id==t});if(i){i.primary=false}var r=$(e.currentTarget).attr("team-id");var a=_.find(this.model.get("team_name"),function(e){return e.id==r});a.primary=true;return false},onSelectedClick:function d(e){var t=$(e.currentTarget).attr("team-id");var n=_.find(this.model.get("team_name"),function(e){return e.id==t});if(n){n.selected=!n.selected;var r=i.config.ui.icons.edit.unlock;var a=i.config.ui.icons.edit.lock;var s=$(e.currentTarget).toggleClass("active",n.selected).find(".icondefault");if(n.selected){$(s).toggleClass(a,false);$(s).toggleClass(r,true)}else{$(s).toggleClass(r,false);$(s).toggleClass(a,true)}}return false},onSecondaryClick:function f(e){var t=this.model.get("team_name");var n=$(e.currentTarget).attr("team-id");var i=_.reject(t,function(e){return e.id==n});this.model.set("team_name",i);return false}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);e.exports=r.extendField(a,"Parent",{events:{"click .secondary-btn":"onSecondaryClick","click .parent":"onClick"},onBeforeRender:function s(){this._super();var e=this.model.get("parent_type");this.hasAccess=i.acl.hasAccess("read",e)&&!_.isEmpty(i.metadata.getModule(e));var t=this.model.get(this.def.id_name);this.link=!_.contains(i.config.modules.readonlyModules,e)&&t&&i.acl.hasAccess("view",e)?i.router.buildRoute(e,t):null},onClick:function o(e){if(e.defaultPrevented){return false}var t=i.context.getContext({model:this.model,collection:new i.BeanCollection,skipFetch:true});t.prepare();var n=i.controller.loadDynamic({layoutDef:{className:"layout__list list-picker",gaTrack:"parent-picker-list",meta:{components:[{view:{name:"list-picker",headerData:{title:i.lang.get("LBL_CHOOSE_PARENT_TYPE")}}}]},context:t}});var r=n.getComponent("list-picker");var a=i.lang.getAppListStrings(this.def.options)||{};var s=i.metadata.getModuleNames({filter:"visible"});var o=_.intersection(_.keys(a),s);if(_.contains(["Notes","Tasks"],this.module)){o=_.without(o,"Contacts")}o=_.filter(o,function(e){return i.acl.hasAccess("read",e)},this);var l=_.map(o,function(e){return{value:e,label:a[e],module:e}}).sort(function(e,t){return e.label>t.label?1:-1});r.setData({items:l});r.on("selection:submit",function(e){this.createParentListLayout(e.get("value"),this.model)},this);r.render()},createParentListLayout:function l(e,t){var n=i.context.getContext({module:e}).prepare();var r=n.get("module");var a=i.controller.loadDynamic({layoutDef:{gaTrack:"parent-list",name:"list",subType:"selector",editable:true,context:n,listMeta:{multiselect:false,headerData:{title:i.lang.get("LBL_ASSIGN",r,i.lang.getAppListStrings("moduleListSingular")[r]),save:false}}}});var s=a.getComponent("list-selector");s.on("selection:submit",function(n){t.set({parent_name:n.get("name"),parent_id:n.get("id"),parent_type:e});i.controller.disposeDynamic({disposeAll:true})},this)},onSecondaryClick:function u(e){this.model.set({parent_name:"",parent_id:"",parent_type:""});return false}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);e.exports=r.extendField(a,"Label",{onAfterRender:function s(){this._super();if(this.el){var e=this.el.className.match(/label_[^\s]+/);if(e.length>0){var t=this.model.get(e[0].substring(6));var n=!(t||t===0||t==="");$(this.el).toggleClass("hide",n)}}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(258);var s=n(295);e.exports=r.extendField(s,"Address",{cacheDisabled:true,events:{"click .control-group":"onClick","click .value a":"openAddress"},initialize:function o(e){this._super(e);this._subfieldStub={};this.model.on("error:validation",this._handleValidationError,this);this.model.on("acl:change:"+this.def.fields[0].name,this.handleAclChange,this);this.fieldNames=_.pluck(this.def.fields,"name");this.required=this.isRequired()},onClick:function l(){if(this.isReadOnly()){return}var e=this;var t=new i.NomadBean;t.module=this.model.module;t.fields={};t.attributes=i.utils.deepCopy(this.model.attributes);_.each(this.def.fields,function(n){t.fields[n.name]=i.utils.deepCopy(e.model.fields[n.name]);t.attributes[n.name]=e.model.attributes[n.name]});var n=i.context.getContext({editedFieldName:this.label,addressFields:this._prepareAddressFieldDefs(),parentModel:this.model,model:t,module:t.module,collection:new i.BeanCollection,skipFetch:true});n.prepare();i.controller.loadDynamic({layoutDef:{className:"edit-address",gaTrack:"address",meta:{components:[{view:"address-edit"}]},context:n}})},bindDataChange:function u(){if(this.model){_.each(this.def.fields,function(e){this.model.on("change:"+e.name,this.render,this)},this)}},onBeforeRender:function c(){this._super();var e=[];var t=[];var n=/street/;_.each(this.def.fields,function(r){var a=this.model.get(r.name);if(a){var s=r.name;if(n.exec(s)){if(!i.serverInfo.isSevenUp){a=a.replace(/(\n(\r)?)/g," ").replace(/\s{2,}/g," ");this.model.set(s,a)}e.push(a)}else{t.push(a)}}},this);this.addressValue=(e.length>0?e.join()+"\n":"")+t.join(" ")},_checkAccessToAction:function d(e){return i.acl.hasAccessToModel(e,this.model,this.def.fields[0].name)},_handleValidationError:function f(e){var t;var n={};var r=[];var a=this.$(".control-group");var s=this.model.module;_.each(e,function(e,t){if(_.contains(this.fieldNames,t)){n[t]=e}},this);a.children(".field__error-message").remove();if(_.isEmpty(n))return;a.addClass("error");_.each(n,function(e,t){var n=_.find(this.def.fields,function(e){return e.name===t});var a=n?i.lang.get(n.label,s):t;_.each(e,function(e,t){r.push(a+" : "+i.error.getErrorString(t,e))})},this);t=i.template.get("edit-field-error");a.append(t(r))},openAddress:function h(){var e={};e[this.name]=this.def.fields;var t=this.model.getAddresses(e);a.openAddress({addresses:t})},getSubfield:function p(e){var t=_.findWhere(this.def.fields,{name:e});var n=this;if(!t){return null}if(!this._subfieldStub[e]){this._subfieldStub[e]=i.view.createField({def:t,view:this.view,model:this.model});this._subfieldStub[e].setRequired=function(e){var t=n.required;this._super(e);n.required=n.isRequired();if(t!==n.required){n.render()}}.bind(this)}return this._subfieldStub[e]},isRequired:function m(){var e=this._subfieldStub||{};return _.any(this.def.fields,function(t){return e[t.name]?e[t.name].isRequired():t.required||i.metadata.getModule(this.module).fields[t.name].required},this)},_prepareAddressFieldDefs:function g(){return _.map(this.def.fields,function(e){var t=this._subfieldStub[e.name];var n=e;if(t){n=_.extend({},e,{view:t.isDisabled()||t.isReadOnly()?"readonly":undefined,required:t.isRequired()})}return n},this)},_dispose:function v(){this._super();this._subfieldStub=null}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(295);e.exports=r.extendField(a,"Tag",{initialize:function s(e){if(e.view.name==="edit"){e.viewName="readonly"}this._super(e)}})},function(e,t){"use strict";var n=function r(e){var t=$(e.currentTarget);t.parent().toggleClass("not-empty",t.val())};var i=function a(e){var t;var n;var i;var r;var a=$(e.currentTarget).parent().find("input");var s=a.parents(".control-group");if(!_.isEmpty(s)){n=s.parents(".wrapper__clear-field").eq(0);i=a.parents(".control-group").eq(0).parent().index();r=a.parents(".control-group").find("input").index(a)}a.val("");a.parent().removeClass("not-empty");a.trigger("change");if(!_.isEmpty(s)){t=n.children().eq(i).find("input");if(!_.isEmpty(t)){t=t.get(r);if(t){t.focus()}}}e.preventDefault();e.stopPropagation()};$(document).on("keyup.clear-field","input",n).on("focusin.clear-field","input",n).on("touchend.clear-field",".clear-button",i)},function(e,t){"use strict";var n=SUGAR.App;var i=false;function r(e){_.delay(function(){var t=$(e.target);if(!i&&!t.hasClass("inert")&&!t.hasClass("grip")){$(e.currentTarget).addClass("selected-item")}},50)}function a(e){_.delay(function(){$(e.currentTarget).removeClass("selected-item");i=false},50)}function s(e){if(!i){$(e.currentTarget).removeClass("selected-item")}i=true}$(function(){$(document.body).on({"touchstart.fast-click-highlight":r,"touchmove.fast-click-highlight":s,"touchend.fast-click-highlight":a,"touchcancel.fast-click-highlight":a},".fast-click-highlighted")})},function(e,t){"use strict";var n=SUGAR.App;function i(e){r(e);if(!n.isTablet||!$.os.android){return}var t=$(e.target);var i=t.parents(".scroll").get(0);var a=t.parents("span[sfuuid]").get(0);if(i&&a){_.delay(function(){i.scrollTop=a.offsetTop},1e3)}}function r(e){var t=$(e.target).parents(".control-group");if(t){t.toggleClass("field_onfocus")}}$(function(){$(document.body).on({"focus.focus-on-input":i,"blur.focus-on-input":r},"input").on({"focus.focus-on-input":r,"blur.focus-on-input":r},"select")})},function(e,t){"use strict";(function(e){var t=e.config.raven;var n=function(){var e=[];var n=t&&t.enabled&&t.enhancedErrorReporting&&t.enhancedErrorReporting.maxLogSize;return{push:function i(t){t.timestamp=(new Date).toISOString();e.push(t);if(e.length>n){e.shift()}},empty:function r(){e=[]},getAll:function a(){return _.clone(e).reverse()}}}();function i(e,t,n){var i=e[t];e[t]=function(){n.apply(this,arguments);return i.apply(this,arguments)};e[t]._originalMethod=i}function r(e,t){e[t]=e[t]._originalMethod}function a(e,t,n){var i={method:e,module:t.module};if(t.id){i.modelId=t.id}if(t.filterDef){i.filterDef=t.filterDef}if(n){i.options=_.pick(n,["byPtr","limit","myItems","query","offset"]);if(n.relate&&t.link&&t.link.bean){i.link=t.link.name;i.parentModule=t.link.bean.module;i.parentId=t.link.bean.id}if(n.favorite){i.action=t.get("my_favorite")?"favorite":"unfavorite"}if(n.following){i.action=t.get("following")?"follow":"unfollow"}}return i}function s(e){return{route:e}}function o(e,t,n){return{code:e.code,status:e.status}}function l(e){return{options:e}}var u=[{context:e.data,method:"sync",filter:a,label:"data-manager.sync"},{context:e.nomad,method:"login",label:"app.login"},{context:e.nomad,method:"logout",label:"app.logout"},{context:e.nomad,method:"onMemoryWarning"},{context:e.nomad,method:"onResume"},{context:e.nomad,method:"onPause"},{context:e.error,method:"handleHttpError",filter:o},{context:e.NomadController.prototype,method:"navigate",filter:s},{context:e.NomadController.prototype,method:"goBack"},{context:e.NomadController.prototype,method:"clean",label:"controller.clean"},{context:e.view.NomadLayoutManager,method:"loadStatic",filter:l},{context:e.view.NomadLayoutManager,method:"loadDynamic",filter:l}];var c={init:function d(){if(!(t&&t.enabled&&t.enhancedErrorReporting)||this.initialized)return false;_.each(u,function(e){i(e.context,e.method,function(){var t={label:e.label||e.method};if(e.filter){_.extend(t,e.filter.apply(this,arguments)||{})}n.push(t)})});this.initialized=true},getLog:function f(){return n.getAll()},dispose:function h(){_.each(u,function(e){r(e.context,e.method)});n.empty();this.initialized=false}};e.augment("enhancedErrorReporter",c,true)})(SUGAR.App)},function(e,t,n){"use strict";(function(e){var t=n(253);

_.extend(e.nomad,{preInit:function i(t,n){t.app.productVersion=e.config.appVersion;t.app.productBuild=e.config.appBuild;t.device=$.os;if(window.navigator.standalone){e.controller.navigateToDefaultView()}this.initAppCache();this.initAnalytics();if($.browser.chromeWeb){window.addEventListener("contextmenu",function(e){return e.preventDefault()})}if(e.offline&&e.config.offline)e.config.offline.storageAdapter="webSql";n()},initAppCache:function r(){var n=window.applicationCache;if(!n)return;n.addEventListener("updateready",function(i){t.showConfirm(e.lang.get("LBL_NEW_WEB_VERSION"),{callback:function r(){e.logger.debug("Swapping application cache and reloading page");n.swapCache();window.location.reload()}})},false)},openAppStore:function a(){},initAnalytics:function s(){window.Analytics=function(){};function e(){if(window.ga)ga.apply(window,arguments)}_.extend(Analytics.prototype,{start:function t(n,i){e("create",n,"none");if(i.optOut){window["ga-disable-"+n]=true}e("set","anonymizeIp",i.anonymize)},startSession:function n(){},trackPageView:function i(t){e("send","pageview",t)},trackEvent:function r(t){e("send","event",t.category,t.action,t.label,t.value)},setDimension:function a(t){e("set","dimension"+t.index,t.value)},setMetric:function s(t){e("set","metric"+t.index,t.value)}});window.analytics=new Analytics},loadAnalytics:function o(){(function(e,t,n,i,r,a,s){e["GoogleAnalyticsObject"]=r;e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date;a=t.createElement(n),s=t.getElementsByTagName(n)[0];a.async=1;a.src=i;s.parentNode.insertBefore(a,s)})(window,document,"script","//www.google-analytics.com/analytics.js","ga")},getConnectionType:function l(){return"none"},isOnline:function u(){return window.navigator.onLine},openDb:function c(e){return window.openDatabase(e.name,"1.0",e.name,5)},_isPlatformSupported:function d(){return $.os.ios&&$.browser.safari&&e.utils.versionCompare($.os.version,"8",">=")||$.os.android&&$.browser.chrome&&e.utils.versionCompare($.os.version,"4.1",">=")||!$.os.ios&&!$.os.android&&$.browser.webkit||e.config.env==="dev"}})})(SUGAR.App)},function(e,t){"use strict";var n=SUGAR.App;_.extend(n.loginManager,{handleExternalLogin:function i(e,t){window.location.href=e.payload.url},handleExternalLogout:function r(e){var t=new Image;t.src=e},handleAuthTokens:function a(){var e;var t;var i=n[n.config.authStore];var r=["_AuthAccessToken","_AuthRefreshToken","_DownloadToken"];_.each(r,function(n){e=window.localStorage.getItem(n);if(e){t=true;i.set(n.slice(1),e);window.localStorage.removeItem(n)}});if(t){n.api.setExternalLogin(true);n.trigger("app:login:success")}}})},function(e,t){"use strict";(function(e){e.events=e.events||{};e.events.on({"offline:toggled":function p(e){r("offline",e)},"app:start":function m(){r("api",true)},"app:login:success":function g(e,t){r("api",true,t)},"app:logout":function v(){r("api",false)}});var t={offline:{readSimpleOrRelated:{status:false,operation:"fakeSelect"},readManyRecords:{status:false,operation:"fakeSelect"},readManyRelatedRecords:{status:false,operation:"fakeSelect"},createRecord:{status:false,operation:"fakeInsert"},createRelatedRecord:{status:false,operation:"fakeInsert"},updateRecord:{status:false,operation:"fakeUpdate"},updateRelatedRecord:{status:false,operation:"fakeUpdate"},softDeleteRecord:{status:false,operation:"fakeUpdate"},hardDeleteRecord:{status:false,operation:"fakeUpdate"},unlinkRecord:{status:false,operation:"fakeUpdate"}}};var n={api:{records:{status:false,callbackIndex:4,optionsIndex:5,dataIndex:2,crudIndex:0,crud:[{name:"create",status:true},{name:"read one",status:false},{name:"read list",status:false},{name:"update",status:false},{name:"delete",status:false}]},relationships:{status:false,callbackIndex:4,optionsIndex:5,dataIndex:2,crudIndex:0,crud:[{name:"create",status:true},{name:"read one",status:false},{name:"read list",status:false},{name:"update",status:false},{name:"delete",status:false}]},favorite:{status:false,callbackIndex:3,optionsIndex:4},follow:{status:false,callbackIndex:3,optionsIndex:4}},http:[{name:"e0",status:false},{name:"e403",status:false},{name:"e404",status:false},{name:"e409",status:false},{name:"e422",status:false},{name:"e500",status:false}],emulationExceptions:{e409:{operation:"update",methods:["records","relationships"]}}};var i={fakeSelect:function y(){return{sql:"select xxxx"}},fakeInsert:function b(){return{sql:"insert into xxxx"}},fakeUpdate:function x(){return{sql:"update xxxx"}}};function r(i,r,u){var c=e.config.errorEmulation.user.toLowerCase();if(e.config.errorEmulation.enabled&&(e.user.get("user_name")===c||u===c)){if(i==="api"){a(r,n);l(r)}else{a(r,t);s(r);o(r);h()}}}function a(t,n){if(t){var i=e.utils.deepCopy(n);_.extend(e.config.errorEmulation,i)}else{_.each(n,function(t,n){delete e.config.errorEmulation[n]})}}function s(t){if(t){e.events.on("app:error:emulation:offline",function(t){var n=e.config.errorEmulation.offline[t];var i=n&&n.status;var r="_"+t;var a=n.operation;u(i,r,a)})}else{e.events.off("app:error:emulation:offline");_.each(e.offline.storage.savedMethods,function(e,t){u(false,t)});delete e.offline.storage.savedMethods}}function o(t){if(t){_.extend(e.offline.storage._sqlHandlers,i)}else{_.each(i,function(t,n){delete e.offline.storage._sqlHandlers[n]})}}function l(t){if(t){if(!e.config.errorEmulation.apiFlag){e.events.on({"app:error:emulation:http":function n(e){f(e);c(e)},"app:error:emulation:api":d,"app:error:emulation:crud":d});e.config.errorEmulation.apiFlag=true}}else{e.events.off("app:error:emulation:http app:error:emulation:api app:error:emulation:crud");delete e.config.errorEmulation.apiFlag;f("default");c("default")}}function u(t,n,i){if(t){e.offline.storage.savedMethods=e.offline.storage.savedMethods||{};if(!e.offline.storage.savedMethods[n]){e.offline.storage.savedMethods[n]=e.offline.storage[n]}e.offline.storage[n]=function(){var e=[{op:i,data:null,module:null,options:null}];var t=arguments[arguments.length-1];this.exec(e,t.dbSuccess,t.dbFailure)}}else{e.offline.storage[n]=e.offline.storage.savedMethods[n];delete e.offline.storage.savedMethods[n]}}function c(t){var n=e.config.errorEmulation.api;var i=[];_.each(n,function(e,t){if(e.status){i.push(t)}});_.each(e.api.savedMethods,function(t,n){e.api[n]=e.api.savedMethods[n]});delete e.api.savedMethods;e.controller.clean();if(t!=="default"){_.each(i,function(i){var r=_.findWhere(n[i].crud,{status:true});e.api.savedMethods=e.api.savedMethods||{};if(!e.api.savedMethods[i]){e.api.savedMethods[i]=e.api[i]}e.api[i]=function(){var e=n[i].callbackIndex;var a=n[i].optionsIndex;var s=n[i].crudIndex;var o=n[i].dataIndex;var l=r&&arguments[s]==="read"&&r.name.indexOf("read")>=0;var u;var c;if(!isNaN(o)){u=arguments[o]?arguments[o].link?arguments[o].relatedId?"one":"list":"one":"list";c=r.name==="read "+u}if(!r||arguments[s]===r.name||l&&c){arguments[e].error(new SUGAR.Api.HttpError({xhr:{status:t.substr(1)-0,responseText:'{"error":"emulated"}',getResponseHeader:function d(){return"application/json"}},params:arguments[a]}));arguments[e].complete()}else{this.savedMethods[i].apply(this,arguments)}}})}}function d(){var t=_.findWhere(e.config.errorEmulation.http,{status:true});if(t){c(t.name)}}function f(t){var i=n.emulationExceptions[t];var r=i?{code:t,operation:i.operation,methods:i.methods}:{code:"enableAll"};e.trigger("app:error:emulation:exceptions",r)}function h(){_.each(e.api.savedMethods,function(t,n){if(e.offline&&!_.isEmpty(e.offline.api.originalMethods)){e.offline.api.originalMethods[n]=e.api.savedMethods[n]}e.api.savedMethods[n]=e.api[n]});d()}})(SUGAR.App)},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=n(257);e.exports=r.extendView(a,"ErrorEmulation",{globalEvents:{"app:error:emulation:exceptions":"processExceptions"},events:{"click .error-emulation-check input":"onClick","change .error-emulation-select":"onSelectChange"},initialize:function s(e){var t=["app:error:emulation:offline","app:error:emulation:http","app:error:emulation:api","app:error:emulation:crud","app:error:emulation:exceptions"];_.each(t,function(e){i.events.unregister(i,e);i.events.register(e,i)});this._super(e)},onBeforeRender:function o(){var e=i.config.errorEmulation;var t=e.emulationExceptions;var n=_.findWhere(e.http,{status:true});var r=_.keys(e.api);var a;var s;if(n){a=_.contains(_.keys(t),n.name);if(t[n.name]){s=_.difference(r,t[n.name].methods)}}this.crudDisabled=a;this.offlineErrorItems={};_.each(e.offline,function(e,t){this.offlineErrorItems[t]=e.status},this);this.offlineDisabled=_.isEmpty(this.offlineErrorItems);this.httpErrorItems={};_.each(e.http,function(e){this.httpErrorItems[e.name]=e.status},this);this.apiErrorItems={};_.each(e.api,function(e,t){this.apiErrorItems[t]={status:e.status,crud:e.crud,disabled:s&&_.contains(s,t)}},this);if(!i.serverInfo.isSevenUp){delete this.apiErrorItems.follow}},onAfterRender:function l(){this.$crudSelects=this.$el.find("[data-type=crud]");this.$apiBoxes=this.$el.find("[data-type=api]")},getHeaderConfig:function u(){return{title:"Error Emulation",save:false,back:true}},onClick:function c(e){var t=$(e.target).data("type");var n=$(e.target).data("key");var r="app:error:emulation:"+t;i.config.errorEmulation[t][n].status=!i.config.errorEmulation[t][n].status;i.trigger(r,n)},onSelectChange:function d(e){var t=$(e.target).attr("data-type");var n=$(e.target).attr("data-parent-type");var r=e.target.value;var a="app:error:emulation:"+t;var s=n?i.config.errorEmulation.api[n][t]:i.config.errorEmulation[t];this.updateConfig(s,r);i.trigger(a,r)},updateConfig:function f(e,t){var n=_.findWhere(e,{name:t});_.each(e,function(e){e.status=false});if(t!=="default"){n.status=true}},processExceptions:function h(e){var t=this;if(e.code==="enableAll"){this.$crudSelects.prop("disabled",false);this.$apiBoxes.prop("disabled",false)}else{if(e.operation){this.$crudSelects.val(e.operation);_.each(this.$crudSelects,function(n){var r=$(n).attr("data-parent-type");var a=i.config.errorEmulation.api[r].crud;t.updateConfig(a,e.operation)});this.$crudSelects.prop("disabled","disabled")}if(e.methods){var n=_.map(e.methods,function(e){return"."+e}).join(", ");var r=this.$apiBoxes.not(n).prop("disabled","disabled").prop("checked",false);_.each(r,function(e){var t=$(e).data("key");i.config.errorEmulation.api[t].status=false})}}}})},function(e,t,n){"use strict";var i=SUGAR.App;var r=n(248);var a=/-|,| |;/g;var s={};if(i.offline){s[i.offline.SYNC_ACTIONS.CREATE]="LBL_ACTION_CREATE";s[i.offline.SYNC_ACTIONS.UPDATE]="LBL_ACTION_UPDATE";s[i.offline.SYNC_ACTIONS.DELETE]="LBL_ACTION_DELETE";s[i.offline.SYNC_ACTIONS.LINK]="LBL_ACTION_LINK";s[i.offline.SYNC_ACTIONS.UNLINK]="LBL_ACTION_UNLINK";s[i.offline.SYNC_ACTIONS.FAVORITE]="LBL_ACTION_FAVORITE";s[i.offline.SYNC_ACTIONS.FOLLOW]="LBL_ACTION_FOLLOW"}var o={};if(i.offline){o[i.offline.SYNC_ACTIONS.CREATE]="LBL_ACTION_CREATE_EXPLANATION";o[i.offline.SYNC_ACTIONS.UPDATE]="LBL_ACTION_UPDATE_EXPLANATION";o[i.offline.SYNC_ACTIONS.DELETE]="LBL_ACTION_DELETE_EXPLANATION";o[i.offline.SYNC_ACTIONS.LINK]="LBL_ACTION_LINK_EXPLANATION";o[i.offline.SYNC_ACTIONS.UNLINK]="LBL_ACTION_UNLINK_EXPLANATION";o[i.offline.SYNC_ACTIONS.FAVORITE]="LBL_ACTION_FAVORITE_EXPLANATION";o[i.offline.SYNC_ACTIONS.FOLLOW]="LBL_ACTION_FOLLOW_EXPLANATION"}function l(e){return e.replace(/[-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var u=function(){var e=function t(e){var t;var n;var a=i.serverInfo.isSevenUp;if(a){t=/<strong>.*?<\/strong>/g,n=/(<strong>)|(<\/strong>)/g}else{t=/<span class="highlight">.*?<\/span>/g,n=/(<span class="highlight">)|(<\/span>)/g}var s=r.utils.htmlEntitiesToString({stringToTransform:e});s=r.utils.stringToHtmlEntities({stringToTransform:s});var o=e.match(t);var l;_.each(o,function(e){l=r.utils.stringToHtmlEntities({stringToTransform:e.replace(n,"")});s=s.replace(r.utils.stringToHtmlEntities({stringToTransform:e}),'<span class="highlight">'+l+"</span>")});return s};Handlebars.helpers.__sanitizeSearchResult=e;return e}();Handlebars.registerHelper("ifHasAccessToModel",function(e,t,n){var r=n.hash.field;return i.acl.hasAccessToModel(e,t,r)?n.fn(this):n.inverse(this)});Handlebars.registerHelper("moduleNameSingular",function(e){return i.nomad.getSingularModuleName(e)});Handlebars.registerHelper("optionLabel",function(e,t){var n=_.isString(e)?i.lang.getAppListStrings(e):e;return n[t]});Handlebars.registerHelper("searchListItem",function(e){if(!i.acl.hasAccess("list",e.module)){return Handlebars.SafeString("")}var t=e.searchInfo;var n=t?t.highlighted:null;var r=Handlebars.Utils.escapeExpression(e.get("name"));var a="";var s=[];if(this.fields&&this.fields.length){if(this.fields[0].type!=="name"){s.push(this.fields[0])}}var o=[];_.each(n,function(e,t){var n;if(_.isArray(e.text)){n=_.map(e.text,function(e){return u(e)}).join("")}else{n=u(e.text)}if(t==="name"){r=n}else{o.push(t);a+='<div class="search-result clip">'+i.lang.get(e.label,e.module)+": "+n+"</div>"}},this);var l='<div class="item-name clip">'+r+"</div>";if(!_.isEmpty(a)){l+=a}return new Handlebars.SafeString(l)});Handlebars.registerHelper("getTxLogActionName",function(e){e=s[e];var t=i.lang.get(e)||e;return new Handlebars.SafeString(t)});Handlebars.registerHelper("getTxLogModuleName",function(){return i.nomad.getPluralModuleName(this.model.attributes._tx_bean_module)});Handlebars.registerHelper("getTxLogActionExplanation",function(){var e=this.model.attributes._tx_action;var t;var n=this.model.attributes.bean;var r;var a;if(n){a=_.isEmpty(n.name)?n[i.nomad.getContextMeta("list",n._module).nameField.name]:n.name}else{a=i.lang.get("LBL_RECORD_DELETED")}r={module:i.nomad.getSingularModuleName(this.model.attributes._tx_bean_module),name:a};if(e===i.offline.SYNC_ACTIONS.FAVORITE&&!this.model.attributes._tx_updated_fields.my_favorite.after){t="LBL_ACTION_UNFAVORITE_EXPLANATION"}else if(e===i.offline.SYNC_ACTIONS.FOLLOW&&!this.model.attributes._tx_updated_fields.following.after){t="LBL_ACTION_UNFOLLOW_EXPLANATION"}else if(this.model.attributes.related){r.relatedModule=i.nomad.getSingularModuleName(this.model.attributes._tx_related_module);r.relatedName=this.model.attributes.related.name;if(e===i.offline.SYNC_ACTIONS.CREATE){t="LBL_ACTION_CREATE_RELATED_EXPLANATION"}}t=t||o[e]||"Unknown action";r.relatedName=r.relatedName||i.lang.get("LBL_RECORD_DELETED");r.relatedModule=r.relatedModule||i.nomad.getSingularModuleName(this.model.attributes._tx_related_module);var s=i.lang.get(t,null,r);return new Handlebars.SafeString(s)});Handlebars.registerHelper("getTxLogItemStatusClass",function(){var e;if(this.model.attributes._tx_error_count){var t=parseInt(this.model.attributes._tx_error,10);var n=i.offline.TRANSACTION_STATUSES.UNRECOVERABLE;e=_.indexOf(n,t)>-1?"error":"warning"}return e});Handlebars.registerHelper("getErrorDescription",function(e){var t=e;switch(e){case"403":t=i.lang.get("ERR_MOBILE_NOT_AUTHORIZED");break;case"409":t=i.lang.get("ERR_OFFLINE_SYNC_CONFLICT");break;case"412":t=i.lang.get("ERR_MOBILE_METADATA_CHANGED");break;case"500":t=i.lang.get("ERR_MOBILE_INTERNAL",null,{code:e});break}return new Handlebars.SafeString(t)});Handlebars.registerHelper("teamSearchItem",function(e){var t;var n;var i="";var r="";var a=(e.collection.query||"").trim();if(a){n=new RegExp("("+l(Handlebars.Utils.escapeExpression(a))+")","i");_.each(["name","name_2"],function(a){r=e.get(a);t=r.match(n);if(t){i+=r.replace(t[0],"<b>"+t[0]+"</b>")}else{i+=r}i+=" "})}return new Handlebars.SafeString(i)});Handlebars.registerHelper("humanFileSize",function(e){var t=i.nomad.utils.humanFileSize(e);if(t===null){return i.lang.get("LBL_NOT_AVAILABLE")}return t.toString(true)});Handlebars.registerHelper("listItems",function(e,t,n){var i=_.map(e,function(e){var i=t.constructor.listItemDataProviders;var r=t.getListItemTpl(e);var a=t.getListItemDataProvider(e);var s=i[a]||i.ListItem;var o=s.prepareItemData(e,t,n);return Handlebars.helpers.partial(r,o,n).string});return new Handlebars.SafeString(i.join(""))});Handlebars.registerHelper("partial",function(e,t,n){var r=n.hash.view;var a=r&&r.options.templateOptions&&r.options.templateOptions.partials?r.options.templateOptions.partials[e]:i.template.get(e);return new Handlebars.SafeString(a?a(t):"")});Handlebars.registerHelper("emailPlaceholder",function(e,t){return i.lang.get(t.hash.required?"":"LBL_OPTIONAL")});Handlebars.registerHelper("primaryEmail",function(e){return e&&e.length?e[0].email_address:""});Handlebars.registerHelper("buildRoute",function(e,t){var n;var r=i.controller.getScreenContextRoot();var a=t.hash.action;var s=t.hash.link;if(s){n=i.nomad.buildLinkRoute(e.link.bean.module,e.link.bean.id,s,e.id,a)}else{n=i.router.buildRoute(e.module,e.id,a)}if(t.hash.appendRoot&&r){n=r+"/"+n}return new Handlebars.SafeString(n)});Handlebars.registerHelper("ifHasValue",function(e,t,n){return e.get(t)?n.fn(this):n.inverse(this)});function c(e,t,n){var r={iconClass:e,additionalClass:n&&n.hash.additionalClass};if(n.module){r.displayInitials=!n.hash.iconKey&&i.config.ui.displayInitials;r.module=n.module;r.iconLabel=n.hash.iconLabel}return new Handlebars.SafeString(t(r))}Handlebars.registerHelper("icon",function(e,t){return c(_.getNested(i.config.ui.icons,e),i.template.get("icon"),t)});Handlebars.registerHelper("iconModule",function(e,t){return c(_.getNested(i.config.ui.icons.modules,e)||_.getNested(i.config.ui.icons,t.hash.iconKey),i.template.get("icon-module"),_.extend(i.utils.deepCopy(t),{module:e}))});Handlebars.registerHelper("moduleIconLabel",function(e){var t=i.lang.getAppListStrings("moduleIconList")[e]||i.lang.getAppListStrings("moduleListSingular")[e]||i.lang.getAppListStrings("moduleList")[e]||e;var n=t.indexOf(" ");return n!==-1?t.substring(0,1)+t.substring(n+1,n+2):t.substring(0,2)});Handlebars.registerHelper("iterate",function(e,t){var n="";var i;if(_.isObject(e)){i=function r(e,i){n=n+t.fn({key:i,value:e})}}_.each(e,i,this);return new Handlebars.SafeString(n)});Handlebars.registerHelper("favoriteable",function(e,t){var n;var r;var a="";if(e instanceof Backbone.Model){n=e.module;r={isFavorite:e.get("my_favorite")}}else{n=e;r={}}if(n&&i.nomad.supportsFavs(n)){a=t.fn(r)}return new Handlebars.SafeString(a)});Handlebars.registerHelper("join",function(e,t){var n=t.hash.delimiter||",";var i=t.hash.start||0;var r=e?e.length:0;var a=t.hash.end||r;var s="";if(a>r)a=r;if(_.isFunction(t.fn)){for(var o=i;o<a;o++){if(o>i)s+=n;if(_.isString(e[o]))s+=e[o];else s+=t.fn(e[o])}return s}else{return[].concat(e).slice(i,a).join(n)}});Handlebars.registerHelper("joinPrimaryFirst",function(e,t){var n=_.sortBy(e,function(e){return!e.primary});return Handlebars.helpers.join(n,t)});Handlebars.registerHelper("multienumStr",function(e,t){var n="";var r=", ";if(t&&t.length){var a=_.isString(e)?i.lang.getAppListStrings(e):e;t=_.isString(t)?t.replace(/(\^)/g,"").split(","):t;_.each(t,function(e){if(a[e]){n+=a[e]+r}})}if(n){n=n.substr(0,n.length-2)}return new Handlebars.SafeString(n)});Handlebars.registerHelper("multienumLabels",function(e,t,n){var r="";if(t&&t.length){var a=_.isString(e)?i.lang.getAppListStrings(e):e;_.each(t,function(e){if(a[e]){r+=n.fn({id:e,name:a[e]})}})}if(r){r=r.substr(0,r.length-2)}return new Handlebars.SafeString(r)});Handlebars.registerHelper("fieldByName",function(){var e={my_favorite:{name:"my_favorite",type:"favorite"},following:{name:"following",type:"follow"}};return function(t,n,i){if(!t){return""}var r=_.isObject(t)?_.extend({},t):e[t]||{name:t};var a=i.hash.type;var s=n.view||this;var o=r.model||n.model;if(a){r.type=a}i.hash.model=o;return Handlebars.helpers.field.call(r,s,i)}}());Handlebars.registerHelper("prop",function(e,t,n){e=e||{};if(_.isString(e)){e=i.lang.getAppListStrings(e)}if(e[t]){return e[t]}if(!_.isUndefined(n.hash.defaultValue)){return n.hash.defaultValue}return i.nomad.isEmptyValue(t)?"":t});Handlebars.registerHelper("nl2",function(e,t){var n=t.hash.str||" ";return e.replace(/\n|\r|\t/,n)});Handlebars.registerHelper("ifFewCurrenciesAreAvailable",function(e){var t=_.any(i.metadata.getCurrencies(),function(e){return e.status==="Active"});return t?e.fn(this):e.inverse(this)});Handlebars.registerHelper("isEmpty",function(e,t){return i.nomad.isEmptyValue(e)?t.fn(this):t.inverse(this)});Handlebars.registerHelper("isNotEmpty",function(e,t){return i.nomad.isEmptyValue(e)?t.inverse(this):t.fn(this)});Handlebars.registerHelper("withObjectProp",function(e,t,n){var i="";if(e.hasOwnProperty(t)){i+=n.fn(e[t])}return i});Handlebars.registerHelper("ifFeatureSupported",function(e,t){return i.supportedFeatures[e]?t.fn(this):t.inverse(this)});Handlebars.registerHelper("brandName",function(){return i.config.brandName});Handlebars.registerHelper("html2text",function(e,t){var n=/(<([^>]+)>)/gi;var i=e.replace(n,"").replace(/\s\s+/g," ");if(i.length>=t)i=i.substr(0,t);if(i)i+="...";return i});Handlebars.registerHelper("ternary",function(e,t,n){return e?t:n});Handlebars.registerHelper("labeledFields",function(e,t){var n=i.metadata.getModule(t,"fields");var r=[];_.each(e,function(e,a){var s=n[a];var o=i.lang.get(s.vname,t);r.push(o)});return new Handlebars.SafeString(r.join(", "))});Handlebars.registerHelper("comment",function(e,t){var n=_.union(i.metadata.getModuleNames({filter:"visible"}),["Users"]).sort();var a=r.utils.stringToHtmlEntities({stringToTransform:e,allowUrlChars:true});a=i.nomad.utils.formatLinks(a);_.each(i.utils.deepCopy(t),function(e){if(!_.isObject(e)){return}_.each(e,function(t,n){e[n]=i.nomad.utils.stringToHtmlEntities({stringToTransform:t})});var t=new RegExp("@\\["+i.nomad.utils.escapeRegExp(e.module)+":"+i.nomad.utils.escapeRegExp(e.id)+":"+i.nomad.utils.escapeRegExp(e.name)+"\\]","g");var r=_.indexOf(n,e.module,true)===-1?e.name:"<a href='#"+e.module+"/"+e.id+"' class='sugar_tag label-"+e.module+"'>"+e.name+"</a>";a=a.replace(t,r)});return new Handlebars.SafeString(a)});Handlebars.registerHelper("userPicture",function(e){var t=i.template.get("icon");var n={iconClass:i.config.ui.icons.menu.user,additionalClass:"user-icon btn btn-inverse"};var r=$(t(n));var a=i.api.buildFileURL({field:"picture",module:"Users",id:e},i.nomad.getFileOptions());r.css({backgroundImage:"url("+a+")"}).addClass("withPicture");return new Handlebars.SafeString(r[0].outerHTML)});Handlebars.registerHelper("activityItem",function(e){var t=e.activity_type;var n=e.data;var r=n.object;var a=n.subject;var s="LBL_ACTIVITY_"+t.toUpperCase();var o={record:Handlebars.helpers.moduleLink(r),module:i.nomad.getSingularModuleName(r.module)};var l;switch(t){case"update":_.extend(o,{changes:Handlebars.helpers.labeledFields(n.changes,r.module)});break;case"link":case"unlink":_.extend(o,{relatedRecord:Handlebars.helpers.moduleLink(a)});break}l=i.lang.get(s,null,o);return new Handlebars.SafeString(l)});Handlebars.registerHelper("isActivityItemValid",function(e,t){var n=e.activity_type;var r=e.data.object;var a=e.data.subject;var s=!!(r&&r.module);if(s){switch(n){case"link":case"unlink":s=!!(a&&a.module);break;case"update":s=!!i.metadata.getModule(r.module,"fields");break}}if(!s){i.logger.error("Activity item is not valid")}return s?t.fn(this):t.inverse(this)});Handlebars.registerHelper("moduleLink",function(e){var t=_.union(i.metadata.getModuleNames({filter:"visible"}),["Users"]);var n=_.contains(t,e.module);var r=n?'<a href="#'+e.module+"/"+e.id+'">'+Handlebars.Utils.escapeExpression(e.name)+"</a>":'<span class="module-name">'+Handlebars.Utils.escapeExpression(e.name)+"</span>";return new Handlebars.SafeString(r)});Handlebars.registerHelper("debug-attributes",function(){var e=Array.prototype.slice.call(arguments,0);var t=_.first(e);var n;var r;var a=e.length>2?e.slice(1,e.length-1):[];if(_.indexOf(["debug","e2e"],i.config.scheme)===-1){return""}if(t==="TxLog"){return new Handlebars.SafeString('record_id = "'+this.model.attributes._tx_bean_id+'"')}else if(t==="Teams"){return new Handlebars.SafeString('team_name = "'+Handlebars.Utils.escapeExpression(this.model.attributes.name)+'"'+' uid="'+this.model.attributes.id+'"')}else if(t==="text"){r=a[0];return new Handlebars.SafeString(r)}else if(t==="attribute"){n=a[0];r=a[1];return new Handlebars.SafeString(n+'="'+Handlebars.Utils.escapeExpression(r)+'"')}});Handlebars.registerHelper("currencySelect",function(e){var t="";if(i.supportedFeatures.enumViaActionSheet){var n=_.find(e,function(e,t){return e.selected});n=n?n.iso4217:e[0].iso4217;t='<span class="actionsheet-select">'+n+"</span>"}else{t='<select name="currency_select">';_.each(e,function(e,n){var i=e.selected?"selected":"";var r=e.disabled?"disabled":"";t+='<option value="'+n+'" '+i+" "+r+' label="'+e.iso4217+'">'+e.iso4217+"</option>"});t+="</select>"}return new Handlebars.SafeString(t)});Handlebars.registerHelper("gaTrack",function(e,t){var n=t.gaTrack&&t.gaTrack[e];return n?new Handlebars.SafeString(i.utils.formatString('track="{0}"',[n])):""})},function(e,t){"use strict";e.exports={adjustTemplateName:function n(e){var t=e.split("/");var n=t.length;var i;t[n-1]=t[n-1].replace(".hbs","");i=t[n-1];if(t[n-3]==="fields"){var r=t[n-2];var a=t[n-1];i=["f",r,a].join(".")}else if(t[n-2]==="modules"){i=t[n-1].replace("-",".")}return i},requireModulesWithinContext:function i(e,t,n){n=_.isFunction(t)?t:n;var i=function r(t){e(t)};t=_.isArray(t)?t:e.keys();t.forEach(n||i)}}},function(e,t,n){var i={"./dashlets/activity-item.hbs":427,"./dashlets/activity-list.hbs":429,"./dashlets/activity-post.hbs":430,"./dashlets/bubblechart-tooltip.hbs":431,"./dashlets/bubblechart.hbs":432,"./dashlets/dashlet-options.hbs":433,"./dashlets/donutchart.hbs":434,"./dashlets/forecast-pareto.hbs":435,"./dashlets/forecast-pipeline.hbs":436,"./dashlets/forecastdetails.hbs":437,"./dashlets/saved-reports-chart.hbs":438,"./dashlets/user-activity-list-item.hbs":439,"./dashlets/webpage.hbs":440,"./fields/address/detail.hbs":441,"./fields/address/edit.hbs":442,"./fields/address/readonly.hbs":443,"./fields/base/detail.hbs":444,"./fields/base/edit.hbs":445,"./fields/base/list.hbs":446,"./fields/base/login.hbs":447,"./fields/base/readonly.hbs":448,"./fields/bool/detail.hbs":449,"./fields/bool/edit.hbs":450,"./fields/bool/list.hbs":451,"./fields/bool/readonly.hbs":452,"./fields/currency/edit.hbs":453,"./fields/date/edit.hbs":454,"./fields/datetimecombo/edit.hbs":455,"./fields/email/detail.hbs":456,"./fields/email/edit.hbs":457,"./fields/email/list.hbs":458,"./fields/email/readonly.hbs":459,"./fields/emailbody/readonly.hbs":460,"./fields/enum/detail.hbs":461,"./fields/enum/edit.hbs":462,"./fields/enum/list.hbs":463,"./fields/enum/readonly.hbs":464,"./fields/favorite/detail.hbs":465,"./fields/favorite/list.hbs":466,"./fields/fieldset/detail.hbs":467,"./fields/fieldset/readonly.hbs":468,"./fields/file/detail.hbs":469,"./fields/file/edit.hbs":470,"./fields/file/list.hbs":471,"./fields/file/readonly.hbs":472,"./fields/float/edit.hbs":473,"./fields/follow/detail.hbs":474,"./fields/html/readonly.hbs":475,"./fields/image/detail.hbs":476,"./fields/image/edit.hbs":477,"./fields/image/list.hbs":478,"./fields/image/readonly.hbs":479,"./fields/int/edit.hbs":480,"./fields/invitees/edit.hbs":481,"./fields/label/detail.hbs":482,"./fields/multienum/detail.hbs":483,"./fields/multienum/edit.hbs":484,"./fields/multienum/list.hbs":485,"./fields/multienum/readonly.hbs":486,"./fields/parent/detail.hbs":487,"./fields/parent/edit.hbs":488,"./fields/parent/list.hbs":489,"./fields/parent/readonly.hbs":490,"./fields/password/login.hbs":491,"./fields/phone/detail.hbs":492,"./fields/phone/edit.hbs":493,"./fields/phone/list.hbs":494,"./fields/phone/readonly.hbs":495,"./fields/radioenum/detail.hbs":496,"./fields/radioenum/edit.hbs":497,"./fields/radioenum/list.hbs":498,"./fields/radioenum/readonly.hbs":499,"./fields/relate/detail.hbs":500,"./fields/relate/edit.hbs":501,"./fields/relate/list.hbs":502,"./fields/relate/readonly.hbs":503,"./fields/relationship/list.hbs":504,"./fields/tag/detail.hbs":505,"./fields/tag/list.hbs":506,"./fields/tag/readonly.hbs":507,"./fields/teamset-name/list.hbs":508,"./fields/teamset/detail.hbs":509,"./fields/teamset/edit.hbs":510,"./fields/teamset/list.hbs":511,"./fields/teamset/readonly.hbs":512,"./fields/textarea/detail.hbs":513,"./fields/textarea/edit.hbs":514,"./fields/textarea/list.hbs":515,"./fields/textarea/readonly.hbs":516,"./fields/url/about.hbs":517,"./fields/url/detail.hbs":518,"./fields/url/edit.hbs":519,"./fields/url/list.hbs":520,"./fields/url/login.hbs":521,"./fields/url/readonly.hbs":522,"./overlay/overlay.hbs":523,"./overlay/preloader-panel.hbs":524,"./overlay/spinner.hbs":525,"./ui-elements/icon-module.hbs":526,"./ui-elements/icon.hbs":527,"./ui-elements/sugarcrm-copyright-logo.hbs":528,"./views/about/about.hbs":529,"./views/actionsheet/actionsheet.hbs":530,"./views/alert/alert.hbs":531,"./views/bulk-load-setup/bulk-load-setup.hbs":532,"./views/container/container.hbs":533,"./views/container/dropdown-switcher.hbs":534,"./views/container/pagination-switcher.hbs":535,"./views/container/tab-switcher.hbs":536,"./views/context-menu/context-menu.hbs":537,"./views/dashboard/dashboard.hbs":538,"./views/detail/detail.hbs":539,"./views/detail/modules/detail-TxLog.hbs":540,"./views/edit/address-edit.hbs":541,"./views/edit/edit-field-error.hbs":542,"./views/edit/edit.hbs":543,"./views/edit/emailbody-edit.hbs":544,"./views/edit/textarea-edit.hbs":545,"./views/error/error-emulation.hbs":546,"./views/error/error.hbs":547,"./views/filters/filters.hbs":548,"./views/header/header.hbs":549,"./views/list/comments-list.hbs":550,"./views/list/list-item-picker.hbs":551,"./views/list/list-item-teamset.hbs":552,"./views/list/list-item-tx-log.hbs":553,"./views/list/list-item.hbs":554,"./views/list/list-no-records.hbs":555,"./views/list/list-not-authorized.hbs":556,"./views/list/list-picker.hbs":557,"./views/list/list-show-more-bottom.hbs":558,"./views/list/list-show-more-top.hbs":559,"./views/list/list.hbs":560,"./views/list/menu-list-item.hbs":561,"./views/list/twitter-list-item.hbs":562,"./views/login/login.hbs":563,"./views/main-menu/main-menu.hbs":564,"./views/offline/offline-data-generation.hbs":565,"./views/offline/offline-settings.hbs":566,"./views/offline/offline-stats.hbs":567,"./views/offline/offline-status-icon.hbs":568,"./views/offline/offline.hbs":569,"./views/ptr.hbs":570,"./views/record/record-action-button.hbs":571,"./views/record/record-actions.hbs":572,"./views/related-records/related-records.hbs":573,"./views/right-menu/right-menu.hbs":574,"./views/search-box/search-box.hbs":575,"./views/settings/settings.hbs":576,"./views/taggable/taggable.hbs":577,"./views/touchid-setup/touchid-setup.hbs":578,"./views/tutorial/tutorial-message.hbs":579,"./views/tutorial/tutorial.hbs":580};function r(e){return n(a(e))}function a(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}r.keys=function s(){return Object.keys(i)};r.resolve=a;e.exports=r;r.id=426},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing,f=this;function h(e,t){var i="",r,a;i+='\n    <article data-id="';if(a=n.itemId){r=a.call(e,{hash:{},data:t})}else{a=e&&e.itemId;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+'" class="activitystream-item">\n        <div class="as__detail">\n            ';r=n["with"].call(e,(r=e&&e.model,r==null||r===false?r:r.attributes),{hash:{},inverse:f.noop,fn:f.program(2,p,t),data:t});if(r||r===0){i+=r}i+="\n            ";r=n["if"].call(e,e&&e.isMenuVisible,{hash:{},inverse:f.noop,fn:f.program(4,m,t),data:t});if(r||r===0){i+=r}i+="\n        </div>\n    </article>\n";return i}function p(e,t){var i="",r,a,s;i+='\n                <span class="label-module-sm label-';if(a=n.display_parent_type){r=a.call(e,{hash:{},data:t})}else{a=e&&e.display_parent_type;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+'">'+c((a=n.moduleIconLabel||e&&e.moduleIconLabel,s={hash:{},data:t},a?a.call(e,e&&e.display_parent_type,s):d.call(e,"moduleIconLabel",e&&e.display_parent_type,s)))+'</span>\n                <div class="as__title">\n                    '+c((a=n.activityItem||e&&e.activityItem,
s={hash:{},data:t},a?a.call(e,e,s):d.call(e,"activityItem",e,s)))+'\n                </div>\n                <div class="as__info">\n                    <a href="#Users/';if(a=n.created_by){r=a.call(e,{hash:{},data:t})}else{a=e&&e.created_by;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+'">'+c((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,e&&e.created_by_name,s):d.call(e,"str",e&&e.created_by_name,s)))+"</a> "+c((a=n.relativeTime||e&&e.relativeTime,s={hash:{},data:t},a?a.call(e,e&&e.date_entered,s):d.call(e,"relativeTime",e&&e.date_entered,s)))+"\n                </div>\n            ";return i}function m(e,t){var i="",r,a;i+="\n                "+c((r=n.partial||e&&e.partial,a={hash:{},data:t},r?r.call(e,"menu-list-item",e,a):d.call(e,"partial","menu-list-item",e,a)))+"\n            ";return i}a+="\n";s=(o=n.isActivityItemValid||t&&t.isActivityItemValid,l={hash:{},inverse:f.noop,fn:f.program(1,h,r),data:r},o?o.call(t,(s=t&&t.model,s==null||s===false?s:s.attributes),l):d.call(t,"isActivityItemValid",(s=t&&t.model,s==null||s===false?s:s.attributes),l));if(s||s===0){a+=s}a+="\n";return a})},function(e,t){e.exports=Handlebars},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function";a+='\n<div class="panel__addpost">\n    <span class="placeholder">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_MOBILE_NEW_COMMENT",l):u.call(t,"str","LBL_MOBILE_NEW_COMMENT",l)))+'</span>\n    <a href="javascript:void(0)" class="btn btn-primary disabled">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_COMMENT",l):u.call(t,"str","LBL_COMMENT",l)))+'</a>\n</div>\n\n<div class="listing" id="listing-';if(o=n.module){s=o.call(t,{hash:{},data:r})}else{o=t&&t.module;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'">\n    '+c((o=n.partial||t&&t.partial,l={hash:{},data:r},o?o.call(t,"list-no-records",t,l):u.call(t,"partial","list-no-records",t,l)))+"\n    "+c((o=n.partial||t&&t.partial,l={hash:{},data:r},o?o.call(t,"list-show-more-top",t,l):u.call(t,"partial","list-show-more-top",t,l)))+'\n    <div class="items">\n        '+c((o=n.listItems||t&&t.listItems,l={hash:{},data:r},o?o.call(t,(s=t&&t.collection,s==null||s===false?s:s.models),t,l):u.call(t,"listItems",(s=t&&t.collection,s==null||s===false?s:s.models),t,l)))+"\n    </div>\n    "+c((o=n.partial||t&&t.partial,l={hash:{},data:r},o?o.call(t,"list-show-more-bottom",t,l):u.call(t,"partial","list-show-more-bottom",t,l)))+"\n</div>\n\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing,f=this;function h(e,t){var i="",r,a,s;i+='\n        <div class="as__detail">\n            <a href="#Users/';if(a=n.created_by){r=a.call(e,{hash:{},data:t})}else{a=e&&e.created_by;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+'/edit" class="as__icon">'+c((a=n.userPicture||e&&e.userPicture,s={hash:{},data:t},a?a.call(e,e&&e.created_by,s):d.call(e,"userPicture",e&&e.created_by,s)))+'</a>\n            <div class="as__title">\n                '+c((a=n.comment||e&&e.comment,s={hash:{},data:t},a?a.call(e,(r=e&&e.data,r==null||r===false?r:r.value),(r=e&&e.data,r==null||r===false?r:r.tags),s):d.call(e,"comment",(r=e&&e.data,r==null||r===false?r:r.value),(r=e&&e.data,r==null||r===false?r:r.tags),s)))+'\n            </div>\n            <div class="as__info">\n                <a href="#Users/';if(a=n.created_by){r=a.call(e,{hash:{},data:t})}else{a=e&&e.created_by;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+'">'+c((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,e&&e.created_by_name,s):d.call(e,"str",e&&e.created_by_name,s)))+"</a> "+c((a=n.relativeTime||e&&e.relativeTime,s={hash:{},data:t},a?a.call(e,e&&e.date_entered,s):d.call(e,"relativeTime",e&&e.date_entered,s)))+"\n            </div>\n        </div>\n    ";return i}a+='\n<article data-id="';if(o=n.itemId){s=o.call(t,{hash:{},data:r})}else{o=t&&t.itemId;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" class="activitystream-item">\n    ';s=n["with"].call(t,(s=t&&t.model,s==null||s===false?s:s.attributes),{hash:{},inverse:f.noop,fn:f.program(1,h,r),data:r});if(s||s===0){a+=s}a+="\n    "+c((o=n.partial||t&&t.partial,l={hash:{},data:r},o?o.call(t,"menu-list-item",t,l):d.call(t,"partial","menu-list-item",t,l)))+"\n</article>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function";a+="\n<p>"+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_CREATED","Opportunities",l):u.call(t,"str","LBL_CREATED","Opportunities",l)))+": <b>";if(o=n.assigned_user_name){s=o.call(t,{hash:{},data:r})}else{o=t&&t.assigned_user_name;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+"</b></p>\n<p>"+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_LIKELY","Opportunities",l):u.call(t,"str","LBL_LIKELY","Opportunities",l)))+": <b>";if(o=n.amount){s=o.call(t,{hash:{},data:r})}else{o=t&&t.amount;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+"</b></p>\n<p>"+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_DATE_CLOSED","Opportunities",l):u.call(t,"str","LBL_DATE_CLOSED","Opportunities",l)))+": <b>";if(o=n.close_date){s=o.call(t,{hash:{},data:r})}else{o=t&&t.close_date;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+"</b></p>\n<p>"+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_PROBABILITY","Opportunities",l):u.call(t,"str","LBL_PROBABILITY","Opportunities",l)))+": <b>";if(o=n.probability){s=o.call(t,{hash:{},data:r})}else{o=t&&t.probability;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+"%</b></p>\n<p>"+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_ACCOUNTS",l):u.call(t,"str","LBL_ACCOUNTS",l)))+": <b>";if(o=n.account_name){s=o.call(t,{hash:{},data:r})}else{o=t&&t.account_name;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+"</b></p>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression;a+='\n<div class="chart">\n    <span class="data-unavailable-label">'+u((s=n.str||t&&t.str,o={hash:{},data:r},s?s.call(t,"LBL_CHART_NO_DATA",o):l.call(t,"str","LBL_CHART_NO_DATA",o)))+'</span>\n    <div class="nv-chart nv-chart-bubble"></div>\n</div>\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=n.helperMissing,l=this.escapeExpression,u="function",c=this;function d(e,t,i){var r="",a;r+='\n        <div class="filters-wrap">\n            ';a=n.each.call(e,(a=i&&i.viewState,a==null||a===false?a:a.filtersDef),{hash:{},inverse:c.noop,fn:c.programWithDepth(2,f,t,e),data:t});if(a||a===0){r+=a}r+="\n        </div>\n    ";return r}function f(e,t,i){var r="",a,s;r+='\n                <div class="filter ';if(s=n.name){a=s.call(e,{hash:{},data:t})}else{s=e&&e.name;a=typeof s===u?s.call(e,{hash:{},data:t}):s}if(a||a===0){r+=a}r+='">\n                    ';a=n["with"].call(e,e,{hash:{},inverse:c.noop,fn:c.programWithDepth(3,h,t,i),data:t});if(a||a===0){r+=a}r+="\n                </div>\n            ";return r}function h(e,t,i){var r="",a,s,u;r+="\n                        "+l((s=n.field||i&&i.field,u={hash:{model:(a=i&&i.viewState,a==null||a===false?a:a.filters),parent:i},data:t},s?s.call(e,i,u):o.call(e,"field",i,u)))+"\n                    ";return r}function p(e,t){var i="",r;i+="\n        ";r=n["if"].call(e,(r=e&&e.viewState,r==null||r===false?r:r.visibility),{hash:{},inverse:c.noop,fn:c.programWithDepth(6,m,t,e),data:t});if(r||r===0){i+=r}i+="\n    ";return i}function m(e,t,i){var r="",a,s,u;r+='\n            <div class="visibility-switcher btn-group pull-right">\n                <button class="btn ';a=n["if"].call(e,(a=i&&i.viewState,a==null||a===false?a:a.myItemsOnly),{hash:{},inverse:c.noop,fn:c.program(7,_,t),data:t});if(a||a===0){r+=a}r+='" data-value="user" track="click:mine">'+l((s=n.icon||i&&i.icon,u={hash:{},data:t},s?s.call(e,"sorting.myItemsOnly",u):o.call(e,"icon","sorting.myItemsOnly",u)))+'</button>\n                <button class="btn ';a=n.unless.call(e,(a=i&&i.viewState,a==null||a===false?a:a.myItemsOnly),{hash:{},inverse:c.noop,fn:c.program(7,_,t),data:t});if(a||a===0){r+=a}r+='" data-value="group" track="click:all">'+l((s=n.icon||i&&i.icon,u={hash:{},data:t},s?s.call(e,"sorting.teamItems",u):o.call(e,"icon","sorting.teamItems",u)))+"</button>\n            </div>\n        ";return r}function _(e,t){return"active"}a+='\n<div class="dashlet-options">\n    <div class="dashlet-options_bigbar">\n    ';s=n["if"].call(t,(s=t&&t.viewState,s==null||s===false?s:s.filtersDef),{hash:{},inverse:c.noop,fn:c.programWithDepth(1,d,r,t),data:r});if(s||s===0){a+=s}a+="\n    </div>\n    ";s=n["if"].call(t,t&&t.isManager,{hash:{},inverse:c.noop,fn:c.program(5,p,r),data:r});if(s||s===0){a+=s}a+="\n</div>\n\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=this,f=n.helperMissing;function h(e,t){var i="",r,a;i+='\n        <div class="chart-metric">\n            <span class="label '+c((r=(r=e&&e.value,r==null||r===false?r:r.cssClass),typeof r===u?r.apply(e):r))+'">'+c((r=(r=e&&e.value,r==null||r===false?r:r.count),typeof r===u?r.apply(e):r))+'</span>\n            <div class="metric-amount ';if(a=n.key){r=a.call(e,{hash:{},data:t})}else{a=e&&e.key;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+'">'+c((r=(r=e&&e.value,r==null||r===false?r:r.formattedAmount),typeof r===u?r.apply(e):r))+'</div>\n            <div class="metric-description">'+c((r=(r=e&&e.value,r==null||r===false?r:r.stageLabel),typeof r===u?r.apply(e):r))+"</div>\n        </div>\n    ";return i}a+='\n<div class="donut-chart">\n    <div class="nv-chart nv-chart-donut"></div>\n    <div class="donut-chart-metric-container">\n    ';s=(o=n.eachOptions||t&&t.eachOptions,l={hash:{},inverse:d.noop,fn:d.program(1,h,r),data:r},o?o.call(t,t&&t.metricsCollection,l):f.call(t,"eachOptions",t&&t.metricsCollection,l));if(s||s===0){a+=s}a+='\n    </div>\n    <span class="data-unavailable-label">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_CHART_NO_DATA",l):f.call(t,"str","LBL_CHART_NO_DATA",l)))+"</span>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=n.helperMissing,l=this.escapeExpression,u="function",c=this;function d(e,t){var i="",r,a;i+='\n        <span class="data-unavailable-label">'+l((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_CHART_NO_DATA",a):o.call(e,"str","LBL_CHART_NO_DATA",a)))+'</span>\n\n        <div class="nv-chart nv-pareto"></div>\n    ';return i}function f(e,t){var i="",r,a;i+="\n        ";if(a=n.forecastsNotSetUpMsg){r=a.call(e,{hash:{},data:t})}else{a=e&&e.forecastsNotSetUpMsg;r=typeof a===u?a.call(e,{hash:{},data:t}):a}if(r||r===0){i+=r}i+="\n    ";return i}function h(e,t){var i="",r,a;i+='\n        <div class="warning-message">\n            '+l((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_FORECASTS_MISSING_SALES_STAGE_VALUES","Forecasts",a):o.call(e,"str","LBL_FORECASTS_MISSING_SALES_STAGE_VALUES","Forecasts",a)))+"\n        </div>\n    ";return i}a+='\n<div class="chart">\n    ';s=n["if"].call(t,t&&t.isForecastSetup,{hash:{},inverse:c.program(3,f,r),fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n\n    ";s=n.unless.call(t,t&&t.isForecastsConfigValid,{hash:{},inverse:c.noop,fn:c.program(5,h,r),data:r});if(s||s===0){a+=s}a+="\n</div>\n\n\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=n.helperMissing,u=this.escapeExpression,c=this;function d(e,t){var i="",r,a;i+="\n        ";if(a=n.forecastsNotSetUpMsg){r=a.call(e,{hash:{},data:t})}else{a=e&&e.forecastsNotSetUpMsg;r=typeof a===o?a.call(e,{hash:{},data:t}):a}if(r||r===0){i+=r}i+="\n    ";return i}function f(e,t){var i="",r,a;i+='\n        <span class="data-unavailable-label">'+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_CHART_NO_DATA",a):l.call(e,"str","LBL_CHART_NO_DATA",a)))+'</span>\n        <div class="nv-chart nv-funnelChart"></div>\n    ';return i}function h(e,t){var i="",r,a;i+='\n        <div class="warning-message">\n            '+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_FORECASTS_MISSING_SALES_STAGE_VALUES","Forecasts",a):l.call(e,"str","LBL_FORECASTS_MISSING_SALES_STAGE_VALUES","Forecasts",a)))+"\n        </div>\n    ";return i}a+='\n<div class="chart">\n    ';s=n["if"].call(t,t&&t.forecastsNotSetUpMsg,{hash:{},inverse:c.program(3,f,r),fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n\n    ";s=n.unless.call(t,t&&t.isForecastsConfigValid,{hash:{},inverse:c.noop,fn:c.program(5,h,r),data:r});if(s||s===0){a+=s}a+="\n</div>\n\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=n.helperMissing,l=this.escapeExpression,u="function",c=this;function d(e,t){var i="",r;i+='\n        <div class="fd__wrapper">\n\n            <div class="fd__b">\n                ';r=n["with"].call(e,(r=e&&e.model,r==null||r===false?r:r.attributes),{hash:{},inverse:c.noop,fn:c.program(2,f,t),data:t});if(r||r===0){i+=r}i+="\n\n            </div>\n        </div>\n    ";return i}function f(e,t){var i="",r,a,s;i+="\n                    ";r=n["if"].call(e,e&&e.showTargetQuota,{hash:{},inverse:c.noop,fn:c.program(3,h,t),data:t});if(r||r===0){i+=r}i+='\n\n                    <div class="row-fluid">\n                        <span class="span2">\n                            ';if(a=n.quota_label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.quota_label;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=l(r)+'\n                        </span>\n                        <span class="span2 tright">\n                            ';if(a=n.quota_amount_str){r=a.call(e,{hash:{},data:t})}else{a=e&&e.quota_amount_str;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=l(r)+'\n                        </span>\n                    </div>\n\n                    <div class="row-fluid">\n                        <span class="span2">\n                            '+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_CLOSED","Forecasts",s):o.call(e,"str","LBL_CLOSED","Forecasts",s)))+'\n                        </span>\n                        <span class="span2 tright">\n                            ';if(a=n.closed_amount_str){r=a.call(e,{hash:{},data:t})}else{a=e&&e.closed_amount_str;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=l(r)+'\n                        </span>\n                    </div>\n\n                    <div class="row-fluid deficitRow">\n                        <span class="span2">\n                            ';if(a=n.deficit_label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.deficit_label;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=l(r)+'\n                        </span>\n                        <span class="span2 tright">\n                            ';if(a=n.deficit_amount_str){r=a.call(e,{hash:{},data:t})}else{a=e&&e.deficit_amount_str;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=l(r)+'\n                        </span>\n                    </div>\n\n                    <div class="row-fluid details-cols">\n                        ';r=n.each.call(e,e&&e.detailsOpts,{hash:{},inverse:c.noop,fn:c.programWithDepth(5,p,t,e),data:t});if(r||r===0){i+=r}i+="\n                    </div>\n                ";return i}function h(e,t){var i="",r,a,s;i+='\n                    <div class="row-fluid">\n                        <span class="span2">\n                            '+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_QUOTA","Forecasts",s):o.call(e,"str","LBL_QUOTA","Forecasts",s)))+'\n                        </span>\n                        <span class="span2 tright">\n                            ';if(a=n.target_quota_amount_str){r=a.call(e,{hash:{},data:t})}else{a=e&&e.target_quota_amount_str;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=l(r)+"\n                        </span>\n                    </div>\n                    ";return i}function p(e,t,i){var r="",a;r+='\n                            <div class="span';a=(a=i&&i.spanCSS,typeof a===u?a.apply(e):a);if(a||a===0){r+=a}r+=' tcenter">\n                                ';a=n["if"].call(e,e&&e.hasAccess,{hash:{},inverse:c.program(8,_,t),fn:c.program(6,m,t),data:t});if(a||a===0){r+=a}r+="\n                            </div>\n                        ";return r}function m(e,t){var i="",r,a;i+='\n                                    <div class="forecast_details_default_numbers forecast_details_'+l((r=e&&e["case"],typeof r===u?r.apply(e):r))+'_numbers ellipsis_inline">\n                                        <span class="forecast_details_label">\n                                            ';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=l(r)+'\n                                        </span>\n                                        <span class="forecast_details_amount">\n                                            ';if(a=n.amount){r=a.call(e,{hash:{},data:t})}else{a=e&&e.amount;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=l(r)+'\n                                        </span>\n                                    </div>\n\n                                    <div class="forecast_details_default_feedback forecast_details_'+l((r=e&&e["case"],typeof r===u?r.apply(e):r))+'_feedback ellipsis_inline">\n                                        <span class="forecast_details_feedback">\n                                            <div class="fdf_ln1">';if(a=n.feedbackLn1){r=a.call(e,{hash:{},data:t})}else{a=e&&e.feedbackLn1;r=typeof a===u?a.call(e,{hash:{},data:t}):a}if(r||r===0){i+=r}i+="</div>\n                                            ";if(a=n.feedbackLn2){r=a.call(e,{hash:{},data:t})}else{a=e&&e.feedbackLn2;r=typeof a===u?a.call(e,{hash:{},data:t}):a}if(r||r===0){i+=r}i+="\n                                        </span>\n                                    </div>\n                                ";return i}function _(e,t){var i="",r,a,s;i+='\n                                    <div class="forecast_details_default_numbers forecast_details_'+l((r=e&&e["case"],typeof r===u?r.apply(e):r))+'_numbers ellipsis_inline">\n                                        <span class="forecast_details_label">\n                                            ';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=l(r)+'\n                                        </span>\n                                        <span class="forecast_details_no_access">\n                                            '+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_NO_FIELD_ACCESS",s):o.call(e,"str","LBL_NO_FIELD_ACCESS",s)))+"\n                                        </span>\n                                    </div>\n                                ";return i}function g(e,t){var i="",r,a;i+="\n        ";if(a=n.forecastsNotSetUpMsg){r=a.call(e,{hash:{},data:t})}else{a=e&&e.forecastsNotSetUpMsg;r=typeof a===u?a.call(e,{hash:{},data:t}):a}if(r||r===0){i+=r}i+="\n    ";return i}function v(e,t){var i="",r,a;i+='\n        <div class="warning-message">\n            '+l((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_FORECASTS_MISSING_SALES_STAGE_VALUES","Forecasts",a):o.call(e,"str","LBL_FORECASTS_MISSING_SALES_STAGE_VALUES","Forecasts",a)))+"\n        </div>\n    ";return i}a+='\n<div class="forecast-details">\n    ';s=n["if"].call(t,t&&t.isForecastSetup,{hash:{},inverse:c.program(10,g,r),fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n\n    ";s=n.unless.call(t,t&&t.isForecastsConfigValid,{hash:{},inverse:c.noop,fn:c.program(12,v,r),data:r});if(s||s===0){a+=s}a+="\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression;a+='\n<div class="chart">\n    <div class="data-unavailable-label">'+u((s=n.str||t&&t.str,o={hash:{},data:r},s?s.call(t,"LBL_CHART_NO_DATA",o):l.call(t,"str","LBL_CHART_NO_DATA",o)))+'</div>\n\n    <div class="nv-chart nv-chart-reports"></div>\n</div>\n\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function",f=this;function h(e,t){var i="",r,a,s;i+='<span class="module-name">'+c((a=n.moduleNameSingular||e&&e.moduleNameSingular,s={hash:{},data:t},a?a.call(e,(r=e&&e.model,r==null||r===false?r:r.module),s):u.call(e,"moduleNameSingular",(r=e&&e.model,r==null||r===false?r:r.module),s)))+'</span><span class="module-name-comma">,</span>';return i}function p(e,t){var i="",r,a,s;i+='\n                <div class="tb__info">\n                    <a href="#Users/';r=(r=(r=(r=e&&e.model,r==null||r===false?r:r.attributes),r==null||r===false?r:r.assigned_user_id),typeof r===d?r.apply(e):r);if(r||r===0){i+=r}i+='">'+c((r=(r=(r=e&&e.model,r==null||r===false?r:r.attributes),r==null||r===false?r:r.assigned_user_name),typeof r===d?r.apply(e):r))+"</a>\n                    ";r=(a=n.withObjectProp||e&&e.withObjectProp,s={hash:{},inverse:f.noop,fn:f.program(4,m,t),data:t},a?a.call(e,(r=e&&e.model,r==null||r===false?r:r.attributes),(r=(r=e&&e.view,r==null||r===false?r:r.listParams),r==null||r===false?r:r.record_date),s):u.call(e,"withObjectProp",(r=e&&e.model,r==null||r===false?r:r.attributes),(r=(r=e&&e.view,r==null||r===false?r:r.listParams),r==null||r===false?r:r.record_date),s));if(r||r===0){i+=r}i+="\n                </div>\n            ";return i}function m(e,t){var i,r;return c((i=n.relativeTime||e&&e.relativeTime,r={hash:{},data:t},i?i.call(e,e,r):u.call(e,"relativeTime",e,r)))}function _(e,t){var i="",r,a;i+="\n                "+c((r=n.partial||e&&e.partial,a={hash:{},data:t},r?r.call(e,"menu-list-item",e,a):u.call(e,"partial","menu-list-item",e,a)))+"\n            ";return i}a+='\n<article data-id="';if(o=n.itemId){s=o.call(t,{hash:{},data:r})}else{o=t&&t.itemId;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" module="';if(o=n.moduleName){s=o.call(t,{hash:{},data:r})}else{o=t&&t.moduleName;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'"\n         class="list-item fast-click-highlighted"\n         track="swipeLeft swipeRight:c-menu.active-list-item">\n    <div class="txt ';if(o=n.detailsCss){s=o.call(t,{hash:{},data:r})}else{o=t&&t.detailsCss;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'">\n        <div class="tb__detail">\n            ';s=n["if"].call(t,t&&t.isModuleVisible,{hash:{},inverse:f.noop,fn:f.program(1,h,r),data:r});if(s||s===0){a+=s}a+='\n            <a href="#Users/';s=(s=(s=(s=t&&t.model,s==null||s===false?s:s.attributes),s==null||s===false?s:s.assigned_user_id),typeof s===d?s.apply(t):s);if(s||s===0){a+=s}a+='" class="tb__icon">\n                '+c((o=n.userPicture||t&&t.userPicture,l={hash:{},data:r},o?o.call(t,(s=(s=t&&t.model,s==null||s===false?s:s.attributes),s==null||s===false?s:s.assigned_user_id),l):u.call(t,"userPicture",(s=(s=t&&t.model,s==null||s===false?s:s.attributes),s==null||s===false?s:s.assigned_user_id),l)))+'\n            </a>\n            <div class="tb__title item-name">\n                '+c((o=n.fieldByName||t&&t.fieldByName,l={hash:{},data:r},o?o.call(t,t&&t.titleField,t,l):u.call(t,"fieldByName",t&&t.titleField,t,l)))+"\n                "+c((o=n.fieldByName||t&&t.fieldByName,l={hash:{type:"relationship"},data:r},o?o.call(t,t&&t.relationshipField,t,l):u.call(t,"fieldByName",t&&t.relationshipField,t,l)))+"\n            </div>\n            ";s=n["if"].call(t,(s=t&&t.model,s==null||s===false?s:s.attributes),{hash:{},inverse:f.noop,fn:f.program(3,p,r),data:r});if(s||s===0){a+=s}a+="\n            ";s=n["if"].call(t,t&&t.isMenuVisible,{hash:{},inverse:f.noop,fn:f.program(6,_,r),data:r});if(s||s===0){a+=s}a+="\n        </div>\n    </div>\n</article>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function";a+='\n<div class="wp__wrapper">\n    <div class="wp__container">\n        <div class="wp__favlogo">\n            '+c((o=n.icon||t&&t.icon,l={hash:{},data:r},o?o.call(t,"actions.url",l):u.call(t,"icon","actions.url",l)))+'\n        </div>\n        <div class="wp__content">\n            <div class="wp__title">\n            ';if(o=n.title){s=o.call(t,{hash:{},data:r})}else{o=t&&t.title;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'\n            </div>\n            <div class="wp__url">\n                    ';if(o=n.url){s=o.call(t,{hash:{},data:r})}else{o=t&&t.url;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+"\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=this;function c(e,t){var i="",r,a;i+='\n    <div class="row-field">\n        <span class="value-label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+':</span>\n        <span class="value brake-lines"><a>'+l((r=e&&e.addressValue,typeof r===o?r.apply(e):r))+"</a></span>\n    </div>\n";return i}a+="\n";s=n["if"].call(t,t&&t.addressValue,{hash:{},inverse:u.noop,fn:u.program(1,c,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression,c=this,d="function";function f(e,t){var i="",r;i+="\n            ";r=n.unless.call(e,e&&e.required,{hash:{},inverse:c.noop,fn:c.program(2,h,t),data:t});if(r||r===0){i+=r}i+="\n        ";return i}function h(e,t){var i="",r,a;i+='<span class="placeholder">'+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OPTIONAL",a):l.call(e,"str","LBL_OPTIONAL",a)))+"</span>";return i}a+='\n<div class="control-group fast-click-highlighted field__address">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls readonly-item color-def">\n        ';s=n.unless.call(t,t&&t.addressValue,{hash:{},inverse:c.noop,fn:c.program(1,f,r),data:r});if(s||s===0){a+=s}a+='\n        <span class="brake-lines">'+u((s=t&&t.addressValue,typeof s===d?s.apply(t):s))+"</span>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression;a+='\n<div class="control-group readonly">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls readonly-item brake-lines">'+u((s=t&&t.addressValue,typeof s===l?s.apply(t):s))+"</div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=this;function c(e,t){var i="",r,a;i+='\n<div class="row-field">\n    <span class="value-label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+':</span>\n    <span class="value">\n        ';if(a=n.value){r=a.call(e,{hash:{},data:t})}else{a=e&&e.value;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+"\n    </span>\n</div>\n";return i}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:u.noop,fn:u.program(1,c,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function",f=this;function h(e,t){var i="",r,a;i+='placeholder="'+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OPTIONAL",a):u.call(e,"str","LBL_OPTIONAL",a)))+'"';return i}a+='\n<div class="control-group">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls">\n        <span class="input-wrapper">\n            <input type="text" ';s=n.unless.call(t,(s=t&&t.def,s==null||s===false?s:s.required),{hash:{},inverse:f.noop,fn:f.program(1,h,r),data:r});if(s||s===0){a+=s}a+=' autocorrect="off" value="';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'">\n            '+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"clear-button"},data:r},o?o.call(t,"edit.clear",l):u.call(t,"icon","edit.clear",l)))+"\n        </span>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression;a+='\n<span class="field-value">';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+"</span>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing;a+='\n<div class="control-group">\n    <div class="controls">\n    <span class="input-wrapper">\n        <input type="text" size="35" tabindex="1" id="';if(o=n.name){s=o.call(t,{hash:{},data:r})}else{o=t&&t.name;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" name="';if(o=n.name){s=o.call(t,{hash:{},data:r})}else{o=t&&t.name;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" placeholder="'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_LOGIN_USERNAME",l):d.call(t,"str","LBL_LOGIN_USERNAME",l)))+'" value="';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" autocapitalize="off" autocorrect="off" autocomplete="off">\n        '+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"clear-button"},data:r},o?o.call(t,"edit.clear",l):d.call(t,"icon","edit.clear",l)))+"\n    </span>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression;a+='\n<div class="control-group readonly">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls readonly-item">\n        ';if(o=n.value){s=o.call(t,{hash:{},data:r
})}else{o=t&&t.value;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+"\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression,c="function",d=this;function f(e,t){var i,r;return u((i=n.str||e&&e.str,r={hash:{},data:t},i?i.call(e,"LBL_YES",r):l.call(e,"str","LBL_YES",r)))}function h(e,t){var i,r;return u((i=n.str||e&&e.str,r={hash:{},data:t},i?i.call(e,"LBL_NO",r):l.call(e,"str","LBL_NO",r)))}a+='\n<div class="row-field bool">\n    <span class="value-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===c?o.call(t,{hash:{},data:r}):o}a+=u(s)+': </span>\n    <span class="value">\n       ';s=n["if"].call(t,t&&t.value,{hash:{},inverse:d.program(3,h,r),fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n    </span>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression,c="function",d=this;function f(e,t){return" checked"}function h(e,t){var i="",r,a;i+="\n            "+u((r=n.icon||e&&e.icon,a={hash:{additionalClass:"checkbox-icon"},data:t},r?r.call(e,"edit.checkboxOn",a):l.call(e,"icon","edit.checkboxOn",a)))+"\n        ";return i}function p(e,t){var i="",r,a;i+="\n            "+u((r=n.icon||e&&e.icon,a={hash:{additionalClass:"checkbox-icon"},data:t},r?r.call(e,"edit.checkboxOff",a):l.call(e,"icon","edit.checkboxOff",a)))+"\n        ";return i}a+='\n<div class="control-group">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===c?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls">\n        <input type="checkbox" class="checkbox_custom"';s=n["if"].call(t,t&&t.value,{hash:{},inverse:d.noop,fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+=">\n        ";s=n["if"].call(t,t&&t.value,{hash:{},inverse:d.program(5,p,r),fn:d.program(3,h,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression,c="function",d=this;function f(e,t){var i,r;return u((i=n.str||e&&e.str,r={hash:{},data:t},i?i.call(e,"LBL_YES",r):l.call(e,"str","LBL_YES",r)))}function h(e,t){var i,r;return u((i=n.str||e&&e.str,r={hash:{},data:t},i?i.call(e,"LBL_NO",r):l.call(e,"str","LBL_NO",r)))}a+="\n";if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===c?o.call(t,{hash:{},data:r}):o}a+=u(s)+": ";s=n["if"].call(t,t&&t.value,{hash:{},inverse:d.program(3,h,r),fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression,c="function",d=this;function f(e,t){var i,r;return u((i=n.str||e&&e.str,r={hash:{},data:t},i?i.call(e,"LBL_YES",r):l.call(e,"str","LBL_YES",r)))}function h(e,t){var i,r;return u((i=n.str||e&&e.str,r={hash:{},data:t},i?i.call(e,"LBL_NO",r):l.call(e,"str","LBL_NO",r)))}a+='\n<div class="control-group readonly">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===c?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls readonly-item">\n        ';s=n["if"].call(t,t&&t.value,{hash:{},inverse:d.program(3,h,r),fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function",f=this,h=n.blockHelperMissing;function p(e,t){return'class="selector"'}function m(e,t){return'class="hide"'}function _(e,t){var i="",r,a;i+='placeholder="'+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OPTIONAL",a):u.call(e,"str","LBL_OPTIONAL",a)))+'"';return i}a+='\n<div class="control-group">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls currency_edit">\n        <div class="wrapper">\n            <div ';l={hash:{},inverse:f.program(3,m,r),fn:f.program(1,p,r),data:r};if(o=n.ifFewCurrenciesAreAvailable){s=o.call(t,l)}else{o=t&&t.ifFewCurrenciesAreAvailable;s=typeof o===d?o.call(t,l):o}if(!n.ifFewCurrenciesAreAvailable){s=h.call(t,s,{hash:{},inverse:f.program(3,m,r),fn:f.program(1,p,r),data:r})}if(s||s===0){a+=s}a+=">\n                "+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"selectArrow-icon"},data:r},o?o.call(t,"edit.selectArrow",l):u.call(t,"icon","edit.selectArrow",l)))+"\n                "+c((o=n.currencySelect||t&&t.currencySelect,l={hash:{},data:r},o?o.call(t,t&&t.availableCurrencies,l):u.call(t,"currencySelect",t&&t.availableCurrencies,l)))+'\n            </div>\n            <span class="input-wrapper">\n                <input type="';if(o=n.fieldType){s=o.call(t,{hash:{},data:r})}else{o=t&&t.fieldType;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" class="_numeric" ';s=n.unless.call(t,(s=t&&t.def,s==null||s===false?s:s.required),{hash:{},inverse:f.noop,fn:f.program(5,_,r),data:r});if(s||s===0){a+=s}a+=' autocorrect="off" value="';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'">\n                '+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"clear-button"},data:r},o?o.call(t,"edit.clear",l):u.call(t,"icon","edit.clear",l)))+"\n            </span>\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=this,c=n.helperMissing,d=this.escapeExpression,f="function";function h(e,t){var i="",r,a,s;i+='<span class="placeholder" ';r=(a=n.isNotEmpty||e&&e.isNotEmpty,s={hash:{},inverse:u.noop,fn:u.program(2,p,t),data:t},a?a.call(e,e&&e.value,s):c.call(e,"isNotEmpty",e&&e.value,s));if(r||r===0){i+=r}i+=">"+d((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_OPTIONAL",s):c.call(e,"str","LBL_OPTIONAL",s)))+"</span>";return i}function p(e,t){return'style="display: none;"'}function m(e,t){return"disabled"}function _(e,t){return'style="display:none"'}a+='\n<div class="control-group field__date">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===f?o.call(t,{hash:{},data:r}):o}a+=d(s)+'</label>\n    <div class="controls controls-flex">\n        <span class="input-wrapper">\n            ';s=n.unless.call(t,(s=t&&t.def,s==null||s===false?s:s.required),{hash:{},inverse:u.noop,fn:u.program(1,h,r),data:r});if(s||s===0){a+=s}a+='\n            <input type="'+d((o=n.ternary||t&&t.ternary,l={hash:{},data:r},o?o.call(t,t&&t.shouldFormatValues,"text","date",l):c.call(t,"ternary",t&&t.shouldFormatValues,"text","date",l)))+'" autocorrect="off" value="';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===f?o.call(t,{hash:{},data:r}):o}a+=d(s)+'" ';s=n["if"].call(t,t&&t.shouldFormatValues,{hash:{},inverse:u.noop,fn:u.program(4,m,r),data:r});if(s||s===0){a+=s}a+=' />\n        </span>\n        <div class="btn-group clear-button" ';s=n.unless.call(t,t&&t.showClearButton,{hash:{},inverse:u.noop,fn:u.program(6,_,r),data:r});if(s||s===0){a+=s}a+='>\n            <button class="btn secondary-btn inert">'+d((o=n.icon||t&&t.icon,l={hash:{additionalClass:"control__btn_remove"},data:r},o?o.call(t,"edit.remove",l):c.call(t,"icon","edit.remove",l)))+"</button>\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=this,c=n.helperMissing,d=this.escapeExpression,f="function";function h(e,t){return" has-btn-group"}function p(e,t){var i="",r,a,s;i+='<span class="placeholder" ';r=n["if"].call(e,e&&e.value,{hash:{},inverse:u.noop,fn:u.program(4,m,t),data:t});if(r||r===0){i+=r}i+=">"+d((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_OPTIONAL",s):c.call(e,"str","LBL_OPTIONAL",s)))+"</span>";return i}function m(e,t){return'style="display: none;"'}function _(e,t){return"disabled"}function g(e,t){var i;i=n.unless.call(e,e&&e.value,{hash:{},inverse:u.noop,fn:u.program(9,v,t),data:t});if(i||i===0){return i}else{return""}}function v(e,t){return"empty"}function y(e,t){return'style="display:none"'}a+='\n<div class="control-group field__datetime">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===f?o.call(t,{hash:{},data:r}):o}a+=d(s)+'</label>\n    <div class="controls ';s=n["if"].call(t,t&&t.showClearButton,{hash:{},inverse:u.noop,fn:u.program(1,h,r),data:r});if(s||s===0){a+=s}a+='">\n        ';s=n.unless.call(t,(s=t&&t.def,s==null||s===false?s:s.required),{hash:{},inverse:u.noop,fn:u.program(3,p,r),data:r});if(s||s===0){a+=s}a+='\n        <span class="date">\n            <input type="'+d((o=n.ternary||t&&t.ternary,l={hash:{},data:r},o?o.call(t,t&&t.shouldFormatValues,"text","date",l):c.call(t,"ternary",t&&t.shouldFormatValues,"text","date",l)))+'" data-type="date"  autocorrect="off"  ';s=n["if"].call(t,t&&t.shouldFormatValues,{hash:{},inverse:u.noop,fn:u.program(6,_,r),data:r});if(s||s===0){a+=s}a+='\n                value="'+d((o=n.ternary||t&&t.ternary,l={hash:{},data:r},o?o.call(t,t&&t.shouldFormatValues,(s=t&&t.formattedValues,s==null||s===false?s:s.date),(s=t&&t.values,s==null||s===false?s:s.date),l):c.call(t,"ternary",t&&t.shouldFormatValues,(s=t&&t.formattedValues,s==null||s===false?s:s.date),(s=t&&t.values,s==null||s===false?s:s.date),l)))+'" class="\n                ';s=n.unless.call(t,(s=t&&t.def,s==null||s===false?s:s.required),{hash:{},inverse:u.noop,fn:u.program(8,g,r),data:r});if(s||s===0){a+=s}a+='\n            "/>\n        </span>\n        <span class="time">\n            <input type="'+d((o=n.ternary||t&&t.ternary,l={hash:{},data:r},o?o.call(t,t&&t.shouldFormatValues,"text","time",l):c.call(t,"ternary",t&&t.shouldFormatValues,"text","time",l)))+'" data-type="time"  autocorrect="off"  ';s=n["if"].call(t,t&&t.shouldFormatValues,{hash:{},inverse:u.noop,fn:u.program(6,_,r),data:r});if(s||s===0){a+=s}a+='\n                value="'+d((o=n.ternary||t&&t.ternary,l={hash:{},data:r},o?o.call(t,t&&t.shouldFormatValues,(s=t&&t.formattedValues,s==null||s===false?s:s.time),(s=t&&t.values,s==null||s===false?s:s.time),l):c.call(t,"ternary",t&&t.shouldFormatValues,(s=t&&t.formattedValues,s==null||s===false?s:s.time),(s=t&&t.values,s==null||s===false?s:s.time),l)))+'"/>\n        </span>\n\n        <div class="btn-group clear-button" ';s=n.unless.call(t,t&&t.showClearButton,{hash:{},inverse:u.noop,fn:u.program(11,y,r),data:r});if(s||s===0){a+=s}a+='>\n            <button class="btn secondary-btn inert">'+d((o=n.icon||t&&t.icon,l={hash:{additionalClass:"control__btn_remove"},data:r},o?o.call(t,"edit.remove",l):c.call(t,"icon","edit.remove",l)))+"</button>\n        </div>\n\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=this;function c(e,t){var i="",r,a;i+='\n<div class="row-field">\n    <span class="value-label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+":</span>\n    ";r=n.each.call(e,e&&e.value,{hash:{},inverse:u.noop,fn:u.program(2,d,t),data:t});if(r||r===0){i+=r}i+="\n</div>\n";return i}function d(e,t){var i="",r,a;i+='\n        <span class="value">\n            <a data-index="'+l((r=t==null||t===false?t:t.index,typeof r===o?r.apply(e):r))+'" class="';r=n["if"].call(e,e&&e.invalid_email,{hash:{},inverse:u.noop,fn:u.program(3,f,t),data:t});if(r||r===0){i+=r}r=n["if"].call(e,e&&e.opt_out,{hash:{},inverse:u.noop,fn:u.program(5,h,t),data:t});if(r||r===0){i+=r}i+='">\n                ';if(a=n.email_address){r=a.call(e,{hash:{},data:t})}else{a=e&&e.email_address;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+"\n            </a>\n        </span>\n    ";return i}function f(e,t){return" email_type_invalid"}function h(e,t){return" email_type_opt-out"}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:u.noop,fn:u.program(1,c,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=this,c="function",d=this.escapeExpression,f=n.helperMissing;function h(e,t,i){var r="",a,s,o;r+='\n            <div class="controls-flex';a=n["if"].call(e,e&&e.primary_address,{hash:{},inverse:u.noop,fn:u.program(2,p,t),data:t});if(a||a===0){r+=a}a=n["if"].call(e,e&&e.invalid_email,{hash:{},inverse:u.noop,fn:u.program(4,m,t),data:t});if(a||a===0){r+=a}a=n["if"].call(e,e&&e.opt_out,{hash:{},inverse:u.noop,fn:u.program(6,_,t),data:t});if(a||a===0){r+=a}r+='" email-id="'+d((a=t==null||t===false?t:t.index,typeof a===c?a.apply(e):a))+'">\n                <span class="input-wrapper">\n                    <input type="email" class="input-email" placeholder="'+d((s=n.emailPlaceholder||i&&i.emailPlaceholder,o={hash:{required:(a=i&&i.def,a==null||a===false?a:a.required)},data:t},s?s.call(e,e&&e.value,o):f.call(e,"emailPlaceholder",e&&e.value,o)))+'" autocorrect="off" value="';if(s=n.email_address){a=s.call(e,{hash:{},data:t})}else{s=e&&e.email_address;a=typeof s===c?s.call(e,{hash:{},data:t}):s}r+=d(a)+'">\n                    '+d((s=n.icon||e&&e.icon,o={hash:{additionalClass:"clear-button"},data:t},s?s.call(e,"edit.clear",o):f.call(e,"icon","edit.clear",o)))+'\n                </span>\n                <div class="btn-group">\n                    <button class="btn actions-btn inert" team-id="';if(s=n.id){a=s.call(e,{hash:{},data:t})}else{s=e&&e.id;a=typeof s===c?s.call(e,{hash:{},data:t}):s}r+=d(a)+'">'+d((s=n.icon||e&&e.icon,o={hash:{},data:t},s?s.call(e,"edit.email.actionsBtn",o):f.call(e,"icon","edit.email.actionsBtn",o)))+"</button>\n                </div>\n            </div>\n        ";return r}function p(e,t){return" primary-address"}function m(e,t){return" invalid-email"}function _(e,t){return" opt-out"}a+='\n<div class="control-group email">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===c?o.call(t,{hash:{},data:r}):o}a+=d(s)+'</label>\n    <div class="controls">\n        ';s=n.each.call(t,t&&t.value,{hash:{},inverse:u.noop,fn:u.programWithDepth(1,h,r,t),data:r});if(s||s===0){a+=s}a+='\n        <div class="f-email__add">\n            '+d((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_EMAIL_ADD",l):f.call(t,"str","LBL_EMAIL_ADD",l)))+'\n        </div>\n        <div class="controls-flex" email-id="-1" style="display:none;">\n            <span class="input-wrapper">\n                <input type="email" class="input-email" autocorrect="off" value="">\n                '+d((o=n.icon||t&&t.icon,l={hash:{additionalClass:"clear-button"},data:r},o?o.call(t,"edit.clear",l):f.call(t,"icon","edit.clear",l)))+'\n            </span>\n            <div class="btn-group">\n                <button class="btn add-btn inert" style="visibility: hidden">'+d((o=n.icon||t&&t.icon,l={hash:{},data:r},o?o.call(t,"edit.email.addBtn",l):f.call(t,"icon","edit.email.addBtn",l)))+"</button>\n            </div>\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression;a+="\n"+u((s=n.primaryEmail||t&&t.primaryEmail,o={hash:{},data:r},s?s.call(t,t&&t.value,o):l.call(t,"primaryEmail",t&&t.value,o)))+"\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=this,u="function",c=this.escapeExpression;function d(e,t){var i="",r,a;i+='\n            <div class="readonly-item controls-flex';r=n["if"].call(e,e&&e.primary_address,{hash:{},inverse:l.noop,fn:l.program(2,f,t),data:t});if(r||r===0){i+=r}r=n["if"].call(e,e&&e.invalid_email,{hash:{},inverse:l.noop,fn:l.program(4,h,t),data:t});if(r||r===0){i+=r}r=n["if"].call(e,e&&e.opt_out,{hash:{},inverse:l.noop,fn:l.program(6,p,t),data:t});if(r||r===0){i+=r}i+='">\n                <div class="txt-value">';if(a=n.email_address){r=a.call(e,{hash:{},data:t})}else{a=e&&e.email_address;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+"</div>\n            </div>\n        ";return i}function f(e,t){return" primary-address"}function h(e,t){return" invalid-email"}function p(e,t){return" opt-out"}a+='\n<div class="control-group email readonly">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls">\n        ';s=n.each.call(t,t&&t.value,{hash:{},inverse:l.noop,fn:l.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing;a+='\n<div class="control-group textarea readonly fast-click-highlighted">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls">\n        <textarea rows="'+c((s=(s=t&&t.def,s==null||s===false?s:s.rows),typeof s===u?s.apply(t):s))+'" cols="'+c((s=(s=t&&t.def,s==null||s===false?s:s.cols),typeof s===u?s.apply(t):s))+'" name="';if(o=n.name){s=o.call(t,{hash:{},data:r})}else{o=t&&t.name;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" readonly>'+c((o=n.html2text||t&&t.html2text,l={hash:{},data:r},o?o.call(t,t&&t.value,50,l):d.call(t,"html2text",t&&t.value,50,l)))+"</textarea>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=n.helperMissing,c=this;function d(e,t){var i="",r,a,s;i+='\n<div class="row-field">\n    <span class="value-label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+':</span>\n    <span class="value">\n        '+l((a=n.prop||e&&e.prop,s={hash:{},data:t},a?a.call(e,(r=e&&e.def,r==null||r===false?r:r.options),e&&e.value,s):u.call(e,"prop",(r=e&&e.def,r==null||r===false?r:r.options),e&&e.value,s)))+"\n    </span>\n</div>\n";return i}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:c.noop,fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=this,u=n.helperMissing,c=this.escapeExpression,d="function";function f(e,t){var i="",r,a,s;i+='<span class="placeholder" ';r=(a=n.isNotEmpty||e&&e.isNotEmpty,s={hash:{},inverse:l.noop,fn:l.program(2,h,t),data:t},a?a.call(e,e&&e.value,s):u.call(e,"isNotEmpty",e&&e.value,s));if(r||r===0){i+=r}i+=">"+c((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_OPTIONAL",s):u.call(e,"str","LBL_OPTIONAL",s)))+"</span>";return i}function h(e,t){return'style="display: none;"'}function p(e,t){var i="",r,a,s;i+='\n        <span class="actionsheet-select">';if(a=n.valueText){r=a.call(e,{hash:{},data:t})}else{a=e&&e.valueText;r=typeof a===d?a.call(e,{hash:{},data:t}):a}i+=c(r)+"</span>\n        "+c((a=n.icon||e&&e.icon,s={hash:{additionalClass:"selectArrow-icon"},data:t},a?a.call(e,"edit.selectArrow",s):u.call(e,"icon","edit.selectArrow",s)))+"\n    ";return i}function m(e,t){var i="",r,a,s;i+='\n        <select name="';if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===d?a.call(e,{hash:{},data:t}):a}i+=c(r)+'">\n            ';r=(a=n.eachOptions||e&&e.eachOptions,s={hash:{},inverse:l.noop,fn:l.programWithDepth(7,_,t,e),data:t},a?a.call(e,e&&e.renderItems,s):u.call(e,"eachOptions",e&&e.renderItems,s));if(r||r===0){i+=r}i+="\n        </select>\n        "+c((a=n.icon||e&&e.icon,s={hash:{additionalClass:"selectArrow-icon"},data:t},a?a.call(e,"edit.selectArrow",s):u.call(e,"icon","edit.selectArrow",s)))+"\n    ";return i}function _(e,t,i){var r="",a,s,o;r+='\n                <option value="';a=(a=(a=e&&e.value,a==null||a===false?a:a[0]),typeof a===d?a.apply(e):a);if(a||a===0){r+=a}r+='" ';a=(s=n.eq||e&&e.eq,o={hash:{},inverse:l.noop,fn:l.program(8,g,t),data:t},s?s.call(e,(a=e&&e.value,a==null||a===false?a:a[0]),i&&i.value,o):u.call(e,"eq",(a=e&&e.value,a==null||a===false?a:a[0]),i&&i.value,o));if(a||a===0){r+=a}r+=" "+c((s=n["debug-attributes"]||e&&e["debug-attributes"],o={hash:{},data:t},s?s.call(e,"attribute","label",(a=e&&e.value,a==null||a===false?a:a[1]),o):u.call(e,"debug-attributes","attribute","label",(a=e&&e.value,a==null||a===false?a:a[1]),o)))+">"+c((a=(a=e&&e.value,a==null||a===false?a:a[1]),typeof a===d?a.apply(e):a))+"</option>\n            ";return r}function g(e,t){return"selected"}a+='\n<div class="control-group field__enum">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls">\n        ';s=n.unless.call(t,(s=t&&t.def,s==null||s===false?s:s.required),{hash:{},inverse:l.noop,fn:l.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n\n    ";s=n["if"].call(t,t&&t._viaActionSheet,{hash:{},inverse:l.program(6,m,r),fn:l.program(4,p,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression;a+="\n"+c((o=n.prop||t&&t.prop,l={hash:{},data:r},o?o.call(t,(s=t&&t.def,s==null||s===false?s:s.options),t&&t.value,l):u.call(t,"prop",(s=t&&t.def,s==null||s===false?s:s.options),t&&t.value,l)))+"\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing;a+='\n<div class="control-group readonly">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls readonly-item">'+c((o=n.prop||t&&t.prop,l={hash:{defaultValue:""},data:r},o?o.call(t,(s=t&&t.def,s==null||s===false?s:s.options),t&&t.value,l):d.call(t,"prop",(s=t&&t.def,s==null||s===false?s:s.options),t&&t.value,l)))+"</div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d=this;function f(e,t){var i="",r;i+='\n    <span track="click:my_fav">\n        ';r=n["if"].call(e,e&&e.isFavorite,{hash:{},inverse:d.program(4,p,t),fn:d.program(2,h,t),data:t});if(r||r===0){i+=r}i+="\n    </span>\n";return i}function h(e,t){var i="",r,a;i+="\n            "+c((r=n.icon||e&&e.icon,a={hash:{additionalClass:"favorite-icon"},data:t},r?r.call(e,"actions.favorite",a):u.call(e,"icon","actions.favorite",a)))+"\n        ";return i}function p(e,t){var i="",r,a;i+="\n            "+c((r=n.icon||e&&e.icon,a={hash:{additionalClass:"favorite-icon color-disabled"},data:t},r?r.call(e,"actions.unfavorite",a):u.call(e,"icon","actions.unfavorite",a)))+"\n        ";return i}a+="\n";s=(o=n.favoriteable||t&&t.favoriteable,l={hash:{},inverse:d.noop,fn:d.program(1,f,r),data:r},o?o.call(t,t&&t.model,l):u.call(t,"favoriteable",t&&t.model,l));if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d=this;function f(e,t){var i="",r;i+='\n    <span track="click:my_fav">\n        ';r=n["if"].call(e,e&&e.isFavorite,{hash:{},inverse:d.program(4,p,t),fn:d.program(2,h,t),data:t});if(r||r===0){i+=r}i+="\n    </span>\n";return i}function h(e,t){var i="",r,a;i+="\n            "+c((r=n.icon||e&&e.icon,a={hash:{additionalClass:"favorite-icon"},data:t},r?r.call(e,"actions.favorite",a):u.call(e,"icon","actions.favorite",a)))+"\n        ";return i}function p(e,t){var i="",r,a;i+="\n            "+c((r=n.icon||e&&e.icon,a={hash:{additionalClass:"favorite-icon color-disabled"},data:t},r?r.call(e,"actions.unfavorite",a):u.call(e,"icon","actions.unfavorite",a)))+"\n        ";return i}a+="\n";s=(o=n.favoriteable||t&&t.favoriteable,l={hash:{},inverse:d.noop,fn:d.program(1,f,r),data:r},o?o.call(t,t&&t.model,l):u.call(t,"favoriteable",t&&t.model,l));if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression;a+='\n<div class="row-field">\n    <span class="value-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+':</span>\n    <span class="horizontal-fieldset value">';if(o=n.subfields){s=o.call(t,{hash:{},data:r})}else{o=t&&t.subfields;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+"</span>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression;a+='\n<div class="control-group">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls">\n        <span class="horizontal-fieldset">';if(o=n.subfields){s=o.call(t,{hash:{},data:r})}else{o=t&&t.subfields;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+"</span>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=this,c=n.helperMissing,d="function",f=this.escapeExpression;function h(e,t){return'\n    <div class="avatar">\n        <i class="icon icon-file"></i>\n'}function p(e,t){var i="",r,a,s;i+='\n    <div class="avatar placeholder">\n        <i class="icon icon-file"></i>\n        ';r=(a=n.ifFeatureSupported||e&&e.ifFeatureSupported,s={hash:{},inverse:u.noop,fn:u.program(4,m,t),data:t},a?a.call(e,"fileUpload",s):c.call(e,"ifFeatureSupported","fileUpload",s));if(r||r===0){i+=r}i+="\n";return i}function m(e,t){var i="",r,a,s;i+="\n            ";r=(a=n.ifHasAccessToModel||e&&e.ifHasAccessToModel,s={hash:{field:e&&e.name},inverse:u.noop,fn:u.program(5,_,t),data:t},a?a.call(e,"edit",(r=e&&e.view,r==null||r===false?r:r.model),s):c.call(e,"ifHasAccessToModel","edit",(r=e&&e.view,r==null||r===false?r:r.model),s));if(r||r===0){i+=r}i+="\n        ";return i}function _(e,t){return'<i class="icon icon-plus"></i>'}function g(e,t){var i="",r,a;i+='\n    <input type="file" class="input_upload" accept="';if(a=n.inputAccept){r=a.call(e,{hash:{},data:t})}else{a=e&&e.inputAccept;r=typeof a===d?a.call(e,{hash:{},data:t}):a}i+=f(r)+'" track="click:file_upload"/>\n';return i}a+="\n";s=(o=n.ifHasValue||t&&t.ifHasValue,l={hash:{},inverse:u.program(3,p,r),fn:u.program(1,h,r),data:r},o?o.call(t,(s=t&&t.view,s==null||s===false?s:s.model),t&&t.name,l):c.call(t,"ifHasValue",(s=t&&t.view,s==null||s===false?s:s.model),t&&t.name,l));if(s||s===0){a+=s}a+="\n    </div>\n";s=(o=n.ifFeatureSupported||t&&t.ifFeatureSupported,l={hash:{},inverse:u.noop,fn:u.program(7,g,r),data:r},o?o.call(t,"fileUpload",l):c.call(t,"ifFeatureSupported","fileUpload",l));if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=this,c=n.helperMissing,d=this.escapeExpression,f="function";function h(e,t){return"hide"}function p(e,t){var i="",r,a,s;i+='\n                <span class="placeholder ';r=n["if"].call(e,e&&e.value,{hash:{},inverse:u.noop,fn:u.program(1,h,t),data:t});if(r||r===0){i+=r}i+='">'+d((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_OPTIONAL",s):c.call(e,"str","LBL_OPTIONAL",s)))+"</span>\n            ";return i}function m(e,t){var i="",r,a;i+='\n                <input type="file" accept="';if(a=n.inputAccept){r=a.call(e,{hash:{},data:t})}else{a=e&&e.inputAccept;r=typeof a===f?a.call(e,{hash:{},data:t}):a}i+=d(r)+'" class="input_upload" track="click:file_upload" />\n            ';return i}a+='\n<div class="control-group file">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===f?o.call(t,{hash:{},data:r}):o}a+=d(s)+'</label>\n    <div class="controls controls-flex">\n        <div class="picture-wrap">\n            <span class="picture-icon ';s=(o=n.ifHasValue||t&&t.ifHasValue,l={hash:{},inverse:u.noop,fn:u.program(1,h,r),data:r},o?o.call(t,(s=t&&t.view,s==null||s===false?s:s.model),t&&t.name,l):c.call(t,"ifHasValue",(s=t&&t.view,s==null||s===false?s:s.model),t&&t.name,l));if(s||s===0){a+=s}a+='">'+d((o=n.icon||t&&t.icon,l={hash:{},data:r},o?o.call(t,"edit.picture",l):c.call(t,"icon","edit.picture",l)))+"</span>\n            ";s=n.unless.call(t,(s=t&&t.def,s==null||s===false?s:s.required),{hash:{},inverse:u.noop,fn:u.program(3,p,r),data:r});if(s||s===0){a+=s}a+='\n            <span class="value">';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===f?o.call(t,{hash:{},data:r}):o}a+=d(s)+"</span>\n            ";s=(o=n.ifFeatureSupported||t&&t.ifFeatureSupported,l={hash:{},inverse:u.noop,fn:u.program(5,m,r),data:r},o?o.call(t,"fileUpload",l):c.call(t,"ifFeatureSupported","fileUpload",l));if(s||s===0){a+=s}a+='\n        </div>\n        <div class="btn-group pull-right">\n            <button class="btn file-remove ';s=n.unless.call(t,t&&t.value,{hash:{},inverse:u.noop,fn:u.program(1,h,r),data:r});if(s||s===0){a+=s}a+='">'+d((o=n.icon||t&&t.icon,l={hash:{},data:r},o?o.call(t,"edit.remove",l):c.call(t,"icon","edit.remove",l)))+"</button>\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="";a+="\n<!-->\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=this,f=n.helperMissing;function h(e,t){return"hide"}a+='\n<div class="control-group file">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls">\n        <div class="picture-wrap">\n            <span class="picture-icon ';

s=(o=n.ifHasValue||t&&t.ifHasValue,l={hash:{},inverse:d.noop,fn:d.program(1,h,r),data:r},o?o.call(t,(s=t&&t.view,s==null||s===false?s:s.model),t&&t.name,l):f.call(t,"ifHasValue",(s=t&&t.view,s==null||s===false?s:s.model),t&&t.name,l));if(s||s===0){a+=s}a+='">'+c((o=n.icon||t&&t.icon,l={hash:{},data:r},o?o.call(t,"edit.picture",l):f.call(t,"icon","edit.picture",l)))+'</span>\n            <span class="value">';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+"</span>\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression;a+="\n"+u((s=n.partial||t&&t.partial,o={hash:{},data:r},s?s.call(t,"f.int.edit",t,o):l.call(t,"partial","f.int.edit",t,o)))+"\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=n.helperMissing,l=this.escapeExpression,u=this;function c(e,t){return" followed"}function d(e,t){var i="",r,a;i+="\n            "+l((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_FOLLOWING",a):o.call(e,"str","LBL_FOLLOWING",a)))+"\n        ";return i}function f(e,t){var i="",r,a;i+="\n            "+l((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_FOLLOW",a):o.call(e,"str","LBL_FOLLOW",a)))+"\n        ";return i}a+='\n<span class="follow-label';s=n["if"].call(t,(s=(s=t&&t.model,s==null||s===false?s:s.attributes),s==null||s===false?s:s.following),{hash:{},inverse:u.noop,fn:u.program(1,c,r),data:r});if(s||s===0){a+=s}a+=' inert">\n    <i class="inert">\n        ';s=n["if"].call(t,(s=(s=t&&t.model,s==null||s===false?s:s.attributes),s==null||s===false?s:s.following),{hash:{},inverse:u.program(5,f,r),fn:u.program(3,d,r),data:r});if(s||s===0){a+=s}a+="\n    </i>\n</span>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing;a+='\n<div class="control-group textarea readonly">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls">\n        <textarea rows="'+c((s=(s=t&&t.def,s==null||s===false?s:s.rows),typeof s===u?s.apply(t):s))+'" cols="'+c((s=(s=t&&t.def,s==null||s===false?s:s.cols),typeof s===u?s.apply(t):s))+'" name="';if(o=n.name){s=o.call(t,{hash:{},data:r})}else{o=t&&t.name;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" readonly>'+c((o=n.html2text||t&&t.html2text,l={hash:{},data:r},o?o.call(t,t&&t.value,50,l):d.call(t,"html2text",t&&t.value,50,l)))+"</textarea>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d=this;function f(e,t){return'\n    <div class="avatar"></div>\n'}function h(e,t){var i="",r,a;i+='\n    <div class="avatar placeholder">\n        '+c((r=n.icon||e&&e.icon,a={hash:{additionaClass:"user-icon"},data:t},r?r.call(e,"menu.user",a):u.call(e,"icon","menu.user",a)))+"\n    </div>\n";return i}function p(e,t){return'\n    <input type="file" class="input_upload" accept="image/*" track="click:image_upload"/>\n'}a+="\n";s=(o=n.ifHasValue||t&&t.ifHasValue,l={hash:{},inverse:d.program(3,h,r),fn:d.program(1,f,r),data:r},o?o.call(t,(s=t&&t.view,s==null||s===false?s:s.model),t&&t.name,l):u.call(t,"ifHasValue",(s=t&&t.view,s==null||s===false?s:s.model),t&&t.name,l));if(s||s===0){a+=s}a+="\n";s=(o=n.ifFeatureSupported||t&&t.ifFeatureSupported,l={hash:{},inverse:d.noop,fn:d.program(5,p,r),data:r},o?o.call(t,"fileUpload",l):u.call(t,"ifFeatureSupported","fileUpload",l));if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=this,c=n.helperMissing,d=this.escapeExpression,f="function";function h(e,t){return"hide"}function p(e,t){var i="",r,a,s;i+='\n                <span class="placeholder ';r=n["if"].call(e,e&&e.value,{hash:{},inverse:u.noop,fn:u.program(1,h,t),data:t});if(r||r===0){i+=r}i+='">'+d((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_OPTIONAL",s):c.call(e,"str","LBL_OPTIONAL",s)))+"</span>\n            ";return i}function m(e,t){return'\n                <input type="file" class="input_upload" accept="image/*" track="click:image_upload" />\n            '}a+='\n<div class="control-group file">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===f?o.call(t,{hash:{},data:r}):o}a+=d(s)+'</label>\n    <div class="controls">\n        <div class="picture-wrap">\n            <span class="picture-icon ';s=(o=n.ifHasValue||t&&t.ifHasValue,l={hash:{},inverse:u.noop,fn:u.program(1,h,r),data:r},o?o.call(t,(s=t&&t.view,s==null||s===false?s:s.model),t&&t.name,l):c.call(t,"ifHasValue",(s=t&&t.view,s==null||s===false?s:s.model),t&&t.name,l));if(s||s===0){a+=s}a+='">'+d((o=n.icon||t&&t.icon,l={hash:{},data:r},o?o.call(t,"edit.picture",l):c.call(t,"icon","edit.picture",l)))+"</span>\n            ";s=n.unless.call(t,(s=t&&t.def,s==null||s===false?s:s.required),{hash:{},inverse:u.noop,fn:u.program(3,p,r),data:r});if(s||s===0){a+=s}a+='\n            <div class="avatar"></div>\n            ';s=(o=n.ifFeatureSupported||t&&t.ifFeatureSupported,l={hash:{},inverse:u.noop,fn:u.program(5,m,r),data:r},o?o.call(t,"fileUpload",l):c.call(t,"ifFeatureSupported","fileUpload",l));if(s||s===0){a+=s}a+='\n        </div>\n        <div class="btn-group pull-right">\n            <button class="btn file-remove ';s=n.unless.call(t,t&&t.value,{hash:{},inverse:u.noop,fn:u.program(1,h,r),data:r});if(s||s===0){a+=s}a+='">'+d((o=n.icon||t&&t.icon,l={hash:{additionalClass:"control__btn_remove"},data:r},o?o.call(t,"edit.remove",l):c.call(t,"icon","edit.remove",l)))+"</button>\n        </div>\n\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="";a+="\n<!-->\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=this,f=n.helperMissing;function h(e,t){return"hide"}a+='\n<div class="control-group file">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls">\n        <div class="picture-wrap">\n            <span class="picture-icon ';s=(o=n.ifHasValue||t&&t.ifHasValue,l={hash:{},inverse:d.noop,fn:d.program(1,h,r),data:r},o?o.call(t,(s=t&&t.view,s==null||s===false?s:s.model),t&&t.name,l):f.call(t,"ifHasValue",(s=t&&t.view,s==null||s===false?s:s.model),t&&t.name,l));if(s||s===0){a+=s}a+='">'+c((o=n.icon||t&&t.icon,l={hash:{},data:r},o?o.call(t,"edit.picture",l):f.call(t,"icon","edit.picture",l)))+'</span>\n            <div class="avatar"></div>\n        </div>\n    </div>\n</div>\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function",f=this;function h(e,t){var i="",r,a;i+='placeholder="'+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OPTIONAL",a):u.call(e,"str","LBL_OPTIONAL",a)))+'"';return i}function p(e,t){return'pattern="[0-9]*" '}function m(e,t){return' step="any" '}a+='\n<div class="control-group">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls">\n        <span class="input-wrapper">\n            <input type="';if(o=n.fieldType){s=o.call(t,{hash:{},data:r})}else{o=t&&t.fieldType;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" class="_numeric" ';s=n.unless.call(t,(s=t&&t.def,s==null||s===false?s:s.required),{hash:{},inverse:f.noop,fn:f.program(1,h,r),data:r});if(s||s===0){a+=s}a+=' autocorrect="off" ';s=n.unless.call(t,t&&t.isFloat,{hash:{},inverse:f.program(5,m,r),fn:f.program(3,p,r),data:r});if(s||s===0){a+=s}a+=' value="';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'"/>\n            '+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"clear-button"},data:r},o?o.call(t,"edit.clear",l):u.call(t,"icon","edit.clear",l)))+"\n        </span>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression,c=n.helperMissing,d=this;function f(e,t){var i="",r;i+="\n            ";r=n.each.call(e,e&&e.value,{hash:{},inverse:d.noop,fn:d.program(2,h,t),data:t});if(r||r===0){i+=r}i+="\n        ";return i}function h(e,t){var i="",r,a,s;i+="\n                <div class=\"controls-flex\">\n                    <span class='txt-value'>";if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+'</span>\n                    <div class="btn-group">\n                        <button class="btn secondary-btn inert" uid="';if(a=n.id){r=a.call(e,{hash:{},data:t})}else{a=e&&e.id;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+'">'+u((a=n.icon||e&&e.icon,s={hash:{},data:t},a?a.call(e,"edit.remove",s):c.call(e,"icon","edit.remove",s)))+"</button>\n                    </div>\n                </div>\n            ";return i}function p(e,t){var i="",r;i+="\n            ";r=n.unless.call(e,(r=e&&e.def,r==null||r===false?r:r.required),{hash:{},inverse:d.noop,fn:d.program(5,m,t),data:t});if(r||r===0){i+=r}i+="\n        ";return i}function m(e,t){var i="",r,a;i+='<span class="placeholder">'+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OPTIONAL",a):c.call(e,"str","LBL_OPTIONAL",a)))+"</span>";return i}a+='\n<div class="control-group invitees fast-click-highlighted">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls">\n        ';s=n["if"].call(t,t&&t.value,{hash:{},inverse:d.program(4,p,r),fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression;a+="\n"+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,(s=t&&t.def,s==null||s===false?s:s["default"]),t&&t.module,l):u.call(t,"str",(s=t&&t.def,s==null||s===false?s:s["default"]),t&&t.module,l)))+"\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=n.helperMissing,c=this;function d(e,t){var i="",r,a,s;i+='\n<div class="row-field">\n    <span class="value-label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+':</span>\n    <span class="value">\n        '+l((a=n.multienumStr||e&&e.multienumStr,s={hash:{},data:t},a?a.call(e,(r=e&&e.def,r==null||r===false?r:r.options),e&&e.value,s):u.call(e,"multienumStr",(r=e&&e.def,r==null||r===false?r:r.options),e&&e.value,s)))+"\n    </span>\n</div>\n";return i}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:c.noop,fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression,c=n.helperMissing,d=this;function f(e,t){var i="",r,a,s;i+="\n                ";r=(a=n.multienumLabels||e&&e.multienumLabels,s={hash:{},inverse:d.noop,fn:d.program(2,h,t),data:t},a?a.call(e,(r=e&&e.def,r==null||r===false?r:r.options),e&&e.value,s):c.call(e,"multienumLabels",(r=e&&e.def,r==null||r===false?r:r.options),e&&e.value,s));if(r||r===0){i+=r}i+="\n            ";return i}function h(e,t){var i="",r,a,s;i+='\n                <span class="label" item-id="';if(a=n.id){r=a.call(e,{hash:{},data:t})}else{a=e&&e.id;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+'"  '+u((a=n["debug-attributes"]||e&&e["debug-attributes"],s={hash:{},data:t},a?a.call(e,"attribute","label",e&&e.name,s):c.call(e,"debug-attributes","attribute","label",e&&e.name,s)))+">";if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+" "+u((a=n.icon||e&&e.icon,s={hash:{additionalClass:"inert remove"},data:t},a?a.call(e,"edit.multiselect.remove",s):c.call(e,"icon","edit.multiselect.remove",s)))+"</span>\n                ";return i}function p(e,t){var i="",r;i+="\n                ";r=n.unless.call(e,(r=e&&e.def,r==null||r===false?r:r.required),{hash:{},inverse:d.noop,fn:d.program(5,m,t),data:t});if(r||r===0){i+=r}i+="\n            ";return i}function m(e,t){var i="",r,a;i+='<span class="placeholder">'+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OPTIONAL",a):c.call(e,"str","LBL_OPTIONAL",a)))+"</span>";return i}a+='\n<div class="control-group multiselect fast-click-highlighted">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls">\n        <div class="enum-list">\n            ';s=n["if"].call(t,t&&t.value,{hash:{},inverse:d.program(4,p,r),fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression;a+='\n<span class="value">'+c((o=n.multienumStr||t&&t.multienumStr,l={hash:{},data:r},o?o.call(t,(s=t&&t.def,s==null||s===false?s:s.options),t&&t.value,l):u.call(t,"multienumStr",(s=t&&t.def,s==null||s===false?s:s.options),t&&t.value,l)))+"</span>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing;a+='\n<div class="control-group readonly">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls readonly-item">\n        '+c((o=n.multienumStr||t&&t.multienumStr,l={hash:{},data:r},o?o.call(t,(s=t&&t.def,s==null||s===false?s:s.options),t&&t.value,l):d.call(t,"multienumStr",(s=t&&t.def,s==null||s===false?s:s.options),t&&t.value,l)))+"\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=this,c=n.helperMissing;function d(e,t){var i="",r,a,s;i+='\n<div class="row-field">\n    <span class="value-label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+':</span>\n    <span class="field-value value">\n        '+l((a=n.moduleNameSingular||e&&e.moduleNameSingular,s={hash:{},data:t},a?a.call(e,(r=(r=e&&e.model,r==null||r===false?r:r.attributes),r==null||r===false?r:r.parent_type),s):c.call(e,"moduleNameSingular",(r=(r=e&&e.model,r==null||r===false?r:r.attributes),r==null||r===false?r:r.parent_type),s)))+":\n        ";r=n["if"].call(e,e&&e.hasAccess,{hash:{},inverse:u.program(7,m,t),fn:u.program(2,f,t),data:t});if(r||r===0){i+=r}i+="\n    </span>\n</div>\n";return i}function f(e,t){var i="",r;i+="\n                ";r=n["if"].call(e,e&&e.link,{hash:{},inverse:u.program(5,p,t),fn:u.program(3,h,t),data:t});if(r||r===0){i+=r}i+="\n            </span>\n        ";return i}function h(e,t){var i="",r,a;i+='\n                    <a href="#';if(a=n.link){r=a.call(e,{hash:{},data:t})}else{a=e&&e.link;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+'" class="relate-link fast-click-highlighted">';if(a=n.value){r=a.call(e,{hash:{},data:t})}else{a=e&&e.value;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+"</a>\n                ";return i}function p(e,t){var i="",r,a;i+="\n                    ";if(a=n.value){r=a.call(e,{hash:{},data:t})}else{a=e&&e.value;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+"\n                ";return i}function m(e,t){var i="",r,a;i+="\n            "+l((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_NO_ACCESS",a):c.call(e,"str","LBL_NO_ACCESS",a)))+"\n        ";return i}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:u.noop,fn:u.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression,c=n.helperMissing,d=this;function f(e,t){var i="",r,a,s;i+='\n            <div class="txt-value">\n                '+u((a=n.moduleNameSingular||e&&e.moduleNameSingular,s={hash:{},data:t},a?a.call(e,(r=(r=e&&e.model,r==null||r===false?r:r.attributes),r==null||r===false?r:r.parent_type),s):c.call(e,"moduleNameSingular",(r=(r=e&&e.model,r==null||r===false?r:r.attributes),r==null||r===false?r:r.parent_type),s)))+": ";r=n["if"].call(e,e&&e.hasAccess,{hash:{},inverse:d.program(4,p,t),fn:d.program(2,h,t),data:t});if(r||r===0){i+=r}i+='\n            </div>\n            <div class="btn-group">\n                <button class="btn secondary-btn inert">'+u((a=n.icon||e&&e.icon,s={hash:{additionalClass:"control__btn_remove"},data:t},a?a.call(e,"edit.remove",s):c.call(e,"icon","edit.remove",s)))+"</button>\n            </div>\n        ";return i}function h(e,t){var i="",r,a;i+='<span class="field-value">';if(a=n.value){r=a.call(e,{hash:{},data:t})}else{a=e&&e.value;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+"</span>";return i}function p(e,t){var i,r;return u((i=n.str||e&&e.str,r={hash:{},data:t},i?i.call(e,"LBL_NO_ACCESS",r):c.call(e,"str","LBL_NO_ACCESS",r)))}function m(e,t){var i="",r;i+="\n            ";r=n.unless.call(e,(r=e&&e.def,r==null||r===false?r:r.required),{hash:{},inverse:d.noop,fn:d.program(7,_,t),data:t});if(r||r===0){i+=r}i+="\n        ";return i}function _(e,t){var i="",r,a;i+='<span class="placeholder">'+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OPTIONAL",a):c.call(e,"str","LBL_OPTIONAL",a)))+"</span>";return i}a+='\n<div class="control-group parent fast-click-highlighted">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls controls-flex">\n        ';s=n["if"].call(t,t&&t.value,{hash:{},inverse:d.program(6,m,r),fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=n.helperMissing,c=this;function d(e,t){var i="",r,a,s;i+=l((a=n.moduleNameSingular||e&&e.moduleNameSingular,s={hash:{},data:t},a?a.call(e,(r=(r=e&&e.model,r==null||r===false?r:r.attributes),r==null||r===false?r:r.parent_type),s):u.call(e,"moduleNameSingular",(r=(r=e&&e.model,r==null||r===false?r:r.attributes),r==null||r===false?r:r.parent_type),s)))+": ";r=n["if"].call(e,e&&e.hasAccess,{hash:{},inverse:c.program(4,h,t),fn:c.program(2,f,t),data:t});if(r||r===0){i+=r}return i}function f(e,t){var i,r;if(r=n.value){i=r.call(e,{hash:{},data:t})}else{r=e&&e.value;i=typeof r===o?r.call(e,{hash:{},data:t}):r}return l(i)}function h(e,t){var i,r;return l((i=n.str||e&&e.str,r={hash:{},data:t},i?i.call(e,"LBL_NO_ACCESS",r):u.call(e,"str","LBL_NO_ACCESS",r)))}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:c.noop,fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing,f=this;function h(e,t){var i="",r;i+=": ";r=n["if"].call(e,e&&e.hasAccess,{hash:{},inverse:f.program(4,m,t),fn:f.program(2,p,t),data:t});if(r||r===0){i+=r}return i}function p(e,t){var i="",r,a;i+='<span class="field-value">';if(a=n.value){r=a.call(e,{hash:{},data:t})}else{a=e&&e.value;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+"</span>";return i}function m(e,t){var i,r;return c((i=n.str||e&&e.str,r={hash:{},data:t},i?i.call(e,"LBL_NO_ACCESS",r):d.call(e,"str","LBL_NO_ACCESS",r)))}a+='\n<div class="control-group readonly">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls readonly-item">\n        '+c((o=n.moduleNameSingular||t&&t.moduleNameSingular,l={hash:{},data:r},o?o.call(t,(s=(s=t&&t.model,s==null||s===false?s:s.attributes),s==null||s===false?s:s.parent_type),l):d.call(t,"moduleNameSingular",(s=(s=t&&t.model,s==null||s===false?s:s.attributes),s==null||s===false?s:s.parent_type),l)));s=n["if"].call(t,t&&t.value,{hash:{},inverse:f.noop,fn:f.program(1,h,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function";a+='\n<div class="control-group">\n    <div class="controls">\n    <span class="input-wrapper">\n        <input type="password" size="26" tabindex="2" id="password" name="password" placeholder="'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_LOGIN_PASSWORD",l):u.call(t,"str","LBL_LOGIN_PASSWORD",l)))+'" value="';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" autocomplete="off">\n        '+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"clear-button"},data:r},o?o.call(t,"edit.clear",l):u.call(t,"icon","edit.clear",l)))+"\n    </span>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=this;function c(e,t){var i="",r,a;i+='\n<div class="row-field">\n    <span class="value-label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+':</span>\n    <span class="value">\n        <a>';if(a=n.value){r=a.call(e,{hash:{},data:t})}else{a=e&&e.value;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+"</a>\n    </span>\n</div>\n";return i}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:u.noop,fn:u.program(1,c,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function",f=this;function h(e,t){var i="",r,a;i+='placeholder="'+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OPTIONAL",a):u.call(e,"str","LBL_OPTIONAL",a)))+'"';return i}a+='\n<div class="control-group">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls">\n        <span class="input-wrapper">\n            <input type="tel" ';s=n.unless.call(t,(s=t&&t.def,s==null||s===false?s:s.required),{hash:{},inverse:f.noop,fn:f.program(1,h,r),data:r});if(s||s===0){a+=s}a+=' autocorrect="off" value="';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'">\n            '+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"clear-button"},data:r},o?o.call(t,"edit.clear",l):u.call(t,"icon","edit.clear",l)))+"\n        </span>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression;a+='\n<span class="field-value">';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+"</span>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression;a+='\n<div class="control-group readonly">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls readonly-item">';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+"</div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=n.helperMissing,c=this;function d(e,t){var i="",r,a,s;i+='\n<div class="row-field">\n    <span class="value-label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+':</span>\n    <span class="value">\n        '+l((a=n.optionLabel||e&&e.optionLabel,s={hash:{},data:t},a?a.call(e,(r=e&&e.def,r==null||r===false?r:r.options),e&&e.value,s):u.call(e,"optionLabel",(r=e&&e.def,r==null||r===false?r:r.options),e&&e.value,s)))+"\n    </span>\n</div>\n";return i}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:c.noop,fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d=this,f="function";function h(e,t,i){var r="",a,s,o;r+="\n                <button "+c((s=n.gaTrack||e&&e.gaTrack,o={hash:{},data:t},s?s.call(e,e&&e.key,i&&i.def,o):u.call(e,"gaTrack",e&&e.key,i&&i.def,o)))+' class="btn ';a=(s=n.eq||e&&e.eq,o={hash:{},inverse:d.noop,fn:d.program(2,p,t),data:t},s?s.call(e,e&&e.key,i&&i.value,o):u.call(e,"eq",e&&e.key,i&&i.value,o));if(a||a===0){r+=a}r+='" data-value="'+c((a=e&&e.key,typeof a===f?a.apply(e):a))+'">'+c((a=e&&e.value,typeof a===f?a.apply(e):a))+"</button>\n            ";return r}function p(e,t){return"active"}a+='\n<div class="control-group field__radio">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===f?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls">\n        <div class="btn-group" data-toggle="buttons-radio">\n            ';s=(o=n.eachOptions||t&&t.eachOptions,l={hash:{},inverse:d.noop,fn:d.programWithDepth(1,h,r,t),data:r},o?o.call(t,(s=t&&t.def,s==null||s===false?s:s.options),l):u.call(t,"eachOptions",(s=t&&t.def,s==null||s===false?s:s.options),l));if(s||s===0){a+=s}a+="\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression;a+="\n"+c((o=n.optionLabel||t&&t.optionLabel,l={hash:{},data:r},o?o.call(t,(s=t&&t.def,s==null||s===false?s:s.options),t&&t.value,l):u.call(t,"optionLabel",(s=t&&t.def,s==null||s===false?s:s.options),t&&t.value,l)))+"\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing;a+='\n<div class="control-group readonly radio">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls readonly-item">\n        '+c((o=n.optionLabel||t&&t.optionLabel,l={hash:{},data:r},o?o.call(t,(s=t&&t.def,s==null||s===false?s:s.options),t&&t.value,l):d.call(t,"optionLabel",(s=t&&t.def,s==null||s===false?s:s.options),t&&t.value,l)))+"\n    </div>\n</div>\n\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=this,c=n.helperMissing;function d(e,t){var i="",r,a;i+='\n<div class="row-field">\n    <span class="value-label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+":</span>\n    ";r=n["if"].call(e,e&&e.hasAccess,{hash:{},inverse:u.program(7,m,t),fn:u.program(2,f,t),data:t});if(r||r===0){i+=r}i+="\n</div>\n";return i}function f(e,t){var i="",r;i+="\n        ";r=n["if"].call(e,e&&e.link,{hash:{},inverse:u.program(5,p,t),fn:u.program(3,h,t),data:t});if(r||r===0){i+=r}i+="\n    ";return i}function h(e,t){var i="",r,a;i+='\n            <a href="#';if(a=n.link){r=a.call(e,{hash:{},data:t})}else{a=e&&e.link;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+'" class="relate-link fast-click-highlighted value">';if(a=n.value){r=a.call(e,{hash:{},data:t})}else{a=e&&e.value;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+"</a>\n        ";return i}function p(e,t){var i="",r,a;i+='\n            <span class="field-value value">';if(a=n.value){r=a.call(e,{hash:{},data:t})}else{a=e&&e.value;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+"</span>\n        ";return i}function m(e,t){var i="",r,a;i+="\n        "+l((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_NO_ACCESS",a):c.call(e,"str","LBL_NO_ACCESS",a)))+"\n    ";return i}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:u.noop,fn:u.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression,c=n.helperMissing,d=this;function f(e,t){var i="",r,a,s;i+='\n            <div class="txt-value">';if(a=n.value){r=a.call(e,{hash:{},data:t})}else{a=e&&e.value;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+'</div>\n            <div class="btn-group">\n                <button class="btn secondary-btn inert">'+u((a=n.icon||e&&e.icon,s={hash:{additionalClass:"control__btn_remove"},data:t},a?a.call(e,"edit.remove",s):c.call(e,"icon","edit.remove",s)))+"</button>\n            </div>\n        ";return i}function h(e,t){var i="",r;i+="\n            ";r=n.unless.call(e,(r=e&&e.def,r==null||r===false?r:r.required),{hash:{},inverse:d.noop,fn:d.program(4,p,t),data:t});if(r||r===0){i+=r}i+="\n        ";return i}function p(e,t){
var i="",r,a;i+='<span class="placeholder">'+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OPTIONAL",a):c.call(e,"str","LBL_OPTIONAL",a)))+"</span>";return i}a+='\n<div class="control-group relate fast-click-highlighted field__relate">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls controls-flex">\n        ';s=n["if"].call(t,t&&t.value,{hash:{},inverse:d.program(3,h,r),fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=n.helperMissing,c=this;function d(e,t){var i;i=n["if"].call(e,e&&e.hasAccess,{hash:{},inverse:c.program(4,h,t),fn:c.program(2,f,t),data:t});if(i||i===0){return i}else{return""}}function f(e,t){var i,r;if(r=n.value){i=r.call(e,{hash:{},data:t})}else{r=e&&e.value;i=typeof r===o?r.call(e,{hash:{},data:t}):r}return l(i)}function h(e,t){var i,r;return l((i=n.str||e&&e.str,r={hash:{},data:t},i?i.call(e,"LBL_NO_ACCESS",r):u.call(e,"str","LBL_NO_ACCESS",r)))}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:c.noop,fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression,c=n.helperMissing,d=this;function f(e,t){var i;i=n["if"].call(e,e&&e.hasAccess,{hash:{},inverse:d.program(4,p,t),fn:d.program(2,h,t),data:t});if(i||i===0){return i}else{return""}}function h(e,t){var i,r;if(r=n.value){i=r.call(e,{hash:{},data:t})}else{r=e&&e.value;i=typeof r===l?r.call(e,{hash:{},data:t}):r}return u(i)}function p(e,t){var i,r;return u((i=n.str||e&&e.str,r={hash:{},data:t},i?i.call(e,"LBL_NO_ACCESS",r):c.call(e,"str","LBL_NO_ACCESS",r)))}a+='\n<div class="control-group readonly">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls readonly-item">\n        ';s=n["if"].call(t,t&&t.value,{hash:{},inverse:d.noop,fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=this;function c(e,t){var i="",r,a;i+="\n    &ndash; ";if(a=n.value){r=a.call(e,{hash:{},data:t})}else{a=e&&e.value;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+"\n";return i}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:u.noop,fn:u.program(1,c,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=this;function c(e,t){var i="",r,a;i+='\n    <div class="row-field">\n        <span class="value-label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+':</span>\n        <span class="value">\n            ';r=n.each.call(e,e&&e.value,{hash:{},inverse:u.noop,fn:u.program(2,d,t),data:t});if(r||r===0){i+=r}i+="\n        </span>\n    </div>\n";return i}function d(e,t){var i="",r,a;i+='\n                <span class="tag-item">';if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+"</span>\n            ";return i}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:u.noop,fn:u.program(1,c,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=this;function c(e,t){var i="",r,a;i+='\n    <div class="row-field">\n        <span class="value-label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+':</span>\n        <span class="value">\n            ';r=n.each.call(e,e&&e.value,{hash:{},inverse:u.noop,fn:u.program(2,d,t),data:t});if(r||r===0){i+=r}i+="\n        </span>\n    </div>\n";return i}function d(e,t){var i="",r,a;i+='\n                <span class="tag-item">';if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+"</span>";r=n.unless.call(e,t==null||t===false?t:t.last,{hash:{},inverse:u.noop,fn:u.program(3,f,t),data:t});if(r||r===0){i+=r}i+="\n            ";return i}function f(e,t){return", "}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:u.noop,fn:u.program(1,c,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression,c=this;function d(e,t){var i="",r,a;i+='\n            <span class="tag-item">';if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+"</span>";r=n.unless.call(e,t==null||t===false?t:t.last,{hash:{},inverse:c.noop,fn:c.program(2,f,t),data:t});if(r||r===0){i+=r}i+="\n        ";return i}function f(e,t){return", "}a+='\n<div class="control-group readonly">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls readonly-item">\n        ';s=n.each.call(t,t&&t.value,{hash:{},inverse:c.noop,fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</div>\n\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression;a+="\n"+u((s=n.fieldValue||t&&t.fieldValue,o={hash:{},data:r},s?s.call(t,t&&t.model,"name",o):l.call(t,"fieldValue",t&&t.model,"name",o)))+" "+u((s=n.fieldValue||t&&t.fieldValue,o={hash:{},data:r},s?s.call(t,t&&t.model,"name_2",o):l.call(t,"fieldValue",t&&t.model,"name_2",o)))+"\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=n.helperMissing,c=this;function d(e,t){var i="",r,a;i+='\n    <div class="row-field">\n        <span class="value-label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+":</span>\n        ";r=n.each.call(e,e&&e.value,{hash:{},inverse:c.noop,fn:c.programWithDepth(2,f,t,e),data:t});if(r||r===0){i+=r}i+="\n    </div>\n";return i}function f(e,t,i){var r="",a,s;r+='\n            <span class="value">';if(s=n.name){a=s.call(e,{hash:{},data:t})}else{s=e&&e.name;a=typeof s===o?s.call(e,{hash:{},data:t}):s}r+=l(a)+" ";a=n["if"].call(e,e&&e.name_2,{hash:{},inverse:c.noop,fn:c.program(3,h,t),data:t});if(a||a===0){r+=a}r+=" ";a=n["if"].call(e,e&&e.primary,{hash:{},inverse:c.noop,fn:c.program(5,p,t),data:t});if(a||a===0){r+=a}r+=" ";a=n["if"].call(e,i&&i.isTBAEnabled,{hash:{},inverse:c.noop,fn:c.program(7,m,t),data:t});if(a||a===0){r+=a}r+="</span>\n        ";return r}function h(e,t){var i="",r,a;i+=" ";if(a=n.name_2){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name_2;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r);return i}function p(e,t){var i="",r,a;i+='<label class="subvalue">('+l((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_COLLECTION_PRIMARY",a):u.call(e,"str","LBL_COLLECTION_PRIMARY",a)))+")</label>";return i}function m(e,t){var i;i=n["if"].call(e,e&&e.selected,{hash:{},inverse:c.noop,fn:c.program(8,_,t),data:t});if(i||i===0){return i}else{return""}}function _(e,t){var i="",r,a;i+='<label class="subvalue">('+l((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_TEAM_SET_SELECTED",a):u.call(e,"str","LBL_TEAM_SET_SELECTED",a)))+")</label>";return i}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:c.noop,fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression,c=n.helperMissing,d=this;function f(e,t){var i="",r;i+="\n            ";r=n.each.call(e,e&&e.value,{hash:{},inverse:d.noop,fn:d.programWithDepth(2,h,t,e),data:t});if(r||r===0){i+=r}i+="\n        ";return i}function h(e,t,i){var r="",a,s,o;r+="\n                <div class=\"controls-flex\">\n                    <span class='txt-value'>";if(s=n.name){a=s.call(e,{hash:{},data:t})}else{s=e&&e.name;a=typeof s===l?s.call(e,{hash:{},data:t}):s}r+=u(a);a=n["if"].call(e,e&&e.name_2,{hash:{},inverse:d.noop,fn:d.program(3,p,t),data:t});if(a||a===0){r+=a}r+='</span>\n                    <div class="btn-group">\n                        <button class="btn primary-btn ';a=n["if"].call(e,e&&e.primary,{hash:{},inverse:d.noop,fn:d.program(5,m,t),data:t});if(a||a===0){r+=a}r+=' inert" team-id="';if(s=n.id){a=s.call(e,{hash:{},data:t})}else{s=e&&e.id;a=typeof s===l?s.call(e,{hash:{},data:t}):s}r+=u(a)+'">'+u((s=n.icon||e&&e.icon,o={hash:{},data:t},s?s.call(e,"edit.star",o):c.call(e,"icon","edit.star",o)))+"</button>\n                        ";a=n["if"].call(e,i&&i.isTBAEnabled,{hash:{},inverse:d.noop,fn:d.program(7,_,t),data:t});if(a||a===0){r+=a}r+='\n                        <button class="btn secondary-btn inert" team-id="';if(s=n.id){a=s.call(e,{hash:{},data:t})}else{s=e&&e.id;a=typeof s===l?s.call(e,{hash:{},data:t}):s}r+=u(a)+'">'+u((s=n.icon||e&&e.icon,o={hash:{additionalClass:"control__btn_remove"},data:t},s?s.call(e,"edit.remove",o):c.call(e,"icon","edit.remove",o)))+"</i></button>\n                    </div>\n                </div>\n            ";return r}function p(e,t){var i="",r,a;i+=" ";if(a=n.name_2){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name_2;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r);return i}function m(e,t){return" active "}function _(e,t){var i="",r,a;i+='\n                            <button class="btn selected-btn ';r=n["if"].call(e,e&&e.selected,{hash:{},inverse:d.noop,fn:d.program(5,m,t),data:t});if(r||r===0){i+=r}i+=' inert" team-id="';if(a=n.id){r=a.call(e,{hash:{},data:t})}else{a=e&&e.id;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+'">';r=n["if"].call(e,e&&e.selected,{hash:{},inverse:d.program(10,v,t),fn:d.program(8,g,t),data:t});if(r||r===0){i+=r}i+="</button>\n                        ";return i}function g(e,t){var i,r;return u((i=n.icon||e&&e.icon,r={hash:{},data:t},i?i.call(e,"edit.unlock",r):c.call(e,"icon","edit.unlock",r)))}function v(e,t){var i,r;return u((i=n.icon||e&&e.icon,r={hash:{},data:t},i?i.call(e,"edit.lock",r):c.call(e,"icon","edit.lock",r)))}function y(e,t){var i="",r;i+="\n            ";r=n.unless.call(e,(r=e&&e.def,r==null||r===false?r:r.required),{hash:{},inverse:d.noop,fn:d.program(13,b,t),data:t});if(r||r===0){i+=r}i+="\n        ";return i}function b(e,t){var i="",r,a;i+='<span class="placeholder">'+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OPTIONAL",a):c.call(e,"str","LBL_OPTIONAL",a)))+"</span>";return i}a+='\n<div class="control-group teamset  fast-click-highlighted">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls">\n        ';s=n["if"].call(t,t&&t.value,{hash:{},inverse:d.program(12,y,r),fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=this,f=n.helperMissing;function h(e,t){var i="",r,a;i+="\n";if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r);r=n["if"].call(e,e&&e.name_2,{hash:{},inverse:d.noop,fn:d.program(2,p,t),data:t});if(r||r===0){i+=r}return i}function p(e,t){var i="",r,a;i+=" ";if(a=n.name_2){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name_2;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r);return i}a+="\n";s=(o=n.joinPrimaryFirst||t&&t.joinPrimaryFirst,l={hash:{},inverse:d.noop,fn:d.program(1,h,r),data:r},o?o.call(t,t&&t.value,l):f.call(t,"joinPrimaryFirst",t&&t.value,l));if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression,c=n.helperMissing,d=this;function f(e,t){var i="",r;i+="\n        ";r=n.each.call(e,e&&e.value,{hash:{},inverse:d.noop,fn:d.program(2,h,t),data:t});if(r||r===0){i+=r}i+="\n    ";return i}function h(e,t){var i="",r,a;i+='\n            <span class="value">';if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+" ";r=n["if"].call(e,e&&e.name_2,{hash:{},inverse:d.noop,fn:d.program(3,p,t),data:t});if(r||r===0){i+=r}i+=" ";r=n["if"].call(e,e&&e.primary,{hash:{},inverse:d.noop,fn:d.program(5,m,t),data:t});if(r||r===0){i+=r}i+=" ";r=n["if"].call(e,e&&e.selected,{hash:{},inverse:d.noop,fn:d.program(7,_,t),data:t});if(r||r===0){i+=r}i+="</span>\n        ";return i}function p(e,t){var i="",r,a;i+=" ";if(a=n.name_2){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name_2;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r);return i}function m(e,t){var i="",r,a;i+='<label class="subvalue">('+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_COLLECTION_PRIMARY",a):c.call(e,"str","LBL_COLLECTION_PRIMARY",a)))+")</label>";return i}function _(e,t){var i="",r,a;i+='<label class="subvalue">('+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_TEAM_SET_SELECTED",a):c.call(e,"str","LBL_TEAM_SET_SELECTED",a)))+")</label>";return i}a+='\n<div class="control-group readonly">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls readonly-item">\n    ';s=n["if"].call(t,t&&t.value,{hash:{},inverse:d.noop,fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=n.helperMissing,c=this;function d(e,t){var i="",r,a,s;i+='\n<div class="row-field textarea">\n    <span class="value-label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+':</span>\n    <span class="field-value value">\n        '+l((a=n.nl2br||e&&e.nl2br,s={hash:{},data:t},a?a.call(e,e&&e.value,s):u.call(e,"nl2br",e&&e.value,s)))+"\n    </span>\n</div>\n";return i}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:c.noop,fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression,c=this,d="function";function f(e,t){var i;i=n.unless.call(e,(i=e&&e.def,i==null||i===false?i:i.required),{hash:{},inverse:c.noop,fn:c.program(2,h,t),data:t});if(i||i===0){return i}else{return""}}function h(e,t){var i="",r,a;i+='<span class="placeholder">'+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OPTIONAL",a):l.call(e,"str","LBL_OPTIONAL",a)))+"</span>";return i}a+='\n<div class="control-group textarea fast-click-highlighted">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls">\n        <div class="textarea-div" name="';if(o=n.name){s=o.call(t,{hash:{},data:r})}else{o=t&&t.name;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=u(s)+'">';s=n.unless.call(t,t&&t.value,{hash:{},inverse:c.noop,fn:c.program(1,f,r),data:r});if(s||s===0){a+=s}a+='<span class="field-value">';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=u(s)+"</span></div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression;a+='\n<span class="value">';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+"</span>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression;a+='\n<div class="control-group textarea readonly fast-click-highlighted">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls">\n        <div class="textarea-div" name="';if(o=n.name){s=o.call(t,{hash:{},data:r})}else{o=t&&t.name;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'">';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+"</div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression,c=n.helperMissing,d=this;function f(e,t){var i="",r,a;i+='\n        <div class="controls">\n            <a class="uneditable-link clip" target="_blank" href="';if(a=n.value){r=a.call(e,{hash:{},data:t})}else{a=e&&e.value;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+'">';if(a=n.value){r=a.call(e,{hash:{},data:t})}else{a=e&&e.value;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+"</a>\n        </div>\n    ";return i}function h(e,t){var i="",r,a;i+='\n        <div class="controls readonly-item">\n            '+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_NOT_AVAILABLE",a):c.call(e,"str","LBL_NOT_AVAILABLE",a)))+"\n        </div>\n    ";return i}a+='\n<div class="control-group">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+"</label>\n    ";s=n["if"].call(t,t&&t.value,{hash:{},inverse:d.program(3,h,r),fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=this;function c(e,t){var i="",r,a;i+='\n    <div class="row-field">\n        <span class="value-label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+':</span>\n        <span class="value"><a>';if(a=n.value){r=a.call(e,{hash:{},data:t})}else{a=e&&e.value;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+"</a></span>\n    </div>\n";return i}a+="\n";s=n["if"].call(t,t&&t.value,{hash:{},inverse:u.noop,fn:u.program(1,c,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function",f=this;function h(e,t){var i="",r,a;i+='placeholder="'+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OPTIONAL",a):u.call(e,"str","LBL_OPTIONAL",a)))+'"';return i}a+='\n<div class="control-group">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</label>\n    <div class="controls">\n        <span class="input-wrapper">\n            <input type="url" ';s=n.unless.call(t,(s=t&&t.def,s==null||s===false?s:s.required),{hash:{},inverse:f.noop,fn:f.program(1,h,r),data:r});if(s||s===0){a+=s}a+=' autocorrect="off" value="';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'">\n            '+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"clear-button"},data:r},o?o.call(t,"edit.clear",l):u.call(t,"icon","edit.clear",l)))+"\n        </span>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression;a+='\n<span class="value">';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+"</span>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing;a+='\n<div class="control-group">\n    <div class="controls">\n    <span class="input-wrapper">\n        <input type="url" tabindex="3" id="url" name="url" value="';if(o=n.value){s=o.call(t,{hash:{},data:r})}else{o=t&&t.value;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" placeholder="your-';if(o=n.brandName){s=o.call(t,{hash:{},data:r})}else{o=t&&t.brandName;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'-instance.com" autocapitalize="off" autocorrect="off" autocomplete="off">\n        '+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"clear-button"},data:r},o?o.call(t,"edit.clear",l):d.call(t,"icon","edit.clear",l)))+"\n    </span>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression,c=this;function d(e,t){var i="",r,a;i+='\n            <span class="value"><a>';if(a=n.value){r=a.call(e,{hash:{},data:t})}else{a=e&&e.value;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+"</a></span>\n        ";return i}a+='\n<div class="control-group readonly">\n    <label class="control-label">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</label>\n    <div class="controls readonly-item">\n        ';s=n["if"].call(t,t&&t.value,{hash:{},inverse:c.noop,fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression;a+='\n<div id="overlay" style="display: none; opacity: 1;">\n    <span id="overlay-message"></span><br/>\n    <span id="overlay-spinner">\n        '+u((s=n.partial||t&&t.partial,o={hash:{},data:r},s?s.call(t,"spinner",t,o):l.call(t,"partial","spinner",t,o)))+"\n    </span>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing;a+='\n<div class="box__preloader">\n    <div class="preloader__header">\n        <h3 class="brand">';if(o=n.brandName){s=o.call(t,{hash:{},data:r})}else{o=t&&t.brandName;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</h3>\n        <div class="preloader__message">\n            '+c((o=n.partial||t&&t.partial,l={hash:{},data:r},o?o.call(t,"spinner",t,l):d.call(t,"partial","spinner",t,l)))+"\n            ";if(o=n.message){s=o.call(t,{hash:{},data:r})}else{o=t&&t.message;s=typeof o===u?o.call(t,{hash:{},data:r}):o}if(s||s===0){a+=s}a+="\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="";a+='\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792" class="icondefault icon-spinner rotate360">\n    <path class="icon-spinner-path" fill="white" transform="translate(0,256)" d="M1792 640q0 -182 -71 -348t-191 -286t-286 -191t-348 -71t-348 71t-286 191t-191 286t-71 348q0 222 101 414.5t276.5 317t390.5 155.5v-260q-221 -45 -366.5 -221t-145.5 -406q0 -130 51 -248.5t136.5 -204t204 -136.5t248.5 -51t248.5 51t204 136.5t136.5 204t51 248.5 q0 230 -145.5 406t-366.5 221v260q215 -31 390.5 -155.5t276.5 -317t101 -414.5z" />\n</svg>\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression,c=this,d="function";function f(e,t){return"has-icon-inside"}function h(e,t){var i="",r;i+='\n        <span class="label-module-sm_title">\n            ';r=n["if"].call(e,e&&e.iconLabel,{hash:{},inverse:c.program(6,m,t),fn:c.program(4,p,t),data:t});if(r||r===0){i+=r}i+="\n        </span>\n    ";return i}function p(e,t){var i="",r,a;i+="\n                "+u((r=n.moduleIconLabel||e&&e.moduleIconLabel,a={hash:{},data:t},r?r.call(e,e&&e.iconLabel,a):l.call(e,"moduleIconLabel",e&&e.iconLabel,a)))+"\n            ";return i}function m(e,t){var i="",r,a;i+="\n                "+u((r=n.moduleIconLabel||e&&e.moduleIconLabel,a={hash:{},data:t},r?r.call(e,e&&e.module,a):l.call(e,"moduleIconLabel",e&&e.module,a)))+"\n            ";return i}function _(e,t){var i="",r,a;i+='\n        <i class="icondefault ';if(a=n.iconClass){r=a.call(e,{hash:{},data:t})}else{a=e&&e.iconClass;r=typeof a===d?a.call(e,{hash:{},data:t}):a}i+=u(r)+'"></i>\n    ';return i}a+='\n<span class="label-module-sm label-';if(o=n.module){s=o.call(t,{hash:{},data:r})}else{o=t&&t.module;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=u(s)+" ";s=n["if"].call(t,t&&t.iconClass,{hash:{},inverse:c.noop,fn:c.program(1,f,r),data:r});if(s||s===0){a+=s}a+=" ";if(o=n.additionalClass){s=o.call(t,{hash:{},data:r})}else{o=t&&t.additionalClass;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=u(s)+'">\n    ';s=n["if"].call(t,t&&t.displayInitials,{hash:{},inverse:c.noop,fn:c.program(3,h,r),data:r});if(s||s===0){a+=s}a+="\n    ";s=n["if"].call(t,t&&t.iconClass,{hash:{},inverse:c.noop,fn:c.program(8,_,r),data:r});if(s||s===0){a+=s}a+="\n</span>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression;a+='\n<i class="icondefault ';if(o=n.iconClass){s=o.call(t,{hash:{},data:r})}else{o=t&&t.iconClass;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+" ";if(o=n.additionalClass){s=o.call(t,{hash:{},data:r})}else{o=t&&t.additionalClass;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'"></i>\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 249 28" version="1.1" y="0px" x="0px" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 249 28">\n<g fill="#b9bec6" class="copyright-logo__svg-color">\n	<g>\n		<path d="m14.699 9.616c-0.601 0.237-1.583 0.237-2.181 0l-10.825-4.288c-0.599-0.237-0.599-0.626 0-0.864l10.825-4.286c0.598-0.237 1.58-0.237 2.181 0l10.824 4.286c0.599 0.238 0.599 0.626 0 0.864l-10.824 4.288z"/>\n		<path d="m13.006 27.182c0 0.646-0.49 0.978-1.091 0.743l-10.824-4.287c-0.6-0.238-1.091-0.958-1.091-1.605v-15.031c0-0.644 0.491-0.978 1.091-0.74l10.825 4.287c0.6 0.237 1.091 0.959 1.091 1.605v15.028z"/>\n		<path d="m14.208 27.177c0 0.646 0.491 0.978 1.092 0.742l10.823-4.286c0.6-0.238 1.091-0.96 1.091-1.605v-15.029c0-0.645-0.49-0.98-1.091-0.742l-10.823 4.286c-0.601 0.238-1.092 0.961-1.092 1.605v15.029z"/>\n	</g>\n	<g>\n		<path d="m207.26 5.385c3.006 0 5.05 0.446 6.136 1.34 1.098 0.893 1.642 2.519 1.642 4.882 0 1.641-0.249 2.862-0.725 3.66-0.487 0.796-1.298 1.336-2.443 1.6 1.005 0.241 1.76 0.662 2.259 1.263 0.503 0.604 0.76 1.382 0.76 2.345v3.857h-5.818v-2.868c0-0.744-0.176-1.258-0.52-1.54-0.355-0.27-1.051-0.417-2.088-0.417h-8.609v4.825h-5.803v-18.947h15.2zm-0.22 4.724h-9.185v4.646h9.185c0.775 0 1.309-0.183 1.616-0.542 0.309-0.362 0.47-1.015 0.47-1.966 0-0.746-0.165-1.293-0.495-1.631-0.34-0.343-0.87-0.507-1.6-0.507z"/>\n		<path d="m36.389 18.012l5.706-0.008v0.343c0 0.723 0.176 1.217 0.527 1.461 0.351 0.255 1.086 0.382 2.206 0.382h7.268c0.714 0 1.224-0.124 1.531-0.362 0.304-0.242 0.452-0.647 0.452-1.209 0-0.567-0.171-0.983-0.525-1.223-0.35-0.251-1.111-0.411-2.276-0.501l-9.094-0.203c-2.28-0.069-3.819-0.499-4.622-1.294-0.802-0.798-1.2-2.26-1.2-4.361 0-1.084 0.104-1.975 0.313-2.682 0.212-0.699 0.554-1.292 1.024-1.759 0.549-0.524 1.271-0.896 2.167-1.115 0.899-0.226 2.352-0.332 4.367-0.332h8.826c2.183 0 3.76 0.395 4.725 1.191 0.96 0.801 1.438 2.088 1.438 3.879 0 0.119 0 0.247-0.003 0.383-0.002 0.133-0.013 0.353-0.043 0.658h-5.569v-0.076c0-0.622-0.156-1.083-0.474-1.394-0.322-0.311-0.793-0.463-1.433-0.463h-6.67c-1.108 0-1.841 0.109-2.196 0.328-0.358 0.219-0.536 0.61-0.536 1.154 0 0.542 0.162 0.933 0.483 1.178 0.321 0.237 0.916 0.392 1.786 0.462l9.512 0.153c2.171 0.06 3.696 0.549 4.58 1.464 0.892 0.917 1.329 2.485 1.329 4.697 0 1.317-0.162 2.338-0.485 3.056-0.328 0.727-0.879 1.336-1.651 1.844-0.512 0.328-1.199 0.555-2.072 0.696-0.869 0.141-2.143 0.211-3.789 0.211h-7.71c-3.17 0-5.289-0.357-6.361-1.069-1.069-0.712-1.607-2.037-1.607-3.969 0-0.121 0.009-0.305 0.02-0.561 0.011-0.261 0.033-0.581 0.056-0.959z"/>\n		<path d="m61.994 5.385h5.773v11.235c0 1.277 0.287 2.136 0.868 2.571 0.585 0.441 1.847 0.658 3.8 0.658h3.29c1.625 0 2.711-0.233 3.265-0.696 0.553-0.463 0.825-1.304 0.825-2.533v-11.235h5.808v13.025c0 2.239-0.607 3.823-1.802 4.759-1.203 0.926-3.284 1.399-6.248 1.399h-6.468c-3.47 0-5.858-0.445-7.159-1.335-1.308-0.896-1.951-2.502-1.951-4.824v-13.024z"/>\n		<path d="m106.02 12.193v-0.052c0-0.855-0.258-1.446-0.789-1.762-0.528-0.319-1.71-0.478-3.56-0.478h-3.376c-1.973 0-3.239 0.236-3.798 0.709-0.554 0.475-0.834 1.47-0.834 2.992v2.645c0 1.362 0.314 2.304 0.938 2.808 0.635 0.508 1.871 0.76 3.724 0.76h3.346c1.662 0 2.802-0.147 3.436-0.449 0.623-0.3 0.941-0.816 0.941-1.559 0-0.102-0.014-0.269-0.051-0.51v-0.058h-6.808v-3.842h12.849v6.226c0 1.794-0.669 3.066-1.989 3.814-1.322 0.754-3.618 1.132-6.903 1.132h-6.44c-1.974 0-3.428-0.108-4.372-0.319-0.936-0.215-1.735-0.578-2.388-1.091-0.764-0.599-1.324-1.337-1.67-2.225-0.342-0.878-0.521-1.991-0.521-3.331v-5.181c0-2.704 0.645-4.602 1.929-5.668 1.281-1.073 3.615-1.607 6.997-1.607h6.465c2.093 0 3.637 0.095 4.63 0.277 0.992 0.188 1.773 0.497 2.346 0.943 0.593 0.457 1.035 1.069 1.32 1.844 0.287 0.773 0.424 1.749 0.424 2.91v0.651c-0.011 0.153-0.015 0.292-0.023 0.42h-5.83z"/>\n		<path d="m118.21 24.331h-6.32l10.36-18.946h7.39l10.165 18.946h-6.357l-1.841-3.156h-11.552l-1.84 3.156zm4.04-7.708h7.287l-3.679-6.706-3.61 6.706z"/>\n		<path d="m155.71 5.385c3.006 0 5.059 0.446 6.144 1.34 1.086 0.893 1.633 2.519 1.633 4.882 0 1.641-0.24 2.862-0.728 3.66-0.49 0.796-1.3 1.336-2.434 1.6 1.002 0.241 1.753 0.662 2.257 1.263 0.504 0.604 0.751 1.382 0.751 2.345v3.857h-5.8v-2.868c0-0.744-0.182-1.258-0.531-1.54-0.348-0.27-1.044-0.417-2.085-0.417h-8.613v4.825h-5.803v-18.947h15.2zm-0.21 4.724h-9.193v4.646h9.193c0.774 0 1.312-0.183 1.622-0.542 0.311-0.362 0.455-1.015 0.455-1.966 0-0.746-0.16-1.293-0.494-1.631-0.33-0.343-0.86-0.507-1.59-0.507z"/>\n		<path d="m183.99 12.24v-0.191c0-0.735-0.242-1.281-0.731-1.627-0.49-0.348-1.263-0.522-2.321-0.522h-4.63c-1.982 0-3.252 0.24-3.822 0.716-0.563 0.482-0.844 1.489-0.844 3.016v2.614c0 1.362 0.316 2.304 0.944 2.808 0.626 0.508 1.873 0.76 3.722 0.76h3.359c1.838 0 3.047-0.183 3.618-0.553 0.572-0.369 0.861-1.059 0.861-2.057v-0.208h5.869c0 0.022 0.005 0.072 0.005 0.134 0.034 0.558 0.047 0.971 0.047 1.245 0 1.218-0.158 2.222-0.461 3.02-0.3 0.791-0.789 1.423-1.433 1.893-0.62 0.466-1.443 0.789-2.481 0.983-1.029 0.203-2.544 0.298-4.532 0.298h-6.46c-1.982 0-3.437-0.108-4.372-0.319-0.938-0.215-1.733-0.578-2.398-1.091-0.767-0.599-1.319-1.342-1.667-2.227-0.347-0.882-0.522-1.989-0.522-3.336v-5.126c0-2.728 0.654-4.625 1.938-5.705 1.293-1.084 3.631-1.618 7.022-1.618h6.46c2.075 0 3.608 0.095 4.596 0.277 0.978 0.193 1.755 0.503 2.322 0.955 0.606 0.45 1.045 1.076 1.339 1.855 0.283 0.782 0.42 1.765 0.42 2.933v0.649c-0.005 0.153-0.023 0.293-0.038 0.423h-5.82z"/>\n		<path d="m223.09 24.331h-5.637v-18.946h8.557l6.759 11.828 6.88-11.828h8.429v18.946h-5.602v-13.502l-7.832 13.502h-3.786l-7.767-13.502v13.502z"/>\n	</g>\n</g>\n</svg>\n';

})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function",f=this;function h(e,t,i){var r="",a,s;r+="\n                "+c((a=n.field||i&&i.field,s={hash:{},data:t},a?a.call(e,i,s):u.call(e,"field",i,s)))+"\n            ";return r}function p(e,t){return"show-attribution"}function m(e,t){var i="",r,a;i+='\n                    <p class="about__legal">\n                        ';if(a=n._trademark2Text){r=a.call(e,{hash:{},data:t})}else{a=e&&e._trademark2Text;r=typeof a===d?a.call(e,{hash:{},data:t}):a}i+=c(r)+"\n                    </p>\n                ";return i}function _(e,t){var i="",r,a;i+='\n                <div class="box__copyright">\n                    <span class="copyright__text">powered by</span>\n                    <span class="copyright__logo">\n                        '+c((r=n.partial||e&&e.partial,a={hash:{},data:t},r?r.call(e,"sugarcrm-copyright-logo",e,a):u.call(e,"partial","sugarcrm-copyright-logo",e,a)))+"\n                    </span>\n                </div>\n            ";return i}a+='\n<div class="box__edit box__edit_readonly page__about">\n    <div class="scroll">\n        <div class="pad">\n\n            ';s=n.each.call(t,t&&t.displayFields,{hash:{},inverse:f.noop,fn:f.programWithDepth(1,h,r,t),data:r});if(s||s===0){a+=s}a+='\n\n\n            <div class="control-group tcenter ';s=n["if"].call(t,t&&t.showAttribution,{hash:{},inverse:f.noop,fn:f.program(3,p,r),data:r});if(s||s===0){a+=s}a+='">\n                <p class="about__legal">\n                    <a href="'+c((o=n.fieldValue||t&&t.fieldValue,l={hash:{},data:r},o?o.call(t,t&&t.model,"privacy",l):u.call(t,"fieldValue",t&&t.model,"privacy",l)))+'" track="click:privacy">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LNK_PRIVACY_POLICY",l):u.call(t,"str","LNK_PRIVACY_POLICY",l)))+'</a>,\n                    <a href="'+c((o=n.fieldValue||t&&t.fieldValue,l={hash:{},data:r},o?o.call(t,t&&t.model,"tos",l):u.call(t,"fieldValue",t&&t.model,"tos",l)))+'" track="click:tos">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LNK_TERMS_OF_USE",l):u.call(t,"str","LNK_TERMS_OF_USE",l)))+'</a>,\n                    <a href="'+c((o=n.fieldValue||t&&t.fieldValue,l={hash:{},data:r},o?o.call(t,t&&t.model,"thirdPartySoftware",l):u.call(t,"fieldValue",t&&t.model,"thirdPartySoftware",l)))+'" track="click:thirdPartySoftware">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LNK_THIRD_PARTY_SOFTWARE",l):u.call(t,"str","LNK_THIRD_PARTY_SOFTWARE",l)))+'</a>\n                </p>\n                <p class="about__legal">\n                    ';if(o=n._copyrightText){s=o.call(t,{hash:{},data:r})}else{o=t&&t._copyrightText;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'\n                </p>\n                <p class="about__legal">\n                    ';if(o=n._trademarkText){s=o.call(t,{hash:{},data:r})}else{o=t&&t._trademarkText;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+"\n                </p>\n                ";s=n["if"].call(t,t&&t._displayTrademarks,{hash:{},inverse:f.noop,fn:f.program(5,m,r),data:r});if(s||s===0){a+=s}a+="\n            </div>\n\n            ";s=n["if"].call(t,t&&t.showAttribution,{hash:{},inverse:f.noop,fn:f.program(7,_,r),data:r});if(s||s===0){a+=s}a+="\n\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression,c=n.helperMissing,d=this;function f(e,t){var i="",r,a,s;i+='\n      <div data-index="'+u((r=t==null||t===false?t:t.index,typeof r===l?r.apply(e):r))+'" class="item fast-click-highlighted" '+u((a=n["debug-attributes"]||e&&e["debug-attributes"],s={hash:{},data:t},a?a.call(e,"attribute","label",e,s):c.call(e,"debug-attributes","attribute","label",e,s)))+">"+u(typeof e===l?e.apply(e):e)+"</div>\n      ";return i}a+='\n<div class="popup invisible">\n\n    <div class="header">';if(o=n.title){s=o.call(t,{hash:{},data:r})}else{o=t&&t.title;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'</div>\n\n    <div class="items">\n      ';s=n.each.call(t,t&&t.items,{hash:{},inverse:d.noop,fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+='\n    </div>\n\n    <div class="footer" style="margin-top: 10px;">\n        <a href="javascript:void(0)" class="cancel fast-click-highlighted">';if(o=n.cancelText){s=o.call(t,{hash:{},data:r})}else{o=t&&t.cancelText;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+"</a>\n    </div>\n\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d=this;function f(e,t){var i="",r,a;i+="\n    "+c((r=n.icon||e&&e.icon,a={hash:{additionalClass:"close-icon"},data:t},r?r.call(e,"alert.close",a):u.call(e,"icon","alert.close",a)))+"\n";return i}function h(e,t){var i="",r,a;i+="\n    "+c((r=n.partial||e&&e.partial,a={hash:{},data:t},r?r.call(e,"spinner",e,a):u.call(e,"partial","spinner",e,a)))+"\n";return i}function p(e,t){var i="",r,a;i+=c((r=n.nl2br||e&&e.nl2br,a={hash:{},data:t},r?r.call(e,e,a):u.call(e,"nl2br",e,a)))+"\n    ";return i}a+="\n";s=n["if"].call(t,t&&t.closeable,{hash:{},inverse:d.noop,fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n";s=(o=n.eq||t&&t.eq,l={hash:{},inverse:d.noop,fn:d.program(3,h,r),data:r},o?o.call(t,t&&t.level,"load",l):u.call(t,"eq",t&&t.level,"load",l));if(s||s===0){a+=s}a+='\n\n<strong class="message">\n    ';s=n.each.call(t,t&&t.messages,{hash:{},inverse:d.noop,fn:d.program(5,p,r),data:r});if(s||s===0){a+=s}a+="\n</strong>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d=this;function f(e,t){var i="",r,a,s;i+='\n        <div class="bulkload__form">\n            <div class="control-group">\n                <label class="control-label">'+c((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_BULK_LOAD_USE_CELLULAR",s):u.call(e,"str","LBL_BULK_LOAD_USE_CELLULAR",s)))+'</label>\n                <div class="controls">\n                    <input type="checkbox" class="checkbox_custom"';r=n["if"].call(e,e&&e.useCellularData,{hash:{},inverse:d.noop,fn:d.program(2,h,t),data:t});if(r||r===0){i+=r}i+=">\n                    ";r=n["if"].call(e,e&&e.allowCellular,{hash:{},inverse:d.program(6,m,t),fn:d.program(4,p,t),data:t});if(r||r===0){i+=r}i+='\n                </div>\n                <div class="bulkload__connect-message">'+c((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_BULK_LOAD_CONNECTION_USE_MESSAGE",s):u.call(e,"str","LBL_BULK_LOAD_CONNECTION_USE_MESSAGE",s)))+"</div>\n            </div>\n        </div>\n    ";return i}function h(e,t){return" checked"}function p(e,t){var i="",r,a;i+="\n                        "+c((r=n.icon||e&&e.icon,a={hash:{additionalClass:"checkbox-icon"},data:t},r?r.call(e,"edit.checkboxOn",a):u.call(e,"icon","edit.checkboxOn",a)))+"\n                    ";return i}function m(e,t){var i="",r,a;i+="\n                        "+c((r=n.icon||e&&e.icon,a={hash:{additionalClass:"checkbox-icon"},data:t},r?r.call(e,"edit.checkboxOff",a):u.call(e,"icon","edit.checkboxOff",a)))+"\n                    ";return i}a+='\n<div class="scroll">\n<div class="pad">\n    <div class="bulkload__title">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_BULK_LOAD_OFFLINE_RECORDS",l):u.call(t,"str","LBL_BULK_LOAD_OFFLINE_RECORDS",l)))+'</div>\n    <div class="bulkload__message">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_BULK_LOAD_PREFETCH_MESSAGE",l):u.call(t,"str","LBL_BULK_LOAD_PREFETCH_MESSAGE",l)))+"</div>\n\n    ";s=n["if"].call(t,t&&t.shouldShowCellularCheckbox,{hash:{},inverse:d.noop,fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+='\n\n    <div class="bulkload__btns">\n        <a class="btn btn-primary btn-download" data-id="ok">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_BULK_LOAD_BTN_DOWNLOAD",l):u.call(t,"str","LBL_BULK_LOAD_BTN_DOWNLOAD",l)))+'</a>\n        <a class="btn btn-cancel" data-id="cancel">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_BULK_LOAD_NOT_RIGHT_NOW",l):u.call(t,"str","LBL_BULK_LOAD_NOT_RIGHT_NOW",l)))+"</a>\n    </div>\n</div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression;a+='\n<div class="';if(o=n.switcherCss){s=o.call(t,{hash:{},data:r})}else{o=t&&t.switcherCss;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'"></div>\n<div class="';if(o=n.viewContainerCss){s=o.call(t,{hash:{},data:r})}else{o=t&&t.viewContainerCss;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'"></div>\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression;a+='\n<div class="tabs__bar tabs__bar--dd">\n    <div class="filter">\n        '+u((s=n.fieldByName||t&&t.fieldByName,o={hash:{template:"edit"},data:r},s?s.call(t,t&&t.ddSwitcher,t,o):l.call(t,"fieldByName",t&&t.ddSwitcher,t,o)))+"\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression;a+="\n"+u((s=n.icon||t&&t.icon,o={hash:{additionalClass:"prev"},data:r},s?s.call(t,"swiper.prev",o):l.call(t,"icon","swiper.prev",o)))+"\n"+u((s=n.icon||t&&t.icon,o={hash:{additionalClass:"next"},data:r},s?s.call(t,"swiper.next",o):l.call(t,"icon","swiper.next",o)))+'\n<div class="pagination"></div>\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=this;function c(e,t,i){var r="",a,s;r+='\n        <li data-tab-index="';if(s=n.index){a=s.call(e,{hash:{},data:t})}else{s=e&&e.index;a=typeof s===o?s.call(e,{hash:{},data:t}):s}r+=l(a)+'" class="tab fast-click-highlighted">\n            <div class="tab__title">\n                <span class="title">';if(s=n.title){a=s.call(e,{hash:{},data:t})}else{s=e&&e.title;a=typeof s===o?s.call(e,{hash:{},data:t}):s}r+=l(a)+'</span>\n                <span class="'+l((a=i&&i.subtextCss,typeof a===o?a.apply(e):a))+' hide"></span>\n            </div>\n        </li>\n    ';return r}a+='\n<ul class="tabs__bar">\n    ';s=n.each.call(t,t&&t.tabs,{hash:{},inverse:u.noop,fn:u.programWithDepth(1,c,r,t),data:r});if(s||s===0){a+=s}a+="\n</ul>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=n.helperMissing,l=this.escapeExpression,u=this;function c(e,t,i){var r="",a;r+="\n        ";a=n["if"].call(e,e&&e.isFollow,{hash:{},inverse:u.programWithDepth(4,f,t,i),fn:u.programWithDepth(2,d,t,i),data:t});if(a||a===0){r+=a}r+="\n    ";return r}function d(e,t,i){var r="",a,s;r+='\n            <a href="javascript:void(0)" class="context-menu__item follow-item fast-click-highlighted" action="follow" track="click:c-follow" style='+l((a=n.ternary||i&&i.ternary,s={hash:{},data:t},a?a.call(e,i&&i.following,"display:none;","",s):o.call(e,"ternary",i&&i.following,"display:none;","",s)))+">"+l((a=n.icon||i&&i.icon,s={hash:{},data:t},a?a.call(e,"actions.unfollow",s):o.call(e,"icon","actions.unfollow",s)))+"<br>"+l((a=n.str||i&&i.str,s={hash:{},data:t},a?a.call(e,"LBL_FOLLOW",s):o.call(e,"str","LBL_FOLLOW",s)))+'</a>\n            <a href="javascript:void(0)" class="context-menu__item unfollow-item fast-click-highlighted" action="follow" track="click:c-unfollow" style='+l((a=n.ternary||i&&i.ternary,s={hash:{},data:t},a?a.call(e,i&&i.following,"","display:none;",s):o.call(e,"ternary",i&&i.following,"","display:none;",s)))+">"+l((a=n.icon||i&&i.icon,s={hash:{},data:t},a?a.call(e,"actions.follow",s):o.call(e,"icon","actions.follow",s)))+"<br>"+l((a=n.str||i&&i.str,s={hash:{},data:t},a?a.call(e,"LBL_UNFOLLOW",s):o.call(e,"str","LBL_UNFOLLOW",s)))+"</a>\n        ";return r}function f(e,t,i){var r="",a;r+="\n        ";a=n["if"].call(e,e&&e.isFavorite,{hash:{},inverse:u.program(7,p,t),fn:u.programWithDepth(5,h,t,i),data:t});if(a||a===0){r+=a}r+="\n        ";return r}function h(e,t,i){var r="",a,s;r+='\n            <a href="javascript:void(0)" class="context-menu__item favorite-item fast-click-highlighted" action="favorite" track="click:c-favorite" style='+l((a=n.ternary||i&&i.ternary,s={hash:{},data:t},a?a.call(e,i&&i.myFavorite,"display:none;","",s):o.call(e,"ternary",i&&i.myFavorite,"display:none;","",s)))+">"+l((a=n.icon||i&&i.icon,s={hash:{},data:t},a?a.call(e,"actions.unfavorite",s):o.call(e,"icon","actions.unfavorite",s)))+"<br>"+l((a=n.str||i&&i.str,s={hash:{},data:t},a?a.call(e,"LBL_FAVORITE",s):o.call(e,"str","LBL_FAVORITE",s)))+'</a>\n            <a href="javascript:void(0)" class="context-menu__item unfavorite-item fast-click-highlighted" action="favorite" track="click:c-unfavorite" style='+l((a=n.ternary||i&&i.ternary,s={hash:{},data:t},a?a.call(e,i&&i.myFavorite,"","display:none;",s):o.call(e,"ternary",i&&i.myFavorite,"","display:none;",s)))+">"+l((a=n.icon||i&&i.icon,s={hash:{},data:t},a?a.call(e,"actions.favorite",s):o.call(e,"icon","actions.favorite",s)))+"<br>"+l((a=n.str||i&&i.str,s={hash:{},data:t},a?a.call(e,"LBL_UNFAVORITE",s):o.call(e,"str","LBL_UNFAVORITE",s)))+"</a>\n        ";return r}function p(e,t){var i="",r,a;i+="\n            "+l((r=n.partial||e&&e.partial,a={hash:{},data:t},r?r.call(e,"record-action-button",e,a):o.call(e,"partial","record-action-button",e,a)))+"\n        ";return i}function m(e,t){var i="",r,a;i+='\n        <a class="no-options">'+l((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_MOBILE_NO_ACTIONS_AVAILABLE",a):o.call(e,"str","LBL_MOBILE_NO_ACTIONS_AVAILABLE",a)))+"</a>\n    ";return i}a+='\n<div class="actions box__context-menu">\n    ';s=n.each.call(t,t&&t.contextMenuItems,{hash:{},inverse:u.noop,fn:u.programWithDepth(1,c,r,t),data:r});if(s||s===0){a+=s}a+="\n    ";s=n["if"].call(t,t&&t.isEmptyMenu,{hash:{},inverse:u.noop,fn:u.program(9,m,r),data:r});if(s||s===0){a+=s}a+="\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing,f=this;function h(e,t){var i="",r,a,s;i+='\n                <div class="dashlets__list__col">\n                    <div class="dashlet__item fast-click-highlighted c-'+c((r=(r=(r=(r=e&&e.value,r==null||r===false?r:r.meta),r==null||r===false?r:r.view),r==null||r===false?r:r.type),typeof r===u?r.apply(e):r))+'" data-dashlet-index='+c((r=(r=e&&e.value,r==null||r===false?r:r.index),typeof r===u?r.apply(e):r))+" data-dashlet-index="+c((r=(r=e&&e.value,r==null||r===false?r:r.index),typeof r===u?r.apply(e):r))+'>\n                        <div class="dashlet__title">'+c((r=(r=e&&e.value,r==null||r===false?r:r.title),typeof r===u?r.apply(e):r))+'</div>\n                        <div class="dashlet__icon">'+c((a=n.icon||e&&e.icon,s={hash:{},data:t},a?a.call(e,(r=e&&e.value,r==null||r===false?r:r.icon),s):d.call(e,"icon",(r=e&&e.value,r==null||r===false?r:r.icon),s)))+"</div>\n                    </div>\n                </div>\n            ";return i}function p(e,t){var n="",i;n+='\n                <div class="dashlet__b" data-dashlet-index='+c((i=(i=e&&e.value,i==null||i===false?i:i.index),typeof i===u?i.apply(e):i))+" data-dashlet-index="+c((i=(i=e&&e.value,i==null||i===false?i:i.index),typeof i===u?i.apply(e):i))+"></div>\n            ";return n}a+='\n<div class="dashboard-container">\n    <div class="dashboard">\n\n        <div class="dashlets__list">\n            ';s=(o=n.iterate||t&&t.iterate,l={hash:{},inverse:f.noop,fn:f.program(1,h,r),data:r},o?o.call(t,t&&t._dashlets,l):d.call(t,"iterate",t&&t._dashlets,l));if(s||s===0){a+=s}a+='\n        </div>\n        <div class="dashlets__title">';if(o=n.subtitle){s=o.call(t,{hash:{},data:r})}else{o=t&&t.subtitle;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</div>\n        <div class="dashlets__slider-area">\n            <div class="dashlets__slider">\n            ';s=(o=n.iterate||t&&t.iterate,l={hash:{},inverse:f.noop,fn:f.program(3,p,r),data:r},o?o.call(t,t&&t._dashlets,l):d.call(t,"iterate",t&&t._dashlets,l));if(s||s===0){a+=s}a+="\n            </div>\n        </div>\n\n    </div>\n    <!--div.dashboard-container is required for pagination to be rendered here-->\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d=this,f="function",h=n.blockHelperMissing;function p(e,t){var i="",r,a,s;i+="\n        ";s={hash:{},inverse:d.noop,fn:d.programWithDepth(2,m,t,e),data:t};if(a=n.avatarField){r=a.call(e,s)}else{a=e&&e.avatarField;r=typeof a===f?a.call(e,s):a}if(!n.avatarField){r=h.call(e,r,{hash:{},inverse:d.noop,fn:d.programWithDepth(2,m,t,e),data:t})}if(r||r===0){i+=r}i+="\n    ";return i}function m(e,t,i){var r,a;return c((r=n.field||i&&i.field,a={hash:{},data:t},r?r.call(e,i,a):u.call(e,"field",i,a)))}function _(e,t){var i="",r,a;i+="\n        "+c((r=n.iconModule||e&&e.iconModule,a={hash:{},data:t},r?r.call(e,e&&e.module,a):u.call(e,"iconModule",e&&e.module,a)))+"\n    ";return i}function g(e,t){return"followable"}function v(e,t,i){var r="",a,s;r+="\n                "+c((a=n.field||i&&i.field,s={hash:{},data:t},a?a.call(e,i,s):u.call(e,"field",i,s)))+"\n            ";return r}function y(e,t){var i="",r,a;i+="\n            "+c((r=n.fieldByName||e&&e.fieldByName,a={hash:{},data:t},r?r.call(e,"following",e,a):u.call(e,"fieldByName","following",e,a)))+"\n        ";return i}a+='\n<div class="bizcard noactions icon-inside">\n    ';s=n["if"].call(t,t&&t.avatarField,{hash:{},inverse:d.program(4,_,r),fn:d.program(1,p,r),data:r});if(s||s===0){a+=s}a+='\n    <div class="more ';s=n["if"].call(t,t&&t.isFollowable,{hash:{},inverse:d.noop,fn:d.program(6,g,r),data:r});if(s||s===0){a+=s}a+='">\n        <div class="card">\n            <a class="title show-edit-view">\n                ';l={hash:{},inverse:d.noop,fn:d.programWithDepth(2,m,r,t),data:r};if(o=n.headerField){s=o.call(t,l)}else{o=t&&t.headerField;s=typeof o===f?o.call(t,l):o}if(!n.headerField){s=h.call(t,s,{hash:{},inverse:d.noop,fn:d.programWithDepth(2,m,r,t),data:r})}if(s||s===0){a+=s}a+="\n            </a>\n\n            ";s=n.each.call(t,t&&t.displayFields,{hash:{},inverse:d.noop,fn:d.programWithDepth(8,v,r,t),data:r});if(s||s===0){a+=s}a+="\n\n        </div>\n        "+c((o=n.fieldByName||t&&t.fieldByName,l={hash:{},data:r},o?o.call(t,"my_favorite",t,l):u.call(t,"fieldByName","my_favorite",t,l)))+"\n        ";s=n["if"].call(t,t&&t.isFollowable,{hash:{},inverse:d.noop,fn:d.program(10,y,r),data:r});if(s||s===0){a+=s}a+='\n        <a class="fast-click-highlighted goedit-icon show-edit-view">'+c((o=n.icon||t&&t.icon,l={hash:{},data:r},o?o.call(t,"detail.goEdit",l):u.call(t,"icon","detail.goEdit",l)))+'</a>\n        <span class="show-more">\n            '+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"icon__show-more"},data:r},o?o.call(t,"detail.showMore",l):u.call(t,"icon","detail.showMore",l)))+"\n            "+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"icon__hide-more"},data:r},o?o.call(t,"detail.hideMore",l):u.call(t,"icon","detail.hideMore",l)))+'\n        </span>\n    </div>\n    <div class="box__record-action"></div>\n</div>\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing,f=this;function h(e,t){var i="",r,a,s;i+='\n                <div class="control-group error">\n                    <label class="control-label">Error count:</label>\n                    <div class="controls readonly-item clip">\n                        '+c((r=(r=(r=e&&e.model,r==null||r===false?r:r.attributes),r==null||r===false?r:r._tx_error_count),typeof r===u?r.apply(e):r))+'\n                    </div>\n                </div>\n\n                <div class="control-group">\n                    <label class="control-label">Error Description:</label>\n                    <div class="controls readonly-item clip">\n                        '+c((a=n.getErrorDescription||e&&e.getErrorDescription,s={hash:{},data:t},a?a.call(e,(r=(r=e&&e.model,r==null||r===false?r:r.attributes),r==null||r===false?r:r._tx_error),s):d.call(e,"getErrorDescription",(r=(r=e&&e.model,r==null||r===false?r:r.attributes),r==null||r===false?r:r._tx_error),s)))+"\n                    </div>\n                </div>\n            ";return i}function p(e,t){var n="",i;n+='\n                <div class="control-group">\n                    <label class="control-label">Link:</label>\n                    <div class="controls readonly-item clip">\n                        '+c((i=(i=(i=e&&e.model,i==null||i===false?i:i.attributes),i==null||i===false?i:i._tx_link),typeof i===u?i.apply(e):i))+"\n                    </div>\n                </div>\n            ";return n}function m(e,t){var i="",r,a,s;i+="\n\n                ";r=(a=n.iterate||e&&e.iterate,s={hash:{},inverse:f.noop,fn:f.programWithDepth(6,_,t,e),data:t},a?a.call(e,e&&e.updatedFields,s):d.call(e,"iterate",e&&e.updatedFields,s));if(r||r===0){i+=r}i+="\n\n            ";return i}function _(e,t,i){var r="",a,s,o;r+='\n                    <div class="control-group">\n                        <label class="control-label">'+c((s=n.str||e&&e.str,o={hash:{},data:t},s?s.call(e,(a=e&&e.value,a==null||a===false?a:a.vname),(a=(a=i&&i.model,a==null||a===false?a:a.attributes),a==null||a===false?a:a._tx_bean_module),o):d.call(e,"str",(a=e&&e.value,a==null||a===false?a:a.vname),(a=(a=i&&i.model,a==null||a===false?a:a.attributes),a==null||a===false?a:a._tx_bean_module),o)))+":</label>\n                        ";a=n["with"].call(e,e&&e.value,{hash:{},inverse:f.noop,fn:f.program(7,g,t),data:t});if(a||a===0){r+=a}r+="\n                    </div>\n                ";return r}function g(e,t){var i="",r;i+='\n                            <div class="controls readonly-item clip">\n                                ';r=n["if"].call(e,e&&e.before,{hash:{},inverse:f.noop,fn:f.program(8,v,t),data:t});if(r||r===0){i+=r}i+="\n                                ";r=n["if"].call(e,(r=e&&e.after,r==null||r===false?r:r.el),{hash:{},inverse:f.program(15,w,t),fn:f.program(13,x,t),data:t});if(r||r===0){i+=r}i+="\n                            </div>\n                        ";return i}function v(e,t){var i="",r;i+="\n                                    ";r=n["if"].call(e,(r=e&&e.before,r==null||r===false?r:r.el),{hash:{},inverse:f.program(11,b,t),fn:f.program(9,y,t),data:t});if(r||r===0){i+=r}i+="\n                                ";return i}function y(e,t){var n="",i;n+='\n                                        <span class="line-through">';i=(i=(i=(i=e&&e.before,i==null||i===false?i:i.el),i==null||i===false?i:i.innerHTML),typeof i===u?i.apply(e):i);if(i||i===0){n+=i}n+="</span><br />\n                                    ";return n}function b(e,t){var i="",r,a;i+='\n                                        <span class="line-through">';if(a=n.before){r=a.call(e,{hash:{},data:t})}else{a=e&&e.before;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+"</span><br />\n                                    ";return i}function x(e,t){var n="",i;n+="\n                                    ";i=(i=(i=(i=e&&e.after,i==null||i===false?i:i.el),i==null||i===false?i:i.innerHTML),typeof i===u?i.apply(e):i);if(i||i===0){n+=i}n+="<br />\n                                ";return n}function w(e,t){var i="",r,a;i+="\n                                    ";if(a=n.after){r=a.call(e,{hash:{},data:t})}else{a=e&&e.after;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+"<br />\n                                ";return i}a+='\n<div class="box__edit box__edit_readonly">\n    <div class="scroll">\n        <div class="pad">\n\n            ';s=n["if"].call(t,(s=(s=t&&t.model,s==null||s===false?s:s.attributes),s==null||s===false?s:s._tx_error_count),{hash:{},inverse:f.noop,fn:f.program(1,h,r),data:r});if(s||s===0){a+=s}a+='\n\n            <div class="control-group">\n                <label class="control-label">Summary:</label>\n                <div class="controls readonly-item line-clamp">\n                    ';if(o=n.getTxLogActionExplanation){s=o.call(t,{hash:{},data:r})}else{o=t&&t.getTxLogActionExplanation;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'\n                </div>\n            </div>\n\n            <div class="control-group">\n                <label class="control-label">Action:</label>\n                <div class="controls readonly-item clip">\n                    '+c((o=n.getTxLogActionName||t&&t.getTxLogActionName,l={hash:{},data:r},o?o.call(t,(s=(s=t&&t.model,s==null||s===false?s:s.attributes),s==null||s===false?s:s._tx_action),l):d.call(t,"getTxLogActionName",(s=(s=t&&t.model,s==null||s===false?s:s.attributes),s==null||s===false?s:s._tx_action),l)))+'\n                </div>\n            </div>\n\n            <div class="control-group">\n                <label class="control-label">Module:</label>\n                <div class="controls readonly-item clip">\n                    ';if(o=n.getTxLogModuleName){s=o.call(t,{hash:{},data:r})}else{o=t&&t.getTxLogModuleName;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+"\n                </div>\n            </div>\n\n            ";s=n["if"].call(t,(s=t&&t.updatedFields,s==null||s===false?s:s.link),{hash:{},inverse:f.program(5,m,r),fn:f.program(3,p,r),data:r});if(s||s===0){a+=s}a+='\n\n            <div class="edit__footer">\n                <a href="javascript:void(0)" class="btn delete" track="click:delete">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_ROLLBACK_BUTTON",l):d.call(t,"str","LBL_ROLLBACK_BUTTON",l)))+"</a>\n            </div>\n\n\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=n.helperMissing,l=this.escapeExpression,u=this;function c(e,t){return"box__edit_readonly"}function d(e,t,i){var r="",a,s;r+="\n                "+l((a=n.field||i&&i.field,s={hash:{},data:t},a?a.call(e,i,s):o.call(e,"field",i,s)))+"\n            ";return r}a+='\n<div class="box__edit ';s=n["if"].call(t,t&&t.isReadOnly,{hash:{},inverse:u.noop,fn:u.program(1,c,r),data:r});if(s||s===0){a+=s}a+='">\n    <div class="scroll">\n        <div class="pad">\n            ';s=n.each.call(t,t&&t.addressFields,{hash:{},inverse:u.noop,fn:u.programWithDepth(3,d,r,t),data:r});if(s||s===0){a+=s}a+="\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=this;function c(e,t){var n="";n+='\n  <div class="field__error-message">'+l(typeof e===o?e.apply(e):e)+"</div>\n";return n}a+="\n";s=n.each.call(t,t,{hash:{},inverse:u.noop,fn:u.program(1,c,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d=this;function f(e,t){return"box__edit_readonly"}function h(e,t,i){var r="",a,s;r+="\n                "+c((a=n.field||i&&i.field,s={hash:{},data:t},a?a.call(e,i,s):u.call(e,"field",i,s)))+"\n            ";return r}function p(e,t){var i="",r;i+="\n                ";r=n.each.call(e,e&&e.displayFields,{hash:{},inverse:d.noop,fn:d.programWithDepth(6,m,t,e),data:t});if(r||r===0){i+=r}i+="\n            ";return i}function m(e,t,i){var r="",a,s;r+="\n                    "+c((a=n.field||i&&i.field,s={hash:{},data:t},a?a.call(e,i,s):u.call(e,"field",i,s)))+"\n                ";return r}a+='\n<div class="box__edit ';s=n["if"].call(t,t&&t.isReadOnly,{hash:{},inverse:d.noop,fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+='">\n    <div class="scroll">\n        <div class="pad wrapper__clear-field">\n            ';s=n.each.call(t,t&&t.relationshipFields,{hash:{},inverse:d.noop,fn:d.programWithDepth(3,h,r,t),data:r});if(s||s===0){a+=s}a+="\n            ";s=n.unless.call(t,t&&t.onlyRelationshipEdit,{hash:{},inverse:d.noop,fn:d.program(5,p,r),data:r});if(s||s===0){a+=s}a+='\n            <div class="edit__footer">\n                <a href="javascript:void(0)" tabindex="4" class="btn delete hide" track="click:delete">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_DELETE_BUTTON",l):u.call(t,"str","LBL_DELETE_BUTTON",l)))+"</a>\n            </div>\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function";a+='\n<div class="textarea">\n    <div class="scroll">\n        <div class="pad">\n            <div class="email-body-content">\n                ';s=(s=(s=t&&t.options,s==null||s===false?s:s.value),typeof s===o?s.apply(t):s);if(s||s===0){a+=s}a+="\n            </div>\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=this;function l(e,t){return"readonly"}a+='\n<div class="textarea">\n    <div class="scroll">\n        <div class="pad">\n            <textarea ';s=n["if"].call(t,(s=t&&t.options,s==null||s===false?s:s.isReadOnly),{hash:{},inverse:o.noop,fn:o.program(1,l,r),data:r});if(s||s===0){a+=s}a+="></textarea>\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=this,f=n.helperMissing;function h(e,t){var i="",r,a;i+='\n                    <option value="';if(a=n.key){r=a.call(e,{hash:{},data:t})}else{a=e&&e.key;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+'" ';r=n["if"].call(e,e&&e.value,{hash:{},inverse:d.noop,fn:d.program(2,p,t),data:t});if(r||r===0){i+=r}i+=">";if(a=n.key){r=a.call(e,{hash:{},data:t})}else{a=e&&e.key;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+"</option>\n                    ";return i}function p(e,t){return"selected"}function m(e,t,i){var r="",a,s;r+='\n                    <div class="emulation-item">\n                        <div class="error-emulation-check">\n                            <input type="checkbox" class="checkbox_default" data-key="';if(s=n.key){a=s.call(e,{hash:{},data:t})}else{s=e&&e.key;a=typeof s===u?s.call(e,{hash:{},data:t}):s}r+=c(a)+'" data-type="api" ';a=n["if"].call(e,(a=e&&e.value,a==null||a===false?a:a.status),{hash:{},inverse:d.noop,fn:d.program(5,_,t),data:t});if(a||a===0){r+=a}r+="\n                                ";a=n["if"].call(e,(a=e&&e.value,a==null||a===false?a:a.disabled),{hash:{},inverse:d.noop,fn:d.program(7,g,t),data:t});if(a||a===0){r+=a}r+=">";if(s=n.key){a=s.call(e,{hash:{},
data:t})}else{s=e&&e.key;a=typeof s===u?s.call(e,{hash:{},data:t}):s}r+=c(a)+"\n                        </div>\n                        ";a=n["if"].call(e,(a=e&&e.value,a==null||a===false?a:a.crud),{hash:{},inverse:d.noop,fn:d.programWithDepth(9,v,t,i),data:t});if(a||a===0){r+=a}r+="\n                    </div>\n                    ";return r}function _(e,t){return"checked"}function g(e,t){return"disabled"}function v(e,t,i){var r="",a,s;r+='\n                            <select class="error-emulation-select" data-type="crud" data-parent-type="';if(s=n.key){a=s.call(e,{hash:{},data:t})}else{s=e&&e.key;a=typeof s===u?s.call(e,{hash:{},data:t}):s}r+=c(a)+'"\n                                    ';a=n["if"].call(e,i&&i.crudDisabled,{hash:{},inverse:d.noop,fn:d.program(7,g,t),data:t});if(a||a===0){r+=a}r+=">\n                                ";a=n.each.call(e,(a=e&&e.value,a==null||a===false?a:a.crud),{hash:{},inverse:d.noop,fn:d.program(10,y,t),data:t});if(a||a===0){r+=a}r+="\n                            </select>\n                        ";return r}function y(e,t){var i="",r,a;i+='\n                                    <option value="';if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+'" ';r=n["if"].call(e,e&&e.status,{hash:{},inverse:d.noop,fn:d.program(2,p,t),data:t});if(r||r===0){i+=r}i+=">";if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+"</option>\n                                ";return i}function b(e,t){var i="",r,a,s;i+='\n                <li>\n                    <div class="bucket-header">\n                        Offline:\n                    </div>\n                    <div class="content">\n                        ';r=(a=n.iterate||e&&e.iterate,s={hash:{},inverse:d.noop,fn:d.program(13,x,t),data:t},a?a.call(e,e&&e.offlineErrorItems,s):f.call(e,"iterate",e&&e.offlineErrorItems,s));if(r||r===0){i+=r}i+="\n                    </div>\n                </li>\n            ";return i}function x(e,t){var i="",r,a;i+='\n                        <div class="error-emulation-check">\n                            <input type="checkbox" class="checkbox_default" ';r=n["if"].call(e,e&&e.value,{hash:{},inverse:d.noop,fn:d.program(5,_,t),data:t});if(r||r===0){i+=r}i+=' data-key="';if(a=n.key){r=a.call(e,{hash:{},data:t})}else{a=e&&e.key;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+'" data-type="offline">';if(a=n.key){r=a.call(e,{hash:{},data:t})}else{a=e&&e.key;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+"\n                        </div>\n                        ";return i}a+='\n<div class="box__edit page__offline">\n    <div class="scroll">\n        <ul class="listing">\n            <li>\n                <div class="bucket-header">\n                    HTTP:\n                </div>\n\n                <h4>Error to be triggered:</h4>\n                <select class="error-emulation-select" data-type="http">\n                    <option value="default">no error</option>\n                    ';s=(o=n.iterate||t&&t.iterate,l={hash:{},inverse:d.noop,fn:d.program(1,h,r),data:r},o?o.call(t,t&&t.httpErrorItems,l):f.call(t,"iterate",t&&t.httpErrorItems,l));if(s||s===0){a+=s}a+='\n                </select>\n\n                <div class="content">\n                    ';s=(o=n.iterate||t&&t.iterate,l={hash:{},inverse:d.noop,fn:d.programWithDepth(4,m,r,t),data:r},o?o.call(t,t&&t.apiErrorItems,l):f.call(t,"iterate",t&&t.apiErrorItems,l));if(s||s===0){a+=s}a+="\n                </div>\n            </li>\n            ";s=n.unless.call(t,t&&t.offlineDisabled,{hash:{},inverse:d.noop,fn:d.program(12,b,r),data:r});if(s||s===0){a+=s}a+="\n        </ul>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=n.helperMissing,l=this.escapeExpression,u="function",c=this;function d(e,t){var i="",r,a,s;i+="\n\n    "+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"ERR_MOBILE_VIEW_NOT_SUPPORTED",s):o.call(e,"str","ERR_MOBILE_VIEW_NOT_SUPPORTED",s)))+'\n\n    <div class="sugar-back-link">\n        <a id="sugar_url" track="click:desktop" target="_blank" href="';if(a=n.sugarLink){r=a.call(e,{hash:{},data:t})}else{a=e&&e.sugarLink;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=l(r)+'">'+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_MOBILE_DESKTOP","",e&&e.config,s):o.call(e,"str","LBL_MOBILE_DESKTOP","",e&&e.config,s)))+"</a>\n    </div>\n    ";return i}function f(e,t){var i="",r,a,s;i+="\n        Error ";if(a=n.errorCode){r=a.call(e,{hash:{},data:t})}else{a=e&&e.errorCode;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=l(r)+". "+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,e&&e.errorLabel,s):o.call(e,"str",e&&e.errorLabel,s)))+"\n    ";return i}a+='\n<div class="error-message b-vc-w">\n<div class="b-vc">\n    ';s=n["if"].call(t,t&&t.showSugarBackLink,{hash:{},inverse:c.program(3,f,r),fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n</div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=this,l=n.helperMissing,u=this.escapeExpression,c="function";function d(e,t){var i="",r;i+='\n        <span class="filter__item filter__item-main"><a href="javascript:void(0)" class="btn-filter fast-click-highlighted ';r=n["if"].call(e,e&&e.isFilterDDOpened,{hash:{},inverse:o.noop,fn:o.program(2,f,t),data:t});if(r||r===0){i+=r}i+='" track=""></a></span>\n    ';return i}function f(e,t){return"active"}function h(e,t){var i="",r,a;i+='\n        <span class="filter__item filter__item-by"><a href="javascript:void(0)" class="btn-filter fast-click-highlighted" track="">'+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_MOBILE_BY",a):l.call(e,"str","LBL_MOBILE_BY",a)))+': <span class="field-name"></span></a></span>\n        <span class="filter__item filter__item-sort"><a href="javascript:void(0)" class="btn-filter fast-click-highlighted" track="">'+u((r=n.icon||e&&e.icon,a={hash:{},data:t},r?r.call(e,"sorting.asc",a):l.call(e,"icon","sorting.asc",a)))+"</a></span>\n    ";return i}function p(e,t){return"show"}function m(e,t){var i="",r,a,s;i+='\n    <div class="dropdown dropdown__filter ';r=n["if"].call(e,e&&e.isFilterDDOpened,{hash:{},inverse:o.noop,fn:o.program(6,p,t),data:t});if(r||r===0){i+=r}i+='">\n        <ul>\n            ';r=n.each.call(e,e&&e.filters,{hash:{},inverse:o.noop,fn:o.program(9,_,t),data:t});if(r||r===0){i+=r}i+='\n            <li class="filters-preloader"><a><span class="name">'+u((a=n.partial||e&&e.partial,s={hash:{},data:t},a?a.call(e,"spinner",e,s):l.call(e,"partial","spinner",e,s)))+u((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_LOADING",s):l.call(e,"str","LBL_LOADING",s)))+'</span></a></li>\n            <li class="filters-fetching-error fast-click-highlighted">\n                <a class="filters-reload">\n                    <span>'+u((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"ERR_FILTERS_FETCHING",s):l.call(e,"str","ERR_FILTERS_FETCHING",s)))+'</span><br />\n                    <span class="filters-try-again">'+u((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_TRY_AGAIN",s):l.call(e,"str","LBL_TRY_AGAIN",s)))+"</span>\n                </a>\n            </li>\n        </ul>\n    </div>\n";return i}function _(e,t){var i="",r,a,s;i+='\n                <li class="fast-click-highlighted"><a class="';r=n["if"].call(e,e&&e.active,{hash:{},inverse:o.noop,fn:o.program(2,f,t),data:t});if(r||r===0){i+=r}i+='" data-filter-id="';if(a=n.id){r=a.call(e,{hash:{},data:t})}else{a=e&&e.id;r=typeof a===c?a.call(e,{hash:{},data:t}):a}i+=u(r)+'">'+u((a=n.icon||e&&e.icon,s={hash:{additionalClass:"check-icon"},data:t},a?a.call(e,"sorting.checked",s):l.call(e,"icon","sorting.checked",s)))+' <span class="name">';if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===c?a.call(e,{hash:{},data:t}):a}i+=u(r)+"</span></a></li>\n            ";return i}function g(e,t){var i="",r;i+='\n    <div class="dropdown dropdown__sortBy">\n        <ul>\n        ';r=n.each.call(e,e&&e.sortableFields,{hash:{},inverse:o.noop,fn:o.program(12,v,t),data:t});if(r||r===0){i+=r}i+="\n        </ul>\n    </div>\n";return i}function v(e,t){var i="",r,a,s;i+='\n            <li class="fast-click-highlighted"><a data-fieldname="';if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===c?a.call(e,{hash:{},data:t}):a}i+=u(r)+'">'+u((a=n.icon||e&&e.icon,s={hash:{additionalClass:"check-icon"},data:t},a?a.call(e,"sorting.checked",s):l.call(e,"icon","sorting.checked",s)))+' <span class="name">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===c?a.call(e,{hash:{},data:t}):a}i+=u(r)+"</span></a></li>\n        ";return i}a+='\n<div class="box__filter">\n    ';s=n["if"].call(t,(s=t&&t.filters,s==null||s===false?s:s.length),{hash:{},inverse:o.noop,fn:o.program(1,d,r),data:r});if(s||s===0){a+=s}a+='\n    <span class="filter__seporate"></span>\n    <!--Sort buttons-->\n    ';s=n["if"].call(t,t&&t.sortable,{hash:{},inverse:o.noop,fn:o.program(4,h,r),data:r});if(s||s===0){a+=s}a+='\n</div>\n\n<div class="overlay-dropdown ';s=n["if"].call(t,t&&t.isFilterDDOpened,{hash:{},inverse:o.noop,fn:o.program(6,p,r),data:r});if(s||s===0){a+=s}a+='"></div>\n';s=n["if"].call(t,(s=t&&t.filters,s==null||s===false?s:s.length),{hash:{},inverse:o.noop,fn:o.program(8,m,r),data:r});if(s||s===0){a+=s}a+="\n\n";s=n["if"].call(t,t&&t.sortable,{hash:{},inverse:o.noop,fn:o.program(11,g,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing,f=this,h=n.blockHelperMissing;function p(e,t){return"btns-long"}function m(e,t){return"has-edit-button"}function _(e,t){return"has-search"}function g(e,t){var i="",r,a,s;i+='\n            <a href="javascript:void(0)" class="logo menuBtn fast-click-highlighted" track="click:home">\n                '+c((a=n.icon||e&&e.icon,s={hash:{},data:t},a?a.call(e,"header.menu",s):d.call(e,"icon","header.menu",s)))+"\n            </a>\n            ";r=(r=(r=(r=e&&e.config,r==null||r===false?r:r.offlineEnabled),typeof r===u?r.apply(e):r),h.call(e,r,{hash:{},inverse:f.noop,fn:f.program(8,v,t),data:t}));if(r||r===0){i+=r}i+="\n        ";return i}function v(e,t){var i="",r,a,s;i+='\n                <span class="offline-status ';if(a=n.offlineStatusClass){r=a.call(e,{hash:{},data:t})}else{a=e&&e.offlineStatusClass;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+'">'+c((a=n.partial||e&&e.partial,s={hash:{},data:t},a?a.call(e,e&&e.offlineStatusIconPartial,e&&e.offlineStatusClass,s):d.call(e,"partial",e&&e.offlineStatusIconPartial,e&&e.offlineStatusClass,s)))+"</span>\n            ";return i}function y(e,t){var i="",r,a;i+='<a href="javascript:void(0)" class="dashHomeBtn fast-click-highlighted hide" track="click:dashHome">'+c((r=n.icon||e&&e.icon,a={hash:{},data:t},r?r.call(e,"header.dashboard",a):d.call(e,"icon","header.dashboard",a)))+"</a>";return i}function b(e,t){var i="",r,a;i+='<a href="javascript:void(0)" class="backBtn back fast-click-highlighted" track="click:back">'+c((r=n.icon||e&&e.icon,a={hash:{},data:t},r?r.call(e,"header.back",a):d.call(e,"icon","header.back",a)))+"</a>";return i}function x(e,t){var i="",r;i+='\n            <span class="cancelBtn btn-area-more fast-click-highlighted" track="click:cancel">\n                <a href="javascript:void(0)" class="btn">\n                    ';r=n["if"].call(e,(r=e&&e.config,r==null||r===false?r:r.cancelLabel),{hash:{},inverse:f.program(17,L,t),fn:f.program(15,w,t),data:t});if(r||r===0){i+=r}i+="\n                </a>\n            </span>\n        ";return i}function w(e,t){var i="",r,a,s;i+="\n                        "+c((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,(r=e&&e.config,r==null||r===false?r:r.cancelLabel),s):d.call(e,"str",(r=e&&e.config,r==null||r===false?r:r.cancelLabel),s)))+"\n                    ";return i}function L(e,t){var i="",r,a;i+="\n                        "+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_CANCEL_BUTTON_LABEL",a):d.call(e,"str","LBL_CANCEL_BUTTON_LABEL",a)))+"\n                    ";return i}function S(e,t){var i="",r,a,s;i+='\n            <span class="save-container ';r=n["if"].call(e,(r=e&&e.config,r==null||r===false?r:r.saveHidden),{hash:{},inverse:f.noop,fn:f.program(20,E,t),data:t});if(r||r===0){i+=r}i+='">\n                <span class="saveBtn btn-area-more fast-click-highlighted " track="click:save">\n                    <a href="javascript:void(0)" class="btn ';r=n["if"].call(e,e&&e._saveBtnDisabled,{hash:{},inverse:f.noop,fn:f.program(22,k,t),data:t});if(r||r===0){i+=r}i+='">\n                        ';r=n["if"].call(e,(r=e&&e.config,r==null||r===false?r:r.saveLabel),{hash:{},inverse:f.program(26,M,t),fn:f.program(24,T,t),data:t});if(r||r===0){i+=r}i+='\n                    </a>\n                </span>\n                <span class="btn-area-more caretBtn fast-click-highlighted hide">\n                    <a href="javascript:void(0)" class="btn">\n                        '+c((a=n.icon||e&&e.icon,s={hash:{additionalClass:"saveArrow-icon"},data:t},a?a.call(e,"header.saveBtnArrow",s):d.call(e,"icon","header.saveBtnArrow",s)))+"\n                    </a>\n                </span>\n            </span>\n        ";return i}function E(e,t){return"hide"}function k(e,t){return"disabled"}function T(e,t){var i="",r,a,s;i+="\n                            "+c((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,(r=e&&e.config,r==null||r===false?r:r.saveLabel),s):d.call(e,"str",(r=e&&e.config,r==null||r===false?r:r.saveLabel),s)))+"\n                        ";return i}function M(e,t){var i="",r,a;i+="\n                            "+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_SAVE_BUTTON_LABEL",a):d.call(e,"str","LBL_SAVE_BUTTON_LABEL",a)))+"\n                        ";return i}function A(e,t){var i="",r,a,s;i+='\n            <a href="javascript:void(0)" class="createBtn launch create-entity fast-click-highlighted" track="click:create" ';s={hash:{},inverse:f.noop,fn:f.program(29,C,t),data:t};if(a=n.quickAction){r=a.call(e,s)}else{a=e&&e.quickAction;r=typeof a===u?a.call(e,s):a}if(!n.quickAction){r=h.call(e,r,{hash:{},inverse:f.noop,fn:f.program(29,C,t),data:t})}if(r||r===0){i+=r}i+=">\n                ";r=n["if"].call(e,e&&e.quickAction,{hash:{},inverse:f.program(33,D,t),fn:f.program(31,R,t),data:t});if(r||r===0){i+=r}i+="\n            </a>\n        ";return i}function C(e,t){var i="",r,a;i+='action="';if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+'"';return i}function R(e,t){var i="",r,a,s;i+="\n                    "+c((a=n.icon||e&&e.icon,s={hash:{additionalClass:"header-icon__plus icon-size-md"},data:t},a?a.call(e,(r=e&&e.quickAction,r==null||r===false?r:r.iconKey),s):d.call(e,"icon",(r=e&&e.quickAction,r==null||r===false?r:r.iconKey),s)))+"\n                ";return i}function D(e,t){var i="",r,a;i+="\n                    "+c((r=n.icon||e&&e.icon,a={hash:{additionalClass:"header-icon__plus icon-size-md"},data:t},r?r.call(e,"header.overflow",a):d.call(e,"icon","header.overflow",a)))+"\n                ";return i}function I(e,t){var i="",r,a;i+='\n            <a href="javascript:void(0)" class="searchBtn fast-click-highlighted" track="click:search">'+c((r=n.icon||e&&e.icon,a={hash:{additionalClass:"icon-size-md"},data:t},r?r.call(e,"header.search",a):d.call(e,"icon","header.search",a)))+"</a>\n        ";return i}a+='\n<div class="box__header ';s=n["if"].call(t,(s=t&&t.config,s==null||s===false?s:s.btnsLong),{hash:{},inverse:f.noop,fn:f.program(1,p,r),data:r});if(s||s===0){a+=s}a+=" ";s=n["if"].call(t,(s=(s=t&&t.config,s==null||s===false?s:s.ui),s==null||s===false?s:s.hasEditButton),{hash:{},inverse:f.noop,fn:f.program(3,m,r),data:r});if(s||s===0){a+=s}a+=" ";s=n["if"].call(t,(s=t&&t.config,s==null||s===false?s:s.search),{hash:{},inverse:f.noop,fn:f.program(5,_,r),data:r});if(s||s===0){a+=s}a+='" track="swipeLeft swipeRight:header">\n    <div class="header__inner">\n        ';s=(s=(s=(s=t&&t.config,s==null||s===false?s:s.isMenuButtonSupported),typeof s===u?s.apply(t):s),h.call(t,s,{hash:{},inverse:f.noop,fn:f.program(7,g,r),data:r}));if(s||s===0){a+=s}a+="\n        ";s=(s=(s=(s=t&&t.config,s==null||s===false?s:s.dashboardHome),typeof s===u?s.apply(t):s),h.call(t,s,{hash:{},inverse:f.noop,fn:f.program(10,y,r),data:r}));if(s||s===0){a+=s}a+="\n        ";s=(s=(s=(s=t&&t.config,s==null||s===false?s:s.back),typeof s===u?s.apply(t):s),h.call(t,s,{hash:{},inverse:f.noop,fn:f.program(12,b,r),data:r}));if(s||s===0){a+=s}a+="\n        ";s=(s=(s=(s=t&&t.config,s==null||s===false?s:s.cancel),typeof s===u?s.apply(t):s),h.call(t,s,{hash:{},inverse:f.noop,fn:f.program(14,x,r),data:r}));if(s||s===0){a+=s}a+='\n        <h1 class="header__title">\n            <span class="header-subtitle">'+c((s=(s=t&&t.config,s==null||s===false?s:s.subtitle),typeof s===u?s.apply(t):s))+'</span>\n            <span class="header-title">'+c((s=(s=t&&t.config,s==null||s===false?s:s.title),typeof s===u?s.apply(t):s))+"</span>\n        </h1>\n        ";s=(s=(s=(s=t&&t.config,s==null||s===false?s:s.save),typeof s===u?s.apply(t):s),h.call(t,s,{hash:{},inverse:f.noop,fn:f.program(19,S,r),data:r}));if(s||s===0){a+=s}a+="\n        ";l={hash:{},inverse:f.noop,fn:f.program(28,A,r),data:r};if(o=n.rightMenu){s=o.call(t,l)}else{o=t&&t.rightMenu;s=typeof o===u?o.call(t,l):o}if(!n.rightMenu){s=h.call(t,s,{hash:{},inverse:f.noop,fn:f.program(28,A,r),data:r})}if(s||s===0){a+=s}a+="\n        ";s=(s=(s=(s=t&&t.config,s==null||s===false?s:s.search),typeof s===u?s.apply(t):s),h.call(t,s,{hash:{},inverse:f.noop,fn:f.program(35,I,r),data:r}));if(s||s===0){a+=s}a+='\n    </div>\n    <div class="right-menu__container_tablet"></div>\n</div>\n<div class="overlay__right-menu" track="swipeLeft swipeRight:header"></div>\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=n.helperMissing,c=this;function d(e,t){var i="",r;i+="\n    ";r=n["with"].call(e,e&&e.attributes,{hash:{},inverse:c.noop,fn:c.program(2,f,t),data:t});if(r||r===0){i+=r}i+="\n";return i}function f(e,t){var i="",r,a,s;i+='\n        <div data-id="';if(a=n.id){r=a.call(e,{hash:{},data:t})}else{a=e&&e.id;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+'" class="comment__item">\n            <a href="#Users/';if(a=n.created_by){r=a.call(e,{hash:{},data:t})}else{a=e&&e.created_by;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+'/edit">'+l((a=n.userPicture||e&&e.userPicture,s={hash:{},data:t},a?a.call(e,e&&e.created_by,s):u.call(e,"userPicture",e&&e.created_by,s)))+"</a>\n            "+l((a=n.comment||e&&e.comment,s={hash:{},data:t},a?a.call(e,(r=e&&e.data,r==null||r===false?r:r.value),(r=e&&e.data,r==null||r===false?r:r.tags),s):u.call(e,"comment",(r=e&&e.data,r==null||r===false?r:r.value),(r=e&&e.data,r==null||r===false?r:r.tags),s)))+'\n            <div class="comment__info">\n                <a href="#Users/';if(a=n.created_by){r=a.call(e,{hash:{},data:t})}else{a=e&&e.created_by;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+'">'+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,e&&e.created_by_name,s):u.call(e,"str",e&&e.created_by_name,s)))+"</a> "+l((a=n.relativeTime||e&&e.relativeTime,s={hash:{},data:t},a?a.call(e,e&&e.date_entered,s):u.call(e,"relativeTime",e&&e.date_entered,s)))+"\n            </div>\n        </div>\n    ";return i}function h(e,t){var i="",r,a;i+='\n    <a href="#" class="comments-more-btn">';if(a=n._moreCommentsCount){r=a.call(e,{hash:{},data:t})}else{a=e&&e._moreCommentsCount;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+" more comments...</a>\n";return i}a+="\n";s=n.each.call(t,(s=t&&t.collection,s==null||s===false?s:s.models),{hash:{},inverse:c.noop,fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n";s=n["if"].call(t,t&&t._moreCommentsCount,{hash:{},inverse:c.noop,fn:c.program(4,h,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function",f=this;function h(e,t){return"item-checkbox"}function p(e,t){var i,r;return c((i=n["debug-attributes"]||e&&e["debug-attributes"],r={hash:{},data:t},i?i.call(e,"attribute","label",e&&e.label,r):u.call(e,"debug-attributes","attribute","label",e&&e.label,r)))}function m(e,t){var i="",r,a;i+="\n        "+c((r=n.icon||e&&e.icon,a={hash:{additionalClass:"checkbox-icon"},data:t},r?r.call(e,"edit.checkboxOff",a):u.call(e,"icon","edit.checkboxOff",a)))+"\n    ";return i}function _(e,t){var i="",r,a;i+="\n        "+c((r=n.iconModule||e&&e.iconModule,a={hash:{},data:t},r?r.call(e,e&&e.module,a):u.call(e,"iconModule",e&&e.module,a)))+"\n    ";return i}a+='\n<article data-id="';if(o=n.itemId){s=o.call(t,{hash:{},data:r})}else{o=t&&t.itemId;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" class="picker-list-row fast-click-highlighted ';s=n["if"].call(t,(s=t&&t.view,s==null||s===false?s:s.multiselect),{hash:{},inverse:f.noop,fn:f.program(1,h,r),data:r});if(s||s===0){a+=s}a+='" ';s=n["if"].call(t,(s=t&&t.view,s==null||s===false?s:s.multiselect),{hash:{},inverse:f.noop,fn:f.program(3,p,r),data:r});if(s||s===0){a+=s}a+="  "+c((o=n["debug-attributes"]||t&&t["debug-attributes"],l={hash:{},data:r},o?o.call(t,"attribute","module",t&&t.module,l):u.call(t,"debug-attributes","attribute","module",t&&t.module,l)))+">\n    ";s=n["if"].call(t,(s=t&&t.view,s==null||s===false?s:s.multiselect),{hash:{},inverse:f.noop,fn:f.program(5,m,r),data:r});if(s||s===0){a+=s}a+="\n    ";s=n["if"].call(t,t&&t.module,{hash:{},inverse:f.noop,fn:f.program(7,_,r),data:r});if(s||s===0){a+=s}a+='\n    <a href="javascript:void(0)">';if(o=n.label){s=o.call(t,{hash:{},data:r})}else{o=t&&t.label;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+"</a>\n</article>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function",f=this;function h(e,t){return"search"}function p(e,t){var i="",r,a;i+='\n            <div class="clip">'+c((r=n.teamSearchItem||e&&e.teamSearchItem,a={hash:{},data:t},r?r.call(e,e&&e.model,a):u.call(e,"teamSearchItem",e&&e.model,a)))+"</div>\n        ";return i}function m(e,t){var i="",r,a;i+='\n            <div class="clip">'+c((r=n.fieldByName||e&&e.fieldByName,a={hash:{type:"teamset-name"},data:t},r?r.call(e,"name",e,a):u.call(e,"fieldByName","name",e,a)))+"</div>\n        ";return i}a+='\n<article data-id="';if(o=n.itemId){s=o.call(t,{hash:{},data:r})}else{o=t&&t.itemId;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" class="list-item item-checkbox fast-click-highlighted" '+c((o=n["debug-attributes"]||t&&t["debug-attributes"],l={hash:{},data:r},o?o.call(t,(s=t&&t.view,s==null||s===false?s:s.module),l):u.call(t,"debug-attributes",(s=t&&t.view,s==null||s===false?s:s.module),l)))+">\n    "+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"checkbox-icon"},data:r},o?o.call(t,"edit.checkboxOff",l):u.call(t,"icon","edit.checkboxOff",l)))+'\n    <div class="';s=n["if"].call(t,t&&t.hasSearch,{hash:{},inverse:f.noop,fn:f.program(1,h,r),data:r});if(s||s===0){a+=s}a+=' txt">\n        ';s=n["if"].call(t,t&&t.hasSearch,{hash:{},inverse:f.program(5,m,r),fn:f.program(3,p,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</article>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing;a+='\n<article class="tx-item list-item fast-click-highlighted ';if(o=n.getTxLogItemStatusClass){s=o.call(t,{hash:{},data:r})}else{o=t&&t.getTxLogItemStatusClass;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" data-id="';if(o=n.itemId){s=o.call(t,{hash:{},data:r})}else{o=t&&t.itemId;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" module="'+c((s=(s=t&&t.model,s==null||s===false?s:s.module),typeof s===u?s.apply(t):s))+'" '+c((o=n["debug-attributes"]||t&&t["debug-attributes"],l={hash:{},data:r},o?o.call(t,(s=t&&t.view,s==null||s===false?s:s.module),l):d.call(t,"debug-attributes",(s=t&&t.view,s==null||s===false?s:s.module),l)))+'>\n    <div class="txt line-clamp">\n        ';if(o=n.getTxLogActionExplanation){s=o.call(t,{hash:{},data:r})}else{o=t&&t.getTxLogActionExplanation;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+"\n    </div>\n    "+c((o=n.partial||t&&t.partial,l={hash:{},data:r},o?o.call(t,"menu-list-item",t,l):d.call(t,"partial","menu-list-item",t,l)))+"\n</article>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression,c=this,d="function";function f(e,t){return"has-grip"}function h(e,t){return"has-menu"}function p(e,t){return"item-checkbox"}function m(e,t){var i="",r,a;i+="\n        "+u((r=n.icon||e&&e.icon,a={hash:{additionalClass:"checkbox-icon"},data:t},r?r.call(e,"edit.checkboxOff",a):l.call(e,"icon","edit.checkboxOff",a)))+"\n    ";return i}function _(e,t){var i="",r,a;i+='\n            <span class="module-name">'+u((r=n.moduleNameSingular||e&&e.moduleNameSingular,a={hash:{},data:t},r?r.call(e,e&&e.moduleName,a):l.call(e,"moduleNameSingular",e&&e.moduleName,a)))+'</span><span class="module-name-comma">,</span>\n        ';return i}function g(e,t){var i="",r,a;i+="\n            "+u((r=n.searchListItem||e&&e.searchListItem,a={hash:{},data:t},r?r.call(e,e&&e.model,a):l.call(e,"searchListItem",e&&e.model,a)))+"\n        ";return i}function v(e,t){var i="",r,a;i+='\n           <div class="item-name clip">\n               '+u((r=n.fieldByName||e&&e.fieldByName,a={hash:{},data:t},r?r.call(e,e&&e.titleField,e,a):l.call(e,"fieldByName",e&&e.titleField,e,a)))+"\n               "+u((r=n.fieldByName||e&&e.fieldByName,a={hash:{type:"relationship"},data:t},r?r.call(e,e&&e.relationshipField,e,a):l.call(e,"fieldByName",e&&e.relationshipField,e,a)))+"\n           </div>\n        ";return i}function y(e,t){var i="",r;i+='\n            <div class="fields ';r=n["if"].call(e,e&&e.showLabel,{hash:{},inverse:c.noop,fn:c.program(16,b,t),data:t});if(r||r===0){i+=r}i+='">\n                ';r=n.each.call(e,e&&e.additionalFields,{hash:{},inverse:c.noop,fn:c.programWithDepth(18,x,t,e),data:t});if(r||r===0){i+=r}i+="\n            </div>\n        ";return i}function b(e,t){return"additional"}function x(e,t,i){var r="",a,s,o;r+='\n                    <div class="field">\n                        ';a=n["if"].call(e,i&&i.showLabel,{hash:{},inverse:c.noop,fn:c.programWithDepth(19,w,t,i),data:t});if(a||a===0){r+=a}r+='\n                        <div class="clip value">\n                            '+u((s=n.field||i&&i.field,o={hash:{model:i&&i.model},data:t},s?s.call(e,i&&i.view,o):l.call(e,"field",i&&i.view,o)))+"\n                        </div>\n                    </div>\n                ";return r}function w(e,t,i){var r="",a,s;r+='\n                            <div class="clip item-label">'+u((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,e&&e.label,i&&i.moduleName,s):l.call(e,"str",e&&e.label,i&&i.moduleName,s)))+"</div>\n                        ";return r}function L(e,t){var i="",r,a,s;i+="\n            "+u((a=n.fieldByName||e&&e.fieldByName,s={hash:{},data:t},a?a.call(e,(r=e&&e.view,r==null||r===false?r:r.sortBy),e,s):l.call(e,"fieldByName",(r=e&&e.view,r==null||r===false?r:r.sortBy),e,s)))+"\n        ";return i}function S(e,t){var i="",r,a;i+="\n            "+u((r=n.partial||e&&e.partial,a={hash:{},data:t},r?r.call(e,"menu-list-item",e,a):l.call(e,"partial","menu-list-item",e,a)))+"\n        ";return i}a+='\n<article data-id="';if(o=n.itemId){s=o.call(t,{hash:{},data:r})}else{o=t&&t.itemId;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=u(s)+'" module="';if(o=n.moduleName){s=o.call(t,{hash:{},data:r})}else{o=t&&t.moduleName;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=u(s)+'" class="list-item fast-click-highlighted ';s=n["if"].call(t,t&&t.isMenuGripVisible,{hash:{},inverse:c.noop,fn:c.program(1,f,r),data:r});if(s||s===0){a+=s}a+=" ";s=n["if"].call(t,t&&t.isMenuVisible,{hash:{},inverse:c.noop,fn:c.program(3,h,r),data:r});if(s||s===0){a+=s}a+=" ";s=n["if"].call(t,(s=t&&t.view,s==null||s===false?s:s.multiselect),{hash:{},inverse:c.noop,fn:c.program(5,p,r),data:r});if(s||s===0){a+=s}a+='" track="swipeLeft swipeRight:c-menu.active-list-item">\n    \n    ';s=n["if"].call(t,(s=t&&t.view,s==null||s===false?s:s.multiselect),{hash:{},inverse:c.noop,fn:c.program(7,m,r),data:r});if(s||s===0){a+=s}a+='\n\n    <div class="txt ';if(o=n.detailsCss){s=o.call(t,{hash:{},data:r})}else{o=t&&t.detailsCss;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=u(s)+'">\n        ';s=n["if"].call(t,t&&t.isModuleVisible,{hash:{},inverse:c.noop,fn:c.program(9,_,r),data:r});if(s||s===0){a+=s}a+="\n\n        ";s=n["if"].call(t,t&&t.hasSearch,{hash:{},inverse:c.program(13,v,r),fn:c.program(11,g,r),data:r});if(s||s===0){a+=s}a+="\n\n        ";s=n["if"].call(t,t&&t.additionalFields,{hash:{},inverse:c.noop,fn:c.program(15,y,r),data:r});if(s||s===0){a+=s}a+="\n\n        ";s=n["if"].call(t,(s=t&&t.view,s==null||s===false?s:s.sortBy),{hash:{},inverse:c.noop,fn:c.program(21,L,r),data:r});if(s||s===0){a+=s}a+="\n\n        ";s=n["if"].call(t,t&&t.isMenuVisible,{hash:{},inverse:c.noop,fn:c.program(23,S,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</article>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression;a+='\n<div class="no-records-found"><p><b>'+l((s=t&&t.labelNoRecords,typeof s===o?s.apply(t):s))+"</b></p></div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression;a+='\n<div class="error-box">'+u((s=n.str||t&&t.str,o={hash:{},data:r},s?s.call(t,"ERR_MOBILE_NOT_AUTHORIZED",o):l.call(t,"str","ERR_MOBILE_NOT_AUTHORIZED",o)))+"</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression;a+='\n<div class="scroll">\n    <div class="listing" id="listing">\n        '+c((o=n.listItems||t&&t.listItems,l={hash:{},data:r},o?o.call(t,(s=t&&t.collection,s==null||s===false?s:s.models),t,l):u.call(t,"listItems",(s=t&&t.collection,s==null||s===false?s:s.models),t,l)))+"\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=this,l="function",u=this.escapeExpression,c=n.helperMissing;function d(e,t){var i="",r,a,s;i+='\n        <div class="show-more-btn show-more-bottom-btn" style="';r=n.unless.call(e,e&&e.needShowMoreBottomBtn,{hash:{},inverse:o.noop,fn:o.program(2,f,t),data:t});if(r||r===0){i+=r}i+='">\n            <div>\n                <a class="show_more_posts" href="javascript:void(0)" track="click:more-bottom">';if(a=n.labelShowMoreBottom){r=a.call(e,{hash:{},data:t})}else{a=e&&e.labelShowMoreBottom;

r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+'</a>\n                    <span class="loading-holder" style="display: none">\n                        '+u((a=n.partial||e&&e.partial,s={hash:{},data:t},a?a.call(e,"spinner",e,s):c.call(e,"partial","spinner",e,s)))+"\n                        ";if(a=n.labelLoading){r=a.call(e,{hash:{},data:t})}else{a=e&&e.labelLoading;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+"\n                    </span>\n            </div>\n    </div>\n";return i}function f(e,t){return"display:none;"}a+="\n";s=n["if"].call(t,t&&t.isPaginationEnabled,{hash:{},inverse:o.noop,fn:o.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=this,l="function",u=this.escapeExpression,c=n.helperMissing;function d(e,t){var i="",r,a,s;i+='\n    <div class="show-more-btn show-more-top-btn" ';r=n.unless.call(e,e&&e.needShowMoreTopButton,{hash:{},inverse:o.noop,fn:o.program(2,f,t),data:t});if(r||r===0){i+=r}i+='>\n        <div>\n            <a class="show_more_posts" href="javascript:void(0)" track="click:more-top">';if(a=n.labelShowMoreTop){r=a.call(e,{hash:{},data:t})}else{a=e&&e.labelShowMoreTop;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+'</a>\n            <span class="loading-holder" style="display: none">\n                '+u((a=n.partial||e&&e.partial,s={hash:{},data:t},a?a.call(e,"spinner",e,s):c.call(e,"partial","spinner",e,s)))+"\n                ";if(a=n.labelLoading){r=a.call(e,{hash:{},data:t})}else{a=e&&e.labelLoading;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+"\n            </span>\n        </div>\n    </div>\n";return i}function f(e,t){return'style="display: none"'}a+="\n";s=n["if"].call(t,t&&t.isPaginationEnabled,{hash:{},inverse:o.noop,fn:o.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing;a+='\n<div class="listing" id="';if(o=n.listViewId){s=o.call(t,{hash:{},data:r})}else{o=t&&t.listViewId;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'">\n  '+c((o=n.partial||t&&t.partial,l={hash:{},data:r},o?o.call(t,"list-no-records",t,l):d.call(t,"partial","list-no-records",t,l)))+"\n  "+c((o=n.partial||t&&t.partial,l={hash:{},data:r},o?o.call(t,"list-show-more-top",t,l):d.call(t,"partial","list-show-more-top",t,l)))+'\n    <div class="items">\n      '+c((o=n.listItems||t&&t.listItems,l={hash:{},data:r},o?o.call(t,(s=t&&t.collection,s==null||s===false?s:s.models),t,l):d.call(t,"listItems",(s=t&&t.collection,s==null||s===false?s:s.models),t,l)))+"\n    </div>\n  "+c((o=n.partial||t&&t.partial,l={hash:{},data:r},o?o.call(t,"list-show-more-bottom",t,l):d.call(t,"partial","list-show-more-bottom",t,l)))+"\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=n.helperMissing,l=this.escapeExpression,u=this;function c(e,t){var i="",r,a;i+='\n    <span class="menu-container-grip grip" track="click:c-menu">'+l((r=n.icon||e&&e.icon,a={hash:{},data:t},r?r.call(e,"list.grip",a):o.call(e,"icon","list.grip",a)))+'</span>\n    <div class="menu-container">\n        <span class="grip open" track="click:c-menu.open">'+l((r=n.icon||e&&e.icon,a={hash:{},data:t},r?r.call(e,"list.grip",a):o.call(e,"icon","list.grip",a)))+"</span>\n    </div>\n";return i}function d(e,t){return'\n    <div class="menu-container"></div>\n'}a+="\n";s=n["if"].call(t,t&&t.isMenuGripVisible,{hash:{},inverse:u.program(3,d,r),fn:u.program(1,c,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression,c=n.helperMissing,d=this;function f(e,t){var i="",r,a,s;i+='\n            <div class="as__icon">\n                <i class="tw__user_icon icon" style="background-image: url('+u((r=e&&e.tw_profile_image_url,typeof r===l?r.apply(e):r))+');">\n                </i>\n            </div>\n\n            <div class="as__info" >\n                <a class="tw__as_profile_link" target="_blank" href="'+u((r=e&&e.tw_profile_url,typeof r===l?r.apply(e):r))+'" ><strong>'+u((r=e&&e.name,typeof r===l?r.apply(e):r))+'</strong></a>\n                <a class="tw__as_profile_link" target="_blank" href="'+u((r=e&&e.tw_profile_url,typeof r===l?r.apply(e):r))+'" >@'+u((r=e&&e.screen_name,typeof r===l?r.apply(e):r))+'</a>\n                <div class="pull-right">\n                    '+u((a=n.relativeTime||e&&e.relativeTime,s={hash:{},data:t},a?a.call(e,e&&e.date,s):c.call(e,"relativeTime",e&&e.date,s)))+'\n                </div>\n            </div>\n            <div class="tw__as__title as__title">\n                ';r=(r=e&&e.text,typeof r===l?r.apply(e):r);if(r||r===0){i+=r}i+="\n            </div>\n        ";return i}function h(e,t){var i="",r,a;i+="\n            "+u((r=n.partial||e&&e.partial,a={hash:{},data:t},r?r.call(e,"menu-list-item",e,a):c.call(e,"partial","menu-list-item",e,a)))+"\n        ";return i}a+='\n<article data-id="';if(o=n.itemId){s=o.call(t,{hash:{},data:r})}else{o=t&&t.itemId;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'" module="';if(o=n.moduleName){s=o.call(t,{hash:{},data:r})}else{o=t&&t.moduleName;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'" class="activitystream-item list-item" track="swipeLeft swipeRight:c-menu.active-list-item">\n    <div class="as__detail">\n        ';s=n["with"].call(t,(s=t&&t.model,s==null||s===false?s:s.attributes),{hash:{},inverse:d.noop,fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n\n        ";s=n["if"].call(t,t&&t.isMenuVisible,{hash:{},inverse:d.noop,fn:d.program(3,h,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n\n</article>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function",f=this;function h(e,t,i){var r="",a,s;r+="\n                "+c((a=n.field||i&&i.field,s={hash:{},data:t},a?a.call(e,i,s):u.call(e,"field",i,s)))+"\n            ";return r}function p(e,t){return"login__footer_show-attribution"}function m(e,t){var i="",r,a;i+='\n            <a href="javascript:void(0)" id="external_login_btn" tabindex="5" class="btn" disabled="disabled" track="click:external_login">'+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_EXTERNAL_LOGIN_BUTTON_TITLE",a):u.call(e,"str","LBL_EXTERNAL_LOGIN_BUTTON_TITLE",a)))+"</a>\n        ";return i}function _(e,t){var i="",r,a;i+='\n                <input type="checkbox" id="control_ssl_chkbox" class="checkbox_custom" checked />\n                '+c((r=n.icon||e&&e.icon,a={hash:{additionalClass:"checkbox-icon"},data:t},r?r.call(e,"edit.checkboxOn",a):u.call(e,"icon","edit.checkboxOn",a)))+"\n            ";return i}function g(e,t){var i="",r,a;i+='\n                <input type="checkbox" id="control_ssl_chkbox" class="checkbox_custom"/>\n                '+c((r=n.icon||e&&e.icon,a={hash:{additionalClass:"checkbox-icon"},data:t},r?r.call(e,"edit.checkboxOff",a):u.call(e,"icon","edit.checkboxOff",a)))+"\n            ";return i}function v(e,t){var i="",r,a,s;i+='\n        <div class="box__copyright">\n            <span class="copyright__text">powered by</span>\n            <span class="copyright__logo">\n                '+c((a=n.partial||e&&e.partial,s={hash:{},data:t},a?a.call(e,"sugarcrm-copyright-logo",e,s):u.call(e,"partial","sugarcrm-copyright-logo",e,s)))+'\n            </span>\n            <span class="copyright__version">v. ';if(a=n.productVersion){r=a.call(e,{hash:{},data:t})}else{a=e&&e.productVersion;r=typeof a===d?a.call(e,{hash:{},data:t}):a}i+=c(r)+"</span>\n        </div>\n    ";return i}function y(e,t){var i="",r,a;i+='\n        <div class="version">v. ';if(a=n.productVersion){r=a.call(e,{hash:{},data:t})}else{a=e&&e.productVersion;r=typeof a===d?a.call(e,{hash:{},data:t}):a}i+=c(r)+"</div>\n    ";return i}a+='\n<div class="page__login">\n    <div class="login__header">\n        <h3 class="brand">';if(o=n.brandName){s=o.call(t,{hash:{},data:r})}else{o=t&&t.brandName;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</h3>\n    </div>\n    <div class="login__body">\n        <form class="wrapper__clear-field">\n            ';s=n.each.call(t,t&&t.displayFields,{hash:{},inverse:f.noop,fn:f.programWithDepth(1,h,r,t),data:r});if(s||s===0){a+=s}a+='\n        </form>\n    </div>\n    <div class="login__footer ';s=n["if"].call(t,t&&t.showAttribution,{hash:{},inverse:f.noop,fn:f.program(3,p,r),data:r});if(s||s===0){a+=s}a+='">\n        <a href="javascript:void(0)" id="login_btn" tabindex="4" class="btn btn-primary" disabled="disabled" track="click:login">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_LOGIN_BUTTON_TITLE",l):u.call(t,"str","LBL_LOGIN_BUTTON_TITLE",l)))+"</a>\n        ";s=n["if"].call(t,(s=(s=t&&t.config,s==null||s===false?s:s.login),s==null||s===false?s:s.externalLoginEnabled),{hash:{},inverse:f.noop,fn:f.program(5,m,r),data:r});if(s||s===0){a+=s}a+='\n        <label class="control-ssl">\n            ';s=n["if"].call(t,t&&t.useHttps,{hash:{},inverse:f.program(9,g,r),fn:f.program(7,_,r),data:r});if(s||s===0){a+=s}a+="\n            "+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_USE_HTTPS",l):u.call(t,"str","LBL_USE_HTTPS",l)))+'\n        </label>\n    </div>\n</div>\n<div class="login__links">\n    ';s=n["if"].call(t,t&&t.showAttribution,{hash:{},inverse:f.program(13,y,r),fn:f.program(11,v,r),data:r});if(s||s===0){a+=s}a+='\n    <a href="';if(o=n.tosLink){s=o.call(t,{hash:{},data:r})}else{o=t&&t.tosLink;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" class="legal-link login-links__link" track="click:tos">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LNK_TERMS_OF_USE",l):u.call(t,"str","LNK_TERMS_OF_USE",l)))+'</a>\n    <i class="separator"></i>\n    <a href="javascript:void(0)" class="about-link login-links__link">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LNK_ABOUT",l):u.call(t,"str","LNK_ABOUT",l)))+'</a>\n    <i class="separator"></i>\n    <a href="';if(o=n.privacyLink){s=o.call(t,{hash:{},data:r})}else{o=t&&t.privacyLink;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" class="legal-link login-links__link" track="click:privacy">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LNK_PRIVACY_POLICY",l):u.call(t,"str","LNK_PRIVACY_POLICY",l)))+"</a>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u="function",c=this.escapeExpression,d=n.helperMissing,f=this;function h(e,t){var i="",r;i+="\n            ";r=n["if"].call(e,e&&e.dashboards,{hash:{},inverse:f.noop,fn:f.program(2,p,t),data:t});if(r||r===0){i+=r}i+="\n        ";return i}function p(e,t){var i="",r;i+="\n                ";r=n.each.call(e,e&&e.dashboards,{hash:{},inverse:f.noop,fn:f.program(3,m,t),data:t});if(r||r===0){i+=r}i+="\n            ";return i}function m(e,t){var i="",r,a,s;i+='\n                    <li class="menu__item fast-click-highlighted">\n                        <a href="#Dashboards/';if(a=n.id){r=a.call(e,{hash:{},data:t})}else{a=e&&e.id;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+'" class="menu-item__link">\n                            '+c((a=n.iconModule||e&&e.iconModule,s={hash:{iconLabel:e&&e.label},data:t},a?a.call(e,"Dashboard",s):d.call(e,"iconModule","Dashboard",s)))+'\n                            <span class="menu-item__label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+"</span>\n                        </a>\n                    </li>\n                ";return i}function _(e,t){var i="",r,a;i+='\n        <li class="menu__item fast-click-highlighted">\n            <a href="#Activities" id="activities-link" class="menu-item__link">\n                <span class="menu-item__icon">'+c((r=n.icon||e&&e.icon,a={hash:{},data:t},r?r.call(e,"menu.activities",a):d.call(e,"icon","menu.activities",a)))+'</span>\n                <span class="menu-item__label">'+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_ACTIVITY_STREAM",a):d.call(e,"str","LBL_ACTIVITY_STREAM",a)))+"</span>\n            </a>\n        </li>\n        ";return i}function g(e,t){var i="",r,a,s;i+='\n            <li class="menu__item fast-click-highlighted">\n                <a href="#';if(a=n.route){r=a.call(e,{hash:{},data:t})}else{a=e&&e.route;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+'" class="menu-item__link">\n                    '+c((a=n.iconModule||e&&e.iconModule,s={hash:{iconKey:e&&e.iconKey,iconLabel:e&&e.label},data:t},a?a.call(e,e&&e.route,s):d.call(e,"iconModule",e&&e.route,s)))+'\n                    <span class="menu-item__label">';if(a=n.label){r=a.call(e,{hash:{},data:t})}else{a=e&&e.label;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=c(r)+"</span>\n                </a>\n            </li>\n        ";return i}function v(e,t){var i="",r,a;i+='\n            <li class="menu__item fast-click-highlighted">\n                <a href="#Offline" id="offline-link" class="menu-item__link">\n                    <span class="menu-item__icon">'+c((r=n.partial||e&&e.partial,a={hash:{},data:t},r?r.call(e,e&&e.offlineStatusIconPartial,e&&e.offlineStatusClass,a):d.call(e,"partial",e&&e.offlineStatusIconPartial,e&&e.offlineStatusClass,a)))+'</span>\n                    <span class="menu-item__label">'+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LNK_OFFLINE_SETTINGS",a):d.call(e,"str","LNK_OFFLINE_SETTINGS",a)))+"</span>\n                </a>\n            </li>\n        ";return i}function y(e,t){var i="",r,a;i+='\n            <li class="menu__item fast-click-highlighted">\n                <a href="#ErrorEmulation" class="menu-item__link">\n                    <span class="menu-item__icon">'+c((r=n.icon||e&&e.icon,a={hash:{},data:t},r?r.call(e,"menu.errorEmulation",a):d.call(e,"icon","menu.errorEmulation",a)))+'</span>\n                    <span class="menu-item__label">Error Emulation</span>\n                </a>\n            </li>\n        ';return i}a+='\n<div class="box__menu">\n    <ul class="menu__inner" id="moduleList">\n\n        <li class="menu__item fast-click-highlighted">\n            <a href="#Users/';if(o=n.userId){s=o.call(t,{hash:{},data:r})}else{o=t&&t.userId;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'/edit" id="me" class="menu-item__link">\n                <span class="menu-item__userpic">'+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"btn btn-inverse user-icon"},data:r},o?o.call(t,"menu.user",l):d.call(t,"icon","menu.user",l)))+'</span>\n                <span class="menu-item__label">';if(o=n.userName){s=o.call(t,{hash:{},data:r})}else{o=t&&t.userName;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</span>\n            </a>\n        </li>\n        <li class="menu__divider"></li>\n        ';s=n["if"].call(t,t&&t.dashboardsSupported,{hash:{},inverse:f.noop,fn:f.program(1,h,r),data:r});if(s||s===0){a+=s}a+='\n        <li class="menu__item fast-click-highlighted">\n            <a href="#Search" id="globalSearch-link" class="menu-item__link">\n                <span class="menu-item__icon">'+c((o=n.icon||t&&t.icon,l={hash:{},data:r},o?o.call(t,"menu.search",l):d.call(t,"icon","menu.search",l)))+'</span>\n                <span class="menu-item__label">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_MOBILE_GLOBAL_SEARCH",l):d.call(t,"str","LBL_MOBILE_GLOBAL_SEARCH",l)))+"</span>\n            </a>\n        </li>\n        ";s=n["if"].call(t,t&&t.activitiesSupported,{hash:{},inverse:f.noop,fn:f.program(5,_,r),data:r});if(s||s===0){a+=s}a+='\n        <li class="menu__divider"></li>\n        ';s=n.each.call(t,t&&t.items,{hash:{},inverse:f.noop,fn:f.program(7,g,r),data:r});if(s||s===0){a+=s}a+='\n        <li class="menu__divider"></li>\n        <li class="menu__item fast-click-highlighted">\n            <a href="#About" class="menu-item__link">\n                <span class="menu-item__icon">'+c((o=n.icon||t&&t.icon,l={hash:{},data:r},o?o.call(t,"menu.about",l):d.call(t,"icon","menu.about",l)))+'</span>\n                <span class="menu-item__label">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LNK_ABOUT",l):d.call(t,"str","LNK_ABOUT",l)))+'</span>\n            </a>\n        </li>\n        <li class="menu__item fast-click-highlighted">\n            <a href="#Settings" id="settings-link" class="menu-item__link">\n                <span class="menu-item__icon">'+c((o=n.icon||t&&t.icon,l={hash:{},data:r},o?o.call(t,"menu.settings",l):d.call(t,"icon","menu.settings",l)))+'</span>\n                <span class="menu-item__label">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LNK_SETTINGS",l):d.call(t,"str","LNK_SETTINGS",l)))+"</span>\n            </a>\n        </li>\n        ";s=n["if"].call(t,t&&t.offlineEnabled,{hash:{},inverse:f.noop,fn:f.program(9,v,r),data:r});if(s||s===0){a+=s}a+="\n        ";s=n["if"].call(t,t&&t.errorEmulationEnabled,{hash:{},inverse:f.noop,fn:f.program(11,y,r),data:r});if(s||s===0){a+=s}a+='\n        <li class="menu__item fast-click-highlighted">\n            <a href="';if(o=n.desktopURI){s=o.call(t,{hash:{},data:r})}else{o=t&&t.desktopURI;s=typeof o===u?o.call(t,{hash:{},data:r}):o}a+=c(s)+'" id="desktop" class="menu-item__link" track="click:desktop" target="_blank">\n                <span class="menu-item__icon">'+c((o=n.icon||t&&t.icon,l={hash:{},data:r},o?o.call(t,"menu.desktop",l):d.call(t,"icon","menu.desktop",l)))+'</span>\n                <span class="menu-item__label">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_MOBILE_DESKTOP",l):d.call(t,"str","LBL_MOBILE_DESKTOP",l)))+'</span>\n            </a>\n        </li>\n        <li class="menu__item fast-click-highlighted">\n            <a href="#logout" track="click:logout" class="menu-item__link">\n                <span class="menu-item__icon">'+c((o=n.icon||t&&t.icon,l={hash:{},data:r},o?o.call(t,"menu.logout",l):d.call(t,"icon","menu.logout",l)))+'</span>\n                <span class="menu-item__label">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_LOGOUT",l):d.call(t,"str","LBL_LOGOUT",l)))+"</span>\n            </a>\n        </li>\n    </ul>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l="function",u=this.escapeExpression,c=this;function d(e,t,n){var i="",r;i+='\n            <tr>\n                <td>\n                    <input type="checkbox" class="custom-data-checkbox" data-module="'+u(typeof e===l?e.apply(e):e)+'">\n                    <span>'+u(typeof e===l?e.apply(e):e)+'</span>\n                </td>\n                <td>\n                    <input type="number" class="icon-border" data-module="'+u(typeof e===l?e.apply(e):e)+'" value="'+u((r=n&&n.recordsPerModule,typeof r===l?r.apply(e):r))+'">\n                </td>\n            </tr>\n        ';return i}function f(e,t){var i="",r,a;i+='\n                <option data-name="';if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+'">';if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+" (";if(a=n.type){r=a.call(e,{hash:{},data:t})}else{a=e&&e.type;r=typeof a===l?a.call(e,{hash:{},data:t}):a}i+=u(r)+")</option>\n            ";return i}a+='<div class="scroll">\n    <div>\n        <h3>Generate all data</h3>\n        <span>Records per module</span><input id="all-data-amount" type="text" class="icon-border" value="';if(o=n.recordsPerModule){s=o.call(t,{hash:{},data:r})}else{o=t&&t.recordsPerModule;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'">\n        <br>\n        <button data-action="generate-default-data" class="btn primary-btn active">Generate</button>\n    </div>\n    <hr>\n    <div>\n        <h3>Generate data by module</h3>\n        <table>\n        ';s=n.each.call(t,t&&t._modules,{hash:{},inverse:c.noop,fn:c.programWithDepth(1,d,r,t),data:r});if(s||s===0){a+=s}a+='\n        </table>\n        <button data-action="generate-selected-data" class="btn primary-btn active">Generate selected</button>\n    </div>\n    <hr>\n    <div>\n        <h3>Generate all relationships</h3>\n        <button data-action="generate-default-relationship" class="btn primary-btn active">Generate</button>\n        <hr>\n\n        <h3>Generate custom relationship</h3>\n        <span>Select relationship</span>\n        <select id="relation-select">\n            ';s=n.each.call(t,t&&t._relationships,{hash:{},inverse:c.noop,fn:c.program(3,f,r),data:r});if(s||s===0){a+=s}a+='\n        </select>\n        <div>\n            Parent module <span id="parent-module" style="font-weight: bold"></span>\n            <br>\n            Number of records<input type="number" class="icon-border" id="parent-module-amount" value="';if(o=n.parentRelationsAmount){s=o.call(t,{hash:{},data:r})}else{o=t&&t.parentRelationsAmount;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'">\n        </div>\n        <div>\n            Child module <span id="child-module" style="font-weight: bold"></span>\n            <br>\n            Number of records<input type="number" class="icon-border" id="child-module-amount" value="';if(o=n.childRelationsAmount){s=o.call(t,{hash:{},data:r})}else{o=t&&t.childRelationsAmount;s=typeof o===l?o.call(t,{hash:{},data:r}):o}a+=u(s)+'">\n        </div>\n        <button data-action="generate-selected-relationship" class="btn primary-btn active">Generate</button>\n    </div>\n</div>\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=this,c="function",d=this.escapeExpression,f=n.helperMissing;function h(e,t){var i="",r,a,s;i+='\n                    <div class="bucket-header">\n                        ';if(a=n.key){r=a.call(e,{hash:{},data:t})}else{a=e&&e.key;r=typeof a===c?a.call(e,{hash:{},data:t}):a}i+=d(r)+":\n                    </div>\n                    ";r=(a=n.iterate||e&&e.iterate,s={hash:{},inverse:u.noop,fn:u.programWithDepth(2,p,t,e),data:t},a?a.call(e,e&&e.value,s):f.call(e,"iterate",e&&e.value,s));if(r||r===0){i+=r}i+="\n                ";return i}function p(e,t,i){var r="",a;r+='\n                        <div class="offline-property">\n                        ';a=n["if"].call(e,(a=e&&e.value,a==null||a===false?a:a.isBoolean),{hash:{},inverse:u.noop,fn:u.programWithDepth(3,m,t,i),data:t});if(a||a===0){r+=a}r+="\n                        ";a=n["if"].call(e,(a=e&&e.value,a==null||a===false?a:a.isString),{hash:{},inverse:u.noop,fn:u.programWithDepth(6,g,t,i),data:t});if(a||a===0){r+=a}r+="\n                        </div>\n                    ";return r}function m(e,t,i){var r="",a,s;r+='\n                            <input type="checkbox" ';a=n["if"].call(e,(a=e&&e.value,a==null||a===false?a:a.value),{hash:{},inverse:u.noop,fn:u.program(4,_,t),data:t});if(a||a===0){r+=a}r+=' class="checkbox_default" data-key="';if(s=n.key){a=s.call(e,{hash:{},data:t})}else{s=e&&e.key;a=typeof s===c?s.call(e,{hash:{},data:t}):s}r+=d(a)+'" data-section="'+d((a=i&&i.key,typeof a===c?a.apply(e):a))+'">';if(s=n.key){a=s.call(e,{hash:{},data:t})}else{s=e&&e.key;a=typeof s===c?s.call(e,{hash:{},data:t}):s}r+=d(a)+"\n                        ";return r}function _(e,t){return"checked"}function g(e,t,i){var r="",a,s;r+="\n                            <label>";if(s=n.key){a=s.call(e,{hash:{},data:t})}else{s=e&&e.key;a=typeof s===c?s.call(e,{hash:{},data:t}):s}r+=d(a)+'<input type="text" style="border: 1px solid darkgray;margin: 0" data-key="';if(s=n.key){a=s.call(e,{hash:{},data:t})}else{s=e&&e.key;a=typeof s===c?s.call(e,{hash:{},data:t}):s}r+=d(a)+'" value="'+d((a=(a=e&&e.value,a==null||a===false?a:a.value),typeof a===c?a.apply(e):a))+'" data-section="'+d((a=i&&i.key,typeof a===c?a.apply(e):a))+'"/></label>\n                        ';return r}a+='\n<div class="box__edit page__offline">\n    <div class="scroll">\n        <div class="listing">\n\n\n            <div style="padding-left: 12px; margin-bottom: 10px;">\n                ';s=(o=n.iterate||t&&t.iterate,l={hash:{},inverse:u.noop,fn:u.program(1,h,r),data:r},o?o.call(t,t&&t.sections,l):f.call(t,"iterate",t&&t.sections,l));if(s||s===0){a+=s}a+='\n            </div>\n            <div><a href="#Offline/offlineDataGeneration" class="offline-list__item fast-click-highlighted">Generate fake data</a></div>\n        </div>\n    </div>\n</div>\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=n.helperMissing,l=this.escapeExpression,u=this,c="function";function d(e,t){var i="",r,a,s;i+='\n                <div class="bucket-header">\n                    '+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_BULK_LOAD_DOWNLOAD_SETTINGS",s):o.call(e,"str","LBL_BULK_LOAD_DOWNLOAD_SETTINGS",s)))+'\n                </div>\n                <div class="offline__text-container">\n                    <a class="btn btn-primary start_stop_button" track="click:preload_records">';if(a=n.startStopButtText){r=a.call(e,{hash:{},data:t})}else{a=e&&e.startStopButtText;r=typeof a===c?a.call(e,{hash:{},data:t}):a}i+=l(r)+'</a>\n                    <!--<div class="el__spinner offline__spinner-total">-->\n                        <!--<div class="spinner__circle spinner__circle_1"></div>-->\n                        <!--<div class="spinner__circle spinner__circle_2"></div>-->\n                        <!--<div class="spinner__circle spinner__circle_3"></div>-->\n                    <!--</div>-->\n                    <div class="status-text">';if(a=n.statusText){r=a.call(e,{hash:{},data:t})}else{a=e&&e.statusText;r=typeof a===c?a.call(e,{hash:{},data:t}):a}i+=l(r)+'</div>\n                    <div class="bh__timestamp">\n                        '+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_OFFLINE_LAST_DOWNLOAD",s):o.call(e,"str","LBL_OFFLINE_LAST_DOWNLOAD",s)))+": <span>"+l((r=(r=e&&e.dbStats,r==null||r===false?r:r.lastCompletedTs),typeof r===c?r.apply(e):r))+"</span>\n                    </div>\n                    "+l((a=n.partial||e&&e.partial,s={hash:{},data:t},a?a.call(e,"spinner",e,s):o.call(e,"partial","spinner",e,s)))+"\n                </div>\n                ";r=n["if"].call(e,e&&e.showCellularCb,{hash:{},inverse:u.noop,fn:u.program(2,f,t),data:t});if(r||r===0){i+=r}i+="\n            ";return i}function f(e,t){var i="",r,a,s;i+='\n                    <div class="offline__control-group">\n                        <div class="offline__controls">\n                            <div>\n                                <input type="checkbox" class="checkbox_custom"';r=n["if"].call(e,e&&e.useCellularData,{hash:{},inverse:u.noop,fn:u.program(3,h,t),data:t});if(r||r===0){i+=r}i+=">\n                                ";r=n["if"].call(e,e&&e.useCellularData,{hash:{},inverse:u.program(7,m,t),fn:u.program(5,p,t),data:t});if(r||r===0){i+=r}i+='\n                            </div>\n                        </div>\n                        <label class="offline__control-label">'+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_BULK_LOAD_USE_CELLULAR",s):o.call(e,"str","LBL_BULK_LOAD_USE_CELLULAR",s)))+'</label>\n                        <div class="offline__message-wifi">'+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_BULK_LOAD_CONNECTION_USE_MESSAGE",s):o.call(e,"str","LBL_BULK_LOAD_CONNECTION_USE_MESSAGE",s)))+"</div>\n                    </div>\n                ";return i}function h(e,t){return" checked"}function p(e,t){var i="",r,a;i+="\n                                    "+l((r=n.icon||e&&e.icon,a={hash:{additionalClass:"checkbox-icon"},data:t},r?r.call(e,"edit.checkboxOn",a):o.call(e,"icon","edit.checkboxOn",a)))+"\n                                ";return i}function m(e,t){var i="",r,a;i+="\n                                    "+l((r=n.icon||e&&e.icon,a={hash:{additionalClass:"checkbox-icon"},data:t},r?r.call(e,"edit.checkboxOff",a):o.call(e,"icon","edit.checkboxOff",a)))+"\n                                ";return i}function _(e,t){var i="",r,a,s;i+='-->\n                <!--<div class="bucket-header">-->\n                    <!--'+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_OFFLINE_DB_SIZE",s):o.call(e,"str","LBL_OFFLINE_DB_SIZE",s)))+'-->\n                <!--</div>-->\n                <!--<div class="text-container">-->\n                    <!--'+l((a=n.humanFileSize||e&&e.humanFileSize,s={hash:{},data:t},a?a.call(e,(r=e&&e.dbStats,r==null||r===false?r:r.dbSize),s):o.call(e,"humanFileSize",(r=e&&e.dbStats,r==null||r===false?r:r.dbSize),s)))+"-->\n                <!--</div>-->\n            <!--";return i}function g(e,t){var i="",r,a,s;i+='\n                <div class="bucket-header">\n                    '+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_OFFLINE_TOTAL_RECORDS",s):o.call(e,"str","LBL_OFFLINE_TOTAL_RECORDS",s)))+': <span class="total-count">'+l((r=(r=e&&e.dbStats,r==null||r===false?r:r.totalRecordsCount),typeof r===c?r.apply(e):r))+'</span>\n                </div>\n\n                <table class="table">\n                    ';r=n.each.call(e,(r=e&&e.dbStats,r==null||r===false?r:r.modules),{hash:{},inverse:u.noop,fn:u.program(12,v,t),data:t});if(r||r===0){i+=r}i+="\n                </table>\n            ";return i}function v(e,t){var i="",r,a,s;i+='\n                        <tr data-id="'+l((r=e&&e.name,typeof r===c?r.apply(e):r))+'">\n                            <td>\n                                <div class="ellipsis"><span class="label-module-sm label-'+l((r=e&&e.name,typeof r===c?r.apply(e):r))+'">'+l((a=n.moduleIconLabel||e&&e.moduleIconLabel,s={hash:{},data:t},a?a.call(e,e&&e.name,s):o.call(e,"moduleIconLabel",e&&e.name,s)))+"</span> "+l((r=e&&e.moduleName,typeof r===c?r.apply(e):r))+'</div>\n                            </td>\n                            <td width="100" class="td-count">\n                                    <span class="icons">\n                                        <i class="hide offline-icon status-warning"></i>\n                                    </span>\n                                <span class="lbl-count">'+l((r=e&&e.count,typeof r===c?r.apply(e):r))+"</span>\n                            </td>\n                        </tr>\n                    ";return i}function y(e,t){var i="",r,a;i+="\n                "+l((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_LOADING",a):o.call(e,"str","LBL_LOADING",a)))+"\n            ";return i}a+='\n<div class="box__edit page__offline">\n    <div class="scroll">\n        <div class="listing">\n\n            ';s=n["if"].call(t,t&&t.bulkLoaderEnabled,{hash:{},inverse:u.noop,fn:u.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n\n            <!--we decide to hide this information for now-->\n            <!--";s=n["if"].call(t,(s=t&&t.dbStats,s==null||s===false?s:s.dbSize),{hash:{},inverse:u.noop,fn:u.program(9,_,r),data:r});if(s||s===0){a+=s}a+="-->\n\n            ";s=n["if"].call(t,t&&t.dbStats,{hash:{},inverse:u.program(14,y,r),fn:u.program(11,g,r),data:r});if(s||s===0){a+=s}a+="\n\n\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s="function",o=this.escapeExpression;

a+='\n<span class="offline-icon '+o(typeof t===s?t.apply(t):t)+'"></span>\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function",f=this;function h(e,t){var i="",r,a;i+='\n                    <li><a href="#Offline/offlineSettings" class="offline-list__item fast-click-highlighted">'+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OFFLINE_SETTINGS",a):u.call(e,"str","LBL_OFFLINE_SETTINGS",a)))+c((r=n.icon||e&&e.icon,a={hash:{additionalClass:"more"},data:t},r?r.call(e,"header.forward",a):u.call(e,"icon","header.forward",a)))+"</a></li>\n                ";return i}function p(e,t){var i="",r,a;i+='\n                <div class="offline-row">'+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OFFLINE_DATA_ENCRYPTION_ENABLED",a):u.call(e,"str","LBL_OFFLINE_DATA_ENCRYPTION_ENABLED",a)))+"</div>\n            ";return i}a+='\n<div class="box__edit page__offline">\n    <div class="scroll">\n        <div class="listing">\n\n            <div class="offline-row">\n                '+c((o=n.partial||t&&t.partial,l={hash:{},data:r},o?o.call(t,t&&t.offlineStatusIconPartial,t&&t.offlineStatusClass,l):u.call(t,"partial",t&&t.offlineStatusIconPartial,t&&t.offlineStatusClass,l)))+'\n                <span id="offline-message">';if(o=n.offlineMessage){s=o.call(t,{hash:{},data:r})}else{o=t&&t.offlineMessage;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</span>\n            </div>\n\n            <ul class="box__offline-list">\n                <li><a href="#Offline/TxLog" class="offline-list__item fast-click-highlighted">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_TX_LOG",l):u.call(t,"str","LBL_TX_LOG",l)))+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"more"},data:r},o?o.call(t,"header.forward",l):u.call(t,"icon","header.forward",l)))+'</a></li>\n                <li><a href="#Offline/offlineStats" class="offline-list__item fast-click-highlighted">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_RECORDS",l):u.call(t,"str","LBL_RECORDS",l)))+c((o=n.icon||t&&t.icon,l={hash:{additionalClass:"more"},data:r},o?o.call(t,"header.forward",l):u.call(t,"icon","header.forward",l)))+"</a></li>\n                ";s=n["if"].call(t,t&&t._devMode,{hash:{},inverse:f.noop,fn:f.program(1,h,r),data:r});if(s||s===0){a+=s}a+="\n            </ul>\n\n            ";s=n["if"].call(t,t&&t.offlineDbEncrypted,{hash:{},inverse:f.noop,fn:f.program(3,p,r),data:r});if(s||s===0){a+=s}a+='\n\n            <!--\n            <div class="modal-footer">\n                <a href="javascript:void(0)" class="btn btn-primary" id="preload_relationships_button" track="click:preload_rels">'+c((o=n.str||t&&t.str,l={hash:{},data:r},o?o.call(t,"LBL_OFFLINE_PREFETCH_RELATED_ACTION",l):u.call(t,"str","LBL_OFFLINE_PREFETCH_RELATED_ACTION",l)))+"</a> (experimental)\n            </div>\n            -->\n        </div>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression;a+='\n<div class="pull-to-refresh">\n    <span class="icon-wrap">'+u((s=n.icon||t&&t.icon,o={hash:{additionalClass:"spinner"},data:r},s?s.call(t,"ptr.spinner",o):l.call(t,"icon","ptr.spinner",o)))+"</span>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression,c="function",d=this;function f(e,t){return"disabled"}function h(e,t){var i="",r,a;i+="\n        "+u((r=n.partial||e&&e.partial,a={hash:{},data:t},r?r.call(e,"spinner",e,a):l.call(e,"partial","spinner",e,a)))+"\n    ";return i}function p(e,t){var i="",r,a;i+="\n        "+u((r=n.icon||e&&e.icon,a={hash:{},data:t},r?r.call(e,e&&e.iconKey,a):l.call(e,"icon",e&&e.iconKey,a)))+"\n    ";return i}function m(e,t){var i="",r,a;i+="\n            "+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,e&&e.label,a):l.call(e,"str",e&&e.label,a)))+"\n        ";return i}function _(e,t){var i="",r,a;i+="\n            ";if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===c?a.call(e,{hash:{},data:t}):a}i+=u(r)+"\n        ";return i}a+='\n<a action="';if(o=n.name){s=o.call(t,{hash:{},data:r})}else{o=t&&t.name;s=typeof o===c?o.call(t,{hash:{},data:r}):o}a+=u(s)+'" class="context-menu__item ';s=n.unless.call(t,t&&t.isEnabled,{hash:{},inverse:d.noop,fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+='" href="javascript:void(0)" track="click:';if(o=n.name){s=o.call(t,{hash:{},data:r})}else{o=t&&t.name;s=typeof o===c?o.call(t,{hash:{},data:r}):o}a+=u(s)+'">\n    ';s=n["if"].call(t,t&&t.isLoading,{hash:{},inverse:d.program(5,p,r),fn:d.program(3,h,r),data:r});if(s||s===0){a+=s}a+='\n    <span class="action-label">\n        ';s=n["if"].call(t,t&&t.label,{hash:{},inverse:d.program(9,_,r),fn:d.program(7,m,r),data:r});if(s||s===0){a+=s}a+="\n    </span>\n</a>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=n.helperMissing,l=this.escapeExpression,u=this;function c(e,t){var i="",r,a;i+="\n    "+l((r=n.partial||e&&e.partial,a={hash:{},data:t},r?r.call(e,"record-action-button",e,a):o.call(e,"partial","record-action-button",e,a)))+"\n";return i}a+="\n";s=n.each.call(t,t,{hash:{},inverse:u.noop,fn:u.program(1,c,r),data:r});if(s||s===0){a+=s}a+="\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o="function",l=this.escapeExpression,u=n.helperMissing,c=this;function d(e,t,i){var r="",a,s,d;r+='\n            <li class="related-action__item fast-click-highlighted ';a=n["if"].call(e,e&&e.isEmpty,{hash:{},inverse:c.noop,fn:c.program(2,f,t),data:t});if(a||a===0){r+=a}r+='">\n                <a href="#'+l((a=(a=i&&i.model,a==null||a===false?a:a.module),typeof a===o?a.apply(e):a))+"/"+l((a=(a=i&&i.model,a==null||a===false?a:a.id),typeof a===o?a.apply(e):a))+"/link/"+l((a=(a=e&&e.context,a==null||a===false?a:a.link),typeof a===o?a.apply(e):a))+'" class="related-action-item__link">\n                    '+l((s=n.iconModule||e&&e.iconModule,d={hash:{},data:t},s?s.call(e,e&&e.module,d):u.call(e,"iconModule",e&&e.module,d)))+"\n                    "+l((s=n.str||e&&e.str,d={hash:{},data:t},s?s.call(e,e&&e.label,(a=i&&i.model,a==null||a===false?a:a.module),d):u.call(e,"str",e&&e.label,(a=i&&i.model,a==null||a===false?a:a.module),d)))+"\n                    ";a=n["if"].call(e,e&&e.showCount,{hash:{},inverse:c.noop,fn:c.program(4,h,t),data:t});if(a||a===0){r+=a}r+="\n                </a>\n                ";a=n["if"].call(e,e&&e.canCreate,{hash:{},inverse:c.noop,fn:c.programWithDepth(6,p,t,i),data:t});if(a||a===0){r+=a}r+="\n            </li>\n        ";return r}function f(e,t){return"related-action__item_empty"}function h(e,t){var i="",r,a;i+='<span class="records-count">(';if(a=n.recordsCount){r=a.call(e,{hash:{},data:t})}else{a=e&&e.recordsCount;r=typeof a===o?a.call(e,{hash:{},data:t}):a}i+=l(r)+")</span>";return i}function p(e,t,i){var r="",a,s,c;r+='\n                    <a class="related-action-item__add" href="#'+l((a=(a=i&&i.model,a==null||a===false?a:a.module),typeof a===o?a.apply(e):a))+"/"+l((a=(a=i&&i.model,a==null||a===false?a:a.id),typeof a===o?a.apply(e):a))+"/link/"+l((a=(a=e&&e.context,a==null||a===false?a:a.link),typeof a===o?a.apply(e):a))+'/create">\n                        '+l((s=n.icon||e&&e.icon,c={hash:{},data:t},s?s.call(e,"detail.createRelated",c):u.call(e,"icon","detail.createRelated",c)))+"\n                    </a>\n                ";return r}a+='\n<div class="listing">\n    <ul class="box__related-actions">\n        ';s=n.each.call(t,t&&t.relatedList,{hash:{},inverse:c.noop,fn:c.programWithDepth(1,d,r,t),data:r});if(s||s===0){a+=s}a+="\n    </ul>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=n.helperMissing,l=this.escapeExpression,u="function",c=this;function d(e,t){var i="",r,a,s;i+='\n                <li class="menu__item fast-click-highlighted">\n                    <a class="menu-item__link" href="#" action="';if(a=n.name){r=a.call(e,{hash:{},data:t})}else{a=e&&e.name;r=typeof a===u?a.call(e,{hash:{},data:t}):a}i+=l(r)+'">\n                        <span class="menu-item__icon">\n                            ';r=n["if"].call(e,e&&e.iconKey,{hash:{},inverse:c.program(4,h,t),fn:c.program(2,f,t),data:t});if(r||r===0){i+=r}i+='\n                        </span>\n                        <span class="menu-item__label">\n                            '+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,e&&e.label,s):o.call(e,"str",e&&e.label,s)))+"\n                        </span>\n                    </a>\n                </li>\n            ";return i}function f(e,t){var i="",r,a;i+="\n                                "+l((r=n.icon||e&&e.icon,a={hash:{},data:t},r?r.call(e,e&&e.iconKey,a):o.call(e,"icon",e&&e.iconKey,a)))+"\n                            ";return i}function h(e,t){var i="",r,a;i+="\n                                "+l((r=n.iconModule||e&&e.iconModule,a={hash:{},data:t},r?r.call(e,e&&e.module,a):o.call(e,"iconModule",e&&e.module,a)))+"\n                            ";return i}a+='<div class="right-menu">\n    <div class="right-menu__corner"></div>\n    <div class="box__menu">\n        <ul class="menu__inner">\n            ';s=n.each.call(t,t&&t.availableActions,{hash:{},inverse:c.noop,fn:c.program(1,d,r),data:r});if(s||s===0){a+=s}a+="\n        </ul>\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression;a+='\n<div class="view__search">\n    <div class="box__search-query not-empty">\n        '+u((s=n.icon||t&&t.icon,o={hash:{additionalClass:"box__search-icon"},data:r},s?s.call(t,"header.search",o):l.call(t,"icon","header.search",o)))+"\n        "+u((s=n.partial||t&&t.partial,o={hash:{},data:r},s?s.call(t,"spinner",t,o):l.call(t,"partial","spinner",t,o)))+'\n        <input type="text" class="search-query" value="">\n        '+u((s=n.icon||t&&t.icon,o={hash:{additionalClass:"clear-button"},data:r},s?s.call(t,"header.clear",o):l.call(t,"icon","header.clear",o)))+'\n    </div>\n    <span class="searchCancelBtn fast-click-highlighted" track="click:searchCancel">\n        <a href="javascript:void(0)" class="btn">'+u((s=n.str||t&&t.str,o={hash:{},data:r},s?s.call(t,"LBL_CANCEL_BUTTON_LABEL",o):l.call(t,"str","LBL_CANCEL_BUTTON_LABEL",o)))+"</a>\n    </span>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o=n.helperMissing,l=this.escapeExpression,u=this,c="function",d=n.blockHelperMissing;function f(e,t,i){var r="",a;r+="\n                ";a=n.each.call(e,e&&e.fields,{hash:{},inverse:u.noop,fn:u.programWithDepth(2,h,t,i),data:t});if(a||a===0){r+=a}r+="\n            ";return r}function h(e,t,i){var r="",a,s;r+="\n                    "+l((a=n.field||i&&i.field,s={hash:{},data:t},a?a.call(e,i,s):o.call(e,"field",i,s)))+"\n                ";return r}function p(e,t){var i="",r,a,s;i+='\n                <div class="control-group">\n                    <label class="control-label" for="offline-toggle">'+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_OFFLINE_MODE",s):o.call(e,"str","LBL_OFFLINE_MODE",s)))+'</label>\n                    <div class="controls" '+l((a=n["debug-attributes"]||e&&e["debug-attributes"],s={hash:{},data:t},a?a.call(e,"text",'field-name="offline-mode"',s):o.call(e,"debug-attributes","text",'field-name="offline-mode"',s)))+" "+l((a=n["debug-attributes"]||e&&e["debug-attributes"],s={hash:{},data:t},a?a.call(e,"text",'field-type="bool"',s):o.call(e,"debug-attributes","text",'field-type="bool"',s)))+">\n                        ";r=n["if"].call(e,e&&e._offlineEnabled,{hash:{},inverse:u.program(7,_,t),fn:u.program(5,m,t),data:t});if(r||r===0){i+=r}i+="\n                    </div>\n                </div>\n            ";return i}function m(e,t){var i="",r,a;i+='\n                            <input type="checkbox" id="offline-toggle" class="checkbox_custom" checked />\n                            '+l((r=n.icon||e&&e.icon,a={hash:{additionalClass:"checkbox-icon"},data:t},r?r.call(e,"edit.checkboxOn",a):o.call(e,"icon","edit.checkboxOn",a)))+"\n                        ";return i}function _(e,t){var i="",r,a;i+='\n                            <input type="checkbox" id="offline-toggle" class="checkbox_custom" />\n                            '+l((r=n.icon||e&&e.icon,a={hash:{additionalClass:"checkbox-icon"},data:t},r?r.call(e,"edit.checkboxOff",a):o.call(e,"icon","edit.checkboxOff",a)))+"\n                        ";return i}function g(e,t){var i="",r,a,s;i+='\n                <div class="control-group">\n                    <label class="control-label" for="touchid-toggle">'+l((a=n.str||e&&e.str,s={hash:{},data:t},a?a.call(e,"LBL_TOUCHID",s):o.call(e,"str","LBL_TOUCHID",s)))+'</label>\n                    <div class="controls" '+l((a=n["debug-attributes"]||e&&e["debug-attributes"],s={hash:{},data:t},a?a.call(e,"text",'field-name="touchid-mode"',s):o.call(e,"debug-attributes","text",'field-name="touchid-mode"',s)))+" "+l((a=n["debug-attributes"]||e&&e["debug-attributes"],s={hash:{},data:t},a?a.call(e,"text",'field-type="bool"',s):o.call(e,"debug-attributes","text",'field-type="bool"',s)))+">\n                        ";r=n["if"].call(e,e&&e._touchIdEnabled,{hash:{},inverse:u.program(12,y,t),fn:u.program(10,v,t),data:t});if(r||r===0){i+=r}i+="\n                    </div>\n                </div>\n            ";return i}function v(e,t){var i="",r,a;i+='\n                            <input type="checkbox" id="touchid-toggle" class="checkbox_custom" checked />\n                            '+l((r=n.icon||e&&e.icon,a={hash:{additionalClass:"checkbox-icon"},data:t},r?r.call(e,"edit.checkboxOn",a):o.call(e,"icon","edit.checkboxOn",a)))+"\n                        ";return i}function y(e,t){var i="",r,a;i+='\n                            <input type="checkbox" id="touchid-toggle" class="checkbox_custom" />\n                            '+l((r=n.icon||e&&e.icon,a={hash:{additionalClass:"checkbox-icon"},data:t},r?r.call(e,"edit.checkboxOff",a):o.call(e,"icon","edit.checkboxOff",a)))+"\n                        ";return i}a+='\n<div class="page__settings box__edit">\n    <div class="scroll">\n        <div class="pad">\n            ';s=(s=(s=(s=t&&t.meta,s==null||s===false?s:s.panels),typeof s===c?s.apply(t):s),d.call(t,s,{hash:{},inverse:u.noop,fn:u.programWithDepth(1,f,r,t),data:r}));if(s||s===0){a+=s}a+="\n\n            ";s=n["if"].call(t,t&&t._showOfflineButton,{hash:{},inverse:u.noop,fn:u.program(4,p,r),data:r});if(s||s===0){a+=s}a+="\n\n            ";s=n["if"].call(t,t&&t._showTouchIdButton,{hash:{},inverse:u.noop,fn:u.program(9,g,r),data:r});if(s||s===0){a+=s}a+='\n\n            <div class="modal-footer"></div>\n        </div>\n    </div>\n</div>\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression;a+='\n<textarea class="taggable" placeholder="'+u((s=n.str||t&&t.str,o={hash:{},data:r},s?s.call(t,"LBL_MOBILE_ACTIVITYSTREAM_POST_PLACEHOLDER",o):l.call(t,"str","LBL_MOBILE_ACTIVITYSTREAM_POST_PLACEHOLDER",o)))+'"></textarea>\n<div class="taggable-shadow"></div>\n<ul class="taggable-dropdown" style="display:none;"></ul>\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l,u=n.helperMissing,c=this.escapeExpression,d="function",f=this;function h(e,t){var i="",r,a;i+='\n                            <span class="sbSkipBtn">\n                                <a href="javascript:void(0)" class="btn sb__control left">'+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_SKIP",a):u.call(e,"str","LBL_SKIP",a)))+'</a>\n                            </span>\n                            <span class="sbEnableBtn">\n                                <a href="javascript:void(0)" class="btn sb__control right">'+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_ENABLE",a):u.call(e,"str","LBL_ENABLE",a)))+"</a>\n                            </span>\n                        ";return i}function p(e,t){var i="",r,a;i+='\n                            <span class="sbOkBtn">\n                                <a href="javascript:void(0)" class="btn sb__control">'+c((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,"LBL_OK",a):u.call(e,"str","LBL_OK",a)))+"</a>\n                            </span>\n                        ";return i}a+='\n<div class="box__edit">\n    <div class="setupbuddy__wrapper scroll">\n        <div class="sb__text__container">\n            <div class="sb__text">\n                <div class="sb__icon">\n                    <div class="icon-touch-id"/>\n                </div>\n                <div class="sb__header">';if(o=n.sbHeader){s=o.call(t,{hash:{},data:r})}else{o=t&&t.sbHeader;s=typeof o===d?o.call(t,{hash:{},data:r}):o}a+=c(s)+'</div>\n\n                <span class="touch-id-enrolled">\n                    <div class="sb__description">'+c((o=n.nl2br||t&&t.nl2br,l={hash:{},data:r},o?o.call(t,t&&t.sbDescription,l):u.call(t,"nl2br",t&&t.sbDescription,l)))+'</div>\n                    <div class="sb__controls">\n\n                        ';s=n["if"].call(t,t&&t._isTouchIdEnrolled,{hash:{},inverse:f.program(3,p,r),fn:f.program(1,h,r),data:r});if(s||s===0){a+=s}a+='\n\n\n                    </div>\n                </span>\n            </div>\n        </div>\n        <div class="sb__footer"></div>\n    </div>\n</div>\n';return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="",s,o,l=n.helperMissing,u=this.escapeExpression,c="function",d=this;function f(e,t){var i="",r,a;i+='\n            <div class="tutorial-title">'+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,e&&e.textTitle,a):l.call(e,"str",e&&e.textTitle,a)))+"</div>\n        ";return i}function h(e,t){var i="",r,a;i+='\n            <div class="tutorial-additional">'+u((r=n.str||e&&e.str,a={hash:{},data:t},r?r.call(e,e&&e.textAdditional,a):l.call(e,"str",e&&e.textAdditional,a)))+"</div>\n        ";return i}a+='\n<div class="text-container ';if(o=n.textFormatClass){s=o.call(t,{hash:{},data:r})}else{o=t&&t.textFormatClass;s=typeof o===c?o.call(t,{hash:{},data:r}):o}a+=u(s)+'">\n    <div class="text">\n        ';s=n["if"].call(t,t&&t.textTitle,{hash:{},inverse:d.noop,fn:d.program(1,f,r),data:r});if(s||s===0){a+=s}a+="\n        ";if(o=n.text){s=o.call(t,{hash:{},data:r})}else{o=t&&t.text;s=typeof o===c?o.call(t,{hash:{},data:r}):o}if(s||s===0){a+=s}a+="\n        ";s=n["if"].call(t,t&&t.textAdditional,{hash:{},inverse:d.noop,fn:d.program(3,h,r),data:r});if(s||s===0){a+=s}a+="\n    </div>\n</div>\n";return a})},function(e,t,n){var i=n(428);e.exports=(i["default"]||i).template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);r=r||{};var a="";a+='\n<div id="tutorial__view">\n    <svg xlink="http://www.w3.org/1999/xlink" id="tutorial" height="100%" width="100%">\n        <defs>\n            <mask id="marker-glow">\n                <rect x="0" y="0" width="100%" height="100%" fill="white" />\n            </mask>\n            <g id="marker">\n                <circle cx="22" cy="22" r="20" fill="none" stroke="#fff" stroke-width="2px" />\n                <line x1="22" y1="42" x2="22" y2="67" stroke="#fff" stroke-width="1" />\n                <circle cx="22" cy="67" r="2" fill="#fff" />\n            </g>\n            <g id="tutorial-swipe">\n                <circle cx="65" cy="13" r="13" fill="#fff" />\n                <line x1="65" y1="26" x2="65" y2="46" stroke="#fff" stroke-width="2" />\n                <circle cx="65" cy="48" r="2.5" fill="#fff" />\n                <polygon points="0 13,8 8,8 12,49 12,49 14,8 14,8 18" fill="#fff" />\n            </g>\n        </defs>\n        <rect height="100%" width="100%" fill="black" fill-opacity="0.5" stroke="none" mask="url(#marker-glow)" />\n    </svg>\n    <div id="tutorial-content"></div>\n</div>\n';return a})}]);