/*
 * Your installation or use of this SugarCRM file is subject to the applicable
 * terms available at
 * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.
 * If you do not agree to all of the applicable terms or do not have the
 * authority to bind the entity as an authorized representative, then do not
 * install or use this SugarCRM file.
 *
 * Copyright (C) SugarCRM Inc. All rights reserved.
 */
/*
 * Includes TraceKit
 * https://github.com/getsentry/TraceKit
 * MIT License
 *
 * Copyright 2014 Matt Robenolt and other contributors
 * Released under the BSD license
 * https://github.com/getsentry/raven-js/blob/master/LICENSE
 *
Copyright (c) 2014 Matt Robenolt and other contributors
All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright notice,
  this list of conditions and the following disclaimer.
* Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation and/or other materials
  provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/*------------------------------
https://github.com/caolan/async
MIT License
Copyright (c) 2010 Caolan McMahon
*/

/*------------------------------
http://backbonejs.org/
MIT License
Copyright (c) 2010-2012 Jeremy Ashkenas, DocumentCloud
*/

/*------------------------------
http://underscorejs.org/
MIT License
Copyright (c) 2009-2012 Jeremy Ashkenas, DocumentCloud
*/

/*------------------------------
http://handlebarsjs.com/
MIT License
Copyright (C) 2011 by Yehuda Katz
*/

/*------------------------------
https://github.com/marcuswestin/store.js/

Modifications made by SugarCRM Inc. (c) 2014. These modifications are subject to the same terms as the MIT.
For information on the full license terms or related notices, go to http://www.sugarcrm.com/third-party-software. 

The MIT License (MIT)
Copyright (c) 2010-2013 Marcus Westin
*/

/*------------------------------
Modifications made by SugarCRM Inc. (c) 2014. These modifications are subject to the same terms as the MIT.
For information on the full license terms or related notices, go to http://www.sugarcrm.com/third-party-software. 

http://zeptojs.com
MIT License
Copyright (c) 2010-2012 Thomas Fuchs
*/

/*------------------------------
fastclick
Modifications made by SugarCRM Inc. (c) 2014. These modifications are subject to the same terms as the MIT.
For information on the full license terms or related notices, go to http://www.sugarcrm.com/third-party-software.
 
MIT License
The Financial Times Limited [All Rights Reserved]
*/

/*------------------------------
sugarapi.js
pull-to-refresh.js
(c) SugarCRM Inc.
*/

/*------------------------------
MIT License
Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
*/

/**
 * ScrollFix v0.1
 * http://www.joelambert.co.uk
 *
 * Copyright 2011, Joe Lambert.
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */

/*------------------------------
https://code.google.com/p/jsjpegmeta/
MIT License
Copyright (c) 2009 Ben Leslie
*/

/*------------------------------
https://github.com/stomita/ios-imagefile-megapixel
MIT License
Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>
*/

/*********************************************************************************
Zynga Scroller
https://github.com/zynga/scroller

Copyright (c) 2011 Zynga Inc., http://zynga.com/

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
********************************************************************************/

/*------------------------------
 moment.js
 Copyright (c) 2011-2013 Tim Wood, Iskren Chernev, Moment.js contributors
 MIT License
*/

/* https://github.com/jasny/jquery.smartbanner

Modifications made by SugarCRM Inc. (c) 2014. These modifications are subject to the same terms as the MIT.
For information on the full license terms or related notices, go to http://www.sugarcrm.com/third-party-software. 

Copyright (c) Arnold Daniels <arnold@jasny.net>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is furnished
to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/


/*
##nvd3.js License

Copyright (c) 2011, 2012 [Novus Partners, Inc.][novus]

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

[novus]: https://www.novus.com/



##d3.js License

Copyright (c) 2012, Michael Bostock
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright notice, this
  list of conditions and the following disclaimer.

* Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.

* The name Michael Bostock may not be used to endorse or promote products
  derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL MICHAEL BOSTOCK BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*------------------------------
http://www.idangero.us/swiper
MIT License
Copyright (c) 2014 Vladimir Kharlampidi
*/

/*
 * Your installation or use of this SugarCRM file is subject to the applicable
 * terms available at
 * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.
 * If you do not agree to all of the applicable terms or do not have the
 * authority to bind the entity as an authorized representative, then do not
 * install or use this SugarCRM file.
 *
 * Copyright (C) SugarCRM Inc. All rights reserved.
 */

/*Copyright (c) 2008, ZETETIC LLC
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:
    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
    * Neither the name of the ZETETIC LLC nor the
      names of its contributors may be used to endorse or promote products
      derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY ZETETIC LLC ''AS IS'' AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL ZETETIC LLC BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

(function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:false};e[r].call(i.exports,i,i.exports,n);i.loaded=true;return i.exports}n.m=e;n.c=t;n.p="";return n(0)})([function(e,t,n){e.exports=n(41)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){window.$=n(42);n(43);n(44);n(45);n(46);n(47);n(48);window.d3=n(49);window._=n(50);_.mixin(n(51));n(53);_.getNested=function(e){return function t(){var t=arguments[1];arguments[1]=_.isArray(t)?t:String(t);return e.apply(this,arguments)}}(_.getNested);window.moment=n(56);window.async=n(160);window.store=n(163);window.JpegMeta=n(164);window.MegaPixImage=n(165);window.JPEGEncoder=n(166);window.FastClick=n(167);window.Scroller=n(168);window.EasyScroller=n(169);window.Raven=n(170);n(171);n(172);n(173);n(174);n(175);if(true){window.ScrollFix=n(176);n(177);n(178)}if(false){window.sinon=require("imports?global=>window!%app.lib%/sinon-server.js")}n(182);window.Handlebars=n(184);window.version_compare=n(185);window.SUGAR=n(186);n(187);n(188);n(189);n(190);n(191);n(192);n(193);n(194);n(195);n(196);n(197);n(198);n(199);n(200);n(201);n(202);n(203);n(204);n(205);n(206);n(207);n(208);n(209);n(210);n(211);n(212);n(213);n(214);n(215);n(216);n(217);n(218);n(219);n(220);n(221);n(222);n(223);n(224);n(225);n(226);n(227);n(228);n(229);n(230);n(231);n(232);n(233);n(234);n(235);n(236);n(237);n(238);n(239);n(240);if(["e2e","debug","qa"].indexOf("store")!==-1){n(241)}},function(e,t){var n=function(){var e,t,n,r,i=[],a=i.slice,s=i.filter,o=window.document,l={},u={},c={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,d=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,h=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,p=/^(?:body|html)$/i,m=/([A-Z])/g,g=["val","css","html","text","data","width","height","offset"],_=["after","prepend","before","append"],v=o.createElement("table"),y=o.createElement("tr"),b={tr:o.createElement("tbody"),tbody:v,thead:v,tfoot:v,td:y,th:y,"*":o.createElement("div")},M=/complete|loaded|interactive/,x=/^[\w-]*$/,w={},S=w.toString,k={},L,T,E=o.createElement("div"),D={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},A=Array.isArray||function(e){return e instanceof Array};k.matches=function(e,t){if(!t||!e||e.nodeType!==1)return false;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,a=!i;if(a)(i=E).appendChild(e);r=~k.qsa(i,t).indexOf(e);a&&E.removeChild(e);return r};function Y(e){return e==null?String(e):w[S.call(e)]||"object"}function C(e){return Y(e)=="function"}function R(e){return e!=null&&e==e.window}function O(e){return e!=null&&e.nodeType==e.DOCUMENT_NODE}function P(e){return Y(e)=="object"}function I(e){return P(e)&&!R(e)&&Object.getPrototypeOf(e)==Object.prototype}function N(e){return typeof e.length=="number"}function F(e){return s.call(e,function(e){return e!=null})}function H(e){return e.length>0?n.fn.concat.apply([],e):e}L=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})};function j(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}T=function(e){return s.call(e,function(t,n){return e.indexOf(t)==n})};function U(e){return e in u?u[e]:u[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function B(e,t){return typeof t=="number"&&!c[j(e)]?t+"px":t}function z(e){var t,n;if(!l[e]){t=o.createElement(e);o.body.appendChild(t);n=getComputedStyle(t,"").getPropertyValue("display");t.parentNode.removeChild(t);n=="none"&&(n="block");l[e]=n}return l[e]}function W(e){return"children"in e?a.call(e.children):n.map(e.childNodes,function(e){if(e.nodeType==1)return e})}k.fragment=function(t,r,i){var s,l,u;if(d.test(t))s=n(o.createElement(RegExp.$1));if(!s){if(t.replace)t=t.replace(h,"<$1></$2>");if(r===e)r=f.test(t)&&RegExp.$1;if(!(r in b))r="*";u=b[r];u.innerHTML=""+t;s=n.each(a.call(u.childNodes),function(){u.removeChild(this)})}if(I(i)){l=n(s);n.each(i,function(e,t){if(g.indexOf(e)>-1)l[e](t);else l.attr(e,t)})}return s};k.Z=function(e,t){e=e||[];e.__proto__=n.fn;e.selector=t||"";return e};k.isZ=function(e){return e instanceof k.Z};k.init=function(t,r){var i;if(!t)return k.Z();else if(typeof t=="string"){t=t.trim();if(t[0]=="<"&&f.test(t))i=k.fragment(t,RegExp.$1,r),t=null;else if(r!==e)return n(r).find(t);else i=k.qsa(o,t)}else if(C(t))return n(o).ready(t);else if(k.isZ(t))return t;else{if(A(t))i=F(t);else if(P(t))i=[t],t=null;else if(f.test(t))i=k.fragment(t.trim(),RegExp.$1,r),t=null;else if(r!==e)return n(r).find(t);else i=k.qsa(o,t)}return k.Z(i,t)};n=function(e,t){return k.init(e,t)};function q(n,r,i){for(t in r)if(i&&(I(r[t])||A(r[t]))){if(I(r[t])&&!I(n[t]))n[t]={};if(A(r[t])&&!A(n[t]))n[t]=[];q(n[t],r[t],i)}else if(r[t]!==e)n[t]=r[t]}n.extend=function(e){var t,n=a.call(arguments,1);if(typeof e=="boolean"){t=e;e=n.shift()}n.forEach(function(n){q(e,n,t)});return e};k.qsa=function(e,t){var n,r=t[0]=="#",i=!r&&t[0]==".",s=r||i?t.slice(1):t,o=x.test(s);return O(e)&&o&&r?(n=e.getElementById(s))?[n]:[]:e.nodeType!==1&&e.nodeType!==9?[]:a.call(o&&!r?i?e.getElementsByClassName(s):e.getElementsByTagName(t):e.querySelectorAll(t))};function G(e,t){return t==null?n(e):n(e).filter(t)}n.contains=o.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t&&(t=t.parentNode))if(t===e)return true;return false};function V(e,t,n,r){return C(t)?t.call(e,n,r):t}function $(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function J(t,n){var r=t.className||"",i=r&&r.baseVal!==e;if(n===e)return i?r.baseVal:r;i?r.baseVal=n:t.className=n}function X(e){try{return e?e=="true"||(e=="false"?false:e=="null"?null:+e+""==e?+e:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(t){return e}}n.type=Y;n.isFunction=C;n.isWindow=R;n.isArray=A;n.isPlainObject=I;n.isEmptyObject=function(e){var t;for(t in e)return false;return true};n.inArray=function(e,t,n){return i.indexOf.call(t,e,n)};n.camelCase=L;n.trim=function(e){return e==null?"":String.prototype.trim.call(e)};n.uuid=0;n.support={};n.expr={};n.map=function(e,t){var n,r=[],i,a;if(N(e))for(i=0;i<e.length;i++){n=t(e[i],i);if(n!=null)r.push(n)}else for(a in e){n=t(e[a],a);if(n!=null)r.push(n)}return H(r)};n.each=function(e,t){var n,r;if(N(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===false)return e}else{for(r in e)if(t.call(e[r],r,e[r])===false)return e}return e};n.grep=function(e,t){return s.call(e,t)};if(window.JSON)n.parseJSON=JSON.parse;n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){w["[object "+t+"]"]=t.toLowerCase()});n.fn={forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,indexOf:i.indexOf,concat:i.concat,map:function(e){return n(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return n(a.apply(this,arguments))},ready:function(e){if(M.test(o.readyState)&&o.body)e(n);else o.addEventListener("DOMContentLoaded",function(){e(n)},false);return this},get:function(t){return t===e?a.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){if(this.parentNode!=null)this.parentNode.removeChild(this)})},each:function(e){i.every.call(this,function(t,n){return e.call(t,n,t)!==false});return this},filter:function(e){if(C(e))return this.not(this.not(e));return n(s.call(this,function(t){return k.matches(t,e)}))},add:function(e,t){return n(T(this.concat(n(e,t))))},is:function(e){return this.length>0&&k.matches(this[0],e)},not:function(t){var r=[];if(C(t)&&t.call!==e)this.each(function(e){if(!t.call(this,e))r.push(this)});else{var i=typeof t=="string"?this.filter(t):N(t)&&C(t.item)?a.call(t):n(t);this.forEach(function(e){if(i.indexOf(e)<0)r.push(e)})}return n(r)},has:function(e){return this.filter(function(){return P(e)?n.contains(this,e):n(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!P(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!P(e)?e:n(e)},find:function(e){var t,r=this;if(!e)t=n();else if(typeof e=="object")t=n(e).filter(function(){var e=this;return i.some.call(r,function(t){return n.contains(t,e)})});else if(this.length==1)t=n(k.qsa(this[0],e));else t=this.map(function(){return k.qsa(this,e)});return t},closest:function(e,t){var r=this[0],i=false;if(typeof e=="object")i=n(e);while(r&&!(i?i.indexOf(r)>=0:k.matches(r,e)))r=r!==t&&!O(r)&&r.parentNode;return n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,function(e){if((e=e.parentNode)&&!O(e)&&t.indexOf(e)<0){t.push(e);return e}});return G(t,e)},parent:function(e){return G(T(this.pluck("parentNode")),e)},children:function(e){return G(this.map(function(){return W(this)}),e)},contents:function(){return this.map(function(){return a.call(this.childNodes)})},siblings:function(e){return G(this.map(function(e,t){return s.call(W(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return n.map(this,function(t){return t[e]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display="");if(getComputedStyle(this,"").getPropertyValue("display")=="none")this.style.display=z(this.nodeName)})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=C(e);if(this[0]&&!t)var r=n(e).get(0),i=r.parentNode||this.length>1;return this.each(function(a){n(this).wrapAll(t?e.call(this,a):i?r.cloneNode(true):r)})},wrapAll:function(e){if(this[0]){n(this[0]).before(e=n(e));var t;while((t=e.children()).length)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=C(e);return this.each(function(r){var i=n(this),a=i.contents(),s=t?e.call(this,r):e;a.length?a.wrapAll(s):i.append(s)})},unwrap:function(){this.parent().each(function(){n(this).replaceWith(n(this).children())});return this},clone:function(){return this.map(function(){return this.cloneNode(true)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var r=n(this);(t===e?r.css("display")=="none":t)?r.show():r.hide()})},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var r=this.innerHTML;n(this).empty().append(V(this,e,t,r))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=V(this,e,t,this.textContent);this.textContent=n==null?"":""+n}):0 in this?this[0].textContent:null},attr:function(n,r){var i;return typeof n=="string"&&!(1 in arguments)?!this.length||this[0].nodeType!==1?e:!(i=this[0].getAttribute(n))&&n in this[0]?this[0][n]:i:this.each(function(e){if(this.nodeType!==1)return;if(P(n))for(t in n)$(this,t,n[t]);else $(this,n,V(this,r,e,this.getAttribute(n)))})},removeAttr:function(e){return this.each(function(){this.nodeType===1&&e.split(" ").forEach(function(e){$(this,e)},this)})},prop:function(e,t){e=D[e]||e;return 1 in arguments?this.each(function(n){this[e]=V(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(t,n){var r="data-"+t.replace(m,"-$1").toLowerCase();var i=1 in arguments?this.attr(r,n):this.attr(r);return i!==null?X(i):e},val:function(e){return 0 in arguments?this.each(function(t){this.value=V(this,e,t,this.value)}):this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var r=n(this),i=V(this,e,t,r.offset()),a=r.offsetParent().offset(),s={top:i.top-a.top,left:i.left-a.left};if(r.css("position")=="static")s["position"]="relative";r.css(s)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,r){if(arguments.length<2){var i,a=this[0];if(!a)return;i=getComputedStyle(a,"");if(typeof e=="string")return a.style[L(e)]||i.getPropertyValue(e);else if(A(e)){var s={};n.each(e,function(e,t){s[t]=a.style[L(t)]||i.getPropertyValue(t)});return s}}var o="";if(Y(e)=="string"){if(!r&&r!==0)this.each(function(){this.style.removeProperty(j(e))});else o=j(e)+":"+B(e,r)}else{for(t in e)if(!e[t]&&e[t]!==0)this.each(function(){this.style.removeProperty(j(t))});else o+=j(t)+":"+B(t,e[t])+";"}return this.each(function(){this.style.cssText+=";"+o})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){if(!e)return false;return i.some.call(this,function(e){return this.test(J(e))},U(e))},addClass:function(e){if(!e)return this;return this.each(function(t){if(!("className"in this))return;r=[];var i=J(this),a=V(this,e,t,i);a.split(/\s+/g).forEach(function(e){if(!n(this).hasClass(e))r.push(e)},this);r.length&&J(this,i+(i?" ":"")+r.join(" "))})},removeClass:function(t){return this.each(function(n){if(!("className"in this))return;if(t===e)return J(this,"");r=J(this);V(this,t,n,r).split(/\s+/g).forEach(function(e){r=r.replace(U(e)," ")});J(this,r.trim())})},toggleClass:function(t,r){if(!t)return this;return this.each(function(i){var a=n(this),s=V(this,t,i,J(this));s.split(/\s+/g).forEach(function(t){(r===e?!a.hasClass(t):r)?a.addClass(t):a.removeClass(t)})})},scrollTop:function(t){if(!this.length)return;var n="scrollTop"in this[0];if(t===e)return n?this[0].scrollTop:this[0].pageYOffset;return this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})},scrollLeft:function(t){if(!this.length)return;var n="scrollLeft"in this[0];if(t===e)return n?this[0].scrollLeft:this[0].pageXOffset;return this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})},position:function(){if(!this.length)return;var e=this[0],t=this.offsetParent(),r=this.offset(),i=p.test(t[0].nodeName)?{top:0,left:0}:t.offset();r.top-=parseFloat(n(e).css("margin-top"))||0;r.left-=parseFloat(n(e).css("margin-left"))||0;i.top+=parseFloat(n(t[0]).css("border-top-width"))||0;i.left+=parseFloat(n(t[0]).css("border-left-width"))||0;return{top:r.top-i.top,left:r.left-i.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.body;while(e&&!p.test(e.nodeName)&&n(e).css("position")=="static")e=e.offsetParent;return e})}};n.fn.detach=n.fn.remove;["width","height"].forEach(function(t){var r=t.replace(/./,function(e){return e[0].toUpperCase()});n.fn[t]=function(i){var a,s=this[0];if(i===e)return R(s)?s["inner"+r]:O(s)?s.documentElement["scroll"+r]:(a=this.offset())&&a[t];else return this.each(function(e){s=n(this);s.css(t,V(this,i,e,s[t]()))})}});function Z(e,t){t(e);for(var n=0,r=e.childNodes.length;n<r;n++)Z(e.childNodes[n],t)}_.forEach(function(e,t){var r=t%2;n.fn[e]=function(){var e,i=n.map(arguments,function(t){e=Y(t);return e=="object"||e=="array"||t==null?t:k.fragment(t)}),a,s=this.length>1;if(i.length<1)return this;return this.each(function(e,l){a=r?l:l.parentNode;l=t==0?l.nextSibling:t==1?l.firstChild:t==2?l:null;var u=n.contains(o.documentElement,a);i.forEach(function(e){if(s)e=e.cloneNode(true);else if(!a)return n(e).remove();a.insertBefore(e,l);if(u)Z(e,function(e){if(e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&!e.src)window["eval"].call(window,e.innerHTML)})})})};n.fn[r?e+"To":"insert"+(t?"Before":"After")]=function(t){n(t)[e](this);return this}});k.Z.prototype=n.fn;k.uniq=T;k.deserializeValue=X;n.zepto=k;return n}();window.Zepto=n;window.$===undefined&&(window.$=n);e.exports=$},function(e,t){(function(e){var t=0,n=window.document,r,i,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:text|application)\/javascript/i,o=/^(?:text|application)\/xml/i,l="application/json",u="text/html",c=/^\s*$/,f=n.createElement("a");f.href=window.location.href;function d(t,n,r){var i=e.Event(n);e(t).trigger(i,r);return!i.isDefaultPrevented()}function h(e,t,r,i){if(e.global)return d(t||n,r,i)}e.active=0;function p(t){if(t.global&&e.active++===0)h(t,null,"ajaxStart")}function m(t){if(t.global&&!--e.active)h(t,null,"ajaxStop")}function g(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===false||h(t,n,"ajaxBeforeSend",[e,t])===false)return false;h(t,n,"ajaxSend",[e,t])}function _(e,t,n,r){var i=n.context,a="success";n.success.call(i,e,a,t);if(r)r.resolveWith(i,[e,a,t]);h(n,i,"ajaxSuccess",[t,n,e]);y(a,t,n)}function v(e,t,n,r,i){var a=r.context;r.error.call(a,n,t,e);if(i)i.rejectWith(a,[n,t,e]);h(r,a,"ajaxError",[n,r,e||t]);y(t,n,r)}function y(e,t,n){var r=n.context;n.complete.call(r,t,e);h(n,r,"ajaxComplete",[t,n]);m(n)}function b(){}e.ajaxJSONP=function(r,i){if(!("type"in r))return e.ajax(r);var a=r.jsonpCallback,s=(e.isFunction(a)?a():a)||"jsonp"+ ++t,o=n.createElement("script"),l=window[s],u,c=function(t){e(o).triggerHandler("error",t||"abort")},f={abort:c},d;if(i)i.promise(f);e(o).on("load error",function(t,n){clearTimeout(d);e(o).off().remove();if(t.type=="error"||!u){v(null,n||"error",f,r,i)}else{_(u[0],f,r,i)}window[s]=l;if(u&&e.isFunction(l))l(u[0]);l=u=undefined});if(g(f,r)===false){c("abort");return f}window[s]=function(){u=arguments};o.src=r.url.replace(/\?(.+)=\?/,"?$1="+s);n.head.appendChild(o);if(r.timeout>0)d=setTimeout(function(){c("timeout")},r.timeout);return f};e.ajaxSettings={type:"GET",beforeSend:b,success:b,error:b,complete:b,context:null,global:true,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:u,text:"text/plain"},crossDomain:false,timeout:0,processData:true,cache:true};function M(e){if(e)e=e.split(";",2)[0];return e&&(e==u?"html":e==l?"json":s.test(e)?"script":o.test(e)&&"xml")||"text"}function x(e,t){if(t=="")return e;return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function w(t){if(t.processData&&t.data&&e.type(t.data)!="string")t.data=e.param(t.data,t.traditional);if(t.data&&(!t.type||t.type.toUpperCase()=="GET"))t.url=x(t.url,t.data),t.data=undefined}e.ajax=function(t){var a=e.extend({},t||{}),s=e.Deferred&&e.Deferred(),o;for(r in e.ajaxSettings)if(a[r]===undefined)a[r]=e.ajaxSettings[r];p(a);if(!a.crossDomain){o=n.createElement("a");o.href=a.url;o.href=o.href;a.crossDomain=f.protocol+"//"+f.host!==o.protocol+"//"+o.host}if(!a.url)a.url=window.location.toString();w(a);var l=a.dataType,u=/\?.+=\?/.test(a.url);if(u)l="jsonp";if(a.cache===false||(!t||t.cache!==true)&&("script"==l||"jsonp"==l))a.url=x(a.url,"_="+Date.now());if("jsonp"==l){if(!u)a.url=x(a.url,a.jsonp?a.jsonp+"=?":a.jsonp===false?"":"callback=?");return e.ajaxJSONP(a,s)}var d=a.accepts[l],h={},m=function(e,t){h[e.toLowerCase()]=[e,t]},y=/^([\w-]+:)\/\//.test(a.url)?RegExp.$1:window.location.protocol,S=a.xhr(),k=S.setRequestHeader,L;if(s)s.promise(S);if(!a.crossDomain)m("X-Requested-With","XMLHttpRequest");m("Accept",d||"*/*");if(d=a.mimeType||d){if(d.indexOf(",")>-1)d=d.split(",",2)[0];S.overrideMimeType&&S.overrideMimeType(d)}if(a.contentType||a.contentType!==false&&a.data&&a.type.toUpperCase()!="GET")m("Content-Type",a.contentType||"application/x-www-form-urlencoded");if(a.headers)for(i in a.headers)m(i,a.headers[i]);S.setRequestHeader=m;S.onreadystatechange=function(){if(S.readyState==4){S.onreadystatechange=b;clearTimeout(L);var t,n=false;if(S.status>=200&&S.status<300||S.status==304||S.status==0&&y=="file:"){l=l||M(a.mimeType||S.getResponseHeader("content-type"));t=S.responseText;try{if(l=="script")(1,eval)(t);else if(l=="xml")t=S.responseXML;else if(l=="json")t=c.test(t)?null:e.parseJSON(t)}catch(r){n=r}if(n)v(n,"parsererror",S,a,s);else _(t,S,a,s)}else{v(S.statusText||null,S.status?"error":"abort",S,a,s)}}};if(g(S,a)===false){S.abort();v(null,"abort",S,a,s);return S}if(a.xhrFields)for(i in a.xhrFields)S[i]=a.xhrFields[i];var T="async"in a?a.async:true;S.open(a.type,a.url,T,a.username,a.password);for(i in h)k.apply(S,h[i]);if(a.timeout>0)L=setTimeout(function(){S.onreadystatechange=b;S.abort();v(null,"timeout",S,a,s)},a.timeout);S.send(a.data?a.data:null);return S};function S(t,n,r,i){if(e.isFunction(n))i=r,r=n,n=undefined;if(!e.isFunction(r))i=r,r=undefined;return{url:t,data:n,success:r,dataType:i}}e.get=function(){return e.ajax(S.apply(null,arguments))};e.post=function(){var t=S.apply(null,arguments);t.type="POST";return e.ajax(t)};e.getJSON=function(){var t=S.apply(null,arguments);t.dataType="json";return e.ajax(t)};e.fn.load=function(t,n,r){if(!this.length)return this;var i=this,s=t.split(/\s/),o,l=S(t,n,r),u=l.success;if(s.length>1)l.url=s[0],o=s[1];l.success=function(t){i.html(o?e("<div>").html(t.replace(a,"")).find(o):t);u&&u.apply(i,arguments)};e.ajax(l);return this};var k=encodeURIComponent;function L(t,n,r,i){var a,s=e.isArray(n),o=e.isPlainObject(n);e.each(n,function(n,l){a=e.type(l);if(i)n=r?i:i+"["+(o||a=="object"||a=="array"?n:"")+"]";if(!i&&s)t.add(l.name,l.value);else if(a=="array"||!r&&a=="object")L(t,l,r,n);else t.add(n,l)})}e.param=function(t,n){var r=[];r.add=function(t,n){if(e.isFunction(n))n=n();if(n==null)n="";this.push(k(t)+"="+k(n))};L(r,t,n);return r.join("&").replace(/%20/g,"+")}})(Zepto)},function(e,t){(function(e){function t(e,t){var n=this.os={},r=this.browser={},i=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),a=e.match(/(Android);?[\s\/]+([\d.]+)?/),s=!!e.match(/\(Macintosh\; Intel /),o=e.match(/(iPad).*OS\s([\d_]+)/),l=e.match(/(iPod)(.*OS\s([\d_]+))?/),u=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),c=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),f=/Win\d{2}|Windows/.test(t),d=e.match(/Windows Phone ([\d.]+)/),h=c&&e.match(/TouchPad/),p=e.match(/Kindle\/([\d.]+)/),m=e.match(/Silk\/([\d._]+)/),g=e.match(/(BlackBerry).*Version\/([\d.]+)/),_=e.match(/(BB10).*Version\/([\d.]+)/),v=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),y=e.match(/PlayBook/),b=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),M=e.match(/Firefox\/([\d.]+)/),x=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),w=!b&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),S=w||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);if(r.webkit=!!i)r.version=i[1];if(a)n.android=true,n.version=a[2];if(u&&!l)n.ios=n.iphone=true,n.version=u[2].replace(/_/g,".");if(o)n.ios=n.ipad=true,n.version=o[2].replace(/_/g,".");if(l)n.ios=n.ipod=true,n.version=l[3]?l[3].replace(/_/g,"."):null;if(d)n.wp=true,n.version=d[1];if(c)n.webos=true,n.version=c[2];if(h)n.touchpad=true;if(g)n.blackberry=true,n.version=g[2];if(_)n.bb10=true,n.version=_[2];if(v)n.rimtabletos=true,n.version=v[2];if(y)r.playbook=true;if(p)n.kindle=true,n.version=p[1];if(m)r.silk=true,r.version=m[1];if(!m&&n.android&&e.match(/Kindle Fire/))r.silk=true;if(b)r.chrome=true,r.version=b[1];if(M)r.firefox=true,r.version=M[1];if(x)r.ie=true,r.version=x[1];if(S&&(s||n.ios||f)){r.safari=true;if(!n.ios)r.version=S[1]}if(w)r.webview=true;n.tablet=!!(o||y||a&&!e.match(/Mobile/)||M&&e.match(/Tablet/)||x&&!e.match(/Phone/)&&e.match(/Touch/));n.phone=!!(!n.tablet&&!n.ipod&&(a||u||c||g||_||b&&e.match(/Android/)||b&&e.match(/CriOS\/([\d.]+)/)||M&&e.match(/Mobile/)||x&&e.match(/Touch/)))}t.call(e,navigator.userAgent,navigator.platform);e.__detect=t})(Zepto)},function(e,t){(function(e){var t=1,n,r=Array.prototype.slice,i=e.isFunction,a=function(e){return typeof e=="string"},s={},o={},l="onfocusin"in window,u={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents";function f(e){return e._zid||(e._zid=t++)}function d(e,t,n,r){t=h(t);if(t.ns)var i=p(t.ns);return(s[f(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||f(e.fn)===f(n))&&(!r||e.sel==r)})}function h(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function p(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function m(e,t){return e.del&&(!l&&e.e in u)||!!t}function g(e){return c[e]||l&&u[e]||e}function _(t,r,i,a,o,l,u){var d=f(t),p=s[d]||(s[d]=[]);r.split(/\s/).forEach(function(r){if(r=="ready")return e(document).ready(i);var s=h(r);s.fn=i;s.sel=o;if(s.e in c)i=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return s.fn.apply(this,arguments)};s.del=l;var f=l||i;s.proxy=function(e){e=w(e);if(e.isImmediatePropagationStopped())return;e.data=a;var r=f.apply(t,e._args==n?[e]:[e].concat(e._args));if(r===false)e.preventDefault(),e.stopPropagation();return r};s.i=p.length;p.push(s);if("addEventListener"in t)t.addEventListener(g(s.e),s.proxy,m(s,u))})}function v(e,t,n,r,i){var a=f(e);(t||"").split(/\s/).forEach(function(t){d(e,t,n,r).forEach(function(t){delete s[a][t.i];if("removeEventListener"in e)e.removeEventListener(g(t.e),t.proxy,m(t,i))})})}e.event={add:_,remove:v};e.proxy=function(t,n){var s=2 in arguments&&r.call(arguments,2);if(i(t)){var o=function(){return t.apply(n,s?s.concat(r.call(arguments)):arguments)};o._zid=f(t);return o}else if(a(n)){if(s){s.unshift(t[n],t);return e.proxy.apply(null,s)}else{return e.proxy(t[n],t)}}else{throw new TypeError("expected function")}};e.fn.bind=function(e,t,n){return this.on(e,t,n)};e.fn.unbind=function(e,t){return this.off(e,t)};e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var y=function(){return true},b=function(){return false},M=/^([A-Z]|returnValue$|layer[XY]$)/,x={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function w(t,r){if(r||!t.isDefaultPrevented){r||(r=t);e.each(x,function(e,n){var i=r[e];t[e]=function(){this[n]=y;return i&&i.apply(r,arguments)};t[n]=b});if(r.defaultPrevented!==n?r.defaultPrevented:"returnValue"in r?r.returnValue===false:r.getPreventDefault&&r.getPreventDefault())t.isDefaultPrevented=y}return t}function S(e){var t,r={originalEvent:e};for(t in e)if(!M.test(t)&&e[t]!==n)r[t]=e[t];return w(r,e)}e.fn.delegate=function(e,t,n){return this.on(t,e,n)};e.fn.undelegate=function(e,t,n){return this.off(t,e,n)};e.fn.live=function(t,n){e(document.body).delegate(this.selector,t,n);return this};e.fn.die=function(t,n){e(document.body).undelegate(this.selector,t,n);return this};e.fn.on=function(t,s,o,l,u){var c,f,d=this;if(t&&!a(t)){e.each(t,function(e,t){d.on(e,s,o,t,u)});return d}if(!a(s)&&!i(l)&&l!==false)l=o,o=s,s=n;if(i(o)||o===false)l=o,o=n;if(l===false)l=b;return d.each(function(n,i){if(u)c=function(e){v(i,e.type,l);return l.apply(this,arguments)};if(s)f=function(t){var n,a=e(t.target).closest(s,i).get(0);if(a&&a!==i){n=e.extend(S(t),{currentTarget:a,liveFired:i});return(c||l).apply(a,[n].concat(r.call(arguments,1)))}};_(i,t,l,o,s,f||c)})};e.fn.off=function(t,r,s){var o=this;if(t&&!a(t)){e.each(t,function(e,t){o.off(e,r,t)});return o}if(!a(r)&&!i(s)&&s!==false)s=r,r=n;if(s===false)s=b;return o.each(function(){v(this,t,s,r)})};e.fn.trigger=function(t,n){t=a(t)||e.isPlainObject(t)?e.Event(t):w(t);t._args=n;return this.each(function(){if(t.type in u&&typeof this[t.type]=="function")this[t.type]();else if("dispatchEvent"in this)this.dispatchEvent(t);else e(this).triggerHandler(t,n)})};e.fn.triggerHandler=function(t,n){var r,i;this.each(function(s,o){r=S(a(t)?e.Event(t):t);r._args=n;r.target=o;e.each(d(o,t.type||t),function(e,t){i=t.proxy(r);if(r.isImmediatePropagationStopped())return false})});return i};("focusin focusout focus blur load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select keydown keypress keyup error").split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}});e.Event=function(e,t){if(!a(e))t=e,e=t.type;var n=document.createEvent(o[e]||"Events"),r=true;if(t)for(var i in t)i=="bubbles"?r=!!t[i]:n[i]=t[i];n.initEvent(e,r,true);return w(n)}})(Zepto)},function(e,t){(function(e,t){var n="",r,i,a,s={Webkit:"webkit",Moz:"",O:"o"},o=window.document,l=o.createElement("div"),u=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,c,f,d,h,p,m,g,_,v,y={};function b(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function M(e){return r?r+e:e.toLowerCase()}e.each(s,function(e,i){if(l.style[e+"TransitionProperty"]!==t){n="-"+e.toLowerCase()+"-";r=i;return false}});c=n+"transform";y[f=n+"transition-property"]=y[d=n+"transition-duration"]=y[p=n+"transition-delay"]=y[h=n+"transition-timing-function"]=y[m=n+"animation-name"]=y[g=n+"animation-duration"]=y[v=n+"animation-delay"]=y[_=n+"animation-timing-function"]="";e.fx={off:r===t&&l.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:n,transitionEnd:M("TransitionEnd"),animationEnd:M("AnimationEnd")};e.fn.animate=function(n,r,i,a,s){if(e.isFunction(r))a=r,i=t,r=t;if(e.isFunction(i))a=i,i=t;if(e.isPlainObject(r))i=r.easing,a=r.complete,s=r.delay,r=r.duration;if(r)r=(typeof r=="number"?r:e.fx.speeds[r]||e.fx.speeds._default)/1e3;if(s)s=parseFloat(s)/1e3;return this.anim(n,r,i,a,s)};e.fn.anim=function(n,r,i,a,s){var o,l={},M,x="",w=this,S,k=e.fx.transitionEnd,L=false;if(r===t)r=e.fx.speeds._default/1e3;if(s===t)s=0;if(e.fx.off)r=0;if(typeof n=="string"){l[m]=n;l[g]=r+"s";l[v]=s+"s";l[_]=i||"linear";k=e.fx.animationEnd}else{M=[];for(o in n)if(u.test(o))x+=o+"("+n[o]+") ";else l[o]=n[o],M.push(b(o));if(x)l[c]=x,M.push(c);if(r>0&&typeof n==="object"){l[f]=M.join(", ");l[d]=r+"s";l[p]=s+"s";l[h]=i||"linear"}}S=function(t){if(typeof t!=="undefined"){if(t.target!==t.currentTarget)return;e(t.target).unbind(k,S)}else e(this).unbind(k,S);L=true;e(this).css(y);a&&a.call(this)};if(r>0){this.bind(k,S);setTimeout(function(){if(L)return;S.call(w)},(r+s)*1e3+25)}this.size()&&this.get(0).clientLeft;this.css(l);if(r<=0)setTimeout(function(){w.each(function(){S.call(this)})},0);return this};l=null})(Zepto)},function(e,t){(function(e,t){var n=window.document,r=n.documentElement,i=e.fn.show,a=e.fn.hide,s=e.fn.toggle;function o(n,r,i,a,s){if(typeof r=="function"&&!s)s=r,r=t;var o={opacity:i};if(a){o.scale=a;n.css(e.fx.cssPrefix+"transform-origin","0 0")}return n.animate(o,r,null,s)}function l(t,n,r,i){return o(t,n,0,r,function(){a.call(e(this));i&&i.call(this)})}e.fn.toggle=function(n,r){if(n===t||typeof n=="boolean")return s.call(this,n);else return this.each(function(){var t=e(this);t[t.css("display")=="none"?"show":"hide"](n,r)})};e.fn.fadeTo=function(e,t,n){return o(this,e,t,null,n)};e.fn.fadeIn=function(e,t){var n=this.css("opacity");if(n>0)this.css("opacity",0);else n=1;return i.call(this).fadeTo(e,n,t)};e.fn.fadeOut=function(e,t){return l(this,e,null,t)};e.fn.fadeToggle=function(t,n){return this.each(function(){var r=e(this);r[r.css("opacity")==0||r.css("display")=="none"?"fadeIn":"fadeOut"](t,n)})}})(Zepto)},function(e,t){(function(e){var t={},n,r,i,a,s=750,o;function l(e,t,n,r){return Math.abs(e-t)>=Math.abs(n-r)?e-t>0?"Left":"Right":n-r>0?"Up":"Down"}function u(){a=null;if(t.last){if(t.el)t.el.trigger("longTap");t={}}}function c(){if(a)clearTimeout(a);a=null}function f(){if(n)clearTimeout(n);if(r)clearTimeout(r);if(i)clearTimeout(i);if(a)clearTimeout(a);n=r=i=a=null;t={}}function d(e){return(e.pointerType=="touch"||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function h(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}e(document).ready(function(){var p,m,g=0,_=0,v,y;if("MSGesture"in window){o=new MSGesture;o.target=document.body}e(document).bind("MSGestureEnd",function(e){var n=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;if(n){if(t.el)t.el.trigger("swipe");if(t.el)t.el.trigger("swipe"+n)}}).on("touchstart MSPointerDown pointerdown",function(r){if((y=h(r,"down"))&&!d(r))return;v=y?r:r.touches[0];

if(r.touches&&r.touches.length===1&&t.x2){t.x2=undefined;t.y2=undefined}p=Date.now();m=p-(t.last||p);t.el=e("tagName"in v.target?v.target:v.target.parentNode);n&&clearTimeout(n);t.x1=v.pageX;t.y1=v.pageY;if(m>0&&m<=250)t.isDoubleTap=true;t.last=p;a=setTimeout(u,s);if(o&&y)o.addPointer(r.pointerId)}).on("touchmove MSPointerMove pointermove",function(e){if((y=h(e,"move"))&&!d(e))return;v=y?e:e.touches[0];c();t.x2=v.pageX;t.y2=v.pageY;g+=Math.abs(t.x1-t.x2);_+=Math.abs(t.y1-t.y2)}).on("touchend MSPointerUp pointerup",function(a){if((y=h(a,"up"))&&!d(a))return;c();if(t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30)i=setTimeout(function(){if(t.el)t.el.trigger("swipe");if(t.el)t.el.trigger("swipe"+l(t.x1,t.x2,t.y1,t.y2));t={}},0);else if("last"in t)if(g<30&&_<30){r=setTimeout(function(){var r=e.Event("tap");r.cancelTouch=f;if(t.el)t.el.trigger(r);if(t.isDoubleTap){if(t.el)t.el.trigger("doubleTap");t={}}else{n=setTimeout(function(){n=null;if(t.el)t.el.trigger("singleTap");t={}},250)}},0)}else{t={}}g=_=0}).on("touchcancel MSPointerCancel pointercancel",f);e(window).on("scroll",f)});["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})})(Zepto)},function(e,t,n){var r,i;!function(){function a(e,t){return t>e?-1:e>t?1:e>=t?0:0/0}function s(e){return null===e?0/0:+e}function o(e){return!isNaN(e)}function l(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}function u(e){return e.length}function c(e){for(var t=1;e*t%1;)t*=10;return t}function f(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function d(){this._=Object.create(null)}function h(e){return(e+="")===Ms||e[0]===xs?xs+e:e}function p(e){return(e+="")[0]===xs?e.slice(1):e}function m(e){return h(e)in this._}function g(e){return(e=h(e))in this._&&delete this._[e]}function _(){var e=[];for(var t in this._)e.push(p(t));return e}function v(){var e=0;for(var t in this._)++e;return e}function y(){for(var e in this._)return!1;return!0}function b(){this._=Object.create(null)}function M(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function x(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=ws.length;r>n;++n){var i=ws[n]+t;if(i in e)return i}}function w(){}function S(){}function k(e){function t(){for(var t,r=n,i=-1,a=r.length;++i<a;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new d;return t.on=function(t,i){var a,s=r.get(t);return arguments.length<2?s&&s.on:(s&&(s.on=null,n=n.slice(0,a=n.indexOf(s)).concat(n.slice(a+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function L(){ss.event.preventDefault()}function T(){for(var e,t=ss.event;e=t.sourceEvent;)t=e;return t}function E(e){for(var t=new S,n=0,r=arguments.length;++n<r;)t[arguments[n]]=k(t);return t.of=function(n,r){return function(i){try{var a=i.sourceEvent=ss.event;i.target=e,ss.event=i,t[i.type].apply(n,r)}finally{ss.event=a}}},t}function D(e){return ks(e,As),e}function A(e){return"function"==typeof e?e:function(){return Ls(e,this)}}function Y(e){return"function"==typeof e?e:function(){return Ts(e,this)}}function C(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function a(){this.setAttributeNS(e.space,e.local,t)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=ss.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?o:s:e.local?a:i}function R(e){return e.trim().replace(/\s+/g," ")}function O(e){return new RegExp("(?:^|\\s+)"+ss.requote(e)+"(?:\\s+|$)","g")}function P(e){return(e+"").trim().split(/^|\s+/)}function I(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=P(e).map(N);var i=e.length;return"function"==typeof t?r:n}function N(e){var t=O(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",R(i+" "+e))):n.setAttribute("class",R(i.replace(t," ")))}}function F(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function a(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?a:i}function H(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function j(e){return"function"==typeof e?e:(e=ss.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}function U(){var e=this.parentNode;e&&e.removeChild(this)}function B(e){return{__data__:e}}function z(e){return function(){return Ds(this,e)}}function W(e){return arguments.length||(e=a),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function q(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,a=e[n],s=0,o=a.length;o>s;s++)(i=a[s])&&t(i,s,n);return e}function G(e){return ks(e,Cs),e}function V(e){var t,n;return function(r,i,a){var s,o=e[a].update,l=o.length;for(a!=n&&(n=a,t=0),i>=t&&(t=i+1);!(s=o[t])&&++t<l;);return s}}function $(e,t,n){function r(){var t=this[s];t&&(this.removeEventListener(e,t,t.$),delete this[s])}function i(){var i=l(t,ls(arguments));r.call(this),this.addEventListener(e,this[s]=i,i.$=n),i._=t}function a(){var t,n=new RegExp("^__on([^.]+)"+ss.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var s="__on"+e,o=e.indexOf("."),l=J;o>0&&(e=e.slice(0,o));var u=Os.get(e);return u&&(e=u,l=X),o?t?i:r:t?w:a}function J(e,t){return function(n){var r=ss.event;ss.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{ss.event=r}}}function X(e,t){var n=J(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function Z(){var e=".dragsuppress-"+ ++Is,t="click"+e,n=ss.select(fs).on("touchmove"+e,L).on("dragstart"+e,L).on("selectstart"+e,L);if(Ps){var r=cs.style,i=r[Ps];r[Ps]="none"}return function(a){if(n.on(e,null),Ps&&(r[Ps]=i),a){var s=function(){n.on(t,null)};n.on(t,function(){L(),s()},!0),setTimeout(s,0)}}}function K(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>Ns&&(fs.scrollX||fs.scrollY)){n=ss.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=n[0][0].getScreenCTM();Ns=!(i.f||i.e),n.remove()}return Ns?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}function Q(){return ss.event.changedTouches[0].identifier}function ee(){return ss.event.target}function te(){return fs}function ne(e){return e>0?1:0>e?-1:0}function re(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ie(e){return e>1?0:-1>e?js:Math.acos(e)}function ae(e){return e>1?zs:-1>e?-zs:Math.asin(e)}function se(e){return((e=Math.exp(e))-1/e)/2}function oe(e){return((e=Math.exp(e))+1/e)/2}function le(e){return((e=Math.exp(2*e))-1)/(e+1)}function ue(e){return(e=Math.sin(e/2))*e}function ce(){}function fe(e,t,n){return this instanceof fe?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof fe?new fe(e.h,e.s,e.l):ke(""+e,Le,fe):new fe(e,t,n)}function de(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?a+(s-a)*e/60:180>e?s:240>e?a+(s-a)*(240-e)/60:a}function i(e){return Math.round(255*r(e))}var a,s;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+t):n+t-n*t,a=2*n-s,new Me(i(e+120),i(e),i(e-120))}function he(e,t,n){return this instanceof he?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof he?new he(e.h,e.c,e.l):e instanceof me?_e(e.l,e.a,e.b):_e((e=Te((e=ss.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new he(e,t,n)}function pe(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new me(n,Math.cos(e*=Ws)*t,Math.sin(e)*t)}function me(e,t,n){return this instanceof me?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof me?new me(e.l,e.a,e.b):e instanceof he?pe(e.h,e.c,e.l):Te((e=Me(e)).r,e.g,e.b):new me(e,t,n)}function ge(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;return i=ve(i)*to,r=ve(r)*no,a=ve(a)*ro,new Me(be(3.2404542*i-1.5371385*r-.4985314*a),be(-.969266*i+1.8760108*r+.041556*a),be(.0556434*i-.2040259*r+1.0572252*a))}function _e(e,t,n){return e>0?new he(Math.atan2(n,t)*qs,Math.sqrt(t*t+n*n),e):new he(0/0,0/0,e)}function ve(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ye(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function be(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function Me(e,t,n){return this instanceof Me?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof Me?new Me(e.r,e.g,e.b):ke(""+e,Me,de):new Me(e,t,n)}function xe(e){return new Me(e>>16,255&e>>8,255&e)}function we(e){return xe(e)+""}function Se(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ke(e,t,n){var r,i,a,s=0,o=0,l=0;if(r=/([a-z]+)\((.*)\)/i.exec(e))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(De(i[0]),De(i[1]),De(i[2]))}return(a=so.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(s=(3840&a)>>4,s=s>>4|s,o=240&a,o=o>>4|o,l=15&a,l=l<<4|l):7===e.length&&(s=(16711680&a)>>16,o=(65280&a)>>8,l=255&a)),t(s,o,l))}function Le(e,t,n){var r,i,a=Math.min(e/=255,t/=255,n/=255),s=Math.max(e,t,n),o=s-a,l=(s+a)/2;return o?(i=.5>l?o/(s+a):o/(2-s-a),r=e==s?(t-n)/o+(n>t?6:0):t==s?(n-e)/o+2:(e-t)/o+4,r*=60):(r=0/0,i=l>0&&1>l?0:r),new fe(r,i,l)}function Te(e,t,n){e=Ee(e),t=Ee(t),n=Ee(n);var r=ye((.4124564*e+.3575761*t+.1804375*n)/to),i=ye((.2126729*e+.7151522*t+.072175*n)/no),a=ye((.0193339*e+.119192*t+.9503041*n)/ro);return me(116*i-16,500*(r-i),200*(i-a))}function Ee(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function De(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Ae(e){return"function"==typeof e?e:function(){return e}}function Ye(e){return e}function Ce(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Re(t,n,e,r)}}function Re(e,t,n,r){function i(){var e,t=l.status;if(!t&&Pe(l)||t>=200&&300>t||304===t){try{e=n.call(a,l)}catch(r){return s.error.call(a,r),void 0}s.load.call(a,e)}else s.error.call(a,l)}var a={},s=ss.dispatch("beforesend","progress","load","error"),o={},l=new XMLHttpRequest,u=null;return!fs.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(e){var t=ss.event;ss.event=e;try{s.progress.call(a,l)}finally{ss.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?o[e]:(null==t?delete o[e]:o[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",a):t},a.responseType=function(e){return arguments.length?(u=e,a):u},a.response=function(e){return n=e,a},["get","post"].forEach(function(e){a[e]=function(){return a.send.apply(a,[e].concat(ls(arguments)))}}),a.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,e,!0),null==t||"accept"in o||(o.accept=t+",*/*"),l.setRequestHeader)for(var c in o)l.setRequestHeader(c,o[c]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=u&&(l.responseType=u),null!=i&&a.on("error",i).on("load",function(e){i(null,e)}),s.beforesend.call(a,l),l.send(null==r?null:r),a},a.abort=function(){return l.abort(),a},ss.rebind(a,s,"on"),null==r?a:a.get(Oe(r))}function Oe(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Pe(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Ie(){var e=Ne(),t=Fe()-e;t>24?(isFinite(t)&&(clearTimeout(co),co=setTimeout(Ie,t)),uo=0):(uo=1,ho(Ie))}function Ne(){var e=Date.now();for(fo=oo;fo;)e>=fo.t&&(fo.f=fo.c(e-fo.t)),fo=fo.n;return e}function Fe(){for(var e,t=oo,n=1/0;t;)t.f?t=e?e.n=t.n:oo=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return lo=e,n}function He(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function je(e,t){var n=Math.pow(10,3*bs(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Ue(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,a=r&&n?function(e,t){for(var i=e.length,a=[],s=0,o=r[0],l=0;i>0&&o>0&&(l+o+1>t&&(o=Math.max(1,t-l)),a.push(e.substring(i-=o,i+o)),!((l+=o+1)>t));)o=r[s=(s+1)%r.length];return a.reverse().join(n)}:Ye;return function(e){var n=mo.exec(e),r=n[1]||" ",s=n[2]||">",o=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],f=n[7],d=n[8],h=n[9],p=1,m="",g="",_=!1,v=!0;switch(d&&(d=+d.substring(1)),(u||"0"===r&&"="===s)&&(u=r="0",s="="),h){case"n":f=!0,h="g";break;case"%":p=100,g="%",h="f";break;case"p":p=100,g="%",h="r";break;case"b":case"o":case"x":case"X":"#"===l&&(m="0"+h.toLowerCase());case"c":v=!1;case"d":_=!0,d=0;break;case"s":p=-1,h="r"}"$"===l&&(m=i[0],g=i[1]),"r"!=h||d||(h="g"),null!=d&&("g"==h?d=Math.max(1,Math.min(21,d)):("e"==h||"f"==h)&&(d=Math.max(0,Math.min(20,d)))),h=go.get(h)||Be;var y=u&&f;return function(e){var n=g;if(_&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===o?"":o;if(0>p){var l=ss.formatPrefix(e,d);e=l.scale(e),n=l.symbol+g}else e*=p;e=h(e,d);var b,M,x=e.lastIndexOf(".");if(0>x){var w=v?e.lastIndexOf("e"):-1;0>w?(b=e,M=""):(b=e.substring(0,w),M=e.substring(w))}else b=e.substring(0,x),M=t+e.substring(x+1);!u&&f&&(b=a(b,1/0));var S=m.length+b.length+M.length+(y?0:i.length),k=c>S?new Array(S=c-S+1).join(r):"";return y&&(b=a(k+b,k.length?c-M.length:1/0)),i+=m,e=b+M,("<"===s?i+e+k:">"===s?k+i+e:"^"===s?k.substring(0,S>>=1)+i+e+k.substring(S):i+(y?e:k+e))+n}}}function Be(e){return e+""}function ze(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function We(e,t,n){function r(t){var n=e(t),r=a(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new vo(n-1)),1),n}function a(e,n){return t(e=new vo(+e),n),e}function s(e,r,a){var s=i(e),o=[];if(a>1)for(;r>s;)n(s)%a||o.push(new Date(+s)),t(s,1);else for(;r>s;)o.push(new Date(+s)),t(s,1);return o}function o(e,t,n){try{vo=ze;var r=new ze;return r._=e,s(r,t,n)}finally{vo=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=a,e.range=s;var l=e.utc=qe(e);return l.floor=l,l.round=qe(r),l.ceil=qe(i),l.offset=qe(a),l.range=o,e}function qe(e){return function(t,n){try{vo=ze;var r=new ze;return r._=t,e(r,n)._}finally{vo=Date}}}function Ge(e){function t(e){function t(t){for(var n,i,a,s=[],o=-1,l=0;++o<r;)37===e.charCodeAt(o)&&(s.push(e.slice(l,o)),null!=(i=bo[n=e.charAt(++o)])&&(n=e.charAt(++o)),(a=E[n])&&(n=a(t,null==i?"e"===n?" ":"0":i)),s.push(n),l=o+1);return s.push(e.slice(l,o)),s.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var a=null!=r.Z&&vo!==ze,s=new(a?ze:vo);return"j"in r?s.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(s.setFullYear(r.y,0,1),s.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(s.getDay()+5)%7:r.w+7*r.U-(s.getDay()+6)%7)):s.setFullYear(r.y,r.m,r.d),s.setHours(r.H+(0|r.Z/100),r.M+r.Z%100,r.S,r.L),a?s._:s},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,a,s,o=0,l=t.length,u=n.length;l>o;){if(r>=u)return-1;if(i=t.charCodeAt(o++),37===i){if(s=t.charAt(o++),a=D[s in bo?t.charAt(o++):s],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){x.lastIndex=0;var r=x.exec(t.slice(n));return r?(e.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.w=M.get(r[0].toLowerCase()),n+r[0].length):-1}function a(e,t,n){L.lastIndex=0;var r=L.exec(t.slice(n));return r?(e.m=T.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,n){S.lastIndex=0;var r=S.exec(t.slice(n));return r?(e.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,r){return n(e,E.c.toString(),t,r)}function l(e,t,r){return n(e,E.x.toString(),t,r)}function u(e,t,r){return n(e,E.X.toString(),t,r)}function c(e,t,n){var r=y.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var f=e.dateTime,d=e.date,h=e.time,p=e.periods,m=e.days,g=e.shortDays,_=e.months,v=e.shortMonths;t.utc=function(e){function n(e){try{vo=ze;var t=new vo;return t._=e,r(t)}finally{vo=Date}}var r=t(e);return n.parse=function(e){try{vo=ze;var t=r.parse(e);return t&&t._}finally{vo=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=dt;var y=ss.map(),b=$e(m),M=Je(m),x=$e(g),w=Je(g),S=$e(_),k=Je(_),L=$e(v),T=Je(v);p.forEach(function(e,t){y.set(e.toLowerCase(),t)});var E={a:function(e){return g[e.getDay()]},A:function(e){return m[e.getDay()]},b:function(e){return v[e.getMonth()]},B:function(e){return _[e.getMonth()]},c:t(f),d:function(e,t){return Ve(e.getDate(),t,2)},e:function(e,t){return Ve(e.getDate(),t,2)},H:function(e,t){return Ve(e.getHours(),t,2)},I:function(e,t){return Ve(e.getHours()%12||12,t,2)},j:function(e,t){return Ve(1+_o.dayOfYear(e),t,3)},L:function(e,t){return Ve(e.getMilliseconds(),t,3)},m:function(e,t){return Ve(e.getMonth()+1,t,2)},M:function(e,t){return Ve(e.getMinutes(),t,2)},p:function(e){return p[+(e.getHours()>=12)]},S:function(e,t){return Ve(e.getSeconds(),t,2)},U:function(e,t){return Ve(_o.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ve(_o.mondayOfYear(e),t,2)},x:t(d),X:t(h),y:function(e,t){return Ve(e.getFullYear()%100,t,2)},Y:function(e,t){return Ve(e.getFullYear()%1e4,t,4)},Z:ct,"%":function(){return"%"}},D={a:r,A:i,b:a,B:s,c:o,d:it,e:it,H:st,I:st,j:at,L:ut,m:rt,M:ot,p:c,S:lt,U:Ze,w:Xe,W:Ke,x:l,X:u,y:et,Y:Qe,Z:tt,"%":ft};return t}function Ve(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",a=i.length;return r+(n>a?new Array(n-a+1).join(t)+i:i)}function $e(e){return new RegExp("^(?:"+e.map(ss.requote).join("|")+")","i")}function Je(e){for(var t=new d,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Xe(e,t,n){Mo.lastIndex=0;var r=Mo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ze(e,t,n){Mo.lastIndex=0;var r=Mo.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Ke(e,t,n){Mo.lastIndex=0;var r=Mo.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Qe(e,t,n){Mo.lastIndex=0;var r=Mo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function et(e,t,n){Mo.lastIndex=0;var r=Mo.exec(t.slice(n,n+2));return r?(e.y=nt(+r[0]),n+r[0].length):-1}function tt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function nt(e){return e+(e>68?1900:2e3)}function rt(e,t,n){Mo.lastIndex=0;var r=Mo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function it(e,t,n){Mo.lastIndex=0;var r=Mo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function at(e,t,n){Mo.lastIndex=0;var r=Mo.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function st(e,t,n){Mo.lastIndex=0;var r=Mo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ot(e,t,n){Mo.lastIndex=0;var r=Mo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function lt(e,t,n){Mo.lastIndex=0;var r=Mo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ut(e,t,n){Mo.lastIndex=0;var r=Mo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ct(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=0|bs(t)/60,i=bs(t)%60;return n+Ve(r,"0",2)+Ve(i,"0",2)}function ft(e,t,n){xo.lastIndex=0;var r=xo.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function dt(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function ht(){}function pt(e,t,n){var r=n.s=e+t,i=r-e,a=r-i;n.t=e-a+(t-i)}function mt(e,t){e&&Lo.hasOwnProperty(e.type)&&Lo[e.type](e,t)}function gt(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function _t(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)gt(e[n],t,1);t.polygonEnd()}function vt(){function e(e,t){e*=Ws,t=t*Ws/2+js/4;var n=e-r,s=n>=0?1:-1,o=s*n,l=Math.cos(t),u=Math.sin(t),c=a*u,f=i*l+c*Math.cos(o),d=c*s*Math.sin(o);Eo.add(Math.atan2(d,f)),r=e,i=l,a=u}var t,n,r,i,a;Do.point=function(s,o){Do.point=e,r=(t=s)*Ws,i=Math.cos(o=(n=o)*Ws/2+js/4),a=Math.sin(o)},Do.lineEnd=function(){e(t,n)}}function yt(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function bt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Mt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function xt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function wt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function St(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function kt(e){return[Math.atan2(e[1],e[0]),ae(e[2])]}function Lt(e,t){return bs(e[0]-t[0])<Fs&&bs(e[1]-t[1])<Fs}function Tt(e,t){e*=Ws;var n=Math.cos(t*=Ws);Et(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Et(e,t,n){++Ao,Co+=(e-Co)/Ao,Ro+=(t-Ro)/Ao,Oo+=(n-Oo)/Ao}function Dt(){function e(e,i){e*=Ws;var a=Math.cos(i*=Ws),s=a*Math.cos(e),o=a*Math.sin(e),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=n*l-r*o)*u+(u=r*s-t*l)*u+(u=t*o-n*s)*u),t*s+n*o+r*l);Yo+=u,Po+=u*(t+(t=s)),Io+=u*(n+(n=o)),No+=u*(r+(r=l)),Et(t,n,r)}var t,n,r;Uo.point=function(i,a){i*=Ws;var s=Math.cos(a*=Ws);t=s*Math.cos(i),n=s*Math.sin(i),r=Math.sin(a),Uo.point=e,Et(t,n,r)}}function At(){Uo.point=Tt}function Yt(){function e(e,t){e*=Ws;var n=Math.cos(t*=Ws),s=n*Math.cos(e),o=n*Math.sin(e),l=Math.sin(t),u=i*l-a*o,c=a*s-r*l,f=r*o-i*s,d=Math.sqrt(u*u+c*c+f*f),h=r*s+i*o+a*l,p=d&&-ie(h)/d,m=Math.atan2(d,h);Fo+=p*u,Ho+=p*c,jo+=p*f,Yo+=m,Po+=m*(r+(r=s)),Io+=m*(i+(i=o)),No+=m*(a+(a=l)),Et(r,i,a)}var t,n,r,i,a;Uo.point=function(s,o){t=s,n=o,Uo.point=e,s*=Ws;var l=Math.cos(o*=Ws);r=l*Math.cos(s),i=l*Math.sin(s),a=Math.sin(o),Et(r,i,a)},Uo.lineEnd=function(){e(t,n),Uo.lineEnd=At,Uo.point=Tt}}function Ct(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function Rt(){return!0}function Ot(e,t,n,r,i){var a=[],s=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Lt(n,r)){i.lineStart();for(var o=0;t>o;++o)i.point((n=e[o])[0],n[1]);return i.lineEnd(),void 0}var l=new It(n,e,null,!0),u=new It(n,null,l,!1);l.o=u,a.push(l),s.push(u),l=new It(r,e,null,!1),u=new It(r,null,l,!0),l.o=u,a.push(l),s.push(u)}}),s.sort(t),Pt(a),Pt(s),a.length){for(var o=0,l=n,u=s.length;u>o;++o)s[o].e=l=!l;for(var c,f,d=a[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(var o=0,u=c.length;u>o;++o)i.point((f=c[o])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p){c=h.p.z;for(var o=c.length-1;o>=0;--o)i.point((f=c[o])[0],f[1])}else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);i.lineEnd()}}}function Pt(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function It(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Nt(e,t,n,r){return function(i,a){function s(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&a.point(t,n)}function o(e,t){var n=i(e,t);g.point(n[0],n[1])}function l(){v.point=o,g.lineStart()}function u(){v.point=s,g.lineEnd()}function c(e,t){m.push([e,t]);var n=i(e,t);b.point(n[0],n[1])}function f(){b.lineStart(),m=[]}function d(){c(m[0][0],m[0][1]),b.lineEnd();var e,t=b.clean(),n=y.buffer(),r=n.length;if(m.pop(),p.push(m),m=null,r)if(1&t){e=n[0];var i,r=e.length-1,s=-1;if(r>0){for(M||(a.polygonStart(),M=!0),a.lineStart();++s<r;)a.point((i=e[s])[0],i[1]);a.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Ft))}var h,p,m,g=t(a),_=i.invert(r[0],r[1]),v={point:s,lineStart:l,lineEnd:u,polygonStart:function(){v.point=c,v.lineStart=f,v.lineEnd=d,h=[],p=[]},polygonEnd:function(){v.point=s,v.lineStart=l,v.lineEnd=u,h=ss.merge(h);var e=Wt(_,p);h.length?(M||(a.polygonStart(),M=!0),Ot(h,jt,e,n,a)):e&&(M||(a.polygonStart(),M=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),M&&(a.polygonEnd(),M=!1),h=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},y=Ht(),b=t(y),M=!1;return v}}function Ft(e){return e.length>1}function Ht(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:w,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function jt(e,t){return((e=e.x)[0]<0?e[1]-zs-Fs:zs-e[1])-((t=t.x)[0]<0?t[1]-zs-Fs:zs-t[1])}function Ut(e){var t,n=0/0,r=0/0,i=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(a,s){var o=a>0?js:-js,l=bs(a-n);bs(l-js)<Fs?(e.point(n,r=(r+s)/2>0?zs:-zs),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(o,r),e.point(a,r),t=0):i!==o&&l>=js&&(bs(n-i)<Fs&&(n-=i*Fs),bs(a-o)<Fs&&(a-=o*Fs),r=Bt(n,r,a,s),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(o,r),t=0),e.point(n=a,r=s),i=o},lineEnd:function(){e.lineEnd(),n=r=0/0},clean:function(){return 2-t}}}function Bt(e,t,n,r){var i,a,s=Math.sin(e-n);return bs(s)>Fs?Math.atan((Math.sin(t)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*a*s)):(t+r)/2}function zt(e,t,n,r){var i;if(null==e)i=n*zs,r.point(-js,i),r.point(0,i),r.point(js,i),r.point(js,0),r.point(js,-i),r.point(0,-i),r.point(-js,-i),r.point(-js,0),r.point(-js,i);else if(bs(e[0]-t[0])>Fs){var a=e[0]<t[0]?js:-js;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function Wt(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,s=0;Eo.reset();for(var o=0,l=t.length;l>o;++o){var u=t[o],c=u.length;if(c)for(var f=u[0],d=f[0],h=f[1]/2+js/4,p=Math.sin(h),m=Math.cos(h),g=1;;){g===c&&(g=0),e=u[g];var _=e[0],v=e[1]/2+js/4,y=Math.sin(v),b=Math.cos(v),M=_-d,x=M>=0?1:-1,w=x*M,S=w>js,k=p*y;if(Eo.add(Math.atan2(k*x*Math.sin(w),m*b+k*Math.cos(w))),a+=S?M+x*Us:M,S^d>=n^_>=n){var L=Mt(yt(f),yt(e));St(L);var T=Mt(i,L);St(T);var E=(S^M>=0?-1:1)*ae(T[2]);(r>E||r===E&&(L[0]||L[1]))&&(s+=S^M>=0?1:-1)}if(!g++)break;d=_,p=y,m=b,f=e}}return(-Fs>a||Fs>a&&0>Eo)^1&s}function qt(e){function t(e,t){return Math.cos(e)*Math.cos(t)>a}function n(e){var n,a,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(f,d){var h,p=[f,d],m=t(f,d),g=s?m?0:i(f,d):m?i(f+(0>f?js:-js),d):0;if(!n&&(u=l=m)&&e.lineStart(),m!==l&&(h=r(n,p),(Lt(n,h)||Lt(p,h))&&(p[0]+=Fs,p[1]+=Fs,m=t(p[0],p[1]))),m!==l)c=0,m?(e.lineStart(),h=r(p,n),e.point(h[0],h[1])):(h=r(n,p),e.point(h[0],h[1]),e.lineEnd()),n=h;else if(o&&n&&s^m){var _;g&a||!(_=r(p,n,!0))||(c=0,s?(e.lineStart(),e.point(_[0][0],_[0][1]),e.point(_[1][0],_[1][1]),e.lineEnd()):(e.point(_[1][0],_[1][1]),e.lineEnd(),e.lineStart(),e.point(_[0][0],_[0][1])))}!m||n&&Lt(n,p)||e.point(p[0],p[1]),n=p,l=m,a=g},lineEnd:function(){l&&e.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function r(e,t,n){var r=yt(e),i=yt(t),s=[1,0,0],o=Mt(r,i),l=bt(o,o),u=o[0],c=l-u*u;if(!c)return!n&&e;var f=a*l/c,d=-a*u/c,h=Mt(s,o),p=wt(s,f),m=wt(o,d);xt(p,m);var g=h,_=bt(p,g),v=bt(g,g),y=_*_-v*(bt(p,p)-1);if(!(0>y)){var b=Math.sqrt(y),M=wt(g,(-_-b)/v);if(xt(M,p),M=kt(M),!n)return M;var x,w=e[0],S=t[0],k=e[1],L=t[1];w>S&&(x=w,w=S,S=x);var T=S-w,E=bs(T-js)<Fs,D=E||Fs>T;if(!E&&k>L&&(x=k,k=L,L=x),D?E?k+L>0^M[1]<(bs(M[0]-w)<Fs?k:L):k<=M[1]&&M[1]<=L:T>js^(w<=M[0]&&M[0]<=S)){var A=wt(g,(-_+b)/v);return xt(A,p),[M,kt(A)]}}}function i(t,n){var r=s?e:js-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var a=Math.cos(e),s=a>0,o=bs(a)>Fs,l=yn(e,6*Ws);return Nt(t,n,l,s?[0,-e]:[-js,e-js])}function Gt(e,t,n,r){return function(i){var a,s=i.a,o=i.b,l=s.x,u=s.y,c=o.x,f=o.y,d=0,h=1,p=c-l,m=f-u;if(a=e-l,p||!(a>0)){if(a/=p,0>p){if(d>a)return;h>a&&(h=a)}else if(p>0){if(a>h)return;a>d&&(d=a)}if(a=n-l,p||!(0>a)){if(a/=p,0>p){if(a>h)return;a>d&&(d=a)}else if(p>0){if(d>a)return;h>a&&(h=a)}if(a=t-u,m||!(a>0)){if(a/=m,0>m){if(d>a)return;h>a&&(h=a)}else if(m>0){if(a>h)return;a>d&&(d=a)}if(a=r-u,m||!(0>a)){if(a/=m,0>m){if(a>h)return;a>d&&(d=a)}else if(m>0){if(d>a)return;h>a&&(h=a)}return d>0&&(i.a={x:l+d*p,y:u+d*m}),1>h&&(i.b={x:l+h*p,y:u+h*m}),i}}}}}}function Vt(e,t,n,r){function i(r,i){return bs(r[0]-e)<Fs?i>0?0:3:bs(r[0]-n)<Fs?i>0?2:1:bs(r[1]-t)<Fs?i>0?1:0:i>0?3:2}function a(e,t){return s(e.x,t.x)}function s(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){function l(e){for(var t=0,n=g.length,r=e[1],i=0;n>i;++i)for(var a,s=1,o=g[i],l=o.length,u=o[0];l>s;++s)a=o[s],u[1]<=r?a[1]>r&&re(u,a,e)>0&&++t:a[1]<=r&&re(u,a,e)<0&&--t,u=a;return 0!==t}function u(a,o,l,u){var c=0,f=0;if(null==a||(c=i(a,l))!==(f=i(o,l))||s(a,o)<0^l>0){do u.point(0===c||3===c?e:n,c>1?r:t);while((c=(c+l+4)%4)!==f)}else u.point(o[0],o[1])}function c(i,a){return i>=e&&n>=i&&a>=t&&r>=a}function f(e,t){c(e,t)&&o.point(e,t)}function d(){D.point=p,g&&g.push(_=[]),S=!0,w=!1,M=x=0/0}function h(){m&&(p(v,y),b&&w&&T.rejoin(),m.push(T.buffer())),D.point=f,w&&o.lineEnd()}function p(e,t){e=Math.max(-zo,Math.min(zo,e)),t=Math.max(-zo,Math.min(zo,t));var n=c(e,t);if(g&&_.push([e,t]),S)v=e,y=t,b=n,S=!1,n&&(o.lineStart(),o.point(e,t));else if(n&&w)o.point(e,t);else{var r={a:{x:M,y:x},b:{x:e,y:t}};E(r)?(w||(o.lineStart(),o.point(r.a.x,r.a.y)),o.point(r.b.x,r.b.y),n||o.lineEnd(),k=!1):n&&(o.lineStart(),o.point(e,t),k=!1)}M=e,x=t,w=n}var m,g,_,v,y,b,M,x,w,S,k,L=o,T=Ht(),E=Gt(e,t,n,r),D={point:f,lineStart:d,lineEnd:h,polygonStart:function(){o=T,m=[],g=[],k=!0},polygonEnd:function(){o=L,m=ss.merge(m);var t=l([e,r]),n=k&&t,i=m.length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),u(null,null,1,o),o.lineEnd()),i&&Ot(m,a,t,u,o),o.polygonEnd()),m=g=_=null}};return D}}function $t(e){var t=0,n=js/3,r=fn(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*js/180,n=e[1]*js/180):[180*(t/js),180*(n/js)]},i}function Jt(e,t){function n(e,t){var n=Math.sqrt(a-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),s-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,a=1+r*(2*i-r),s=Math.sqrt(a)/i;return n.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/i,ae((a-(e*e+n*n)*i*i)/(2*i))]},n}function Xt(){function e(e,t){qo+=i*e-r*t,r=e,i=t}var t,n,r,i;Xo.point=function(a,s){Xo.point=e,t=r=a,n=i=s},Xo.lineEnd=function(){e(t,n)}}function Zt(e,t){Go>e&&(Go=e),e>$o&&($o=e),Vo>t&&(Vo=t),t>Jo&&(Jo=t)}function Kt(){function e(e,t){s.push("M",e,",",t,a)}function t(e,t){s.push("M",e,",",t),o.point=n}function n(e,t){s.push("L",e,",",t)}function r(){o.point=e}function i(){s.push("Z")}var a=Qt(4.5),s=[],o={point:e,lineStart:function(){o.point=t},lineEnd:r,polygonStart:function(){o.lineEnd=i},polygonEnd:function(){o.lineEnd=r,o.point=e},pointRadius:function(e){return a=Qt(e),o},result:function(){if(s.length){var e=s.join("");return s=[],e}}};return o}function Qt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function en(e,t){Co+=e,Ro+=t,++Oo}function tn(){function e(e,r){var i=e-t,a=r-n,s=Math.sqrt(i*i+a*a);Po+=s*(t+e)/2,Io+=s*(n+r)/2,No+=s,en(t=e,n=r)}var t,n;Ko.point=function(r,i){Ko.point=e,en(t=r,n=i)}}function nn(){Ko.point=en}function rn(){function e(e,t){var n=e-r,a=t-i,s=Math.sqrt(n*n+a*a);Po+=s*(r+e)/2,Io+=s*(i+t)/2,No+=s,s=i*e-r*t,Fo+=s*(r+e),Ho+=s*(i+t),jo+=3*s,en(r=e,i=t)}var t,n,r,i;

Ko.point=function(a,s){Ko.point=e,en(t=r=a,n=i=s)},Ko.lineEnd=function(){e(t,n)}}function an(e){function t(t,n){e.moveTo(t+s,n),e.arc(t,n,s,0,Us)}function n(t,n){e.moveTo(t,n),o.point=r}function r(t,n){e.lineTo(t,n)}function i(){o.point=t}function a(){e.closePath()}var s=4.5,o={point:t,lineStart:function(){o.point=n},lineEnd:i,polygonStart:function(){o.lineEnd=a},polygonEnd:function(){o.lineEnd=i,o.point=t},pointRadius:function(e){return s=e,o},result:w};return o}function sn(e){function t(e){return(o?r:n)(e)}function n(t){return un(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){y=0/0,S.point=a,t.lineStart()}function a(n,r){var a=yt([n,r]),s=e(n,r);i(y,b,v,M,x,w,y=s[0],b=s[1],v=n,M=a[0],x=a[1],w=a[2],o,t),t.point(y,b)}function s(){S.point=n,t.lineEnd()}function l(){r(),S.point=u,S.lineEnd=c}function u(e,t){a(f=e,d=t),h=y,p=b,m=M,g=x,_=w,S.point=a}function c(){i(y,b,v,M,x,w,h,p,f,m,g,_,o,t),S.lineEnd=s,s()}var f,d,h,p,m,g,_,v,y,b,M,x,w,S={point:n,lineStart:r,lineEnd:s,polygonStart:function(){t.polygonStart(),S.lineStart=l},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function i(t,n,r,o,l,u,c,f,d,h,p,m,g,_){var v=c-t,y=f-n,b=v*v+y*y;if(b>4*a&&g--){var M=o+h,x=l+p,w=u+m,S=Math.sqrt(M*M+x*x+w*w),k=Math.asin(w/=S),L=bs(bs(w)-1)<Fs||bs(r-d)<Fs?(r+d)/2:Math.atan2(x,M),T=e(L,k),E=T[0],D=T[1],A=E-t,Y=D-n,C=y*A-v*Y;(C*C/b>a||bs((v*A+y*Y)/b-.5)>.3||s>o*h+l*p+u*m)&&(i(t,n,r,o,l,u,E,D,L,M/=S,x/=S,w,g,_),_.point(E,D),i(E,D,L,M,x,w,c,f,d,h,p,m,g,_))}}var a=.5,s=Math.cos(30*Ws),o=16;return t.precision=function(e){return arguments.length?(o=(a=e*e)>0&&16,t):Math.sqrt(a)},t}function on(e){var t=sn(function(t,n){return e([t*qs,n*qs])});return function(e){return dn(t(e))}}function ln(e){this.stream=e}function un(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function cn(e){return fn(function(){return e})()}function fn(e){function t(e){return e=o(e[0]*Ws,e[1]*Ws),[e[0]*d+l,u-e[1]*d]}function n(e){return e=o.invert((e[0]-l)/d,(u-e[1])/d),e&&[e[0]*qs,e[1]*qs]}function r(){o=Ct(s=mn(_,v,y),a);var e=a(m,g);return l=h-e[0]*d,u=p+e[1]*d,i()}function i(){return c&&(c.valid=!1,c=null),t}var a,s,o,l,u,c,f=sn(function(e,t){return e=a(e,t),[e[0]*d+l,u-e[1]*d]}),d=150,h=480,p=250,m=0,g=0,_=0,v=0,y=0,b=Bo,M=Ye,x=null,w=null;return t.stream=function(e){return c&&(c.valid=!1),c=dn(b(s,f(M(e)))),c.valid=!0,c},t.clipAngle=function(e){return arguments.length?(b=null==e?(x=e,Bo):qt((x=+e)*Ws),i()):x},t.clipExtent=function(e){return arguments.length?(w=e,M=e?Vt(e[0][0],e[0][1],e[1][0],e[1][1]):Ye,i()):w},t.scale=function(e){return arguments.length?(d=+e,r()):d},t.translate=function(e){return arguments.length?(h=+e[0],p=+e[1],r()):[h,p]},t.center=function(e){return arguments.length?(m=e[0]%360*Ws,g=e[1]%360*Ws,r()):[m*qs,g*qs]},t.rotate=function(e){return arguments.length?(_=e[0]%360*Ws,v=e[1]%360*Ws,y=e.length>2?e[2]%360*Ws:0,r()):[_*qs,v*qs,y*qs]},ss.rebind(t,f,"precision"),function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,r()}}function dn(e){return un(e,function(t,n){e.point(t*Ws,n*Ws)})}function hn(e,t){return[e,t]}function pn(e,t){return[e>js?e-Us:-js>e?e+Us:e,t]}function mn(e,t,n){return e?t||n?Ct(_n(e),vn(t,n)):_n(e):t||n?vn(t,n):pn}function gn(e){return function(t,n){return t+=e,[t>js?t-Us:-js>t?t+Us:t,n]}}function _n(e){var t=gn(e);return t.invert=gn(-e),t}function vn(e,t){function n(e,t){var n=Math.cos(t),o=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*r+o*i;return[Math.atan2(l*a-c*s,o*r-u*i),ae(c*a+l*s)]}var r=Math.cos(e),i=Math.sin(e),a=Math.cos(t),s=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),o=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*a-l*s;return[Math.atan2(l*a+u*s,o*r+c*i),ae(c*r-o*i)]},n}function yn(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,a,s,o){var l=s*t;null!=i?(i=bn(n,i),a=bn(n,a),(s>0?a>i:i>a)&&(i+=s*Us)):(i=e+s*Us,a=e-.5*l);for(var u,c=i;s>0?c>a:a>c;c-=l)o.point((u=kt([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function bn(e,t){var n=yt(t);n[0]-=e,St(n);var r=ie(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Fs)%(2*Math.PI)}function Mn(e,t,n){var r=ss.range(e,t-Fs,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function xn(e,t,n){var r=ss.range(e,t-Fs,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function wn(e){return e.source}function Sn(e){return e.target}function kn(e,t,n,r){var i=Math.cos(t),a=Math.sin(t),s=Math.cos(r),o=Math.sin(r),l=i*Math.cos(e),u=i*Math.sin(e),c=s*Math.cos(n),f=s*Math.sin(n),d=2*Math.asin(Math.sqrt(ue(r-t)+i*s*ue(n-e))),h=1/Math.sin(d),p=d?function(e){var t=Math.sin(e*=d)*h,n=Math.sin(d-e)*h,r=n*l+t*c,i=n*u+t*f,s=n*a+t*o;return[Math.atan2(i,r)*qs,Math.atan2(s,Math.sqrt(r*r+i*i))*qs]}:function(){return[e*qs,t*qs]};return p.distance=d,p}function Ln(){function e(e,i){var a=Math.sin(i*=Ws),s=Math.cos(i),o=bs((e*=Ws)-t),l=Math.cos(o);Qo+=Math.atan2(Math.sqrt((o=s*Math.sin(o))*o+(o=r*a-n*s*l)*o),n*a+r*s*l),t=e,n=a,r=s}var t,n,r;el.point=function(i,a){t=i*Ws,n=Math.sin(a*=Ws),r=Math.cos(a),el.point=e},el.lineEnd=function(){el.point=el.lineEnd=w}}function Tn(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),a=e(r*i);return[a*i*Math.sin(t),a*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),a=Math.sin(i),s=Math.cos(i);return[Math.atan2(e*a,r*s),Math.asin(r&&n*a/r)]},n}function En(e,t){function n(e,t){s>0?-zs+Fs>t&&(t=-zs+Fs):t>zs-Fs&&(t=zs-Fs);var n=s/Math.pow(i(t),a);return[n*Math.sin(a*e),s-n*Math.cos(a*e)]}var r=Math.cos(e),i=function(e){return Math.tan(js/4+e/2)},a=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),s=r*Math.pow(i(e),a)/a;return a?(n.invert=function(e,t){var n=s-t,r=ne(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(s/r,1/a))-zs]},n):An}function Dn(e,t){function n(e,t){var n=a-t;return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),a=r/i+e;return bs(i)<Fs?hn:(n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/i,a-ne(i)*Math.sqrt(e*e+n*n)]},n)}function An(e,t){return[e,Math.log(Math.tan(js/4+t/2))]}function Yn(e){var t,n=cn(e),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var s=a.apply(n,arguments);if(s===n){if(t=null==e){var o=js*r(),l=i();a([[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]])}}else t&&(s=null);return s},n.clipExtent(null)}function Cn(e,t){return[Math.log(Math.tan(js/4+t/2)),-e]}function Rn(e){return e[0]}function On(e){return e[1]}function Pn(e){for(var t=e.length,n=[0,1],r=2,i=2;t>i;i++){for(;r>1&&re(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function In(e,t){return e[0]-t[0]||e[1]-t[1]}function Nn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Fn(e,t,n,r){var i=e[0],a=n[0],s=t[0]-i,o=r[0]-a,l=e[1],u=n[1],c=t[1]-l,f=r[1]-u,d=(o*(l-u)-f*(i-a))/(f*s-o*c);return[i+d*s,l+d*c]}function Hn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function jn(){or(this),this.edge=this.site=this.circle=null}function Un(e){var t=dl.pop()||new jn;return t.site=e,t}function Bn(e){Kn(e),ul.remove(e),dl.push(e),or(e)}function zn(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,s=e.N,o=[e];Bn(e);for(var l=a;l.circle&&bs(n-l.circle.x)<Fs&&bs(r-l.circle.cy)<Fs;)a=l.P,o.unshift(l),Bn(l),l=a;o.unshift(l),Kn(l);for(var u=s;u.circle&&bs(n-u.circle.x)<Fs&&bs(r-u.circle.cy)<Fs;)s=u.N,o.push(u),Bn(u),u=s;o.push(u),Kn(u);var c,f=o.length;for(c=1;f>c;++c)u=o[c],l=o[c-1],ir(u.edge,l.site,u.site,i);l=o[0],u=o[f-1],u.edge=nr(l.site,u.site,null,i),Zn(l),Zn(u)}function Wn(e){for(var t,n,r,i,a=e.x,s=e.y,o=ul._;o;)if(r=qn(o,s)-a,r>Fs)o=o.L;else{if(i=a-Gn(o,s),!(i>Fs)){r>-Fs?(t=o.P,n=o):i>-Fs?(t=o,n=o.N):t=n=o;break}if(!o.R){t=o;break}o=o.R}var l=Un(e);if(ul.insert(t,l),t||n){if(t===n)return Kn(t),n=Un(t.site),ul.insert(l,n),l.edge=n.edge=nr(t.site,l.site),Zn(t),Zn(n),void 0;if(!n)return l.edge=nr(t.site,l.site),void 0;Kn(t),Kn(n);var u=t.site,c=u.x,f=u.y,d=e.x-c,h=e.y-f,p=n.site,m=p.x-c,g=p.y-f,_=2*(d*g-h*m),v=d*d+h*h,y=m*m+g*g,b={x:(g*v-h*y)/_+c,y:(d*y-m*v)/_+f};ir(n.edge,u,p,b),l.edge=nr(u,e,null,b),n.edge=nr(e,p,null,b),Zn(t),Zn(n)}}function qn(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var s=e.P;if(!s)return-1/0;n=s.site;var o=n.x,l=n.y,u=l-t;if(!u)return o;var c=o-r,f=1/a-1/u,d=c/u;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-l+u/2+i-a/2)))/f+r:(r+o)/2}function Gn(e,t){var n=e.N;if(n)return qn(n,t);var r=e.site;return r.y===t?r.x:1/0}function Vn(e){this.site=e,this.edges=[]}function $n(e){for(var t,n,r,i,a,s,o,l,u,c,f=e[0][0],d=e[1][0],h=e[0][1],p=e[1][1],m=ll,g=m.length;g--;)if(a=m[g],a&&a.prepare())for(o=a.edges,l=o.length,s=0;l>s;)c=o[s].end(),r=c.x,i=c.y,u=o[++s%l].start(),t=u.x,n=u.y,(bs(r-t)>Fs||bs(i-n)>Fs)&&(o.splice(s,0,new ar(rr(a.site,c,bs(r-f)<Fs&&p-i>Fs?{x:f,y:bs(t-f)<Fs?n:p}:bs(i-p)<Fs&&d-r>Fs?{x:bs(n-p)<Fs?t:d,y:p}:bs(r-d)<Fs&&i-h>Fs?{x:d,y:bs(t-d)<Fs?n:h}:bs(i-h)<Fs&&r-f>Fs?{x:bs(n-h)<Fs?t:f,y:h}:null),a.site,null)),++l)}function Jn(e,t){return t.angle-e.angle}function Xn(){or(this),this.x=this.y=this.arc=this.site=this.cy=null}function Zn(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var s=i.x,o=i.y,l=r.x-s,u=r.y-o,c=a.x-s,f=a.y-o,d=2*(l*f-u*c);if(!(d>=-Hs)){var h=l*l+u*u,p=c*c+f*f,m=(f*h-u*p)/d,g=(l*p-c*h)/d,f=g+o,_=hl.pop()||new Xn;_.arc=e,_.site=i,_.x=m+s,_.y=f+Math.sqrt(m*m+g*g),_.cy=f,e.circle=_;for(var v=null,y=fl._;y;)if(_.y<y.y||_.y===y.y&&_.x<=y.x){if(!y.L){v=y.P;break}y=y.L}else{if(!y.R){v=y;break}y=y.R}fl.insert(v,_),v||(cl=_)}}}}function Kn(e){var t=e.circle;t&&(t.P||(cl=t.N),fl.remove(t),hl.push(t),or(t),e.circle=null)}function Qn(e){for(var t,n=ol,r=Gt(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!er(t,e)||!r(t)||bs(t.a.x-t.b.x)<Fs&&bs(t.a.y-t.b.y)<Fs)&&(t.a=t.b=null,n.splice(i,1))}function er(e,t){var n=e.b;if(n)return!0;var r,i,a=e.a,s=t[0][0],o=t[1][0],l=t[0][1],u=t[1][1],c=e.l,f=e.r,d=c.x,h=c.y,p=f.x,m=f.y,g=(d+p)/2,_=(h+m)/2;if(m===h){if(s>g||g>=o)return;if(d>p){if(a){if(a.y>=u)return}else a={x:g,y:l};n={x:g,y:u}}else{if(a){if(a.y<l)return}else a={x:g,y:u};n={x:g,y:l}}}else if(r=(d-p)/(m-h),i=_-r*g,-1>r||r>1)if(d>p){if(a){if(a.y>=u)return}else a={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(a){if(a.y<l)return}else a={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(m>h){if(a){if(a.x>=o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}else{if(a){if(a.x<s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}return e.a=a,e.b=n,!0}function tr(e,t){this.l=e,this.r=t,this.a=this.b=null}function nr(e,t,n,r){var i=new tr(e,t);return ol.push(i),n&&ir(i,e,t,n),r&&ir(i,t,e,r),ll[e.i].edges.push(new ar(i,e,t)),ll[t.i].edges.push(new ar(i,t,e)),i}function rr(e,t,n){var r=new tr(e,null);return r.a=t,r.b=n,ol.push(r),r}function ir(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function ar(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function sr(){this._=null}function or(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function lr(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ur(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function cr(e){for(;e.L;)e=e.L;return e}function fr(e,t){var n,r,i,a=e.sort(dr).pop();for(ol=[],ll=new Array(e.length),ul=new sr,fl=new sr;;)if(i=cl,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))(a.x!==n||a.y!==r)&&(ll[a.i]=new Vn(a),Wn(a),n=a.x,r=a.y),a=e.pop();else{if(!i)break;zn(i.arc)}t&&(Qn(t),$n(t));var s={cells:ll,edges:ol};return ul=fl=ol=ll=null,s}function dr(e,t){return t.y-e.y||t.x-e.x}function hr(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function pr(e){return e.x}function mr(e){return e.y}function gr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function _r(e,t,n,r,i,a){if(!e(t,n,r,i,a)){var s=.5*(n+i),o=.5*(r+a),l=t.nodes;l[0]&&_r(e,l[0],n,r,s,o),l[1]&&_r(e,l[1],s,r,i,o),l[2]&&_r(e,l[2],n,o,s,a),l[3]&&_r(e,l[3],s,o,i,a)}}function vr(e,t,n,r,i,a,s){var o,l=1/0;return function u(e,c,f,d,h){if(!(c>a||f>s||r>d||i>h)){if(p=e.point){var p,m=t-p[0],g=n-p[1],_=m*m+g*g;if(l>_){var v=Math.sqrt(l=_);r=t-v,i=n-v,a=t+v,s=n+v,o=p}}for(var y=e.nodes,b=.5*(c+d),M=.5*(f+h),x=t>=b,w=n>=M,S=w<<1|x,k=S+4;k>S;++S)if(e=y[3&S])switch(3&S){case 0:u(e,c,f,b,M);break;case 1:u(e,b,f,d,M);break;case 2:u(e,c,M,b,h);break;case 3:u(e,b,M,d,h)}}}(e,r,i,a,s),o}function yr(e,t){e=ss.rgb(e),t=ss.rgb(t);var n=e.r,r=e.g,i=e.b,a=t.r-n,s=t.g-r,o=t.b-i;return function(e){return"#"+Se(Math.round(n+a*e))+Se(Math.round(r+s*e))+Se(Math.round(i+o*e))}}function br(e,t){var n,r={},i={};for(n in e)n in t?r[n]=wr(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function Mr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function xr(e,t){var n,r,i,a=ml.lastIndex=gl.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(n=ml.exec(e))&&(r=gl.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:Mr(n,r)})),a=gl.lastIndex;return a<t.length&&(i=t.slice(a),o[s]?o[s]+=i:o[++s]=i),o.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,r=0;t>r;++r)o[(n=l[r]).i]=n.x(e);return o.join("")})}function wr(e,t){for(var n,r=ss.interpolators.length;--r>=0&&!(n=ss.interpolators[r](e,t)););return n}function Sr(e,t){var n,r=[],i=[],a=e.length,s=t.length,o=Math.min(e.length,t.length);for(n=0;o>n;++n)r.push(wr(e[n],t[n]));for(;a>n;++n)i[n]=e[n];for(;s>n;++n)i[n]=t[n];return function(e){for(n=0;o>n;++n)i[n]=r[n](e);return i}}function kr(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function Lr(e){return function(t){return 1-e(1-t)}}function Tr(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Er(e){return e*e}function Dr(e){return e*e*e}function Ar(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Yr(e){return function(t){return Math.pow(t,e)}}function Cr(e){return 1-Math.cos(e*zs)}function Rr(e){return Math.pow(2,10*(e-1))}function Or(e){return 1-Math.sqrt(1-e*e)}function Pr(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Us*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Us/t)}}function Ir(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Nr(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Fr(e,t){e=ss.hcl(e),t=ss.hcl(t);var n=e.h,r=e.c,i=e.l,a=t.h-n,s=t.c-r,o=t.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?t.c:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return pe(n+a*e,r+s*e,i+o*e)+""}}function Hr(e,t){e=ss.hsl(e),t=ss.hsl(t);var n=e.h,r=e.s,i=e.l,a=t.h-n,s=t.s-r,o=t.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?t.s:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return de(n+a*e,r+s*e,i+o*e)+""}}function jr(e,t){e=ss.lab(e),t=ss.lab(t);var n=e.l,r=e.a,i=e.b,a=t.l-n,s=t.a-r,o=t.b-i;return function(e){return ge(n+a*e,r+s*e,i+o*e)+""}}function Ur(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Br(e){var t=[e.a,e.b],n=[e.c,e.d],r=Wr(t),i=zr(t,n),a=Wr(qr(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*qs,this.translate=[e.e,e.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*qs:0}function zr(e,t){return e[0]*t[0]+e[1]*t[1]}function Wr(e){var t=Math.sqrt(zr(e,e));return t&&(e[0]/=t,e[1]/=t),t}function qr(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Gr(e,t){var n,r=[],i=[],a=ss.transform(e),s=ss.transform(t),o=a.translate,l=s.translate,u=a.rotate,c=s.rotate,f=a.skew,d=s.skew,h=a.scale,p=s.scale;return o[0]!=l[0]||o[1]!=l[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:Mr(o[0],l[0])},{i:3,x:Mr(o[1],l[1])})):l[0]||l[1]?r.push("translate("+l+")"):r.push(""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:Mr(u,c)})):c&&r.push(r.pop()+"rotate("+c+")"),f!=d?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:Mr(f,d)}):d&&r.push(r.pop()+"skewX("+d+")"),h[0]!=p[0]||h[1]!=p[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:Mr(h[0],p[0])},{i:n-2,x:Mr(h[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),n=i.length,function(e){for(var t,a=-1;++a<n;)r[(t=i[a]).i]=t.x(e);return r.join("")}}function Vr(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function $r(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Jr(e){for(var t=e.source,n=e.target,r=Zr(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Xr(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Zr(e,t){if(e===t)return e;for(var n=Xr(e),r=Xr(t),i=n.pop(),a=r.pop(),s=null;i===a;)s=i,i=n.pop(),a=r.pop();return s}function Kr(e){e.fixed|=2}function Qr(e){e.fixed&=-7}function ei(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ti(e){e.fixed&=-5}function ni(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var a,s=e.nodes,o=s.length,l=-1;++l<o;)a=s[l],null!=a&&(ni(a,t,n),e.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=t*n[e.point.index];e.charge+=e.pointCharge=u,r+=u*e.point.x,i+=u*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function ri(e,t){return ss.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=ui,e}function ii(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function ai(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(a=e.children)&&(i=a.length))for(var i,a,s=-1;++s<i;)n.push(a[s]);for(;null!=(e=r.pop());)t(e)}function si(e){return e.children}function oi(e){return e.value}function li(e,t){return t.value-e.value}function ui(e){return ss.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function ci(e){return e.x}function fi(e){return e.y}function di(e,t,n){e.y0=t,e.y=n}function hi(e){return ss.range(e.length)}function pi(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function mi(e){for(var t,n=1,r=0,i=e[0][1],a=e.length;a>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function gi(e){return e.reduce(_i,0)}function _i(e,t){return e+t[1]}function vi(e,t){return yi(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function yi(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];++n<=t;)a[n]=i*n+r;return a}function bi(e){return[ss.min(e),ss.max(e)]}function Mi(e,t){return e.value-t.value}function xi(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function wi(e,t){e._pack_next=t,t._pack_prev=e}function Si(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function ki(e){function t(e){c=Math.min(e.x-e.r,c),f=Math.max(e.x+e.r,f),d=Math.min(e.y-e.r,d),h=Math.max(e.y+e.r,h)}if((n=e.children)&&(u=n.length)){var n,r,i,a,s,o,l,u,c=1/0,f=-1/0,d=1/0,h=-1/0;if(n.forEach(Li),r=n[0],r.x=-r.r,r.y=0,t(r),u>1&&(i=n[1],i.x=i.r,i.y=0,t(i),u>2))for(a=n[2],Di(r,i,a),t(a),xi(r,a),r._pack_prev=a,xi(a,i),i=r._pack_next,s=3;u>s;s++){Di(r,i,a=n[s]);var p=0,m=1,g=1;for(o=i._pack_next;o!==i;o=o._pack_next,m++)if(Si(o,a)){p=1;break}if(1==p)for(l=r._pack_prev;l!==o._pack_prev&&!Si(l,a);l=l._pack_prev,g++);p?(g>m||m==g&&i.r<r.r?wi(r,i=o):wi(r=l,i),s--):(xi(r,a),i=a,t(a))}var _=(c+f)/2,v=(d+h)/2,y=0;for(s=0;u>s;s++)a=n[s],a.x-=_,a.y-=v,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=y,n.forEach(Ti)}}function Li(e){e._pack_next=e._pack_prev=e}function Ti(e){delete e._pack_next,delete e._pack_prev}function Ei(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var a=-1,s=i.length;++a<s;)Ei(i[a],t,n,r)}function Di(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var s=t.r+n.r,o=i*i+a*a;s*=s,r*=r;var l=.5+(r-s)/(2*o),u=Math.sqrt(Math.max(0,2*s*(r+o)-(r-=o)*r-s*s))/(2*o);n.x=e.x+l*i+u*a,n.y=e.y+l*a-u*i}else n.x=e.x+r,n.y=e.y}function Ai(e,t){return e.parent==t.parent?1:2}function Yi(e){var t=e.children;return t.length?t[0]:e.t}function Ci(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Ri(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Oi(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)t=i[a],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Pi(e,t,n){return e.a.parent===t.parent?e.a:n}function Ii(e){return 1+ss.max(e,function(e){return e.y})}function Ni(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Fi(e){var t=e.children;return t&&t.length?Fi(t[0]):e}function Hi(e){var t,n=e.children;return n&&(t=n.length)?Hi(n[t-1]):e}function ji(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Ui(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>a&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function Bi(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function zi(e){return e.rangeExtent?e.rangeExtent():Bi(e.range())}function Wi(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function qi(e,t){var n,r=0,i=e.length-1,a=e[r],s=e[i];return a>s&&(n=r,r=i,i=n,n=a,a=s,s=n),e[r]=t.floor(a),e[i]=t.ceil(s),e}function Gi(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Tl}function Vi(e,t,n,r){var i=[],a=[],s=0,o=Math.min(e.length,t.length)-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<=o;)i.push(n(e[s-1],e[s])),a.push(r(t[s-1],t[s]));return function(t){var n=ss.bisect(e,t,1,o)-1;return a[n](i[n](t))}}function $i(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?Vi:Wi,l=r?$r:Vr;return s=i(e,t,l,n),o=i(t,e,l,wr),a}function a(e){return s(e)}var s,o;return a.invert=function(e){return o(e)},a.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},a.range=function(e){return arguments.length?(t=e,i()):t},a.rangeRound=function(e){return a.range(e).interpolate(Ur)},a.clamp=function(e){return arguments.length?(r=e,i()):r},a.interpolate=function(e){return arguments.length?(n=e,i()):n},a.ticks=function(t){return Ki(e,t)},a.tickFormat=function(t,n){return Qi(e,t,n)},a.nice=function(t){return Xi(e,t),i()},a.copy=function(){return $i(e,t,n,r)},i()}function Ji(e,t){return ss.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Xi(e,t){return qi(e,Gi(Zi(e,t)[2]))}function Zi(e,t){null==t&&(t=10);var n=Bi(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;return.15>=a?i*=10:.35>=a?i*=5:.75>=a&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Ki(e,t){return ss.range.apply(ss,Zi(e,t))}function Qi(e,t,n){var r=Zi(e,t);if(n){var i=mo.exec(n);if(i.shift(),"s"===i[8]){var a=ss.formatPrefix(Math.max(bs(r[0]),bs(r[1])));return i[7]||(i[7]="."+ea(a.scale(r[2]))),i[8]="f",n=ss.format(i.join("")),function(e){return n(a.scale(e))+a.symbol}}i[7]||(i[7]="."+ta(i[8],r)),n=i.join("")}else n=",."+ea(r[2])+"f";return ss.format(n)}function ea(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function ta(e,t){var n=ea(t[2]);return e in El?Math.abs(n-ea(Math.max(bs(t[0]),bs(t[1]))))+ +("e"!==e):n-2*("%"===e)}function na(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function s(t){return e(i(t))}return s.invert=function(t){return a(e.invert(t))},s.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),s):r},s.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),s):t},s.nice=function(){var t=qi(r.map(i),n?Math:Al);return e.domain(t),r=t.map(a),s},s.ticks=function(){var e=Bi(r),s=[],o=e[0],l=e[1],u=Math.floor(i(o)),c=Math.ceil(i(l)),f=t%1?2:t;if(isFinite(c-u)){if(n){for(;c>u;u++)for(var d=1;f>d;d++)s.push(a(u)*d);s.push(a(u))}else for(s.push(a(u));u++<c;)for(var d=f-1;d>0;d--)s.push(a(u)*d);for(u=0;s[u]<o;u++);for(c=s.length;s[c-1]>l;c--);s=s.slice(u,c)}return s},s.tickFormat=function(e,t){if(!arguments.length)return Dl;arguments.length<2?t=Dl:"function"!=typeof t&&(t=ss.format(t));var r,o=Math.max(.1,e/s.ticks().length),l=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(e){return e/a(l(i(e)+r))<=o?t(e):""}},s.copy=function(){return na(e.copy(),t,n,r)},Ji(s,e)}function ra(e,t,n){function r(t){return e(i(t))}var i=ia(t),a=ia(1/t);return r.invert=function(t){return a(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return Ki(n,e)},r.tickFormat=function(e,t){return Qi(n,e,t)},r.nice=function(e){return r.domain(Xi(n,e))},r.exponent=function(s){return arguments.length?(i=ia(t=s),a=ia(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return ra(e.copy(),t,n)},Ji(r,e)}function ia(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function aa(e,t){function n(n){return a[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):0/0))-1)%a.length]}function r(t,n){return ss.range(e.length).map(function(e){return t+n*e})}var i,a,s;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new d;for(var a,s=-1,o=r.length;++s<o;)i.has(a=r[s])||i.set(a,e.push(a));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(a=e,s=0,t={t:"range",a:arguments},n):a},n.rangePoints=function(i,o){arguments.length<2&&(o=0);var l=i[0],u=i[1],c=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+o);return a=r(l+c*o/2,c),s=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,o){arguments.length<2&&(o=0);var l=i[0],u=i[1],c=e.length<2?(l=u=Math.round((l+u)/2),0):0|(u-l)/(e.length-1+o);return a=r(l+Math.round(c*o/2+(u-l-(e.length-1+o)*c)/2),c),s=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var u=i[1]<i[0],c=i[u-0],f=i[1-u],d=(f-c)/(e.length-o+2*l);return a=r(c+d*l,d),u&&a.reverse(),s=d*(1-o),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var u=i[1]<i[0],c=i[u-0],f=i[1-u],d=Math.floor((f-c)/(e.length-o+2*l));return a=r(c+Math.round((f-c-(e.length-o)*d)/2),d),u&&a.reverse(),s=Math.round(d*(1-o)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return s},n.rangeExtent=function(){return Bi(t.a[0])},n.copy=function(){return aa(e,t)},n.domain(e)}function sa(e,t){function n(){var n=0,a=t.length;for(i=[];++n<a;)i[n-1]=ss.quantile(e,n/a);return r}function r(e){return isNaN(e=+e)?void 0:t[ss.bisect(i,e)]}var i;return r.domain=function(t){return arguments.length?(e=t.map(s).filter(o).sort(a),n()):e},r.range=function(e){return arguments.length?(t=e,n()):t},r.quantiles=function(){return i},r.invertExtent=function(n){return n=t.indexOf(n),0>n?[0/0,0/0]:[n>0?i[n-1]:e[0],n<i.length?i[n]:e[e.length-1]]},r.copy=function(){return sa(e,t)},n()}function oa(e,t,n){function r(t){return n[Math.max(0,Math.min(s,Math.floor(a*(t-e))))]}function i(){return a=n.length/(t-e),s=n.length-1,r}var a,s;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?0/0:t/a+e,[t,t+1/a]},r.copy=function(){return oa(e,t,n)},i()}function la(e,t){function n(n){return n>=n?t[ss.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return la(e,t)},n}function ua(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Ki(e,t)},t.tickFormat=function(t,n){return Qi(e,t,n)},t.copy=function(){return ua(e)},t}function ca(){return 0}function fa(e){return e.innerRadius}function da(e){return e.outerRadius}function ha(e){return e.startAngle}function pa(e){return e.endAngle}function ma(e){return e&&e.padAngle}function ga(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function _a(e,t,n,r,i){var a=e[0]-t[0],s=e[1]-t[1],o=(i?r:-r)/Math.sqrt(a*a+s*s),l=o*s,u=-o*a,c=e[0]+l,f=e[1]+u,d=t[0]+l,h=t[1]+u,p=(c+d)/2,m=(f+h)/2,g=d-c,_=h-f,v=g*g+_*_,y=n-r,b=c*h-d*f,M=(0>_?-1:1)*Math.sqrt(y*y*v-b*b),x=(b*_-g*M)/v,w=(-b*g-_*M)/v,S=(b*_+g*M)/v,k=(-b*g+_*M)/v,L=x-p,T=w-m,E=S-p,D=k-m;return L*L+T*T>E*E+D*D&&(x=S,w=k),[[x-l,w-u],[x*n/y,w*n/y]]}function va(e){function t(t){function s(){u.push("M",a(e(c),o))}for(var l,u=[],c=[],f=-1,d=t.length,h=Ae(n),p=Ae(r);++f<d;)i.call(this,l=t[f],f)?c.push([+h.call(this,l,f),+p.call(this,l,f)]):c.length&&(s(),c=[]);return c.length&&s(),u.length?u.join(""):null}var n=Rn,r=On,i=Rt,a=ya,s=a.key,o=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(s="function"==typeof e?a=e:(a=Il.get(e)||ya).key,t):s},t.tension=function(e){return arguments.length?(o=e,t):o},t}function ya(e){return e.join("L")}function ba(e){return ya(e)+"Z"}function Ma(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function xa(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function wa(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Sa(e,t){return e.length<4?ya(e):e[1]+Ta(e.slice(1,-1),Ea(e,t))}function ka(e,t){return e.length<3?ya(e):e[0]+Ta((e.push(e[0]),e),Ea([e[e.length-2]].concat(e,[e[1]]),t))}function La(e,t){return e.length<3?ya(e):e[0]+Ta(e,Ea(e,t))}function Ta(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return ya(e);var n=e.length!=t.length,r="",i=e[0],a=e[1],s=t[0],o=s,l=1;if(n&&(r+="Q"+(a[0]-2*s[0]/3)+","+(a[1]-2*s[1]/3)+","+a[0]+","+a[1],i=e[1],l=2),t.length>1){o=t[1],a=e[l],l++,r+="C"+(i[0]+s[0])+","+(i[1]+s[1])+","+(a[0]-o[0])+","+(a[1]-o[1])+","+a[0]+","+a[1];for(var u=2;u<t.length;u++,l++)a=e[l],o=t[u],r+="S"+(a[0]-o[0])+","+(a[1]-o[1])+","+a[0]+","+a[1]}if(n){var c=e[l];r+="Q"+(a[0]+2*o[0]/3)+","+(a[1]+2*o[1]/3)+","+c[0]+","+c[1]}return r}function Ea(e,t){for(var n,r=[],i=(1-t)/2,a=e[0],s=e[1],o=1,l=e.length;++o<l;)n=a,a=s,s=e[o],r.push([i*(s[0]-n[0]),i*(s[1]-n[1])]);return r}function Da(e){if(e.length<3)return ya(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],s=[i,i,i,(r=e[1])[0]],o=[a,a,a,r[1]],l=[i,",",a,"L",Ra(Hl,s),",",Ra(Hl,o)];for(e.push(e[n-1]);++t<=n;)r=e[t],s.shift(),s.push(r[0]),o.shift(),o.push(r[1]),Oa(l,s,o);return e.pop(),l.push("L",r),l.join("")}function Aa(e){if(e.length<4)return ya(e);for(var t,n=[],r=-1,i=e.length,a=[0],s=[0];++r<3;)t=e[r],a.push(t[0]),s.push(t[1]);for(n.push(Ra(Hl,a)+","+Ra(Hl,s)),--r;++r<i;)t=e[r],a.shift(),a.push(t[0]),s.shift(),s.push(t[1]),Oa(n,a,s);return n.join("")}function Ya(e){for(var t,n,r=-1,i=e.length,a=i+4,s=[],o=[];++r<4;)n=e[r%i],s.push(n[0]),o.push(n[1]);for(t=[Ra(Hl,s),",",Ra(Hl,o)],--r;++r<a;)n=e[r%i],s.shift(),s.push(n[0]),o.shift(),o.push(n[1]),Oa(t,s,o);return t.join("")}function Ca(e,t){var n=e.length-1;if(n)for(var r,i,a=e[0][0],s=e[0][1],o=e[n][0]-a,l=e[n][1]-s,u=-1;++u<=n;)r=e[u],i=u/n,r[0]=t*r[0]+(1-t)*(a+i*o),r[1]=t*r[1]+(1-t)*(s+i*l);return Da(e)}function Ra(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Oa(e,t,n){e.push("C",Ra(Nl,t),",",Ra(Nl,n),",",Ra(Fl,t),",",Ra(Fl,n),",",Ra(Hl,t),",",Ra(Hl,n))}function Pa(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Ia(e){for(var t=0,n=e.length-1,r=[],i=e[0],a=e[1],s=r[0]=Pa(i,a);++t<n;)r[t]=(s+(s=Pa(i=a,a=e[t+1])))/2;

return r[t]=s,r}function Na(e){for(var t,n,r,i,a=[],s=Ia(e),o=-1,l=e.length-1;++o<l;)t=Pa(e[o],e[o+1]),bs(t)<Fs?s[o]=s[o+1]=0:(n=s[o]/t,r=s[o+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),s[o]=i*n,s[o+1]=i*r));for(o=-1;++o<=l;)i=(e[Math.min(l,o+1)][0]-e[Math.max(0,o-1)][0])/(6*(1+s[o]*s[o])),a.push([i||0,s[o]*i||0]);return a}function Fa(e){return e.length<3?ya(e):e[0]+Ta(e,Na(e))}function Ha(e){for(var t,n,r,i=-1,a=e.length;++i<a;)t=e[i],n=t[0],r=t[1]-zs,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function ja(e){function t(t){function l(){m.push("M",o(e(_),f),c,u(e(g.reverse()),f),"Z")}for(var d,h,p,m=[],g=[],_=[],v=-1,y=t.length,b=Ae(n),M=Ae(i),x=n===r?function(){return h}:Ae(r),w=i===a?function(){return p}:Ae(a);++v<y;)s.call(this,d=t[v],v)?(g.push([h=+b.call(this,d,v),p=+M.call(this,d,v)]),_.push([+x.call(this,d,v),+w.call(this,d,v)])):g.length&&(l(),g=[],_=[]);return g.length&&l(),m.length?m.join(""):null}var n=Rn,r=Rn,i=0,a=On,s=Rt,o=ya,l=o.key,u=o,c="L",f=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=a=e,t):a},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(a=e,t):a},t.defined=function(e){return arguments.length?(s=e,t):s},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?o=e:(o=Il.get(e)||ya).key,u=o.reverse||o,c=o.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(f=e,t):f},t}function Ua(e){return e.radius}function Ba(e){return[e.x,e.y]}function za(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-zs;return[n*Math.cos(r),n*Math.sin(r)]}}function Wa(){return 64}function qa(){return"circle"}function Ga(e){var t=Math.sqrt(e/js);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Va(e){return function(){var t,n;(t=this[e])&&(n=t[t.active])&&(--t.count?(delete t[t.active],t.active+=.5):delete this[e],n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function $a(e,t,n){return ks(e,Gl),e.namespace=t,e.id=n,e}function Ja(e,t,n,r){var i=e.id,a=e.namespace;return q(e,"function"==typeof n?function(e,s,o){e[a][i].tween.set(t,r(n.call(e,e.__data__,s,o)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}function Xa(e){return null==e&&(e=""),function(){this.textContent=e}}function Za(e){return null==e?"__transition__":"__transition_"+e+"__"}function Ka(e,t,n,r,i){var a=e[n]||(e[n]={active:0,count:0}),s=a[r];if(!s){var o=i.time;s=a[r]={tween:new d,time:o,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++a.count,ss.timer(function(i){function l(n){if(a.active>r)return c();var i=a[a.active];i&&(--a.count,delete a[a.active],i.event&&i.event.interrupt.call(e,e.__data__,i.index)),a.active=r,s.event&&s.event.start.call(e,e.__data__,t),s.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&m.push(r)}),d=s.ease,f=s.duration,ss.timer(function(){return p.c=u(n||1)?Rt:u,1},0,o)}function u(n){if(a.active!==r)return 1;for(var i=n/f,o=d(i),l=m.length;l>0;)m[--l].call(e,o);return i>=1?(s.event&&s.event.end.call(e,e.__data__,t),c()):void 0}function c(){return--a.count?delete a[r]:delete e[n],1}var f,d,h=s.delay,p=fo,m=[];return p.t=h+o,i>=h?l(i-h):(p.c=l,void 0)},0,o)}}function Qa(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function es(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function ts(e){return e.toISOString()}function ns(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,a=ss.bisect(tu,i);return a==tu.length?[t.year,Zi(e.map(function(e){return e/31536e6}),n)[2]]:a?t[i/tu[a-1]<tu[a]/i?a-1:a]:[iu,Zi(e,n)[2]]}return r.invert=function(t){return rs(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(rs)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,rs(+n+1),t).length}var a=r.domain(),s=Bi(a),o=null==e?i(s,10):"number"==typeof e&&i(s,e);return o&&(e=o[0],t=o[1]),r.domain(qi(a,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=rs(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=rs(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Bi(r.domain()),a=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return a&&(e=a[0],t=a[1]),e.range(n[0],rs(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return ns(e.copy(),t,n)},Ji(r,e)}function rs(e){return new Date(e)}function is(e){return JSON.parse(e.responseText)}function as(e){var t=us.createRange();return t.selectNode(us.body),t.createContextualFragment(e.responseText)}var ss={version:"3.5.2"};Date.now||(Date.now=function(){return+new Date});var os=[].slice,ls=function(e){return os.call(e)},us=document,cs=us.documentElement,fs=window;try{ls(cs.childNodes)[0].nodeType}catch(ds){ls=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}try{us.createElement("div").style.setProperty("opacity",0,"")}catch(hs){var ps=fs.Element.prototype,ms=ps.setAttribute,gs=ps.setAttributeNS,_s=fs.CSSStyleDeclaration.prototype,vs=_s.setProperty;ps.setAttribute=function(e,t){ms.call(this,e,t+"")},ps.setAttributeNS=function(e,t,n){gs.call(this,e,t,n+"")},_s.setProperty=function(e,t,n){vs.call(this,e,t+"",n)}}ss.ascending=a,ss.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},ss.min=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},ss.max=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},ss.extent=function(e,t){var n,r,i,a=-1,s=e.length;if(1===arguments.length){for(;++a<s;)if(null!=(r=e[a])&&r>=r){n=i=r;break}for(;++a<s;)null!=(r=e[a])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++a<s;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=i=r;break}for(;++a<s;)null!=(r=t.call(e,e[a],a))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},ss.sum=function(e,t){var n,r=0,i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)o(n=+e[a])&&(r+=n);else for(;++a<i;)o(n=+t.call(e,e[a],a))&&(r+=n);return r},ss.mean=function(e,t){var n,r=0,i=e.length,a=-1,l=i;if(1===arguments.length)for(;++a<i;)o(n=s(e[a]))?r+=n:--l;else for(;++a<i;)o(n=s(t.call(e,e[a],a)))?r+=n:--l;return l?r/l:void 0},ss.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i},ss.median=function(e,t){var n,r=[],i=e.length,l=-1;if(1===arguments.length)for(;++l<i;)o(n=s(e[l]))&&r.push(n);else for(;++l<i;)o(n=s(t.call(e,e[l],l)))&&r.push(n);return r.length?ss.quantile(r.sort(a),.5):void 0},ss.variance=function(e,t){var n,r,i=e.length,a=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<i;)o(n=s(e[u]))&&(r=n-a,a+=r/++c,l+=r*(n-a));else for(;++u<i;)o(n=s(t.call(e,e[u],u)))&&(r=n-a,a+=r/++c,l+=r*(n-a));return c>1?l/(c-1):void 0},ss.deviation=function(){var e=ss.variance.apply(this,arguments);return e?Math.sqrt(e):e};var ys=l(a);ss.bisectLeft=ys.left,ss.bisect=ss.bisectRight=ys.right,ss.bisector=function(e){return l(1===e.length?function(t,n){return a(e(t),n)}:e)},ss.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,2>a&&(t=0));for(var r,i,a=n-t;a;)i=0|Math.random()*a--,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},ss.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},ss.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],a=new Array(0>r?0:r);r>n;)a[n]=[t=i,i=e[++n]];return a},ss.zip=function(){if(!(r=arguments.length))return[];for(var e=-1,t=ss.min(arguments,u),n=new Array(t);++e<t;)for(var r,i=-1,a=n[e]=new Array(r);++i<r;)a[i]=arguments[i][e];return n},ss.transpose=function(e){return ss.zip.apply(ss,e)},ss.keys=function(e){var t=[];for(var n in e)t.push(n);return t},ss.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},ss.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},ss.merge=function(e){for(var t,n,r,i=e.length,a=-1,s=0;++a<i;)s+=e[a].length;for(n=new Array(s);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--s]=r[t];return n};var bs=Math.abs;ss.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),1/0===(t-e)/n)throw new Error("infinite range");var r,i=[],a=c(bs(n)),s=-1;if(e*=a,t*=a,n*=a,0>n)for(;(r=e+n*++s)>t;)i.push(r/a);else for(;(r=e+n*++s)<t;)i.push(r/a);return i},ss.map=function(e,t){var n=new d;if(e instanceof d)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(1===arguments.length)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t.call(e,r=e[i],i),r)}else for(var s in e)n.set(s,e[s]);return n};var Ms="__proto__",xs="\x00";f(d,{has:m,get:function(e){return this._[h(e)]},set:function(e,t){return this._[h(e)]=t},remove:g,keys:_,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:p(t),value:this._[t]});return e},size:v,empty:y,forEach:function(e){for(var t in this._)e.call(this,p(t),this._[t])}}),ss.nest=function(){function e(t,s,o){if(o>=a.length)return r?r.call(i,s):n?s.sort(n):s;for(var l,u,c,f,h=-1,p=s.length,m=a[o++],g=new d;++h<p;)(f=g.get(l=m(u=s[h])))?f.push(u):g.set(l,[u]);return t?(u=t(),c=function(n,r){u.set(n,e(t,r,o))}):(u={},c=function(n,r){u[n]=e(t,r,o)}),g.forEach(c),u}function t(e,n){if(n>=a.length)return e;var r=[],i=s[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},a=[],s=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(ss.map,n,0),0)},i.key=function(e){return a.push(e),i},i.sortKeys=function(e){return s[a.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},ss.set=function(e){var t=new b;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},f(b,{has:m,add:function(e){return this._[h(e+="")]=!0,e},remove:g,values:_,size:v,empty:y,forEach:function(e){for(var t in this._)e.call(this,p(t))}}),ss.behavior={},ss.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=M(e,t,t[n]);return e};var ws=["webkit","ms","moz","Moz","o","O"];ss.dispatch=function(){for(var e=new S,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=k(e);return e},S.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},ss.event=null,ss.requote=function(e){return e.replace(Ss,"\\$&")};var Ss=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ks={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},Ls=function(e,t){return t.querySelector(e)},Ts=function(e,t){return t.querySelectorAll(e)},Es=cs.matches||cs[x(cs,"matchesSelector")],Ds=function(e,t){return Es.call(e,t)};"function"==typeof Sizzle&&(Ls=function(e,t){return Sizzle(e,t)[0]||null},Ts=Sizzle,Ds=Sizzle.matchesSelector),ss.selection=function(){return Rs};var As=ss.selection.prototype=[];As.select=function(e){var t,n,r,i,a=[];e=A(e);for(var s=-1,o=this.length;++s<o;){a.push(t=[]),t.parentNode=(r=this[s]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(t.push(n=e.call(i,i.__data__,l,s)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return D(a)},As.selectAll=function(e){var t,n,r=[];e=Y(e);for(var i=-1,a=this.length;++i<a;)for(var s=this[i],o=-1,l=s.length;++o<l;)(n=s[o])&&(r.push(t=ls(e.call(n,n.__data__,o,i))),t.parentNode=n);return D(r)};var Ys={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ss.ns={prefix:Ys,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.slice(0,t),e=e.slice(t+1)),Ys.hasOwnProperty(n)?{space:Ys[n],local:e}:e}},As.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=ss.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(C(t,e[t]));return this}return this.each(C(e,t))},As.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=P(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!O(e[i]).test(t))return!1;return!0}for(t in e)this.each(I(t,e[t]));return this}return this.each(I(e,t))},As.style=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t="");for(n in e)this.each(F(n,e[n],t));return this}if(2>r)return fs.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(F(e,t,n))},As.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(H(t,e[t]));return this}return this.each(H(e,t))},As.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},As.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},As.append=function(e){return e=j(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},As.insert=function(e,t){return e=j(e),t=A(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},As.remove=function(){return this.each(U)},As.data=function(e,t){function n(e,n){var r,i,a,s=e.length,c=n.length,f=Math.min(s,c),h=new Array(c),p=new Array(c),m=new Array(s);if(t){var g,_=new d,v=new Array(s);for(r=-1;++r<s;)_.has(g=t.call(i=e[r],i.__data__,r))?m[r]=i:_.set(g,i),v[r]=g;for(r=-1;++r<c;)(i=_.get(g=t.call(n,a=n[r],r)))?i!==!0&&(h[r]=i,i.__data__=a):p[r]=B(a),_.set(g,!0);for(r=-1;++r<s;)_.get(v[r])!==!0&&(m[r]=e[r])}else{for(r=-1;++r<f;)i=e[r],a=n[r],i?(i.__data__=a,h[r]=i):p[r]=B(a);for(;c>r;++r)p[r]=B(n[r]);for(;s>r;++r)m[r]=e[r]}p.update=h,p.parentNode=h.parentNode=m.parentNode=e.parentNode,o.push(p),l.push(h),u.push(m)}var r,i,a=-1,s=this.length;if(!arguments.length){for(e=new Array(s=(r=this[0]).length);++a<s;)(i=r[a])&&(e[a]=i.__data__);return e}var o=G([]),l=D([]),u=D([]);if("function"==typeof e)for(;++a<s;)n(r=this[a],e.call(r,r.parentNode.__data__,a));else for(;++a<s;)n(r=this[a],e);return l.enter=function(){return o},l.exit=function(){return u},l},As.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},As.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=z(e));for(var a=0,s=this.length;s>a;a++){i.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var o=0,l=n.length;l>o;o++)(r=n[o])&&e.call(r,r.__data__,o,a)&&t.push(r)}return D(i)},As.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},As.sort=function(e){e=W.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},As.each=function(e){return q(this,function(t,n,r){e.call(t,t.__data__,n,r)})},As.call=function(e){var t=ls(arguments);return e.apply(t[0]=this,t),this},As.empty=function(){return!this.node()},As.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var a=n[r];if(a)return a}return null},As.size=function(){var e=0;return q(this,function(){++e}),e};var Cs=[];ss.selection.enter=G,ss.selection.enter.prototype=Cs,Cs.append=As.append,Cs.empty=As.empty,Cs.node=As.node,Cs.call=As.call,Cs.size=As.size,Cs.select=function(e){for(var t,n,r,i,a,s=[],o=-1,l=this.length;++o<l;){r=(i=this[o]).update,s.push(t=[]),t.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(a=i[u])?(t.push(r[u]=n=e.call(i.parentNode,a.__data__,u,o)),n.__data__=a.__data__):t.push(null)}return D(s)},Cs.insert=function(e,t){return arguments.length<2&&(t=V(this)),As.insert.call(this,e,t)},ss.select=function(e){var t=["string"==typeof e?Ls(e,us):e];return t.parentNode=cs,D([t])},ss.selectAll=function(e){var t=ls("string"==typeof e?Ts(e,us):e);return t.parentNode=cs,D([t])};var Rs=ss.select(cs);As.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each($(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each($(e,t,n))};var Os=ss.map({mouseenter:"mouseover",mouseleave:"mouseout"});Os.forEach(function(e){"on"+e in us&&Os.remove(e)});var Ps="onselectstart"in us?null:x(cs.style,"userSelect"),Is=0;ss.mouse=function(e){return K(e,T())};var Ns=/WebKit/.test(fs.navigator.userAgent)?-1:0;ss.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=T().changedTouches),t)for(var r,i=0,a=t.length;a>i;++i)if((r=t[i]).identifier===n)return K(e,r)},ss.behavior.drag=function(){function e(){this.on("mousedown.drag",i).on("touchstart.drag",a)}function t(e,t,i,a,s){return function(){function o(){var e,n,r=t(d,m);r&&(e=r[0]-y[0],n=r[1]-y[1],p|=e|n,y=r,h({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:e,dy:n}))}function l(){t(d,m)&&(_.on(a+g,null).on(s+g,null),v(p&&ss.event.target===f),h({type:"dragend"}))}var u,c=this,f=ss.event.target,d=c.parentNode,h=n.of(c,arguments),p=0,m=e(),g=".drag"+(null==m?"":"-"+m),_=ss.select(i()).on(a+g,o).on(s+g,l),v=Z(),y=t(d,m);r?(u=r.apply(c,arguments),u=[u.x-y[0],u.y-y[1]]):u=[0,0],h({type:"dragstart"})}}var n=E(e,"drag","dragstart","dragend"),r=null,i=t(w,ss.mouse,te,"mousemove","mouseup"),a=t(Q,ss.touch,ee,"touchmove","touchend");return e.origin=function(t){return arguments.length?(r=t,e):r},ss.rebind(e,n,"on")},ss.touches=function(e,t){return arguments.length<2&&(t=T().touches),t?ls(t).map(function(t){var n=K(e,t);return n.identifier=t.identifier,n}):[]};var Fs=1e-6,Hs=Fs*Fs,js=Math.PI,Us=2*js,Bs=Us-Fs,zs=js/2,Ws=js/180,qs=180/js,Gs=Math.SQRT2,Vs=2,$s=4;ss.interpolateZoom=function(e,t){function n(e){var t=e*v;if(_){var n=oe(m),s=a/(Vs*d)*(n*le(Gs*t+m)-se(m));return[r+s*u,i+s*c,a*n/oe(Gs*t+m)]}return[r+e*u,i+e*c,a*Math.exp(Gs*t)]}var r=e[0],i=e[1],a=e[2],s=t[0],o=t[1],l=t[2],u=s-r,c=o-i,f=u*u+c*c,d=Math.sqrt(f),h=(l*l-a*a+$s*f)/(2*a*Vs*d),p=(l*l-a*a-$s*f)/(2*l*Vs*d),m=Math.log(Math.sqrt(h*h+1)-h),g=Math.log(Math.sqrt(p*p+1)-p),_=g-m,v=(_||Math.log(l/a))/Gs;return n.duration=1e3*v,n},ss.behavior.zoom=function(){function e(e){e.on(A,c).on(Zs+".zoom",d).on("dblclick.zoom",h).on(R,f)}function t(e){return[(e[0]-w.x)/w.k,(e[1]-w.y)/w.k]}function n(e){return[e[0]*w.k+w.x,e[1]*w.k+w.y]}function r(e){w.k=Math.max(k[0],Math.min(k[1],e))}function i(e,t){t=n(t),w.x+=e[0]-t[0],w.y+=e[1]-t[1]}function a(t,n,a,s){t.__chart__={x:w.x,y:w.y,k:w.k},r(Math.pow(2,s)),i(m=n,a),t=ss.select(t),T>0&&(t=t.transition().duration(T)),t.call(e.event)}function s(){b&&b.domain(y.range().map(function(e){return(e-w.x)/w.k}).map(y.invert)),x&&x.domain(M.range().map(function(e){return(e-w.y)/w.k}).map(M.invert))}function o(e){D++||e({type:"zoomstart"})}function l(e){s(),e({type:"zoom",scale:w.k,translate:[w.x,w.y]})}function u(e){--D||e({type:"zoomend"}),m=null}function c(){function e(){c=1,i(ss.mouse(r),d),l(s)}function n(){f.on(Y,null).on(C,null),h(c&&ss.event.target===a),u(s)}var r=this,a=ss.event.target,s=O.of(r,arguments),c=0,f=ss.select(fs).on(Y,e).on(C,n),d=t(ss.mouse(r)),h=Z();ql.call(r),o(s)}function f(){function e(){var e=ss.touches(p);return h=w.k,e.forEach(function(e){e.identifier in g&&(g[e.identifier]=t(e))}),e}function n(){var t=ss.event.target;ss.select(t).on(b,s).on(M,d),x.push(t);for(var n=ss.event.changedTouches,r=0,i=n.length;i>r;++r)g[n[r].identifier]=null;var o=e(),l=Date.now();if(1===o.length){if(500>l-v){var u=o[0];a(p,u,g[u.identifier],Math.floor(Math.log(w.k)/Math.LN2)+1),L()}v=l}else if(o.length>1){var u=o[0],c=o[1],f=u[0]-c[0],h=u[1]-c[1];_=f*f+h*h}}function s(){var e,t,n,a,s=ss.touches(p);ql.call(p);for(var o=0,u=s.length;u>o;++o,a=null)if(n=s[o],a=g[n.identifier]){if(t)break;e=n,t=a}if(a){var c=(c=n[0]-e[0])*c+(c=n[1]-e[1])*c,f=_&&Math.sqrt(c/_);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+a[0])/2,(t[1]+a[1])/2],r(f*h)}v=null,i(e,t),l(m)}function d(){if(ss.event.touches.length){for(var t=ss.event.changedTouches,n=0,r=t.length;r>n;++n)delete g[t[n].identifier];for(var i in g)return void e()}ss.selectAll(x).on(y,null),S.on(A,c).on(R,f),k(),u(m)}var h,p=this,m=O.of(p,arguments),g={},_=0,y=".zoom-"+ss.event.changedTouches[0].identifier,b="touchmove"+y,M="touchend"+y,x=[],S=ss.select(p),k=Z();n(),o(m),S.on(A,null).on(R,n)}function d(){var e=O.of(this,arguments);_?clearTimeout(_):(p=t(m=g||ss.mouse(this)),ql.call(this),o(e)),_=setTimeout(function(){_=null,u(e)},50),L(),r(Math.pow(2,.002*Js())*w.k),i(m,p),l(e)}function h(){var e=ss.mouse(this),n=Math.log(w.k)/Math.LN2;a(this,e,t(e),ss.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var p,m,g,_,v,y,b,M,x,w={x:0,y:0,k:1},S=[960,500],k=Xs,T=250,D=0,A="mousedown.zoom",Y="mousemove.zoom",C="mouseup.zoom",R="touchstart.zoom",O=E(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=O.of(this,arguments),t=w;zl?ss.select(this).transition().each("start.zoom",function(){w=this.__chart__||{x:0,y:0,k:1},o(e)}).tween("zoom:zoom",function(){var n=S[0],r=S[1],i=m?m[0]:n/2,a=m?m[1]:r/2,s=ss.interpolateZoom([(i-w.x)/w.k,(a-w.y)/w.k,n/w.k],[(i-t.x)/t.k,(a-t.y)/t.k,n/t.k]);return function(t){var r=s(t),o=n/r[2];this.__chart__=w={x:i-r[0]*o,y:a-r[1]*o,k:o},l(e)}}).each("interrupt.zoom",function(){u(e)}).each("end.zoom",function(){u(e)}):(this.__chart__=w,o(e),l(e),u(e))})},e.translate=function(t){return arguments.length?(w={x:+t[0],y:+t[1],k:w.k},s(),e):[w.x,w.y]},e.scale=function(t){return arguments.length?(w={x:w.x,y:w.y,k:+t},s(),e):w.k},e.scaleExtent=function(t){return arguments.length?(k=null==t?Xs:[+t[0],+t[1]],e):k},e.center=function(t){return arguments.length?(g=t&&[+t[0],+t[1]],e):g},e.size=function(t){return arguments.length?(S=t&&[+t[0],+t[1]],e):S},e.duration=function(t){return arguments.length?(T=+t,e):T},e.x=function(t){return arguments.length?(b=t,y=t.copy(),w={x:0,y:0,k:1},e):b},e.y=function(t){return arguments.length?(x=t,M=t.copy(),w={x:0,y:0,k:1},e):x},ss.rebind(e,O,"on")};var Js,Xs=[0,1/0],Zs="onwheel"in us?(Js=function(){return-ss.event.deltaY*(ss.event.deltaMode?120:1)},"wheel"):"onmousewheel"in us?(Js=function(){return ss.event.wheelDelta},"mousewheel"):(Js=function(){return-ss.event.detail},"MozMousePixelScroll");ss.color=ce,ce.prototype.toString=function(){return this.rgb()+""},ss.hsl=fe;var Ks=fe.prototype=new ce;Ks.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new fe(this.h,this.s,this.l/e)},Ks.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new fe(this.h,this.s,e*this.l)},Ks.rgb=function(){return de(this.h,this.s,this.l)},ss.hcl=he;var Qs=he.prototype=new ce;Qs.brighter=function(e){return new he(this.h,this.c,Math.min(100,this.l+eo*(arguments.length?e:1)))},Qs.darker=function(e){return new he(this.h,this.c,Math.max(0,this.l-eo*(arguments.length?e:1)))},Qs.rgb=function(){return pe(this.h,this.c,this.l).rgb()},ss.lab=me;var eo=18,to=.95047,no=1,ro=1.08883,io=me.prototype=new ce;io.brighter=function(e){return new me(Math.min(100,this.l+eo*(arguments.length?e:1)),this.a,this.b)},io.darker=function(e){return new me(Math.max(0,this.l-eo*(arguments.length?e:1)),this.a,this.b)},io.rgb=function(){return ge(this.l,this.a,this.b)},ss.rgb=Me;var ao=Me.prototype=new ce;ao.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new Me(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new Me(i,i,i)},ao.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Me(e*this.r,e*this.g,e*this.b)},ao.hsl=function(){return Le(this.r,this.g,this.b)},ao.toString=function(){return"#"+Se(this.r)+Se(this.g)+Se(this.b)};var so=ss.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});so.forEach(function(e,t){so.set(e,xe(t))}),ss.functor=Ae,ss.xhr=Ce(Ye),ss.dsv=function(e,t){function n(e,n,a){arguments.length<3&&(a=n,n=null);var s=Re(e,t,null==n?r:i(n),a);return s.row=function(e){return arguments.length?s.response(null==(n=e)?r:i(e)):n},s}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function a(t){return t.map(s).join(e)}function s(e){return o.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var o=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(c>=u)return s;if(i)return i=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;u>c;){var r=e.charCodeAt(c++),o=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++o);else if(r!==l)continue;return e.slice(t,c-o)}return e.slice(t)}for(var r,i,a={},s={},o=[],u=e.length,c=0,f=0;(r=n())!==s;){for(var d=[];r!==a&&r!==s;)d.push(r),r=n();t&&null==(d=t(d,f++))||o.push(d)}return o},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new b,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(s).join(e)].concat(t.map(function(t){return i.map(function(e){return s(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(a).join("\n")},n},ss.csv=ss.dsv(",","text/csv"),ss.tsv=ss.dsv("	","text/tab-separated-values");var oo,lo,uo,co,fo,ho=fs[x(fs,"requestAnimationFrame")]||function(e){setTimeout(e,17)};ss.timer=function(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,a={c:e,t:i,f:!1,n:null};lo?lo.n=a:oo=a,lo=a,uo||(co=clearTimeout(co),uo=1,ho(Ie))},ss.timer.flush=function(){Ne(),Fe()},ss.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var po=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(je);ss.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=ss.round(e,He(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),po[8+n/3]};var mo=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,go=ss.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=ss.round(e,He(e,t))).toFixed(Math.max(0,Math.min(20,He(e*(1+1e-15),t))))}}),_o=ss.time={},vo=Date;ze.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){yo.setUTCDate.apply(this._,arguments)},setDay:function(){yo.setUTCDay.apply(this._,arguments)},setFullYear:function(){yo.setUTCFullYear.apply(this._,arguments)},setHours:function(){yo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){yo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){yo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){yo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){yo.setUTCSeconds.apply(this._,arguments)},setTime:function(){yo.setTime.apply(this._,arguments)}};var yo=Date.prototype;_o.year=We(function(e){return e=_o.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),_o.years=_o.year.range,_o.years.utc=_o.year.utc.range,_o.day=We(function(e){var t=new vo(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),_o.days=_o.day.range,_o.days.utc=_o.day.utc.range,_o.dayOfYear=function(e){var t=_o.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=_o[e]=We(function(e){return(e=_o.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=_o.year(e).getDay();return Math.floor((_o.dayOfYear(e)+(n+t)%7)/7)-(n!==t);

});_o[e+"s"]=n.range,_o[e+"s"].utc=n.utc.range,_o[e+"OfYear"]=function(e){var n=_o.year(e).getDay();return Math.floor((_o.dayOfYear(e)+(n+t)%7)/7)}}),_o.week=_o.sunday,_o.weeks=_o.sunday.range,_o.weeks.utc=_o.sunday.utc.range,_o.weekOfYear=_o.sundayOfYear;var bo={"-":"",_:" ",0:"0"},Mo=/^\s*\d+/,xo=/^%/;ss.locale=function(e){return{numberFormat:Ue(e),timeFormat:Ge(e)}};var wo=ss.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ss.format=wo.numberFormat,ss.geo={},ht.prototype={s:0,t:0,add:function(e){pt(e,this.t,So),pt(So.s,this.s,this),this.s?this.t+=So.t:this.s=So.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var So=new ht;ss.geo.stream=function(e,t){e&&ko.hasOwnProperty(e.type)?ko[e.type](e,t):mt(e,t)};var ko={Feature:function(e,t){mt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)mt(n[r].geometry,t)}},Lo={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){gt(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)gt(n[r],t,0)},Polygon:function(e,t){_t(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)_t(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)mt(n[r],t)}};ss.geo.area=function(e){return To=0,ss.geo.stream(e,Do),To};var To,Eo=new ht,Do={sphere:function(){To+=4*js},point:w,lineStart:w,lineEnd:w,polygonStart:function(){Eo.reset(),Do.lineStart=vt},polygonEnd:function(){var e=2*Eo;To+=0>e?4*js+e:e,Do.lineStart=Do.lineEnd=Do.point=w}};ss.geo.bounds=function(){function e(e,t){y.push(b=[c=e,d=e]),f>t&&(f=t),t>h&&(h=t)}function t(t,n){var r=yt([t*Ws,n*Ws]);if(_){var i=Mt(_,r),a=[i[1],-i[0],0],s=Mt(a,i);St(s),s=kt(s);var l=t-p,u=l>0?1:-1,m=s[0]*qs*u,g=bs(l)>180;if(g^(m>u*p&&u*t>m)){var v=s[1]*qs;v>h&&(h=v)}else if(m=(m+360)%360-180,g^(m>u*p&&u*t>m)){var v=-s[1]*qs;f>v&&(f=v)}else f>n&&(f=n),n>h&&(h=n);g?p>t?o(c,t)>o(c,d)&&(d=t):o(t,d)>o(c,d)&&(c=t):d>=c?(c>t&&(c=t),t>d&&(d=t)):t>p?o(c,t)>o(c,d)&&(d=t):o(t,d)>o(c,d)&&(c=t)}else e(t,n);_=r,p=t}function n(){M.point=t}function r(){b[0]=c,b[1]=d,M.point=e,_=null}function i(e,n){if(_){var r=e-p;v+=bs(r)>180?r+(r>0?360:-360):r}else m=e,g=n;Do.point(e,n),t(e,n)}function a(){Do.lineStart()}function s(){i(m,g),Do.lineEnd(),bs(v)>Fs&&(c=-(d=180)),b[0]=c,b[1]=d,_=null}function o(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function u(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,f,d,h,p,m,g,_,v,y,b,M={point:e,lineStart:n,lineEnd:r,polygonStart:function(){M.point=i,M.lineStart=a,M.lineEnd=s,v=0,Do.polygonStart()},polygonEnd:function(){Do.polygonEnd(),M.point=e,M.lineStart=n,M.lineEnd=r,0>Eo?(c=-(d=180),f=-(h=90)):v>Fs?h=90:-Fs>v&&(f=-90),b[0]=c,b[1]=d}};return function(e){h=d=-(c=f=1/0),y=[],ss.geo.stream(e,M);var t=y.length;if(t){y.sort(l);for(var n,r=1,i=y[0],a=[i];t>r;++r)n=y[r],u(n[0],i)||u(n[1],i)?(o(i[0],n[1])>o(i[0],i[1])&&(i[1]=n[1]),o(n[0],i[1])>o(i[0],i[1])&&(i[0]=n[0])):a.push(i=n);for(var s,n,p=-1/0,t=a.length-1,r=0,i=a[t];t>=r;i=n,++r)n=a[r],(s=o(i[1],n[0]))>p&&(p=s,c=n[0],d=i[1])}return y=b=null,1/0===c||1/0===f?[[0/0,0/0],[0/0,0/0]]:[[c,f],[d,h]]}}(),ss.geo.centroid=function(e){Ao=Yo=Co=Ro=Oo=Po=Io=No=Fo=Ho=jo=0,ss.geo.stream(e,Uo);var t=Fo,n=Ho,r=jo,i=t*t+n*n+r*r;return Hs>i&&(t=Po,n=Io,r=No,Fs>Yo&&(t=Co,n=Ro,r=Oo),i=t*t+n*n+r*r,Hs>i)?[0/0,0/0]:[Math.atan2(n,t)*qs,ae(r/Math.sqrt(i))*qs]};var Ao,Yo,Co,Ro,Oo,Po,Io,No,Fo,Ho,jo,Uo={sphere:w,point:Tt,lineStart:Dt,lineEnd:At,polygonStart:function(){Uo.lineStart=Yt},polygonEnd:function(){Uo.lineStart=Dt}},Bo=Nt(Rt,Ut,zt,[-js,-js/2]),zo=1e9;ss.geo.clipExtent=function(){var e,t,n,r,i,a,s={stream:function(e){return i&&(i.valid=!1),i=a(e),i.valid=!0,i},extent:function(o){return arguments.length?(a=Vt(e=+o[0][0],t=+o[0][1],n=+o[1][0],r=+o[1][1]),i&&(i.valid=!1,i=null),s):[[e,t],[n,r]]}};return s.extent([[0,0],[960,500]])},(ss.geo.conicEqualArea=function(){return $t(Jt)}).raw=Jt,ss.geo.albers=function(){return ss.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ss.geo.albersUsa=function(){function e(e){var a=e[0],s=e[1];return t=null,n(a,s),t||(r(a,s),t)||i(a,s),t}var t,n,r,i,a=ss.geo.albers(),s=ss.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o=ss.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?s:i>=.166&&.234>i&&r>=-.214&&-.115>r?o:a).invert(e)},e.stream=function(e){var t=a.stream(e),n=s.stream(e),r=o.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),o.precision(t),e):a.precision()},e.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),o.scale(t),e.translate(a.translate())):a.scale()},e.translate=function(t){if(!arguments.length)return a.translate();var u=a.scale(),c=+t[0],f=+t[1];return n=a.translate(t).clipExtent([[c-.455*u,f-.238*u],[c+.455*u,f+.238*u]]).stream(l).point,r=s.translate([c-.307*u,f+.201*u]).clipExtent([[c-.425*u+Fs,f+.12*u+Fs],[c-.214*u-Fs,f+.234*u-Fs]]).stream(l).point,i=o.translate([c-.205*u,f+.212*u]).clipExtent([[c-.214*u+Fs,f+.166*u+Fs],[c-.115*u-Fs,f+.234*u-Fs]]).stream(l).point,e},e.scale(1070)};var Wo,qo,Go,Vo,$o,Jo,Xo={point:w,lineStart:w,lineEnd:w,polygonStart:function(){qo=0,Xo.lineStart=Xt},polygonEnd:function(){Xo.lineStart=Xo.lineEnd=Xo.point=w,Wo+=bs(qo/2)}},Zo={point:Zt,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Ko={point:en,lineStart:tn,lineEnd:nn,polygonStart:function(){Ko.lineStart=rn},polygonEnd:function(){Ko.point=en,Ko.lineStart=tn,Ko.lineEnd=nn}};ss.geo.path=function(){function e(e){return e&&("function"==typeof o&&a.pointRadius(+o.apply(this,arguments)),s&&s.valid||(s=i(a)),ss.geo.stream(e,s)),a.result()}function t(){return s=null,e}var n,r,i,a,s,o=4.5;return e.area=function(e){return Wo=0,ss.geo.stream(e,i(Xo)),Wo},e.centroid=function(e){return Co=Ro=Oo=Po=Io=No=Fo=Ho=jo=0,ss.geo.stream(e,i(Ko)),jo?[Fo/jo,Ho/jo]:No?[Po/No,Io/No]:Oo?[Co/Oo,Ro/Oo]:[0/0,0/0]},e.bounds=function(e){return $o=Jo=-(Go=Vo=1/0),ss.geo.stream(e,i(Zo)),[[Go,Vo],[$o,Jo]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||on(e):Ye,t()):n},e.context=function(e){return arguments.length?(a=null==(r=e)?new Kt:new an(e),"function"!=typeof o&&a.pointRadius(o),t()):r},e.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(a.pointRadius(+t),+t),e):o},e.projection(ss.geo.albersUsa()).context(null)},ss.geo.transform=function(e){return{stream:function(t){var n=new ln(t);for(var r in e)n[r]=e[r];return n}}},ln.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ss.geo.projection=cn,ss.geo.projectionMutator=fn,(ss.geo.equirectangular=function(){return cn(hn)}).raw=hn.invert=hn,ss.geo.rotation=function(e){function t(t){return t=e(t[0]*Ws,t[1]*Ws),t[0]*=qs,t[1]*=qs,t}return e=mn(e[0]%360*Ws,e[1]*Ws,e.length>2?e[2]*Ws:0),t.invert=function(t){return t=e.invert(t[0]*Ws,t[1]*Ws),t[0]*=qs,t[1]*=qs,t},t},pn.invert=hn,ss.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=mn(-e[0]*Ws,-e[1]*Ws,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=qs,e[1]*=qs}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=yn((t=+r)*Ws,i*Ws),e):t},e.precision=function(r){return arguments.length?(n=yn(t*Ws,(i=+r)*Ws),e):i},e.angle(90)},ss.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Ws,i=e[1]*Ws,a=t[1]*Ws,s=Math.sin(r),o=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(a),f=Math.cos(a);return Math.atan2(Math.sqrt((n=f*s)*n+(n=u*c-l*f*o)*n),l*c+u*f*o)},ss.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return ss.range(Math.ceil(a/g)*g,i,g).map(d).concat(ss.range(Math.ceil(u/_)*_,l,_).map(h)).concat(ss.range(Math.ceil(r/p)*p,n,p).filter(function(e){return bs(e%g)>Fs}).map(c)).concat(ss.range(Math.ceil(o/m)*m,s,m).filter(function(e){return bs(e%_)>Fs}).map(f))}var n,r,i,a,s,o,l,u,c,f,d,h,p=10,m=p,g=90,_=360,v=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(h(l).slice(1),d(i).reverse().slice(1),h(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],u=+t[0][1],l=+t[1][1],a>i&&(t=a,a=i,i=t),u>l&&(t=u,u=l,l=t),e.precision(v)):[[a,u],[i,l]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],o=+t[0][1],s=+t[1][1],r>n&&(t=r,r=n,n=t),o>s&&(t=o,o=s,s=t),e.precision(v)):[[r,o],[n,s]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(g=+t[0],_=+t[1],e):[g,_]},e.minorStep=function(t){return arguments.length?(p=+t[0],m=+t[1],e):[p,m]},e.precision=function(t){return arguments.length?(v=+t,c=Mn(o,s,90),f=xn(r,n,v),d=Mn(u,l,90),h=xn(a,i,v),e):v},e.majorExtent([[-180,-90+Fs],[180,90-Fs]]).minorExtent([[-180,-80-Fs],[180,80+Fs]])},ss.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=wn,i=Sn;return e.distance=function(){return ss.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},ss.geo.interpolate=function(e,t){return kn(e[0]*Ws,e[1]*Ws,t[0]*Ws,t[1]*Ws)},ss.geo.length=function(e){return Qo=0,ss.geo.stream(e,el),Qo};var Qo,el={sphere:w,point:w,lineStart:Ln,lineEnd:w,polygonStart:w,polygonEnd:w},tl=Tn(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(ss.geo.azimuthalEqualArea=function(){return cn(tl)}).raw=tl;var nl=Tn(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},Ye);(ss.geo.azimuthalEquidistant=function(){return cn(nl)}).raw=nl,(ss.geo.conicConformal=function(){return $t(En)}).raw=En,(ss.geo.conicEquidistant=function(){return $t(Dn)}).raw=Dn;var rl=Tn(function(e){return 1/e},Math.atan);(ss.geo.gnomonic=function(){return cn(rl)}).raw=rl,An.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-zs]},(ss.geo.mercator=function(){return Yn(An)}).raw=An;var il=Tn(function(){return 1},Math.asin);(ss.geo.orthographic=function(){return cn(il)}).raw=il;var al=Tn(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(ss.geo.stereographic=function(){return cn(al)}).raw=al,Cn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-zs]},(ss.geo.transverseMercator=function(){var e=Yn(Cn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Cn,ss.geom={},ss.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=Ae(n),a=Ae(r),s=e.length,o=[],l=[];for(t=0;s>t;t++)o.push([+i.call(this,e[t],t),+a.call(this,e[t],t),t]);for(o.sort(In),t=0;s>t;t++)l.push([o[t][0],-o[t][1]]);var u=Pn(o),c=Pn(l),f=c[0]===u[0],d=c[c.length-1]===u[u.length-1],h=[];for(t=u.length-1;t>=0;--t)h.push(e[o[u[t]][2]]);for(t=+f;t<c.length-d;++t)h.push(e[o[c[t]][2]]);return h}var n=Rn,r=On;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},ss.geom.polygon=function(e){return ks(e,sl),e};var sl=ss.geom.polygon.prototype=[];sl.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},sl.centroid=function(e){var t,n,r=-1,i=this.length,a=0,s=0,o=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=o,o=this[r],n=t[0]*o[1]-o[0]*t[1],a+=(t[0]+o[0])*n,s+=(t[1]+o[1])*n;return[a*e,s*e]},sl.clip=function(e){for(var t,n,r,i,a,s,o=Hn(e),l=-1,u=this.length-Hn(this),c=this[u-1];++l<u;){for(t=e.slice(),e.length=0,i=this[l],a=t[(r=t.length-o)-1],n=-1;++n<r;)s=t[n],Nn(s,c,i)?(Nn(a,c,i)||e.push(Fn(a,s,c,i)),e.push(s)):Nn(a,c,i)&&e.push(Fn(a,s,c,i)),a=s;o&&e.push(e[0]),c=i}return e};var ol,ll,ul,cl,fl,dl=[],hl=[];Vn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Jn),t.length},ar.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},sr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=cr(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(lr(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ur(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ur(this,n),e=n,n=e.U),n.C=!1,r.C=!0,lr(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,s=e.R;if(n=a?s?cr(s):a:s,i?i.L===e?i.L=n:i.R=n:this._=n,a&&s?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==s?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=s,s.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return e.C=!1,void 0;do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,lr(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ur(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,lr(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ur(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,lr(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ur(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},ss.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=o[0][0],i=o[0][1],a=o[1][0],s=o[1][1];return fr(n(e),o).cells.forEach(function(n,o){var l=n.edges,u=n.site,c=t[o]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=r&&u.x<=a&&u.y>=i&&u.y<=s?[[r,s],[a,s],[a,i],[r,i]]:[];c.point=e[o]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/Fs)*Fs,y:Math.round(s(e,t)/Fs)*Fs,i:t}})}var r=Rn,i=On,a=r,s=i,o=pl;return e?t(e):(t.links=function(e){return fr(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return fr(n(e)).cells.forEach(function(n,r){for(var i,a,s=n.site,o=n.edges.sort(Jn),l=-1,u=o.length,c=o[u-1].edge,f=c.l===s?c.r:c.l;++l<u;)i=c,a=f,c=o[l].edge,f=c.l===s?c.r:c.l,r<a.i&&r<f.i&&hr(s,a,f)<0&&t.push([e[r],e[a.i],e[f.i]])}),t},t.x=function(e){return arguments.length?(a=Ae(r=e),t):r},t.y=function(e){return arguments.length?(s=Ae(i=e),t):i},t.clipExtent=function(e){return arguments.length?(o=null==e?pl:e,t):o===pl?null:o},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):o===pl?null:o&&o[1]},t)};var pl=[[-1e6,-1e6],[1e6,1e6]];ss.geom.delaunay=function(e){return ss.geom.voronoi().triangles(e)},ss.geom.quadtree=function(e,t,n,r,i){function a(e){function a(e,t,n,r,i,a,s,o){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(bs(l-n)+bs(c-r)<.01)u(e,t,n,r,i,a,s,o);else{var f=e.point;e.x=e.y=e.point=null,u(e,f,l,c,i,a,s,o),u(e,t,n,r,i,a,s,o)}else e.x=n,e.y=r,e.point=t}else u(e,t,n,r,i,a,s,o)}function u(e,t,n,r,i,s,o,l){var u=.5*(i+o),c=.5*(s+l),f=n>=u,d=r>=c,h=d<<1|f;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=gr()),f?i=u:o=u,d?s=c:l=c,a(e,t,n,r,i,s,o,l)}var c,f,d,h,p,m,g,_,v,y=Ae(o),b=Ae(l);if(null!=t)m=t,g=n,_=r,v=i;else if(_=v=-(m=g=1/0),f=[],d=[],p=e.length,s)for(h=0;p>h;++h)c=e[h],c.x<m&&(m=c.x),c.y<g&&(g=c.y),c.x>_&&(_=c.x),c.y>v&&(v=c.y),f.push(c.x),d.push(c.y);else for(h=0;p>h;++h){var M=+y(c=e[h],h),x=+b(c,h);m>M&&(m=M),g>x&&(g=x),M>_&&(_=M),x>v&&(v=x),f.push(M),d.push(x)}var w=_-m,S=v-g;w>S?v=g+w:_=m+S;var k=gr();if(k.add=function(e){a(k,e,+y(e,++h),+b(e,h),m,g,_,v)},k.visit=function(e){_r(e,k,m,g,_,v)},k.find=function(e){return vr(k,e[0],e[1],m,g,_,v)},h=-1,null==t){for(;++h<p;)a(k,e[h],f[h],d[h],m,g,_,v);--h}else e.forEach(k.add);return f=d=e=c=null,k}var s,o=Rn,l=On;return(s=arguments.length)?(o=pr,l=mr,3===s&&(i=n,r=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(o=e,a):o},a.y=function(e){return arguments.length?(l=e,a):l},a.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),a):null==t?null:[[t,n],[r,i]]},a.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),a):null==t?null:[r-t,i-n]},a)},ss.interpolateRgb=yr,ss.interpolateObject=br,ss.interpolateNumber=Mr,ss.interpolateString=xr;var ml=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gl=new RegExp(ml.source,"g");ss.interpolate=wr,ss.interpolators=[function(e,t){var n=typeof t;return("string"===n?so.has(t)||/^(#|rgb\(|hsl\()/.test(t)?yr:xr:t instanceof ce?yr:Array.isArray(t)?Sr:"object"===n&&isNaN(t)?br:Mr)(e,t)}],ss.interpolateArray=Sr;var _l=function(){return Ye},vl=ss.map({linear:_l,poly:Yr,quad:function(){return Er},cubic:function(){return Dr},sin:function(){return Cr},exp:function(){return Rr},circle:function(){return Or},elastic:Pr,back:Ir,bounce:function(){return Nr}}),yl=ss.map({"in":Ye,out:Lr,"in-out":Tr,"out-in":function(e){return Tr(Lr(e))}});ss.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=vl.get(n)||_l,r=yl.get(r)||Ye,kr(r(n.apply(null,os.call(arguments,1))))},ss.interpolateHcl=Fr,ss.interpolateHsl=Hr,ss.interpolateLab=jr,ss.interpolateRound=Ur,ss.transform=function(e){var t=us.createElementNS(ss.ns.prefix.svg,"g");return(ss.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Br(n?n.matrix:bl)})(e)},Br.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var bl={a:1,b:0,c:0,d:1,e:0,f:0};ss.interpolateTransform=Gr,ss.layout={},ss.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Jr(e[n]));return t}},ss.layout.chord=function(){function e(){var e,u,f,d,h,p={},m=[],g=ss.range(a),_=[];for(n=[],r=[],e=0,d=-1;++d<a;){for(u=0,h=-1;++h<a;)u+=i[d][h];m.push(u),_.push(ss.range(a)),e+=u}for(s&&g.sort(function(e,t){return s(m[e],m[t])}),o&&_.forEach(function(e,t){e.sort(function(e,n){return o(i[t][e],i[t][n])})}),e=(Us-c*a)/e,u=0,d=-1;++d<a;){for(f=u,h=-1;++h<a;){var v=g[d],y=_[v][h],b=i[v][y],M=u,x=u+=b*e;p[v+"-"+y]={index:v,subindex:y,startAngle:M,endAngle:x,value:b}}r[v]={index:v,startAngle:f,endAngle:u,value:(u-f)/e},u+=c}for(d=-1;++d<a;)for(h=d-1;++h<a;){var w=p[d+"-"+h],S=p[h+"-"+d];(w.value||S.value)&&n.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,a,s,o,l,u={},c=0;return u.matrix=function(e){return arguments.length?(a=(i=e)&&i.length,n=r=null,u):i},u.padding=function(e){return arguments.length?(c=e,n=r=null,u):c},u.sortGroups=function(e){return arguments.length?(s=e,n=r=null,u):s},u.sortSubgroups=function(e){return arguments.length?(o=e,n=null,u):o},u.sortChords=function(e){return arguments.length?(l=e,n&&t(),u):l},u.chords=function(){return n||e(),n},u.groups=function(){return r||e(),r},u},ss.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,s=t.cy-e.y,o=i-n,l=a*a+s*s;if(l>o*o/g){if(p>l){var u=t.charge/l;e.px-=a*u,e.py-=s*u}return!0}if(t.point&&l&&p>l){var u=t.pointCharge/l;e.px-=a*u,e.py-=s*u}}return!t.charge}}function t(e){e.px=ss.event.x,e.py=ss.event.y,o.resume()}var n,r,i,a,s,o={},l=ss.dispatch("start","tick","end"),u=[1,1],c=.9,f=Ml,d=xl,h=-30,p=wl,m=.1,g=.64,_=[],v=[];return o.tick=function(){if((r*=.99)<.005)return l.end({type:"end",alpha:r=0}),!0;var t,n,o,f,d,p,g,y,b,M=_.length,x=v.length;for(n=0;x>n;++n)o=v[n],f=o.source,d=o.target,y=d.x-f.x,b=d.y-f.y,(p=y*y+b*b)&&(p=r*a[n]*((p=Math.sqrt(p))-i[n])/p,y*=p,b*=p,d.x-=y*(g=f.weight/(d.weight+f.weight)),d.y-=b*g,f.x+=y*(g=1-g),f.y+=b*g);if((g=r*m)&&(y=u[0]/2,b=u[1]/2,n=-1,g))for(;++n<M;)o=_[n],o.x+=(y-o.x)*g,o.y+=(b-o.y)*g;if(h)for(ni(t=ss.geom.quadtree(_),r,s),n=-1;++n<M;)(o=_[n]).fixed||t.visit(e(o));for(n=-1;++n<M;)o=_[n],o.fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*c,o.y-=(o.py-(o.py=o.y))*c);l.tick({type:"tick",alpha:r})},o.nodes=function(e){return arguments.length?(_=e,o):_},o.links=function(e){return arguments.length?(v=e,o):v},o.size=function(e){return arguments.length?(u=e,o):u},o.linkDistance=function(e){return arguments.length?(f="function"==typeof e?e:+e,o):f},o.distance=o.linkDistance,o.linkStrength=function(e){return arguments.length?(d="function"==typeof e?e:+e,o):d},o.friction=function(e){return arguments.length?(c=+e,o):c},o.charge=function(e){return arguments.length?(h="function"==typeof e?e:+e,o):h},o.chargeDistance=function(e){return arguments.length?(p=e*e,o):Math.sqrt(p)},o.gravity=function(e){return arguments.length?(m=+e,o):m},o.theta=function(e){return arguments.length?(g=e*e,o):Math.sqrt(g)},o.alpha=function(e){return arguments.length?(e=+e,r?r=e>0?e:0:e>0&&(l.start({type:"start",alpha:r=e}),ss.timer(o.tick)),o):r},o.start=function(){function e(e,r){if(!n){for(n=new Array(l),o=0;l>o;++o)n[o]=[];for(o=0;u>o;++o){var i=v[o];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var a,s=n[t],o=-1,u=s.length;++o<u;)if(!isNaN(a=s[o][e]))return a;return Math.random()*r}var t,n,r,l=_.length,c=v.length,p=u[0],m=u[1];for(t=0;l>t;++t)(r=_[t]).index=t,r.weight=0;for(t=0;c>t;++t)r=v[t],"number"==typeof r.source&&(r.source=_[r.source]),"number"==typeof r.target&&(r.target=_[r.target]),++r.source.weight,++r.target.weight;for(t=0;l>t;++t)r=_[t],isNaN(r.x)&&(r.x=e("x",p)),isNaN(r.y)&&(r.y=e("y",m)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof f)for(t=0;c>t;++t)i[t]=+f.call(this,v[t],t);else for(t=0;c>t;++t)i[t]=f;if(a=[],"function"==typeof d)for(t=0;c>t;++t)a[t]=+d.call(this,v[t],t);else for(t=0;c>t;++t)a[t]=d;if(s=[],"function"==typeof h)for(t=0;l>t;++t)s[t]=+h.call(this,_[t],t);else for(t=0;l>t;++t)s[t]=h;return o.resume()},o.resume=function(){return o.alpha(.1)},o.stop=function(){return o.alpha(0)},o.drag=function(){return n||(n=ss.behavior.drag().origin(Ye).on("dragstart.force",Kr).on("drag.force",t).on("dragend.force",Qr)),arguments.length?(this.on("mouseover.force",ei).on("mouseout.force",ti).call(n),void 0):n},ss.rebind(o,l,"on")};var Ml=20,xl=1,wl=1/0;ss.layout.hierarchy=function(){function e(i){var a,s=[i],o=[];for(i.depth=0;null!=(a=s.pop());)if(o.push(a),(u=n.call(e,a,a.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)s.push(c=u[l]),c.parent=a,c.depth=a.depth+1;r&&(a.value=0),a.children=u}else r&&(a.value=+r.call(e,a,a.depth)||0),delete a.children;return ai(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),o}var t=li,n=si,r=oi;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(ii(t,function(e){e.children&&(e.value=0)}),ai(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},ss.layout.partition=function(){function e(t,n,r,i){var a=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,a&&(s=a.length)){var s,o,l,u=-1;for(r=t.value?r/t.value:0;++u<s;)e(o=a[u],n,l=o.value*r,i),n+=l}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,t(n[a]));return 1+r}function n(n,a){var s=r.call(this,n,a);return e(s[0],0,i[0],i[1]/t(s[0])),s}var r=ss.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},ri(n,r)},ss.layout.pie=function(){function e(s){var o,l=s.length,u=s.map(function(n,r){return+t.call(e,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,d=Math.min(Math.abs(f)/l,+("function"==typeof a?a.apply(this,arguments):a)),h=d*(0>f?-1:1),p=(f-l*h)/ss.sum(u),m=ss.range(l),g=[];return null!=n&&m.sort(n===Sl?function(e,t){return u[t]-u[e]}:function(e,t){return n(s[e],s[t])}),m.forEach(function(e){g[e]={data:s[e],value:o=u[e],startAngle:c,endAngle:c+=o*p+h,padAngle:d}}),g}var t=Number,n=Sl,r=0,i=Us,a=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(a=t,e):a},e};var Sl={};ss.layout.stack=function(){function e(o,l){if(!(d=o.length))return o;var u=o.map(function(n,r){return t.call(e,n,r)}),c=u.map(function(t){return t.map(function(t,n){return[a.call(e,t,n),s.call(e,t,n)]})}),f=n.call(e,c,l);u=ss.permute(u,f),c=ss.permute(c,f);var d,h,p,m,g=r.call(e,c,l),_=u[0].length;for(p=0;_>p;++p)for(i.call(e,u[0][p],m=g[p],c[0][p][1]),h=1;d>h;++h)i.call(e,u[h][p],m+=c[h-1][p][1],c[h][p][1]);return o}var t=Ye,n=hi,r=pi,i=di,a=ci,s=fi;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:kl.get(t)||hi,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:Ll.get(t)||pi,e):r},e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(s=t,e):s},e.out=function(t){return arguments.length?(i=t,e):i},e};var kl=ss.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(mi),a=e.map(gi),s=ss.range(r).sort(function(e,t){return i[e]-i[t]}),o=0,l=0,u=[],c=[];for(t=0;r>t;++t)n=s[t],l>o?(o+=a[n],u.push(n)):(l+=a[n],c.push(n));return c.reverse().concat(u)},reverse:function(e){return ss.range(e.length).reverse()},"default":hi}),Ll=ss.map({silhouette:function(e){var t,n,r,i=e.length,a=e[0].length,s=[],o=0,l=[];for(n=0;a>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>o&&(o=r),s.push(r)}for(n=0;a>n;++n)l[n]=(o-s[n])/2;return l},wiggle:function(e){var t,n,r,i,a,s,o,l,u,c=e.length,f=e[0],d=f.length,h=[];for(h[0]=l=u=0,n=1;d>n;++n){for(t=0,i=0;c>t;++t)i+=e[t][n][1];for(t=0,a=0,o=f[n][0]-f[n-1][0];c>t;++t){for(r=0,s=(e[t][n][1]-e[t][n-1][1])/(2*o);t>r;++r)s+=(e[r][n][1]-e[r][n-1][1])/o;a+=s*e[t][n][1]}h[n]=l-=i?a/i*o:0,u>l&&(u=l)}for(n=0;d>n;++n)h[n]-=u;return h},expand:function(e){var t,n,r,i=e.length,a=e[0].length,s=1/i,o=[];for(n=0;a>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=s}for(n=0;a>n;++n)o[n]=0;return o},zero:pi});ss.layout.histogram=function(){function e(e,a){for(var s,o,l=[],u=e.map(n,this),c=r.call(this,u,a),f=i.call(this,c,u,a),a=-1,d=u.length,h=f.length-1,p=t?1:1/d;++a<h;)s=l[a]=[],s.dx=f[a+1]-(s.x=f[a]),s.y=0;if(h>0)for(a=-1;++a<d;)o=u[a],o>=c[0]&&o<=c[1]&&(s=l[ss.bisect(f,o,1,h)-1],s.y+=p,s.push(e[a]));return l}var t=!0,n=Number,r=bi,i=vi;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=Ae(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return yi(e,t)}:Ae(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},ss.layout.pack=function(){function e(e,a){var s=n.call(this,e,a),o=s[0],l=i[0],u=i[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(o.x=o.y=0,ai(o,function(e){e.r=+c(e.value)}),ai(o,ki),r){var f=r*(t?1:Math.max(2*o.r/l,2*o.r/u))/2;ai(o,function(e){e.r+=f}),ai(o,ki),ai(o,function(e){e.r-=f})}return Ei(o,l/2,u/2,t?1:1/Math.max(2*o.r/l,2*o.r/u)),s}var t,n=ss.layout.hierarchy().sort(Mi),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},ri(e,n)},ss.layout.tree=function(){function e(e,i){var c=s.call(this,e,i),f=c[0],d=t(f);if(ai(d,n),d.parent.m=-d.z,ii(d,r),u)ii(f,a);else{var h=f,p=f,m=f;ii(f,function(e){e.x<h.x&&(h=e),e.x>p.x&&(p=e),e.depth>m.depth&&(m=e)});var g=o(h,p)/2-h.x,_=l[0]/(p.x+o(p,h)/2+g),v=l[1]/(m.depth||1);ii(f,function(e){e.x=(e.x+g)*_,e.y=e.depth*v})}return c}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,a=t.children,s=0,o=a.length;o>s;++s)r.push((a[s]=i={_:a[s],parent:t,children:(i=a[s].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:s}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){Oi(e);var a=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+o(e._,r._),e.m=e.z-a):e.z=a}else r&&(e.z=r.z+o(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,a=e,s=t,l=i.parent.children[0],u=i.m,c=a.m,f=s.m,d=l.m;s=Ci(s),i=Yi(i),s&&i;)l=Yi(l),a=Ci(a),a.a=e,r=s.z+f-i.z-u+o(s._,i._),r>0&&(Ri(Pi(s,e,n),e,r),u+=r,c+=r),f+=s.m,u+=i.m,d+=l.m,c+=a.m;s&&!Ci(a)&&(a.t=s,a.m+=f-c),i&&!Yi(l)&&(l.t=i,l.m+=u-d,n=e)}return n}function a(e){e.x*=l[0],e.y=e.depth*l[1]}var s=ss.layout.hierarchy().sort(null).value(null),o=Ai,l=[1,1],u=null;return e.separation=function(t){return arguments.length?(o=t,e):o},e.size=function(t){return arguments.length?(u=null==(l=t)?a:null,e):u?null:l},e.nodeSize=function(t){return arguments.length?(u=null==(l=t)?null:a,e):u?l:null},ri(e,s)},ss.layout.cluster=function(){function e(e,a){var s,o=t.call(this,e,a),l=o[0],u=0;ai(l,function(e){var t=e.children;t&&t.length?(e.x=Ni(t),e.y=Ii(t)):(e.x=s?u+=n(e,s):0,e.y=0,s=e)});var c=Fi(l),f=Hi(l),d=c.x-n(c,f)/2,h=f.x+n(f,c)/2;return ai(l,i?function(e){e.x=(e.x-l.x)*r[0],e.y=(l.y-e.y)*r[1]}:function(e){e.x=(e.x-d)/(h-d)*r[0],e.y=(1-(l.y?e.y/l.y:1))*r[1]}),o}var t=ss.layout.hierarchy().sort(null).value(null),n=Ai,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},ri(e,t)},ss.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,a=e.length;++i<a;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var a=n.children;if(a&&a.length){var s,o,l,u=f(n),c=[],d=a.slice(),p=1/0,m="slice"===h?u.dx:"dice"===h?u.dy:"slice-dice"===h?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(e(d,u.dx*u.dy/n.value),c.area=0;(l=d.length)>0;)c.push(s=d[l-1]),c.area+=s.area,"squarify"!==h||(o=r(c,m))<=p?(d.pop(),p=o):(c.area-=c.pop().area,i(c,m,u,!1),m=Math.min(u.dx,u.dy),
c.length=c.area=0,p=1/0);c.length&&(i(c,m,u,!0),c.length=c.area=0),a.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var a,s=f(t),o=r.slice(),l=[];for(e(o,s.dx*s.dy/t.value),l.area=0;a=o.pop();)l.push(a),l.area+=a.area,null!=a.z&&(i(l,a.z?s.dx:s.dy,s,!o.length),l.length=l.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,a=1/0,s=-1,o=e.length;++s<o;)(n=e[s].area)&&(a>n&&(a=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*p/r,r/(t*a*p)):1/0}function i(e,t,n,r){var i,a=-1,s=e.length,o=n.x,u=n.y,c=t?l(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++a<s;)i=e[a],i.x=o,i.y=u,i.dy=c,o+=i.dx=Math.min(n.x+n.dx-o,c?l(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-o,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++a<s;)i=e[a],i.x=o,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?l(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function a(r){var i=s||o(r),a=i[0];return a.x=0,a.y=0,a.dx=u[0],a.dy=u[1],s&&o.revalue(a),e([a],a.dx*a.dy/a.value),(s?n:t)(a),d&&(s=i),i}var s,o=ss.layout.hierarchy(),l=Math.round,u=[1,1],c=null,f=ji,d=!1,h="squarify",p=.5*(1+Math.sqrt(5));return a.size=function(e){return arguments.length?(u=e,a):u},a.padding=function(e){function t(t){var n=e.call(a,t,t.depth);return null==n?ji(t):Ui(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Ui(t,e)}if(!arguments.length)return c;var r;return f=null==(c=e)?ji:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,a},a.round=function(e){return arguments.length?(l=e?Math.round:Number,a):l!=Number},a.sticky=function(e){return arguments.length?(d=e,s=null,a):d},a.ratio=function(e){return arguments.length?(p=e,a):p},a.mode=function(e){return arguments.length?(h=e+"",a):h},ri(a,o)},ss.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=ss.random.normal.apply(ss,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=ss.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},ss.scale={};var Tl={floor:Ye,ceil:Ye};ss.scale.linear=function(){return $i([0,1],[0,1],wr,!1)};var El={s:1,g:1,p:1,r:1,e:1};ss.scale.log=function(){return na(ss.scale.linear().domain([0,1]),10,!0,[1,10])};var Dl=ss.format(".0e"),Al={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};ss.scale.pow=function(){return ra(ss.scale.linear(),1,[0,1])},ss.scale.sqrt=function(){return ss.scale.pow().exponent(.5)},ss.scale.ordinal=function(){return aa([],{t:"range",a:[[]]})},ss.scale.category10=function(){return ss.scale.ordinal().range(Yl)},ss.scale.category20=function(){return ss.scale.ordinal().range(Cl)},ss.scale.category20b=function(){return ss.scale.ordinal().range(Rl)},ss.scale.category20c=function(){return ss.scale.ordinal().range(Ol)};var Yl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(we),Cl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(we),Rl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(we),Ol=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(we);ss.scale.quantile=function(){return sa([],[])},ss.scale.quantize=function(){return oa(0,1,[0,1])},ss.scale.threshold=function(){return la([.5],[0,1])},ss.scale.identity=function(){return ua([0,1])},ss.svg={},ss.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+r.apply(this,arguments)),c=s.apply(this,arguments)-zs,f=o.apply(this,arguments)-zs,d=Math.abs(f-c),h=c>f?0:1;if(e>u&&(p=u,u=e,e=p),d>=Bs)return t(u,h)+(e?t(e,1-h):"")+"Z";var p,m,g,_,v,y,b,M,x,w,S,k,L=0,T=0,E=[];if((_=(+l.apply(this,arguments)||0)/2)&&(g=a===Pl?Math.sqrt(e*e+u*u):+a.apply(this,arguments),h||(T*=-1),u&&(T=ae(g/u*Math.sin(_))),e&&(L=ae(g/e*Math.sin(_)))),u){v=u*Math.cos(c+T),y=u*Math.sin(c+T),b=u*Math.cos(f-T),M=u*Math.sin(f-T);var D=Math.abs(f-c-2*T)<=js?0:1;if(T&&ga(v,y,b,M)===h^D){var A=(c+f)/2;v=u*Math.cos(A),y=u*Math.sin(A),b=M=null}}else v=y=0;if(e){x=e*Math.cos(f-L),w=e*Math.sin(f-L),S=e*Math.cos(c+L),k=e*Math.sin(c+L);var Y=Math.abs(c-f+2*L)<=js?0:1;if(L&&ga(x,w,S,k)===1-h^Y){var C=(c+f)/2;x=e*Math.cos(C),w=e*Math.sin(C),S=k=null}}else x=w=0;if((p=Math.min(Math.abs(u-e)/2,+i.apply(this,arguments)))>.001){m=u>e^h?0:1;var R=null==S?[x,w]:null==b?[v,y]:Fn([v,y],[S,k],[b,M],[x,w]),O=v-R[0],P=y-R[1],I=b-R[0],N=M-R[1],F=1/Math.sin(Math.acos((O*I+P*N)/(Math.sqrt(O*O+P*P)*Math.sqrt(I*I+N*N)))/2),H=Math.sqrt(R[0]*R[0]+R[1]*R[1]);if(null!=b){var j=Math.min(p,(u-H)/(F+1)),U=_a(null==S?[x,w]:[S,k],[v,y],u,j,h),B=_a([b,M],[x,w],u,j,h);p===j?E.push("M",U[0],"A",j,",",j," 0 0,",m," ",U[1],"A",u,",",u," 0 ",1-h^ga(U[1][0],U[1][1],B[1][0],B[1][1]),",",h," ",B[1],"A",j,",",j," 0 0,",m," ",B[0]):E.push("M",U[0],"A",j,",",j," 0 1,",m," ",B[0])}else E.push("M",v,",",y);if(null!=S){var z=Math.min(p,(e-H)/(F-1)),W=_a([v,y],[S,k],e,-z,h),q=_a([x,w],null==b?[v,y]:[b,M],e,-z,h);p===z?E.push("L",q[0],"A",z,",",z," 0 0,",m," ",q[1],"A",e,",",e," 0 ",h^ga(q[1][0],q[1][1],W[1][0],W[1][1]),",",1-h," ",W[1],"A",z,",",z," 0 0,",m," ",W[0]):E.push("L",q[0],"A",z,",",z," 0 0,",m," ",W[0])}else E.push("L",x,",",w)}else E.push("M",v,",",y),null!=b&&E.push("A",u,",",u," 0 ",D,",",h," ",b,",",M),E.push("L",x,",",w),null!=S&&E.push("A",e,",",e," 0 ",Y,",",1-h," ",S,",",k);return E.push("Z"),E.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=fa,r=da,i=ca,a=Pl,s=ha,o=pa,l=ma;return e.innerRadius=function(t){return arguments.length?(n=Ae(t),e):n},e.outerRadius=function(t){return arguments.length?(r=Ae(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=Ae(t),e):i},e.padRadius=function(t){return arguments.length?(a=t==Pl?Pl:Ae(t),e):a},e.startAngle=function(t){return arguments.length?(s=Ae(t),e):s},e.endAngle=function(t){return arguments.length?(o=Ae(t),e):o},e.padAngle=function(t){return arguments.length?(l=Ae(t),e):l},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+s.apply(this,arguments)+ +o.apply(this,arguments))/2-zs;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Pl="auto";ss.svg.line=function(){return va(Ye)};var Il=ss.map({linear:ya,"linear-closed":ba,step:Ma,"step-before":xa,"step-after":wa,basis:Da,"basis-open":Aa,"basis-closed":Ya,bundle:Ca,cardinal:La,"cardinal-open":Sa,"cardinal-closed":ka,monotone:Fa});Il.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Nl=[0,2/3,1/3,0],Fl=[0,1/3,2/3,0],Hl=[0,1/6,2/3,1/6];ss.svg.line.radial=function(){var e=va(Ha);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},xa.reverse=wa,wa.reverse=xa,ss.svg.area=function(){return ja(Ye)},ss.svg.area.radial=function(){var e=ja(Ha);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},ss.svg.chord=function(){function e(e,o){var l=t(this,a,e,o),u=t(this,s,e,o);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,u)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+i(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),a=o.call(e,i,r),s=l.call(e,i,r)-zs,c=u.call(e,i,r)-zs;return{r:a,a0:s,a1:c,p0:[a*Math.cos(s),a*Math.sin(s)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>js)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var a=wn,s=Sn,o=Ua,l=ha,u=pa;return e.radius=function(t){return arguments.length?(o=Ae(t),e):o},e.source=function(t){return arguments.length?(a=Ae(t),e):a},e.target=function(t){return arguments.length?(s=Ae(t),e):s},e.startAngle=function(t){return arguments.length?(l=Ae(t),e):l},e.endAngle=function(t){return arguments.length?(u=Ae(t),e):u},e},ss.svg.diagonal=function(){function e(e,i){var a=t.call(this,e,i),s=n.call(this,e,i),o=(a.y+s.y)/2,l=[a,{x:a.x,y:o},{x:s.x,y:o},s];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=wn,n=Sn,r=Ba;return e.source=function(n){return arguments.length?(t=Ae(n),e):t},e.target=function(t){return arguments.length?(n=Ae(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},ss.svg.diagonal.radial=function(){var e=ss.svg.diagonal(),t=Ba,n=e.projection;return e.projection=function(e){return arguments.length?n(za(t=e)):t},e},ss.svg.symbol=function(){function e(e,r){return(jl.get(t.call(this,e,r))||Ga)(n.call(this,e,r))}var t=qa,n=Wa;return e.type=function(n){return arguments.length?(t=Ae(n),e):t},e.size=function(t){return arguments.length?(n=Ae(t),e):n},e};var jl=ss.map({circle:Ga,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Bl)),n=t*Bl;return"M0,"+-t+"L"+n+",0"+" 0,"+t+" "+-n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Ul),n=t*Ul/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Ul),n=t*Ul/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});ss.svg.symbolTypes=jl.keys();var Ul=Math.sqrt(3),Bl=Math.tan(30*Ws);As.transition=function(e){for(var t,n,r=zl||++Vl,i=Za(e),a=[],s=Wl||{time:Date.now(),ease:Ar,delay:0,duration:250},o=-1,l=this.length;++o<l;){a.push(t=[]);for(var u=this[o],c=-1,f=u.length;++c<f;)(n=u[c])&&Ka(n,c,i,r,s),t.push(n)}return $a(a,i,r)},As.interrupt=function(e){return this.each(null==e?ql:Va(Za(e)))};var zl,Wl,ql=Va(Za()),Gl=[],Vl=0;Gl.call=As.call,Gl.empty=As.empty,Gl.node=As.node,Gl.size=As.size,ss.transition=function(e,t){return e&&e.transition?zl?e.transition(t):e:Rs.transition(e)},ss.transition.prototype=Gl,Gl.select=function(e){var t,n,r,i=this.id,a=this.namespace,s=[];e=A(e);for(var o=-1,l=this.length;++o<l;){s.push(t=[]);for(var u=this[o],c=-1,f=u.length;++c<f;)(r=u[c])&&(n=e.call(r,r.__data__,c,o))?("__data__"in r&&(n.__data__=r.__data__),Ka(n,c,a,i,r[a][i]),t.push(n)):t.push(null)}return $a(s,a,i)},Gl.selectAll=function(e){var t,n,r,i,a,s=this.id,o=this.namespace,l=[];e=Y(e);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],d=-1,h=f.length;++d<h;)if(r=f[d]){a=r[o][s],n=e.call(r,r.__data__,d,u),l.push(t=[]);for(var p=-1,m=n.length;++p<m;)(i=n[p])&&Ka(i,p,o,s,a),t.push(i)}return $a(l,o,s)},Gl.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=z(e));for(var a=0,s=this.length;s>a;a++){i.push(t=[]);for(var n=this[a],o=0,l=n.length;l>o;o++)(r=n[o])&&e.call(r,r.__data__,o,a)&&t.push(r)}return $a(i,this.namespace,this.id)},Gl.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):q(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Gl.attr=function(e,t){function n(){this.removeAttribute(o)}function r(){this.removeAttributeNS(o.space,o.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(o);return n!==e&&(t=s(n,e),function(e){this.setAttribute(o,t(e))})})}function a(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(o.space,o.local);return n!==e&&(t=s(n,e),function(e){this.setAttributeNS(o.space,o.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var s="transform"==e?Gr:wr,o=ss.ns.qualify(e);return Ja(this,"attr."+e,t,o.local?a:i)},Gl.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=ss.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Gl.style=function(e,t,n){function r(){this.style.removeProperty(e)}function i(t){return null==t?r:(t+="",function(){var r,i=fs.getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=wr(i,t),function(t){this.style.setProperty(e,r(t),n)})})}var a=arguments.length;if(3>a){if("string"!=typeof e){2>a&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Ja(this,"style."+e,t,i)},Gl.styleTween=function(e,t,n){function r(r,i){var a=t.call(this,r,i,fs.getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Gl.text=function(e){return Ja(this,"text",e,Xa)},Gl.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Gl.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=ss.ease.apply(ss,arguments)),q(this,function(r){r[n][t].ease=e}))},Gl.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:q(this,"function"==typeof e?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))},Gl.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:q(this,"function"==typeof e?function(r,i,a){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,a))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Gl.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Wl,a=zl;try{zl=n,q(this,function(t,i,a){Wl=t[r][n],e.call(t,t.__data__,i,a)})}finally{Wl=i,zl=a}}else q(this,function(i){var a=i[r][n];(a.event||(a.event=ss.dispatch("start","end","interrupt"))).on(e,t)});return this},Gl.transition=function(){for(var e,t,n,r,i=this.id,a=++Vl,s=this.namespace,o=[],l=0,u=this.length;u>l;l++){o.push(e=[]);for(var t=this[l],c=0,f=t.length;f>c;c++)(n=t[c])&&(r=n[s][i],Ka(n,c,s,a,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return $a(o,s,a)},ss.svg.axis=function(){function e(e){e.each(function(){var e,u=ss.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),d=null==l?f.ticks?f.ticks.apply(f,o):f.domain():l,h=null==t?f.tickFormat?f.tickFormat.apply(f,o):Ye:t,p=u.selectAll(".tick").data(d,f),m=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Fs),g=ss.transition(p.exit()).style("opacity",Fs).remove(),_=ss.transition(p.order()).style("opacity",1),v=Math.max(i,0)+s,y=zi(f),b=u.selectAll(".domain").data([0]),M=(b.enter().append("path").attr("class","domain"),ss.transition(b));m.append("line"),m.append("text");var x,w,S,k,L=m.select("line"),T=_.select("line"),E=p.select("text").text(h),D=m.select("text"),A=_.select("text"),Y="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=Qa,x="x",S="y",w="x2",k="y2",E.attr("dy",0>Y?"0em":".71em").style("text-anchor","middle"),M.attr("d","M"+y[0]+","+Y*a+"V0H"+y[1]+"V"+Y*a)):(e=es,x="y",S="x",w="y2",k="x2",E.attr("dy",".32em").style("text-anchor",0>Y?"end":"start"),M.attr("d","M"+Y*a+","+y[0]+"H0V"+y[1]+"H"+Y*a)),L.attr(k,Y*i),D.attr(S,Y*v),T.attr(w,0).attr(k,Y*i),A.attr(x,0).attr(S,Y*v),f.rangeBand){var C=f,R=C.rangeBand()/2;c=f=function(e){return C(e)+R}}else c.rangeBand?c=f:g.call(e,f,c);m.call(e,c,f),_.call(e,f,f)})}var t,n=ss.scale.linear(),r=$l,i=6,a=6,s=3,o=[10],l=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Jl?t+"":$l,e):r},e.ticks=function(){return arguments.length?(o=arguments,e):o},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,a=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(a=+t,e):a},e.tickPadding=function(t){return arguments.length?(s=+t,e):s},e.tickSubdivide=function(){return arguments.length&&e},e};var $l="bottom",Jl={top:1,right:1,bottom:1,left:1};ss.svg.brush=function(){function e(a){a.each(function(){var a=ss.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),s=a.selectAll(".background").data([0]);s.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),a.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var o=a.selectAll(".resize").data(p,Ye);o.exit().remove(),o.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Xl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),o.style("display",e.empty()?"none":null);var c,f=ss.transition(a),d=ss.transition(s);l&&(c=zi(l),d.attr("x",c[0]).attr("width",c[1]-c[0]),n(f)),u&&(c=zi(u),d.attr("y",c[0]).attr("height",c[1]-c[0]),r(f)),t(f)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+c[+/e$/.test(e)]+","+f[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",c[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1]-c[0])}function r(e){e.select(".extent").attr("y",f[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function i(){function i(){32==ss.event.keyCode&&(E||(v=null,A[0]-=c[1],A[1]-=f[1],E=2),L())}function p(){32==ss.event.keyCode&&2==E&&(A[0]+=c[1],A[1]+=f[1],E=0,L())}function m(){var e=ss.mouse(b),i=!1;y&&(e[0]+=y[0],e[1]+=y[1]),E||(ss.event.altKey?(v||(v=[(c[0]+c[1])/2,(f[0]+f[1])/2]),A[0]=c[+(e[0]<v[0])],A[1]=f[+(e[1]<v[1])]):v=null),k&&g(e,l,0)&&(n(w),i=!0),T&&g(e,u,1)&&(r(w),i=!0),i&&(t(w),x({type:"brush",mode:E?"move":"resize"}))}function g(e,t,n){var r,i,o=zi(t),l=o[0],u=o[1],p=A[n],m=n?f:c,g=m[1]-m[0];return E&&(l-=p,u-=g+p),r=(n?h:d)?Math.max(l,Math.min(u,e[n])):e[n],E?i=(r+=p)+g:(v&&(p=Math.max(l,Math.min(u,2*v[n]-r))),r>p?(i=r,r=p):i=p),m[0]!=r||m[1]!=i?(n?s=null:a=null,m[0]=r,m[1]=i,!0):void 0}function _(){m(),w.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),ss.select("body").style("cursor",null),Y.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),D(),x({type:"brushend"})}var v,y,b=this,M=ss.select(ss.event.target),x=o.of(b,arguments),w=ss.select(b),S=M.datum(),k=!/^(n|s)$/.test(S)&&l,T=!/^(e|w)$/.test(S)&&u,E=M.classed("extent"),D=Z(),A=ss.mouse(b),Y=ss.select(fs).on("keydown.brush",i).on("keyup.brush",p);if(ss.event.changedTouches?Y.on("touchmove.brush",m).on("touchend.brush",_):Y.on("mousemove.brush",m).on("mouseup.brush",_),w.interrupt().selectAll("*").interrupt(),E)A[0]=c[0]-A[0],A[1]=f[0]-A[1];else if(S){var C=+/w$/.test(S),R=+/^n/.test(S);y=[c[1-C]-A[0],f[1-R]-A[1]],A[0]=c[C],A[1]=f[R]}else ss.event.altKey&&(v=A.slice());w.style("pointer-events","none").selectAll(".resize").style("display",null),ss.select("body").style("cursor",M.style("cursor")),x({type:"brushstart"}),m()}var a,s,o=E(e,"brushstart","brush","brushend"),l=null,u=null,c=[0,0],f=[0,0],d=!0,h=!0,p=Zl[0];return e.event=function(e){e.each(function(){var e=o.of(this,arguments),t={x:c,y:f,i:a,j:s},n=this.__chart__||t;this.__chart__=t,zl?ss.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,c=n.x,f=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=Sr(c,t.x),r=Sr(f,t.y);return a=s=null,function(i){c=t.x=n(i),f=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(l=t,p=Zl[!l<<1|!u],e):l},e.y=function(t){return arguments.length?(u=t,p=Zl[!l<<1|!u],e):u},e.clamp=function(t){return arguments.length?(l&&u?(d=!!t[0],h=!!t[1]):l?d=!!t:u&&(h=!!t),e):l&&u?[d,h]:l?d:u?h:null},e.extent=function(t){var n,r,i,o,d;return arguments.length?(l&&(n=t[0],r=t[1],u&&(n=n[0],r=r[0]),a=[n,r],l.invert&&(n=l(n),r=l(r)),n>r&&(d=n,n=r,r=d),(n!=c[0]||r!=c[1])&&(c=[n,r])),u&&(i=t[0],o=t[1],l&&(i=i[1],o=o[1]),s=[i,o],u.invert&&(i=u(i),o=u(o)),i>o&&(d=i,i=o,o=d),(i!=f[0]||o!=f[1])&&(f=[i,o])),e):(l&&(a?(n=a[0],r=a[1]):(n=c[0],r=c[1],l.invert&&(n=l.invert(n),r=l.invert(r)),n>r&&(d=n,n=r,r=d))),u&&(s?(i=s[0],o=s[1]):(i=f[0],o=f[1],u.invert&&(i=u.invert(i),o=u.invert(o)),i>o&&(d=i,i=o,o=d))),l&&u?[[n,i],[r,o]]:l?[n,r]:u&&[i,o])},e.clear=function(){return e.empty()||(c=[0,0],f=[0,0],a=s=null),e},e.empty=function(){return!!l&&c[0]==c[1]||!!u&&f[0]==f[1]},ss.rebind(e,o,"on")};var Xl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Kl=_o.format=wo.timeFormat,Ql=Kl.utc,eu=Ql("%Y-%m-%dT%H:%M:%S.%LZ");Kl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ts:eu,ts.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},ts.toString=eu.toString,_o.second=We(function(e){return new vo(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),_o.seconds=_o.second.range,_o.seconds.utc=_o.second.utc.range,_o.minute=We(function(e){return new vo(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),_o.minutes=_o.minute.range,_o.minutes.utc=_o.minute.utc.range,_o.hour=We(function(e){var t=e.getTimezoneOffset()/60;return new vo(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),_o.hours=_o.hour.range,_o.hours.utc=_o.hour.utc.range,_o.month=We(function(e){return e=_o.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),_o.months=_o.month.range,_o.months.utc=_o.month.utc.range;var tu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],nu=[[_o.second,1],[_o.second,5],[_o.second,15],[_o.second,30],[_o.minute,1],[_o.minute,5],[_o.minute,15],[_o.minute,30],[_o.hour,1],[_o.hour,3],[_o.hour,6],[_o.hour,12],[_o.day,1],[_o.day,2],[_o.week,1],[_o.month,1],[_o.month,3],[_o.year,1]],ru=Kl.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Rt]]),iu={range:function(e,t,n){return ss.range(Math.ceil(e/n)*n,+t,n).map(rs)},floor:Ye,ceil:Ye};nu.year=_o.year,_o.scale=function(){return ns(ss.scale.linear(),nu,ru)};var au=nu.map(function(e){return[e[0].utc,e[1]]}),su=Ql.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Rt]]);au.year=_o.year.utc,_o.scale.utc=function(){return ns(ss.scale.linear(),au,su)},ss.text=Ce(function(e){return e.responseText}),ss.json=function(e,t){return Re(e,"application/json",is,t)},ss.html=function(e,t){return Re(e,"text/html",as,t)},ss.xml=Ce(function(e){return e.responseXML}),true?!(r=ss,i=typeof r==="function"?r.call(t,n,t,e):r,i!==undefined&&(e.exports=i)):"object"==typeof e&&e.exports&&(e.exports=ss),this.d3=ss}();e.exports=d3},function(e,t,n){var r,i;(function(){var n=this;var a=n._;var s=Array.prototype,o=Object.prototype,l=Function.prototype;var u=s.push,c=s.slice,f=o.toString,d=o.hasOwnProperty;var h=Array.isArray,p=Object.keys,m=l.bind,g=Object.create;var _=function(){};var v=function(e){if(e instanceof v)return e;if(!(this instanceof v))return new v(e);this._wrapped=e};if(true){if(typeof e!=="undefined"&&e.exports){t=e.exports=v}t._=v}else{n._=v}v.VERSION="1.8.3";var y=function(e,t,n){if(t===void 0)return e;switch(n==null?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)}}return function(){return e.apply(t,arguments)}};var b=function(e,t,n){if(e==null)return v.identity;if(v.isFunction(e))return y(e,t,n);if(v.isObject(e))return v.matcher(e);return v.property(e)};v.iteratee=function(e,t){return b(e,t,Infinity)};var M=function(e,t){return function(n){var r=arguments.length;if(r<2||n==null)return n;for(var i=1;i<r;i++){var a=arguments[i],s=e(a),o=s.length;for(var l=0;l<o;l++){var u=s[l];if(!t||n[u]===void 0)n[u]=a[u]}}return n}};var x=function(e){if(!v.isObject(e))return{};if(g)return g(e);_.prototype=e;var t=new _;_.prototype=null;return t};var w=function(e){return function(t){return t==null?void 0:t[e]}};var S=Math.pow(2,53)-1;var k=w("length");var L=function(e){var t=k(e);return typeof t=="number"&&t>=0&&t<=S};v.each=v.forEach=function(e,t,n){t=y(t,n);var r,i;if(L(e)){for(r=0,i=e.length;r<i;r++){t(e[r],r,e)}}else{var a=v.keys(e);for(r=0,i=a.length;r<i;r++){t(e[a[r]],a[r],e)}}return e};v.map=v.collect=function(e,t,n){t=b(t,n);var r=!L(e)&&v.keys(e),i=(r||e).length,a=Array(i);for(var s=0;s<i;s++){var o=r?r[s]:s;a[s]=t(e[o],o,e)}return a};function T(e){function t(t,n,r,i,a,s){for(;a>=0&&a<s;a+=e){var o=i?i[a]:a;r=n(r,t[o],o,t)}return r}return function(n,r,i,a){r=y(r,a,4);var s=!L(n)&&v.keys(n),o=(s||n).length,l=e>0?0:o-1;if(arguments.length<3){i=n[s?s[l]:l];l+=e}return t(n,r,i,s,l,o)}}v.reduce=v.foldl=v.inject=T(1);v.reduceRight=v.foldr=T(-1);v.find=v.detect=function(e,t,n){var r;if(L(e)){r=v.findIndex(e,t,n)}else{r=v.findKey(e,t,n)}if(r!==void 0&&r!==-1)return e[r]};v.filter=v.select=function(e,t,n){var r=[];t=b(t,n);v.each(e,function(e,n,i){if(t(e,n,i))r.push(e)});return r};v.reject=function(e,t,n){return v.filter(e,v.negate(b(t)),n)};v.every=v.all=function(e,t,n){t=b(t,n);var r=!L(e)&&v.keys(e),i=(r||e).length;for(var a=0;a<i;a++){var s=r?r[a]:a;if(!t(e[s],s,e))return false}return true};v.some=v.any=function(e,t,n){t=b(t,n);var r=!L(e)&&v.keys(e),i=(r||e).length;for(var a=0;a<i;a++){var s=r?r[a]:a;if(t(e[s],s,e))return true}return false};v.contains=v.includes=v.include=function(e,t,n,r){if(!L(e))e=v.values(e);if(typeof n!="number"||r)n=0;return v.indexOf(e,t,n)>=0};v.invoke=function(e,t){var n=c.call(arguments,2);var r=v.isFunction(t);return v.map(e,function(e){var i=r?t:e[t];return i==null?i:i.apply(e,n)})};v.pluck=function(e,t){return v.map(e,v.property(t))};v.where=function(e,t){return v.filter(e,v.matcher(t))};v.findWhere=function(e,t){return v.find(e,v.matcher(t))};v.max=function(e,t,n){var r=-Infinity,i=-Infinity,a,s;if(t==null&&e!=null){e=L(e)?e:v.values(e);for(var o=0,l=e.length;o<l;o++){a=e[o];if(a>r){r=a}}}else{t=b(t,n);v.each(e,function(e,n,a){s=t(e,n,a);if(s>i||s===-Infinity&&r===-Infinity){r=e;i=s}})}return r};v.min=function(e,t,n){var r=Infinity,i=Infinity,a,s;if(t==null&&e!=null){e=L(e)?e:v.values(e);for(var o=0,l=e.length;o<l;o++){a=e[o];if(a<r){r=a}}}else{t=b(t,n);v.each(e,function(e,n,a){s=t(e,n,a);if(s<i||s===Infinity&&r===Infinity){r=e;i=s}})}return r};v.shuffle=function(e){var t=L(e)?e:v.values(e);var n=t.length;var r=Array(n);for(var i=0,a;i<n;i++){a=v.random(0,i);if(a!==i)r[i]=r[a];r[a]=t[i]}return r};v.sample=function(e,t,n){if(t==null||n){if(!L(e))e=v.values(e);return e[v.random(e.length-1)]}return v.shuffle(e).slice(0,Math.max(0,t))};v.sortBy=function(e,t,n){t=b(t,n);return v.pluck(v.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria;var r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var E=function(e){return function(t,n,r){var i={};n=b(n,r);v.each(t,function(r,a){var s=n(r,a,t);e(i,r,s)});return i}};v.groupBy=E(function(e,t,n){if(v.has(e,n))e[n].push(t);else e[n]=[t]});v.indexBy=E(function(e,t,n){e[n]=t});v.countBy=E(function(e,t,n){if(v.has(e,n))e[n]++;else e[n]=1});v.toArray=function(e){if(!e)return[];if(v.isArray(e))return c.call(e);if(L(e))return v.map(e,v.identity);return v.values(e)};v.size=function(e){if(e==null)return 0;return L(e)?e.length:v.keys(e).length};v.partition=function(e,t,n){t=b(t,n);var r=[],i=[];v.each(e,function(e,n,a){(t(e,n,a)?r:i).push(e)});return[r,i]};v.first=v.head=v.take=function(e,t,n){if(e==null)return void 0;if(t==null||n)return e[0];return v.initial(e,e.length-t)};v.initial=function(e,t,n){return c.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))};v.last=function(e,t,n){if(e==null)return void 0;if(t==null||n)return e[e.length-1];return v.rest(e,Math.max(0,e.length-t))};v.rest=v.tail=v.drop=function(e,t,n){return c.call(e,t==null||n?1:t)};v.compact=function(e){return v.filter(e,v.identity)};var D=function(e,t,n,r){var i=[],a=0;for(var s=r||0,o=k(e);s<o;s++){var l=e[s];if(L(l)&&(v.isArray(l)||v.isArguments(l))){if(!t)l=D(l,t,n);var u=0,c=l.length;i.length+=c;while(u<c){i[a++]=l[u++]}}else if(!n){i[a++]=l}}return i};v.flatten=function(e,t){return D(e,t,false)};v.without=function(e){return v.difference(e,c.call(arguments,1))};v.uniq=v.unique=function(e,t,n,r){if(!v.isBoolean(t)){r=n;n=t;t=false}if(n!=null)n=b(n,r);var i=[];var a=[];for(var s=0,o=k(e);s<o;s++){var l=e[s],u=n?n(l,s,e):l;if(t){if(!s||a!==u)i.push(l);a=u}else if(n){if(!v.contains(a,u)){a.push(u);i.push(l)}}else if(!v.contains(i,l)){i.push(l)}}return i};v.union=function(){return v.uniq(D(arguments,true,true))};v.intersection=function(e){var t=[];var n=arguments.length;for(var r=0,i=k(e);r<i;r++){var a=e[r];if(v.contains(t,a))continue;for(var s=1;s<n;s++){if(!v.contains(arguments[s],a))break}if(s===n)t.push(a)}return t};v.difference=function(e){var t=D(arguments,true,true,1);return v.filter(e,function(e){return!v.contains(t,e)})};v.zip=function(){return v.unzip(arguments)};v.unzip=function(e){var t=e&&v.max(e,k).length||0;var n=Array(t);for(var r=0;r<t;r++){n[r]=v.pluck(e,r)}return n};v.object=function(e,t){var n={};for(var r=0,i=k(e);r<i;r++){if(t){n[e[r]]=t[r]}else{n[e[r][0]]=e[r][1]}}return n};function A(e){return function(t,n,r){n=b(n,r);var i=k(t);var a=e>0?0:i-1;for(;a>=0&&a<i;a+=e){if(n(t[a],a,t))return a}return-1}}v.findIndex=A(1);v.findLastIndex=A(-1);v.sortedIndex=function(e,t,n,r){n=b(n,r,1);var i=n(t);var a=0,s=k(e);while(a<s){var o=Math.floor((a+s)/2);if(n(e[o])<i)a=o+1;else s=o}return a};function Y(e,t,n){return function(r,i,a){var s=0,o=k(r);if(typeof a=="number"){if(e>0){s=a>=0?a:Math.max(a+o,s)}else{o=a>=0?Math.min(a+1,o):a+o+1}}else if(n&&a&&o){a=n(r,i);return r[a]===i?a:-1}if(i!==i){a=t(c.call(r,s,o),v.isNaN);return a>=0?a+s:-1}for(a=e>0?s:o-1;a>=0&&a<o;a+=e){if(r[a]===i)return a}return-1}}v.indexOf=Y(1,v.findIndex,v.sortedIndex);v.lastIndexOf=Y(-1,v.findLastIndex);v.range=function(e,t,n){if(t==null){t=e||0;e=0}n=n||1;var r=Math.max(Math.ceil((t-e)/n),0);var i=Array(r);for(var a=0;a<r;a++,e+=n){i[a]=e}return i};var C=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var a=x(e.prototype);var s=e.apply(a,i);if(v.isObject(s))return s;return a};v.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,c.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2);var r=function(){return C(e,r,t,this,n.concat(c.call(arguments)))};return r};v.partial=function(e){var t=c.call(arguments,1);var n=function(){var r=0,i=t.length;var a=Array(i);for(var s=0;s<i;s++){
a[s]=t[s]===v?arguments[r++]:t[s]}while(r<arguments.length)a.push(arguments[r++]);return C(e,n,this,this,a)};return n};v.bindAll=function(e){var t,n=arguments.length,r;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++){r=arguments[t];e[r]=v.bind(e[r],e)}return e};v.memoize=function(e,t){var n=function(r){var i=n.cache;var a=""+(t?t.apply(this,arguments):r);if(!v.has(i,a))i[a]=e.apply(this,arguments);return i[a]};n.cache={};return n};v.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)};v.defer=v.partial(v.delay,v,1);v.throttle=function(e,t,n){var r,i,a;var s=null;var o=0;if(!n)n={};var l=function(){o=n.leading===false?0:v.now();s=null;a=e.apply(r,i);if(!s)r=i=null};return function(){var u=v.now();if(!o&&n.leading===false)o=u;var c=t-(u-o);r=this;i=arguments;if(c<=0||c>t){if(s){clearTimeout(s);s=null}o=u;a=e.apply(r,i);if(!s)r=i=null}else if(!s&&n.trailing!==false){s=setTimeout(l,c)}return a}};v.debounce=function(e,t,n){var r,i,a,s,o;var l=function(){var u=v.now()-s;if(u<t&&u>=0){r=setTimeout(l,t-u)}else{r=null;if(!n){o=e.apply(a,i);if(!r)a=i=null}}};return function(){a=this;i=arguments;s=v.now();var u=n&&!r;if(!r)r=setTimeout(l,t);if(u){o=e.apply(a,i);a=i=null}return o}};v.wrap=function(e,t){return v.partial(t,e)};v.negate=function(e){return function(){return!e.apply(this,arguments)}};v.compose=function(){var e=arguments;var t=e.length-1;return function(){var n=t;var r=e[t].apply(this,arguments);while(n--)r=e[n].call(this,r);return r}};v.after=function(e,t){return function(){if(--e<1){return t.apply(this,arguments)}}};v.before=function(e,t){var n;return function(){if(--e>0){n=t.apply(this,arguments)}if(e<=1)t=null;return n}};v.once=v.partial(v.before,2);var R=!{toString:null}.propertyIsEnumerable("toString");var O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function P(e,t){var n=O.length;var r=e.constructor;var i=v.isFunction(r)&&r.prototype||o;var a="constructor";if(v.has(e,a)&&!v.contains(t,a))t.push(a);while(n--){a=O[n];if(a in e&&e[a]!==i[a]&&!v.contains(t,a)){t.push(a)}}}v.keys=function(e){if(!v.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)if(v.has(e,n))t.push(n);if(R)P(e,t);return t};v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var n in e)t.push(n);if(R)P(e,t);return t};v.values=function(e){var t=v.keys(e);var n=t.length;var r=Array(n);for(var i=0;i<n;i++){r[i]=e[t[i]]}return r};v.mapObject=function(e,t,n){t=b(t,n);var r=v.keys(e),i=r.length,a={},s;for(var o=0;o<i;o++){s=r[o];a[s]=t(e[s],s,e)}return a};v.pairs=function(e){var t=v.keys(e);var n=t.length;var r=Array(n);for(var i=0;i<n;i++){r[i]=[t[i],e[t[i]]]}return r};v.invert=function(e){var t={};var n=v.keys(e);for(var r=0,i=n.length;r<i;r++){t[e[n[r]]]=n[r]}return t};v.functions=v.methods=function(e){var t=[];for(var n in e){if(v.isFunction(e[n]))t.push(n)}return t.sort()};v.extend=M(v.allKeys);v.extendOwn=v.assign=M(v.keys);v.findKey=function(e,t,n){t=b(t,n);var r=v.keys(e),i;for(var a=0,s=r.length;a<s;a++){i=r[a];if(t(e[i],i,e))return i}};v.pick=function(e,t,n){var r={},i=e,a,s;if(i==null)return r;if(v.isFunction(t)){s=v.allKeys(i);a=y(t,n)}else{s=D(arguments,false,false,1);a=function(e,t,n){return t in n};i=Object(i)}for(var o=0,l=s.length;o<l;o++){var u=s[o];var c=i[u];if(a(c,u,i))r[u]=c}return r};v.omit=function(e,t,n){if(v.isFunction(t)){t=v.negate(t)}else{var r=v.map(D(arguments,false,false,1),String);t=function(e,t){return!v.contains(r,t)}}return v.pick(e,t,n)};v.defaults=M(v.allKeys,true);v.create=function(e,t){var n=x(e);if(t)v.extendOwn(n,t);return n};v.clone=function(e){if(!v.isObject(e))return e;return v.isArray(e)?e.slice():v.extend({},e)};v.tap=function(e,t){t(e);return e};v.isMatch=function(e,t){var n=v.keys(t),r=n.length;if(e==null)return!r;var i=Object(e);for(var a=0;a<r;a++){var s=n[a];if(t[s]!==i[s]||!(s in i))return false}return true};var I=function(e,t,n,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return e===t;if(e instanceof v)e=e._wrapped;if(t instanceof v)t=t._wrapped;var i=f.call(e);if(i!==f.call(t))return false;switch(i){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a=i==="[object Array]";if(!a){if(typeof e!="object"||typeof t!="object")return false;var s=e.constructor,o=t.constructor;if(s!==o&&!(v.isFunction(s)&&s instanceof s&&v.isFunction(o)&&o instanceof o)&&("constructor"in e&&"constructor"in t)){return false}}n=n||[];r=r||[];var l=n.length;while(l--){if(n[l]===e)return r[l]===t}n.push(e);r.push(t);if(a){l=e.length;if(l!==t.length)return false;while(l--){if(!I(e[l],t[l],n,r))return false}}else{var u=v.keys(e),c;l=u.length;if(v.keys(t).length!==l)return false;while(l--){c=u[l];if(!(v.has(t,c)&&I(e[c],t[c],n,r)))return false}}n.pop();r.pop();return true};v.isEqual=function(e,t){return I(e,t)};v.isEmpty=function(e){if(e==null)return true;if(L(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e)))return e.length===0;return v.keys(e).length===0};v.isElement=function(e){return!!(e&&e.nodeType===1)};v.isArray=h||function(e){return f.call(e)==="[object Array]"};v.isObject=function(e){var t=typeof e;return t==="function"||t==="object"&&!!e};v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){v["is"+e]=function(t){return f.call(t)==="[object "+e+"]"}});if(!v.isArguments(arguments)){v.isArguments=function(e){return v.has(e,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){v.isFunction=function(e){return typeof e=="function"||false}}v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))};v.isNaN=function(e){return v.isNumber(e)&&e!==+e};v.isBoolean=function(e){return e===true||e===false||f.call(e)==="[object Boolean]"};v.isNull=function(e){return e===null};v.isUndefined=function(e){return e===void 0};v.has=function(e,t){return e!=null&&d.call(e,t)};v.noConflict=function(){n._=a;return this};v.identity=function(e){return e};v.constant=function(e){return function(){return e}};v.noop=function(){};v.property=w;v.propertyOf=function(e){return e==null?function(){}:function(t){return e[t]}};v.matcher=v.matches=function(e){e=v.extendOwn({},e);return function(t){return v.isMatch(t,e)}};v.times=function(e,t,n){var r=Array(Math.max(0,e));t=y(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r};v.random=function(e,t){if(t==null){t=e;e=0}return e+Math.floor(Math.random()*(t-e+1))};v.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var F=v.invert(N);var H=function(e){var t=function(t){return e[t]};var n="(?:"+v.keys(e).join("|")+")";var r=RegExp(n);var i=RegExp(n,"g");return function(e){e=e==null?"":""+e;return r.test(e)?e.replace(i,t):e}};v.escape=H(N);v.unescape=H(F);v.result=function(e,t,n){var r=e==null?void 0:e[t];if(r===void 0){r=n}return v.isFunction(r)?r.call(e):r};var j=0;v.uniqueId=function(e){var t=++j+"";return e?e+t:t};v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/;var B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var z=/\\|'|\r|\n|\u2028|\u2029/g;var W=function(e){return"\\"+B[e]};v.template=function(e,t,n){if(!t&&n)t=n;t=v.defaults({},t,v.templateSettings);var r=RegExp([(t.escape||U).source,(t.interpolate||U).source,(t.evaluate||U).source].join("|")+"|$","g");var i=0;var a="__p+='";e.replace(r,function(t,n,r,s,o){a+=e.slice(i,o).replace(z,W);i=o+t.length;if(n){a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"}else if(r){a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"}else if(s){a+="';\n"+s+"\n__p+='"}return t});a+="';\n";if(!t.variable)a="with(obj||{}){\n"+a+"}\n";a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var s=new Function(t.variable||"obj","_",a)}catch(o){o.source=a;throw o}var l=function(e){return s.call(this,e,v)};var u=t.variable||"obj";l.source="function("+u+"){\n"+a+"}";return l};v.chain=function(e){var t=v(e);t._chain=true;return t};var q=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){v.each(v.functions(e),function(t){var n=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];u.apply(e,arguments);return q(this,n.apply(v,e))}})};v.mixin(v);v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];v.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);if((e==="shift"||e==="splice")&&n.length===0)delete n[0];return q(this,n)}});v.each(["concat","join","slice"],function(e){var t=s[e];v.prototype[e]=function(){return q(this,t.apply(this._wrapped,arguments))}});v.prototype.value=function(){return this._wrapped};v.prototype.valueOf=v.prototype.toJSON=v.prototype.value;v.prototype.toString=function(){return""+this._wrapped};if(true){!(r=[],i=function(){return v}.apply(t,r),i!==undefined&&(e.exports=i))}}).call(this)},function(e,t,n){var r,i,a,s,o,l,u,c,f,d,h=[].slice;c=n(52);r=Object.getPrototypeOf;i=Object.prototype;f={},a=f.hasOwnProperty,s=f.toString;o=t.DEFAULT_DELEGATE_OPTIONS={getter:"get",setter:"set",deleter:"unset"};l=t.TOMBSTONE={};u=t.DEFAULT_NESTED_OPTIONS=p({ensure:false,tombstone:l},o);d={isMember:function(e,t){var n,r;n=c.unique([].slice.call(arguments,1));r=c.intersection(c.values(e),n);return c.isEqual(n,r)},get:function(e,t,n,r){var i;if(e==null){return}i=(r!=null?r.getter:void 8)||"get";if(typeof e[i]==="function"){return e[i](t,n,r)}else{if(e[t]!==void 8){return e[t]}else{return n}}},set:function(e,t,n,r){var i,a,s;if(e==null){return}if(t!=null&&c.isObject(t)){s=[t,n],i=s[0],r=s[1]}else{i=(s={},s[t+""]=n,s)}a=(r!=null?r.setter:void 8)||"set";if(typeof e[a]==="function"){for(t in i){n=i[t];e[a](t,n,r)}}else{for(t in i){n=i[t];e[t]=n}}return e},unset:function(e,t,n){var r,i;if(e==null){return}r=(n!=null?n.deleter:void 8)||"unset";if(typeof e[r]==="function"){return e[r](t,n)}else{return i=e[t],delete e[t],i}},getNestedMeta:function(e,t,n){var r;if(typeof t==="string"){t=t.split(".")}r=t.length-1;n=p(c.clone(u),n||{});return c.reduce(t,function(e,t,i){var a;if(e==null){return}a=d.get(e,t,void 8,n);if(a===n.tombstone){if(!ops.ensure){return}a=void 8}if(i===r){return{key:t,val:a,obj:e,opts:n}}if(a==null&&n.ensure){a={};d.set(e,t,a,n)}return a},e)},getNested:function(e,t,n,r){var i;i=d.getNestedMeta(e,t,r);if((i!=null?i.val:void 8)===void 8){return n}return i.val},setNested:function(e,t,n,r){var i,a,s;if(!(i=d.getNestedMeta(e,t,r))){return}e=i.obj,a=i.key,s=i.val,r=i.opts;d.set(e,a,n,r);return s},unsetNested:function(e,t,n){var r,i,a;if(!(r=d.getNestedMeta(e,t,n))){return}e=r.obj,i=r.key,a=r.val,n=r.opts;d.unset(e,i,n);return a},isPlainObject:function(e){var t;if(!e||s.call(e)!=="[object Object]"||e.nodeType||e.setInterval){return false}if(e.constructor&&!a.call(e,"constructor")&&!a.call(e.constructor.prototype,"isPrototypeOf")){return false}for(t in e){}return t===void 8||a.call(e,t)},remove:function(e,t){var n,r,i,a,s;n=[].slice.call(arguments,1);if(c.isArray(e)||e instanceof Array){for(a=0,s=n.length;a<s;++a){t=n[a];r=e.indexOf(t);if(r!==-1){e.splice(r,1)}}}else{for(i in e){t=e[i];if(-1!==n.indexOf(t)){delete e[i]}}}return e},items:function(e){if(c.isObject(e)&&!c.isArguments(e)){return c.map(e,function(e,t){return[t,e]})}else{return[].slice.call(e)}},merge:function(e){var t,n,r,i;e==null&&(e={});t=h.call(arguments,1);if(!(typeof e==="object"||c.isFunction(e))){e=c.isArray(t[0])?[]:{}}for(r=0,i=t.length;r<i;++r){n=t[r];if(n==null){continue}c.each(n,a)}return e;function a(t,n){var r,i;r=e[n];if(e===t){return}if(t&&(d.isPlainObject(t)||(i=c.isArray(t)))){if(i){if(!c.isArray(r)){r=[]}}else{if(!(r&&typeof r==="object")){r={}}}return d.set(e,n,d.merge(r,t))}else if(t!==void 8){return d.set(e,n,t)}}}};p(t,d);function p(e,t){var n={}.hasOwnProperty;for(var r in t)if(n.call(t,r))e[r]=t[r];return e}},function(e,t,n){(function(){var n=this;var r=n._;var i={};var a=Array.prototype,s=Object.prototype,o=Function.prototype;var l=a.slice,u=a.unshift,c=s.toString,f=s.hasOwnProperty;var d=a.forEach,h=a.map,p=a.reduce,m=a.reduceRight,g=a.filter,_=a.every,v=a.some,y=a.indexOf,b=a.lastIndexOf,M=Array.isArray,x=Object.keys,w=o.bind;var S=function(e){return new I(e)};if(true){if(typeof e!=="undefined"&&e.exports){t=e.exports=S}t._=S}else{n["_"]=S}S.VERSION="1.3.3";var k=S.each=S.forEach=function(e,t,n){if(e==null)return;if(d&&e.forEach===d){e.forEach(t,n)}else if(e.length===+e.length){for(var r=0,a=e.length;r<a;r++){if(r in e&&t.call(n,e[r],r,e)===i)return}}else{for(var s in e){if(S.has(e,s)){if(t.call(n,e[s],s,e)===i)return}}}};S.map=S.collect=function(e,t,n){var r=[];if(e==null)return r;if(h&&e.map===h)return e.map(t,n);k(e,function(e,i,a){r[r.length]=t.call(n,e,i,a)});if(e.length===+e.length)r.length=e.length;return r};S.reduce=S.foldl=S.inject=function(e,t,n,r){var i=arguments.length>2;if(e==null)e=[];if(p&&e.reduce===p){if(r)t=S.bind(t,r);return i?e.reduce(t,n):e.reduce(t)}k(e,function(e,a,s){if(!i){n=e;i=true}else{n=t.call(r,n,e,a,s)}});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n};S.reduceRight=S.foldr=function(e,t,n,r){var i=arguments.length>2;if(e==null)e=[];if(m&&e.reduceRight===m){if(r)t=S.bind(t,r);return i?e.reduceRight(t,n):e.reduceRight(t)}var a=S.toArray(e).reverse();if(r&&!i)t=S.bind(t,r);return i?S.reduce(a,t,n,r):S.reduce(a,t)};S.find=S.detect=function(e,t,n){var r;L(e,function(e,i,a){if(t.call(n,e,i,a)){r=e;return true}});return r};S.filter=S.select=function(e,t,n){var r=[];if(e==null)return r;if(g&&e.filter===g)return e.filter(t,n);k(e,function(e,i,a){if(t.call(n,e,i,a))r[r.length]=e});return r};S.reject=function(e,t,n){var r=[];if(e==null)return r;k(e,function(e,i,a){if(!t.call(n,e,i,a))r[r.length]=e});return r};S.every=S.all=function(e,t,n){var r=true;if(e==null)return r;if(_&&e.every===_)return e.every(t,n);k(e,function(e,a,s){if(!(r=r&&t.call(n,e,a,s)))return i});return!!r};var L=S.some=S.any=function(e,t,n){t||(t=S.identity);var r=false;if(e==null)return r;if(v&&e.some===v)return e.some(t,n);k(e,function(e,a,s){if(r||(r=t.call(n,e,a,s)))return i});return!!r};S.include=S.contains=function(e,t){var n=false;if(e==null)return n;if(y&&e.indexOf===y)return e.indexOf(t)!=-1;n=L(e,function(e){return e===t});return n};S.invoke=function(e,t){var n=l.call(arguments,2);return S.map(e,function(e){return(S.isFunction(t)?t||e:e[t]).apply(e,n)})};S.pluck=function(e,t){return S.map(e,function(e){return e[t]})};S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-Infinity;var r={computed:-Infinity};k(e,function(e,i,a){var s=t?t.call(n,e,i,a):e;s>=r.computed&&(r={value:e,computed:s})});return r.value};S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return Infinity;var r={computed:Infinity};k(e,function(e,i,a){var s=t?t.call(n,e,i,a):e;s<r.computed&&(r={value:e,computed:s})});return r.value};S.shuffle=function(e){var t=[],n;k(e,function(e,r,i){n=Math.floor(Math.random()*(r+1));t[r]=t[n];t[n]=e});return t};S.sortBy=function(e,t,n){var r=S.isFunction(t)?t:function(e){return e[t]};return S.pluck(S.map(e,function(e,t,i){return{value:e,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n===void 0)return 1;if(r===void 0)return-1;return n<r?-1:n>r?1:0}),"value")};S.groupBy=function(e,t){var n={};var r=S.isFunction(t)?t:function(e){return e[t]};k(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)});return n};S.sortedIndex=function(e,t,n){n||(n=S.identity);var r=0,i=e.length;while(r<i){var a=r+i>>1;n(e[a])<n(t)?r=a+1:i=a}return r};S.toArray=function(e){if(!e)return[];if(S.isArray(e))return l.call(e);if(S.isArguments(e))return l.call(e);if(e.toArray&&S.isFunction(e.toArray))return e.toArray();return S.values(e)};S.size=function(e){return S.isArray(e)?e.length:S.keys(e).length};S.first=S.head=S.take=function(e,t,n){return t!=null&&!n?l.call(e,0,t):e[0]};S.initial=function(e,t,n){return l.call(e,0,e.length-(t==null||n?1:t))};S.last=function(e,t,n){if(t!=null&&!n){return l.call(e,Math.max(e.length-t,0))}else{return e[e.length-1]}};S.rest=S.tail=function(e,t,n){return l.call(e,t==null||n?1:t)};S.compact=function(e){return S.filter(e,function(e){return!!e})};S.flatten=function(e,t){return S.reduce(e,function(e,n){if(S.isArray(n))return e.concat(t?n:S.flatten(n));e[e.length]=n;return e},[])};S.without=function(e){return S.difference(e,l.call(arguments,1))};S.uniq=S.unique=function(e,t,n){var r=n?S.map(e,n):e;var i=[];if(e.length<3)t=true;S.reduce(r,function(n,r,a){if(t?S.last(n)!==r||!n.length:!S.include(n,r)){n.push(r);i.push(e[a])}return n},[]);return i};S.union=function(){return S.uniq(S.flatten(arguments,true))};S.intersection=S.intersect=function(e){var t=l.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})};S.difference=function(e){var t=S.flatten(l.call(arguments,1),true);return S.filter(e,function(e){return!S.include(t,e)})};S.zip=function(){var e=l.call(arguments);var t=S.max(S.pluck(e,"length"));var n=new Array(t);for(var r=0;r<t;r++)n[r]=S.pluck(e,""+r);return n};S.indexOf=function(e,t,n){if(e==null)return-1;var r,i;if(n){r=S.sortedIndex(e,t);return e[r]===t?r:-1}if(y&&e.indexOf===y)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(r in e&&e[r]===t)return r;return-1};S.lastIndexOf=function(e,t){if(e==null)return-1;if(b&&e.lastIndexOf===b)return e.lastIndexOf(t);var n=e.length;while(n--)if(n in e&&e[n]===t)return n;return-1};S.range=function(e,t,n){if(arguments.length<=1){t=e||0;e=0}n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0);var i=0;var a=new Array(r);while(i<r){a[i++]=e;e+=n}return a};var T=function(){};S.bind=function H(e,t){var n,r;if(e.bind===w&&w)return w.apply(e,l.call(arguments,1));if(!S.isFunction(e))throw new TypeError;r=l.call(arguments,2);return n=function(){if(!(this instanceof n))return e.apply(t,r.concat(l.call(arguments)));T.prototype=e.prototype;var i=new T;var a=e.apply(i,r.concat(l.call(arguments)));if(Object(a)===a)return a;return i}};S.bindAll=function(e){var t=l.call(arguments,1);if(t.length==0)t=S.functions(e);k(t,function(t){e[t]=S.bind(e[t],e)});return e};S.memoize=function(e,t){var n={};t||(t=S.identity);return function(){var r=t.apply(this,arguments);return S.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}};S.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)};S.defer=function(e){return S.delay.apply(S,[e,1].concat(l.call(arguments,1)))};S.throttle=function(e,t){var n,r,i,a,s,o;var l=S.debounce(function(){s=a=false},t);return function(){n=this;r=arguments;var u=function(){i=null;if(s)e.apply(n,r);l()};if(!i)i=setTimeout(u,t);if(a){s=true}else{o=e.apply(n,r)}l();a=true;return o}};S.debounce=function(e,t,n){var r;return function(){var i=this,a=arguments;var s=function(){r=null;if(!n)e.apply(i,a)};if(n&&!r)e.apply(i,a);clearTimeout(r);r=setTimeout(s,t)}};S.once=function(e){var t=false,n;return function(){if(t)return n;t=true;return n=e.apply(this,arguments)}};S.wrap=function(e,t){return function(){var n=[e].concat(l.call(arguments,0));return t.apply(this,n)}};S.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--){t=[e[n].apply(this,t)]}return t[0]}};S.after=function(e,t){if(e<=0)return t();return function(){if(--e<1){return t.apply(this,arguments)}}};S.keys=x||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)if(S.has(e,n))t[t.length]=n;return t};S.values=function(e){return S.map(e,S.identity)};S.functions=S.methods=function(e){var t=[];for(var n in e){if(S.isFunction(e[n]))t.push(n)}return t.sort()};S.extend=function(e){k(l.call(arguments,1),function(t){for(var n in t){e[n]=t[n]}});return e};S.pick=function(e){var t={};k(S.flatten(l.call(arguments,1)),function(n){if(n in e)t[n]=e[n]});return t};S.defaults=function(e){k(l.call(arguments,1),function(t){for(var n in t){if(e[n]==null)e[n]=t[n]}});return e};S.clone=function(e){if(!S.isObject(e))return e;return S.isArray(e)?e.slice():S.extend({},e)};S.tap=function(e,t){t(e);return e};function E(e,t,n){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;if(e._chain)e=e._wrapped;if(t._chain)t=t._wrapped;if(e.isEqual&&S.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&S.isFunction(t.isEqual))return t.isEqual(e);var r=c.call(e);if(r!=c.call(t))return false;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return false;var i=n.length;while(i--){if(n[i]==e)return true}n.push(e);var a=0,s=true;if(r=="[object Array]"){a=e.length;s=a==t.length;if(s){while(a--){if(!(s=a in e==a in t&&E(e[a],t[a],n)))break}}}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return false;for(var o in e){if(S.has(e,o)){a++;if(!(s=S.has(t,o)&&E(e[o],t[o],n)))break}}if(s){for(o in t){if(S.has(t,o)&&!a--)break}s=!a}}n.pop();return s}S.isEqual=function(e,t){return E(e,t,[])};S.isEmpty=function(e){if(e==null)return true;if(S.isArray(e)||S.isString(e))return e.length===0;for(var t in e)if(S.has(e,t))return false;return true};S.isElement=function(e){return!!(e&&e.nodeType==1)};S.isArray=M||function(e){return c.call(e)=="[object Array]"};S.isObject=function(e){return e===Object(e)};S.isArguments=function(e){return c.call(e)=="[object Arguments]"};if(!S.isArguments(arguments)){S.isArguments=function(e){return!!(e&&S.has(e,"callee"))}}S.isFunction=function(e){return c.call(e)=="[object Function]"};S.isString=function(e){return c.call(e)=="[object String]"};S.isNumber=function(e){return c.call(e)=="[object Number]"};S.isFinite=function(e){return S.isNumber(e)&&isFinite(e)};S.isNaN=function(e){return e!==e};S.isBoolean=function(e){return e===true||e===false||c.call(e)=="[object Boolean]"};S.isDate=function(e){return c.call(e)=="[object Date]"};S.isRegExp=function(e){return c.call(e)=="[object RegExp]"};S.isNull=function(e){return e===null};S.isUndefined=function(e){return e===void 0};S.has=function(e,t){return f.call(e,t)};S.noConflict=function(){n._=r;return this};S.identity=function(e){return e};S.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)};S.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};S.result=function(e,t){if(e==null)return null;var n=e[t];return S.isFunction(n)?n.call(e):n};S.mixin=function(e){k(S.functions(e),function(t){F(t,S[t]=e[t])})};var D=0;S.uniqueId=function(e){var t=D++;return e?e+t:t};S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/.^/;var Y={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var C in Y)Y[Y[C]]=C;var R=/\\|'|\r|\n|\t|\u2028|\u2029/g;var O=/\\(\\|'|r|n|t|u2028|u2029)/g;var P=function(e){return e.replace(O,function(e,t){return Y[t]})};S.template=function(e,t,n){n=S.defaults(n||{},S.templateSettings);var r="__p+='"+e.replace(R,function(e){return"\\"+Y[e]}).replace(n.escape||A,function(e,t){return"'+\n_.escape("+P(t)+")+\n'"}).replace(n.interpolate||A,function(e,t){return"'+\n("+P(t)+")+\n'"}).replace(n.evaluate||A,function(e,t){return"';\n"+P(t)+"\n;__p+='"})+"';\n";if(!n.variable)r="with(obj||{}){\n"+r+"}\n";r="var __p='';"+"var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+r+"return __p;\n";var i=new Function(n.variable||"obj","_",r);if(t)return i(t,S);var a=function(e){return i.call(this,e,S)};a.source="function("+(n.variable||"obj")+"){\n"+r+"}";return a};S.chain=function(e){return S(e).chain()};var I=function(e){this._wrapped=e};S.prototype=I.prototype;var N=function(e,t){return t?S(e).chain():e};var F=function(e,t){I.prototype[e]=function(){var e=l.call(arguments);u.call(e,this._wrapped);return N(t.apply(S,e),this._chain)}};S.mixin(S);k(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];I.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;if((e=="shift"||e=="splice")&&r===0)delete n[0];return N(n,this._chain)}});k(["concat","join","slice"],function(e){var t=a[e];I.prototype[e]=function(){return N(t.apply(this._wrapped,arguments),this._chain)}});I.prototype.chain=function(){this._chain=true;return this};I.prototype.value=function(){return this._wrapped}}).call(this)},function(e,t,n){n(54)(n(55))},function(e,t){e.exports=function(e){if(typeof execScript!=="undefined")execScript(e);else eval.call(null,e)}},function(e,t){e.exports="/* big.js v3.1.3 https://github.com/MikeMcl/big.js/LICENCE */\n;(function (global) {\n    'use strict';\n\n/*\n  big.js v3.1.3\n  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\n  https://github.com/MikeMcl/big.js/\n  Copyright (c) 2014 Michael Mclaughlin <M8ch88l@gmail.com>\n  MIT Expat Licence\n*/\n\n/***************************** EDITABLE DEFAULTS ******************************/\n\n    // The default values below must be integers within the stated ranges.\n\n    /*\n     * The maximum number of decimal places of the results of operations\n     * involving division: div and sqrt, and pow with negative exponents.\n     */\n    var DP = 20,                           // 0 to MAX_DP\n\n        /*\n         * The rounding mode used when rounding to the above decimal places.\n         *\n         * 0 Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\n         * 1 To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\n         * 2 To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\n         * 3 Away from zero.                                  (ROUND_UP)\n         */\n        RM = 1,                            // 0, 1, 2 or 3\n\n        // The maximum value of DP and Big.DP.\n        MAX_DP = 1E6,                      // 0 to 1000000\n\n        // The maximum magnitude of the exponent argument to the pow method.\n        MAX_POWER = 1E6,                   // 1 to 1000000\n\n        /*\n         * The exponent value at and beneath which toString returns exponential\n         * notation.\n         * JavaScript's Number type: -7\n         * -1000000 is the minimum recommended exponent value of a Big.\n         */\n        E_NEG = -7,                   // 0 to -1000000\n\n        /*\n         * The exponent value at and above which toString returns exponential\n         * notation.\n         * JavaScript's Number type: 21\n         * 1000000 is the maximum recommended exponent value of a Big.\n         * (This limit is not enforced or checked.)\n         */\n        E_POS = 21,                   // 0 to 1000000\n\n/******************************************************************************/\n\n        // The shared prototype object.\n        P = {},\n        isValid = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i,\n        Big;\n\n\n    /*\n     * Create and return a Big constructor.\n     *\n     */\n    function bigFactory() {\n\n        /*\n         * The Big constructor and exported function.\n         * Create and return a new instance of a Big number object.\n         *\n         * n {number|string|Big} A numeric value.\n         */\n        function Big(n) {\n            var x = this;\n\n            // Enable constructor usage without new.\n            if (!(x instanceof Big)) {\n                return n === void 0 ? bigFactory() : new Big(n);\n            }\n\n            // Duplicate.\n            if (n instanceof Big) {\n                x.s = n.s;\n                x.e = n.e;\n                x.c = n.c.slice();\n            } else {\n                parse(x, n);\n            }\n\n            /*\n             * Retain a reference to this Big constructor, and shadow\n             * Big.prototype.constructor which points to Object.\n             */\n            x.constructor = Big;\n        }\n\n        Big.prototype = P;\n        Big.DP = DP;\n        Big.RM = RM;\n        Big.E_NEG = E_NEG;\n        Big.E_POS = E_POS;\n\n        return Big;\n    }\n\n\n    // Private functions\n\n\n    /*\n     * Return a string representing the value of Big x in normal or exponential\n     * notation to dp fixed decimal places or significant digits.\n     *\n     * x {Big} The Big to format.\n     * dp {number} Integer, 0 to MAX_DP inclusive.\n     * toE {number} 1 (toExponential), 2 (toPrecision) or undefined (toFixed).\n     */\n    function format(x, dp, toE) {\n        var Big = x.constructor,\n\n            // The index (normal notation) of the digit that may be rounded up.\n            i = dp - (x = new Big(x)).e,\n            c = x.c;\n\n        // Round?\n        if (c.length > ++dp) {\n            rnd(x, i, Big.RM);\n        }\n\n        if (!c[0]) {\n            ++i;\n        } else if (toE) {\n            i = dp;\n\n        // toFixed\n        } else {\n            c = x.c;\n\n            // Recalculate i as x.e may have changed if value rounded up.\n            i = x.e + i + 1;\n        }\n\n        // Append zeros?\n        for (; c.length < i; c.push(0)) {\n        }\n        i = x.e;\n\n        /*\n         * toPrecision returns exponential notation if the number of\n         * significant digits specified is less than the number of digits\n         * necessary to represent the integer part of the value in normal\n         * notation.\n         */\n        return toE === 1 || toE && (dp <= i || i <= Big.E_NEG) ?\n\n          // Exponential notation.\n          (x.s < 0 && c[0] ? '-' : '') +\n            (c.length > 1 ? c[0] + '.' + c.join('').slice(1) : c[0]) +\n              (i < 0 ? 'e' : 'e+') + i\n\n          // Normal notation.\n          : x.toString();\n    }\n\n\n    /*\n     * Parse the number or string value passed to a Big constructor.\n     *\n     * x {Big} A Big number instance.\n     * n {number|string} A numeric value.\n     */\n    function parse(x, n) {\n        var e, i, nL;\n\n        // Minus zero?\n        if (n === 0 && 1 / n < 0) {\n            n = '-0';\n\n        // Ensure n is string and check validity.\n        } else if (!isValid.test(n += '')) {\n            throwErr(NaN);\n        }\n\n        // Determine sign.\n        x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\n\n        // Decimal point?\n        if ((e = n.indexOf('.')) > -1) {\n            n = n.replace('.', '');\n        }\n\n        // Exponential form?\n        if ((i = n.search(/e/i)) > 0) {\n\n            // Determine exponent.\n            if (e < 0) {\n                e = i;\n            }\n            e += +n.slice(i + 1);\n            n = n.substring(0, i);\n\n        } else if (e < 0) {\n\n            // Integer.\n            e = n.length;\n        }\n\n        // Determine leading zeros.\n        for (i = 0; n.charAt(i) == '0'; i++) {\n        }\n\n        if (i == (nL = n.length)) {\n\n            // Zero.\n            x.c = [ x.e = 0 ];\n        } else {\n\n            // Determine trailing zeros.\n            for (; n.charAt(--nL) == '0';) {\n            }\n\n            x.e = e - i - 1;\n            x.c = [];\n\n            // Convert string to array of digits without leading/trailing zeros.\n            for (e = 0; i <= nL; x.c[e++] = +n.charAt(i++)) {\n            }\n        }\n\n        return x;\n    }\n\n\n    /*\n     * Round Big x to a maximum of dp decimal places using rounding mode rm.\n     * Called by div, sqrt and round.\n     *\n     * x {Big} The Big to round.\n     * dp {number} Integer, 0 to MAX_DP inclusive.\n     * rm {number} 0, 1, 2 or 3 (DOWN, HALF_UP, HALF_EVEN, UP)\n     * [more] {boolean} Whether the result of division was truncated.\n     */\n    function rnd(x, dp, rm, more) {\n        var u,\n            xc = x.c,\n            i = x.e + dp + 1;\n\n        if (rm === 1) {\n\n            // xc[i] is the digit after the digit that may be rounded up.\n            more = xc[i] >= 5;\n        } else if (rm === 2) {\n            more = xc[i] > 5 || xc[i] == 5 &&\n              (more || i < 0 || xc[i + 1] !== u || xc[i - 1] & 1);\n        } else if (rm === 3) {\n            more = more || xc[i] !== u || i < 0;\n        } else {\n            more = false;\n\n            if (rm !== 0) {\n                throwErr('!Big.RM!');\n            }\n        }\n\n        if (i < 1 || !xc[0]) {\n\n            if (more) {\n\n                // 1, 0.1, 0.01, 0.001, 0.0001 etc.\n                x.e = -dp;\n                x.c = [1];\n            } else {\n\n                // Zero.\n                x.c = [x.e = 0];\n            }\n        } else {\n\n            // Remove any digits after the required decimal places.\n            xc.length = i--;\n\n            // Round up?\n            if (more) {\n\n                // Rounding up may mean the previous digit has to be rounded up.\n                for (; ++xc[i] > 9;) {\n                    xc[i] = 0;\n\n                    if (!i--) {\n                        ++x.e;\n                        xc.unshift(1);\n                    }\n                }\n            }\n\n            // Remove trailing zeros.\n            for (i = xc.length; !xc[--i]; xc.pop()) {\n            }\n        }\n\n        return x;\n    }\n\n\n    /*\n     * Throw a BigError.\n     *\n     * message {string} The error message.\n     */\n    function throwErr(message) {\n        var err = new Error(message);\n        err.name = 'BigError';\n\n        throw err;\n    }\n\n\n    // Prototype/instance methods\n\n\n    /*\n     * Return a new Big whose value is the absolute value of this Big.\n     */\n    P.abs = function () {\n        var x = new this.constructor(this);\n        x.s = 1;\n\n        return x;\n    };\n\n\n    /*\n     * Return\n     * 1 if the value of this Big is greater than the value of Big y,\n     * -1 if the value of this Big is less than the value of Big y, or\n     * 0 if they have the same value.\n    */\n    P.cmp = function (y) {\n        var xNeg,\n            x = this,\n            xc = x.c,\n            yc = (y = new x.constructor(y)).c,\n            i = x.s,\n            j = y.s,\n            k = x.e,\n            l = y.e;\n\n        // Either zero?\n        if (!xc[0] || !yc[0]) {\n            return !xc[0] ? !yc[0] ? 0 : -j : i;\n        }\n\n        // Signs differ?\n        if (i != j) {\n            return i;\n        }\n        xNeg = i < 0;\n\n        // Compare exponents.\n        if (k != l) {\n            return k > l ^ xNeg ? 1 : -1;\n        }\n\n        i = -1;\n        j = (k = xc.length) < (l = yc.length) ? k : l;\n\n        // Compare digit by digit.\n        for (; ++i < j;) {\n\n            if (xc[i] != yc[i]) {\n                return xc[i] > yc[i] ^ xNeg ? 1 : -1;\n            }\n        }\n\n        // Compare lengths.\n        return k == l ? 0 : k > l ^ xNeg ? 1 : -1;\n    };\n\n\n    /*\n     * Return a new Big whose value is the value of this Big divided by the\n     * value of Big y, rounded, if necessary, to a maximum of Big.DP decimal\n     * places using rounding mode Big.RM.\n     */\n    P.div = function (y) {\n        var x = this,\n            Big = x.constructor,\n            // dividend\n            dvd = x.c,\n            //divisor\n            dvs = (y = new Big(y)).c,\n            s = x.s == y.s ? 1 : -1,\n            dp = Big.DP;\n\n        if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n            throwErr('!Big.DP!');\n        }\n\n        // Either 0?\n        if (!dvd[0] || !dvs[0]) {\n\n            // If both are 0, throw NaN\n            if (dvd[0] == dvs[0]) {\n                throwErr(NaN);\n            }\n\n            // If dvs is 0, throw +-Infinity.\n            if (!dvs[0]) {\n                throwErr(s / 0);\n            }\n\n            // dvd is 0, return +-0.\n            return new Big(s * 0);\n        }\n\n        var dvsL, dvsT, next, cmp, remI, u,\n            dvsZ = dvs.slice(),\n            dvdI = dvsL = dvs.length,\n            dvdL = dvd.length,\n            // remainder\n            rem = dvd.slice(0, dvsL),\n            remL = rem.length,\n            // quotient\n            q = y,\n            qc = q.c = [],\n            qi = 0,\n            digits = dp + (q.e = x.e - y.e) + 1;\n\n        q.s = s;\n        s = digits < 0 ? 0 : digits;\n\n        // Create version of divisor with leading zero.\n        dvsZ.unshift(0);\n\n        // Add zeros to make remainder as long as divisor.\n        for (; remL++ < dvsL; rem.push(0)) {\n        }\n\n        do {\n\n            // 'next' is how many times the divisor goes into current remainder.\n            for (next = 0; next < 10; next++) {\n\n                // Compare divisor and remainder.\n                if (dvsL != (remL = rem.length)) {\n                    cmp = dvsL > remL ? 1 : -1;\n                } else {\n\n                    for (remI = -1, cmp = 0; ++remI < dvsL;) {\n\n                        if (dvs[remI] != rem[remI]) {\n                            cmp = dvs[remI] > rem[remI] ? 1 : -1;\n                            break;\n                        }\n                    }\n                }\n\n                // If divisor < remainder, subtract divisor from remainder.\n                if (cmp < 0) {\n\n                    // Remainder can't be more than 1 digit longer than divisor.\n                    // Equalise lengths using divisor with extra leading zero?\n                    for (dvsT = remL == dvsL ? dvs : dvsZ; remL;) {\n\n                        if (rem[--remL] < dvsT[remL]) {\n                            remI = remL;\n\n                            for (; remI && !rem[--remI]; rem[remI] = 9) {\n                            }\n                            --rem[remI];\n                            rem[remL] += 10;\n                        }\n                        rem[remL] -= dvsT[remL];\n                    }\n                    for (; !rem[0]; rem.shift()) {\n                    }\n                } else {\n                    break;\n                }\n            }\n\n            // Add the 'next' digit to the result array.\n            qc[qi++] = cmp ? next : ++next;\n\n            // Update the remainder.\n            if (rem[0] && cmp) {\n                rem[remL] = dvd[dvdI] || 0;\n            } else {\n                rem = [ dvd[dvdI] ];\n            }\n\n        } while ((dvdI++ < dvdL || rem[0] !== u) && s--);\n\n        // Leading zero? Do not remove if result is simply zero (qi == 1).\n        if (!qc[0] && qi != 1) {\n\n            // There can't be more than one zero.\n            qc.shift();\n            q.e--;\n        }\n\n        // Round?\n        if (qi > digits) {\n            rnd(q, dp, Big.RM, rem[0] !== u);\n        }\n\n        return q;\n    };\n\n\n    /*\n     * Return true if the value of this Big is equal to the value of Big y,\n     * otherwise returns false.\n     */\n    P.eq = function (y) {\n        return !this.cmp(y);\n    };\n\n\n    /*\n     * Return true if the value of this Big is greater than the value of Big y,\n     * otherwise returns false.\n     */\n    P.gt = function (y) {\n        return this.cmp(y) > 0;\n    };\n\n\n    /*\n     * Return true if the value of this Big is greater than or equal to the\n     * value of Big y, otherwise returns false.\n     */\n    P.gte = function (y) {\n        return this.cmp(y) > -1;\n    };\n\n\n    /*\n     * Return true if the value of this Big is less than the value of Big y,\n     * otherwise returns false.\n     */\n    P.lt = function (y) {\n        return this.cmp(y) < 0;\n    };\n\n\n    /*\n     * Return true if the value of this Big is less than or equal to the value\n     * of Big y, otherwise returns false.\n     */\n    P.lte = function (y) {\n         return this.cmp(y) < 1;\n    };\n\n\n    /*\n     * Return a new Big whose value is the value of this Big minus the value\n     * of Big y.\n     */\n    P.sub = P.minus = function (y) {\n        var i, j, t, xLTy,\n            x = this,\n            Big = x.constructor,\n            a = x.s,\n            b = (y = new Big(y)).s;\n\n        // Signs differ?\n        if (a != b) {\n            y.s = -b;\n            return x.plus(y);\n        }\n\n        var xc = x.c.slice(),\n            xe = x.e,\n            yc = y.c,\n            ye = y.e;\n\n        // Either zero?\n        if (!xc[0] || !yc[0]) {\n\n            // y is non-zero? x is non-zero? Or both are zero.\n            return yc[0] ? (y.s = -b, y) : new Big(xc[0] ? x : 0);\n        }\n\n        // Determine which is the bigger number.\n        // Prepend zeros to equalise exponents.\n        if (a = xe - ye) {\n\n            if (xLTy = a < 0) {\n                a = -a;\n                t = xc;\n            } else {\n                ye = xe;\n                t = yc;\n            }\n\n            t.reverse();\n            for (b = a; b--; t.push(0)) {\n            }\n            t.reverse();\n        } else {\n\n            // Exponents equal. Check digit by digit.\n            j = ((xLTy = xc.length < yc.length) ? xc : yc).length;\n\n            for (a = b = 0; b < j; b++) {\n\n                if (xc[b] != yc[b]) {\n                    xLTy = xc[b] < yc[b];\n                    break;\n                }\n            }\n        }\n\n        // x < y? Point xc to the array of the bigger number.\n        if (xLTy) {\n            t = xc;\n            xc = yc;\n            yc = t;\n            y.s = -y.s;\n        }\n\n        /*\n         * Append zeros to xc if shorter. No need to add zeros to yc if shorter\n         * as subtraction only needs to start at yc.length.\n         */\n        if (( b = (j = yc.length) - (i = xc.length) ) > 0) {\n\n            for (; b--; xc[i++] = 0) {\n            }\n        }\n\n        // Subtract yc from xc.\n        for (b = i; j > a;){\n\n            if (xc[--j] < yc[j]) {\n\n                for (i = j; i && !xc[--i]; xc[i] = 9) {\n                }\n                --xc[i];\n                xc[j] += 10;\n            }\n            xc[j] -= yc[j];\n        }\n\n        // Remove trailing zeros.\n        for (; xc[--b] === 0; xc.pop()) {\n        }\n\n        // Remove leading zeros and adjust exponent accordingly.\n        for (; xc[0] === 0;) {\n            xc.shift();\n            --ye;\n        }\n\n        if (!xc[0]) {\n\n            // n - n = +0\n            y.s = 1;\n\n            // Result must be zero.\n            xc = [ye = 0];\n        }\n\n        y.c = xc;\n        y.e = ye;\n\n        return y;\n    };\n\n\n    /*\n     * Return a new Big whose value is the value of this Big modulo the\n     * value of Big y.\n     */\n    P.mod = function (y) {\n        var yGTx,\n            x = this,\n            Big = x.constructor,\n            a = x.s,\n            b = (y = new Big(y)).s;\n\n        if (!y.c[0]) {\n            throwErr(NaN);\n        }\n\n        x.s = y.s = 1;\n        yGTx = y.cmp(x) == 1;\n        x.s = a;\n        y.s = b;\n\n        if (yGTx) {\n            return new Big(x);\n        }\n\n        a = Big.DP;\n        b = Big.RM;\n        Big.DP = Big.RM = 0;\n        x = x.div(y);\n        Big.DP = a;\n        Big.RM = b;\n\n        return this.minus( x.times(y) );\n    };\n\n\n    /*\n     * Return a new Big whose value is the value of this Big plus the value\n     * of Big y.\n     */\n    P.add = P.plus = function (y) {\n        var t,\n            x = this,\n            Big = x.constructor,\n            a = x.s,\n            b = (y = new Big(y)).s;\n\n        // Signs differ?\n        if (a != b) {\n            y.s = -b;\n            return x.minus(y);\n        }\n\n        var xe = x.e,\n            xc = x.c,\n            ye = y.e,\n            yc = y.c;\n\n        // Either zero?\n        if (!xc[0] || !yc[0]) {\n\n            // y is non-zero? x is non-zero? Or both are zero.\n            return yc[0] ? y : new Big(xc[0] ? x : a * 0);\n        }\n        xc = xc.slice();\n\n        // Prepend zeros to equalise exponents.\n        // Note: Faster to use reverse then do unshifts.\n        if (a = xe - ye) {\n\n            if (a > 0) {\n                ye = xe;\n                t = yc;\n            } else {\n                a = -a;\n                t = xc;\n            }\n\n            t.reverse();\n            for (; a--; t.push(0)) {\n            }\n            t.reverse();\n        }\n\n        // Point xc to the longer array.\n        if (xc.length - yc.length < 0) {\n            t = yc;\n            yc = xc;\n            xc = t;\n        }\n        a = yc.length;\n\n        /*\n         * Only start adding at yc.length - 1 as the further digits of xc can be\n         * left as they are.\n         */\n        for (b = 0; a;) {\n            b = (xc[--a] = xc[a] + yc[a] + b) / 10 | 0;\n            xc[a] %= 10;\n        }\n\n        // No need to check for zero, as +x + +y != 0 && -x + -y != 0\n\n        if (b) {\n            xc.unshift(b);\n            ++ye;\n        }\n\n         // Remove trailing zeros.\n        for (a = xc.length; xc[--a] === 0; xc.pop()) {\n        }\n\n        y.c = xc;\n        y.e = ye;\n\n        return y;\n    };\n\n\n    /*\n     * Return a Big whose value is the value of this Big raised to the power n.\n     * If n is negative, round, if necessary, to a maximum of Big.DP decimal\n     * places using rounding mode Big.RM.\n     *\n     * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\n     */\n    P.pow = function (n) {\n        var x = this,\n            one = new x.constructor(1),\n            y = one,\n            isNeg = n < 0;\n\n        if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\n            throwErr('!pow!');\n        }\n\n        n = isNeg ? -n : n;\n\n        for (;;) {\n\n            if (n & 1) {\n                y = y.times(x);\n            }\n            n >>= 1;\n\n            if (!n) {\n                break;\n            }\n            x = x.times(x);\n        }\n\n        return isNeg ? one.div(y) : y;\n    };\n\n\n    /*\n     * Return a new Big whose value is the value of this Big rounded to a\n     * maximum of dp decimal places using rounding mode rm.\n     * If dp is not specified, round to 0 decimal places.\n     * If rm is not specified, use Big.RM.\n     *\n     * [dp] {number} Integer, 0 to MAX_DP inclusive.\n     * [rm] 0, 1, 2 or 3 (ROUND_DOWN, ROUND_HALF_UP, ROUND_HALF_EVEN, ROUND_UP)\n     */\n    P.round = function (dp, rm) {\n        var x = this,\n            Big = x.constructor;\n\n        if (dp == null) {\n            dp = 0;\n        } else if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n            throwErr('!round!');\n        }\n        rnd(x = new Big(x), dp, rm == null ? Big.RM : rm);\n\n        return x;\n    };\n\n\n    /*\n     * Return a new Big whose value is the square root of the value of this Big,\n     * rounded, if necessary, to a maximum of Big.DP decimal places using\n     * rounding mode Big.RM.\n     */\n    P.sqrt = function () {\n        var estimate, r, approx,\n            x = this,\n            Big = x.constructor,\n            xc = x.c,\n            i = x.s,\n            e = x.e,\n            half = new Big('0.5');\n\n        // Zero?\n        if (!xc[0]) {\n            return new Big(x);\n        }\n\n        // If negative, throw NaN.\n        if (i < 0) {\n            throwErr(NaN);\n        }\n\n        // Estimate.\n        i = Math.sqrt(x.toString());\n\n        // Math.sqrt underflow/overflow?\n        // Pass x to Math.sqrt as integer, then adjust the result exponent.\n        if (i === 0 || i === 1 / 0) {\n            estimate = xc.join('');\n\n            if (!(estimate.length + e & 1)) {\n                estimate += '0';\n            }\n\n            r = new Big( Math.sqrt(estimate).toString() );\n            r.e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\n        } else {\n            r = new Big(i.toString());\n        }\n\n        i = r.e + (Big.DP += 4);\n\n        // Newton-Raphson iteration.\n        do {\n            approx = r;\n            r = half.times( approx.plus( x.div(approx) ) );\n        } while ( approx.c.slice(0, i).join('') !==\n                       r.c.slice(0, i).join('') );\n\n        rnd(r, Big.DP -= 4, Big.RM);\n\n        return r;\n    };\n\n\n    /*\n     * Return a new Big whose value is the value of this Big times the value of\n     * Big y.\n     */\n    P.mul = P.times = function (y) {\n        var c,\n            x = this,\n            Big = x.constructor,\n            xc = x.c,\n            yc = (y = new Big(y)).c,\n            a = xc.length,\n            b = yc.length,\n            i = x.e,\n            j = y.e;\n\n        // Determine sign of result.\n        y.s = x.s == y.s ? 1 : -1;\n\n        // Return signed 0 if either 0.\n        if (!xc[0] || !yc[0]) {\n            return new Big(y.s * 0);\n        }\n\n        // Initialise exponent of result as x.e + y.e.\n        y.e = i + j;\n\n        // If array xc has fewer digits than yc, swap xc and yc, and lengths.\n        if (a < b) {\n            c = xc;\n            xc = yc;\n            yc = c;\n            j = a;\n            a = b;\n            b = j;\n        }\n\n        // Initialise coefficient array of result with zeros.\n        for (c = new Array(j = a + b); j--; c[j] = 0) {\n        }\n\n        // Multiply.\n\n        // i is initially xc.length.\n        for (i = b; i--;) {\n            b = 0;\n\n            // a is yc.length.\n            for (j = a + i; j > i;) {\n\n                // Current sum of products at this digit position, plus carry.\n                b = c[j] + yc[i] * xc[j - i - 1] + b;\n                c[j--] = b % 10;\n\n                // carry\n                b = b / 10 | 0;\n            }\n            c[j] = (c[j] + b) % 10;\n        }\n\n        // Increment result exponent if there is a final carry.\n        if (b) {\n            ++y.e;\n        }\n\n        // Remove any leading zero.\n        if (!c[0]) {\n            c.shift();\n        }\n\n        // Remove trailing zeros.\n        for (i = c.length; !c[--i]; c.pop()) {\n        }\n        y.c = c;\n\n        return y;\n    };\n\n\n    /*\n     * Return a string representing the value of this Big.\n     * Return exponential notation if this Big has a positive exponent equal to\n     * or greater than Big.E_POS, or a negative exponent equal to or less than\n     * Big.E_NEG.\n     */\n    P.toString = P.valueOf = P.toJSON = function () {\n        var x = this,\n            Big = x.constructor,\n            e = x.e,\n            str = x.c.join(''),\n            strL = str.length;\n\n        // Exponential notation?\n        if (e <= Big.E_NEG || e >= Big.E_POS) {\n            str = str.charAt(0) + (strL > 1 ? '.' + str.slice(1) : '') +\n              (e < 0 ? 'e' : 'e+') + e;\n\n        // Negative exponent?\n        } else if (e < 0) {\n\n            // Prepend zeros.\n            for (; ++e; str = '0' + str) {\n            }\n            str = '0.' + str;\n\n        // Positive exponent?\n        } else if (e > 0) {\n\n            if (++e > strL) {\n\n                // Append zeros.\n                for (e -= strL; e-- ; str += '0') {\n                }\n            } else if (e < strL) {\n                str = str.slice(0, e) + '.' + str.slice(e);\n            }\n\n        // Exponent zero.\n        } else if (strL > 1) {\n            str = str.charAt(0) + '.' + str.slice(1);\n        }\n\n        // Avoid '-0'\n        return x.s < 0 && x.c[0] ? '-' + str : str;\n    };\n\n\n    /*\n     ***************************************************************************\n     * If toExponential, toFixed, toPrecision and format are not required they\n     * can safely be commented-out or deleted. No redundant code will be left.\n     * format is used only by toExponential, toFixed and toPrecision.\n     ***************************************************************************\n     */\n\n\n    /*\n     * Return a string representing the value of this Big in exponential\n     * notation to dp fixed decimal places and rounded, if necessary, using\n     * Big.RM.\n     *\n     * [dp] {number} Integer, 0 to MAX_DP inclusive.\n     */\n    P.toExponential = function (dp) {\n\n        if (dp == null) {\n            dp = this.c.length - 1;\n        } else if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n            throwErr('!toExp!');\n        }\n\n        return format(this, dp, 1);\n    };\n\n\n    /*\n     * Return a string representing the value of this Big in normal notation\n     * to dp fixed decimal places and rounded, if necessary, using Big.RM.\n     *\n     * [dp] {number} Integer, 0 to MAX_DP inclusive.\n     */\n    P.toFixed = function (dp) {\n        var str,\n            x = this,\n            Big = x.constructor,\n            neg = Big.E_NEG,\n            pos = Big.E_POS;\n\n        // Prevent the possibility of exponential notation.\n        Big.E_NEG = -(Big.E_POS = 1 / 0);\n\n        if (dp == null) {\n            str = x.toString();\n        } else if (dp === ~~dp && dp >= 0 && dp <= MAX_DP) {\n            str = format(x, x.e + dp);\n\n            // (-0).toFixed() is '0', but (-0.1).toFixed() is '-0'.\n            // (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\n            if (x.s < 0 && x.c[0] && str.indexOf('-') < 0) {\n        //E.g. -0.5 if rounded to -0 will cause toString to omit the minus sign.\n                str = '-' + str;\n            }\n        }\n        Big.E_NEG = neg;\n        Big.E_POS = pos;\n\n        if (!str) {\n            throwErr('!toFix!');\n        }\n\n        return str;\n    };\n\n\n    /*\n     * Return a string representing the value of this Big rounded to sd\n     * significant digits using Big.RM. Use exponential notation if sd is less\n     * than the number of digits necessary to represent the integer part of the\n     * value in normal notation.\n     *\n     * sd {number} Integer, 1 to MAX_DP inclusive.\n     */\n    P.toPrecision = function (sd) {\n\n        if (sd == null) {\n            return this.toString();\n        } else if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n            throwErr('!toPre!');\n        }\n\n        return format(this, sd - 1, 2);\n    };\n\n\n    // Export\n\n\n    Big = bigFactory();\n\n    //AMD.\n    if (typeof define === 'function' && define.amd) {\n        define(function () {\n            return Big;\n        });\n\n    // Node and other CommonJS-like environments that support module.exports.\n    } else if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Big;\n\n    //Browser.\n    } else {\n        global.Big = Big;\n    }\n})(this);\n";

},function(e,t,n){(function(e){(function(t,n){true?e.exports=n():typeof define==="function"&&define.amd?define(n):t.moment=n()})(this,function(){"use strict";var t;function r(){return t.apply(null,arguments)}function i(e){t=e}function a(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function s(e){return Object.prototype.toString.call(e)==="[object Object]"}function o(e){var t;for(t in e){return false}return true}function l(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function u(e,t){var n=[],r;for(r=0;r<e.length;++r){n.push(t(e[r],r))}return n}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e,t){for(var n in t){if(c(t,n)){e[n]=t[n]}}if(c(t,"toString")){e.toString=t.toString}if(c(t,"valueOf")){e.valueOf=t.valueOf}return e}function d(e,t,n,r){return In(e,t,n,r,true).utc()}function h(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null}}function p(e){if(e._pf==null){e._pf=h()}return e._pf}var m;if(Array.prototype.some){m=Array.prototype.some}else{m=function(e){var t=Object(this);var n=t.length>>>0;for(var r=0;r<n;r++){if(r in t&&e.call(this,t[r],r,t)){return true}}return false}}function g(e){if(e._isValid==null){var t=p(e);var n=m.call(t.parsedDateParts,function(e){return e!=null});e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict){e._isValid=e._isValid&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}}return e._isValid}function _(e){var t=d(NaN);if(e!=null){f(p(t),e)}else{p(t).userInvalidated=true}return t}function v(e){return e===void 0}var y=r.momentProperties=[];function b(e,t){var n,r,i;if(!v(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!v(t._i)){e._i=t._i}if(!v(t._f)){e._f=t._f}if(!v(t._l)){e._l=t._l}if(!v(t._strict)){e._strict=t._strict}if(!v(t._tzm)){e._tzm=t._tzm}if(!v(t._isUTC)){e._isUTC=t._isUTC}if(!v(t._offset)){e._offset=t._offset}if(!v(t._pf)){e._pf=p(t)}if(!v(t._locale)){e._locale=t._locale}if(y.length>0){for(n in y){r=y[n];i=t[r];if(!v(i)){e[r]=i}}}return e}var M=false;function x(e){b(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(M===false){M=true;r.updateOffset(this);M=false}}function w(e){return e instanceof x||e!=null&&e._isAMomentObject!=null}function S(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}function k(e){var t=+e,n=0;if(t!==0&&isFinite(t)){n=S(t)}return n}function L(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),a=0,s;for(s=0;s<r;s++){if(n&&e[s]!==t[s]||!n&&k(e[s])!==k(t[s])){a++}}return a+i}function T(e){if(r.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function E(e,t){var n=true;return f(function(){if(r.deprecationHandler!=null){r.deprecationHandler(null,e)}if(n){T(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack);n=false}return t.apply(this,arguments)},t)}var D={};function A(e,t){if(r.deprecationHandler!=null){r.deprecationHandler(e,t)}if(!D[e]){T(t);D[e]=true}}r.suppressDeprecationWarnings=false;r.deprecationHandler=null;function Y(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function C(e){var t,n;for(n in e){t=e[n];if(Y(t)){this[n]=t}else{this["_"+n]=t}}this._config=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function R(e,t){var n=f({},e),r;for(r in t){if(c(t,r)){if(s(e[r])&&s(t[r])){n[r]={};f(n[r],e[r]);f(n[r],t[r])}else if(t[r]!=null){n[r]=t[r]}else{delete n[r]}}}for(r in e){if(c(e,r)&&!c(t,r)&&s(e[r])){n[r]=f({},n[r])}}return n}function O(e){if(e!=null){this.set(e)}}var P;if(Object.keys){P=Object.keys}else{P=function(e){var t,n=[];for(t in e){if(c(e,t)){n.push(t)}}return n}}var I={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function N(e,t,n){var r=this._calendar[e]||this._calendar["sameElse"];return Y(r)?r.call(t,n):r}var F={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function H(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];if(t||!n){return t}this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});return this._longDateFormat[e]}var j="Invalid date";function U(){return this._invalidDate}var B="%d";var z=/\d{1,2}/;function W(e){return this._ordinal.replace("%d",e)}var q={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function G(e,t,n,r){var i=this._relativeTime[n];return Y(i)?i(e,t,n,r):i.replace(/%d/i,e)}function V(e,t){var n=this._relativeTime[e>0?"future":"past"];return Y(n)?n(t):n.replace(/%s/i,t)}var $={};function J(e,t){var n=e.toLowerCase();$[n]=$[n+"s"]=$[t]=e}function X(e){return typeof e==="string"?$[e]||$[e.toLowerCase()]:undefined}function Z(e){var t={},n,r;for(r in e){if(c(e,r)){n=X(r);if(n){t[n]=e[r]}}}return t}var K={};function Q(e,t){K[e]=t}function ee(e){var t=[];for(var n in e){t.push({unit:n,priority:K[n]})}t.sort(function(e,t){return e.priority-t.priority});return t}function te(e,t){return function(n){if(n!=null){re(this,e,n);r.updateOffset(this,t);return this}else{return ne(this,e)}}}function ne(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function re(e,t,n){if(e.isValid()){e._d["set"+(e._isUTC?"UTC":"")+t](n)}}function ie(e){e=X(e);if(Y(this[e])){return this[e]()}return this}function ae(e,t){if(typeof e==="object"){e=Z(e);var n=ee(e);for(var r=0;r<n.length;r++){this[n[r].unit](e[n[r].unit])}}else{e=X(e);if(Y(this[e])){return this[e](t)}}return this}function se(e,t,n){var r=""+Math.abs(e),i=t-r.length,a=e>=0;return(a?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var oe=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var le=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var ue={};var ce={};function fe(e,t,n,r){var i=r;if(typeof r==="string"){i=function(){return this[r]()}}if(e){ce[e]=i}if(t){ce[t[0]]=function(){return se(i.apply(this,arguments),t[1],t[2])}}if(n){ce[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)}}}function de(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function he(e){var t=e.match(oe),n,r;for(n=0,r=t.length;n<r;n++){if(ce[t[n]]){t[n]=ce[t[n]]}else{t[n]=de(t[n])}}return function(n){var i="",a;for(a=0;a<r;a++){i+=t[a]instanceof Function?t[a].call(n,e):t[a]}return i}}function pe(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=me(t,e.localeData());ue[t]=ue[t]||he(t);return ue[t](e)}function me(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}le.lastIndex=0;while(n>=0&&le.test(e)){e=e.replace(le,r);le.lastIndex=0;n-=1}return e}var ge=/\d/;var _e=/\d\d/;var ve=/\d{3}/;var ye=/\d{4}/;var be=/[+-]?\d{6}/;var Me=/\d\d?/;var xe=/\d\d\d\d?/;var we=/\d\d\d\d\d\d?/;var Se=/\d{1,3}/;var ke=/\d{1,4}/;var Le=/[+-]?\d{1,6}/;var Te=/\d+/;var Ee=/[+-]?\d+/;var De=/Z|[+-]\d\d:?\d\d/gi;var Ae=/Z|[+-]\d\d(?::?\d\d)?/gi;var Ye=/[+-]?\d+(\.\d{1,3})?/;var Ce=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var Re={};function Oe(e,t,n){Re[e]=Y(t)?t:function(e,r){return e&&n?n:t}}function Pe(e,t){if(!c(Re,e)){return new RegExp(Ie(e))}return Re[e](t._strict,t._locale)}function Ie(e){return Ne(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function Ne(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Fe={};function He(e,t){var n,r=t;if(typeof e==="string"){e=[e]}if(typeof t==="number"){r=function(e,n){n[t]=k(e)}}for(n=0;n<e.length;n++){Fe[e[n]]=r}}function je(e,t){He(e,function(e,n,r,i){r._w=r._w||{};t(e,r._w,r,i)})}function Ue(e,t,n){if(t!=null&&c(Fe,e)){Fe[e](t,n._a,n,e)}}var Be=0;var ze=1;var We=2;var qe=3;var Ge=4;var Ve=5;var $e=6;var Je=7;var Xe=8;var Ze;if(Array.prototype.indexOf){Ze=Array.prototype.indexOf}else{Ze=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}function Ke(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}fe("M",["MM",2],"Mo",function(){return this.month()+1});fe("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});fe("MMMM",0,0,function(e){return this.localeData().months(this,e)});J("month","M");Q("month",8);Oe("M",Me);Oe("MM",Me,_e);Oe("MMM",function(e,t){return t.monthsShortRegex(e)});Oe("MMMM",function(e,t){return t.monthsRegex(e)});He(["M","MM"],function(e,t){t[ze]=k(e)-1});He(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);if(i!=null){t[ze]=i}else{p(n).invalidMonth=e}});var Qe=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/;var et="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function tt(e,t){return a(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Qe).test(t)?"format":"standalone"][e.month()]}var nt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function rt(e,t){return a(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Qe.test(t)?"format":"standalone"][e.month()]}function it(e,t,n){var r,i,a,s=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(r=0;r<12;++r){a=d([2e3,r]);this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase();this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase()}}if(n){if(t==="MMM"){i=Ze.call(this._shortMonthsParse,s);return i!==-1?i:null}else{i=Ze.call(this._longMonthsParse,s);return i!==-1?i:null}}else{if(t==="MMM"){i=Ze.call(this._shortMonthsParse,s);if(i!==-1){return i}i=Ze.call(this._longMonthsParse,s);return i!==-1?i:null}else{i=Ze.call(this._longMonthsParse,s);if(i!==-1){return i}i=Ze.call(this._shortMonthsParse,s);return i!==-1?i:null}}}function at(e,t,n){var r,i,a;if(this._monthsParseExact){return it.call(this,e,t,n)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(r=0;r<12;r++){i=d([2e3,r]);if(n&&!this._longMonthsParse[r]){this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i");this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")}if(!n&&!this._monthsParse[r]){a="^"+this.months(i,"")+"|^"+this.monthsShort(i,"");this._monthsParse[r]=new RegExp(a.replace(".",""),"i")}if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e)){return r}else if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e)){return r}else if(!n&&this._monthsParse[r].test(e)){return r}}}function st(e,t){var n;if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=k(t)}else{t=e.localeData().monthsParse(t);if(typeof t!=="number"){return e}}}n=Math.min(e.date(),Ke(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n);return e}function ot(e){if(e!=null){st(this,e);r.updateOffset(this,true);return this}else{return ne(this,"Month")}}function lt(){return Ke(this.year(),this.month())}var ut=Ce;function ct(e){if(this._monthsParseExact){if(!c(this,"_monthsRegex")){ht.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!c(this,"_monthsShortRegex")){this._monthsShortRegex=ut}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}var ft=Ce;function dt(e){if(this._monthsParseExact){if(!c(this,"_monthsRegex")){ht.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!c(this,"_monthsRegex")){this._monthsRegex=ft}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function ht(){function e(e,t){return t.length-e.length}var t=[],n=[],r=[],i,a;for(i=0;i<12;i++){a=d([2e3,i]);t.push(this.monthsShort(a,""));n.push(this.months(a,""));r.push(this.months(a,""));r.push(this.monthsShort(a,""))}t.sort(e);n.sort(e);r.sort(e);for(i=0;i<12;i++){t[i]=Ne(t[i]);n[i]=Ne(n[i])}for(i=0;i<24;i++){r[i]=Ne(r[i])}this._monthsRegex=new RegExp("^("+r.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}fe("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e});fe(0,["YY",2],0,function(){return this.year()%100});fe(0,["YYYY",4],0,"year");fe(0,["YYYYY",5],0,"year");fe(0,["YYYYYY",6,true],0,"year");J("year","y");Q("year",1);Oe("Y",Ee);Oe("YY",Me,_e);Oe("YYYY",ke,ye);Oe("YYYYY",Le,be);Oe("YYYYYY",Le,be);He(["YYYYY","YYYYYY"],Be);He("YYYY",function(e,t){t[Be]=e.length===2?r.parseTwoDigitYear(e):k(e)});He("YY",function(e,t){t[Be]=r.parseTwoDigitYear(e)});He("Y",function(e,t){t[Be]=parseInt(e,10)});function pt(e){return mt(e)?366:365}function mt(e){return e%4===0&&e%100!==0||e%400===0}r.parseTwoDigitYear=function(e){return k(e)+(k(e)>68?1900:2e3)};var gt=te("FullYear",true);function _t(){return mt(this.year())}function vt(e,t,n,r,i,a,s){var o=new Date(e,t,n,r,i,a,s);if(e<100&&e>=0&&isFinite(o.getFullYear())){o.setFullYear(e)}return o}function yt(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<100&&e>=0&&isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}return t}function bt(e,t,n){var r=7+t-n,i=(7+yt(e,0,r).getUTCDay()-t)%7;return-i+r-1}function Mt(e,t,n,r,i){var a=(7+n-r)%7,s=bt(e,r,i),o=1+7*(t-1)+a+s,l,u;if(o<=0){l=e-1;u=pt(l)+o}else if(o>pt(e)){l=e+1;u=o-pt(e)}else{l=e;u=o}return{year:l,dayOfYear:u}}function xt(e,t,n){var r=bt(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,a,s;if(i<1){s=e.year()-1;a=i+wt(s,t,n)}else if(i>wt(e.year(),t,n)){a=i-wt(e.year(),t,n);s=e.year()+1}else{s=e.year();a=i}return{week:a,year:s}}function wt(e,t,n){var r=bt(e,t,n),i=bt(e+1,t,n);return(pt(e)-r+i)/7}fe("w",["ww",2],"wo","week");fe("W",["WW",2],"Wo","isoWeek");J("week","w");J("isoWeek","W");Q("week",5);Q("isoWeek",5);Oe("w",Me);Oe("ww",Me,_e);Oe("W",Me);Oe("WW",Me,_e);je(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=k(e)});function St(e){return xt(e,this._week.dow,this._week.doy).week}var kt={dow:0,doy:6};function Lt(){return this._week.dow}function Tt(){return this._week.doy}function Et(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Dt(e){var t=xt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}fe("d",0,"do","day");fe("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});fe("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});fe("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});fe("e",0,0,"weekday");fe("E",0,0,"isoWeekday");J("day","d");J("weekday","e");J("isoWeekday","E");Q("day",11);Q("weekday",11);Q("isoWeekday",11);Oe("d",Me);Oe("e",Me);Oe("E",Me);Oe("dd",function(e,t){return t.weekdaysMinRegex(e)});Oe("ddd",function(e,t){return t.weekdaysShortRegex(e)});Oe("dddd",function(e,t){return t.weekdaysRegex(e)});je(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);if(i!=null){t.d=i}else{p(n).invalidWeekday=e}});je(["d","e","E"],function(e,t,n,r){t[r]=k(e)});function At(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function Yt(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}var Ct="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function Rt(e,t){return a(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}var Ot="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function Pt(e){return this._weekdaysShort[e.day()]}var It="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Nt(e){return this._weekdaysMin[e.day()]}function Ft(e,t,n){var r,i,a,s=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(r=0;r<7;++r){a=d([2e3,1]).day(r);this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase();this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase();this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase()}}if(n){if(t==="dddd"){i=Ze.call(this._weekdaysParse,s);return i!==-1?i:null}else if(t==="ddd"){i=Ze.call(this._shortWeekdaysParse,s);return i!==-1?i:null}else{i=Ze.call(this._minWeekdaysParse,s);return i!==-1?i:null}}else{if(t==="dddd"){i=Ze.call(this._weekdaysParse,s);if(i!==-1){return i}i=Ze.call(this._shortWeekdaysParse,s);if(i!==-1){return i}i=Ze.call(this._minWeekdaysParse,s);return i!==-1?i:null}else if(t==="ddd"){i=Ze.call(this._shortWeekdaysParse,s);if(i!==-1){return i}i=Ze.call(this._weekdaysParse,s);if(i!==-1){return i}i=Ze.call(this._minWeekdaysParse,s);return i!==-1?i:null}else{i=Ze.call(this._minWeekdaysParse,s);if(i!==-1){return i}i=Ze.call(this._weekdaysParse,s);if(i!==-1){return i}i=Ze.call(this._shortWeekdaysParse,s);return i!==-1?i:null}}}function Ht(e,t,n){var r,i,a;if(this._weekdaysParseExact){return Ft.call(this,e,t,n)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(r=0;r<7;r++){i=d([2e3,1]).day(r);if(n&&!this._fullWeekdaysParse[r]){this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i");this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[r]){a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,"");this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")}if(n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e)){return r}else if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e)){return r}else if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e)){return r}else if(!n&&this._weekdaysParse[r].test(e)){return r}}}function jt(e){if(!this.isValid()){return e!=null?this:NaN}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=At(e,this.localeData());return this.add(e-t,"d")}else{return t}}function Ut(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Bt(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=Yt(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}var zt=Ce;function Wt(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Jt.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!c(this,"_weekdaysRegex")){this._weekdaysRegex=zt}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}var qt=Ce;function Gt(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Jt.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!c(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=qt}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var Vt=Ce;function $t(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Jt.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!c(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=Vt}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function Jt(){function e(e,t){return t.length-e.length}var t=[],n=[],r=[],i=[],a,s,o,l,u;for(a=0;a<7;a++){s=d([2e3,1]).day(a);o=this.weekdaysMin(s,"");l=this.weekdaysShort(s,"");u=this.weekdays(s,"");t.push(o);n.push(l);r.push(u);i.push(o);i.push(l);i.push(u)}t.sort(e);n.sort(e);r.sort(e);i.sort(e);for(a=0;a<7;a++){n[a]=Ne(n[a]);r[a]=Ne(r[a]);i[a]=Ne(i[a])}this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Xt(){return this.hours()%12||12}function Zt(){return this.hours()||24}fe("H",["HH",2],0,"hour");fe("h",["hh",2],0,Xt);fe("k",["kk",2],0,Zt);fe("hmm",0,0,function(){return""+Xt.apply(this)+se(this.minutes(),2)});fe("hmmss",0,0,function(){return""+Xt.apply(this)+se(this.minutes(),2)+se(this.seconds(),2)});fe("Hmm",0,0,function(){return""+this.hours()+se(this.minutes(),2)});fe("Hmmss",0,0,function(){return""+this.hours()+se(this.minutes(),2)+se(this.seconds(),2)});function Kt(e,t){fe(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Kt("a",true);Kt("A",false);J("hour","h");Q("hour",13);function Qt(e,t){return t._meridiemParse}Oe("a",Qt);Oe("A",Qt);Oe("H",Me);Oe("h",Me);Oe("HH",Me,_e);Oe("hh",Me,_e);Oe("hmm",xe);Oe("hmmss",we);Oe("Hmm",xe);Oe("Hmmss",we);He(["H","HH"],qe);He(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e);n._meridiem=e});He(["h","hh"],function(e,t,n){t[qe]=k(e);p(n).bigHour=true});He("hmm",function(e,t,n){var r=e.length-2;t[qe]=k(e.substr(0,r));t[Ge]=k(e.substr(r));p(n).bigHour=true});He("hmmss",function(e,t,n){var r=e.length-4;var i=e.length-2;t[qe]=k(e.substr(0,r));t[Ge]=k(e.substr(r,2));t[Ve]=k(e.substr(i));p(n).bigHour=true});He("Hmm",function(e,t,n){var r=e.length-2;t[qe]=k(e.substr(0,r));t[Ge]=k(e.substr(r))});He("Hmmss",function(e,t,n){var r=e.length-4;var i=e.length-2;t[qe]=k(e.substr(0,r));t[Ge]=k(e.substr(r,2));t[Ve]=k(e.substr(i))});function en(e){return(e+"").toLowerCase().charAt(0)==="p"}var tn=/[ap]\.?m?\.?/i;function nn(e,t,n){if(e>11){return n?"pm":"PM"}else{return n?"am":"AM"}}var rn=te("Hours",true);var an={calendar:I,longDateFormat:F,invalidDate:j,ordinal:B,ordinalParse:z,relativeTime:q,months:et,monthsShort:nt,week:kt,weekdays:Ct,weekdaysMin:It,weekdaysShort:Ot,meridiemParse:tn};var sn={};var on;function ln(e){return e?e.toLowerCase().replace("_","-"):e}function un(e){var t=0,n,r,i,a;while(t<e.length){a=ln(e[t]).split("-");n=a.length;r=ln(e[t+1]);r=r?r.split("-"):null;while(n>0){i=cn(a.slice(0,n).join("-"));if(i){return i}if(r&&r.length>=n&&L(a,r,true)>=n-1){break}n--}t++}return null}function cn(t){var r=null;if(!sn[t]&&typeof e!=="undefined"&&e&&e.exports){try{r=on._abbr;n(58)("./"+t);fn(r)}catch(i){}}return sn[t]}function fn(e,t){var n;if(e){if(v(t)){n=pn(e)}else{n=dn(e,t)}if(n){on=n}}return on._abbr}function dn(e,t){if(t!==null){var n=an;t.abbr=e;if(sn[e]!=null){A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");n=sn[e]._config}else if(t.parentLocale!=null){if(sn[t.parentLocale]!=null){n=sn[t.parentLocale]._config}else{A("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")}}sn[e]=new O(R(n,t));fn(e);return sn[e]}else{delete sn[e];return null}}function hn(e,t){if(t!=null){var n,r=an;if(sn[e]!=null){r=sn[e]._config}t=R(r,t);n=new O(t);n.parentLocale=sn[e];sn[e]=n;fn(e)}else{if(sn[e]!=null){if(sn[e].parentLocale!=null){sn[e]=sn[e].parentLocale}else if(sn[e]!=null){delete sn[e]}}}return sn[e]}function pn(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return on}if(!a(e)){t=cn(e);if(t){return t}e=[e]}return un(e)}function mn(){return P(sn)}function gn(e){var t;var n=e._a;if(n&&p(e).overflow===-2){t=n[ze]<0||n[ze]>11?ze:n[We]<1||n[We]>Ke(n[Be],n[ze])?We:n[qe]<0||n[qe]>24||n[qe]===24&&(n[Ge]!==0||n[Ve]!==0||n[$e]!==0)?qe:n[Ge]<0||n[Ge]>59?Ge:n[Ve]<0||n[Ve]>59?Ve:n[$e]<0||n[$e]>999?$e:-1;if(p(e)._overflowDayOfYear&&(t<Be||t>We)){t=We}if(p(e)._overflowWeeks&&t===-1){t=Je}if(p(e)._overflowWeekday&&t===-1){t=Xe}p(e).overflow=t}return e}var _n=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;var vn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;var yn=/Z|[+-]\d\d(?::?\d\d)?/;var bn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var Mn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var xn=/^\/?Date\((\-?\d+)/i;function wn(e){var t,n,r=e._i,i=_n.exec(r)||vn.exec(r),a,s,o,l;if(i){p(e).iso=true;for(t=0,n=bn.length;t<n;t++){if(bn[t][1].exec(i[1])){s=bn[t][0];a=bn[t][2]!==false;break}}if(s==null){e._isValid=false;return}if(i[3]){for(t=0,n=Mn.length;t<n;t++){if(Mn[t][1].exec(i[3])){o=(i[2]||" ")+Mn[t][0];break}}if(o==null){e._isValid=false;return}}if(!a&&o!=null){e._isValid=false;return}if(i[4]){if(yn.exec(i[4])){l="Z"}else{e._isValid=false;return}}e._f=s+(o||"")+(l||"");Dn(e)}else{e._isValid=false}}function Sn(e){var t=xn.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}wn(e);if(e._isValid===false){delete e._isValid;r.createFromInputFallback(e)}}r.createFromInputFallback=E("moment construction falls back to js Date. This is "+"discouraged and will be removed in upcoming major "+"release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function kn(e,t,n){if(e!=null){return e}if(t!=null){return t}return n}function Ln(e){var t=new Date(r.now());if(e._useUTC){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]}return[t.getFullYear(),t.getMonth(),t.getDate()]}function Tn(e){var t,n,r=[],i,a;if(e._d){return}i=Ln(e);if(e._w&&e._a[We]==null&&e._a[ze]==null){En(e)}if(e._dayOfYear){a=kn(e._a[Be],i[Be]);if(e._dayOfYear>pt(a)){p(e)._overflowDayOfYear=true}n=yt(a,0,e._dayOfYear);e._a[ze]=n.getUTCMonth();e._a[We]=n.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=r[t]=i[t]}for(;t<7;t++){e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[qe]===24&&e._a[Ge]===0&&e._a[Ve]===0&&e._a[$e]===0){e._nextDay=true;e._a[qe]=0}e._d=(e._useUTC?yt:vt).apply(null,r);if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[qe]=24}}function En(e){var t,n,r,i,a,s,o,l;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){a=1;s=4;n=kn(t.GG,e._a[Be],xt(Nn(),1,4).year);r=kn(t.W,1);i=kn(t.E,1);if(i<1||i>7){l=true}}else{a=e._locale._week.dow;s=e._locale._week.doy;n=kn(t.gg,e._a[Be],xt(Nn(),a,s).year);r=kn(t.w,1);if(t.d!=null){i=t.d;if(i<0||i>6){l=true}}else if(t.e!=null){i=t.e+a;if(t.e<0||t.e>6){l=true}}else{i=a}}if(r<1||r>wt(n,a,s)){p(e)._overflowWeeks=true}else if(l!=null){p(e)._overflowWeekday=true}else{o=Mt(n,r,i,a,s);e._a[Be]=o.year;e._dayOfYear=o.dayOfYear}}r.ISO_8601=function(){};function Dn(e){if(e._f===r.ISO_8601){wn(e);return}e._a=[];p(e).empty=true;var t=""+e._i,n,i,a,s,o,l=t.length,u=0;a=me(e._f,e._locale).match(oe)||[];for(n=0;n<a.length;n++){s=a[n];i=(t.match(Pe(s,e))||[])[0];if(i){o=t.substr(0,t.indexOf(i));if(o.length>0){p(e).unusedInput.push(o)}t=t.slice(t.indexOf(i)+i.length);u+=i.length}if(ce[s]){if(i){p(e).empty=false}else{p(e).unusedTokens.push(s)}Ue(s,i,e)}else if(e._strict&&!i){p(e).unusedTokens.push(s)}}p(e).charsLeftOver=l-u;if(t.length>0){p(e).unusedInput.push(t)}if(e._a[qe]<=12&&p(e).bigHour===true&&e._a[qe]>0){p(e).bigHour=undefined}p(e).parsedDateParts=e._a.slice(0);p(e).meridiem=e._meridiem;e._a[qe]=An(e._locale,e._a[qe],e._meridiem);Tn(e);gn(e)}function An(e,t,n){var r;if(n==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,n)}else if(e.isPM!=null){r=e.isPM(n);if(r&&t<12){t+=12}if(!r&&t===12){t=0}return t}else{return t}}function Yn(e){var t,n,r,i,a;if(e._f.length===0){p(e).invalidFormat=true;e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){a=0;t=b({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[i];Dn(t);if(!g(t)){continue}a+=p(t).charsLeftOver;a+=p(t).unusedTokens.length*10;p(t).score=a;if(r==null||a<r){r=a;n=t}}f(e,n||t)}function Cn(e){if(e._d){return}var t=Z(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)});Tn(e)}function Rn(e){var t=new x(gn(On(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function On(e){var t=e._i,n=e._f;e._locale=e._locale||pn(e._l);if(t===null||n===undefined&&t===""){return _({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(w(t)){return new x(gn(t))}else if(a(n)){Yn(e)}else if(l(t)){e._d=t}else if(n){Dn(e)}else{Pn(e)}if(!g(e)){e._d=null}return e}function Pn(e){var t=e._i;if(t===undefined){e._d=new Date(r.now())}else if(l(t)){e._d=new Date(t.valueOf())}else if(typeof t==="string"){Sn(e)}else if(a(t)){e._a=u(t.slice(0),function(e){return parseInt(e,10)});Tn(e)}else if(typeof t==="object"){Cn(e)}else if(typeof t==="number"){e._d=new Date(t)}else{r.createFromInputFallback(e)}}function In(e,t,n,r,i){var l={};if(typeof n==="boolean"){r=n;n=undefined}if(s(e)&&o(e)||a(e)&&e.length===0){e=undefined}l._isAMomentObject=true;l._useUTC=l._isUTC=i;l._l=n;l._i=e;l._f=t;l._strict=r;return Rn(l)}function Nn(e,t,n,r){return In(e,t,n,r,false)}var Fn=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Nn.apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return _()}});var Hn=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Nn.apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return _()}});function jn(e,t){var n,r;if(t.length===1&&a(t[0])){t=t[0]}if(!t.length){return Nn()}n=t[0];for(r=1;r<t.length;++r){if(!t[r].isValid()||t[r][e](n)){n=t[r]}}return n}function Un(){var e=[].slice.call(arguments,0);return jn("isBefore",e)}function Bn(){var e=[].slice.call(arguments,0);return jn("isAfter",e)}var zn=function(){return Date.now?Date.now():+new Date};function Wn(e){var t=Z(e),n=t.year||0,r=t.quarter||0,i=t.month||0,a=t.week||0,s=t.day||0,o=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+u*1e3+l*6e4+o*1e3*60*60;this._days=+s+a*7;this._months=+i+r*3+n*12;this._data={};this._locale=pn();this._bubble()}function qn(e){return e instanceof Wn}function Gn(e,t){fe(e,0,0,function(){var e=this.utcOffset();var n="+";if(e<0){e=-e;n="-"}return n+se(~~(e/60),2)+t+se(~~e%60,2)})}Gn("Z",":");Gn("ZZ","");Oe("Z",Ae);Oe("ZZ",Ae);He(["Z","ZZ"],function(e,t,n){n._useUTC=true;n._tzm=$n(Ae,e)});var Vn=/([\+\-]|\d\d)/gi;function $n(e,t){var n=(t||"").match(e)||[];var r=n[n.length-1]||[];var i=(r+"").match(Vn)||["-",0,0];var a=+(i[1]*60)+k(i[2]);return i[0]==="+"?a:-a}function Jn(e,t){var n,i;if(t._isUTC){n=t.clone();i=(w(e)||l(e)?e.valueOf():Nn(e).valueOf())-n.valueOf();n._d.setTime(n._d.valueOf()+i);r.updateOffset(n,false);return n}else{return Nn(e).local()}}function Xn(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}r.updateOffset=function(){};function Zn(e,t){var n=this._offset||0,i;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=$n(Ae,e)}else if(Math.abs(e)<16){e=e*60}if(!this._isUTC&&t){
i=Xn(this)}this._offset=e;this._isUTC=true;if(i!=null){this.add(i,"m")}if(n!==e){if(!t||this._changeInProgress){gr(this,cr(e-n,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;r.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?n:Xn(this)}}function Kn(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function Qn(e){return this.utcOffset(0,e)}function er(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(Xn(this),"m")}}return this}function tr(){if(this._tzm){this.utcOffset(this._tzm)}else if(typeof this._i==="string"){this.utcOffset($n(De,this._i))}return this}function nr(e){if(!this.isValid()){return false}e=e?Nn(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function rr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function ir(){if(!v(this._isDSTShifted)){return this._isDSTShifted}var e={};b(e,this);e=On(e);if(e._a){var t=e._isUTC?d(e._a):Nn(e._a);this._isDSTShifted=this.isValid()&&L(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function ar(){return this.isValid()?!this._isUTC:false}function sr(){return this.isValid()?this._isUTC:false}function or(){return this.isValid()?this._isUTC&&this._offset===0:false}var lr=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/;var ur=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function cr(e,t){var n=e,r=null,i,a,s;if(qn(e)){n={ms:e._milliseconds,d:e._days,M:e._months}}else if(typeof e==="number"){n={};if(t){n[t]=e}else{n.milliseconds=e}}else if(!!(r=lr.exec(e))){i=r[1]==="-"?-1:1;n={y:0,d:k(r[We])*i,h:k(r[qe])*i,m:k(r[Ge])*i,s:k(r[Ve])*i,ms:k(r[$e])*i}}else if(!!(r=ur.exec(e))){i=r[1]==="-"?-1:1;n={y:fr(r[2],i),M:fr(r[3],i),w:fr(r[4],i),d:fr(r[5],i),h:fr(r[6],i),m:fr(r[7],i),s:fr(r[8],i)}}else if(n==null){n={}}else if(typeof n==="object"&&("from"in n||"to"in n)){s=hr(Nn(n.from),Nn(n.to));n={};n.ms=s.milliseconds;n.M=s.months}a=new Wn(n);if(qn(e)&&c(e,"_locale")){a._locale=e._locale}return a}cr.fn=Wn.prototype;function fr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function dr(e,t){var n={milliseconds:0,months:0};n.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(n.months,"M").isAfter(t)){--n.months}n.milliseconds=+t-+e.clone().add(n.months,"M");return n}function hr(e,t){var n;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=Jn(t,e);if(e.isBefore(t)){n=dr(e,t)}else{n=dr(t,e);n.milliseconds=-n.milliseconds;n.months=-n.months}return n}function pr(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}function mr(e,t){return function(n,r){var i,a;if(r!==null&&!isNaN(+r)){A(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");a=n;n=r;r=a}n=typeof n==="string"?+n:n;i=cr(n,r);gr(this,i,e);return this}}function gr(e,t,n,i){var a=t._milliseconds,s=pr(t._days),o=pr(t._months);if(!e.isValid()){return}i=i==null?true:i;if(a){e._d.setTime(e._d.valueOf()+a*n)}if(s){re(e,"Date",ne(e,"Date")+s*n)}if(o){st(e,ne(e,"Month")+o*n)}if(i){r.updateOffset(e,s||o)}}var _r=mr(1,"add");var vr=mr(-1,"subtract");function yr(e,t){var n=e.diff(t,"days",true);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function br(e,t){var n=e||Nn(),i=Jn(n,this).startOf("day"),a=r.calendarFormat(this,i)||"sameElse";var s=t&&(Y(t[a])?t[a].call(this,n):t[a]);return this.format(s||this.localeData().calendar(a,this,Nn(n)))}function Mr(){return new x(this)}function xr(e,t){var n=w(e)?e:Nn(e);if(!(this.isValid()&&n.isValid())){return false}t=X(!v(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()>n.valueOf()}else{return n.valueOf()<this.clone().startOf(t).valueOf()}}function wr(e,t){var n=w(e)?e:Nn(e);if(!(this.isValid()&&n.isValid())){return false}t=X(!v(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()<n.valueOf()}else{return this.clone().endOf(t).valueOf()<n.valueOf()}}function Sr(e,t,n,r){r=r||"()";return(r[0]==="("?this.isAfter(e,n):!this.isBefore(e,n))&&(r[1]===")"?this.isBefore(t,n):!this.isAfter(t,n))}function kr(e,t){var n=w(e)?e:Nn(e),r;if(!(this.isValid()&&n.isValid())){return false}t=X(t||"millisecond");if(t==="millisecond"){return this.valueOf()===n.valueOf()}else{r=n.valueOf();return this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()}}function Lr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Tr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Er(e,t,n){var r,i,a,s;if(!this.isValid()){return NaN}r=Jn(e,this);if(!r.isValid()){return NaN}i=(r.utcOffset()-this.utcOffset())*6e4;t=X(t);if(t==="year"||t==="month"||t==="quarter"){s=Dr(this,r);if(t==="quarter"){s=s/3}else if(t==="year"){s=s/12}}else{a=this-r;s=t==="second"?a/1e3:t==="minute"?a/6e4:t==="hour"?a/36e5:t==="day"?(a-i)/864e5:t==="week"?(a-i)/6048e5:a}return n?s:S(s)}function Dr(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,a;if(t-r<0){i=e.clone().add(n-1,"months");a=(t-r)/(r-i)}else{i=e.clone().add(n+1,"months");a=(t-r)/(i-r)}return-(n+a)||0}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Ar(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Yr(){var e=this.clone().utc();if(0<e.year()&&e.year()<=9999){if(Y(Date.prototype.toISOString)){return this.toDate().toISOString()}else{return pe(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return pe(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}function Cr(e){if(!e){e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat}var t=pe(this,e);return this.localeData().postformat(t)}function Rr(e,t){if(this.isValid()&&(w(e)&&e.isValid()||Nn(e).isValid())){return cr({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Or(e){return this.from(Nn(),e)}function Pr(e,t){if(this.isValid()&&(w(e)&&e.isValid()||Nn(e).isValid())){return cr({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Ir(e){return this.to(Nn(),e)}function Nr(e){var t;if(e===undefined){return this._locale._abbr}else{t=pn(e);if(t!=null){this._locale=t}return this}}var Fr=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}});function Hr(){return this._locale}function jr(e){e=X(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}if(e==="isoWeek"){this.isoWeekday(1)}if(e==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function Ur(e){e=X(e);if(e===undefined||e==="millisecond"){return this}if(e==="date"){e="day"}return this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function Br(){return this._d.valueOf()-(this._offset||0)*6e4}function zr(){return Math.floor(this.valueOf()/1e3)}function Wr(){return new Date(this.valueOf())}function qr(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Gr(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Vr(){return this.isValid()?this.toISOString():null}function $r(){return g(this)}function Jr(){return f({},p(this))}function Xr(){return p(this).overflow}function Zr(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}fe(0,["gg",2],0,function(){return this.weekYear()%100});fe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Kr(e,t){fe(0,[e,e.length],0,t)}Kr("gggg","weekYear");Kr("ggggg","weekYear");Kr("GGGG","isoWeekYear");Kr("GGGGG","isoWeekYear");J("weekYear","gg");J("isoWeekYear","GG");Q("weekYear",1);Q("isoWeekYear",1);Oe("G",Ee);Oe("g",Ee);Oe("GG",Me,_e);Oe("gg",Me,_e);Oe("GGGG",ke,ye);Oe("gggg",ke,ye);Oe("GGGGG",Le,be);Oe("ggggg",Le,be);je(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=k(e)});je(["gg","GG"],function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)});function Qr(e){return ri.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function ei(e){return ri.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function ti(){return wt(this.year(),1,4)}function ni(){var e=this.localeData()._week;return wt(this.year(),e.dow,e.doy)}function ri(e,t,n,r,i){var a;if(e==null){return xt(this,r,i).year}else{a=wt(e,r,i);if(t>a){t=a}return ii.call(this,e,t,n,r,i)}}function ii(e,t,n,r,i){var a=Mt(e,t,n,r,i),s=yt(a.year,0,a.dayOfYear);this.year(s.getUTCFullYear());this.month(s.getUTCMonth());this.date(s.getUTCDate());return this}fe("Q",0,"Qo","quarter");J("quarter","Q");Q("quarter",7);Oe("Q",ge);He("Q",function(e,t){t[ze]=(k(e)-1)*3});function ai(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}fe("D",["DD",2],"Do","date");J("date","D");Q("date",9);Oe("D",Me);Oe("DD",Me,_e);Oe("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient});He(["D","DD"],We);He("Do",function(e,t){t[We]=k(e.match(Me)[0],10)});var si=te("Date",true);fe("DDD",["DDDD",3],"DDDo","dayOfYear");J("dayOfYear","DDD");Q("dayOfYear",4);Oe("DDD",Se);Oe("DDDD",ve);He(["DDD","DDDD"],function(e,t,n){n._dayOfYear=k(e)});function oi(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}fe("m",["mm",2],0,"minute");J("minute","m");Q("minute",14);Oe("m",Me);Oe("mm",Me,_e);He(["m","mm"],Ge);var li=te("Minutes",false);fe("s",["ss",2],0,"second");J("second","s");Q("second",15);Oe("s",Me);Oe("ss",Me,_e);He(["s","ss"],Ve);var ui=te("Seconds",false);fe("S",0,0,function(){return~~(this.millisecond()/100)});fe(0,["SS",2],0,function(){return~~(this.millisecond()/10)});fe(0,["SSS",3],0,"millisecond");fe(0,["SSSS",4],0,function(){return this.millisecond()*10});fe(0,["SSSSS",5],0,function(){return this.millisecond()*100});fe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});fe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});fe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});fe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});J("millisecond","ms");Q("millisecond",16);Oe("S",Se,ge);Oe("SS",Se,_e);Oe("SSS",Se,ve);var ci;for(ci="SSSS";ci.length<=9;ci+="S"){Oe(ci,Te)}function fi(e,t){t[$e]=k(("0."+e)*1e3)}for(ci="S";ci.length<=9;ci+="S"){He(ci,fi)}var di=te("Milliseconds",false);fe("z",0,0,"zoneAbbr");fe("zz",0,0,"zoneName");function hi(){return this._isUTC?"UTC":""}function pi(){return this._isUTC?"Coordinated Universal Time":""}var mi=x.prototype;mi.add=_r;mi.calendar=br;mi.clone=Mr;mi.diff=Er;mi.endOf=Ur;mi.format=Cr;mi.from=Rr;mi.fromNow=Or;mi.to=Pr;mi.toNow=Ir;mi.get=ie;mi.invalidAt=Xr;mi.isAfter=xr;mi.isBefore=wr;mi.isBetween=Sr;mi.isSame=kr;mi.isSameOrAfter=Lr;mi.isSameOrBefore=Tr;mi.isValid=$r;mi.lang=Fr;mi.locale=Nr;mi.localeData=Hr;mi.max=Hn;mi.min=Fn;mi.parsingFlags=Jr;mi.set=ae;mi.startOf=jr;mi.subtract=vr;mi.toArray=qr;mi.toObject=Gr;mi.toDate=Wr;mi.toISOString=Yr;mi.toJSON=Vr;mi.toString=Ar;mi.unix=zr;mi.valueOf=Br;mi.creationData=Zr;mi.year=gt;mi.isLeapYear=_t;mi.weekYear=Qr;mi.isoWeekYear=ei;mi.quarter=mi.quarters=ai;mi.month=ot;mi.daysInMonth=lt;mi.week=mi.weeks=Et;mi.isoWeek=mi.isoWeeks=Dt;mi.weeksInYear=ni;mi.isoWeeksInYear=ti;mi.date=si;mi.day=mi.days=jt;mi.weekday=Ut;mi.isoWeekday=Bt;mi.dayOfYear=oi;mi.hour=mi.hours=rn;mi.minute=mi.minutes=li;mi.second=mi.seconds=ui;mi.millisecond=mi.milliseconds=di;mi.utcOffset=Zn;mi.utc=Qn;mi.local=er;mi.parseZone=tr;mi.hasAlignedHourOffset=nr;mi.isDST=rr;mi.isLocal=ar;mi.isUtcOffset=sr;mi.isUtc=or;mi.isUTC=or;mi.zoneAbbr=hi;mi.zoneName=pi;mi.dates=E("dates accessor is deprecated. Use date instead.",si);mi.months=E("months accessor is deprecated. Use month instead",ot);mi.years=E("years accessor is deprecated. Use year instead",gt);mi.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Kn);mi.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",ir);var gi=mi;function _i(e){return Nn(e*1e3)}function vi(){return Nn.apply(null,arguments).parseZone()}function yi(e){return e}var bi=O.prototype;bi.calendar=N;bi.longDateFormat=H;bi.invalidDate=U;bi.ordinal=W;bi.preparse=yi;bi.postformat=yi;bi.relativeTime=G;bi.pastFuture=V;bi.set=C;bi.months=tt;bi.monthsShort=rt;bi.monthsParse=at;bi.monthsRegex=dt;bi.monthsShortRegex=ct;bi.week=St;bi.firstDayOfYear=Tt;bi.firstDayOfWeek=Lt;bi.weekdays=Rt;bi.weekdaysMin=Nt;bi.weekdaysShort=Pt;bi.weekdaysParse=Ht;bi.weekdaysRegex=Wt;bi.weekdaysShortRegex=Gt;bi.weekdaysMinRegex=$t;bi.isPM=en;bi.meridiem=nn;function Mi(e,t,n,r){var i=pn();var a=d().set(r,t);return i[n](a,e)}function xi(e,t,n){if(typeof e==="number"){t=e;e=undefined}e=e||"";if(t!=null){return Mi(e,t,n,"month")}var r;var i=[];for(r=0;r<12;r++){i[r]=Mi(e,r,n,"month")}return i}function wi(e,t,n,r){if(typeof e==="boolean"){if(typeof t==="number"){n=t;t=undefined}t=t||""}else{t=e;n=t;e=false;if(typeof t==="number"){n=t;t=undefined}t=t||""}var i=pn(),a=e?i._week.dow:0;if(n!=null){return Mi(t,(n+a)%7,r,"day")}var s;var o=[];for(s=0;s<7;s++){o[s]=Mi(t,(s+a)%7,r,"day")}return o}function Si(e,t){return xi(e,t,"months")}function ki(e,t){return xi(e,t,"monthsShort")}function Li(e,t,n){return wi(e,t,n,"weekdays")}function Ti(e,t,n){return wi(e,t,n,"weekdaysShort")}function Ei(e,t,n){return wi(e,t,n,"weekdaysMin")}fn("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=k(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});r.lang=E("moment.lang is deprecated. Use moment.locale instead.",fn);r.langData=E("moment.langData is deprecated. Use moment.localeData instead.",pn);var Di=Math.abs;function Ai(){var e=this._data;this._milliseconds=Di(this._milliseconds);this._days=Di(this._days);this._months=Di(this._months);e.milliseconds=Di(e.milliseconds);e.seconds=Di(e.seconds);e.minutes=Di(e.minutes);e.hours=Di(e.hours);e.months=Di(e.months);e.years=Di(e.years);return this}function Yi(e,t,n,r){var i=cr(t,n);e._milliseconds+=r*i._milliseconds;e._days+=r*i._days;e._months+=r*i._months;return e._bubble()}function Ci(e,t){return Yi(this,e,t,1)}function Ri(e,t){return Yi(this,e,t,-1)}function Oi(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function Pi(){var e=this._milliseconds;var t=this._days;var n=this._months;var r=this._data;var i,a,s,o,l;if(!(e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0)){e+=Oi(Ni(n)+t)*864e5;t=0;n=0}r.milliseconds=e%1e3;i=S(e/1e3);r.seconds=i%60;a=S(i/60);r.minutes=a%60;s=S(a/60);r.hours=s%24;t+=S(s/24);l=S(Ii(t));n+=l;t-=Oi(Ni(l));o=S(n/12);n%=12;r.days=t;r.months=n;r.years=o;return this}function Ii(e){return e*4800/146097}function Ni(e){return e*146097/4800}function Fi(e){var t;var n;var r=this._milliseconds;e=X(e);if(e==="month"||e==="year"){t=this._days+r/864e5;n=this._months+Ii(t);return e==="month"?n:n/12}else{t=this._days+Math.round(Ni(this._months));switch(e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}}function Hi(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+k(this._months/12)*31536e6}function ji(e){return function(){return this.as(e)}}var Ui=ji("ms");var Bi=ji("s");var zi=ji("m");var Wi=ji("h");var qi=ji("d");var Gi=ji("w");var Vi=ji("M");var $i=ji("y");function Ji(e){e=X(e);return this[e+"s"]()}function Xi(e){return function(){return this._data[e]}}var Zi=Xi("milliseconds");var Ki=Xi("seconds");var Qi=Xi("minutes");var ea=Xi("hours");var ta=Xi("days");var na=Xi("months");var ra=Xi("years");function ia(){return S(this.days()/7)}var aa=Math.round;var sa={s:45,m:45,h:22,d:26,M:11};function oa(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function la(e,t,n){var r=cr(e).abs();var i=aa(r.as("s"));var a=aa(r.as("m"));var s=aa(r.as("h"));var o=aa(r.as("d"));var l=aa(r.as("M"));var u=aa(r.as("y"));var c=i<sa.s&&["s",i]||a<=1&&["m"]||a<sa.m&&["mm",a]||s<=1&&["h"]||s<sa.h&&["hh",s]||o<=1&&["d"]||o<sa.d&&["dd",o]||l<=1&&["M"]||l<sa.M&&["MM",l]||u<=1&&["y"]||["yy",u];c[2]=t;c[3]=+e>0;c[4]=n;return oa.apply(null,c)}function ua(e){if(e===undefined){return aa}if(typeof e==="function"){aa=e;return true}return false}function ca(e,t){if(sa[e]===undefined){return false}if(t===undefined){return sa[e]}sa[e]=t;return true}function fa(e){var t=this.localeData();var n=la(this,!e,t);if(e){n=t.pastFuture(+this,n)}return t.postformat(n)}var da=Math.abs;function ha(){var e=da(this._milliseconds)/1e3;var t=da(this._days);var n=da(this._months);var r,i,a;r=S(e/60);i=S(r/60);e%=60;r%=60;a=S(n/12);n%=12;var s=a;var o=n;var l=t;var u=i;var c=r;var f=e;var d=this.asSeconds();if(!d){return"P0D"}return(d<0?"-":"")+"P"+(s?s+"Y":"")+(o?o+"M":"")+(l?l+"D":"")+(u||c||f?"T":"")+(u?u+"H":"")+(c?c+"M":"")+(f?f+"S":"")}var pa=Wn.prototype;pa.abs=Ai;pa.add=Ci;pa.subtract=Ri;pa.as=Fi;pa.asMilliseconds=Ui;pa.asSeconds=Bi;pa.asMinutes=zi;pa.asHours=Wi;pa.asDays=qi;pa.asWeeks=Gi;pa.asMonths=Vi;pa.asYears=$i;pa.valueOf=Hi;pa._bubble=Pi;pa.get=Ji;pa.milliseconds=Zi;pa.seconds=Ki;pa.minutes=Qi;pa.hours=ea;pa.days=ta;pa.weeks=ia;pa.months=na;pa.years=ra;pa.humanize=fa;pa.toISOString=ha;pa.toString=ha;pa.toJSON=ha;pa.locale=Nr;pa.localeData=Hr;pa.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ha);pa.lang=Fr;fe("X",0,0,"unix");fe("x",0,0,"valueOf");Oe("x",Ee);Oe("X",Ye);He("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)});He("x",function(e,t,n){n._d=new Date(k(e))});r.version="2.14.1";i(Nn);r.fn=gi;r.min=Un;r.max=Bn;r.now=zn;r.utc=d;r.unix=_i;r.months=Si;r.isDate=l;r.locale=fn;r.invalid=_;r.duration=cr;r.isMoment=w;r.weekdays=Li;r.parseZone=vi;r.localeData=pn;r.isDuration=qn;r.monthsShort=ki;r.weekdaysMin=Ei;r.defineLocale=dn;r.updateLocale=hn;r.locales=mn;r.weekdaysShort=Ti;r.normalizeUnits=X;r.relativeTimeRounding=ua;r.relativeTimeThreshold=ca;r.calendarFormat=yr;r.prototype=gi;var ma=r;return ma})}).call(t,n(57)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){e.deprecate=function(){};e.paths=[];e.children=[];e.webpackPolyfill=1}return e}},function(e,t,n){var r={"./af":59,"./af.js":59,"./ar":60,"./ar-ma":61,"./ar-ma.js":61,"./ar-sa":62,"./ar-sa.js":62,"./ar-tn":63,"./ar-tn.js":63,"./ar.js":60,"./az":64,"./az.js":64,"./be":65,"./be.js":65,"./bg":66,"./bg.js":66,"./bn":67,"./bn.js":67,"./bo":68,"./bo.js":68,"./br":69,"./br.js":69,"./bs":70,"./bs.js":70,"./ca":71,"./ca.js":71,"./cs":72,"./cs.js":72,"./cv":73,"./cv.js":73,"./cy":74,"./cy.js":74,"./da":75,"./da.js":75,"./de":76,"./de-at":77,"./de-at.js":77,"./de.js":76,"./dv":78,"./dv.js":78,"./el":79,"./el.js":79,"./en-au":80,"./en-au.js":80,"./en-ca":81,"./en-ca.js":81,"./en-gb":82,"./en-gb.js":82,"./en-ie":83,"./en-ie.js":83,"./en-nz":84,"./en-nz.js":84,"./eo":85,"./eo.js":85,"./es":86,"./es-do":87,"./es-do.js":87,"./es.js":86,"./et":88,"./et.js":88,"./eu":89,"./eu.js":89,"./fa":90,"./fa.js":90,"./fi":91,"./fi.js":91,"./fo":92,"./fo.js":92,"./fr":93,"./fr-ca":94,"./fr-ca.js":94,"./fr-ch":95,"./fr-ch.js":95,"./fr.js":93,"./fy":96,"./fy.js":96,"./gd":97,"./gd.js":97,"./gl":98,"./gl.js":98,"./he":99,"./he.js":99,"./hi":100,"./hi.js":100,"./hr":101,"./hr.js":101,"./hu":102,"./hu.js":102,"./hy-am":103,"./hy-am.js":103,"./id":104,"./id.js":104,"./is":105,"./is.js":105,"./it":106,"./it.js":106,"./ja":107,"./ja.js":107,"./jv":108,"./jv.js":108,"./ka":109,"./ka.js":109,"./kk":110,"./kk.js":110,"./km":111,"./km.js":111,"./ko":112,"./ko.js":112,"./ky":113,"./ky.js":113,"./lb":114,"./lb.js":114,"./lo":115,"./lo.js":115,"./lt":116,"./lt.js":116,"./lv":117,"./lv.js":117,"./me":118,"./me.js":118,"./mk":119,"./mk.js":119,"./ml":120,"./ml.js":120,"./mr":121,"./mr.js":121,"./ms":122,"./ms-my":123,"./ms-my.js":123,"./ms.js":122,"./my":124,"./my.js":124,"./nb":125,"./nb.js":125,"./ne":126,"./ne.js":126,"./nl":127,"./nl.js":127,"./nn":128,"./nn.js":128,"./pa-in":129,"./pa-in.js":129,"./pl":130,"./pl.js":130,"./pt":131,"./pt-br":132,"./pt-br.js":132,"./pt.js":131,"./ro":133,"./ro.js":133,"./ru":134,"./ru.js":134,"./se":135,"./se.js":135,"./si":136,"./si.js":136,"./sk":137,"./sk.js":137,"./sl":138,"./sl.js":138,"./sq":139,"./sq.js":139,"./sr":140,"./sr-cyrl":141,"./sr-cyrl.js":141,"./sr.js":140,"./ss":142,"./ss.js":142,"./sv":143,"./sv.js":143,"./sw":144,"./sw.js":144,"./ta":145,"./ta.js":145,"./te":146,"./te.js":146,"./th":147,"./th.js":147,"./tl-ph":148,"./tl-ph.js":148,"./tlh":149,"./tlh.js":149,"./tr":150,"./tr.js":150,"./tzl":151,"./tzl.js":151,"./tzm":152,"./tzm-latn":153,"./tzm-latn.js":153,"./tzm.js":152,"./uk":154,"./uk.js":154,"./uz":155,"./uz.js":155,"./vi":156,"./vi.js":156,"./x-pseudo":157,"./x-pseudo.js":157,"./zh-cn":158,"./zh-cn.js":158,"./zh-tw":159,"./zh-tw.js":159};function i(e){return n(a(e))}function a(e){return r[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}i.keys=function s(){return Object.keys(r)};i.resolve=a;e.exports=i;i.id=58},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){if(e<12){return n?"vm":"VM"}else{return n?"nm":"NM"}},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(e===1||e===8||e>=20?"ste":"de")},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},r=function(e){return e===0?0:e===1?1:e===2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},i={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},a=function(e){return function(t,n,a,s){var o=r(t),l=i[e][r(t)];if(o===2){l=l[n?0:1]}return l.replace(/%d/i,t)}},s=["  "," "," "," "," "," "," "," "," ","  ","  ","  "];var o=e.defineLocale("ar",{months:s,monthsShort:s,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){if(e<12){return""}else{return""}},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:a("s"),m:a("m"),mm:a("m"),h:a("h"),hh:a("h"),d:a("d"),dd:a("d"),M:a("M"),MM:a("M"),y:a("y"),yy:a("y")},preparse:function(e){return e.replace(/\u200f/g,"").replace(/[]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},week:{dow:6,doy:12}});return o})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var r=e.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){if(e<12){return""}else{return""}},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},week:{dow:6,doy:12}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};var n=e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniyy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(e){return/^(gndz|axam)$/.test(e)},meridiem:function(e,t,n){if(e<4){return"gec"}else if(e<12){return"shr"}else if(e<17){return"gndz"}else{return"axam"}},ordinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(e){if(e===0){return e+"-nc"}var n=e%10,r=e%100-n,i=e>=100?100:null;return e+(t[n]||t[r]||t[i])},week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){var i={mm:n?"__":"__",hh:n?"__":"__",dd:"__",MM:"__",yy:"__"};if(r==="m"){return n?"":""}else if(r==="h"){return n?"":""}else{return e+" "+t(i[r],+e)}}var r=e.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"
},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:n,hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){if(e<4){return""}else if(e<12){return""}else if(e<17){return""}else{return""}},ordinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return(e%10===2||e%10===3)&&(e%100!==12&&e%100!==13)?e+"-":e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;if(e===0){return e+"-"}else if(n===0){return e+"-"}else if(n>10&&n<20){return e+"-"}else if(t===1){return e+"-"}else if(t===2){return e+"-"}else if(t===7||t===8){return e+"-"}else{return e+"-"}},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var r=e.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/||||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""&&e>=4||t===""&&e<5||t===""){return e+12}else{return e}},meridiem:function(e,t,n){if(e<4){return""}else if(e<10){return""}else if(e<17){return""}else if(e<20){return""}else{return""}},week:{dow:0,doy:6}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var r=e.defineLocale("bo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/||||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""&&e>=4||t===""&&e<5||t===""){return e+12}else{return e}},meridiem:function(e,t,n){if(e<4){return""}else if(e<10){return""}else if(e<17){return""}else if(e<20){return""}else{return""}},week:{dow:0,doy:6}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n){var r={mm:"munutenn",MM:"miz",dd:"devezh"};return e+" "+i(r[n],e)}function n(e){switch(r(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}function r(e){if(e>9){return r(e%10)}return e}function i(e,t){if(t===2){return a(e)}return e}function a(e){var t={m:"v",b:"v",d:"z"};if(t[e.charAt(0)]===undefined){return e}return t[e.charAt(0)]+e.substring(1)}var s=e.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:n},ordinalParse:/\d{1,2}(a|vet)/,ordinal:function(e){var t=e===1?"a":"vet";return e+t},week:{dow:1,doy:4}});return s})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n){var r=e+" ";switch(n){case"m":return t?"jedna minuta":"jedne minute";case"mm":if(e===1){r+="minuta"}else if(e===2||e===3||e===4){r+="minute"}else{r+="minuta"}return r;case"h":return t?"jedan sat":"jednog sata";case"hh":if(e===1){r+="sat"}else if(e===2||e===3||e===4){r+="sata"}else{r+="sati"}return r;case"dd":if(e===1){r+="dan"}else{r+="dana"}return r;case"MM":if(e===1){r+="mjesec"}else if(e===2||e===3||e===4){r+="mjeseca"}else{r+="mjeseci"}return r;case"yy":if(e===1){r+="godina"}else if(e===2||e===3||e===4){r+="godine"}else{r+="godina"}return r}}var n=e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:true,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ca",{months:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:true,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[avui a "+(this.hours()!==1?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(this.hours()!==1?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(this.hours()!==1?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(this.hours()!==1?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(this.hours()!==1?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,t){var n=e===1?"r":e===2?"n":e===3?"r":e===4?"t":"";if(t==="w"||t==="W"){n="a"}return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),n="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_");function r(e){return e>1&&e<5&&~~(e/10)!==1}function i(e,t,n,i){var a=e+" ";switch(n){case"s":return t||i?"pr sekund":"pr sekundami";case"m":return t?"minuta":i?"minutu":"minutou";case"mm":if(t||i){return a+(r(e)?"minuty":"minut")}else{return a+"minutami"}break;case"h":return t?"hodina":i?"hodinu":"hodinou";case"hh":if(t||i){return a+(r(e)?"hodiny":"hodin")}else{return a+"hodinami"}break;case"d":return t||i?"den":"dnem";case"dd":if(t||i){return a+(r(e)?"dny":"dn")}else{return a+"dny"}break;case"M":return t||i?"msc":"mscem";case"MM":if(t||i){return a+(r(e)?"msce":"msc")}else{return a+"msci"}break;case"y":return t||i?"rok":"rokem";case"yy":if(t||i){return a+(r(e)?"roky":"let")}else{return a+"lety"}break}}var a=e.defineLocale("cs",{months:t,monthsShort:n,monthsParse:function(e,t){var n,r=[];for(n=0;n<12;n++){r[n]=new RegExp("^"+e[n]+"$|^"+t[n]+"$","i")}return r}(t,n),shortMonthsParse:function(e){var t,n=[];for(t=0;t<12;t++){n[t]=new RegExp("^"+e[t]+"$","i")}return n}(n),longMonthsParse:function(e){var t,n=[];for(t=0;t<12;t++){n[t]=new RegExp("^"+e[t]+"$","i")}return n}(t),weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return a})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(e){var t=/$/i.exec(e)?"":/$/i.exec(e)?"":"";return e+t},past:"%s ",s:"- ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t=e,n="",r=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];if(t>20){if(t===40||t===50||t===60||t===80||t===100){n="fed"}else{n="ain"}}else if(t>0){n=r[t]}return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I gr kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}var n=e.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:true,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}var n=e.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:true,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=["","","","","","","","","","","",""],n=["","","","","","",""];var r=e.defineLocale("dv",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){if(e<12){return""}else{return""}},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:7,doy:12}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}var n=e.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(e,t){if(/D/.test(t.substring(0,t.indexOf("MMMM")))){return this._monthsGenitiveEl[e.month()]}else{return this._monthsNominativeEl[e.month()]}},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(e,t,n){if(e>11){return n?"":""}else{return n?"":""}},isPM:function(e){return(e+"").toLowerCase()[0]===""},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,n){var r=this._calendarEl[e],i=n&&n.hours();if(t(r)){r=r.apply(n)}return r.replace("{}",i%12===1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"Dimano_Lundo_Mardo_Merkredo_ado_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_a_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_a_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-an de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return e.charAt(0).toLowerCase()==="p"},meridiem:function(e,t,n){if(e>11){return n?"p.t.m.":"P.T.M."}else{return n?"a.t.m.":"A.T.M."}},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"anta %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");var r=e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){if(/-MMM-/.test(r)){return n[e.month()]}else{return t[e.month()]}},monthsParseExact:true,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(this.hours()!==1?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(this.hours()!==1?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(this.hours()!==1?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return r})},function(e,t,n){
(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");var r=e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){if(/-MMM-/.test(r)){return n[e.month()]}else{return t[e.month()]}},monthsParseExact:true,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(this.hours()!==1?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(this.hours()!==1?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(this.hours()!==1?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n,r){var i={s:["mne sekundi","mni sekund","paar sekundit"],m:["he minuti","ks minut"],mm:[e+" minuti",e+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[e+" tunni",e+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[e+" kuu",e+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[e+" aasta",e+" aastat"]};if(t){return i[n][2]?i[n][2]:i[n][1]}return r?i[n][0]:i[n][1]}var n=e.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d peva",M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:true,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var r=e.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(e){return/  /.test(e)},meridiem:function(e,t,n){if(e<12){return"  "}else{return"  "}},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[-]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),n=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",t[7],t[8],t[9]];function r(e,t,n,r){var a="";switch(n){case"s":return r?"muutaman sekunnin":"muutama sekunti";case"m":return r?"minuutin":"minuutti";case"mm":a=r?"minuutin":"minuuttia";break;case"h":return r?"tunnin":"tunti";case"hh":a=r?"tunnin":"tuntia";break;case"d":return r?"pivn":"piv";case"dd":a=r?"pivn":"piv";break;case"M":return r?"kuukauden":"kuukausi";case"MM":a=r?"kuukauden":"kuukautta";break;case"y":return r?"vuoden":"vuosi";case"yy":a=r?"vuoden":"vuotta";break}a=i(e,r)+" "+a;return a}function i(e,r){return e<10?r?n[e]:t[e]:e}var a=e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return a})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnai",MM:"%d mnair",y:"eitt r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:true,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(e){return e+(e===1?"er":"")},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:true,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(e){return e+(e===1?"er":"e")}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:true,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(e){return e+(e===1?"er":"e")},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");var r=e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,r){if(/-MMM-/.test(r)){return n[e.month()]}else{return t[e.month()]}},monthsParseExact:true,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(e===1||e===8||e>=20?"ste":"de")},week:{dow:1,doy:4}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"];var n=["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"];var r=["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"];var i=["Did","Dil","Dim","Dic","Dia","Dih","Dis"];var a=["D","Lu","M","Ci","Ar","Ha","Sa"];var s=e.defineLocale("gd",{months:t,monthsShort:n,monthsParseExact:true,weekdays:r,weekdaysShort:i,weekdaysMin:a,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},ordinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){var t=e===1?"d":e%10===2?"na":"mh";return e+t},week:{dow:1,doy:4}});return s})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuo_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xu._Xul._Ago._Set._Out._Nov._Dec.".split("_"),monthsParseExact:true,weekdays:"Domingo_Luns_Martes_Mrcores_Xoves_Venres_Sbado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mr._Xov._Ven._Sb.".split("_"),weekdaysMin:"Do_Lu_Ma_M_Xo_Ve_S".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[ma "+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(this.hours()!==1?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(this.hours()!==1?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(this.hours()!==1?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){if(e==="uns segundos"){return"nuns segundos"}return"en "+e},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:function(e){if(e===2){return""}return e+" "},d:"",dd:function(e){if(e===2){return""}return e+" "},M:"",MM:function(e){if(e===2){return""}return e+" "},y:"",yy:function(e){if(e===2){return""}else if(e%10===0&&e!==10){return e+" "}return e+" "}},meridiemParse:/"|"| | | ||/i,isPM:function(e){return/^("| |)$/.test(e)},meridiem:function(e,t,n){if(e<5){return" "}else if(e<10){return""}else if(e<12){return n?'"':" "}else if(e<18){return n?'"':" "}else{return""}}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var r=e.defineLocale("hi",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""){return e<4?e:e+12}else if(t===""){return e}else if(t===""){return e>=10?e:e+12}else if(t===""){return e+12}},meridiem:function(e,t,n){if(e<4){return""}else if(e<10){return""}else if(e<17){return""}else if(e<20){return""}else{return""}},week:{dow:0,doy:6}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n){var r=e+" ";switch(n){case"m":return t?"jedna minuta":"jedne minute";case"mm":if(e===1){r+="minuta"}else if(e===2||e===3||e===4){r+="minute"}else{r+="minuta"}return r;case"h":return t?"jedan sat":"jednog sata";case"hh":if(e===1){r+="sat"}else if(e===2||e===3||e===4){r+="sata"}else{r+="sati"}return r;case"dd":if(e===1){r+="dan"}else{r+="dana"}return r;case"MM":if(e===1){r+="mjesec"}else if(e===2||e===3||e===4){r+="mjeseca"}else{r+="mjeseci"}return r;case"yy":if(e===1){r+="godina"}else if(e===2||e===3||e===4){r+="godine"}else{r+="godina"}return r}}var n=e.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:true,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");function n(e,t,n,r){var i=e,a;switch(n){case"s":return r||t?"nhny msodperc":"nhny msodperce";case"m":return"egy"+(r||t?" perc":" perce");case"mm":return i+(r||t?" perc":" perce");case"h":return"egy"+(r||t?" ra":" rja");case"hh":return i+(r||t?" ra":" rja");case"d":return"egy"+(r||t?" nap":" napja");case"dd":return i+(r||t?" nap":" napja");case"M":return"egy"+(r||t?" hnap":" hnapja");case"MM":return i+(r||t?" hnap":" hnapja");case"y":return"egy"+(r||t?" v":" ve");case"yy":return i+(r||t?" v":" ve")}return""}function r(e){return(e?"":"[mlt] ")+"["+t[this.day()]+"] LT[-kor]"}var i=e.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return e.charAt(1).toLowerCase()==="u"},meridiem:function(e,t,n){if(e<12){return n===true?"de":"DE"}else{return n===true?"du":"DU"}},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return r.call(this,true)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return r.call(this,false)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return i})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e){if(e<4){return""}else if(e<12){return""}else if(e<17){return""}else{return""}},ordinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":if(e===1){return e+"-"}return e+"-";default:return e}},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){if(e===12){e=0}if(t==="pagi"){return e}else if(t==="siang"){return e>=11?e:e+12}else if(t==="sore"||t==="malam"){return e+12}},meridiem:function(e,t,n){if(e<11){return"pagi"}else if(e<15){return"siang"}else if(e<19){return"sore"}else{return"malam"}},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e){if(e%100===11){return true}else if(e%10===1){return false}return true}function n(e,n,r,i){var a=e+" ";switch(r){case"s":return n||i?"nokkrar sekndur":"nokkrum sekndum";case"m":return n?"mnta":"mntu";case"mm":if(t(e)){return a+(n||i?"mntur":"mntum")}else if(n){return a+"mnta"}return a+"mntu";case"hh":if(t(e)){return a+(n||i?"klukkustundir":"klukkustundum")}return a+"klukkustund";case"d":if(n){return"dagur"}return i?"dag":"degi";case"dd":if(t(e)){if(n){return a+"dagar"}return a+(i?"daga":"dgum")}else if(n){return a+"dagur"}return a+(i?"dag":"degi");case"M":if(n){return"mnuur"}return i?"mnu":"mnui";case"MM":if(t(e)){if(n){return a+"mnuir"}return a+(i?"mnui":"mnuum")}else if(n){return a+"mnuur"}return a+(i?"mnu":"mnui");case"y":return n||i?"r":"ri";case"yy":if(t(e)){return a+(n||i?"r":"rum")}return a+(n||i?"r":"ri")}}var r=e.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"Do_Lu_Ma_Me_Gi_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ja",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahm",LTS:"Ahms",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhm",LLLL:"YYYYMDAhm dddd"},meridiemParse:/|/i,isPM:function(e){return e===""},meridiem:function(e,t,n){if(e<12){return""}else{return""}},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},ordinalParse:/\d{1,2}/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){if(e===12){
e=0}if(t==="enjing"){return e}else if(t==="siyang"){return e>=11?e:e+12}else if(t==="sonten"||t==="ndalu"){return e+12}},meridiem:function(e,t,n){if(e<11){return"enjing"}else if(e<15){return"siyang"}else if(e<19){return"sonten"}else{return"ndalu"}},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ka",{months:{standalone:"___________".split("_"),format:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(e){return/(|||)/.test(e)?e.replace(/$/,""):e+""},past:function(e){if(/(||||)/.test(e)){return e.replace(/(|)$/," ")}if(//.test(e)){return e.replace(/$/," ")}},s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(e){if(e===0){return e}if(e===1){return e+"-"}if(e<20||e<=100&&e%20===0||e%100===0){return"-"+e}return e+"-"},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};var n=e.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-(|)/,ordinal:function(e){var n=e%10,r=e>=100?100:null;return e+(t[e]||t[n]||t[r])},week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h m",LTS:"A h m s",L:"YYYY.MM.DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h m",LLLL:"YYYY MMMM D dddd A h m"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d",m:"",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|/,isPM:function(e){return e===""},meridiem:function(e,t,n){return e<12?"":""}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};var n=e.defineLocale("ky",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-(|||)/,ordinal:function(e){var n=e%10,r=e>=100?100:null;return e+(t[e]||t[n]||t[r])},week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n,r){var i={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?i[n][0]:i[n][1]}function n(e){var t=e.substr(0,e.indexOf(" "));if(i(t)){return"a "+e}return"an "+e}function r(e){var t=e.substr(0,e.indexOf(" "));if(i(t)){return"viru "+e}return"virun "+e}function i(e){e=parseInt(e,10);if(isNaN(e)){return false}if(e<0){return true}else if(e<10){if(4<=e&&e<=7){return true}return false}else if(e<100){var t=e%10,n=e/10;if(t===0){return i(n)}return i(t)}else if(e<1e4){while(e>=10){e=e/10}return i(e)}else{e=e/1e3;return i(e)}}var a=e.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:true,weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:n,past:r,s:"e puer Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Mint",y:t,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return a})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return e===""},meridiem:function(e,t,n){if(e<12){return""}else{return""}},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},ordinalParse:/()\d{1,2}/,ordinal:function(e){return""+e}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"};function n(e,t,n,r){if(t){return"kelios sekunds"}else{return r?"keli sekundi":"kelias sekundes"}}function r(e,t,n,r){return t?a(n)[0]:r?a(n)[1]:a(n)[2]}function i(e){return e%10===0||e>10&&e<20}function a(e){return t[e].split("_")}function s(e,t,n,s){var o=e+" ";if(e===1){return o+r(e,t,n[0],s)}else if(t){return o+(i(e)?a(n)[1]:a(n)[0])}else{if(s){return o+a(n)[1]}else{return o+(i(e)?a(n)[1]:a(n)[2])}}}var o=e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?|MMMM?(\[[^\[\]]*\]|\s+)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:n,m:r,mm:s,h:r,hh:s,d:r,dd:s,M:r,MM:s,y:r,yy:s},ordinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}});return o})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(e,t,n){if(n){return t%10===1&&t%100!==11?e[2]:e[3]}else{return t%10===1&&t%100!==11?e[0]:e[1]}}function r(e,r,i){return e+" "+n(t[i],e,r)}function i(e,r,i){return n(t[i],e,r)}function a(e,t){return t?"daas sekundes":"dam sekundm"}var s=e.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:a,m:i,mm:r,h:i,hh:r,d:i,dd:r,M:i,MM:r,y:i,yy:r},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return s})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={words:{m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return e===1?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];if(r.length===1){return n?i[0]:i[1]}else{return e+" "+t.correctGrammaticalCase(e,i)}}};var n=e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:true,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){var e=["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"];return e[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mjesec",MM:t.translate,y:"godinu",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;if(e===0){return e+"-"}else if(n===0){return e+"-"}else if(n>10&&n<20){return e+"-"}else if(t===1){return e+"-"}else if(t===2){return e+"-"}else if(t===7||t===8){return e+"-"}else{return e+"-"}},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,meridiemHour:function(e,t){if(e===12){e=0}if(t===""&&e>=4||t===" "||t===""){return e+12}else{return e}},meridiem:function(e,t,n){if(e<4){return""}else if(e<12){return""}else if(e<17){return" "}else if(e<20){return""}else{return""}}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function r(e,t,n,r){var i="";if(t){switch(n){case"s":i=" ";break;case"m":i=" ";break;case"mm":i="%d ";break;case"h":i=" ";break;case"hh":i="%d ";break;case"d":i=" ";break;case"dd":i="%d ";break;case"M":i=" ";break;case"MM":i="%d ";break;case"y":i=" ";break;case"yy":i="%d ";break}}else{switch(n){case"s":i=" ";break;case"m":i=" ";break;case"mm":i="%d ";break;case"h":i=" ";break;case"hh":i="%d ";break;case"d":i=" ";break;case"dd":i="%d ";break;case"M":i=" ";break;case"MM":i="%d ";break;case"y":i=" ";break;case"yy":i="%d ";break}}return i.replace(/%d/i,e)}var i=e.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""){return e<4?e:e+12}else if(t===""){return e}else if(t===""){return e>=10?e:e+12}else if(t===""){return e+12}},meridiem:function(e,t,n){if(e<4){return""}else if(e<10){return""}else if(e<17){return""}else if(e<20){return""}else{return""}},week:{dow:0,doy:6}});return i})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){if(e===12){e=0}if(t==="pagi"){return e}else if(t==="tengahari"){return e>=11?e:e+12}else if(t==="petang"||t==="malam"){return e+12}},meridiem:function(e,t,n){if(e<11){return"pagi"}else if(e<15){return"tengahari"}else if(e<19){return"petang"}else{return"malam"}},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){if(e===12){e=0}if(t==="pagi"){return e}else if(t==="tengahari"){return e>=11?e:e+12}else if(t==="petang"||t==="malam"){return e+12}},meridiem:function(e,t,n){if(e<11){return"pagi"}else if(e<15){return"tengahari"}else if(e<19){return"petang"}else{return"malam"}},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var r=e.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},week:{dow:1,doy:4}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:true,weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var r=e.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""){return e<4?e:e+12}else if(t===""){return e}else if(t===""){return e>=10?e:e+12}else if(t===""){return e+12}},meridiem:function(e,t,n){if(e<3){return""}else if(e<12){return""}else if(e<16){return""}else if(e<20){return""}else{return""}},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");var r=e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,r){if(/-MMM-/.test(r)){return n[e.month()]}else{return t[e.month()]}},monthsParseExact:true,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(e===1||e===8||e>=20?"ste":"de")},week:{dow:1,doy:4}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var r=e.defineLocale("pa-in",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),
weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""){return e<4?e:e+12}else if(t===""){return e}else if(t===""){return e>=10?e:e+12}else if(t===""){return e+12}},meridiem:function(e,t,n){if(e<4){return""}else if(e<10){return""}else if(e<17){return""}else if(e<20){return""}else{return""}},week:{dow:0,doy:6}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");function r(e){return e%10<5&&e%10>1&&~~(e/10)%10!==1}function i(e,t,n){var i=e+" ";switch(n){case"m":return t?"minuta":"minut";case"mm":return i+(r(e)?"minuty":"minut");case"h":return t?"godzina":"godzin";case"hh":return i+(r(e)?"godziny":"godzin");case"MM":return i+(r(e)?"miesice":"miesicy");case"yy":return i+(r(e)?"lata":"lat")}}var a=e.defineLocale("pl",{months:function(e,r){if(r===""){return"("+n[e.month()]+"|"+t[e.month()]+")"}else if(/D MMMM/.test(r)){return n[e.month()]}else{return t[e.month()]}},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"nie_pon_wt_r_czw_pt_sb".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:i,mm:i,h:i,hh:i,d:"1 dzie",dd:"%d dni",M:"miesic",MM:i,y:"rok",yy:i},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return a})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("pt",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Tera-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Dom_2_3_4_5_6_Sb".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return this.day()===0||this.day()===6?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Dom_2_3_4_5_6_Sb".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return this.day()===0||this.day()===6?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrs",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d"});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n){var r={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},i=" ";if(e%100>=20||e>=100&&e%100===0){i=" de "}return e+i+r[n]}var n=e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:true,weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",m:"un minut",mm:t,h:"o or",hh:t,d:"o zi",dd:t,M:"o lun",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){var i={mm:n?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"};if(r==="m"){return n?"":""}else{return e+" "+t(i[r],+e)}}var r=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];var i=e.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:r,longMonthsParse:r,shortMonthsParse:r,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(e){if(e.week()!==this.week()){switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}}else{if(this.day()===2){return"[] dddd [] LT"}else{return"[] dddd [] LT"}}},lastWeek:function(e){if(e.week()!==this.week()){switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}}else{if(this.day()===2){return"[] dddd [] LT"}else{return"[] dddd [] LT"}}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:"",hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/i,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){if(e<4){return""}else if(e<12){return""}else if(e<17){return""}else{return""}},ordinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-";case"D":return e+"-";case"w":case"W":return e+"-";default:return e}},week:{dow:1,doy:7}});return i})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},ordinalParse:/\d{1,2} /,ordinal:function(e){return e+" "},meridiemParse:/ | |.|../,isPM:function(e){return e===".."||e===" "},meridiem:function(e,t,n){if(e>11){return n?"..":" "}else{return n?"..":" "}}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),n="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");function r(e){return e>1&&e<5}function i(e,t,n,i){var a=e+" ";switch(n){case"s":return t||i?"pr seknd":"pr sekundami";case"m":return t?"minta":i?"mintu":"mintou";case"mm":if(t||i){return a+(r(e)?"minty":"mint")}else{return a+"mintami"}break;case"h":return t?"hodina":i?"hodinu":"hodinou";case"hh":if(t||i){return a+(r(e)?"hodiny":"hodn")}else{return a+"hodinami"}break;case"d":return t||i?"de":"dom";case"dd":if(t||i){return a+(r(e)?"dni":"dn")}else{return a+"dami"}break;case"M":return t||i?"mesiac":"mesiacom";case"MM":if(t||i){return a+(r(e)?"mesiace":"mesiacov")}else{return a+"mesiacmi"}break;case"y":return t||i?"rok":"rokom";case"yy":if(t||i){return a+(r(e)?"roky":"rokov")}else{return a+"rokmi"}break}}var a=e.defineLocale("sk",{months:t,monthsShort:n,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return a})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t,n,r){var i=e+" ";switch(n){case"s":return t||r?"nekaj sekund":"nekaj sekundami";case"m":return t?"ena minuta":"eno minuto";case"mm":if(e===1){i+=t?"minuta":"minuto"}else if(e===2){i+=t||r?"minuti":"minutama"}else if(e<5){i+=t||r?"minute":"minutami"}else{i+=t||r?"minut":"minutami"}return i;case"h":return t?"ena ura":"eno uro";case"hh":if(e===1){i+=t?"ura":"uro"}else if(e===2){i+=t||r?"uri":"urama"}else if(e<5){i+=t||r?"ure":"urami"}else{i+=t||r?"ur":"urami"}return i;case"d":return t||r?"en dan":"enim dnem";case"dd":if(e===1){i+=t||r?"dan":"dnem"}else if(e===2){i+=t||r?"dni":"dnevoma"}else{i+=t||r?"dni":"dnevi"}return i;case"M":return t||r?"en mesec":"enim mesecem";case"MM":if(e===1){i+=t||r?"mesec":"mesecem"}else if(e===2){i+=t||r?"meseca":"mesecema"}else if(e<5){i+=t||r?"mesece":"meseci"}else{i+=t||r?"mesecev":"meseci"}return i;case"y":return t||r?"eno leto":"enim letom";case"yy":if(e===1){i+=t||r?"leto":"letom"}else if(e===2){i+=t||r?"leti":"letoma"}else if(e<5){i+=t||r?"leta":"leti"}else{i+=t||r?"let":"leti"}return i}}var n=e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:true,weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),weekdaysParseExact:true,meridiemParse:/PD|MD/,isPM:function(e){return e.charAt(0)==="M"},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return e===1?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];if(r.length===1){return n?i[0]:i[1]}else{return e+" "+t.correctGrammaticalCase(e,i)}}};var n=e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:true,weekdays:"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){var e=["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"];return e[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mesec",MM:t.translate,y:"godinu",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={words:{m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(e,t){return e===1?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];if(r.length===1){return n?i[0]:i[1]}else{return e+" "+t.correctGrammaticalCase(e,i)}}};var n=e.defineLocale("sr-cyrl",{months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){var e=["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"];return e[this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"",dd:t.translate,M:"",MM:t.translate,y:"",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,n){if(e<11){return"ekuseni"}else if(e<15){return"emini"}else if(e<19){return"entsambama"}else{return"ebusuku"}},meridiemHour:function(e,t){if(e===12){e=0}if(t==="ekuseni"){return e}else if(t==="emini"){return e>=11?e:e+12}else if(t==="entsambama"||t==="ebusuku"){if(e===0){return 0}return e+12}},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"e":t===1?"a":t===2?"a":t===3?"e":"e";return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var r=e.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:function(e){return e+""},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||||/,meridiem:function(e,t,n){if(e<2){return" "}else if(e<6){return" "}else if(e<10){return" "}else if(e<14){return" "}else if(e<18){return" "}else if(e<22){return" "}else{return" "}},meridiemHour:function(e,t){if(e===12){e=0}if(t===""){return e<2?e:e+12}else if(t===""||t===""){return e}else if(t===""){return e>=10?e:e+12}else{return e+12}},week:{dow:0,doy:6}});return r})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""){return e<4?e:e+12}else if(t===""){return e}else if(t===""){return e>=10?e:e+12}else if(t===""){return e+12}},meridiem:function(e,t,n){if(e<4){return""}else if(e<10){return""}else if(e<17){return""}else if(e<20){return""}else{return""}},week:{dow:0,doy:6}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("th",{months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H  m ",LTS:"H  m  s ",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H  m ",LLLL:"dddd D MMMM YYYY  H  m "},meridiemParse:/|/,isPM:function(e){return e===""},meridiem:function(e,t,n){if(e<12){return""}else{return""}},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",
dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t="pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(e){var t=e;t=e.indexOf("jaj")!==-1?t.slice(0,-3)+"leS":e.indexOf("jar")!==-1?t.slice(0,-3)+"waQ":e.indexOf("DIS")!==-1?t.slice(0,-3)+"nem":t+" pIq";return t}function r(e){var t=e;t=e.indexOf("jaj")!==-1?t.slice(0,-3)+"Hu":e.indexOf("jar")!==-1?t.slice(0,-3)+"wen":e.indexOf("DIS")!==-1?t.slice(0,-3)+"ben":t+" ret";return t}function i(e,t,n,r){var i=a(e);switch(n){case"mm":return i+" tup";case"hh":return i+" rep";case"dd":return i+" jaj";case"MM":return i+" jar";case"yy":return i+" DIS"}}function a(e){var n=Math.floor(e%1e3/100),r=Math.floor(e%100/10),i=e%10,a="";if(n>0){a+=t[n]+"vatlh"}if(r>0){a+=(a!==""?" ":"")+t[r]+"maH"}if(i>0){a+=(a!==""?" ":"")+t[i]}return a===""?"pagh":a}var s=e.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),monthsParseExact:true,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:n,past:r,s:"puS lup",m:"wa tup",mm:i,h:"wa rep",hh:i,d:"wa jaj",dd:i,M:"wa jar",MM:i,y:"wa DIS",yy:i},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return s})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};var n=e.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinalParse:/\d{1,2}'(inci|nci|nc|nc|uncu|nc)/,ordinal:function(e){if(e===0){return e+"'nc"}var n=e%10,r=e%100-n,i=e>=100?100:null;return e+(t[n]||t[r]||t[i])},week:{dow:1,doy:7}});return n})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,n){if(e>11){return n?"d'o":"D'O"}else{return n?"d'a":"D'A"}},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});function n(e,t,n,r){var i={s:["viensas secunds","'iensas secunds"],m:["'n mut","'iens mut"],mm:[e+" muts",""+e+" muts"],h:["'n ora","'iensa ora"],hh:[e+" oras",""+e+" oras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",""+e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",""+e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",""+e+" ars"]};return r?i[n][0]:t?i[n][0]:i[n][1]}return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";function t(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){var i={mm:n?"__":"__",hh:n?"__":"__",dd:"__",MM:"__",yy:"__"};if(r==="m"){return n?"":""}else if(r==="h"){return n?"":""}else{return e+" "+t(i[r],+e)}}function r(e,t){var n={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")},r=/(\[[]\]) ?dddd/.test(t)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(t)?"genitive":"nominative";return n[r][e.day()]}function i(e){return function(){return e+""+(this.hours()===11?"":"")+"] LT"}}var a=e.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:r,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:i("[ "),nextDay:i("[ "),lastDay:i("[ "),nextWeek:i("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return i("[] dddd [").call(this);case 1:case 2:case 4:return i("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:"",hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){if(e<4){return""}else if(e<12){return""}else if(e<17){return""}else{return""}},ordinalParse:/\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}});return a})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:true,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:true,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,n){if(e<12){return n?"sa":"SA"}else{return n?"ch":"CH"}},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},ordinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("x-pseudo",{months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),monthsParseExact:true,weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~d~ t] LT",nextDay:"[T~m~rr~w t] LT",nextWeek:"dddd [t] LT",lastDay:"[~st~rd~ t] LT",lastWeek:"[L~st] dddd [t] LT",sameElse:"L"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"},ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYY-MM-DD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYY-MM-DD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"},meridiemParse:/|||||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""||t===""||t===""){return e}else if(t===""||t===""){return e+12}else{return e>=11?e:e+12}},meridiem:function(e,t,n){var r=e*100+t;if(r<600){return""}else if(r<900){return""}else if(r<1130){return""}else if(r<1230){return""}else if(r<1800){return""}else{return""}},calendar:{sameDay:function(){return this.minutes()===0?"[]Ah[]":"[]LT"},nextDay:function(){return this.minutes()===0?"[]Ah[]":"[]LT"},lastDay:function(){return this.minutes()===0?"[]Ah[]":"[]LT"},nextWeek:function(){var t,n;t=e().startOf("week");n=this.diff(t,"days")>=7?"[]":"[]";return this.minutes()===0?n+"dddAh":n+"dddAhmm"},lastWeek:function(){var t,n;t=e().startOf("week");n=this.unix()<t.unix()?"[]":"[]";return this.minutes()===0?n+"dddAh":n+"dddAhmm"},sameElse:"LL"},ordinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}});return t})},function(e,t,n){(function(e,t){true?t(n(56)):typeof define==="function"&&define.amd?define(["../moment"],t):t(e.moment)})(this,function(e){"use strict";var t=e.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"},meridiemParse:/|||||/,meridiemHour:function(e,t){if(e===12){e=0}if(t===""||t===""||t===""){return e}else if(t===""){return e>=11?e:e+12}else if(t===""||t===""){return e+12}},meridiem:function(e,t,n){var r=e*100+t;if(r<600){return""}else if(r<900){return""}else if(r<1130){return""}else if(r<1230){return""}else if(r<1800){return""}else{return""}},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}});return t})},function(e,t,n){var r,i;(function(n,a){(function(){var s={};var o,l;o=this;if(o!=null){l=o.async}s.noConflict=function(){o.async=l;return s};function u(e){var t=false;return function(){if(t)throw new Error("Callback was already called.");t=true;e.apply(o,arguments)}}var c=Object.prototype.toString;var f=Array.isArray||function(e){return c.call(e)==="[object Array]"};var d=function(e,t){if(e.forEach){return e.forEach(t)}for(var n=0;n<e.length;n+=1){t(e[n],n,e)}};var h=function(e,t){if(e.map){return e.map(t)}var n=[];d(e,function(e,r,i){n.push(t(e,r,i))});return n};var p=function(e,t,n){if(e.reduce){return e.reduce(t,n)}d(e,function(e,r,i){n=t(n,e,r,i)});return n};var m=function(e){if(Object.keys){return Object.keys(e)}var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(n)}}return t};if(typeof n==="undefined"||!n.nextTick){if(typeof a==="function"){s.nextTick=function(e){a(e)};s.setImmediate=s.nextTick}else{s.nextTick=function(e){setTimeout(e,0)};s.setImmediate=s.nextTick}}else{s.nextTick=n.nextTick;if(typeof a!=="undefined"){s.setImmediate=function(e){a(e)}}else{s.setImmediate=s.nextTick}}s.each=function(e,t,n){n=n||function(){};if(!e.length){return n()}var r=0;d(e,function(e){t(e,u(i))});function i(t){if(t){n(t);n=function(){}}else{r+=1;if(r>=e.length){n()}}}};s.forEach=s.each;s.eachSeries=function(e,t,n){n=n||function(){};if(!e.length){return n()}var r=0;var i=function(){t(e[r],function(t){if(t){n(t);n=function(){}}else{r+=1;if(r>=e.length){n()}else{i()}}})};i()};s.forEachSeries=s.eachSeries;s.eachLimit=function(e,t,n,r){var i=g(t);i.apply(null,[e,n,r])};s.forEachLimit=s.eachLimit;var g=function(e){return function(t,n,r){r=r||function(){};if(!t.length||e<=0){return r()}var i=0;var a=0;var s=0;(function o(){if(i>=t.length){return r()}while(s<e&&a<t.length){a+=1;s+=1;n(t[a-1],function(e){if(e){r(e);r=function(){}}else{i+=1;s-=1;if(i>=t.length){r()}else{o()}}})}})()}};var _=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.each].concat(t))}};var v=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[g(e)].concat(n))}};var y=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.eachSeries].concat(t))}};var b=function(e,t,n,r){t=h(t,function(e,t){return{index:t,value:e}});if(!r){e(t,function(e,t){n(e.value,function(e){t(e)})})}else{var i=[];e(t,function(e,t){n(e.value,function(n,r){i[e.index]=r;t(n)})},function(e){r(e,i)})}};s.map=_(b);s.mapSeries=y(b);s.mapLimit=function(e,t,n,r){return M(t)(e,n,r)};var M=function(e){return v(e,b)};s.reduce=function(e,t,n,r){s.eachSeries(e,function(e,r){n(t,e,function(e,n){t=n;r(e)})},function(e){r(e,t)})};s.inject=s.reduce;s.foldl=s.reduce;s.reduceRight=function(e,t,n,r){var i=h(e,function(e){return e}).reverse();s.reduce(i,t,n,r)};s.foldr=s.reduceRight;var x=function(e,t,n,r){var i=[];t=h(t,function(e,t){return{index:t,value:e}});e(t,function(e,t){n(e.value,function(n){if(n){i.push(e)}t()})},function(e){r(h(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.filter=_(x);s.filterSeries=y(x);s.select=s.filter;s.selectSeries=s.filterSeries;var w=function(e,t,n,r){var i=[];t=h(t,function(e,t){return{index:t,value:e}});e(t,function(e,t){n(e.value,function(n){if(!n){i.push(e)}t()})},function(e){r(h(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.reject=_(w);s.rejectSeries=y(w);var S=function(e,t,n,r){e(t,function(e,t){n(e,function(n){if(n){r(e);r=function(){}}else{t()}})},function(e){r()})};s.detect=_(S);s.detectSeries=y(S);s.some=function(e,t,n){s.each(e,function(e,r){t(e,function(e){if(e){n(true);n=function(){}}r()})},function(e){n(false)})};s.any=s.some;s.every=function(e,t,n){s.each(e,function(e,r){t(e,function(e){if(!e){n(false);n=function(){}}r()})},function(e){n(true)})};s.all=s.every;s.sortBy=function(e,t,n){s.map(e,function(e,n){t(e,function(t,r){if(t){n(t)}else{n(null,{value:e,criteria:r})}})},function(e,t){if(e){return n(e)}else{var r=function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0};n(null,h(t.sort(r),function(e){return e.value}))}})};s.auto=function(e,t){t=t||function(){};var n=m(e);var r=n.length;if(!r){return t()}var i={};var a=[];var o=function(e){a.unshift(e)};var l=function(e){for(var t=0;t<a.length;t+=1){if(a[t]===e){a.splice(t,1);return}}};var u=function(){r--;d(a.slice(0),function(e){e()})};o(function(){if(!r){var e=t;t=function(){};e(null,i)}});d(n,function(n){var r=f(e[n])?e[n]:[e[n]];var a=function(e){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1){r=r[0]}if(e){var a={};d(m(i),function(e){a[e]=i[e]});a[n]=r;t(e,a);t=function(){}}else{i[n]=r;s.setImmediate(u)}};var c=r.slice(0,Math.abs(r.length-1))||[];var h=function(){return p(c,function(e,t){return e&&i.hasOwnProperty(t)},true)&&!i.hasOwnProperty(n)};if(h()){r[r.length-1](a,i)}else{var g=function(){if(h()){l(g);r[r.length-1](a,i)}};o(g)}})};s.retry=function(e,t,n){var r=5;var i=[];if(typeof e==="function"){n=t;t=e;e=r}e=parseInt(e,10)||r;var a=function(r,a){var o=function(e,t){return function(n){e(function(e,r){n(!e||t,{err:e,result:r})},a)}};while(e){i.push(o(t,!(e-=1)))}s.series(i,function(e,t){t=t[t.length-1];(r||n)(t.err,t.result)})};return n?a():a};s.waterfall=function(e,t){t=t||function(){};if(!f(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length){return t()}var r=function(e){return function(n){if(n){t.apply(null,arguments);t=function(){}}else{var i=Array.prototype.slice.call(arguments,1);var a=e.next();if(a){i.push(r(a))}else{i.push(t)}s.setImmediate(function(){e.apply(null,i)})}}};r(s.iterator(e))()};var k=function(e,t,n){n=n||function(){};if(f(t)){e.map(t,function(e,t){if(e){e(function(e){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1){n=n[0]}t.call(null,e,n)})}},n)}else{var r={};e.each(m(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1){i=i[0]}r[e]=i;n(t)})},function(e){n(e,r)})}};s.parallel=function(e,t){k({map:s.map,each:s.each},e,t)};s.parallelLimit=function(e,t,n){k({map:M(t),each:g(t)},e,n)};s.series=function(e,t){t=t||function(){};if(f(e)){s.mapSeries(e,function(e,t){if(e){e(function(e){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1){n=n[0]}t.call(null,e,n)})}},t)}else{var n={};s.eachSeries(m(e),function(t,r){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1){i=i[0]}n[t]=i;r(e)})},function(e){t(e,n)})}};s.iterator=function(e){var t=function(n){var r=function(){if(e.length){e[n].apply(null,arguments)}return r.next()};r.next=function(){return n<e.length-1?t(n+1):null};return r};return t(0)};s.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var L=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]);t(e)})},function(e){r(e,i)})};s.concat=_(L);s.concatSeries=y(L);s.whilst=function(e,t,n){if(e()){t(function(r){if(r){return n(r)}s.whilst(e,t,n)})}else{n()}};s.doWhilst=function(e,t,n){e(function(r){if(r){return n(r)}var i=Array.prototype.slice.call(arguments,1);if(t.apply(null,i)){s.doWhilst(e,t,n)}else{n()}})};s.until=function(e,t,n){if(!e()){t(function(r){if(r){return n(r)}s.until(e,t,n)})}else{n()}};s.doUntil=function(e,t,n){e(function(r){if(r){return n(r)}var i=Array.prototype.slice.call(arguments,1);if(!t.apply(null,i)){s.doUntil(e,t,n)}else{n()}})};s.queue=function(e,t){if(t===undefined){t=1}function n(e,t,n,r){if(!e.started){e.started=true}if(!f(t)){t=[t]}if(t.length==0){return s.setImmediate(function(){if(e.drain){e.drain()}})}d(t,function(t){var i={data:t,callback:typeof r==="function"?r:null};if(n){e.tasks.unshift(i)}else{e.tasks.push(i)}if(e.saturated&&e.tasks.length===e.concurrency){e.saturated()}s.setImmediate(e.process)})}var r=0;var i={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:false,paused:false,push:function(e,t){n(i,e,false,t)},kill:function(){i.drain=null;i.tasks=[]},unshift:function(e,t){n(i,e,true,t)},process:function(){if(!i.paused&&r<i.concurrency&&i.tasks.length){var t=i.tasks.shift();if(i.empty&&i.tasks.length===0){i.empty()}r+=1;var n=function(){r-=1;if(t.callback){t.callback.apply(t,arguments)}if(i.drain&&i.tasks.length+r===0){i.drain()}i.process()};var a=u(n);e(t.data,a)}},length:function(){return i.tasks.length},running:function(){return r},idle:function(){return i.tasks.length+r===0},pause:function(){if(i.paused===true){return}i.paused=true;i.process()},resume:function(){if(i.paused===false){return}i.paused=false;i.process()}};return i};s.priorityQueue=function(e,t){function n(e,t){return e.priority-t.priority}function r(e,t,n){var r=-1,i=e.length-1;while(r<i){var a=r+(i-r+1>>>1);if(n(t,e[a])>=0){r=a}else{i=a-1}}return r}function i(e,t,i,a){if(!e.started){e.started=true}if(!f(t)){t=[t]}if(t.length==0){return s.setImmediate(function(){if(e.drain){e.drain()}})}d(t,function(t){var o={data:t,priority:i,callback:typeof a==="function"?a:null};e.tasks.splice(r(e.tasks,o,n)+1,0,o);if(e.saturated&&e.tasks.length===e.concurrency){e.saturated()}s.setImmediate(e.process)})}var a=s.queue(e,t);a.push=function(e,t,n){i(a,e,t,n)};delete a.unshift;return a};s.cargo=function(e,t){var n=false,r=[];var i={tasks:r,payload:t,saturated:null,empty:null,drain:null,drained:true,push:function(e,n){if(!f(e)){e=[e]}d(e,function(e){r.push({data:e,callback:typeof n==="function"?n:null});i.drained=false;if(i.saturated&&r.length===t){i.saturated()}});s.setImmediate(i.process)},process:function a(){if(n)return;if(r.length===0){if(i.drain&&!i.drained)i.drain();i.drained=true;return}var s=typeof t==="number"?r.splice(0,t):r.splice(0,r.length);var o=h(s,function(e){return e.data});if(i.empty)i.empty();n=true;e(o,function(){n=false;var e=arguments;d(s,function(t){if(t.callback){t.callback.apply(null,e)}});a()})},length:function(){return r.length},running:function(){return n}};return i};var T=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(t){if(console.error){console.error(t)}}else if(console[e]){d(n,function(t){console[e](t)})}}}]))}};s.log=T("log");s.dir=T("dir");s.memoize=function(e,t){var n={};var r={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments);var a=i.pop();var o=t.apply(null,i);if(o in n){s.nextTick(function(){a.apply(null,n[o])})}else if(o in r){r[o].push(a)}else{r[o]=[a];e.apply(null,i.concat([function(){n[o]=arguments;var e=r[o];delete r[o];for(var t=0,i=e.length;t<i;t++){e[t].apply(null,arguments)}}]))}};i.memo=n;i.unmemoized=e;return i};s.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}};s.times=function(e,t,n){var r=[];for(var i=0;i<e;i++){r.push(i)}return s.map(r,t,n)};s.timesSeries=function(e,t,n){var r=[];for(var i=0;i<e;i++){r.push(i)}return s.mapSeries(r,t,n)};s.seq=function(){var e=arguments;return function(){var t=this;var n=Array.prototype.slice.call(arguments);var r=n.pop();s.reduce(e,n,function(e,n,r){n.apply(t,e.concat([function(){var e=arguments[0];var t=Array.prototype.slice.call(arguments,1);r(e,t)}]))},function(e,n){r.apply(t,[e].concat(n))})}};s.compose=function(){return s.seq.apply(null,Array.prototype.reverse.call(arguments))};var E=function(e,t){var n=function(){var n=this;var r=Array.prototype.slice.call(arguments);var i=r.pop();return e(t,function(e,t){e.apply(n,r.concat([t]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}else{return n}};s.applyEach=_(E);s.applyEachSeries=y(E);s.forever=function(e,t){function n(r){if(r){if(t){return t(r)}throw r}e(n)}n()};if(typeof e!=="undefined"&&e.exports){e.exports=s}else if(true){!(r=[],i=function(){return s}.apply(t,r),i!==undefined&&(e.exports=i))}else{o.async=s}})()}).call(t,n(161),n(162).setImmediate)},function(e,t){var n=e.exports={};var r;var i;(function(){try{r=setTimeout}catch(e){r=function(){throw new Error("setTimeout is not defined")}}try{i=clearTimeout}catch(e){i=function(){throw new Error("clearTimeout is not defined")}}})();var a=[];var s=false;var o;var l=-1;function u(){if(!s||!o){return}s=false;if(o.length){a=o.concat(a)}else{l=-1}if(a.length){c()}}function c(){if(s){return}var e=r.call(null,u);s=true;var t=a.length;while(t){o=a;a=[];while(++l<t){if(o){o[l].run()}}l=-1;t=a.length}o=null;s=false;i.call(null,e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}}a.push(new f(e,t));if(a.length===1&&!s){r.call(null,c,0)}};function f(e,t){this.fun=e;this.array=t}f.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function d(){}n.on=d;n.addListener=d;n.once=d;n.off=d;n.removeListener=d;n.removeAllListeners=d;n.emit=d;n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},function(e,t,n){(function(e,r){var i=n(161).nextTick;var a=Function.prototype.apply;var s=Array.prototype.slice;var o={};var l=0;t.setTimeout=function(){return new u(a.call(setTimeout,window,arguments),clearTimeout)};t.setInterval=function(){return new u(a.call(setInterval,window,arguments),clearInterval)};t.clearTimeout=t.clearInterval=function(e){e.close()};function u(e,t){this._id=e;this._clearFn=t}u.prototype.unref=u.prototype.ref=function(){};u.prototype.close=function(){this._clearFn.call(window,this._id)};t.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};t.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;if(t>=0){e._idleTimeoutId=setTimeout(function n(){if(e._onTimeout)e._onTimeout()},t)}};t.setImmediate=typeof e==="function"?e:function(e){var n=l++;var r=arguments.length<2?false:s.call(arguments,1);o[n]=true;i(function a(){if(o[n]){if(r){e.apply(null,r)}else{e.call(null)}t.clearImmediate(n)}});return n};t.clearImmediate=typeof r==="function"?r:function(e){delete o[e]}}).call(t,n(162).setImmediate,n(162).clearImmediate)},function(e,t,n){var r,i;(function(a){(function(a){var s={},o=a.document,l="localStorage",u;s.disabled=false;s.set=function(e,t){};s.get=function(e){};s.remove=function(e){};s.clear=function(){};s.transact=function(e,t,n){var r=s.get(e);if(n==null){n=t;t=null}if(typeof r=="undefined"){r=t||{}}n(r);s.set(e,r)};s.getAll=function(){};s.forEach=function(){};s.serialize=function(e){return JSON.stringify(e)};s.deserialize=function(e){if(typeof e!="string"){return undefined}try{return JSON.parse(e)}catch(t){return e||undefined}};function c(){try{return l in a&&a[l]}catch(e){return false}}if(c()){u=a[l];s.set=function(e,t){u.setItem(e,s.serialize(t));

return t};s.get=function(e){return s.deserialize(u.getItem(e))};s.remove=function(e){u.removeItem(e)};s.clear=function(){u.clear()};s.getAll=function(){var e={};s.forEach(function(t,n){e[t]=n});return e};s.forEach=function(e){for(var t=0;t<u.length;t++){var n=u.key(t);e(n,s.get(n))}}}else if(o.documentElement.addBehavior){var f,d;try{d=new ActiveXObject("htmlfile");d.open();d.write("<s"+"cript>document.w=window</s"+'cript><iframe src="/favicon.ico"></iframe>');d.close();f=d.w.frames[0].document;u=f.createElement("div")}catch(h){u=o.createElement("div");f=o.body}function p(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(u);f.appendChild(u);u.addBehavior("#default#userData");u.load(l);var n=e.apply(s,t);f.removeChild(u);return n}}var m=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function g(e){return e.replace(m,"___")}s.set=p(function(e,t,n){t=g(t);if(n===undefined){return s.remove(t)}e.setAttribute(t,s.serialize(n));e.save(l);return n});s.get=p(function(e,t){t=g(t);return s.deserialize(e.getAttribute(t))});s.remove=p(function(e,t){t=g(t);e.removeAttribute(t);e.save(l)});s.clear=p(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(l);for(var n=0,r;r=t[n];n++){e.removeAttribute(r.name)}e.save(l)});s.getAll=p(function(e){var t={};s.forEach(function(e,n){t[e]=n});return t});s.forEach=p(function(e,t){var n=e.XMLDocument.documentElement.attributes;for(var r=0,i;i=n[r];++r){var a=g(i.name);t(ret[i.name],s.deserialize(e.getAttribute(a)))}})}try{var _="__storejs__";s.set(_,_);if(s.get(_)!=_){s.disabled=true}s.remove(_)}catch(h){s.disabled=true}s.enabled=!s.disabled;if(typeof e!="undefined"&&e.exports){e.exports=s}else if(true){!(r=s,i=typeof r==="function"?r.call(t,n,t,e):r,i!==undefined&&(e.exports=i))}else{a.store=s}s.cut=s.remove;s.deserialize=function(e){if(typeof e!=="string"){return undefined}try{return JSON.parse(e)}catch(t){return undefined}};s.has=function(e){return window.localStorage.getItem(e)!==null};a.stash=s;if(s.enabled)return;u={getItem:function(e){return this[e]},setItem:function(e,t){this[e]=String(t)},removeItem:function(e){delete this[e]},clear:function(){for(var e in this){if(typeof this[e]!=="function"){delete this[e]}}}}})(this.window||a);e.exports=stash}).call(t,function(){return this}())},function(e,t){(function(){if(this.JpegMeta){throw Error("Library included multiple times")}var e={};e.parseNum=function t(e,n,r,i){var a;var s;var o=e===">";if(r===undefined)r=0;if(i===undefined)i=n.length-r;for(o?a=r:a=r+i-1;o?a<r+i:a>=r;o?a++:a--){s<<=8;s+=n.charCodeAt(a)}return s};e.parseSnum=function n(e,t,r,i){var a;var s;var o;var l=e===">";if(r===undefined)r=0;if(i===undefined)i=t.length-r;for(l?a=r:a=r+i-1;l?a<r+i:a>=r;l?a++:a--){if(o===undefined){o=(t.charCodeAt(a)&128)===128}s<<=8;s+=o?~t.charCodeAt(a)&255:t.charCodeAt(a)}if(o){s+=1;s*=-1}return s};e.Rational=function r(e,t){this.num=e;this.den=t||1;return this};e.Rational.prototype.toString=function i(){if(this.num===0){return""+this.num}if(this.den===1){return""+this.num}if(this.num===1){return this.num+" / "+this.den}return this.num/this.den};e.Rational.prototype.asFloat=function a(){return this.num/this.den};e.MetaGroup=function s(e,t){this.fieldName=e;this.description=t;this.metaProps={};return this};e.MetaGroup.prototype._addProperty=function o(t,n,r){var i=new e.MetaProp(t,n,r);this[i.fieldName]=i;this.metaProps[i.fieldName]=i};e.MetaGroup.prototype.toString=function l(){return"[MetaGroup "+this.description+"]"};e.MetaProp=function u(e,t,n){this.fieldName=e;this.description=t;this.value=n;return this};e.MetaProp.prototype.toString=function c(){return""+this.value};this.JpegMeta=e;this.JpegMeta.JpegFile=function f(t,n){var r=this._SOS;this.metaGroups={};this._binary_data=t;this.filename=n;var i=0;var a=0;var s;var o;var l;var u;var c;var f;var d;if(this._binary_data.slice(0,2)!==this._SOI_MARKER){throw new Error("Doesn't look like a JPEG file. First two bytes are "+this._binary_data.charCodeAt(0)+","+this._binary_data.charCodeAt(1)+".")}i+=2;while(i<this._binary_data.length){s=this._binary_data.charCodeAt(i++);o=this._binary_data.charCodeAt(i++);a=i;if(s!=this._DELIM){break}if(o===r){break}c=e.parseNum(">",this._binary_data,i,2);i+=c;while(i<this._binary_data.length){s=this._binary_data.charCodeAt(i++);if(s==this._DELIM){l=this._binary_data.charCodeAt(i++);if(l!=0){i-=2;break}}}u=i-a;if(this._markers[o]){f=this._markers[o][0];d=this._markers[o][1]}else{f="UNKN";d=undefined}if(d){this[d](o,a+2)}}if(this.general===undefined){throw Error("Invalid JPEG file.")}return this};this.JpegMeta.JpegFile.prototype.toString=function(){return"[JpegFile "+this.filename+" "+this.general.type+" "+this.general.pixelWidth+"x"+this.general.pixelHeight+" Depth: "+this.general.depth+"]"};this.JpegMeta.JpegFile.prototype._SOI_MARKER="";this.JpegMeta.JpegFile.prototype._DELIM=255;this.JpegMeta.JpegFile.prototype._EOI=217;this.JpegMeta.JpegFile.prototype._SOS=218;this.JpegMeta.JpegFile.prototype._sofHandler=function d(t,n){if(this.general!==undefined){throw Error("Unexpected multiple-frame image")}this._addMetaGroup("general","General");this.general._addProperty("depth","Depth",e.parseNum(">",this._binary_data,n,1));this.general._addProperty("pixelHeight","Pixel Height",e.parseNum(">",this._binary_data,n+1,2));this.general._addProperty("pixelWidth","Pixel Width",e.parseNum(">",this._binary_data,n+3,2));this.general._addProperty("type","Type",this._markers[t][2])};this.JpegMeta.JpegFile.prototype._JFIF_IDENT="JFIF\x00";this.JpegMeta.JpegFile.prototype._JFXX_IDENT="JFXX\x00";this.JpegMeta.JpegFile.prototype._EXIF_IDENT="Exif\x00";this.JpegMeta.JpegFile.prototype._types={1:["BYTE",1],2:["ASCII",1],3:["SHORT",2],4:["LONG",4],5:["RATIONAL",8],6:["SBYTE",1],7:["UNDEFINED",1],8:["SSHORT",2],9:["SLONG",4],10:["SRATIONAL",8],11:["FLOAT",4],12:["DOUBLE",8]};this.JpegMeta.JpegFile.prototype._tifftags={256:["Image width","ImageWidth"],257:["Image height","ImageLength"],258:["Number of bits per component","BitsPerSample"],259:["Compression scheme","Compression",{1:"uncompressed",6:"JPEG compression"}],262:["Pixel composition","PhotmetricInerpretation",{2:"RGB",6:"YCbCr"}],274:["Orientation of image","Orientation",{1:"Normal",2:"Reverse?",3:"Upside-down",4:"Upside-down Reverse",5:"90 degree CW",6:"90 degree CW reverse",7:"90 degree CCW",8:"90 degree CCW reverse"}],277:["Number of components","SamplesPerPixel"],284:["Image data arrangement","PlanarConfiguration",{1:"chunky format",2:"planar format"}],530:["Subsampling ratio of Y to C","YCbCrSubSampling"],531:["Y and C positioning","YCbCrPositioning",{1:"centered",2:"co-sited"}],282:["X Resolution","XResolution"],283:["Y Resolution","YResolution"],296:["Resolution Unit","ResolutionUnit",{2:"inches",3:"centimeters"}],273:["Image data location","StripOffsets"],278:["Number of rows per strip","RowsPerStrip"],279:["Bytes per compressed strip","StripByteCounts"],513:["Offset to JPEG SOI","JPEGInterchangeFormat"],514:["Bytes of JPEG Data","JPEGInterchangeFormatLength"],301:["Transfer function","TransferFunction"],318:["White point chromaticity","WhitePoint"],319:["Chromaticities of primaries","PrimaryChromaticities"],529:["Color space transformation matrix coefficients","YCbCrCoefficients"],532:["Pair of black and white reference values","ReferenceBlackWhite"],306:["Date and time","DateTime"],270:["Image title","ImageDescription"],271:["Make","Make"],272:["Model","Model"],305:["Software","Software"],315:["Person who created the image","Artist"],316:["Host Computer","HostComputer"],33432:["Copyright holder","Copyright"],34665:["Exif tag","ExifIfdPointer"],34853:["GPS tag","GPSInfoIfdPointer"]};this.JpegMeta.JpegFile.prototype._exiftags={36864:["Exif Version","ExifVersion"],40960:["FlashPix Version","FlashpixVersion"],40961:["Color Space","ColorSpace"],37121:["Meaning of each component","ComponentsConfiguration"],37122:["Compressed Bits Per Pixel","CompressedBitsPerPixel"],40962:["Pixel X Dimension","PixelXDimension"],40963:["Pixel Y Dimension","PixelYDimension"],37500:["Manufacturer notes","MakerNote"],37510:["User comments","UserComment"],40964:["Related audio file","RelatedSoundFile"],36867:["Date Time Original","DateTimeOriginal"],36868:["Date Time Digitized","DateTimeDigitized"],37520:["DateTime subseconds","SubSecTime"],37521:["DateTimeOriginal subseconds","SubSecTimeOriginal"],37522:["DateTimeDigitized subseconds","SubSecTimeDigitized"],33434:["Exposure time","ExposureTime"],33437:["FNumber","FNumber"],34850:["Exposure program","ExposureProgram"],34852:["Spectral sensitivity","SpectralSensitivity"],34855:["ISO Speed Ratings","ISOSpeedRatings"],34856:["Optoelectric coefficient","OECF"],37377:["Shutter Speed","ShutterSpeedValue"],37378:["Aperture Value","ApertureValue"],37379:["Brightness","BrightnessValue"],37380:["Exposure Bias Value","ExposureBiasValue"],37381:["Max Aperture Value","MaxApertureValue"],37382:["Subject Distance","SubjectDistance"],37383:["Metering Mode","MeteringMode"],37384:["Light Source","LightSource"],37385:["Flash","Flash"],37386:["Focal Length","FocalLength"],37396:["Subject Area","SubjectArea"],41483:["Flash Energy","FlashEnergy"],41484:["Spatial Frequency Response","SpatialFrequencyResponse"],41486:["Focal Plane X Resolution","FocalPlaneXResolution"],41487:["Focal Plane Y Resolution","FocalPlaneYResolution"],41488:["Focal Plane Resolution Unit","FocalPlaneResolutionUnit"],41492:["Subject Location","SubjectLocation"],41493:["Exposure Index","ExposureIndex"],41495:["Sensing Method","SensingMethod"],41728:["File Source","FileSource"],41729:["Scene Type","SceneType"],41730:["CFA Pattern","CFAPattern"],41985:["Custom Rendered","CustomRendered"],41986:["Exposure Mode","Exposure Mode"],41987:["White Balance","WhiteBalance"],41988:["Digital Zoom Ratio","DigitalZoomRatio"],41990:["Scene Capture Type","SceneCaptureType"],41991:["Gain Control","GainControl"],41992:["Contrast","Contrast"],41993:["Saturation","Saturation"],41994:["Sharpness","Sharpness"],41995:["Device settings description","DeviceSettingDescription"],41996:["Subject distance range","SubjectDistanceRange"],42016:["Unique image ID","ImageUniqueID"],40965:["Interoperability tag","InteroperabilityIFDPointer"]};this.JpegMeta.JpegFile.prototype._gpstags={0:["GPS tag version","GPSVersionID"],1:["North or South Latitude","GPSLatitudeRef"],2:["Latitude","GPSLatitude"],3:["East or West Longitude","GPSLongitudeRef"],4:["Longitude","GPSLongitude"],5:["Altitude reference","GPSAltitudeRef"],6:["Altitude","GPSAltitude"],7:["GPS time (atomic clock)","GPSTimeStamp"],8:["GPS satellites usedd for measurement","GPSSatellites"],9:["GPS receiver status","GPSStatus"],10:["GPS mesaurement mode","GPSMeasureMode"],11:["Measurement precision","GPSDOP"],12:["Speed unit","GPSSpeedRef"],13:["Speed of GPS receiver","GPSSpeed"],14:["Reference for direction of movement","GPSTrackRef"],15:["Direction of movement","GPSTrack"],16:["Reference for direction of image","GPSImgDirectionRef"],17:["Direction of image","GPSImgDirection"],18:["Geodetic survey data used","GPSMapDatum"],19:["Reference for latitude of destination","GPSDestLatitudeRef"],20:["Latitude of destination","GPSDestLatitude"],21:["Reference for longitude of destination","GPSDestLongitudeRef"],22:["Longitude of destination","GPSDestLongitude"],23:["Reference for bearing of destination","GPSDestBearingRef"],24:["Bearing of destination","GPSDestBearing"],25:["Reference for distance to destination","GPSDestDistanceRef"],26:["Distance to destination","GPSDestDistance"],27:["Name of GPS processing method","GPSProcessingMethod"],28:["Name of GPS area","GPSAreaInformation"],29:["GPS Date","GPSDateStamp"],30:["GPS differential correction","GPSDifferential"]};this.JpegMeta.JpegFile.prototype._markers={192:["SOF0","_sofHandler","Baseline DCT"],193:["SOF1","_sofHandler","Extended sequential DCT"],194:["SOF2","_sofHandler","Progressive DCT"],195:["SOF3","_sofHandler","Lossless (sequential)"],197:["SOF5","_sofHandler","Differential sequential DCT"],198:["SOF6","_sofHandler","Differential progressive DCT"],199:["SOF7","_sofHandler","Differential lossless (sequential)"],200:["JPG",null,"Reserved for JPEG extensions"],201:["SOF9","_sofHandler","Extended sequential DCT"],202:["SOF10","_sofHandler","Progressive DCT"],203:["SOF11","_sofHandler","Lossless (sequential)"],205:["SOF13","_sofHandler","Differential sequential DCT"],206:["SOF14","_sofHandler","Differential progressive DCT"],207:["SOF15","_sofHandler","Differential lossless (sequential)"],196:["DHT",null,"Define Huffman table(s)"],204:["DAC",null,"Define arithmetic coding conditioning(s)"],208:["RST0",null,"Restart with modulo 8 count 0"],209:["RST1",null,"Restart with modulo 8 count 1"],210:["RST2",null,"Restart with modulo 8 count 2"],211:["RST3",null,"Restart with modulo 8 count 3"],212:["RST4",null,"Restart with modulo 8 count 4"],213:["RST5",null,"Restart with modulo 8 count 5"],214:["RST6",null,"Restart with modulo 8 count 6"],215:["RST7",null,"Restart with modulo 8 count 7"],216:["SOI",null,"Start of image"],217:["EOI",null,"End of image"],218:["SOS",null,"Start of scan"],219:["DQT",null,"Define quantization table(s)"],220:["DNL",null,"Define number of lines"],221:["DRI",null,"Define restart interval"],222:["DHP",null,"Define hierarchical progression"],223:["EXP",null,"Expand reference component(s)"],224:["APP0","_app0Handler","Reserved for application segments"],225:["APP1","_app1Handler"],226:["APP2",null],227:["APP3",null],228:["APP4",null],229:["APP5",null],230:["APP6",null],231:["APP7",null],232:["APP8",null],233:["APP9",null],234:["APP10",null],235:["APP11",null],236:["APP12",null],237:["APP13",null],238:["APP14",null],239:["APP15",null],240:["JPG0",null],241:["JPG1",null],242:["JPG2",null],243:["JPG3",null],244:["JPG4",null],245:["JPG5",null],246:["JPG6",null],247:["JPG7",null],248:["JPG8",null],249:["JPG9",null],250:["JPG10",null],251:["JPG11",null],252:["JPG12",null],253:["JPG13",null],254:["COM",null],1:["JPG13",null]};this.JpegMeta.JpegFile.prototype._addMetaGroup=function h(t,n){var r=new e.MetaGroup(t,n);this[r.fieldName]=r;this.metaGroups[r.fieldName]=r;return r};this.JpegMeta.JpegFile.prototype._parseIfd=function p(t,n,r,i,a,s,o){var l=e.parseNum(t,n,r+i,2);var u,c;var f;var d;var h,p,m;var g;var _;var v;var y;var b;var M;var x;x=this._addMetaGroup(s,o);for(var u=0;u<l;u++){f=r+i+2+u*12;d=e.parseNum(t,n,f,2);p=e.parseNum(t,n,f+2,2);g=e.parseNum(t,n,f+4,4);_=e.parseNum(t,n,f+8,4);if(this._types[p]===undefined){continue}h=this._types[p][0];m=this._types[p][1];if(m*g<=4){_=f+8}else{_=r+_}if(h=="UNDEFINED"){v=n.slice(_,_+g)}else if(h=="ASCII"){v=n.slice(_,_+g);v=v.split("\x00")[0]}else{v=new Array;for(c=0;c<g;c++,_+=m){if(h=="BYTE"||h=="SHORT"||h=="LONG"){v.push(e.parseNum(t,n,_,m))}if(h=="SBYTE"||h=="SSHORT"||h=="SLONG"){v.push(e.parseSnum(t,n,_,m))}if(h=="RATIONAL"){b=e.parseNum(t,n,_,4);M=e.parseNum(t,n,_+4,4);v.push(new e.Rational(b,M))}if(h=="SRATIONAL"){b=e.parseSnum(t,n,_,4);M=e.parseSnum(t,n,_+4,4);v.push(new e.Rational(b,M))}v.push()}if(g===1){v=v[0]}}x._addProperty(a[d][1],a[d][0],v)}};this.JpegMeta.JpegFile.prototype._jfifHandler=function m(t,n){if(this.jfif!==undefined){throw Error("Multiple JFIF segments found")}this._addMetaGroup("jfif","JFIF");this.jfif._addProperty("version_major","Version Major",this._binary_data.charCodeAt(n+5));this.jfif._addProperty("version_minor","Version Minor",this._binary_data.charCodeAt(n+6));this.jfif._addProperty("version","JFIF Version",this.jfif.version_major.value+"."+this.jfif.version_minor.value);this.jfif._addProperty("units","Density Unit",this._binary_data.charCodeAt(n+7));this.jfif._addProperty("Xdensity","X density",e.parseNum(">",this._binary_data,n+8,2));this.jfif._addProperty("Ydensity","Y Density",e.parseNum(">",this._binary_data,n+10,2));this.jfif._addProperty("Xthumbnail","X Thumbnail",e.parseNum(">",this._binary_data,n+12,1));this.jfif._addProperty("Ythumbnail","Y Thumbnail",e.parseNum(">",this._binary_data,n+13,1))};this.JpegMeta.JpegFile.prototype._app0Handler=function g(e,t){var n=this._binary_data.slice(t,t+5);if(n==this._JFIF_IDENT){this._jfifHandler(e,t)}else if(n==this._JFXX_IDENT){}else{}};this.JpegMeta.JpegFile.prototype._app1Handler=function _(e,t){var n=this._binary_data.slice(t,t+5);if(n==this._EXIF_IDENT){this._exifHandler(e,t+6)}else{}};e.JpegFile.prototype._exifHandler=function v(t,n){if(this.exif!==undefined){throw new Error("Multiple JFIF segments found")}var r;var i;var a;var s,o,l;var u=this._binary_data.slice(n,n+2);if(u==="II"){r="<"}else if(u==="MM"){r=">"}else{throw new Error("Malformed TIFF meta-data. Unknown endianess: "+u)}i=e.parseNum(r,this._binary_data,n+2,2);if(i!==42){throw new Error("Malformed TIFF meta-data. Bad magic: "+i)}a=e.parseNum(r,this._binary_data,n+4,4);this._parseIfd(r,this._binary_data,n,a,this._tifftags,"tiff","TIFF");if(this.tiff.ExifIfdPointer){this._parseIfd(r,this._binary_data,n,this.tiff.ExifIfdPointer.value,this._exiftags,"exif","Exif")}if(this.tiff.GPSInfoIfdPointer){this._parseIfd(r,this._binary_data,n,this.tiff.GPSInfoIfdPointer.value,this._gpstags,"gps","GPS");if(this.gps.GPSLatitude){var c;c=this.gps.GPSLatitude.value[0].asFloat()+1/60*this.gps.GPSLatitude.value[1].asFloat()+1/3600*this.gps.GPSLatitude.value[2].asFloat();if(this.gps.GPSLatitudeRef.value==="S"){c=-c}this.gps._addProperty("latitude","Dec. Latitude",c)}if(this.gps.GPSLongitude){var f;f=this.gps.GPSLongitude.value[0].asFloat()+1/60*this.gps.GPSLongitude.value[1].asFloat()+1/3600*this.gps.GPSLongitude.value[2].asFloat();if(this.gps.GPSLongitudeRef.value==="W"){f=-f}this.gps._addProperty("longitude","Dec. Longitude",f)}}}}).call(window);e.exports=JpegMeta},function(e,t,n){var r,i;(function(){function n(e){var t=e.naturalWidth,n=e.naturalHeight;if(t*n>1024*1024){var r=document.createElement("canvas");r.width=r.height=1;var i=r.getContext("2d");i.drawImage(e,-t+1,0);return i.getImageData(0,0,1,1).data[3]===0}else{return false}}function a(e,t,n){var r=document.createElement("canvas");r.width=1;r.height=n;var i=r.getContext("2d");i.drawImage(e,0,0);var a=i.getImageData(0,0,1,n).data;var s=0;var o=n;var l=n;while(l>s){var u=a[(l-1)*4+3];if(u===0){o=l}else{s=l}l=o+s>>1}var c=l/n;return c===0?1:c}function s(e,t){var n=document.createElement("canvas");o(e,n,t);return n.toDataURL("image/jpeg",t.quality||.8)}function o(e,t,r){var i=e.naturalWidth,s=e.naturalHeight;var o=r.width,u=r.height;var c=t.getContext("2d");c.save();l(t,o,u,r.orientation);var f=n(e);if(f){i/=2;s/=2}var d=1024;var h=document.createElement("canvas");h.width=h.height=d;var p=h.getContext("2d");var m=a(e,i,s);var g=0;while(g<s){var _=g+d>s?s-g:d;var v=0;while(v<i){var y=v+d>i?i-v:d;p.clearRect(0,0,d,d);p.drawImage(e,-v,-g);var b=v*o/i<<0;var M=Math.ceil(y*o/i);var x=g*u/s/m<<0;var w=Math.ceil(_*u/s/m);c.drawImage(h,0,0,y,_,b,x,M,w);v+=d}g+=d}c.restore();h=p=null}function l(e,t,n,r){switch(r){case 5:case 6:case 7:case 8:e.width=n;e.height=t;break;default:e.width=t;e.height=n}var i=e.getContext("2d");switch(r){case 2:i.translate(t,0);i.scale(-1,1);break;case 3:i.translate(t,n);i.rotate(Math.PI);break;case 4:i.translate(0,n);i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI);i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI);i.translate(0,-n);break;case 7:i.rotate(.5*Math.PI);i.translate(t,-n);i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI);i.translate(-t,0);break;default:break}}function u(e){if(e instanceof Blob){var t=new Image;var n=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!n){throw Error("No createObjectURL function found to create blob url")}t.src=n.createObjectURL(e);e=t}if(!e.naturalWidth&&!e.naturalHeight){var r=this;e.onload=function(){var e=r.imageLoadListeners;if(e){r.imageLoadListeners=null;for(var t=0,n=e.length;t<n;t++){e[t]()}}};this.imageLoadListeners=[]}this.srcImage=e}u.prototype.render=function(e,t){if(this.imageLoadListeners){var n=this;this.imageLoadListeners.push(function(){n.render(e,t)});return}t=t||{};var r=this.srcImage.naturalWidth,i=this.srcImage.naturalHeight,a=t.width,l=t.height,u=t.maxWidth,c=t.maxHeight;if(a&&!l){l=i*a/r<<0}else if(l&&!a){a=r*l/i<<0}else{a=r;l=i}if(u&&a>u){a=u;l=i*a/r<<0}if(c&&l>c){l=c;a=r*l/i<<0}var f={width:a,height:l};for(var d in t)f[d]=t[d];var h=e.tagName.toLowerCase();if(h==="img"){e.src=s(this.srcImage,f)}else if(h==="canvas"){o(this.srcImage,e,f)}if(typeof this.onrender==="function"){this.onrender(e)}};if(true){!(r=[],i=function(){return u}.apply(t,r),i!==undefined&&(e.exports=i))}else{this.MegaPixImage=u}})()},function(e,t){function n(e){var t=this;var n=Math.round;var r=Math.floor;var i=new Array(64);var a=new Array(64);var s=new Array(64);var o=new Array(64);var l;var u;var c;var f;var d=new Array(65535);var h=new Array(65535);var p=new Array(64);var m=new Array(64);var g=[];var _=0;var v=7;var y=new Array(64);var b=new Array(64);var M=new Array(64);var x=new Array(256);var w=new Array(2048);var S;var k=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63];var L=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];var T=[0,1,2,3,4,5,6,7,8,9,10,11];var E=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125];var D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250];var A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];var Y=[0,1,2,3,4,5,6,7,8,9,10,11];var C=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119];var R=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function O(e){var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];for(var n=0;n<64;n++){var l=r((t[n]*e+50)/100);if(l<1){l=1}else if(l>255){l=255}i[k[n]]=l}var u=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(var c=0;c<64;c++){var f=r((u[c]*e+50)/100);if(f<1){f=1}else if(f>255){f=255}a[k[c]]=f}var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379];var h=0;for(var p=0;p<8;p++){for(var m=0;m<8;m++){s[h]=1/(i[k[h]]*d[p]*d[m]*8);o[h]=1/(a[k[h]]*d[p]*d[m]*8);h++}}}function P(e,t){var n=0;var r=0;var i=new Array;for(var a=1;a<=16;a++){for(var s=1;s<=e[a];s++){i[t[r]]=[];i[t[r]][0]=n;i[t[r]][1]=a;r++;n++}n*=2}return i}function I(){l=P(L,T);u=P(A,Y);c=P(E,D);f=P(C,R)}function N(){var e=1;var t=2;for(var n=1;n<=15;n++){for(var r=e;r<t;r++){h[32767+r]=n;d[32767+r]=[];d[32767+r][1]=n;d[32767+r][0]=r}for(var i=-(t-1);i<=-e;i++){h[32767+i]=n;d[32767+i]=[];d[32767+i][1]=n;d[32767+i][0]=t-1+i}e<<=1;t<<=1}}function F(){for(var e=0;e<256;e++){w[e]=19595*e;w[e+256>>0]=38470*e;w[e+512>>0]=7471*e+32768;w[e+768>>0]=-11059*e;w[e+1024>>0]=-21709*e;w[e+1280>>0]=32768*e+8421375;w[e+1536>>0]=-27439*e;w[e+1792>>0]=-5329*e}}function H(e){var t=e[0];var n=e[1]-1;while(n>=0){if(t&1<<n){_|=1<<v}n--;v--;if(v<0){if(_==255){j(255);j(0)}else{j(_)}v=7;_=0}}}function j(e){g.push(x[e])}function U(e){j(e>>8&255);j(e&255)}function B(e,t){var n,r,i,a,s,o,l,u;var c=0;var f;const d=8;const h=64;for(f=0;f<d;++f){n=e[c];r=e[c+1];i=e[c+2];a=e[c+3];s=e[c+4];o=e[c+5];l=e[c+6];u=e[c+7];var m=n+u;var g=n-u;var _=r+l;var v=r-l;var y=i+o;var b=i-o;var M=a+s;var x=a-s;var w=m+M;var S=m-M;var k=_+y;var L=_-y;e[c]=w+k;e[c+4]=w-k;var T=(L+S)*.707106781;e[c+2]=S+T;e[c+6]=S-T;w=x+b;k=b+v;L=v+g;var E=(w-L)*.382683433;var D=.5411961*w+E;var A=1.306562965*L+E;var Y=k*.707106781;var C=g+Y;var R=g-Y;e[c+5]=R+D;e[c+3]=R-D;e[c+1]=C+A;e[c+7]=C-A;c+=8}c=0;for(f=0;f<d;++f){n=e[c];r=e[c+8];i=e[c+16];a=e[c+24];s=e[c+32];o=e[c+40];l=e[c+48];u=e[c+56];var O=n+u;var P=n-u;var I=r+l;var N=r-l;var F=i+o;var H=i-o;var j=a+s;var U=a-s;var B=O+j;var z=O-j;var W=I+F;var q=I-F;e[c]=B+W;e[c+32]=B-W;var G=(q+z)*.707106781;e[c+16]=z+G;e[c+48]=z-G;B=U+H;W=H+N;q=N+P;var V=(B-q)*.382683433;var $=.5411961*B+V;var J=1.306562965*q+V;var X=W*.707106781;var Z=P+X;var K=P-X;e[c+40]=K+$;e[c+24]=K-$;e[c+8]=Z+J;e[c+56]=Z-J;c++}var Q;for(f=0;f<h;++f){Q=e[f]*t[f];p[f]=Q>0?Q+.5|0:Q-.5|0}return p}function z(){U(65504);U(16);j(74);j(70);j(73);j(70);j(0);j(1);j(1);j(0);U(1);U(1);j(0);j(0)}function W(e,t){U(65472);U(17);j(8);U(t);U(e);j(3);j(1);j(17);j(0);j(2);j(17);j(1);j(3);j(17);j(1)}function q(){U(65499);U(132);j(0);for(var e=0;e<64;e++){j(i[e])}j(1);for(var t=0;t<64;t++){j(a[t])}}function G(){U(65476);U(418);j(0);for(var e=0;e<16;e++){j(L[e+1])}for(var t=0;t<=11;t++){j(T[t])}j(16);for(var n=0;n<16;n++){j(E[n+1])}for(var r=0;r<=161;r++){j(D[r])}j(1);for(var i=0;i<16;i++){j(A[i+1])}for(var a=0;a<=11;a++){j(Y[a])}j(17);for(var s=0;s<16;s++){j(C[s+1])}for(var o=0;o<=161;o++){j(R[o])}}function V(){U(65498);U(12);j(3);j(1);j(0);j(2);j(17);j(3);j(17);j(0);j(63);j(0)}function $(e,t,n,r,i){var a=i[0];var s=i[240];var o;const l=16;const u=63;const c=64;var f=B(e,t);for(var p=0;p<c;++p){m[k[p]]=f[p]}var g=m[0]-n;n=m[0];if(g==0){H(r[0])}else{o=32767+g;H(r[h[o]]);H(d[o])}var _=63;for(;_>0&&m[_]==0;_--){}if(_==0){H(a);return n}var v=1;var y;while(v<=_){var b=v;for(;m[v]==0&&v<=_;++v){}var M=v-b;if(M>=l){y=M>>4;for(var x=1;x<=y;++x)H(s);M=M&15}o=32767+m[v];H(i[(M<<4)+h[o]]);H(d[o]);v++}if(_!=u){H(a)}return n}function J(){var e=String.fromCharCode;for(var t=0;t<256;t++){x[t]=e(t)}}this.encode=function(e,t){var n=(new Date).getTime();if(t)X(t);g=new Array;_=0;v=7;U(65496);z();q();W(e.width,e.height);G();V();var r=0;var i=0;var a=0;_=0;v=7;this.encode.displayName="_encode_";var d=e.data;var h=e.width;var p=e.height;var m=h*4;var x=h*3;var S,k=0;var L,T,E;var D,A,Y,C,R;while(k<p){S=0;while(S<m){D=m*k+S;A=D;Y=-1;C=0;for(R=0;R<64;R++){C=R>>3;Y=(R&7)*4;A=D+C*m+Y;if(k+C>=p){A-=m*(k+1+C-p)}if(S+Y>=m){A-=S+Y-m+4}L=d[A++];T=d[A++];E=d[A++];y[R]=(w[L]+w[T+256>>0]+w[E+512>>0]>>16)-128;b[R]=(w[L+768>>0]+w[T+1024>>0]+w[E+1280>>0]>>16)-128;M[R]=(w[L+1280>>0]+w[T+1536>>0]+w[E+1792>>0]>>16)-128}r=$(y,s,r,l,c);i=$(b,o,i,u,f);a=$(M,o,a,u,f);S+=32}k+=8}if(v>=0){var O=[];O[1]=v+1;O[0]=(1<<v+1)-1;H(O)}U(65497);var P="data:image/jpeg;base64,"+btoa(g.join(""));g=[];var I=(new Date).getTime()-n;return P};function X(e){if(e<=0){e=1}if(e>100){e=100}if(S==e)return;var t=0;if(e<50){t=Math.floor(5e3/e)}else{t=Math.floor(200-e*2)}O(t);S=e}function Z(){var t=(new Date).getTime();if(!e)e=50;J();I();N();F();X(e);var n=(new Date).getTime()-t}Z()}function r(e){var t=typeof e=="string"?document.getElementById(e):e;var n=document.createElement("canvas");n.width=t.width;n.height=t.height;var r=n.getContext("2d");r.drawImage(t,0,0);return r.getImageData(0,0,n.width,n.height)}e.exports=n},function(e,t,n){var r;(function(){"use strict";function i(e,t){var n;t=t||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=t.touchBoundary||10;this.layer=e;this.tapDelay=t.tapDelay||200;this.tapTimeout=t.tapTimeout||700;if(i.notNeeded(e)){return}function r(e,t){return function(){return e.apply(t,arguments)}}var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"];var o=this;for(var l=0,u=a.length;l<u;l++){o[a[l]]=r(o[a[l]],o)}if(s){e.addEventListener("mouseover",this.onMouse,true);e.addEventListener("mousedown",this.onMouse,true);e.addEventListener("mouseup",this.onMouse,true)}e.addEventListener("click",this.onClick,true);e.addEventListener("touchstart",this.onTouchStart,false);e.addEventListener("touchmove",this.onTouchMove,false);e.addEventListener("touchend",this.onTouchEnd,false);e.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;if(t==="click"){i.call(e,t,n.hijacked||n,r)}else{i.call(e,t,n,r)}};e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;if(t==="click"){i.call(e,t,n.hijacked||(n.hijacked=function(e){if(!e.propagationStopped){n(e)}}),r)}else{i.call(e,t,n,r)}}}if(typeof e.onclick==="function"){n=e.onclick;e.addEventListener("click",function(e){n(e)},false);e.onclick=null}}var a=navigator.userAgent.indexOf("Windows Phone")>=0;var s=navigator.userAgent.indexOf("Android")>0&&!a;var o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!a;var l=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent);var u=o&&/OS [6-7]_\d/.test(navigator.userAgent);var c=navigator.userAgent.indexOf("BB10")>0;i.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled){return true}break;case"input":if(o&&e.type==="file"||e.disabled){return true}break;case"label":case"iframe":case"video":return true}return/\bneedsclick\b/.test(e.className)};i.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return true;case"select":return!s;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}};i.prototype.sendClick=function(e,t){var n,r;if(document.activeElement&&document.activeElement!==e){document.activeElement.blur()}r=t.changedTouches[0];n=document.createEvent("MouseEvents");n.initMouseEvent(this.determineEventType(e),true,true,window,1,r.screenX,r.screenY,r.clientX,r.clientY,false,false,false,false,0,null);n.forwardedTouchEvent=true;e.dispatchEvent(n)};i.prototype.determineEventType=function(e){if(s&&e.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};i.prototype.focus=function(e){var t;if(o&&e.setSelectionRange&&e.type.indexOf("date")!==0&&e.type!=="time"&&e.type!=="month"){t=e.value.length;e.setSelectionRange(t,t)}else{e.focus()}};i.prototype.updateScrollParent=function(e){var t,n;t=e.fastClickScrollParent;if(!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n;e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}if(t){t.fastClickLastScrollTop=t.scrollTop}};i.prototype.getTargetElementFromEventTarget=function(e){if(e.nodeType===Node.TEXT_NODE){return e.parentNode}return e};i.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1){return true}t=this.getTargetElementFromEventTarget(e.target);n=e.targetTouches[0];if(o){r=window.getSelection();if(r.rangeCount&&!r.isCollapsed){return true}if(!l){if(n.identifier&&n.identifier===this.lastTouchIdentifier){e.preventDefault();return false}this.lastTouchIdentifier=n.identifier;this.updateScrollParent(t)}}this.trackingClick=true;this.trackingClickStart=e.timeStamp;this.targetElement=t;this.touchStartX=n.pageX;this.touchStartY=n.pageY;if(e.timeStamp-this.lastClickTime<this.tapDelay){e.preventDefault()}return true};i.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;if(Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n){return true}return false};i.prototype.onTouchMove=function(e){
if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e)){this.trackingClick=false;this.targetElement=null}return true};i.prototype.findControl=function(e){if(e.control!==undefined){return e.control}if(e.htmlFor){return document.getElementById(e.htmlFor)}return e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};i.prototype.onTouchEnd=function(e){var t,n,r,i,a,c=this.targetElement;if(!this.trackingClick){return true}if(e.timeStamp-this.lastClickTime<this.tapDelay){this.cancelNextClick=true;return true}if(e.timeStamp-this.trackingClickStart>this.tapTimeout){return true}this.cancelNextClick=false;this.lastClickTime=e.timeStamp;n=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(u){a=e.changedTouches[0];c=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset)||c;c.fastClickScrollParent=this.targetElement.fastClickScrollParent}r=c.tagName.toLowerCase();if(r==="label"){t=this.findControl(c);if(t){this.focus(c);if(s){return false}c=t}}else if(this.needsFocus(c)){if(e.timeStamp-n>100||o&&window.top!==window&&r==="input"){this.targetElement=null;return false}this.focus(c);this.sendClick(c,e);if(!o||r!=="select"){this.targetElement=null;e.preventDefault()}return false}if(o&&!l){i=c.fastClickScrollParent;if(i&&i.fastClickLastScrollTop!==i.scrollTop){return true}}if(!this.needsClick(c)){e.preventDefault();this.sendClick(c,e)}return false};i.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};i.prototype.onMouse=function(e){if(!this.targetElement){return true}if(e.forwardedTouchEvent){return true}if(!e.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(e.stopImmediatePropagation){e.stopImmediatePropagation()}else{e.propagationStopped=true}e.stopPropagation();e.preventDefault();return false}return true};i.prototype.onClick=function(e){var t;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(e.target.type==="submit"&&e.detail===0){return true}t=this.onMouse(e);if(!t){this.targetElement=null}return t};i.prototype.destroy=function(){var e=this.layer;if(s){e.removeEventListener("mouseover",this.onMouse,true);e.removeEventListener("mousedown",this.onMouse,true);e.removeEventListener("mouseup",this.onMouse,true)}e.removeEventListener("click",this.onClick,true);e.removeEventListener("touchstart",this.onTouchStart,false);e.removeEventListener("touchmove",this.onTouchMove,false);e.removeEventListener("touchend",this.onTouchEnd,false);e.removeEventListener("touchcancel",this.onTouchCancel,false)};i.notNeeded=function(e){var t;var n;var r;var i;if(typeof window.ontouchstart==="undefined"){return true}n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(n){if(s){t=document.querySelector("meta[name=viewport]");if(t){if(t.content.indexOf("user-scalable=no")!==-1){return true}if(n>31&&document.documentElement.scrollWidth<=window.outerWidth){return true}}}else{return true}}if(c){r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(r[1]>=10&&r[2]>=3){t=document.querySelector("meta[name=viewport]");if(t){if(t.content.indexOf("user-scalable=no")!==-1){return true}if(document.documentElement.scrollWidth<=window.outerWidth){return true}}}}if(e.style.msTouchAction==="none"||e.style.touchAction==="manipulation"){return true}i=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(i>=27){t=document.querySelector("meta[name=viewport]");if(t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)){return true}}if(e.style.touchAction==="none"||e.style.touchAction==="manipulation"){return true}return false};i.attach=function(e,t){return new i(e,t)};if(true){!(r=function(){return i}.call(t,n,t,e),r!==undefined&&(e.exports=r))}else if(typeof e!=="undefined"&&e.exports){e.exports=i.attach;e.exports.FastClick=i}else{window.FastClick=i}})()},function(e,t){var n;(function(){n=function(e,t){this.__callback=e;this.options={scrollingX:true,scrollingY:true,animating:true,animationDuration:250,bouncing:true,locking:true,paging:false,snapping:false,zooming:false,minZoom:.5,maxZoom:3,speedMultiplier:1};for(var n in t){this.options[n]=t[n]}};var e=function(e){return Math.pow(e-1,3)+1};var t=function(e){if((e/=.5)<1){return.5*Math.pow(e,3)}return.5*(Math.pow(e-2,3)+2)};var r={__isSingleTouch:false,__isTracking:false,__isGesturing:false,__isDragging:false,__isDecelerating:false,__isAnimating:false,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:false,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(e,t,n,r){var i=this;if(e===+e){i.__clientWidth=e}if(t===+t){i.__clientHeight=t}if(n===+n){i.__contentWidth=n}if(r===+r){i.__contentHeight=r}i.__computeScrollMax();i.scrollTo(i.__scrollLeft,i.__scrollTop,true)},setPosition:function(e,t){var n=this;n.__clientLeft=e||0;n.__clientTop=t||0},setSnapSize:function(e,t){var n=this;n.__snapWidth=e;n.__snapHeight=t},activatePullToRefresh:function(e,t,n,r){var i=this;i.__refreshHeight=e;i.__refreshActivate=t;i.__refreshDeactivate=n;i.__refreshStart=r},finishPullToRefresh:function(){var e=this;e.__refreshActive=false;if(e.__refreshDeactivate){e.__refreshDeactivate()}e.scrollTo(e.__scrollLeft,e.__scrollTop,true)},getValues:function(){var e=this;return{left:e.__scrollLeft,top:e.__scrollTop,zoom:e.__zoomLevel}},getScrollMax:function(){var e=this;return{left:e.__maxScrollLeft,top:e.__maxScrollTop}},zoomTo:function(e,t,n,r){var i=this;if(!i.options.zooming){throw new Error("Zooming is not enabled!")}if(i.__isDecelerating){core.effect.Animate.stop(i.__isDecelerating);i.__isDecelerating=false}var a=i.__zoomLevel;if(n==null){n=i.__clientWidth/2}if(r==null){r=i.__clientHeight/2}e=Math.max(Math.min(e,i.options.maxZoom),i.options.minZoom);i.__computeScrollMax(e);var s=(n+i.__scrollLeft)*e/a-n;var o=(r+i.__scrollTop)*e/a-r;if(s>i.__maxScrollLeft){s=i.__maxScrollLeft}else if(s<0){s=0}if(o>i.__maxScrollTop){o=i.__maxScrollTop}else if(o<0){o=0}i.__publish(s,o,e,t)},zoomBy:function(e,t,n,r){var i=this;i.zoomTo(i.__zoomLevel*e,t,n,r)},scrollTo:function(e,t,n,r){var i=this;if(i.__isDecelerating){core.effect.Animate.stop(i.__isDecelerating);i.__isDecelerating=false}if(r!=null&&r!==i.__zoomLevel){if(!i.options.zooming){throw new Error("Zooming is not enabled!")}e*=r;t*=r;i.__computeScrollMax(r)}else{r=i.__zoomLevel}if(!i.options.scrollingX){e=i.__scrollLeft}else{if(i.options.paging){e=Math.round(e/i.__clientWidth)*i.__clientWidth}else if(i.options.snapping){e=Math.round(e/i.__snapWidth)*i.__snapWidth}}if(!i.options.scrollingY){t=i.__scrollTop}else{if(i.options.paging){t=Math.round(t/i.__clientHeight)*i.__clientHeight}else if(i.options.snapping){t=Math.round(t/i.__snapHeight)*i.__snapHeight}}e=Math.max(Math.min(i.__maxScrollLeft,e),0);t=Math.max(Math.min(i.__maxScrollTop,t),0);if(e===i.__scrollLeft&&t===i.__scrollTop){n=false}i.__publish(e,t,r,n)},scrollBy:function(e,t,n){var r=this;var i=r.__isAnimating?r.__scheduledLeft:r.__scrollLeft;var a=r.__isAnimating?r.__scheduledTop:r.__scrollTop;r.scrollTo(i+(e||0),a+(t||0),n)},doMouseZoom:function(e,t,n,r){var i=this;var a=e>0?.97:1.03;return i.zoomTo(i.__zoomLevel*a,false,n-i.__clientLeft,r-i.__clientTop)},doTouchStart:function(e,t){if(e.length==null){throw new Error("Invalid touch list: "+e)}if(t instanceof Date){t=t.valueOf()}if(typeof t!=="number"){throw new Error("Invalid timestamp value: "+t)}var n=this;if(n.__isDecelerating){core.effect.Animate.stop(n.__isDecelerating);n.__isDecelerating=false}if(n.__isAnimating){core.effect.Animate.stop(n.__isAnimating);n.__isAnimating=false}var r,i;var a=e.length===1;if(a){r=e[0].pageX;i=e[0].pageY}else{r=Math.abs(e[0].pageX+e[1].pageX)/2;i=Math.abs(e[0].pageY+e[1].pageY)/2}n.__initialTouchLeft=r;n.__initialTouchTop=i;n.__zoomLevelStart=n.__zoomLevel;n.__lastTouchLeft=r;n.__lastTouchTop=i;n.__lastTouchMove=t;n.__lastScale=1;n.__enableScrollX=!a&&n.options.scrollingX;n.__enableScrollY=!a&&n.options.scrollingY;n.__isTracking=true;n.__isDragging=!a;n.__isSingleTouch=a;n.__positions=[]},doTouchMove:function(e,t,n){if(e.length==null){throw new Error("Invalid touch list: "+e)}if(t instanceof Date){t=t.valueOf()}if(typeof t!=="number"){throw new Error("Invalid timestamp value: "+t)}var r=this;if(!r.__isTracking){return}var i,a;if(e.length===2){i=Math.abs(e[0].pageX+e[1].pageX)/2;a=Math.abs(e[0].pageY+e[1].pageY)/2}else{i=e[0].pageX;a=e[0].pageY}var s=r.__positions;if(r.__isDragging){var o=i-r.__lastTouchLeft;var l=a-r.__lastTouchTop;var u=r.__scrollLeft;var c=r.__scrollTop;var f=r.__zoomLevel;if(n!=null&&r.options.zooming){var d=f;f=f/r.__lastScale*n;f=Math.max(Math.min(f,r.options.maxZoom),r.options.minZoom);if(d!==f){var h=i-r.__clientLeft;var p=a-r.__clientTop;u=(h+u)*f/d-h;c=(p+c)*f/d-p;r.__computeScrollMax(f)}}if(r.__enableScrollX){u-=o*this.options.speedMultiplier;var m=r.__maxScrollLeft;if(u>m||u<0){if(r.options.bouncing){u+=o/2*this.options.speedMultiplier}else if(u>m){u=m}else{u=0}}}if(r.__enableScrollY){c-=l*this.options.speedMultiplier;var g=r.__maxScrollTop;if(c>g||c<0){if(r.options.bouncing){c+=l/2*this.options.speedMultiplier;if(!r.__enableScrollX&&r.__refreshHeight!=null){if(!r.__refreshActive&&c<=-r.__refreshHeight){r.__refreshActive=true;if(r.__refreshActivate){r.__refreshActivate()}}else if(r.__refreshActive&&c>-r.__refreshHeight){r.__refreshActive=false;if(r.__refreshDeactivate){r.__refreshDeactivate()}}}}else if(c>g){c=g}else{c=0}}}if(s.length>60){s.splice(0,30)}s.push(u,c,t);r.__publish(u,c,f)}else{var _=r.options.locking?3:0;var v=5;var y=Math.abs(i-r.__initialTouchLeft);var b=Math.abs(a-r.__initialTouchTop);r.__enableScrollX=r.options.scrollingX&&y>=_;r.__enableScrollY=r.options.scrollingY&&b>=_;s.push(r.__scrollLeft,r.__scrollTop,t);r.__isDragging=(r.__enableScrollX||r.__enableScrollY)&&(y>=v||b>=v)}r.__lastTouchLeft=i;r.__lastTouchTop=a;r.__lastTouchMove=t;r.__lastScale=n},doTouchEnd:function(e){if(e instanceof Date){e=e.valueOf()}if(typeof e!=="number"){throw new Error("Invalid timestamp value: "+e)}var t=this;if(!t.__isTracking){return}t.__isTracking=false;if(t.__isDragging){t.__isDragging=false;if(t.__isSingleTouch&&t.options.animating&&e-t.__lastTouchMove<=100){var n=t.__positions;var r=n.length-1;var i=r;for(var a=r;a>0&&n[a]>t.__lastTouchMove-100;a-=3){i=a}if(i!==r){var s=n[r]-n[i];var o=t.__scrollLeft-n[i-2];var l=t.__scrollTop-n[i-1];t.__decelerationVelocityX=o/s*(1e3/60);t.__decelerationVelocityY=l/s*(1e3/60);var u=t.options.paging||t.options.snapping?4:1;if(Math.abs(t.__decelerationVelocityX)>u||Math.abs(t.__decelerationVelocityY)>u){if(!t.__refreshActive){t.__startDeceleration(e)}}}}}if(!t.__isDecelerating){if(t.__refreshActive&&t.__refreshStart){t.__publish(t.__scrollLeft,-t.__refreshHeight,t.__zoomLevel,true);if(t.__refreshStart){t.__refreshStart()}}else{t.scrollTo(t.__scrollLeft,t.__scrollTop,true,t.__zoomLevel);if(t.__refreshActive){t.__refreshActive=false;if(t.__refreshDeactivate){t.__refreshDeactivate()}}}}t.__positions.length=0},__publish:function(n,r,i,a){var s=this;var o=s.__isAnimating;if(o){core.effect.Animate.stop(o);s.__isAnimating=false}if(a&&s.options.animating){s.__scheduledLeft=n;s.__scheduledTop=r;s.__scheduledZoom=i;var l=s.__scrollLeft;var u=s.__scrollTop;var c=s.__zoomLevel;var f=n-l;var d=r-u;var h=i-c;var p=function(e,t,n){if(n){s.__scrollLeft=l+f*e;s.__scrollTop=u+d*e;s.__zoomLevel=c+h*e;if(s.__callback){s.__callback(s.__scrollLeft,s.__scrollTop,s.__zoomLevel)}}};var m=function(e){return s.__isAnimating===e};var g=function(e,t,n){if(t===s.__isAnimating){s.__isAnimating=false}if(s.options.zooming){s.__computeScrollMax()}};s.__isAnimating=core.effect.Animate.start(p,m,g,s.options.animationDuration,o?e:t)}else{s.__scheduledLeft=s.__scrollLeft=n;s.__scheduledTop=s.__scrollTop=r;s.__scheduledZoom=s.__zoomLevel=i;if(s.__callback){s.__callback(n,r,i)}if(s.options.zooming){s.__computeScrollMax()}}},__computeScrollMax:function(e){var t=this;if(e==null){e=t.__zoomLevel}t.__maxScrollLeft=Math.max(t.__contentWidth*e-t.__clientWidth,0);t.__maxScrollTop=Math.max(t.__contentHeight*e-t.__clientHeight,0)},__startDeceleration:function(e){var t=this;if(t.options.paging){var n=Math.max(Math.min(t.__scrollLeft,t.__maxScrollLeft),0);var r=Math.max(Math.min(t.__scrollTop,t.__maxScrollTop),0);var i=t.__clientWidth;var a=t.__clientHeight;t.__minDecelerationScrollLeft=Math.floor(n/i)*i;t.__minDecelerationScrollTop=Math.floor(r/a)*a;t.__maxDecelerationScrollLeft=Math.ceil(n/i)*i;t.__maxDecelerationScrollTop=Math.ceil(r/a)*a}else{t.__minDecelerationScrollLeft=0;t.__minDecelerationScrollTop=0;t.__maxDecelerationScrollLeft=t.__maxScrollLeft;t.__maxDecelerationScrollTop=t.__maxScrollTop}var s=function(e,n,r){t.__stepThroughDeceleration(r)};var o=t.options.snapping?4:.1;var l=function(){return Math.abs(t.__decelerationVelocityX)>=o||Math.abs(t.__decelerationVelocityY)>=o};var u=function(e,n,r){t.__isDecelerating=false;t.scrollTo(t.__scrollLeft,t.__scrollTop,t.options.snapping)};t.__isDecelerating=core.effect.Animate.start(s,l,u)},__stepThroughDeceleration:function(e){var t=this;var n=t.__scrollLeft+t.__decelerationVelocityX;var r=t.__scrollTop+t.__decelerationVelocityY;if(!t.options.bouncing){var i=Math.max(Math.min(t.__maxDecelerationScrollLeft,n),t.__minDecelerationScrollLeft);if(i!==n){n=i;t.__decelerationVelocityX=0}var a=Math.max(Math.min(t.__maxDecelerationScrollTop,r),t.__minDecelerationScrollTop);if(a!==r){r=a;t.__decelerationVelocityY=0}}if(e){t.__publish(n,r,t.__zoomLevel)}else{t.__scrollLeft=n;t.__scrollTop=r}if(!t.options.paging){var s=.95;t.__decelerationVelocityX*=s;t.__decelerationVelocityY*=s}if(t.options.bouncing){var o=0;var l=0;var u=.03;var c=.08;if(n<t.__minDecelerationScrollLeft){o=t.__minDecelerationScrollLeft-n}else if(n>t.__maxDecelerationScrollLeft){o=t.__maxDecelerationScrollLeft-n}if(r<t.__minDecelerationScrollTop){l=t.__minDecelerationScrollTop-r}else if(r>t.__maxDecelerationScrollTop){l=t.__maxDecelerationScrollTop-r}if(o!==0){if(o*t.__decelerationVelocityX<=0){t.__decelerationVelocityX+=o*u}else{t.__decelerationVelocityX=o*c}}if(l!==0){if(l*t.__decelerationVelocityY<=0){t.__decelerationVelocityY+=l*u}else{t.__decelerationVelocityY=l*c}}}}};for(var i in r){n.prototype[i]=r[i]}})();e.exports=n},function(e,t){var n=function(e,t,r){this.content=e;this.container=t;this.options=r||{};var i=this;this.scroller=new Scroller(function(e,t,n){i.render(e,t,n)},r);this.bindEvents();this.content.style[n.vendorPrefix+"TransformOrigin"]="left top";this.reflow()};n.prototype.render=function(){var e=document.documentElement.style;var t;if(window.opera&&Object.prototype.toString.call(opera)==="[object Opera]"){t="presto"}else if("MozAppearance"in e){t="gecko"}else if("WebkitAppearance"in e){t="webkit"}else if(typeof navigator.cpuClass==="string"){t="trident"}var r=n.vendorPrefix={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[t];var i=document.createElement("div");var a;var s=r+"Perspective";var o=r+"Transform";if(i.style[s]!==a){return function(e,t,n){if(this.content){this.content.style[o]="translate3d("+-e+"px,"+-t+"px,0) scale("+n+")"}}}else if(i.style[o]!==a){return function(e,t,n){if(this.content){this.content.style[o]="translate("+-e+"px,"+-t+"px) scale("+n+")"}}}else{return function(e,t,n){this.content.style.marginLeft=e?-e/n+"px":"";this.content.style.marginTop=t?-t/n+"px":"";this.content.style.zoom=n||""}}}();n.prototype.reflow=function(){if(!this.container){return}this.scroller.setDimensions(this.container.clientWidth,this.container.clientHeight,this.content.offsetWidth,this.content.offsetHeight);var e=this.container.getBoundingClientRect();this.scroller.setPosition(e.left+this.container.clientLeft,e.top+this.container.clientTop)};n.prototype.destroy=function(){$(window).off("resize.zynga");if("ontouchstart"in window){$(this.container).off("touchstart.zynga");$(this.container).off("touchmove.zynga");$(this.container).off("touchend.zynga");$(this.container).off("touchcancel.zynga")}else{$(this.container).off("mousedown.zynga");$(this.container).off("mousemove.zynga");$(this.container).off("mouseup.zynga");$(this.container).off("mousewheel.zynga")}this.content=null;this.container=null};n.prototype.bindEvents=function(){var e=this;if("ontouchstart"in window){$(this.container).on("touchstart.zynga",function(t){if(t.touches[0]&&t.touches[0].target&&t.touches[0].target.tagName&&t.touches[0].target.tagName.match(/input|textarea|select/i)){return}e.scroller.doTouchStart(t.touches,t.timeStamp)},false);$(this.container).on("touchmove.zynga",function(t){t.preventDefault();if($.__swipeHelper.swipeOrientation==="vertical"){e.scroller.doTouchMove(t.touches,t.timeStamp,t.scale)}},false);$(this.container).on("touchend.zynga",function(t){e.scroller.doTouchEnd(t.timeStamp)},false);$(this.container).on("touchcancel.zynga",function(t){e.scroller.doTouchEnd(t.timeStamp)},false)}else{var t=false;$(this.container).on("mousedown.zynga",function(n){if(n.target.tagName.match(/input|textarea|select/i)){return}e.scroller.doTouchStart([{pageX:n.pageX,pageY:n.pageY}],n.timeStamp);t=true;n.preventDefault()},false);$(this.container).on("mousemove.zynga",function(n){if(!t){return}e.scroller.doTouchMove([{pageX:n.pageX,pageY:n.pageY}],n.timeStamp);t=true},false);$(this.container).on("mouseup.zynga",function(n){if(!t){return}e.scroller.doTouchEnd(n.timeStamp);t=false},false);$(this.container).on("mousewheel.zynga",function(t){if(e.options.zooming){e.scroller.doMouseZoom(t.wheelDelta,t.timeStamp,t.pageX,t.pageY);t.preventDefault()}},false)}};document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("[data-scrollable],[data-zoomable]"),t;for(var r=0;r<e.length;r++){t=e[r];var i=t.dataset.scrollable;var a=t.dataset.zoomable||"";var s=a.split("-");var o=s.length>1&&parseFloat(s[0]);var l=s.length>1&&parseFloat(s[1]);new n(t,{scrollingX:i==="true"||i==="x",scrollingY:i==="true"||i==="y",zooming:a==="true"||s.length>1,minZoom:o,maxZoom:l})}},false);e.exports=n},function(e,t,n){var r,i;(function(n,a){"use strict";var s={remoteFetching:false,collectWindowErrors:true,linesOfContext:7};var o=[].slice;var l="?";s.wrap=function z(e){function t(){try{return e.apply(this,arguments)}catch(t){s.report(t);throw t}}return t};s.report=function W(){var e=[],t=null,r=null,i=null;function l(t){m();e.push(t)}function u(t){for(var n=e.length-1;n>=0;--n){if(e[n]===t){e.splice(n,1)}}}function c(){g();e=[]}function f(t,n){var r=null;if(n&&!s.collectWindowErrors){return}for(var i in e){if(E(e,i)){try{e[i].apply(null,[t].concat(o.call(arguments,2)))}catch(a){r=a}}}if(r){throw r}}var d,h;function p(e,t,n,r,a){var o=null;if(i){s.computeStackTrace.augmentStackTraceWithInitialElement(i,t,n,e);_()}else if(a){o=s.computeStackTrace(a);f(o,true)}else{var l={url:t,line:n,column:r};l.func=s.computeStackTrace.guessFunctionName(l.url,l.line);l.context=s.computeStackTrace.gatherContext(l.url,l.line);o={message:e,url:document.location.href,stack:[l]};f(o,true)}if(d){return d.apply(this,arguments)}return false}function m(){if(h){return}d=n.onerror;n.onerror=p;h=true}function g(){if(!h){return}n.onerror=d;h=false;d=a}function _(){var e=i,n=t;t=null;i=null;r=null;f.apply(null,[e,false].concat(n))}function v(e,a){var l=o.call(arguments,1);if(i){if(r===e){return}else{_()}}var u=s.computeStackTrace(e);i=u;r=e;t=l;n.setTimeout(function(){if(r===e){_()}},u.incomplete?2e3:0);if(a!==false){throw e}}v.subscribe=l;v.unsubscribe=u;v.uninstall=c;return v}();s.computeStackTrace=function q(){var e=false,t={};function r(e){if(!s.remoteFetching){return""}try{var t=function(){try{return new n.XMLHttpRequest}catch(e){return new n.ActiveXObject("Microsoft.XMLHTTP")}};var r=t();r.open("GET",e,false);r.send("");return r.responseText}catch(i){return""}}function i(e){if(!L(e))return[];if(!E(t,e)){var n="";if(e.indexOf(document.domain)!==-1){n=r(e)}t[e]=n?n.split("\n"):[]}return t[e]}function a(e,t){var n=/function ([^(]*)\(([^)]*)\)/,r=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,a="",s=10,o=i(e),u;if(!o.length){return l}for(var c=0;c<s;++c){a=o[t-c]+a;if(!S(a)){if(u=r.exec(a)){return u[1]}else if(u=n.exec(a)){return u[1]}}}return l}function o(e,t){var n=i(e);if(!n.length){return null}var r=[],a=Math.floor(s.linesOfContext/2),o=a+s.linesOfContext%2,l=Math.max(0,t-a-1),u=Math.min(n.length,t+o-1);t-=1;for(var c=l;c<u;++c){if(!S(n[c])){r.push(n[c])}}return r.length>0?r:null}function u(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function c(e){return u(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function f(e,t){var n,r;for(var a=0,s=t.length;a<s;++a){if((n=i(t[a])).length){n=n.join("\n");if(r=e.exec(n)){return{url:t[a],line:n.substring(0,r.index).split("\n").length,column:r.index-n.lastIndexOf("\n",r.index)-1}}}}return null}function d(e,t,n){var r=i(t),a=new RegExp("\\b"+u(e)+"\\b"),s;n-=1;if(r&&r.length>n&&(s=a.exec(r[n]))){return s.index}return null}function h(e){var t=[n.location.href],r=document.getElementsByTagName("script"),i,a=""+e,s=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,o=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,l,d,h;for(var p=0;p<r.length;++p){var m=r[p];if(m.src){t.push(m.src)}}if(!(d=s.exec(a))){l=new RegExp(u(a).replace(/\s+/g,"\\s+"))}else{var g=d[1]?"\\s+"+d[1]:"",_=d[2].split(",").join("\\s*,\\s*");i=u(d[3]).replace(/;$/,";?");l=new RegExp("function"+g+"\\s*\\(\\s*"+_+"\\s*\\)\\s*{\\s*"+i+"\\s*}")}if(h=f(l,t)){return h}if(d=o.exec(a)){var v=d[1];i=c(d[2]);l=new RegExp("on"+v+"=[\\'\"]\\s*"+i+"\\s*[\\'\"]","i");if(h=f(l,t[0])){return h}l=new RegExp(i);if(h=f(l,t)){return h}}return null}function p(e){if(!e.stack){return null}var t=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|https?):.*?):(\d+)(?::(\d+))?\)?\s*$/i,n=/^\s*(\S*)(?:\((.*?)\))?@((?:file|https?).*?):(\d+)(?::(\d+))?\s*$/i,r=e.stack.split("\n"),i=[],s,u,c=/^(.*) is undefined$/.exec(e.message);for(var f=0,h=r.length;f<h;++f){if(s=n.exec(r[f])){u={url:s[3],func:s[1]||l,args:s[2]?s[2].split(","):"",line:+s[4],column:s[5]?+s[5]:null}}else if(s=t.exec(r[f])){u={url:s[2],func:s[1]||l,line:+s[3],column:s[4]?+s[4]:null}}else{continue}if(!u.func&&u.line){u.func=a(u.url,u.line)}if(u.line){u.context=o(u.url,u.line)}i.push(u)}if(!i.length){return null}if(i[0].line&&!i[0].column&&c){i[0].column=d(c[1],i[0].url,i[0].line)}else if(!i[0].column&&!S(e.columnNumber)){i[0].column=e.columnNumber+1}return{name:e.name,message:e.message,url:document.location.href,stack:i}}function m(e){var t=e.stacktrace;var n=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,r=t.split("\n"),i=[],s;for(var l=0,u=r.length;l<u;l+=2){if(s=n.exec(r[l])){var c={line:+s[1],column:+s[2],func:s[3]||s[4],args:s[5]?s[5].split(","):[],url:s[6]};if(!c.func&&c.line){c.func=a(c.url,c.line)}if(c.line){try{c.context=o(c.url,c.line)}catch(f){}}if(!c.context){c.context=[r[l+1]]}i.push(c)}}if(!i.length){return null}return{name:e.name,message:e.message,url:document.location.href,stack:i}}function g(e){var t=e.message.split("\n");if(t.length<4){return null}var r=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,s=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,l=/^\s*Line (\d+) of function script\s*$/i,u=[],d=document.getElementsByTagName("script"),h=[],p,m,g,_;for(m in d){if(E(d,m)&&!d[m].src){h.push(d[m])}}for(m=2,g=t.length;m<g;m+=2){var v=null;if(p=r.exec(t[m])){v={url:p[2],func:p[3],line:+p[1]}}else if(p=s.exec(t[m])){v={url:p[3],func:p[4]};var y=+p[1];var b=h[p[2]-1];if(b){_=i(v.url);if(_){_=_.join("\n");var M=_.indexOf(b.innerText);if(M>=0){v.line=y+_.substring(0,M).split("\n").length}}}}else if(p=l.exec(t[m])){var x=n.location.href.replace(/#.*$/,""),w=p[1];var S=new RegExp(c(t[m+1]));_=f(S,[x]);v={url:x,line:_?_.line:w,func:""}}if(v){if(!v.func){v.func=a(v.url,v.line)}var k=o(v.url,v.line);var L=k?k[Math.floor(k.length/2)]:null;if(k&&L.replace(/^\s*/,"")===t[m+1].replace(/^\s*/,"")){v.context=k}else{v.context=[t[m+1]]}u.push(v)}}if(!u.length){return null}return{name:e.name,message:t[0],url:document.location.href,stack:u}}function _(e,t,n,r){var i={url:t,line:n};if(i.url&&i.line){e.incomplete=false;if(!i.func){i.func=a(i.url,i.line)}if(!i.context){i.context=o(i.url,i.line)}var s=/ '([^']+)' /.exec(r);if(s){i.column=d(s[1],i.url,i.line)}if(e.stack.length>0){if(e.stack[0].url===i.url){if(e.stack[0].line===i.line){return false}else if(!e.stack[0].line&&e.stack[0].func===i.func){e.stack[0].line=i.line;e.stack[0].context=i.context;return false}}}e.stack.unshift(i);e.partial=true;return true}else{e.incomplete=true}return false}function v(e,t){var n=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,r=[],i={},o=false,u,c,f;for(var p=v.caller;p&&!o;p=p.caller){if(p===y||p===s.report){continue}c={url:null,func:l,line:null,column:null};if(p.name){c.func=p.name}else if(u=n.exec(p.toString())){c.func=u[1]}if(f=h(p)){c.url=f.url;c.line=f.line;if(c.func===l){c.func=a(c.url,c.line)}var m=/ '([^']+)' /.exec(e.message||e.description);if(m){c.column=d(m[1],f.url,f.line)}}if(i[""+p]){o=true}else{i[""+p]=true}r.push(c)}if(t){r.splice(0,t)}var g={name:e.name,message:e.message,url:document.location.href,stack:r};_(g,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description);return g}function y(t,n){var r=null;n=n==null?0:+n;try{r=m(t);if(r){return r}}catch(i){if(e){throw i}}try{r=p(t);if(r){return r}}catch(i){if(e){throw i}}try{r=g(t);if(r){return r}}catch(i){if(e){throw i}}try{r=v(t,n+1);if(r){return r}}catch(i){if(e){throw i}}return{}}function b(e){e=(e==null?0:+e)+1;try{throw new Error}catch(t){return y(t,e+1)}}y.augmentStackTraceWithInitialElement=_;y.guessFunctionName=a;y.gatherContext=o;y.ofCaller=b;return y}();"use strict";var u=n.Raven,c=!!(n.JSON&&n.JSON.stringify),f,d,h,p,m,g,_={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],collectWindowErrors:true,tags:{},extra:{}};var v={VERSION:"1.1.11",TraceKit:s,afterLoad:function(){var e=n.RavenConfig;if(e){this.config(e.dsn,e.config).install()}},noConflict:function(){n.Raven=u;return v},config:function(e,t){if(!e)return v;var n=w(e),r=n.path.lastIndexOf("/"),i=n.path.substr(1,r);if(t){D(t,function(e,t){_[e]=t})}_.ignoreErrors.push("Script error.");_.ignoreErrors.push("Script error");_.ignoreErrors=U(_.ignoreErrors);_.ignoreUrls=_.ignoreUrls.length?U(_.ignoreUrls):false;_.whitelistUrls=_.whitelistUrls.length?U(_.whitelistUrls):false;_.includePaths=U(_.includePaths);m=n.user;g=n.path.substr(r+1);h="//"+n.host+(n.port?":"+n.port:"")+"/"+i+"api/"+g+"/store/";if(n.protocol){h=n.protocol+":"+h}if(_.fetchContext){s.remoteFetching=true}if(_.linesOfContext){s.linesOfContext=_.linesOfContext}s.collectWindowErrors=!!_.collectWindowErrors;return v},install:function(){if(j()){s.report.subscribe(C)}return v},context:function(e,t,n){if(k(e)){n=t||[];t=e;e=a}return v.wrap(e,t).apply(this,n)},wrap:function(e,t){if(S(t)&&!k(e)){return e}if(k(e)){t=e;e=a}if(!k(t)){return t}if(t.__raven__){return t}function n(){var n=[],r=arguments.length,i=!e||e&&e.deep!==false;while(r--)n[r]=i?v.wrap(e,arguments[r]):arguments[r];try{return t.apply(this,n)}catch(a){v.captureException(a,e);throw a}}for(var r in t){if(t.hasOwnProperty(r)){n[r]=t[r]}}n.__raven__=true;return n},uninstall:function(){s.report.uninstall();return v},captureException:function(e,t){if(L(e))return v.captureMessage(e,t);f=e;try{s.report(e,t)}catch(n){if(e!==n){throw n}}return v},captureMessage:function(e,t){F(I({message:e},t));return v},setUser:function(e){p=e;return v},lastException:function(){return f},lastEventId:function(){return d}};function y(e,t){var n,r;t=t||{};e="raven"+e.substr(0,1).toUpperCase()+e.substr(1);if(document.createEvent){n=document.createEvent("HTMLEvents");n.initEvent(e,true,true)}else{n=document.createEventObject();n.eventType=e}for(r in t)if(t.hasOwnProperty(r)){n[r]=t[r]}if(document.createEvent){document.dispatchEvent(n)}else{try{document.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(i){}}}var b="source protocol user pass host port path".split(" "),M=/^(?:(\w+):)?\/\/(\w+)(:\w+)?@([\w\.-]+)(?::(\d+))?(\/.*)/;function x(e){this.name="RavenConfigError";this.message=e}x.prototype=new Error;x.prototype.constructor=x;function w(e){var t=M.exec(e),n={},r=7;try{while(r--)n[b[r]]=t[r]||""}catch(i){throw new x("Invalid DSN: "+e)}if(n.pass)throw new x("Do not specify your private key in the DSN!");return n}function S(e){return typeof e==="undefined"}function k(e){return typeof e==="function"}function L(e){return typeof e==="string"}function T(e){for(var t in e)return false;return true}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function D(e,t){var n,r;if(S(e.length)){for(n in e){if(e.hasOwnProperty(n)){t.call(null,n,e[n])}}}else{r=e.length;if(r){for(n=0;n<r;n++){t.call(null,n,e[n])}}}}var A;function Y(){if(A)return A;var e=["sentry_version=4","sentry_client=raven-js/"+v.VERSION];if(m){e.push("sentry_key="+m)}A="?"+e.join("&");return A}function C(e,t){var n=[];if(e.stack&&e.stack.length){D(e.stack,function(e,t){var r=R(t);if(r){n.push(r)}})}y("handle",{stackInfo:e,options:t});P(e.name,e.message,e.url,e.lineno,n,t)}function R(e){if(!e.url)return;var t={filename:e.url,lineno:e.line,colno:e.column,"function":e.func||"?"},n=O(e),r;if(n){var i=["pre_context","context_line","post_context"];r=3;while(r--)t[i[r]]=n[r]}t.in_app=!(!_.includePaths.test(t.filename)||/(Raven|TraceKit)\./.test(t["function"])||/raven\.(min\.)js$/.test(t.filename));return t}function O(e){if(!e.context||!_.fetchContext)return;var t=e.context,n=~~(t.length/2),r=t.length,i=false;while(r--){if(t[r].length>300){i=true;break}}if(i){if(S(e.column))return;return[[],t[n].substr(e.column,50),[]]}return[t.slice(0,n),t[n],t.slice(n+1)]}function P(e,t,n,r,i,a){var s,o,l;if(!t)return;if(_.ignoreErrors.test(t))return;if(i&&i.length){n=i[0].filename||n;i.reverse();s={frames:i}}else if(n){s={frames:[{filename:n,lineno:r}]}}if(_.ignoreUrls&&_.ignoreUrls.test(n))return;if(_.whitelistUrls&&!_.whitelistUrls.test(n))return;o=r?t+" at "+r:t;F(I({exception:{type:e,value:t},stacktrace:s,culprit:n,message:o},a))}function I(e,t){if(!t){return e}D(t,function(t,n){e[t]=n});return e}function N(){var e={url:document.location.href,headers:{"User-Agent":navigator.userAgent}};if(document.referrer){e.headers.Referer=document.referrer}return e}function F(e){if(!j())return;e=I({project:g,logger:_.logger,site:_.site,platform:"javascript",request:N()},e);e.tags=I(_.tags,e.tags);e.extra=I(_.extra,e.extra);if(T(e.tags))delete e.tags;if(T(e.extra))delete e.extra;if(p){e.user=p}if(k(_.dataCallback)){e=_.dataCallback(e)}if(k(_.shouldSendCallback)&&!_.shouldSendCallback(e)){return}d=e.event_id||(e.event_id=B());H(e)}function H(e){var t=new Image,n=h+Y()+"&sentry_data="+encodeURIComponent(JSON.stringify(e));t.onload=function r(){y("success",{data:e,src:n})};t.onerror=t.onabort=function i(){y("failure",{data:e,src:n})};t.src=n}function j(){if(!c)return false;if(!h){if(n.console&&console.error){console.error("Error: Raven has not been configured.")}return false}return true}function U(e){var t=[],n=0,r=e.length,i;for(;n<r;n++){i=e[n];if(L(i)){t.push(i.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"))}else if(i&&i.source){t.push(i.source);

}}return new RegExp(t.join("|"),"i")}function B(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}v.afterLoad();n.Raven=v;if(true){!(r=[],i=function(){return v}.apply(t,r),i!==a&&(e.exports=i))}})(window);e.exports=Raven},function(e,t){(function(){var e=window.nv||{};e.version="0.0.1a";e.dev=false;window.nv=e;e.tooltip={};e.utils={};e.models={};e.charts={};e.graphs=[];e.logs={};e.dispatch=d3.dispatch("render_start","render_end");if(e.dev){e.dispatch.on("render_start",function(t){e.logs.startTime=+new Date});e.dispatch.on("render_end",function(t){e.logs.endTime=+new Date;e.logs.totalTime=e.logs.endTime-e.logs.startTime;e.log("total",e.logs.totalTime)})}e.log=function(){if(e.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(e.dev&&console.log&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]};e.render=function r(t){t=t||1;e.render.active=true;e.dispatch.render_start();setTimeout(function(){var n,r;for(var i=0;i<t&&(r=e.render.queue[i]);i++){n=r.generate();if(typeof r.callback==typeof Function)r.callback(n);e.graphs.push(n)}e.render.queue.splice(0,i);if(e.render.queue.length)setTimeout(arguments.callee,0);else{e.render.active=false;e.dispatch.render_end()}},0)};e.render.active=false;e.render.queue=[];e.addGraph=function(t){if(typeof arguments[0]===typeof Function)t={generate:arguments[0],callback:arguments[1]};e.render.queue.push(t);if(!e.render.active)e.render()};e.identity=function(e){return e};e.strip=function(e){return e.replace(/(\s|&)/g,"")};function t(e,t){return new Date(t,e+1,0).getDate()}function n(e,t,n){return function(r,i,a){var s=e(r),o=[];if(s<r)t(s);if(a>1){while(s<i){var l=new Date(+s);if(n(l)%a===0)o.push(l);t(s)}}else{while(s<i){o.push(new Date(+s));t(s)}}return o}}d3.time.monthEnd=function(e){return new Date(e.getFullYear(),e.getMonth(),0)};d3.time.monthEnds=n(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1);e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(e){return e.getMonth()});d3.svg.axisStatic=function(){var e=d3.scale.linear(),t=c,n=6,r=6,i=6,a=3,s=[10],o=null,l,u=0;var c="bottom",f={top:1,right:1,bottom:1,left:1};function d(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function h(e){return e.rangeExtent?e.rangeExtent():d(e.range())}function p(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function m(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function g(e,t,n){i=[];if(n&&t.length>1){var r=d(e.domain()),i,a=-1,s=t.length,o=(t[1]-t[0])/++n,l,u;while(++a<s){for(l=n;--l>0;){if((u=+t[a]-l*o)>=r[0]){i.push(u)}}}for(--a,l=0;++l<n&&(u=+t[a]+l*o)<r[1];){i.push(u)}}return i}function _(c){c.each(function(){var c=d3.select(this);var f=o==null?e.ticks?e.ticks.apply(e,s):e.domain():o,d=l==null?e.tickFormat?e.tickFormat.apply(e,s):String:l;var _=g(e,f,u),v=c.selectAll(".tick.minor").data(_,String),y=v.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1),b=v.exit().remove(),M=v.style("opacity",1);var x=c.selectAll(".tick.major").data(f,String),w=x.enter().insert("g","path").attr("class","tick major").style("opacity",1),S=x.exit().remove(),k=x.style("opacity",1),L;var T=h(e),E=c.selectAll(".domain").data([0]),D=(E.enter().append("path").attr("class","domain"),E);var A=e.copy();w.append("line");w.append("text");var Y=w.select("line"),C=k.select("line"),R=x.select("text").text(d),O=w.select("text"),P=k.select("text");switch(t){case"bottom":{L=p;y.attr("y2",r);M.attr("x2",0).attr("y2",r);Y.attr("y2",n);O.attr("y",Math.max(n,0)+a);C.attr("x2",0).attr("y2",n);P.attr("x",0).attr("y",Math.max(n,0)+a);R.attr("dy",".71em").style("text-anchor","middle");D.attr("d","M"+T[0]+","+i+"V0H"+T[1]+"V"+i);break}case"top":{L=p;y.attr("y2",-r);M.attr("x2",0).attr("y2",-r);Y.attr("y2",-n);O.attr("y",-(Math.max(n,0)+a));C.attr("x2",0).attr("y2",-n);P.attr("x",0).attr("y",-(Math.max(n,0)+a));R.attr("dy","0em").style("text-anchor","middle");D.attr("d","M"+T[0]+","+-i+"V0H"+T[1]+"V"+-i);break}case"left":{L=m;y.attr("x2",-r);M.attr("x2",-r).attr("y2",0);Y.attr("x2",-n);O.attr("x",-(Math.max(n,0)+a));C.attr("x2",-n).attr("y2",0);P.attr("x",-(Math.max(n,0)+a)).attr("y",0);R.attr("dy",".32em").style("text-anchor","end");D.attr("d","M"+-i+","+T[0]+"H0V"+T[1]+"H"+-i);break}case"right":{L=m;y.attr("x2",r);M.attr("x2",r).attr("y2",0);Y.attr("x2",n);O.attr("x",Math.max(n,0)+a);C.attr("x2",n).attr("y2",0);P.attr("x",Math.max(n,0)+a).attr("y",0);R.attr("dy",".32em").style("text-anchor","start");D.attr("d","M"+i+","+T[0]+"H0V"+T[1]+"H"+i);break}}if(e.ticks){w.call(L,A);k.call(L,A);S.call(L,A);y.call(L,A);M.call(L,A);b.call(L,A)}else{var I=A.rangeBand()/2,N=function(e){return A(e)+I};w.call(L,N);k.call(L,N)}})}_.scale=function(t){if(!arguments.length)return e;e=t;return _};_.orient=function(e){if(!arguments.length)return t;t=e in f?e+"":c;return _};_.ticks=function(){if(!arguments.length)return s;s=arguments;return _};_.tickValues=function(e){if(!arguments.length)return o;o=e;return _};_.tickFormat=function(e){if(!arguments.length)return l;l=e;return _};_.tickSize=function(e,t){if(!arguments.length)return n;var a=arguments.length-1;n=+e;r=a>1?+t:n;i=a>0?+arguments[a]:n;return _};_.tickPadding=function(e){if(!arguments.length)return a;a=+e;return _};_.tickSubdivide=function(e){if(!arguments.length)return u;u=+e;return _};return _};(function(){var e=window.nv.tooltip={};e.show=function(t,n,r,i,a,s){var o=document.createElement("div"),l=document.createElement("div"),u=document.createElement("div");r=r||"s";i=i||5;l.className="tooltip-inner";u.className="tooltip-arrow";l.innerHTML=n;o.style.left=0;o.style.top=-1e3;o.style.opacity=0;o.className="tooltip xy-tooltip in";o.appendChild(l);o.appendChild(u);a.appendChild(o);e.position(a,o,t,r,i);o.style.opacity=1;return o};e.cleanup=function(){var e=document.getElementsByClassName("tooltip"),t=[],n=e.length;while(n>0){n-=1;if(e[n].className.indexOf("xy-tooltip")!==-1){t.push(e[n]);e[n].style.transitionDelay="0 !important";e[n].style.opacity=0;e[n].className="nvtooltip-pending-removal out"}}setTimeout(function(){var e;while(t.length){e=t.pop();e.parentNode.removeChild(e)}},500)};e.position=function(e,t,n,r,i){r=r||"s";i=i||5;var a=e.getBoundingClientRect();var s=[n.clientX-a.left,n.clientY-a.top];var o=parseInt(t.offsetWidth,10),l=parseInt(t.offsetHeight,10),u=e.clientWidth,c=e.clientHeight,f=e.scrollLeft,d=e.scrollTop,h=t.className.replace(/ top| right| bottom| left/g,""),p,m;function g(){var e=s[0]-o/2;if(e<f)e=f;if(e+o>u)e=u-o;return e}function _(){var e=s[1]-l/2;if(e<d)e=d;if(e+l>d+c)e=d-l;return e}function v(e){var n=s[0]-o/2-e-5,r=t.getElementsByClassName("tooltip-arrow")[0];r.style.marginLeft=n+"px"}function y(e){var n=s[1]-l/2-e-5,r=t.getElementsByClassName("tooltip-arrow")[0];r.style.marginTop=n+"px"}switch(r){case"e":m=_();p=s[0]-o-i;y(m);if(p<f){p=s[0]+i;h+=" right"}else{h+=" left"}break;case"w":m=_();p=s[0]+i;y(m);if(p+o>u){p=s[0]-o-i;h+=" left"}else{h+=" right"}break;case"n":p=g();m=s[1]+i;v(p);if(m+l>d+c){m=s[1]-l-i;h+=" top"}else{h+=" bottom"}break;case"s":p=g();m=s[1]-l-i;v(p);if(d>m){m=s[1]+i;h+=" bottom"}else{h+=" top"}break}t.style.left=p+"px";t.style.top=m+"px";t.className=h}})();e.utils.windowSize=function(){var e={width:640,height:480};if(document.body&&document.body.offsetWidth){e.width=document.body.offsetWidth;e.height=document.body.offsetHeight}if(document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){e.width=document.documentElement.offsetWidth;e.height=document.documentElement.offsetHeight}if(window.innerWidth&&window.innerHeight){e.width=window.innerWidth;e.height=window.innerHeight}return e};e.utils.windowResize=function(e){if(window.attachEvent){window.attachEvent("onresize",e)}else if(window.addEventListener){window.addEventListener("resize",e,true)}else{}};e.utils.windowUnResize=function(e){if(window.detachEvent){window.detachEvent("onresize",e)}else if(window.removeEventListener){window.removeEventListener("resize",e,true)}else{}};e.utils.resizeOnPrint=function(e){if(window.matchMedia){var t=window.matchMedia("print");t.addListener(function(t){if(t.matches){e()}})}else if(window.attachEvent){window.attachEvent("onbeforeprint",e)}else{window.onbeforeprint=e}};e.utils.unResizeOnPrint=function(e){if(window.matchMedia){var t=window.matchMedia("print");t.removeListener(function(t){if(t.matches){e()}})}else if(window.detachEvent){window.detachEvent("onbeforeprint",e)}else{window.onbeforeprint=null}};e.utils.getColor=function(t){if(!arguments.length){return e.utils.defaultColor()}if(Object.prototype.toString.call(t)==="[object Array]"){return function(e,n){return e.color||t[n%t.length]}}else{return t}};e.utils.defaultColor=function(){var e=d3.scale.category20().range();return function(t,n){return t.color||e[n%e.length]}};e.utils.customTheme=function(e,t,n){t=t||function(e){return e.key};n=n||d3.scale.category20().range();var r=n.length;return function(i,a){var s=t(i);if(!r)r=n.length;if(typeof e[s]!=="undefined"){return typeof e[s]==="function"?e[s]():e[s]}else{return n[--r]}}};e.utils.pjax=function(t,n){d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href);r(this.href);d3.event.preventDefault()});function r(r){d3.html(r,function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i);e.utils.pjax(t,n)})}d3.select(window).on("popstate",function(){if(d3.event.state){r(d3.event.state)}})};e.utils.NaNtoZero=function(e){if(typeof e!=="number"||isNaN(e)||e===null||e===Infinity)return 0;return e};e.utils.optionsFunc=function(e){if(e){d3.map(e).forEach(function(e,t){if(typeof this[e]==="function"){this[e](t)}}.bind(this))}return this};e.utils.colorLinearGradient=function(t,n,r,i,a){var s="lg_gradient_"+n,o=a.select("#"+s);if(o.empty()){if(r.position==="middle"){e.utils.createLinearGradient(s,r,a,[{offset:"0%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1},{offset:"20%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"50%","stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1},{offset:"80%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1}])}else{e.utils.createLinearGradient(s,r,a,[{offset:"0%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1},{offset:"50%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1}])}}return"url(#"+s+")"};e.utils.createLinearGradient=function(e,t,n,r){var i=t.orientation==="horizontal"?"0%":"100%",a=t.orientation==="horizontal"?"100%":"0%",s=n.append("linearGradient").attr("id",e).attr("x1","0%").attr("y1","0%").attr("x2",i).attr("y2",a).attr("spreadMethod","pad");for(var o=0;o<r.length;o+=1){var l=r[o],u=s.append("stop");for(var c in l){if(l.hasOwnProperty(c)){u.attr(c,l[c])}}}};e.utils.colorRadialGradient=function(t,n,r,i,a){var s="rg_gradient_"+n,o=a.select("#"+s);if(o.empty()){e.utils.createRadialGradient(s,r,a,[{offset:r.s,"stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1}])}return"url(#"+s+")"};e.utils.createRadialGradient=function(e,t,n,r){var i=n.append("radialGradient").attr("id",e).attr("r",t.r).attr("cx",t.x).attr("cy",t.y).attr("gradientUnits",t.u).attr("spreadMethod","pad");for(var a=0;a<r.length;a+=1){var s=r[a],o=i.append("stop");for(var l in s){if(s.hasOwnProperty(l)){o.attr(l,s[l])}}}};e.utils.getAbsoluteXY=function(e){var t=document.documentElement,n=e.getBoundingClientRect(),r=t.scrollLeft+document.body.scrollLeft,i=t.scrollTop+document.body.scrollTop,a=n.left+r,s=n.top+i;return{left:a,top:s}};e.utils.roundedRectangle=function(e,t,n,r,i){return"M"+e+","+t+"h"+(n-i*2)+"a"+i+","+i+" 0 0 1 "+i+","+i+"v"+(r-2-i*2)+"a"+i+","+i+" 0 0 1 "+-i+","+i+"h"+(i*2-n)+"a"+-i+","+i+" 0 0 1 "+-i+","+-i+"v"+(-r+i*2+2)+"a"+i+","+i+" 0 0 1 "+i+","+-i+"z"};e.utils.dropShadow=function(e,t,n){var r=n||{},i=r.height||"130%",a=r.offset||2,s=r.blur||1;if(t.select("#"+e).empty()){var o=t.append("filter").attr("id",e).attr("height",i);var l=o.append("feOffset").attr("in","SourceGraphic").attr("result","offsetBlur").attr("dx",a).attr("dy",a);var u=o.append("feColorMatrix").attr("in","offsetBlur").attr("result","matrixOut").attr("type","matrix").attr("values","1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0");var c=o.append("feGaussianBlur").attr("in","matrixOut").attr("result","blurOut").attr("stdDeviation",s);var f=o.append("feMerge");f.append("feMergeNode");f.append("feMergeNode").attr("in","SourceGraphic")}return"url(#"+e+")"};e.utils.stringSetLengths=function(e,t,n,r,i){var a=[],s=t.select(".tmp-text-strings").select("text");if(s.empty()){s=t.append("g").attr("class","tmp-text-strings").append("text")}s.classed(r,true);s.style("display","inline");e.forEach(function(e,t){s.text(n(e,t));a.push(s.node().getBoundingClientRect().width)});s.text("").attr("class","tmp-text-strings").style("display","none");return a};e.utils.stringSetThickness=function(e,t,n,r,i){var a=[],s=t.select(".tmp-text-strings").select("text");if(s.empty()){s=t.append("g").attr("class","tmp-text-strings").append("text")}s.classed(r,true);s.style("display","inline");e.forEach(function(e,t){s.text(n(e,t));a.push(s.node().getBoundingClientRect().height)});s.text("").attr("class","tmp-text-strings").style("display","none");return a};e.utils.maxStringSetLength=function(t,n,r){var i=e.utils.stringSetLengths(t,n,r);return d3.max(i)};e.utils.stringEllipsify=function(e,t,n){var r=t.select(".tmp-text-strings").select("text"),i=e,a=0,s=0,o=0;if(r.empty()){r=t.append("g").attr("class","tmp-text-strings").append("text")}r.style("display","inline");r.text("...");s=r.node().getBoundingClientRect().width;r.text(i);a=r.node().getBoundingClientRect().width;o=a;while(a>n&&a>30){i=i.slice(0,-1);r.text(i);a=r.node().getBoundingClientRect().width+s}r.text("");return i+(o>n?"...":"")};e.utils.getTextBBox=function(e,t){var n=e.node().getBoundingClientRect(),r={width:t?n.width:parseInt(n.width,10),height:t?n.height:parseInt(n.height,10)};return r};e.utils.getTextContrast=function(e,t,n){var r=e,i=d3.lab(r),a=i.l,s=a>60?i.darker(4+(a-75)/25).l:i.brighter(4+(18-a)/25).l,o=d3.lab(s,0,0),l=o.toString();if(n){n(i,o)}return l};e.utils.isRTLChar=function(e){var t="---",n=new RegExp("["+t+"]");return n.test(e)};e.utils.polarToCartesian=function(t,n,r,i){var a=e.utils.angleToRadians(i);var s=t+r*Math.cos(a);var o=n+r*Math.sin(a);return[s,o]};e.utils.angleToRadians=function(e){return e*Math.PI/180};e.utils.angleToDegrees=function(e){return e*180/Math.PI};e.utils.createTexture=function(e,t,n,r){var i="#nv-diagonalHatch-"+t,a="#nv-textureMask-"+t;e.append("pattern").attr("id","nv-diagonalHatch-"+t).attr("patternUnits","userSpaceOnUse").attr("width",8).attr("height",8).append("path").attr("d","M-1,1 l2,-2 M0,8 l8,-8 M7,9 l1,-1").attr("class","texture-line").attr("stroke","#fff").attr("stroke-linecap","square");e.append("mask").attr("id","nv-textureMask-"+t).attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").append("rect").attr("x",n||0).attr("y",r||-1).attr("width","100%").attr("height","100%").attr("fill","url("+i+")");return a};e.utils.numberFormatSI=function(e,t,n,r){var i,a,s;if(isNaN(e)){return e}t=typeof t==="undefined"?2:t;n=typeof n==="undefined"?false:!!n;i=typeof r==="undefined"?d3.format:d3.locale(r).numberFormat;e=d3.round(e,t);a=n?"$,":",";if(n&&e<1e3&&e!==parseInt(e,10)){a+=".2f"}if(e<1&&e>-1){return i(a)(e)}s=d3.formatPrefix(e);return i(a)(d3.round(s.scale(e),t))+s.symbol};e.utils.numberFormatRound=function(e,t,n,r){var i,a;if(isNaN(e)){return e}n=typeof n==="undefined"?false:!!n;t=typeof t==="undefined"?n?2:0:t;i=typeof r==="undefined"?d3.format:d3.locale(r).numberFormat;a=n?"$,."+t+"f":",";return i(a)(t?d3.round(e,t):e)};e.utils.isValidDate=function(e){var t;if(!e){return false}t=new Date(e);return t instanceof Date&&!isNaN(t.valueOf())};e.utils.dateFormat=function(t,n,r){var i,a,s,o;i=new Date(t);if(!(i instanceof Date)||isNaN(i.valueOf())){return t}if(r&&r.hasOwnProperty("timeFormat")){s=n.indexOf("%")!==-1?n:"%x";o=r.timeFormat}else{a=e.utils.buildLocality(r);s=n.indexOf("%")!==-1?n:a[n]||"%x";o=d3.locale(a).timeFormat}return o(s)(i)};e.utils.buildLocality=function(e,t){var n=e||{},r=!!t,i=function(e){return e.join("|").split("|").map(function(e){return!e?"":isNaN(e)?e:+e})},a={decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%B %-d, %Y at %X %p GMT%Z",date:"%b %-d, %Y",time:"%-I:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],full:"%A, %c","long":"%c",medium:"%x, %X %p","short":"%-m/%-d/%y, %-I:%M %p",yMMMEd:"%a, %x",yMEd:"%a, %-m/%-d/%Y",yMMMMd:"%B %-d, %Y",yMMMd:"%x",yMd:"%-m/%-d/%Y",yMMMM:"%B %Y",yMMM:"%b %Y",MMMd:"%b %-d",MMMM:"%B",MMM:"%b",y:"%Y"};for(var s in n){var t;if(e.hasOwnProperty(s)){t=n[s];a[s]=!r||!Array.isArray(t)?t:i(t)}}return a};e.models.axis=function(){var t=d3.scale.linear(),n=null,r=true,i=true,a="ltr",s=false,o=false,l=30,u=false,c=true,f=false,d=null,h=null,p=function(e){return e},m=8;var g={top:0,right:0,bottom:0,left:0},_=0;var v=d3.svg.axisStatic().scale(t).orient("bottom").tickFormat(function(e){return p(e)});var y;function b(u){u.each(function(u){var p=d3.select(this);var M=v.scale().copy();var x={top:0,right:0,bottom:0,left:0};var w=ee();var S=Math.abs(w[1]-w[0]);y=y||v.scale();var k=v.orient()==="left"||v.orient()==="right"?true:false,L=v.orient()==="left"||v.orient()==="top"?-1:1,T=0,E=0,D=6,A=0,Y=0;var C=[],R={},O=[],P={},I={};_=0;if(h!==null){v.ticks(h)}else if(k){v.ticks(Math.ceil(S/48))}else{v.ticks(Math.ceil(S/100))}if(l&&!isFinite(String(l))){l=30}if(f){r=false}var N=p.selectAll("g.nv-wrap.nv-axis").data([u]),F=N.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g").attr("class","nv-axis-inner"),H=N.select(".nv-axis-inner");H.call(v);var j=H.selectAll("g.tick");var U=r?d3.extent(t.domain()):[];var B=H.selectAll("g.nv-axisMaxMin").data(U);var z=B.enter().append("g").attr("class","nv-axisMaxMin");z.append("text").style("opacity",0);z.append("line").style("opacity",0);B.exit().remove();if(r){B.select("text").text(function(e,t){return v.tickFormat()(e,t,false)})}var W=H.selectAll("g.tick, g.nv-axisMaxMin").select("text").filter(function(e){return this.getBoundingClientRect().width});W.each(function(e,t){O.push(d3.select(this).text())});var q=!!n?[n]:[];var G=N.selectAll("text.nv-axislabel").data(q);G.enter().append("text").attr("class","nv-axislabel").text(function(e){return e});G.exit().remove();var V=false,$=false,J=false;if(k){de();W.style("text-anchor",ae(d||(se()?"start":"end")))}else{de();fe();if(ce(1)){if(s){de();he();fe();he();if(!ce(1)){V=true}}if(!V&&o){de();pe();fe();pe();if(!ce(2)){$=true}}if(!V&&!$){if(!l){l=30}de();me(l);fe(l);me(l);J=true}}}if(r){B.select("line").attr("x1",0).attr("y1",0).attr("y2",k?0:(v.tickSize()-x.bottom)*L).attr("x2",k?v.tickSize()*L:0).style("opacity",function(e,t){return se()?t?0:1:t?1:0});j.each(function(e,t){var n=d3.select(this),r=R["key-"+e.toString()],i=false;if(k){i=r.bottom>P.top||r.top<I.bottom;n.select("line").style("opacity",1-i)}else if(J){i=false}else if($){i=(r.left<P.right+D||r.right>I.left+D)&&(r.bottom<P.top||r.top>I.bottom)}else{i=r.left<P.right+D||r.right>I.left+D}n.select("text").style("opacity",1-i)})}else{j.filter(function(e){return M(e)===w[0+se()]}).classed("zero",i);j.select("line").style("opacity",function(e,t){return M(e)===w[0+se()]?0:1})}if(!!n){var X=k?c?S/-2:(_+m)*L:S/2;var Z=k?c?(_+m)*L:S/2:(_+m)*L;G.attr("x",X).attr("y",Z).attr("dy",.355+.355*L+"em").attr("transform",k&&c?"rotate(-90)":"").style("text-anchor",k&&!c?ae("end"):"middle");G.each(function(e,t){Y+=k?parseInt(this.getBoundingClientRect().width/1.3,10):parseInt(this.getBoundingClientRect().height/1.3,10)});_+=Y+m}y=t.copy();g={top:x.top,right:x.right,bottom:x.bottom,left:x.left};g[v.orient()]=_;function K(){return M.range().length>1?Math.abs(M.range()[1]-M.range()[0]):0}function Q(){return M.range().length>1?Math.max(.25,1-d3.round(M.rangeBand()/K(),2)):0}function ee(){return typeof M.rangeExtent==="function"?M.rangeExtent():M.range()}function te(){return f?M.rangeBand():0}function ne(){return f?M.range()[0]:0}function re(){return ne()/ie()}function ie(){var e=0,t;if(f){e=M.range().length>1?Math.abs(M.range()[1]-M.range()[0]):d3.max(ee())/2}else{t=M.ticks(j.size());e=M(t[t.length-1])-M(t[t.length-2])}return e}function ae(e){if(a==="rtl"){if(e==="start"){return"end"}else if(e==="end"){return"start"}}return e}function se(){return v.orient()!=="left"&&v.orient()!=="bottom"}function oe(e){e=e||1;_=v.tickPadding()+(k?T:E)*e}function le(){ue();T=d3.max(C,function(e){return e.width});E=d3.max(C,function(e){return e.height})}function ue(){C=[];R={};if(r){B.style("opacity",1).attr("transform",function(e,t){var n=k?"0,"+M(e):M(e)+",0";return"translate("+n+")"})}W.each(function(e,t){var n=this.getBoundingClientRect();if(n.width>0){C.push({key:e,width:parseInt(n.width,10),height:parseInt(n.height/1.2,10),left:n.left,right:n.right,top:n.top,bottom:n.bottom})}});C.sort(function(e,t){return e.key-t.key}).forEach(function(e,t){e.index=t;R["key-"+e.key.toString()]=e});P=C[0];I=C[C.length-1]}function ce(e){ue();var t=r?2:e||1;for(var n=r?1:0,i=C.length-t;n<i;n+=1){if(C[n].right+D>C[n+e].left){return true}}return false}function fe(e){var t=e?(e+180)%180:0,n=t>90,r=null,i=null;C.forEach(function(e,a){var s=r===null||e.left<=r,o=i===null||e.right>=i,l=0,u=0,c=0,l=0;if(!s&&!o){return}l=t?e.width-6:e.width/2;u=M(e.key)+f*te()/2;if(s&&(!t||n)){r=e.left;c=Math.abs(w[0]-u);x.left=Math.max(l-c,0)}if(o&&(!t||!n)){i=e.right;c=Math.abs(w[1]-u);x.right=Math.max(l-c,0)}});if(!f){var a=g.right-Math.max(g.right,x.right);a+=g.left-Math.max(g.left,x.left);var s=[w[0],w[1]+a];M.range(s);w=ee();S=Math.abs(w[1]-w[0]);v.scale(M);H.call(v)}}function de(){x={top:0,right:0,bottom:0,left:0};M=t.copy();w=ee();S=Math.abs(w[1]-w[0]);v.scale(t);H.call(v);W.selectAll("tspan").remove();W.attr("dy",k?".32em":.355+.355*L+"em").attr("x",k?v.tickPadding()*L:0).attr("y",k?0:v.tickPadding()*L).attr("transform","translate(0,0)").text(function(e,t){return O[t]}).style("text-anchor","middle").style("opacity",1);le();oe()}function he(){A=ie();W.each(function(t,n){var r=v.tickFormat()(t,n,true),i=d3.select(this),a=e.utils.isValidDate(r),s=(r&&r!==""?a?r.toString():r.toString().replace("/","/ "):"").split(" "),n=0,o=s.length,l=L===1?.71:-1;this.textContent="";var u,c=i.append("tspan").text(s[n]+" ").attr("dy",l+"em").attr("x",0);n+=1;l=1;while(n<o){c=i.append("tspan").text(s[n]+" ").attr("dy",l+"em").attr("x",0);n+=1;while(n<o){u=c.text();c.text(u+" "+s[n]);if(this.getBoundingClientRect().width<=A){n+=1}else{c.text(u);break}}}});le();oe()}function pe(){W.attr("transform",function(e,t){var n=R["key-"+e.toString()].index%2*(E+2);return"translate(0,"+n+")"});le();oe(2)}function me(e){var t=(e+180)%180,n=t>90,r=(t-(n?180:0))*L,i=ae(n?"end":"start"),a=Math.abs(Math.cos(e*Math.PI/180));W.attr("transform",function(e,t,n){return"translate(0,"+v.tickPadding()*L+") rotate("+r+")"}).attr("y","0").style("text-anchor",i);le();oe();_+=a*11}b.resizeTickLines=function(e){H.selectAll("g.tick, g.nv-axisMaxMin").select("line").attr(k?"x2":"y2",e*L)};b.labelThickness=function(){return Y}});return b}b.axis=v;d3.rebind(b,v,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat");d3.rebind(b,t,"domain","range","rangeBand","rangeBands");b.width=function(e){if(!arguments.length){return _}return b};b.height=function(e){if(!arguments.length){return _}return b};b.margin=function(e){if(!arguments.length){return g}g=e;return b};b.ticks=function(e){if(!arguments.length){return h}h=e;return b};b.valueFormat=function(e){if(!arguments.length){return p}p=e;return b};b.axisLabel=function(e){if(!arguments.length){return n}n=e;return b};b.showMaxMin=function(e){if(!arguments.length){return r}r=e;return b};b.highlightZero=function(e){if(!arguments.length){return i}i=e;return b};b.scale=function(e){if(!arguments.length){return t}t=e;v.scale(t);f=typeof t.rangeBands==="function";d3.rebind(b,t,"domain","range","rangeBand","rangeBands");return b};b.wrapTicks=function(e){if(!arguments.length){return s}s=e;return b};b.rotateTicks=function(e){if(!arguments.length){return l}l=e;return b};b.staggerTicks=function(e){if(!arguments.length){return o}o=e;return b};b.reduceXTicks=function(e){if(!arguments.length){return u}u=e;return b};b.rotateYLabel=function(e){if(!arguments.length){return c}c=e;return b};b.axisLabelDistance=function(e){if(!arguments.length){return m}m=e;return b};b.maxLabelWidth=function(e){if(!arguments.length){return maxLabelWidth}maxLabelWidth=e;return b};b.textAnchor=function(e){if(!arguments.length){return d}d=e;return b};b.direction=function(e){if(!arguments.length){return a}a=e;return b};return b};e.models.legend=function(){var t={top:10,right:10,bottom:15,left:10},n=0,r=0,i="right",a="ltr",s="start",o=6,l=o*2,u=10,c=12,f=5,d=true,h=false,p=false,m=false,g=3,_=false,v={close:"Hide legend",type:"Show legend",noLabel:"undefined"},y=Math.floor(Math.random()*1e4),b=function(e){return e.key.length>0||!isNaN(parseFloat(e.key))&&isFinite(e.key)?e.key:D.strings().noLabel},M=function(t,n){return e.utils.defaultColor()(t,n)},x=function(e,t){return""},w=d3.dispatch("legendClick","legendMouseover","legendMouseout","toggleMenu","closeMenu");var S=0;var k=false,L=true,T=0,E=function(e){return};function D(v){v.each(function(v){var A=d3.select(this),Y=n,C=r,R=[],O=0,P=0,I="",N=s==="start"?true:false,F=a==="rtl"?true:false,H=c*(N?1:.6),j=u+(N?l+f:0);if(!v||!v.length||!v.filter(function(e){return!e.values||e.values.length}).length){return D}var U=v.filter(function(e){return e.hasOwnProperty("series")}).length;v.filter(function(e){return!e.hasOwnProperty("series")}).map(function(e,t){e.series=U;U+=1});_=true;I=!v[0].type||v[0].type==="bar"?"bar":"line";i=F&&i!=="center"?i==="left"?"right":"left":i;var B=A.selectAll("g.nv-chart-legend").data([v]);var z=B.enter().append("g").attr("class","nv-chart-legend");z.append("defs").append("clipPath").attr("id","nv-edge-clip-"+y).append("rect");var W=B.select("defs");var q=B.select("#nv-edge-clip-"+y+" rect");z.append("rect").attr("class","nv-legend-background");var G=B.select(".nv-legend-background");var V=e.utils.dropShadow("legend_back_"+y,W,{blur:2});z.append("text").attr("class","nv-legend-link");var $=B.select(".nv-legend-link");z.append("g").attr("class","nv-legend-mask").append("g").attr("class","nv-legend");var J=B.select(".nv-legend-mask");var X=B.select("g.nv-legend");X.attr("transform","translate(0,0)");var Z=X.selectAll(".nv-series").data(e.identity,function(e){return e.key});Z.exit().remove();var K=Z.enter().append("g").attr("class","nv-series").on("mouseover",function(e,t){w.legendMouseover(e,t)}).on("mouseout",function(e,t){w.legendMouseout(e,t)}).on("click",function(e,t){d3.event.preventDefault();d3.event.stopPropagation();w.legendClick(e,t)});var Q=X.selectAll(".nv-series");K.append("rect").attr("x",(l+f)/-2).attr("y",(l+H)/-2).attr("width",l+f).attr("height",l+H).style("fill","#FFE").style("opacity",.1);var ee=Z.selectAll("circle").data(function(e){return I==="line"?[e,e]:[e]});ee.exit().remove();ee.enter().append("circle").attr("r",o).attr("stroke","#fff").style("stroke-width",2);if(I==="line"){var te=Z.selectAll("line").data(function(e){return[e]});te.exit().remove();te.enter().append("line").attr("x0",0).attr("y0",0).attr("y1",0).style("stroke-width","4px")}K.append("text").attr("dy",N?".36em":".71em").attr("dx",0);q.attr("x",.5).attr("y",.5).attr("width",0).attr("height",0);G.attr("x",.5).attr("y",.5).attr("width",0).attr("height",0).style("opacity",0).style("pointer-events","all").on("click",function(e,t){d3.event.stopPropagation()});$.text(S===1?D.strings().close:D.strings().open).attr("text-anchor",i==="left"?F?"end":"start":F?"start":"end").attr("dy",".36em").attr("dx",0).style("opacity",0).on("click",function(e,t){d3.event.preventDefault();d3.event.stopPropagation();w.toggleMenu(e,t)});Q.selectAll("circle").attr("class",function(e,t){return x(e,t)}).attr("fill",function(e,t){return M(e,t)}).attr("stroke",function(e,t){return M(e,t)});Q.select("line").attr("class",function(e,t){return x(e,t)}).attr("stroke",function(e,t){return M(e,t)});Q.select("text").text(b);Q.classed("disabled",function(e){return e.disabled});D.calculateWidth=function(){R=[];X.style("display","inline");Q.select("text").each(function(e,t){var n=d3.select(this).node().getBoundingClientRect().width;R.push(Math.max(Math.floor(n),I==="line"?50:20))});D.width(d3.sum(R)+R.length*j-u);return D.width()};D.getLineHeight=function(){X.style("display","inline");var e=Math.floor(Q.select("text").node().getBoundingClientRect().height);return e};D.arrange=function(e){if(R.length===0){this.calculateWidth()}function n(e){return R[e]+j}function r(e){return R[e]+j-u}function a(e){return e?1:-1}var _=R.length,v=1,b=_,M=[],x=[],w=e-t.left-t.right,A=0,Y=0,U=this.getLineHeight(),B=l+(N?0:U)+H,z={top:7,right:7,bottom:7,left:7},W=0,Z=0,K,ee,te;if(d){while(b>0){M=[];for(K=0;K<_;K+=1){if(n(K)>(M[K%b]||0)){M[K%b]=n(K)}}if(d3.sum(M)-u<w){break}b-=1}b=b||1;v=Math.ceil(_/b);A=d3.sum(M)-u;for(K=0;K<_;K+=1){ee=K%b;if(N){if(ee===0){W=F?A:0}else{W+=M[ee-1]*a(!F)}}else{if(ee===0){W=(F?A:0)+(M[ee]-u)/2*a(!F)}else{W+=(M[ee-1]+M[ee])/2*a(!F)}}Z=Math.floor(K/b)*B;x[K]={x:W,y:Z}}}else{if(F){W=w;for(K=0;K<_;K+=1){if(W-r(K)<0){A=Math.max(A,r(K));W=w;if(K){v+=1}}if(W-r(K)>A){A=W-r(K)}x[K]={x:W,y:(v-1)*(H+l)};W-=n(K)}}else{W=0;for(K=0;K<_;K+=1){if(K&&W+r(K)>w){W=0;v+=1}if(W+r(K)>A){A=W+r(K)}x[K]={x:W,y:(v-1)*(H+l)};W+=n(K)}}}if(!p&&(h||v<=g)){S=0;m=false;k=false;D.width(t.left+A+t.right).height(t.top+v*B-H+t.bottom);switch(i){case"left":te=0;break;case"center":te=(e-D.width())/2;break;case"right":te=0;break}q.attr("y",0).attr("width",D.width()).attr("height",D.height());G.attr("x",te).attr("width",D.width()).attr("height",D.height()).attr("rx",0).attr("ry",0).attr("filter","none").style("display","inline").style("opacity",0);J.attr("clip-path","none").attr("transform",function(e,n){var r=te+t.left+(N?o*a(!F):0),i=t.top+z.top;return"translate("+r+","+i+")"});X.style("opacity",1).style("display","inline");Q.attr("transform",function(e){var t=x[e.series];return"translate("+t.x+","+t.y+")"});Q.select("rect").attr("x",function(e){var t=0;if(N){t=(l+u)/2*a(F);t-=F?n(e.series):0}else{t=n(e.series)/-2}return t}).attr("width",function(e){return n(e.series)}).attr("height",B);Q.selectAll("circle").attr("r",function(e){return e.type==="dash"?0:o}).attr("transform",function(e,t){var n=N||I==="bar"?0:o*3*a(t);return"translate("+n+",0)"});Q.select("line").attr("x1",function(e){return e.type==="dash"?o*8:o*4}).attr("transform",function(e){var t=o*(e.type==="dash"?-4:-2);return"translate("+t+",0)"}).style("stroke-dasharray",function(e){return e.type==="dash"?"8, 8":"none"}).style("stroke-dashoffset",-4);Q.select("text").attr("dy",N?".36em":".71em").attr("text-anchor",s).attr("transform",function(e){var t=N?(o+f)*a(!F):0,n=N?0:(l+H)/2;return"translate("+t+","+n+")"})}else{m=true;k=true;D.width(z.left+d3.max(R)+l+f+z.right).height(t.top+l+t.top);O=z.top+l*_+c*(_-1)+z.bottom;P=Math.min(C-D.height(),O);q.attr("x",.5-z.top-o).attr("y",.5-z.top-o).attr("width",D.width()).attr("height",P);G.attr("x",.5).attr("y",.5+D.height()).attr("width",D.width()).attr("height",P).attr("rx",2).attr("ry",2).attr("filter",V).style("opacity",S*.9).style("display",S?"inline":"none");$.attr("transform",function(e,n){
var r=i==="left"?.5:.5+D.width(),a=t.top+o;return"translate("+r+","+a+")"}).style("opacity",1);J.attr("clip-path","url(#nv-edge-clip-"+y+")").attr("transform",function(e,t){var n=z.left+o,r=D.height()+z.top+o;return"translate("+n+","+r+")"});X.style("opacity",S).style("display",S?"inline":"none").attr("transform",function(e,t){var n=F?d3.max(R)+o:0;return"translate("+n+",0)"});Q.attr("transform",function(e,t){var n=t*(l+c);return"translate(0,"+n+")"});Q.select("rect").attr("x",function(e){var t=(l+u)/2*a(F);t-=F?n(e.series):0;return t}).attr("width",function(e){return n(e.series)}).attr("height",l+H);Q.selectAll("circle").attr("r",function(e){return e.type==="dash"?0:e.type==="line"?o-2:o}).attr("transform","");Q.select("line").attr("x1",16).attr("transform","translate(-8,0)").style("stroke-dasharray",function(e){return e.type==="dash"?"6, 4, 6":"none"}).style("stroke-dashoffset",0);Q.select("text").attr("text-anchor","start").attr("dy",".36em").attr("transform",function(e){var t=(o+f)*a(!F);return"translate("+t+",0)"})}if(L){var ne=P-O;var re=function(e){if(e){var t=d3.behavior.zoom().on("zoom",ie);var n=d3.behavior.drag().origin(function(e){return e}).on("drag",ie);G.call(t);X.call(t);G.call(n);X.call(n)}else{G.on("mousedown.zoom",null).on("mousewheel.zoom",null).on("mousemove.zoom",null).on("DOMMouseScroll.zoom",null).on("dblclick.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null).on("wheel.zoom",null);X.on("mousedown.zoom",null).on("mousewheel.zoom",null).on("mousemove.zoom",null).on("DOMMouseScroll.zoom",null).on("dblclick.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null).on("wheel.zoom",null);G.on("mousedown.drag",null).on("mousewheel.drag",null).on("mousemove.drag",null).on("DOMMouseScroll.drag",null).on("dblclick.drag",null).on("touchstart.drag",null).on("touchmove.drag",null).on("touchend.drag",null).on("wheel.drag",null);X.on("mousedown.drag",null).on("mousewheel.drag",null).on("mousemove.drag",null).on("DOMMouseScroll.drag",null).on("dblclick.drag",null).on("touchstart.drag",null).on("touchmove.drag",null).on("touchend.drag",null).on("wheel.drag",null)}};var ie=function(){var e=0,t=0,n="",r=0,i=0;if(d3.event){if(d3.event.type==="zoom"&&d3.event.sourceEvent){r=d3.event.sourceEvent.deltaX||0;i=d3.event.sourceEvent.deltaY||0;e=(Math.abs(r)>Math.abs(i)?r:i)*-1}else if(d3.event.type==="drag"){r=d3.event.dx||0;i=d3.event.dy||0;e=i}else if(d3.event.type!=="click"){return 0}t=Math.abs(i)>Math.abs(r)?i:0}T=Math.min(Math.max(T+e,ne),0);n="translate("+(F?d3.max(R)+o:0)+","+T+")";if(T+e>0||T+e<ne){E(t)}X.attr("transform",n)};re(k)}};function ne(){G.style("opacity",S*.9).style("display",S?"inline":"none");X.style("opacity",S).style("display",S?"inline":"none");$.text(S===1?D.strings().close:D.strings().open)}w.on("toggleMenu",function(e){d3.event.stopPropagation();S=1-S;ne()});w.on("closeMenu",function(e){if(S===1){S=0;ne()}})});return D}D.dispatch=w;D.margin=function(e){if(!arguments.length){return t}t.top=typeof e.top!=="undefined"?e.top:t.top;t.right=typeof e.right!=="undefined"?e.right:t.right;t.bottom=typeof e.bottom!=="undefined"?e.bottom:t.bottom;t.left=typeof e.left!=="undefined"?e.left:t.left;return D};D.width=function(e){if(!arguments.length){return n}n=Math.round(e);return D};D.height=function(e){if(!arguments.length){return r}r=Math.round(e);return D};D.id=function(e){if(!arguments.length){return y}y=e;return D};D.key=function(e){if(!arguments.length){return b}b=e;return D};D.color=function(t){if(!arguments.length){return M}M=e.utils.getColor(t);return D};D.classes=function(e){if(!arguments.length){return x}x=e;return D};D.align=function(e){if(!arguments.length){return i}i=e;return D};D.position=function(e){if(!arguments.length){return s}s=e;return D};D.showAll=function(e){if(!arguments.length){return h}h=e;return D};D.showMenu=function(e){if(!arguments.length){return p}p=e;return D};D.collapsed=function(e){return m};D.rowsCount=function(e){if(!arguments.length){return g}g=e;return D};D.spacing=function(e){if(!arguments.length){return c}c=e;return D};D.gutter=function(e){if(!arguments.length){return u}u=e;return D};D.radius=function(e){if(!arguments.length){return o}o=e;return D};D.strings=function(e){if(!arguments.length){return v}v=e;return D};D.equalColumns=function(e){if(!arguments.length){return d}d=e;return D};D.enabled=function(e){if(!arguments.length){return _}_=e;return D};D.direction=function(e){if(!arguments.length){return a}a=e;return D};return D};e.models.scroll=function(){var e,t={},n,r,i,a,s,o,l;function u(c,f,d,h){var p=c.select("defs"),m=f.select("defs"),g,_,v=d.select(".nv-x.nv-axis"),y=d.select(".nv-barsWrap"),b,M;var x=0;u.init=function(e,t){x=e;o=t;this.gradients(l);this.mask(l);this.scrollTarget(l);this.backShadows(l);this.foreShadows(l);this.assignEvents(l);this.resize(l)};u.pan=function(e){var t=0,r=0,i="",a=0,s=0;if(d3.event){if(d3.event.type==="zoom"&&d3.event.sourceEvent){a=d3.event.sourceEvent.deltaX||0;s=d3.event.sourceEvent.deltaY||0;t=(Math.abs(a)>Math.abs(s)?a:s)*-1}else if(d3.event.type==="drag"){a=d3.event.dx||0;s=d3.event.dy||0;t=n?a:s}else if(d3.event.type!=="click"){return 0}r=Math.abs(s)>Math.abs(a)?s:0}x=Math.min(Math.max(x+t,e),-1);i="translate("+(n?x+",0":"0,"+x)+")";if(x+t>0||x+t<e){o(r)}M.attr("transform",i);y.attr("transform",i);v.select(".nv-wrap.nv-axis").attr("transform",i);return x};u.assignEvents=function(e){if(e){var t=d3.behavior.zoom().on("zoom",s);var n=d3.behavior.drag().origin(function(e){return e}).on("drag",s);d.call(t);_.call(t);d.call(n);_.call(n)}else{d.on("mousedown.zoom",null).on("mousewheel.zoom",null).on("mousemove.zoom",null).on("DOMMouseScroll.zoom",null).on("dblclick.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null).on("wheel.zoom",null);_.on("mousedown.zoom",null).on("mousewheel.zoom",null).on("mousemove.zoom",null).on("DOMMouseScroll.zoom",null).on("dblclick.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null).on("wheel.zoom",null);d.on("mousedown.drag",null).on("mousewheel.drag",null).on("mousemove.drag",null).on("DOMMouseScroll.drag",null).on("dblclick.drag",null).on("touchstart.drag",null).on("touchmove.drag",null).on("touchend.drag",null).on("wheel.drag",null);_.on("mousedown.drag",null).on("mousewheel.drag",null).on("mousemove.drag",null).on("DOMMouseScroll.drag",null).on("dblclick.drag",null).on("touchstart.drag",null).on("touchmove.drag",null).on("touchend.drag",null).on("wheel.drag",null)}};u.resize=function(e){if(!e){return}var s=h.labelThickness()+h.tickPadding()/2,o=n,l=o?t.left:s,u=t.top,c=r+(o?0:t[h.orient()]-s),f=i+(o?t[h.orient()]-s:0),d=o?"height":"width",p=o?f:c;g.attr("x",o?2:-t.left).attr("y",o?0:2).attr("width",r+(o?-2:t.left)).attr("height",i+(o?t.bottom:-2));_.attr("x",l).attr("y",u).attr("width",c).attr("height",f);b.select(".nv-back-shadow-prev").attr("x",l).attr("y",u).attr(d,p);b.select(".nv-back-shadow-more").attr("x",l+(o?r-5:1)).attr("y",u+(o?0:i-6)).attr(d,p);M.select(".nv-fore-shadow-prev").attr("x",l+(o?1:0)).attr("y",u+(o?0:1)).attr(d,p);M.select(".nv-fore-shadow-more").attr("x",l+(o?a-17:0)).attr("y",u+(o?0:a-19)).attr(d,p)};u.gradients=function(t){m.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-back-gradient-prev-"+e);var r=m.select("#nv-back-gradient-prev-"+e);m.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-back-gradient-more-"+e);var i=m.select("#nv-back-gradient-more-"+e);m.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-fore-gradient-prev-"+e);var a=m.select("#nv-fore-gradient-prev-"+e);m.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-fore-gradient-more-"+e);var s=m.select("#nv-fore-gradient-more-"+e);p.selectAll(".nv-scroll-gradient").attr("gradientUnits","objectBoundingBox").attr("x1",0).attr("y1",0).attr("x2",n?1:0).attr("y2",n?0:1);r.append("stop").attr("stop-color","#000").attr("stop-opacity","0.3").attr("offset",0);r.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",1);i.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",0);i.append("stop").attr("stop-color","#000").attr("stop-opacity","0.3").attr("offset",1);a.append("stop").attr("stop-color","#FFF").attr("stop-opacity","1").attr("offset",0);a.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",1);s.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",0);s.append("stop").attr("stop-color","#FFF").attr("stop-opacity","1").attr("offset",1)};u.mask=function(t){m.append("clipPath").attr("class","nv-scroll-mask").attr("id","nv-edge-clip-"+e).append("rect");g=p.select(".nv-scroll-mask rect");d.attr("clip-path",t?"url(#nv-edge-clip-"+e+")":"")};u.scrollTarget=function(e){f.select(".nv-scroll-background").append("rect").attr("class","nv-scroll-target").attr("fill","transparent");_=c.select(".nv-scroll-target")};u.backShadows=function(t){var r=f.select(".nv-scroll-background").append("g").attr("class","nv-back-shadow-wrap");r.append("rect").attr("class","nv-back-shadow-prev");r.append("rect").attr("class","nv-back-shadow-more");b=c.select(".nv-back-shadow-wrap");if(t){var i=n?"width":"height";b.select("rect.nv-back-shadow-prev").attr("fill","url(#nv-back-gradient-prev-"+e+")").attr(i,7);b.select("rect.nv-back-shadow-more").attr("fill","url(#nv-back-gradient-more-"+e+")").attr(i,7)}else{b.selectAll("rect").attr("fill","transparent")}};u.foreShadows=function(t){var r=f.select(".nv-scroll-background").insert("g").attr("class","nv-fore-shadow-wrap");r.append("rect").attr("class","nv-fore-shadow-prev");r.append("rect").attr("class","nv-fore-shadow-more");M=c.select(".nv-fore-shadow-wrap");if(t){var i=n?"width":"height";M.select("rect.nv-fore-shadow-prev").attr("fill","url(#nv-fore-gradient-prev-"+e+")").attr(i,20);M.select("rect.nv-fore-shadow-more").attr("fill","url(#nv-fore-gradient-more-"+e+")").attr(i,20)}else{M.selectAll("rect").attr("fill","transparent")}};return u}u.id=function(t){if(!arguments.length){return e}e=t;return u};u.margin=function(e){if(!arguments.length){return t}t.top=typeof e.top!="undefined"?e.top:t.top;t.right=typeof e.right!="undefined"?e.right:t.right;t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom;t.left=typeof e.left!="undefined"?e.left:t.left;return u};u.width=function(e){if(!arguments.length){return r}r=e;return u};u.height=function(e){if(!arguments.length){return i}i=e;return u};u.vertical=function(e){if(!arguments.length){return n}n=e;return u};u.minDimension=function(e){if(!arguments.length){return a}a=e;return u};u.panHandler=function(e){if(!arguments.length){return s}s=d3.functor(e);return u};u.enable=function(e){if(!arguments.length){return l}l=e;return u};return u};e.models.scatter=function(){var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=function(t,n){return e.utils.defaultColor()(t,t.series)},a=i,s=function(e,t){return"nv-group nv-series-"+e.series},o=Math.floor(Math.random()*1e5),l=d3.scale.linear(),u=d3.scale.linear(),c=d3.scale.linear(),f=function(e){return e.x},d=function(e){return e.y},h=function(e){return e.size||1},p=function(e){return e.shape||"circle"},m=e.utils.buildLocality(),g=true,_=[],v=[],y=[],b=true,M=function(e){return!e.notActive},x=false,w=.1,S=false,k=true,L=true,T=function(e,t){return Math.sqrt(c(h(e,t))/Math.PI)},E=function(e,t){return c(h(e,t))},D=null,A=null,Y=null,C=[16,256],R=false,O=d3.dispatch("elementClick","elementMouseover","elementMouseout","elementMousemove"),P=false;var I,N,F,H,j=false;function U(m){m.each(function(m){var B=n-t.left-t.right,z=r-t.top-t.bottom,W=d3.select(this);m=m.map(function(e,t){e.values=e.values.map(function(e){e.series=t;return e});return e});var q=D&&A&&Y?[]:d3.merge(m.map(function(e){return e.values.map(function(e,t){return{x:f(e,t),y:d(e,t),size:h(e,t)}})}));U.resetDimensions=function(e,i){n=e;r=i;B=e-t.left-t.right;z=i-t.top-t.bottom;G()};function G(){l.domain(D||d3.extent(q.map(function(e){return e.x}).concat(_)));u.domain(A||d3.extent(q.map(function(e){return e.y}).concat(v)));if(x&&m[0]){if(w===-1){var e=Math.sqrt(C[1]/Math.PI);l.range([0+e,B-e]);u.range([z-e,0+e])}else if(w<1){l.range([(B*w+B)/(2*m[0].values.length),B-B*(1+w)/(2*m[0].values.length)]);u.range([z,0])}else{l.range([w,B-w]);u.range([z-w,w])}}else{l.range([0,B]);u.range([z,0])}if(P){u.nice()}c.domain(Y||d3.extent(q.map(function(e){return e.size}).concat(y))).range(C);if(l.domain()[0]===l.domain()[1]||u.domain()[0]===u.domain()[1])R=true;if(l.domain()[0]===l.domain()[1])l.domain()[0]?l.domain([l.domain()[0]-l.domain()[0]*.1,l.domain()[1]+l.domain()[1]*.1]):l.domain([-1,1]);if(u.domain()[0]===u.domain()[1])u.domain()[0]?u.domain([u.domain()[0]-u.domain()[0]*.1,u.domain()[1]+u.domain()[1]*.1]):u.domain([-1,1]);if(c.domain().length<2){c.domain([0,c.domain()])}I=I||l;N=N||u;F=F||c}G();var V=W.selectAll("g.nv-wrap.nv-scatter").data([m]);var $=V.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+o);var J=$.append("defs");var X=$.append("g");var Z=V.select("g");U.gradient=function(t,n){return e.utils.colorRadialGradient(t,o+"-"+n,{x:.5,y:.5,r:.5,s:0,u:"objectBoundingBox"},i(t,n),V.select("defs"))};X.append("g").attr("class","nv-groups");X.append("g").attr("class","nv-point-paths");V.classed("nv-single-point",R).attr("transform","translate("+t.left+","+t.top+")");J.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect");V.select("#nv-edge-clip-"+o+" rect").attr("width",B).attr("height",z);Z.attr("clip-path",S?"url(#nv-edge-clip-"+o+")":"");function K(){if(!b)return false;var e;function t(e,t,n,r){var i=m[r];return{series:i,point:i.values[n],pointIndex:n,seriesIndex:i.series,id:o,e:e}}if(k===true){var i=d3.merge(m.map(function(e,t){return e.values.map(function(e,n){var r=f(e,n);var i=d(e,n);return[l(r)+Math.random()*1e-4,u(i)+Math.random()*1e-4,t,n,e]}).filter(function(e,t){return M(e[4],t)})}));if(L){var a=V.select("defs").selectAll(".nv-point-clips").data([o]).enter();a.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+o);var s=V.select("#nv-points-clip-"+o).selectAll("circle").data(i);s.enter().append("circle");s.exit().remove();s.attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}).attr("r",function(e,t){return T(e[4],t)});V.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+o+")")}if(i.length<=3){i.push([l.range()[0]-20,u.range()[0]-20,null,null]);i.push([l.range()[1]+20,u.range()[1]+20,null,null]);i.push([l.range()[0]-20,u.range()[0]+20,null,null]);i.push([l.range()[1]+20,u.range()[1]-20,null,null])}var c=d3.geom.polygon([[-10,-10],[-10,r+10],[n+10,r+10],[n+10,-10]]);var h=d3.geom.voronoi(i).map(function(e,t){return{data:c.clip(e),series:i[t][2],point:i[t][3]}}).filter(function(e){return e.series!==null});var p=V.select(".nv-point-paths").selectAll("path").data(h);p.enter().append("path").attr("class",function(e,t){return"nv-path-"+t});p.exit().remove();p.attr("d",function(e){return"M"+e.data.join("L")+"Z"});p.on("click",function(e){if(j)return 0;O.elementClick(t(d3.event,e,e.point,e.series))}).on("mouseover",function(e){if(j)return 0;O.elementMouseover(t(d3.event,e,e.point,e.series))}).on("mousemove",function(e,t){O.elementMousemove(d3.event)}).on("mouseout",function(e,n){if(j)return 0;O.elementMouseout(t(d3.event,e,e.point,e.series))})}else{V.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").style("pointer-events","auto").on("click",function(e,n){if(j||!m[e.series])return 0;O.elementClick(t(d3.event,e,n,e.series))}).on("mouseover",function(e,n){if(j||!m[e.series])return 0;O.elementMouseover(t(d3.event,e,n,e.series))}).on("mousemove",function(e,t){O.elementMousemove(d3.event)}).on("mouseout",function(e,n){if(j||!m[e.series])return 0;O.elementMouseout(t(d3.event,e,e.point,e.series))})}j=false}j=true;var Q=V.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});Q.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);d3.transition(Q.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();Q.attr("class",function(e,t){return s(e,e.series)}).attr("fill",function(e,t){return a(e,e.series)}).attr("stroke",function(e,t){return a(e,e.series)}).classed("hover",function(e){return e.hover});d3.transition(Q).style("stroke-opacity",1).style("fill-opacity",.5);if(g){var ee=Q.selectAll("circle.nv-point").data(function(e){return e.values});ee.enter().append("circle").attr("cx",function(e,t){return I(f(e,t))}).attr("cy",function(e,t){return N(d(e,t))}).attr("r",T);ee.exit().remove();d3.transition(Q.exit().selectAll("path.nv-point")).attr("cx",function(e,t){return l(f(e,t))}).attr("cy",function(e,t){return u(d(e,t))}).remove();ee.attr("class",function(e,t){return"nv-point nv-point-"+t});d3.transition(ee).attr("cx",function(e,t){return l(f(e,t))}).attr("cy",function(e,t){return u(d(e,t))}).attr("r",T)}else{var ee=Q.selectAll("path.nv-point").data(function(e){return e.values});ee.enter().append("path").attr("transform",function(e,t){return"translate("+I(f(e,t))+","+N(d(e,t))+")"}).attr("d",d3.svg.symbol().type(p).size(E));ee.exit().remove();d3.transition(Q.exit().selectAll("path.nv-point")).attr("transform",function(e,t){return"translate("+l(f(e,t))+","+u(d(e,t))+")"}).remove();ee.attr("class",function(e,t){return"nv-point nv-point-"+t});d3.transition(ee).attr("transform",function(e,t){return"translate("+l(f(e,t))+","+u(d(e,t))+")"}).attr("d",d3.svg.symbol().type(p).size(E))}clearTimeout(H);H=setTimeout(K,300);I=l.copy();N=u.copy();F=c.copy()});return U}O.on("elementMouseover.point",function(e){if(b)d3.select(".nv-chart-"+o+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",true)});O.on("elementMouseout.point",function(e){if(b)d3.select(".nv-chart-"+o+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",false)});U.dispatch=O;U.color=function(e){if(!arguments.length)return i;i=e;return U};U.fill=function(e){if(!arguments.length)return a;a=e;return U};U.classes=function(e){if(!arguments.length)return s;s=e;return U};U.gradient=function(e){if(!arguments.length)return gradient;gradient=e;return U};U.x=function(e){if(!arguments.length)return f;f=d3.functor(e);return U};U.y=function(e){if(!arguments.length)return d;d=d3.functor(e);return U};U.size=function(e){if(!arguments.length)return h;h=d3.functor(e);return U};U.margin=function(e){if(!arguments.length)return t;t.top=typeof e.top!="undefined"?e.top:t.top;t.right=typeof e.right!="undefined"?e.right:t.right;t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom;t.left=typeof e.left!="undefined"?e.left:t.left;return U};U.width=function(e){if(!arguments.length)return n;n=e;return U};U.height=function(e){if(!arguments.length)return r;r=e;return U};U.xScale=function(e){if(!arguments.length)return l;l=e;return U};U.yScale=function(e){if(!arguments.length)return u;u=e;return U};U.zScale=function(e){if(!arguments.length)return c;c=e;return U};U.xDomain=function(e){if(!arguments.length)return D;D=e;return U};U.yDomain=function(e){if(!arguments.length)return A;A=e;return U};U.sizeDomain=function(e){if(!arguments.length)return Y;Y=e;return U};U.sizeRange=function(e){if(!arguments.length)return C;C=e;return U};U.forceX=function(e){if(!arguments.length)return _;_=e;return U};U.forceY=function(e){if(!arguments.length)return v;v=e;return U};U.forceSize=function(e){if(!arguments.length)return y;y=e;return U};U.interactive=function(e){if(!arguments.length)return b;b=e;return U};U.pointActive=function(e){if(!arguments.length)return M;M=e;return U};U.padData=function(e){if(!arguments.length)return x;x=e;return U};U.padDataOuter=function(e){if(!arguments.length)return w;w=e;return U};U.clipEdge=function(e){if(!arguments.length)return S;S=e;return U};U.clipVoronoi=function(e){if(!arguments.length)return L;L=e;return U};U.useVoronoi=function(e){if(!arguments.length)return k;k=e;if(k===false){L=false}return U};U.circleRadius=function(e){if(!arguments.length)return T;T=e;return U};U.shape=function(e){if(!arguments.length)return p;p=e;return U};U.onlyCircles=function(e){if(!arguments.length)return g;g=e;return U};U.id=function(e){if(!arguments.length)return o;o=e;return U};U.singlePoint=function(e){if(!arguments.length)return R;R=e;return U};U.nice=function(e){if(!arguments.length){return P}P=e;return U};U.locality=function(t){if(!arguments.length){return m}m=e.utils.buildLocality(t);return U};return U};e.models.bubbleChart=function(){var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=false,a=false,s=true,o="ltr",l=function(e){return e.x},u=function(e){return e.y},c=[0],f,d,h=200,p=function(e){return e.y},m=function(e){return e.y},g=false,_=0,v=false,y=function(e){return},b=d3.time.format("%Y-%m-%d"),M=null,x=true,w=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},S,k,L={},T={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available.",noLabel:"undefined"},E=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState");var D=function(t,n,r){var i=isNaN(parseInt(t,10))||!n||!Array.isArray(n)?t:n[parseInt(t,10)]||t;return r?e.utils.dateFormat(i,"MMM",I.locality()):i};var A=function(t,n,r){var i=isNaN(parseInt(t,10))||!n||!Array.isArray(n)?t:n[parseInt(t,10)].key||t;return e.utils.numberFormatSI(i,2,r,I.locality())};var Y=e.models.scatter().padData(true).padDataOuter(-1).size(function(e){return e.y}).sizeRange([256,1024]).singlePoint(true),C=e.models.axis().orient("bottom").valueFormat(D).tickSize(0).tickPadding(4).highlightZero(false).showMaxMin(false).ticks(d3.time.months,1),R=e.models.axis().orient("left").valueFormat(A).tickPadding(7).highlightZero(false).showMaxMin(false),O=e.models.legend().align("center").key(function(e){return e.key+"%"});var P=function(t,n,r){var i=t.series.key,a=t.point.x,s=t.point.y,o=w(i,a,s,t,I),l=t.value<0?"n":"s";M=e.tooltip.show(t.e,o,l,null,n)};function I(a){a.each(function(a){var f=this,d=d3.select(this);var h=a?a.properties:{},g=a?a.data:null;var _,v,b,w,T,D=a.properties.xDataType==="datetime"||false,A=a.properties.yDataType==="currency"||false;I.container=this;I.update=function(){d.transition().call(I)};function N(e){if(e&&e.length){d.selectAll(".nv-noData").remove();return false}d.select(".nvd3.nv-wrap").remove();var i=n||parseInt(d.style("width"),10)||960,a=r||parseInt(d.style("height"),10)||400,s=d.selectAll(".nv-noData").data([I.strings().noData]);s.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");s.attr("x",t.left+i/2).attr("y",t.top+a/2).text(function(e){return e});return true}if(N(g)){return I}i=i&&h.title;function F(e){var t=d3.extent(d3.merge(e.map(function(e){return e.values.map(function(e,t){return d3.time.format("%Y-%m-%d").parse(l(e))})})));var n=[d3.time.month.floor(t[0]),d3.time.day.offset(d3.time.month.ceil(t[1]),-1)];return n}function H(e){function t(e){return 32-new Date(e.getFullYear(),e.getMonth(),32).getDate()}var n=d3.time.month.range(e[0],e[1]);var r=n.map(function(e){return d3.time.day.offset(d3.time.month.floor(e),t(e)/2-1)});return r}function j(e){var t=d3.nest().key(p).entries(e);var n=1e3/t.length,r=n*.25,i=[0,1],a=[0,1],s=d3.scale.linear().domain(i).range(a),o=[],l=0;t.map(function(e,t){e.total=0;e.values=e.values.sort(function(e,t){return t.y<e.y?-1:t.y>e.y?1:0}).map(function(t){e.total+=t.y;return t});e.group=t;return e}).sort(function(e,t){return e.total<t.total?-1:e.total>t.total?1:0}).map(function(e,t){l+=e.total;i=d3.extent(e.values.map(function(e){return e.y}));a=[n*t+r,n*(t+1)-r];s.domain(i).range(a);e.values=e.values.map(function(t){t.group=e.group;t.opportunity=t.y;t.y=s(t.opportunity);return t});o.push({y:d3.min(e.values.map(function(e){return e.y})),key:e.key});return e});return o}L.disabled=g.map(function(e){return!!e.disabled});_=d3.nest().key(m).entries(g);_=_.sort(function(e,t){return parseInt(e.key,10)<parseInt(t.key,10)?-1:parseInt(e.key,10)>parseInt(t.key,10)?1:0}).map(function(e,t){e.series=t;e.classes=e.values[0].classes;e.color=e.values[0].color;return e});b=F(_);T=j(g);w=d3.extent(d3.merge(_.map(function(e){return e.values.map(function(e,t){return u(e,t)})})).concat(c));S=Y.xScale();k=Y.yScale();C.scale(S).tickValues(H(b));R.scale(k).ticks(T.length).tickValues(T.map(function(e,t){return T[t].y}));I.render=function(){var a=n||parseInt(d.style("width"),10)||960,l=r||parseInt(d.style("height"),10)||400,u=a-t.left-t.right,c=l-t.top-t.bottom,f=u,p=c,m={top:0,right:0,bottom:0,left:0};var g=Math.sqrt(Y.sizeRange()[1]/Math.PI),v=0,y={width:0,height:0},M="";var x=d.selectAll("g.nv-wrap.nv-bubbleChart").data([_]),S=x.enter().append("g").attr("class","nvd3 nv-wrap nv-bubbleChart").append("g"),k=x.select("g").attr("class","nv-chartWrap");S.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF");k.select(".nv-background").attr("width",u+t.left+t.right).attr("height",c+t.top+t.bottom);S.append("g").attr("class","nv-titleWrap");var L=k.select(".nv-titleWrap");S.append("g").attr("class","nv-x nv-axis");var E=k.select(".nv-x.nv-axis");S.append("g").attr("class","nv-y nv-axis");var P=k.select(".nv-y.nv-axis");S.append("g").attr("class","nv-bubblesWrap");var N=k.select(".nv-bubblesWrap");S.append("g").attr("class","nv-legendWrap");var F=k.select(".nv-legendWrap");x.attr("transform","translate("+t.left+","+t.top+")");L.select(".nv-title").remove();if(i){L.append("text").attr("class","nv-title").attr("x",o==="rtl"?u:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(h.title).attr("stroke","none").attr("fill","black");y=e.utils.getTextBBox(k.select(".nv-title"));v+=y.height}if(s){O.id("legend_"+I.id()).strings(I.strings().legend).align("center").height(c-v);F.datum(_).call(O);O.arrange(u);var H=e.utils.getTextBBox(F.select(".nv-legend-link")),j=u-y.width-6,U=i&&O.collapsed()&&j>H.width?true:false,B=o==="rtl"||!O.collapsed()?0:u-O.width(),z=y.height;if(U){z=y.height-O.height()/2-H.height/2}else if(!i){z=-O.margin().top}F.attr("transform","translate("+B+","+z+")");v+=U?12:O.height()}p=c-v-m.top-m.bottom;Y.width(f).height(p).id(I.id()).xDomain(b).yDomain(w);N.datum(_.filter(function(e){return!e.disabled})).transition().duration(I.delay()).call(Y);m.top+=g;var W={top:0,right:0,bottom:0,left:0},q={top:0,right:0,bottom:0,left:0};function G(){m.left=Math.max(q.left,W.left);m.right=Math.max(q.right,W.right);m.top=Math.max(q.top,W.top);m.bottom=Math.max(q.bottom,W.bottom)}function V(){f=u-m.left-m.right;p=c-v-m.top-m.bottom;Y.resetDimensions(f,p)}R.margin(m).tickFormat(function(t,n){var r=R.valueFormat()(n,T,A);return e.utils.stringEllipsify(r,d,Math.max(u*.2,75))});P.call(R);W=R.margin();G();V();C.tickSize(0).margin(m).tickFormat(function(e){return C.valueFormat()(e,null,D)});E.call(C);q=C.margin();G();V();R.tickSize(-f,0).margin(m);P.call(R);N.transition().duration(I.delay()).call(Y);m.top+=v;M=m.left+",";M+=m.top+(C.orient()==="bottom"?p:0);E.attr("transform","translate("+M+")");M=m.left+(R.orient()==="left"?0:f)+",";M+=m.top;P.attr("transform","translate("+M+")");N.attr("transform","translate("+m.left+","+m.top+")")};I.render();O.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled;if(!_.filter(function(e){return!e.disabled}).length){_.map(function(e){e.disabled=false;d.selectAll(".nv-series").classed("disabled",false);return e})}L.disabled=_.map(function(e){return!!e.disabled});E.stateChange(L);d.transition().call(I.render)});E.on("tooltipShow",function(e){if(x){P(e,f.parentNode)}});E.on("tooltipMove",function(t){if(M){e.tooltip.position(f.parentNode,M,t,"s")}});E.on("tooltipHide",function(){if(x){e.tooltip.cleanup()}});E.on("changeState",function(e){if(typeof e.disabled!=="undefined"){g.forEach(function(t,n){t.disabled=e.disabled[n]});L.disabled=e.disabled}d.transition().call(I)});E.on("chartClick",function(){E.tooltipHide();if(O.enabled()){O.dispatch.closeMenu()}});Y.dispatch.on("elementClick",function(e){E.chartClick();y(e)})});return I}Y.dispatch.on("elementMouseover.tooltip",function(e){E.tooltipShow(e)});Y.dispatch.on("elementMousemove.tooltip",function(e){E.tooltipMove(e)});Y.dispatch.on("elementMouseout.tooltip",function(){E.tooltipHide()});I.dispatch=E;I.scatter=Y;I.legend=O;I.xAxis=C;I.yAxis=R;d3.rebind(I,Y,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient","locality");d3.rebind(I,Y,"size","zScale","sizeDomain","forceSize","interactive","clipVoronoi","clipRadius");d3.rebind(I,C,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks");I.colorData=function(t){var n=arguments[0],r=arguments[1]||{};var i=function(t,n){return e.utils.defaultColor()(t,t.series)};var a=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"};a=function(e,t){var n=e.series*(r.step||1)%14;n=(n>9?"":"0")+n;return"nv-group nv-series-"+e.series+" nv-fill"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)};a=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")};break}var s=!r.gradient?i:function(e,t){return Y.gradient(e,e.series)};Y.color(i);Y.fill(s);Y.classes(a);O.color(i);O.classes(a);return I};I.margin=function(e){if(!arguments.length){return t}for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return I};I.width=function(e){if(!arguments.length){return n}n=e;return I};I.height=function(e){if(!arguments.length){return r}r=e;return I};I.showTitle=function(e){if(!arguments.length){return i}i=e;return I};I.showLegend=function(e){if(!arguments.length){return s}s=e;return I};I.tooltip=function(e){if(!arguments.length){return M}M=e;return I};I.tooltips=function(e){if(!arguments.length){return x}x=e;return I};I.tooltipContent=function(e){if(!arguments.length){return w}w=e;return I};I.state=function(e){if(!arguments.length){return L}L=e;return I};I.delay=function(e){if(!arguments.length){return h}h=e;return I};I.bubbleClick=function(e){if(!arguments.length){return y}y=e;return I};I.groupBy=function(e){if(!arguments.length){return p}p=e;return I};I.filterBy=function(e){if(!arguments.length){return m}m=e;return I};I.colorFill=function(e){return I};I.strings=function(e){if(!arguments.length){return T}for(var t in e){if(e.hasOwnProperty(t)){T[t]=e[t]}}return I};I.direction=function(e){if(!arguments.length){return o}o=e;R.direction(e);O.direction(e);return I};return I};e.models.funnel=function(){var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=.3,a=d3.scale.linear(),s=Math.floor(Math.random()*1e4),o=function(e){return e.x},l=function(e){return e.y},u=function(e){return e.height},c=function(e){return e.value},f=e.utils.buildLocality(),d=[0],h=true,p,m=0,g=true,_=75,v=0,y=function(e){return e},b=function(e){return e},M=function(e){return(" ("+e+")").replace(" ()","")},w=function(t,n){return e.utils.defaultColor()(t,t.series)},S=w,k=false,L=function(e,t){return"nv-group nv-series-"+e.series},T=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");var E=0,D=0,A=0;function Y(o){o.each(function(o){var l=n-t.left-t.right,f=r-t.top-t.bottom,x=d3.select(this),C=5,R=5,O=0,P=0,I=0;o.forEach(function(e,t){e.values.forEach(function(e){e.index=t;P+=parseFloat(e.value)})});function N(){E=ce(I);D=fe();A=de(I)}function F(){var e=ue(D,E),t=E-2*i*D,n=0,r=24;o.map(function(a,s){a.values=a.values.map(function(a){a.height=0;if(P>0){a.height=le(e*a.value/P,t)}if(a.height<r/2){n+=a.height-r/2;a.height=r/2}else if(n<0&&a.height+n>r/2){a.height+=n;n=0}t+=2*i*a.height;return a});return a});o=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(u)(o);var s=p?[]:d3.extent(d3.merge(o.map(function(e){return e.values.map(function(e,t){
return u(e,t)+e.y0})})).concat(d));a.domain(p||s).range([D,0])}N();F();var H=x.selectAll("g.nv-wrap.nv-funnel").data([o]);var j=H.enter().append("g").attr("class","nvd3 nv-wrap nv-funnel");var U=j.append("defs");var B=j.append("g");var z=H.select("g");Y.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,s+"-"+n,r,w(t,n),H.select("defs"))};B.append("g").attr("class","nv-groups");H.attr("transform","translate("+t.left+","+t.top+")");U.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect");H.select("#nv-edge-clip-"+s+" rect").attr("width",l+1).attr("height",f+1);z.attr("clip-path",h?"url(#nv-edge-clip-"+s+")":"");if(k){var W=e.utils.createTexture(U,s)}var q=H.select(".nv-groups").selectAll(".nv-group").data(o,function(e){return e.series});q.exit().transition().duration(v).selectAll("g.nv-slice").delay(function(e,t){return t*m/o[0].values.length}).attr("points",function(e){return oe(e,0,E)}).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();q.exit().transition().duration(v).selectAll("g.nv-label-value").delay(function(e,t){return t*m/o[0].values.length}).attr("y",0).attr("transform","translate("+A+",0)").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();q.exit().remove();q.enter().append("g").attr("class","nv-group");var G=H.select(".nv-groups").selectAll(".nv-group");G.style("stroke-opacity",1e-6).style("fill-opacity",1e-6);G.attr("class",L).attr("fill",S).classed("hover",function(e){return e.hover}).classed("nv-active",function(e){return e.active==="active"}).classed("nv-inactive",function(e){return e.active==="inactive"}).style({stroke:"#FFFFFF","stroke-width":2});G.transition().duration(v).style("stroke-opacity",1).style("fill-opacity",1);var V=q.selectAll("g.nv-slice").data(function(e){return e.values},function(e){return e.series});V.exit().remove();var $=V.enter().append("g").attr("class","nv-slice");var J=G.selectAll("g.nv-slice");$.append("polygon").attr("class","nv-base");J.selectAll(".nv-base").attr("points",function(e){return oe(e,0,E)});if(k){$.append("polygon").attr("class","nv-texture");J.selectAll(".nv-texture").attr("points",function(e){return oe(e,0,E)}).style("mask","url("+W+")")}J.on("mouseover",function(e,t){d3.select(this).classed("hover",true);var n=X(d3.event,e,t);T.elementMouseover(n)}).on("mousemove",function(e,t){T.elementMousemove(d3.event)}).on("mouseout",function(e,t){d3.select(this).classed("hover",false);T.elementMouseout()}).on("click",function(e,t){d3.event.stopPropagation();var n=X(d3.event,e,t);T.elementClick(n)}).on("dblclick",function(e,t){d3.event.stopPropagation();var n=X(d3.event,e,t);T.elementDblClick(n)});function X(e,t,n){return{value:c(t,n),point:t,id:s,series:o[t.index],pointIndex:n,seriesIndex:t.series,e:e}}var Z=q.selectAll(".nv-label-value").data(function(e){return e.values},function(e){return e.series});Z.exit().remove();Z.enter().append("g").attr("class","nv-label-value");var K=G.selectAll("g.nv-label-value");K.attr("transform","translate("+A+",0)");var Q=K.filter(".nv-label-side");function ee(){K.selectAll("polyline").remove();K.selectAll("rect").remove();K.selectAll("text").remove();K.append("rect").attr("class","nv-label-box").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("rx",2).attr("ry",2).style("pointer-events","none").style("stroke-width",0).style("fill-opacity",0);K.append("text").text(function(e){return y(o[e.index].key)}).call(xe,"nv-label",.85,"middle",be);K.select(".nv-label").call(ie,g?re:ae,he,function(e,t){xe(e,"nv-label",t,"middle",be)});K.append("text").text(function(e){return b(e.value||e.label||e)}).call(xe,"nv-value",.85,"middle",be);K.select(".nv-value").append("tspan").text(function(e){return M(o[e.index].count)});K.call(we);K.call(ge);K.call(Se);K.classed("nv-label-side",function(e){return e.tooTall||e.tooWide})}function te(){Q=K.filter(".nv-label-side");Q.selectAll(".nv-label").remove();Q.selectAll("rect").remove();Q.selectAll("polyline").remove();Q.append("text").text(function(e){return y(o[e.index].key)}).call(xe,"nv-label",.85,"start","#555");Q.select(".nv-label").call(ie,g?re:ae,g?pe:se,function(e,t){xe(e,"nv-label",t,"start","#555")});Q.call(we);Q.select(".nv-value").style({"text-anchor":"start",fill:"#555"});Q.call(_e);var e=0;Q.reverse().each(function(t,n){if(!e){t.labelBottom=t.labelTop+t.labelHeight+R;e=t.labelBottom;return}t.labelTop=Math.max(e,t.labelTop);t.labelBottom=t.labelTop+t.labelHeight+R;e=t.labelBottom});Q.reverse();if(e&&e-R>d3.max(a.range())){e=0;Q.each(function(t,n){if(!e){t.labelBottom=d3.max(a.range())-1;t.labelTop=t.labelBottom-t.labelHeight;e=t.labelTop;return}t.labelBottom=Math.min(e,t.labelBottom);t.labelTop=t.labelBottom-t.labelHeight-R;e=t.labelTop});if(e<0){Q.each(function(t,n){t.labelTop-=e;t.labelBottom-=e})}}e=0;Q.call(ye)}function ne(){ee();te()}ne();N();F();ne();N();F();ne();N();J.selectAll("polygon").attr("points",function(e){return oe(e,1,E)});if(k){J.selectAll(".nv-texture").style("fill",be)}K.attr("transform",function(e){var t=e.tooTall?0:A,n=e.tooTall?0:e.labelTop;return"translate("+t+","+n+")"});Q.attr("transform",function(e){return"translate("+O+","+e.labelTop+")"});Q.append("polyline").attr("class","nv-label-leader").style({"fill-opacity":0,stroke:"#999","stroke-width":1,"stroke-opacity":.5});Q.reverse();Q.selectAll("polyline").call(ve);Q.reverse();function re(e,t,n,r){var i=t.text(),a=parseFloat(t.attr("dy")),s,o=i.split(/\s+/).reverse(),l=[],u=0,c=n(e,0),f=d3.select(t.node().parentNode);t.text(null);while(s=o.pop()){l.push(s);t.text(l.join(" "));if(t.node().getComputedTextLength()>c&&l.length>1){l.pop();t.text(l.join(" "));l=[s];t=f.append("text");t.text(s).call(r,++u*1.1+a)}}}function ie(e,t,n,r){e.each(function(e){var i=d3.select(this);t(e,i,n,r)})}function ae(t,n,r,i){var a=n.text(),s=parseFloat(n.attr("dy")),o=r(t);n.text(e.utils.stringEllipsify(a,x,o)).call(i,s)}function se(e){var t=Math.max(l-f/1.1,_),n=a(e.y0),r=n*i,s=t+r,o=Math.abs(e.labelBottom-n),u=o*i,c=C+u+C+C,d=s-c;return Math.max(d,_)}function oe(e,t,n){var r=a(e.y0),s=a(e.y0+e.y),o=n/2-i*r,l=n/2-i*s,u=A;return u-o+","+r*t+" "+(u-l)+","+s*t+" "+(u+l)+","+s*t+" "+(u+o)+","+r*t}function le(e,t){var n=t/i/2;return Math.abs(Math.sqrt(e/i+n*n))-n}function ue(e,t){return e*(t-e*i)}function ce(e){return Math.round(Math.max(Math.min(f/1.1,l-e),40))}function fe(){return Math.min(E*1.1,(E-E*i)/(2*i))}function de(e){return E/2+e}function he(e){var t=E,n=a(e.y0+e.y1/2);return t-n*i*2}function pe(e,t){var n=Math.max((l-E)/2,t),r=a(e.y0+e.y1);return n+r*i}function me(e){return d3.select(e).node().getBoundingClientRect()}function ge(e){e.each(function(e){var t=me(this);e.labelHeight=t.height;e.labelWidth=t.width;e.labelTop=a(e.y0+e.y/2)-e.labelHeight/2;e.labelBottom=e.labelTop+e.labelHeight+R;e.y1=e.y-e.labelHeight;e.tooWide=e.labelWidth>he(e);e.tooTall=e.labelHeight>e.height-4})}function _e(e){e.each(function(e){var t=me(this);e.labelHeight=t.height;e.labelWidth=t.width;e.labelTop=a(e.y0+e.y);e.labelBottom=e.labelTop+e.labelHeight+R})}function ve(e,t){var n=e.length;e.each(function(t,r,s){t.y1=0;var o=s?d3.select(e[s-1][r]).data()[0]:null,l=s<n-1?d3.select(e[s+1][r]).data()[0]:null,u=Math.round(t.labelHeight)+.5,c=Math.round(a(t.y0)-t.labelTop)-.5,f=o?o.labelWidth-(t.labelBottom-o.labelBottom)*i:0,d=t.labelWidth,h=l&&u<c?l.labelWidth:0,p=Math.round(Math.max(f,d,h))+C,m=Math.round(pe(t,I))-O-C,o=0+","+u+" "+p+","+u+" "+(p+Math.abs(u-c)*i)+","+c+" "+m+","+c;t.labelWidth=p;d3.select(this).attr("points",o)})}function ye(e){var t=(l-E)/2,n=0;e.each(function(e){var t=a(e.y0),r=e.labelBottom>=t?1:0,s=Math.abs(e.labelBottom+C-t)*i,o=t*i,l=e.labelWidth+s+C*3-o;if(l>=n){n=l}});n=Math.round(n*10)/10;if(n<=0){O=t;I=t}else if(n>0&&n<t){O=t-n;I=t}else{O=0;I=n}}function be(t,n,r){var i=d3.select(this.parentNode).style("fill");return e.utils.getTextContrast(i,n)}function Me(t){var n=e.utils.isRTLChar(t.slice(-1)),r=n?"rtl":"ltr";return"ltr"}function xe(e,t,n,r,i){e.attr("x",0).attr("y",0).attr("dy",n+"em").attr("class",t).attr("direction",function(){return Me(e.text())}).style({"pointer-events":"none","text-anchor":r,fill:i})}function we(e){e.each(function(e){var t=d3.select(this),n=t.selectAll(".nv-label")[0].length+1,r=.85+n-1+"em";t.select(".nv-value").attr("dy",r)})}function Se(e){e.each(function(e,t){var n=d3.select(this);n.select(".nv-label-box").attr("x",(e.labelWidth+6)/-2).attr("y",-2).attr("width",e.labelWidth+6).attr("height",e.labelHeight+4).attr("rx",2).attr("ry",2).style("fill-opacity",1)})}});return Y}Y.dispatch=T;Y.color=function(e){if(!arguments.length)return w;w=e;return Y};Y.fill=function(e){if(!arguments.length)return S;S=e;return Y};Y.classes=function(e){if(!arguments.length)return L;L=e;return Y};Y.gradient=function(e){if(!arguments.length)return gradient;gradient=e;return Y};Y.x=function(e){if(!arguments.length)return o;o=e;return Y};Y.y=function(e){if(!arguments.length)return l;l=e;return Y};Y.margin=function(e){if(!arguments.length)return t;t=e;return Y};Y.width=function(e){if(!arguments.length)return n;n=e;return Y};Y.height=function(e){if(!arguments.length)return r;r=e;return Y};Y.xScale=function(e){if(!arguments.length)return x;x=e;return Y};Y.yScale=function(e){if(!arguments.length)return a;a=e;return Y};Y.yDomain=function(e){if(!arguments.length)return p;p=e;return Y};Y.forceY=function(e){if(!arguments.length)return d;d=e;return Y};Y.id=function(e){if(!arguments.length)return s;s=e;return Y};Y.delay=function(e){if(!arguments.length)return m;m=e;return Y};Y.clipEdge=function(e){if(!arguments.length)return h;h=e;return Y};Y.fmtKey=function(e){if(!arguments.length)return y;y=e;return Y};Y.fmtValue=function(e){if(!arguments.length)return b;b=e;return Y};Y.fmtCount=function(e){if(!arguments.length)return M;M=e;return Y};Y.wrapLabels=function(e){if(!arguments.length)return g;g=e;return Y};Y.minLabelWidth=function(e){if(!arguments.length)return _;_=e;return Y};Y.textureFill=function(e){if(!arguments.length)return k;k=e;return Y};Y.locality=function(t){if(!arguments.length){return f}f=e.utils.buildLocality(t);return Y};return Y};e.models.funnelChart=function(){var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=false,a=true,s="ltr",o=null,l=true,u=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},c,f,d=0,h={},p={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available.",noLabel:"undefined"},m=d3.dispatch("chartClick","elementClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState");var g=e.models.funnel(),_=e.models.legend().align("center"),v=d3.scale.linear();var y=function(t,n,r){var i=t.series.key,a=r.total?(t.point.value*100/r.total).toFixed(1):100,s=t.point.value,l=u(i,a,s,t,M),c=t.value<0?"n":"s";o=e.tooltip.show(t.e,l,c,null,n)};var b=function(e,t,n){return};function M(u){u.each(function(u){var c=u.properties,p=u.data,x=d3.select(this),w=this,S=(n||parseInt(x.style("width"),10)||960)-t.left-t.right,k=(r||parseInt(x.style("height"),10)||400)-t.top-t.bottom,L=S,T=k,E={top:0,right:0,bottom:0,left:0},D=30;M.update=function(){x.transition().duration(d).call(M)};M.dataSeriesActivate=function(e){var t=e.series;t.active=!t.active||t.active==="inactive"?"active":"inactive";t.values[0].active=t.active;if(t.active==="active"){p.filter(function(e){return e.active!=="active"}).map(function(e){e.active="inactive";return e})}if(!p.filter(function(e){return e.active==="active"}).length){p.map(function(e){e.active="";return e})}x.call(M)};M.container=this;if(!p||!p.length||!p.filter(function(e){return e.values.length}).length){V();return M}p.forEach(function(e,t){e.series=t;e.values.forEach(function(t,n){t.series=e.series;t.index=n;if(typeof t.value=="undefined"){t.value=t.y}});e.total=d3.sum(e.values,function(e,t){return e.value});if(!e.total){e.disabled=true}});var A=p.filter(function(e,t){return!e.disabled});if(!A.length){A=[{values:[]}]}var Y=d3.sum(A,function(e){return e.total});var C=d3.sum(A,function(e){return e.count});c.total=Y;h.disabled=p.map(function(e){return!!e.disabled});f=g.yScale();if(!Y){V();return M}else{x.selectAll(".nv-noData").remove()}var R=x.selectAll("g.nv-wrap.nv-funnelChart").data([A]),O=R.enter().append("g").attr("class","nvd3 nv-wrap nv-funnelChart").append("g"),P=R.select("g").attr("class","nv-chartWrap");O.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF");P.select(".nv-background").attr("width",S+t.left+t.right).attr("height",k+t.top+t.bottom);O.append("g").attr("class","nv-titleWrap");var I=P.select(".nv-titleWrap");O.append("g").attr("class","nv-funnelWrap");var N=P.select(".nv-funnelWrap");O.append("g").attr("class","nv-legendWrap");var F=P.select(".nv-legendWrap");R.attr("transform","translate("+t.left+","+t.top+")");var H={width:0,height:0};I.select(".nv-title").remove();if(i&&c.title){I.append("text").attr("class","nv-title").attr("x",s==="rtl"?S:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(c.title).attr("stroke","none").attr("fill","black");H=e.utils.getTextBBox(P.select(".nv-title"));E.top+=H.height+12}if(a){_.id("legend_"+M.id()).strings(M.strings().legend).align("center").height(k-E.top);F.datum(p).call(_);_.arrange(S);var j=e.utils.getTextBBox(F.select(".nv-legend-link")),U=S-H.width-6,B=i&&_.collapsed()&&U>j.width?true:false,z=s==="rtl"||!_.collapsed()?0:S-_.width(),W=H.height;if(B){W=H.height-_.height()/2-j.height/2}else if(!i){W=-_.margin().top}F.attr("transform","translate("+z+","+W+")");E.top+=B?0:_.height()-12}T=k-E.top-E.bottom;g.width(L).height(T);N.datum(A).attr("transform","translate("+E.left+","+E.top+")").call(g);var q=G(v,A);function G(e,t){var n=[[0]];var r=t.filter(function(e){return!e.disabled}).map(function(e){return e.values.map(function(e,t){return e.y0+e.y})});var i=d3.merge(n.concat(r));v.domain(i).range(i.map(function(e){return f(e)}));return i}function V(){x.select(".nvd3.nv-wrap").remove();var e=x.selectAll(".nv-noData").data([M.strings().noData]);e.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");e.attr("x",t.left+S/2).attr("y",t.top+k/2).text(function(e){return e})}_.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled;e.active=false;if(!p.filter(function(e){return!e.disabled}).length){p.map(function(e){e.disabled=false;return e})}if(!p.filter(function(e){return e.active==="active"}).length){p.map(function(e){e.active="";return e})}h.disabled=p.map(function(e){return!!e.disabled});m.stateChange(h);x.transition().duration(d).call(M)});m.on("tooltipShow",function(e){if(l){y(e,w.parentNode,c)}});m.on("tooltipMove",function(t){if(o){e.tooltip.position(w.parentNode,o,t)}});m.on("tooltipHide",function(){if(l){e.tooltip.cleanup()}});m.on("changeState",function(e){if(typeof e.disabled!=="undefined"){A.forEach(function(t,n){t.disabled=e.disabled[n]});h.disabled=e.disabled}x.transition().duration(d).call(M)});m.on("chartClick",function(){if(_.enabled()){_.dispatch.closeMenu()}});g.dispatch.on("elementClick",function(e){m.chartClick();b(p,e,M)})});return M}g.dispatch.on("elementMouseover.tooltip",function(e){m.tooltipShow(e)});g.dispatch.on("elementMousemove.tooltip",function(e){m.tooltipMove(e)});g.dispatch.on("elementMouseout.tooltip",function(){m.tooltipHide()});M.dispatch=m;M.funnel=g;M.legend=_;d3.rebind(M,g,"id","x","y","xDomain","yDomain","forceX","forceY","color","fill","classes","gradient","locality");d3.rebind(M,g,"fmtKey","fmtValue","fmtCount","clipEdge","delay","wrapLabels","minLabelWidth");M.colorData=function(t){var n=arguments[0],r=arguments[1]||{};var i=function(t,n){return e.utils.defaultColor()(t,t.series)};var a=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"};a=function(e,t){var n=e.series*(r.step||1)%14;n=(n>9?"":"0")+n;return"nv-group nv-series-"+e.series+" nv-fill"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)};a=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")};break}var s=!r.gradient?i:function(e,t){var n={orientation:r.orientation||"vertical",position:r.position||"middle"};return g.gradient(e,e.series,n)};g.color(i);g.fill(s);g.classes(a);_.color(i);_.classes(a);return M};M.x=function(e){if(!arguments.length){return g.x()}g.x(e);return M};M.y=function(e){if(!arguments.length){return g.y()}g.y(e);return M};M.margin=function(e){if(!arguments.length){return t}for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return M};M.width=function(e){if(!arguments.length){return n}n=e;return M};M.height=function(e){if(!arguments.length){return r}r=e;return M};M.showTitle=function(e){if(!arguments.length){return i}i=e;return M};M.showLegend=function(e){if(!arguments.length){return a}a=e;return M};M.tooltip=function(e){if(!arguments.length){return o}o=e;return M};M.tooltips=function(e){if(!arguments.length){return l}l=e;return M};M.tooltipContent=function(e){if(!arguments.length){return u}u=e;return M};M.state=function(e){if(!arguments.length){return h}h=e;return M};M.strings=function(e){if(!arguments.length){return p}for(var t in e){if(e.hasOwnProperty(t)){p[t]=e[t]}}return M};M.seriesClick=function(e){if(!arguments.length){return b}b=e;return M};M.direction=function(e){if(!arguments.length){return s}s=e;_.direction(e);return M};return M};e.models.gauge=function(){var t={top:0,right:0,bottom:0,left:0},n=null,r=null,i=true,a=function(e){return e.values},s=function(e){return e.key},o=function(e){return e.y},l=e.utils.buildLocality(),u=Math.floor(Math.random()*1e4),c=d3.format(",g"),f=d3.format(",.f"),d=true,h=true,p=function(t,n){return e.utils.defaultColor()(t,t.series)},m=p,g=function(e,t){return"nv-arc-path nv-series-"+e.series},_=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");var v=50,y=5,b=5,M=90,x=0,w=10,S=-90,k=90,L=750,T=10;function E(i){i.each(function(i){var a=i.properties,s=i.data;var o=n-t.left-t.right,l=r-t.top-t.bottom,d=Math.min(o/2,l)/((100+T)/100),b=d3.select(this),D=k-S,A=d3.scale.linear().range([0,1]).domain([x,w]),Y=0,C=s.map(function(e,t){var n={key:e.key,series:e.series,y0:Y,y1:e.y,color:e.color,classes:e.classes};Y=e.y;return n}),R=[0].concat(s.map(function(e){return e.y})),O=function(e){return e*d/100},P=a.values[0].t;var I=b.selectAll("g.nv-wrap.nv-gauge").data([s]);var N=I.enter().append("g").attr("class","nvd3 nv-wrap nv-gauge");var F=N.append("defs");var H=N.append("g");var j=I.select("g");E.gradient=function(t,n){return e.utils.colorRadialGradient(t,u+"-"+n,{x:0,y:0,r:d,s:v/100,u:"userSpaceOnUse"},p(t,n),I.select("defs"))};H.append("g").attr("class","nv-arc-group");H.append("g").attr("class","nv-labels");H.append("g").attr("class","nv-pointer");H.append("g").attr("class","nv-odometer");I.attr("transform","translate("+(t.left/2+t.right/2+O(T))+","+(t.top+O(T))+")");var U=d3.svg.arc().innerRadius(O(v)).outerRadius(d).startAngle(function(e,t){return J(X(e.y0))}).endAngle(function(e,t){return J(X(e.y1))});var B=j.select(".nv-arc-group").attr("transform",Z);B.selectAll(".nv-arc-path").data(C).enter().append("path").attr("class","nv-arc-path").attr("stroke","#ffffff").attr("stroke-width",3).attr("d",U).on("mouseover",function(e,t){d3.select(this).classed("hover",true);_.elementMouseover({point:e,pointIndex:t,e:d3.event,id:u})}).on("mouseout",function(e,t){d3.select(this).classed("hover",false);_.elementMouseout({point:e,index:t,id:u})}).on("mousemove",function(e,t){_.elementMousemove(d3.event)}).on("click",function(e,t){_.elementClick({point:e,index:t,e:d3.event,id:u});d3.event.stopPropagation()}).on("dblclick",function(e,t){_.elementDblClick({point:e,index:t,e:d3.event,id:u});d3.event.stopPropagation()});B.selectAll(".nv-arc-path").transition().duration(10).attr("class",g).attr("fill",m).attr("d",U);var z=j.select(".nv-labels").attr("transform",Z);z.selectAll("text").transition().duration(0).attr("transform",function(e){return"rotate("+X(e)+") translate(0,"+(-d-O(1.5))+")"}).style("font-size",O(.6)+"em");z.selectAll("text").data(R).enter().append("text").attr("transform",function(e){return"rotate("+X(e)+") translate(0,"+(-d-O(1.5))+")"}).text(c).style("text-anchor","middle").style("font-size",O(.6)+"em");if(h){var W=[[Math.round(O(y)/2),0],[0,-Math.round(O(M))],[-Math.round(O(y)/2),0],[0,Math.round(O(y))],[Math.round(O(y)/2),0]];var q=j.select(".nv-pointer").attr("transform",Z);q.selectAll("path").transition().duration(120).attr("d",d3.svg.line().interpolate("monotone"));var G=q.selectAll("path").data([W]).enter().append("path").attr("d",d3.svg.line().interpolate("monotone")).attr("transform","rotate("+S+")");$(P);j.selectAll(".nv-odom").remove();j.select(".nv-odomText").transition().duration(0).style("font-size",O(.7)+"em");j.select(".nv-odometer").append("text").attr("class","nv-odom nv-odomText").attr("x",0).attr("y",0).attr("text-anchor","middle").text(f(P)).style("stroke","none").style("fill","black").style("font-size",O(.7)+"em");var V=j.select(".nv-odomText").node().getBoundingClientRect();j.select(".nv-odometer").insert("path",".nv-odomText").attr("class","nv-odom nv-odomBox").attr("d",e.utils.roundedRectangle(-V.width/2,-V.height+O(1.5),V.width+O(4),V.height+O(2),O(2))).attr("fill","#eeffff").attr("stroke","black").attr("stroke-width","2px").attr("opacity",.8);j.select(".nv-odometer").attr("transform","translate("+d+","+(t.top+O(70)+V.width)+")")}else{j.select(".nv-odometer").select(".nv-odomText").remove();j.select(".nv-odometer").select(".nv-odomBox").remove();j.select(".nv-pointer").selectAll("path").remove()}function $(e){G.transition().duration(L).ease("elastic").attr("transform","rotate("+X(e)+")")}function J(e){return e*Math.PI/180}function X(e){return S+A(e)*D}function Z(){return"translate("+d+","+d+")"}E.setGaugePointer=$});return E}E.dispatch=_;E.color=function(e){if(!arguments.length)return p;p=e;return E};E.fill=function(e){if(!arguments.length)return m;m=e;return E};E.classes=function(e){if(!arguments.length)return g;g=e;return E};E.gradient=function(e){if(!arguments.length)return gradient;gradient=e;return E};E.margin=function(e){if(!arguments.length)return t;t=e;return E};E.width=function(e){if(!arguments.length)return n;n=e;return E};E.height=function(e){if(!arguments.length)return r;r=e;return E};E.values=function(e){if(!arguments.length)return a;a=e;return E};E.x=function(e){if(!arguments.length)return s;s=e;return E};E.y=function(e){if(!arguments.length)return o;o=d3.functor(e);return E};E.showLabels=function(e){if(!arguments.length)return d;d=e;return E};E.id=function(e){if(!arguments.length)return u;u=e;return E};E.valueFormat=function(e){if(!arguments.length)return f;f=e;return E};E.labelThreshold=function(e){if(!arguments.length)return labelThreshold;labelThreshold=e;return E};E.ringWidth=function(e){if(!arguments.length)return v;v=e;return E};E.pointerWidth=function(e){if(!arguments.length)return y;y=e;return E};E.pointerTailLength=function(e){if(!arguments.length)return b;b=e;return E};E.pointerHeadLength=function(e){if(!arguments.length)return M;M=e;return E};E.minValue=function(e){if(!arguments.length)return x;x=e;return E};E.maxValue=function(e){if(!arguments.length)return w;w=e;return E};E.minAngle=function(e){if(!arguments.length)return S;S=e;return E};E.maxAngle=function(e){if(!arguments.length)return k;k=e;return E};E.transitionMs=function(e){if(!arguments.length)return L;L=e;return E};E.labelFormat=function(e){if(!arguments.length)return c;c=e;return E};E.labelInset=function(e){if(!arguments.length)return T;T=e;return E};E.setPointer=function(e){if(!arguments.length)return E.setGaugePointer;E.setGaugePointer(e);return E};E.isRendered=function(e){return svg!==undefined};E.showPointer=function(e){if(!arguments.length)return h;h=e;return E};E.locality=function(t){if(!arguments.length){return l}l=e.utils.buildLocality(t);return E};return E};e.models.gaugeChart=function(){var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=false,a=true,s="ltr",o=null,l=true,u=function(e,t,n,r){return"<h3>"+e+"</h3>"+"<p>"+t+"</p>"},c,f,d={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available.",noLabel:"undefined"},h=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove");var p=e.models.gauge(),m=e.models.legend().align("center");var g=function(t,n){var r=p.valueFormat()(t.point.y1-t.point.y0),i=u(t.point.key,r,t,_);o=e.tooltip.show(t.e,i,null,null,n)};function _(u){u.each(function(u){var c=u.properties,f=u.data,d=d3.select(this),v=this,y=(n||parseInt(d.style("width"),10)||960)-t.left-t.right,b=(r||parseInt(d.style("height"),10)||400)-t.top-t.bottom,M=y,x=b,w={top:0,right:0,bottom:0,left:0};_.update=function(){d.transition().call(_)};_.container=this;if(!f||!f.length){var S=d.selectAll(".nv-noData").data([_.strings().noData]);S.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");S.attr("x",t.left+y/2).attr("y",t.top+b/2).text(function(e){return e});return _}else{d.selectAll(".nv-noData").remove()}f.map(function(e,t){e.series=t});var k=d.selectAll("g.nv-wrap.nv-gaugeChart").data([f]),L=k.enter().append("g").attr("class","nvd3 nv-wrap nv-gaugeChart").append("g"),T=k.select("g").attr("class","nv-chartWrap");L.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF");T.select(".nv-background").attr("width",y+t.left+t.right).attr("height",b+t.top+t.bottom);L.append("g").attr("class","nv-titleWrap");var E=T.select(".nv-titleWrap");L.append("g").attr("class","nv-gaugeWrap");var D=T.select(".nv-gaugeWrap");L.append("g").attr("class","nv-legendWrap");var A=T.select(".nv-legendWrap");k.attr("transform","translate("+t.left+","+t.top+")");var Y={width:0,height:0};E.select(".nv-title").remove();if(i&&c.title){E.append("text").attr("class","nv-title").attr("x",s==="rtl"?y:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(c.title).attr("stroke","none").attr("fill","black");Y=e.utils.getTextBBox(T.select(".nv-title"));w.top+=Y.height+12}var C={width:0,height:0};if(a){m.id("legend_"+_.id()).strings(_.strings().legend).align("center").height(b-w.top);A.datum(f).call(m);m.arrange(y);var C=e.utils.getTextBBox(A.select(".nv-legend-link")),R=y-Y.width-6,O=i&&m.collapsed()&&R>C.width?true:false,P=s==="rtl"||!m.collapsed()?0:y-m.width(),I=Y.height;if(O){I=Y.height-m.height()/2-C.height/2}else if(!i){I=-m.margin().top}A.attr("transform","translate("+P+","+I+")");w.top+=O?0:m.height()-12}x=b-w.top-w.bottom;p.width(M).height(x);D.datum(u).attr("transform","translate("+w.left+","+w.top+")").transition().call(p);h.on("tooltipShow",function(e){if(l){g(e,v.parentNode)}});h.on("tooltipMove",function(t){if(o){e.tooltip.position(v.parentNode,o,t)}});h.on("tooltipHide",function(){if(l){e.tooltip.cleanup()}});h.on("chartClick",function(){if(m.enabled()){m.dispatch.closeMenu()}})});return _}p.dispatch.on("elementMouseover.tooltip",function(e){h.tooltipShow(e)});p.dispatch.on("elementMousemove.tooltip",function(e){h.tooltipMove(e)});p.dispatch.on("elementMouseout.tooltip",function(){h.tooltipHide()});_.dispatch=h;_.gauge=p;_.legend=m;d3.rebind(_,p,"id","x","y","color","fill","classes","gradient","locality");d3.rebind(_,p,"valueFormat","values","showLabels","showPointer","setPointer","ringWidth","labelThreshold","maxValue","minValue","transitionMs");_.colorData=function(t){var n=arguments[0],r=arguments[1]||{};var i=function(t,n){return e.utils.defaultColor()(t,t.series)};var a=function(e,t){return"nv-arc-path nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"};a=function(e,t){var n=e.series*(r.step||1)%14;n=(n>9?"":"0")+n;return"nv-arc-path nv-series-"+e.series+" nv-fill"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)};a=function(e,t){return"nv-arc-path nv-series-"+e.series+(e.classes?" "+e.classes:"")};break}var s=!r.gradient?i:function(e,t){return p.gradient(e,e.series)};p.color(i);p.fill(s);p.classes(a);m.color(i);m.classes(a);return _};_.margin=function(e){if(!arguments.length){return t}for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return _};_.width=function(e){if(!arguments.length){return n}n=e;return _};_.height=function(e){if(!arguments.length){return r}r=e;return _};_.showTitle=function(e){if(!arguments.length){return i}i=e;return _};_.showLegend=function(e){if(!arguments.length){return a}a=e;return _};_.tooltip=function(e){if(!arguments.length){return o}o=e;return _};_.tooltips=function(e){if(!arguments.length){return l}l=e;return _};_.tooltipContent=function(e){if(!arguments.length){return u}u=e;return _};_.strings=function(e){if(!arguments.length){return d}for(var t in e){if(e.hasOwnProperty(t)){d[t]=e[t]}}return _};_.direction=function(e){if(!arguments.length){return s}s=e;m.direction(e);return _};return _};e.models.line=function(){var t=e.models.scatter();var n={top:0,right:0,bottom:0,left:0},r=960,i=500,a=function(e){return e.x},s=function(e){return e.y},o=function(e,t){return!isNaN(s(e,t))&&s(e,t)!==null},l=function(e){return e&&e.area||false},u=false,c,f,d="linear",h=function(t,n){return e.utils.defaultColor()(t,t.series)},p=h,m=function(e,t){return"nv-group nv-series-"+e.series};var g,_;function v(p){p.each(function(p){var y=r-n.left-n.right,b=i-n.top-n.bottom,M=d3.select(this);c=t.xScale();f=t.yScale();g=g||c;_=_||f;var x=M.selectAll("g.nv-wrap.nv-line").data([p]);var w=x.enter().append("g").attr("class","nvd3 nv-wrap nv-line");var S=w.append("defs");var k=w.append("g");var L=x.select("g");v.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,v.id()+"-"+n,r,h(t,n),x.select("defs"))};k.append("g").attr("class","nv-groups");k.append("g").attr("class","nv-scatterWrap");x.attr("transform","translate("+n.left+","+n.top+")");t.width(y).height(b);var T=x.select(".nv-scatterWrap");T.call(t);S.append("clipPath").attr("id","nv-edge-clip-"+t.id()).append("rect");x.select("#nv-edge-clip-"+t.id()+" rect").attr("width",y).attr("height",b);L.attr("clip-path",u?"url(#nv-edge-clip-"+t.id()+")":"");T.attr("clip-path",u?"url(#nv-edge-clip-"+t.id()+")":"");var E=x.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});E.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);d3.transition(E.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();E.classed("hover",function(e){return e.hover}).attr("class",m).attr("fill",h).attr("stroke",h);d3.transition(E).style("stroke-opacity",1).style("fill-opacity",.5);var D=E.selectAll("path.nv-area").data(function(e){return l(e)?[e]:[]});D.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(d).defined(o).x(function(e,t){return g(a(e,t))}).y0(function(e,t){return _(s(e,t))}).y1(function(e,t){return _(f.domain()[0]<=0?f.domain()[1]>=0?0:f.domain()[1]:f.domain()[0])}).apply(this,[e.values])});D.exit().remove();d3.transition(E.exit().selectAll("path.nv-area")).attr("d",function(e){return d3.svg.area().interpolate(d).defined(o).x(function(e,t){return g(a(e,t))}).y0(function(e,t){return _(s(e,t))}).y1(function(e,t){return _(f.domain()[0]<=0?f.domain()[1]>=0?0:f.domain()[1]:f.domain()[0])}).apply(this,[e.values])});d3.transition(D).attr("d",function(e){return d3.svg.area().interpolate(d).defined(o).x(function(e,t){return c(a(e,t))}).y0(function(e,t){return f(s(e,t))}).y1(function(e,t){return _(f.domain()[0]<=0?f.domain()[1]>=0?0:f.domain()[1]:f.domain()[0])}).apply(this,[e.values])});var A=E.selectAll("path.nv-line").data(function(e){if(!e.values||!e.values.length){return[null]}if(e.values.length>1){return[e.values]}var t=c.domain().map(function(t,n){if(Array.isArray(e.values[0])){
return[t,e.values[0][1]]}else{var r=JSON.parse(JSON.stringify(e.values[0]));r.x=t;return r}});return[t]});A.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(d).defined(o).x(function(e,t){return g(a(e,t))}).y(function(e,t){return _(s(e,t))}));d3.transition(E.exit().selectAll("path.nv-line")).attr("d",d3.svg.line().interpolate(d).defined(o).x(function(e,t){return g(a(e,t))}).y(function(e,t){return _(s(e,t))}));d3.transition(A).attr("d",d3.svg.line().interpolate(d).defined(o).x(function(e,t){return c(a(e,t))}).y(function(e,t){return f(s(e,t))}));g=c.copy();_=f.copy()});return v}v.dispatch=t.dispatch;v.scatter=t;d3.rebind(v,t,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","sizeRange","forceX","forceY","forceSize","useVoronoi","clipVoronoi","clipRadius","padData","padDataOuter","singlePoint","nice","locality");v.color=function(e){if(!arguments.length){return h}h=e;t.color(h);return v};v.fill=function(e){if(!arguments.length){return p}p=e;t.fill(p);return v};v.classes=function(e){if(!arguments.length){return m}m=e;t.classes(m);return v};v.gradient=function(e){if(!arguments.length){return gradient}gradient=e;return v};v.margin=function(e){if(!arguments.length){return n}n.top=typeof e.top!="undefined"?e.top:n.top;n.right=typeof e.right!="undefined"?e.right:n.right;n.bottom=typeof e.bottom!="undefined"?e.bottom:n.bottom;n.left=typeof e.left!="undefined"?e.left:n.left;return v};v.width=function(e){if(!arguments.length){return r}r=e;return v};v.height=function(e){if(!arguments.length){return i}i=e;return v};v.x=function(e){if(!arguments.length){return a}a=e;t.x(e);return v};v.y=function(e){if(!arguments.length){return s}s=e;t.y(e);return v};v.clipEdge=function(e){if(!arguments.length){return u}u=e;return v};v.interpolate=function(e){if(!arguments.length){return d}d=e;return v};v.defined=function(e){if(!arguments.length){return o}o=e;return v};v.isArea=function(e){if(!arguments.length){return l}l=d3.functor(e);return v};return v};e.models.lineChart=function(){var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=false,a=false,s=true,o="ltr",l=null,u=0,c=true,f,d,h={},p={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available.",noLabel:"undefined"},m=3,g=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState");var _=function(t,n,r){var i=isNaN(parseInt(t,10))||!n||!Array.isArray(n)?t:n[parseInt(t,10)]||t;return r?e.utils.dateFormat(i,"yMMMM",L.locality()):i};var v=function(t,n){return e.utils.numberFormatSI(t,2,n,L.locality())};var y=e.models.line().clipEdge(true),b=e.models.axis().orient("bottom").valueFormat(_).tickPadding(4).highlightZero(false).showMaxMin(false),M=e.models.axis().orient("left").valueFormat(v).tickPadding(4),x=e.models.legend().align("right"),w=e.models.legend().align("left").color(["#444"]);var S=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"};var k=function(t,n){var r=t.series.key,i=y.x()(t.point,t.pointIndex),a=y.y()(t.point,t.pointIndex),s=S(r,i,a,t,L);l=e.tooltip.show(t.e,s,null,null,n)};function L(p){p.each(function(p){var _=this,v=d3.select(this);var S=p?p.properties:{},T=p?p.data:null,E=S.labels?S.labels.map(function(e){return e.l||e}):[];var D=[],A=[],Y=0,C=false,R=false,O=true,P=p.properties.xDataType==="datetime"||false,I=p.properties.yDataType==="currency"||false;L.container=this;L.update=function(){v.transition().duration(u).call(L)};function N(e){if(e&&e.length&&e.filter(function(e){return e.values.length}).length){v.selectAll(".nv-noData").remove();return false}v.select(".nvd3.nv-wrap").remove();var i=n||parseInt(v.style("width"),10)||960,a=r||parseInt(v.style("height"),10)||400,s=v.selectAll(".nv-noData").data([L.strings().noData]);s.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");s.attr("x",t.left+i/2).attr("y",t.top+a/2).text(function(e){return e});return true}if(N(T)){return L}O=Array.isArray(T[0].values[0]);if(O){y.x(function(e){return e[0]});y.y(function(e){return e[1]})}else{y.x(function(e){return e.x});y.y(function(e){return e.y})}i=i&&S.title;T.map(function(e,t){e.series=t;e.total=d3.sum(e.values,function(e,t){return y.y()(e,t)});if(!e.total){e.disabled=true}});A=S.labels?S.labels.map(function(e){return[].concat(e.l)[0]||L.strings().noLabel}):[];D=T.filter(function(e){return!e.disabled});D=D.length?D:[{series:0,total:0,disabled:true,values:[]}];Y=d3.sum(D,function(e){return e.total});if(!Y){N();return L}h.disabled=D.map(function(e){return!!e.disabled});h.interpolate=y.interpolate();h.isArea=y.isArea()();var F=[{key:"Linear",disabled:y.interpolate()!=="linear"},{key:"Basis",disabled:y.interpolate()!=="basis"},{key:"Monotone",disabled:y.interpolate()!=="monotone"},{key:"Cardinal",disabled:y.interpolate()!=="cardinal"},{key:"Line",disabled:y.isArea()()===true},{key:"Area",disabled:y.isArea()()===false}];C=d3.max(D,function(e){return e.values.length})===1;y.padData(C?false:true).padDataOuter(-1).singlePoint(C).xScale(P&&!A.length?d3.time.scale():d3.scale.linear());if(C){var H=d3.merge(D.map(function(e){return e.values.map(function(e,t){return y.x()(e,t)})})).reduce(function(e,t){if(e.indexOf(t)<0)e.push(t);return e},[]).sort(function(e,t){return e-t}),j=d3.extent(H),U=1*(P&&!A.length?864e5:1);var B=d3.merge(D.map(function(e){return e.values.map(function(e,t){return y.y()(e,t)})})),z=d3.extent(B),W=D.length===1?2:Math.min((z[1]-z[0])/D.length,z[0]);y.xDomain([j[0]-U,j[1]+U]).yDomain([z[0]-W,z[1]+W]);b.ticks(H.length).tickValues(H).showMaxMin(false);M.ticks(C?5:null).showMaxMin(false).highlightZero(false)}else{y.xDomain(null).yDomain(null);b.ticks(null).tickValues(null).showMaxMin(P);M.ticks(null).showMaxMin(true).highlightZero(true)}f=y.xScale();d=y.yScale();b.scale(f);M.scale(d);L.render=function(){var l=n||parseInt(v.style("width"),10)||960,c=r||parseInt(v.style("height"),10)||400,f=l-t.left-t.right,d=c-t.top-t.bottom,h=f,p=d,g={top:0,right:0,bottom:0,left:0};var _=0,k=0,E=0,Y=0,R={width:0,height:0},N=0,H=0,j="";var U=v.selectAll("g.nv-wrap.nv-lineChart").data([D]),B=U.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),z=U.select("g").attr("class","nv-chartWrap");B.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF");z.select(".nv-background").attr("width",f+t.left+t.right).attr("height",d+t.top+t.bottom);B.append("g").attr("class","nv-titleWrap");var W=z.select(".nv-titleWrap");B.append("g").attr("class","nv-x nv-axis");var q=z.select(".nv-x.nv-axis");B.append("g").attr("class","nv-y nv-axis");var G=z.select(".nv-y.nv-axis");B.append("g").attr("class","nv-linesWrap");var V=z.select(".nv-linesWrap");B.append("g").attr("class","nv-controlsWrap");var $=z.select(".nv-controlsWrap");B.append("g").attr("class","nv-legendWrap");var J=z.select(".nv-legendWrap");U.attr("transform","translate("+t.left+","+t.top+")");W.select(".nv-title").remove();if(i){W.append("text").attr("class","nv-title").attr("x",o==="rtl"?f:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(S.title).attr("stroke","none").attr("fill","black");R=e.utils.getTextBBox(z.select(".nv-title"));Y+=R.height}if(a){w.id("controls_"+L.id()).strings(L.strings().controls).align("left").height(d-Y);$.datum(F).call(w);_=w.calculateWidth()}if(s){x.id("legend_"+L.id()).strings(L.strings().legend).align("right").height(d-Y);J.datum(T).call(x);k=x.calculateWidth()}E=f/(_+k);_=Math.floor(_*E);k=Math.floor(k*E);if(a){w.arrange(_);k=f-w.width()}if(s){x.arrange(k);_=f-x.width()}if(a){var X=o==="rtl"?f-w.width():0,Z=i?R.height:-x.margin().top;$.attr("transform","translate("+X+","+Z+")");N=w.height()}if(s){var K=e.utils.getTextBBox(J.select(".nv-legend-link")),Q=f-R.width-6,ee=i&&!a&&x.collapsed()&&Q>K.width?true:false,X=o==="rtl"?0:f-x.width(),Z=R.height;if(ee){Z=R.height-x.height()/2-K.height/2}else if(!i){Z=-x.margin().top}J.attr("transform","translate("+X+","+Z+")");H=ee?12:x.height()}Y+=Math.max(N,H);p=d-Y-g.top-g.bottom;var te=Math.pow(m,2)*Math.PI*(C?3:1);y.width(h).height(p).id(L.id()).size(te).sizeRange([te,te]).sizeDomain([te,te]);V.datum(D).call(y);var ne={top:0,right:0,bottom:0,left:0},re={top:0,right:0,bottom:0,left:0};function ie(){g.left=Math.max(re.left,ne.left);g.right=Math.max(re.right,ne.right);g.top=Math.max(re.top,ne.top);g.bottom=Math.max(re.bottom,ne.bottom)}function ae(){h=f-g.left-g.right;p=d-Y-g.top-g.bottom;y.width(h).height(p);y.scatter.resetDimensions(h,p)}M.margin(g).tickFormat(function(e,t){return M.valueFormat()(e,I)});G.call(M);ne=M.margin();ie();ae();j=g.left+",";j+=g.top+(b.orient()==="bottom"?p:0);q.attr("transform","translate("+j+")");b.tickSize(-p+(y.padData()?m:0),0).margin(g).tickFormat(function(e,t,n){return b.valueFormat()(e-!O,A,P)});q.call(b);re=b.margin();ie();ae();b.resizeTickLines(-p+(y.padData()?m:0));M.tickSize(-h+(y.padData()?m:0),0).margin(g);G.call(M);V.transition().duration(u).call(y);g.top+=Y;j=g.left+",";j+=g.top+(b.orient()==="bottom"?p:0);q.attr("transform","translate("+j+")");j=g.left+(M.orient()==="left"?0:h)+",";j+=g.top;G.attr("transform","translate("+j+")");V.attr("transform","translate("+g.left+","+g.top+")")};L.render();x.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled;if(!T.filter(function(e){return!e.disabled}).length){T.map(function(e){e.disabled=false;v.selectAll(".nv-series").classed("disabled",false);return e})}h.disabled=T.map(function(e){return!!e.disabled});g.stateChange(h);v.transition().duration(u).call(L)});w.dispatch.on("legendClick",function(e,t){if(!e.disabled){return}F=F.map(function(e){e.disabled=true;return e});e.disabled=false;switch(e.key){case"Basis":y.interpolate("basis");break;case"Linear":y.interpolate("linear");break;case"Monotone":y.interpolate("monotone");break;case"Cardinal":y.interpolate("cardinal");break;case"Line":y.isArea(false);break;case"Area":y.isArea(true);break}h.interpolate=y.interpolate();h.isArea=y.isArea();g.stateChange(h);v.transition().duration(u).call(L)});g.on("tooltipShow",function(e){if(c){k(e,_.parentNode)}});g.on("tooltipMove",function(t){if(l){e.tooltip.position(_.parentNode,l,t,"s")}});g.on("tooltipHide",function(){if(c){e.tooltip.cleanup()}});g.on("changeState",function(e){if(typeof e.disabled!=="undefined"){T.forEach(function(t,n){t.disabled=e.disabled[n]});h.disabled=e.disabled}if(typeof e.interpolate!=="undefined"){y.interpolate(e.interpolate);h.interpolate=e.interpolate}if(typeof e.isArea!=="undefined"){y.isArea(e.isArea);h.isArea=e.isArea}v.transition().duration(u).call(L)});g.on("chartClick",function(){if(w.enabled()){w.dispatch.closeMenu()}if(x.enabled()){x.dispatch.closeMenu()}})});return L}y.dispatch.on("elementMouseover.tooltip",function(e){g.tooltipShow(e)});y.dispatch.on("elementMousemove.tooltip",function(e){g.tooltipMove(e)});y.dispatch.on("elementMouseout.tooltip",function(){g.tooltipHide()});L.dispatch=g;L.lines=y;L.legend=x;L.controls=w;L.xAxis=b;L.yAxis=M;d3.rebind(L,y,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","color","fill","classes","gradient","locality");d3.rebind(L,y,"defined","isArea","interpolate","size","clipVoronoi","useVoronoi","interactive","nice");d3.rebind(L,b,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks");L.colorData=function(t){var n=arguments[0],r=arguments[1]||{};var i=function(t,n){return e.utils.defaultColor()(t,t.series)};var a=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"};a=function(e,t){var n=e.series*(r.step||1)%14;n=(n>9?"":"0")+n;return"nv-group nv-series-"+e.series+" nv-fill"+n+" nv-stroke"+n};break;case"data":i=function(t,n){return t.color||e.utils.defaultColor()(t,t.series)};a=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")};break}var s=!r.gradient?i:function(e,t){var n={orientation:r.orientation||"horizontal",position:r.position||"base"};return y.gradient(e,e.series,n)};y.color(i);y.fill(s);y.classes(a);x.color(i);x.classes(a);return L};L.margin=function(e){if(!arguments.length){return t}for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return L};L.width=function(e){if(!arguments.length){return n}n=e;return L};L.height=function(e){if(!arguments.length){return r}r=e;return L};L.showTitle=function(e){if(!arguments.length){return i}i=e;return L};L.showControls=function(e){if(!arguments.length){return a}a=e;return L};L.showLegend=function(e){if(!arguments.length){return s}s=e;return L};L.tooltip=function(e){if(!arguments.length){return l}l=e;return L};L.tooltips=function(e){if(!arguments.length){return c}c=e;return L};L.tooltipContent=function(e){if(!arguments.length){return S}S=e;return L};L.state=function(e){if(!arguments.length){return h}h=e;return L};L.strings=function(e){if(!arguments.length){return p}for(var t in e){if(e.hasOwnProperty(t)){p[t]=e[t]}}return L};L.direction=function(e){if(!arguments.length){return o}o=e;M.direction(e);b.direction(e);x.direction(e);w.direction(e);return L};L.delay=function(e){if(!arguments.length){return u}u=e;return L};return L};e.models.multiBar=function(){var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.ordinal(),a=d3.scale.linear(),s=Math.floor(Math.random()*1e4),o=function(e){return e.x},l=function(e){return e.y},u=e.utils.buildLocality(),c=[0],f=true,d=null,h,p=true,m=false,g=function(e){return e},_=false,v=true,y=60,b="ltr",M=200,x,w,S=false,k=function(t,n){return e.utils.defaultColor()(t,t.series)},L=k,T=false,d=null,E=function(e,t){return"nv-group nv-series-"+e.series},D=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");var A,Y;function C(u){u.each(function(u){var d=d3.select(this),h=v?"vertical":"horizontal",M=n-t.left-t.right,R=r-t.top-t.bottom,O=v?"width":"height",P=v?"height":"width",I=v?"width":"height",N=v?"x":"y",F=v?"y":"x",H=0,j=0,U=0,B=u.length-1,z=false,W=m,q=[],G=0;function V(e,t){return Math.max(Math.round(Math.abs(a(l(e,t))-a(0))),0)}function $(){return i.rangeBand()/(f?1:u.length)}function J(e){return e?1:-1}if(f){u=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(l)(u);if(W==="top"||W===true){W="end"}}else if(W){if(W==="total"){W="top"}else if(W===true){W="end"}z=v}if(f){var X=[];u[0].values.map(function(e,t){var n=0,r=0;u.map(function(e){var i=e.values[t];i.size=Math.abs(i.y);if(i.y<0){i.y1=r-(v?0:i.size);r-=i.size}else{i.y1=n+(v?i.size:0);n+=i.size}});X[t]={neg:r,pos:n}})}var Z=x&&w&&!m?[]:d3.merge(u.map(function(e){return e.values.map(function(e,t){return{x:o(e,t),y:l(e,t),y0:e.y0,y1:e.y1}})}));j=u[0].values.length;H=u.length;if(m){var K=W==="total"&&f?X.map(function(e){return e.neg}).concat(X.map(function(e){return e.pos})):Z.map(l);var Q=d3.extent(u.map(function(e,t){return e.series}));U=Q[0];B=Q[1];q=e.utils.stringSetLengths(K,d,g,"nv-label-value");G=e.utils.stringSetThickness([83],d,g,"nv-label-value")[0]}C.resetDimensions=function(e,i){n=e;r=i;M=e-t.left-t.right;R=i-t.top-t.bottom;ee()};function ee(){var e=v?M:R,t=v?R:M;var n=f?y:y*H+y,r=y*(f?.25:1),s=Math.max(.25,(e-j*n-r)/(2*n));if(_){i.domain(x||Z.map(function(e){return e.x})).rangeBands([0,e],.3)}else{i.domain(x||Z.map(function(e){return e.x})).rangeRoundBands([0,e],.25,s)}var o=o||d3.extent(Z.map(function(e){var t=v?0:e.y,n=v?e.y:0;return f?e.y>0?e.y1+t:e.y1+n:e.y}).concat(c));var l=v?[R,0]:[0,M];a.domain(o).range(l);if(m){if(v&&f&&d3.max(q)+8>$()){z=true}I=v&&!z?"labelHeight":"labelWidth"}if(W==="top"||W==="total"){var u=t,d=0,h=0,p=0,r=v?z?2:-2:2;K.forEach(function(e,t){var n=W==="total"&&f&&v&&!z?G:q[t];if(v&&e>0||!v&&e<0){if(a(e)-n<d){d=a(e)-n;p=n}}else{if(a(e)+n>u){u=a(e)+n;h=n}}});if(v){a.range([t-(a.domain()[0]<0?h+r+2:0),a.domain()[1]>0?p+r:0])}else{a.range([a.domain()[0]<0?p+r+4:0,t-(a.domain()[1]>0?h+r:0)])}}if(S){a.nice()}A=A||i;Y=Y||a}ee();var te=d.selectAll(".nvd3.nv-wrap").data([u]);var ne=te.enter().append("g");var re=ne.append("defs");var ie=ne.append("g");var ae=te.select("g");te.attr("class","nvd3 nv-wrap nv-multibar");C.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,s+"-"+n,r,k(t,n),te.select("defs"))};ie.append("g").attr("class","nv-groups");te.attr("transform","translate("+t.left+","+t.top+")");if(p){re.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect");te.select("#nv-edge-clip-"+s+" rect").attr("width",M).attr("height",R)}ae.attr("clip-path",p?"url(#nv-edge-clip-"+s+")":"");if(T){var se=e.utils.createTexture(re,s)}var oe=te.select(".nv-groups").selectAll(".nv-group").data(function(e){return e});var le=oe.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);oe.exit().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).selectAll("g.nv-bar").attr("y",function(e){return f?Y(e.y0):Y(0)}).attr(O,0).remove();oe.exit().remove();oe.attr("class",E).attr("fill",L).classed("hover",function(e){return e.hover}).classed("nv-active",function(e){return e.active==="active"}).classed("nv-inactive",function(e){return e.active==="inactive"}).style({"stroke-opacity":1,"fill-opacity":1});oe.on("mouseover",function(e,t,n){d3.select(this).classed("hover",true)}).on("mouseout",function(e,t,n){d3.select(this).classed("hover",false)});var ue=oe.selectAll("g.nv-bar").data(function(e){return e.values});var ce=ue.enter().append("g").attr("class","nv-bar");ue.exit().remove();ce.append("rect").attr("class","nv-base").style("fill","inherit").attr("x",0).attr("y",0);if(T){ce.append("rect").attr("class","nv-texture").attr("x",0).attr("y",0).style("mask","url("+se+")")}ce.append("rect").attr("class","nv-label-box").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("rx",2).attr("ry",2).style("fill","transparent").style("stroke-width",0).style("fill-opacity",0);ce.append("text").attr("class","nv-label-value");ue.attr("class",function(e,t){return"nv-bar "+(l(e,t)<0?"negative":"positive")}).attr("transform",function(e,t,n){var r=f?{x:Math.round(i(o(e,t))),y:Math.round(a(e.y1))}:{x:Math.round(n*$()+i(o(e,t))),y:Math.round(l(e,t)<0?v?a(0):a(l(e,t)):v?a(l(e,t)):a(0))};return"translate("+r[N]+","+r[F]+")"});ue.select("rect.nv-base").attr(N,0).attr(P,V).attr(O,$);if(T){ue.select("rect.nv-texture").attr(N,0).attr(P,V).attr(O,$).style("fill",function(t,n){var r=L(t),i=e.utils.getTextContrast(r,n);return i})}function fe(e,t,n,r){return{value:l(t,n),point:t,series:u[r],pointIndex:n,seriesIndex:r,groupIndex:t.group,id:s,e:e}}ue.on("mouseover",function(e,t,n){var r=fe(d3.event,e,t,n);D.elementMouseover(r)}).on("mousemove",function(e,t,n){D.elementMousemove(d3.event)}).on("mouseout",function(e,t,n){D.elementMouseout()}).on("click",function(e,t,n){d3.event.stopPropagation();var r=fe(d3.event,e,t,n);D.elementClick(r)}).on("dblclick",function(e,t,n){d3.event.stopPropagation();var r=fe(d3.event,e,t,n);D.elementDblClick(r)});var de=ue.select(".nv-label-value");if(m){de.text(function(e,t){var n=W==="total"&&f?l(e,t)<0?X[t].neg:X[t].pos:l(e,t);return g(n)}).each(function(e,t){var n=this.getBoundingClientRect();e.labelWidth=Math.floor(n.width)+4;e.labelHeight=Math.floor(n.height);e.barLength=V(e,t);e.barThickness=$()});de.attr("dy","0.35em").attr("text-anchor",function(e,t){var n="middle",r=l(e,t)<0;if(v&&!z){n="middle"}else{switch(W){case"start":n=r?"end":"start";break;case"middle":n="middle";break;case"end":n=r?"start":"end";break;case"top":case"total":n=r?"end":"start";break}n=b==="rtl"&&n!=="middle"?n==="start"?"end":"start":n}return n}).attr("transform","rotate("+(z?-90:0)+" 0,0)").attr("x",function(e,t){var n=0,r=l(e,t)<0?-1:1,i=r<0,a=(4+(z||!v)*2)*r;if(v&&!z){n=e.barThickness/2}else{switch(W){case"start":n=e.barLength*(i-z)+a;break;case"middle":n=e.barLength*(z?-1:1)/2;break;case"end":n=e.barLength*(!z-i)-a;break;case"top":case"total":n=e.barLength*(!z-i)+2*r;break}}return n}).attr("y",function(e,t){var n=0,r=l(e,t)<0?-1:1,i=r<0,a=(e.labelHeight/2+(4+z*2)*(W==="total"?0:1))*r;if(v&&!z){switch(W){case"start":n=e.barLength*(1-i)-a;break;case"middle":n=e.barLength/2;break;case"end":n=e.barLength*(0+i)+a;break;case"total":n=e.barLength*(0+i)+a*-1;break}}else{n=e.barThickness/2}return n}).style("fill",function(t,n,r){if(W==="top"||W==="total"){return"#000"}var i=L(t),a=e.utils.getTextContrast(i,n);return a}).style("fill-opacity",function(e,t){if(W==="total"){if(e.series!==U&&e.series!==B){return 0}var n=l(e,t);return n<0&&X[t].neg===e.y1+(v?n:0)||n>=0&&X[t].pos===e.y1+(v?0:n)?1:0}else{var r=e.barLength<(!v||z?e.labelWidth:e.labelHeight)+8,i=e.barThickness<(!v||z?e.labelHeight:e.labelWidth)+4;return W!=="top"&&(r||i)?0:1}});function he(e,t,n,r){var i=0,a=l(e,t)<0?-1:1,s=n===a<0?1:0,o=e.barLength-e[I];if(n?v:!v){i=(e.barThickness-(z===n?e.labelHeight:e.labelWidth))/2}else{switch(W){case"start":i=o*(0+s)+r*a;break;case"middle":i=o/2;break;case"end":i=o*(1-s)-r*a;break;case"top":i=e.barLength*(1-s)-e.labelWidth*(0+s);break;case"total":i=e.barLength*(1-s)-(z===n?e.labelHeight:e.labelWidth)*(0+s);break}}return i}if(W==="total"&&f){ue.select("rect.nv-label-box").style("fill-opacity",0)}ue.filter(function(e,t){return W==="total"&&f?e.series===U||e.series===B:true}).select("rect.nv-label-box").attr("x",function(e,t){return he(e,t,true,4)}).attr("y",function(e,t){return he(e,t,false,-4)}).attr("width",function(e,t){return z?e.labelHeight:e.labelWidth}).attr("height",function(e,t){return z?e.labelWidth:e.labelHeight}).style("fill",function(e,t){return W==="top"||W==="total"?"#fff":L(e,t)}).style("fill-opacity",function(e,t){var n=e.barLength<(!v||z?e.labelWidth:e.labelHeight)+8,r=e.barThickness<(!v||z?e.labelHeight:e.labelWidth)+4;return W!=="top"&&(n||r)?0:1})}else{de.text("").style("fill-opacity",0);ue.select("rect.label-box").style("fill-opacity",0)}A=i.copy();Y=a.copy()});return C}C.dispatch=D;C.color=function(e){if(!arguments.length){return k}k=e;return C};C.fill=function(e){if(!arguments.length){return L}L=e;return C};C.classes=function(e){if(!arguments.length){return E}E=e;return C};C.gradient=function(e){if(!arguments.length){return gradient}gradient=e;return C};C.x=function(e){if(!arguments.length){return o}o=e;return C};C.y=function(e){if(!arguments.length){return l}l=e;return C};C.margin=function(e){if(!arguments.length){return t}for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return C};C.width=function(e){if(!arguments.length){return n}n=e;return C};C.height=function(e){if(!arguments.length){return r}r=e;return C};C.xScale=function(e){if(!arguments.length){return i}i=e;return C};C.yScale=function(e){if(!arguments.length){return a}a=e;return C};C.xDomain=function(e){if(!arguments.length){return x}x=e;return C};C.yDomain=function(e){if(!arguments.length){return w}w=e;return C};C.forceY=function(e){if(!arguments.length){return c}c=e;return C};C.stacked=function(e){if(!arguments.length){return f}f=e;return C};C.clipEdge=function(e){if(!arguments.length){return p}p=e;return C};C.barColor=function(t){if(!arguments.length){return d}d=e.utils.getColor(t);return C};C.disabled=function(e){if(!arguments.length){return h}h=e;return C};C.id=function(e){if(!arguments.length){return s}s=e;return C};C.delay=function(e){if(!arguments.length){return M}M=e;return C};C.showValues=function(e){if(!arguments.length){return m}m=isNaN(parseInt(e,10))?e:parseInt(e,10)&&true||false;return C};C.valueFormat=function(e){if(!arguments.length){return g}g=e;return C};C.withLine=function(e){if(!arguments.length){return _}_=e;return C};C.vertical=function(e){if(!arguments.length){return v}v=e;return C};C.baseDimension=function(e){if(!arguments.length){return y}y=e;return C};C.direction=function(e){if(!arguments.length){return b}b=e;return C};C.nice=function(e){if(!arguments.length){return S}S=e;return C};C.textureFill=function(e){if(!arguments.length)return T;T=e;return C};C.locality=function(t){if(!arguments.length){return u}u=e.utils.buildLocality(t);return C};return C};e.models.multiBarChart=function(){var t=true,n={top:10,right:10,bottom:10,left:10},r=null,i=null,a=false,s=false,o=true,l="ltr",u=null,c=true,f=true,d=function(e){return},h,p,m={},g={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available.",noLabel:"undefined"},_=true,v=d3.dispatch("chartClick","elementClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState");var y=false,b=0;var M=function(t,n,r){var i=isNaN(parseInt(t,10))||!n||!Array.isArray(n)?t:n[parseInt(t,10)]||t;return r?e.utils.dateFormat(i,"%x",C.locality()):i};var x=function(t,n){return e.utils.numberFormatSI(t,2,n,C.locality())};var w=e.models.multiBar().stacked(false).clipEdge(false),S=e.models.axis().valueFormat(M).tickSize(0).tickPadding(4).highlightZero(false).showMaxMin(false),k=e.models.axis().valueFormat(x).tickPadding(4),L=e.models.legend(),T=e.models.legend().color(["#444"]),E=e.models.scroll();var D=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"};var A=function(n,r,i){var a=i[n.groupIndex].label,s=n.point.y,o=i?Math.abs(s*100/i[n.groupIndex]._height).toFixed(1):S.tickFormat()(n.point.x),l=D(a,o,s,n,C),c=n.value<0?t?"n":"e":t?"s":"w";u=e.tooltip.show(n.e,l,c,null,r)};var Y=function(e,t,n){return};function C(g){g.each(function(g){var M=this,x=d3.select(this),D=t?"multibarChart":"multiBarHorizontalChart";var R=g?g.properties:{},O=g?g.data:null;var P=[],I=0,N=[],F=[].groupCount=0,H=0,j=false,U=g.properties.xDataType==="datetime"||false,B=g.properties.yDataType==="currency"||false;C.container=this;C.update=function(){x.transition().call(C)};function z(e){if(e&&e.length&&e.filter(function(e){return e.values.length}).length){x.selectAll(".nv-noData").remove();return false}x.select(".nvd3.nv-wrap").remove();var t=r||parseInt(x.style("width"),10)||960,a=i||parseInt(x.style("height"),10)||400,s=x.selectAll(".nv-noData").data([C.strings().noData]);s.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");s.attr("x",n.left+t/2).attr("y",n.top+a/2).text(function(e){return e});return true}if(z(O)){return C}C.dataSeriesActivate=function(e){var t=e.series;t.active=!t.active||t.active==="inactive"?"active":"inactive";t.values.map(function(e){e.active=t.active});if(t.active==="active"){O.filter(function(e){return e.active!=="active"}).map(function(e){e.active="inactive";e.values.map(function(e){e.active="inactive"});return e})}if(!O.filter(function(e){return e.active==="active"}).length){O.map(function(e){e.active="";e.values.map(function(e){e.active=""});x.selectAll(".nv-series").classed("nv-inactive",false);return e})}x.call(C)};O.forEach(function(e,t){e.series=t;e.values.forEach(function(e,n){e.series=t});if(!e._values){e._values=e.values.map(function(t,n){return{series:e.series,group:n,color:typeof e.color!=="undefined"?e.color:"",x:w.x()(t,n),y:w.y()(t,n)}});e.total=d3.sum(e._values,function(e,t){return e.y})}e.disabled=e.disabled||e.total===0;e._values.forEach(function(t,n){t.active=typeof e.active!=="undefined"?e.active:""})});P=O.filter(function(e,t){return!e.disabled&&(!e.type||e.type==="bar")});I=P.length;j=I>0;N=R.groups.map(function(e,t){e.total=0;e._height=0;P.forEach(function(n,r){n._values.filter(function(e,n){return e.group===t}).forEach(function(t,n){e.total+=t.y;e._height+=Math.abs(t.y)})});return e});H=d3.sum(N,function(e){return e.total});F=N.filter(function(e,t){return _?e._height!==0:true}).map(function(e){return e.label||C.strings().noLabel});groupCount=F.length;if(_){P.forEach(function(e,t){e.values=e._values.filter(function(e,t){return N[t]._height!==0}).map(function(e,t){return{series:e.series,group:e.group,color:e.color,x:t+1,y:e.y,active:e.active}});return e})}if(!j){z();return C}if(!P.length){P=[{values:[]}]}m.disabled=O.map(function(e){return!!e.disabled});m.stacked=w.stacked();a=a&&R.title;var W=[{key:"Grouped",disabled:m.stacked},{key:"Stacked",disabled:!m.stacked}];h=w.xScale();p=w.yScale();S.scale(h);k.scale(p);C.render=function(){var u=r||parseInt(x.style("width"),10)||960,c=i||parseInt(x.style("height"),10)||400,h=u-n.left-n.right,p=c-n.top-n.bottom,g=g||h,_=_||p,M={top:0,right:0,bottom:0,left:0};var A=0,Y=0,N=0,H=0,j={width:0,height:0},z=0,q=0,G="";var V=w.stacked()?t?72:32:32,$=m.stacked?V:V*I+V,J=V*(m.stacked?.25:1),X=groupCount*$+J;var Z=x.selectAll(".nvd3.nv-wrap").data([O]),K=Z.enter().append("g").attr("class","nvd3 nv-wrap").append("g"),Q=Z.select("g").attr("class","nv-chartWrap");Z.attr("class","nvd3 nv-wrap nv-"+D);K.append("defs");K.append("g").attr("class","nv-scroll-background");K.append("g").attr("class","nv-titleWrap");var ee=Q.select(".nv-titleWrap");K.append("g").attr("class","nv-y nv-axis");var te=Q.select(".nv-y.nv-axis");K.append("g").attr("class","nv-scroll-wrap");var ne=Q.select(".nv-scroll-wrap");K.select(".nv-scroll-wrap").append("g").attr("class","nv-x nv-axis");var re=Q.select(".nv-x.nv-axis");K.select(".nv-scroll-wrap").append("g").attr("class","nv-barsWrap");var ie=Q.select(".nv-barsWrap");K.append("g").attr("class","nv-controlsWrap");var ae=Q.select(".nv-controlsWrap");K.append("g").attr("class","nv-legendWrap");var se=Q.select(".nv-legendWrap");Z.attr("transform","translate("+n.left+","+n.top+")");ee.select(".nv-title").remove();if(a){ee.append("text").attr("class","nv-title").attr("x",l==="rtl"?h:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(R.title).attr("stroke","none").attr("fill","black");j=e.utils.getTextBBox(Q.select(".nv-title"));H+=j.height}if(s){T.id("controls_"+C.id()).strings(C.strings().controls).align("left").height(p-H);ae.datum(W).call(T);A=T.calculateWidth()}if(o){if(w.barColor()){O.forEach(function(e,t){e.color=d3.rgb("#ccc").darker(t*1.5).toString()})}L.id("legend_"+C.id()).strings(C.strings().legend).align("right").height(p-H);se.datum(O).call(L);Y=L.calculateWidth()}N=h/(A+Y);A=Math.floor(A*N);Y=Math.floor(Y*N);if(s){T.arrange(A);Y=h-T.width()}if(o){L.arrange(Y);A=h-L.width()}if(s){var oe=l==="rtl"?h-T.width():0,le=a?j.height:-T.margin().top;ae.attr("transform","translate("+oe+","+le+")");z=T.height()-(a?0:T.margin().top)}if(o){var ue=e.utils.getTextBBox(se.select(".nv-legend-link")),ce=h-j.width-6,fe=a&&!s&&L.collapsed()&&ce>ue.width?true:false,oe=l==="rtl"?0:h-L.width(),le=j.height;if(fe){le=j.height-L.height()/2-ue.height/2}else if(!a){le=-L.margin().top}se.attr("transform","translate("+oe+","+le+")");q=fe?12:L.height()-(a?0:L.margin().top)}H+=Math.max(z,q);_=p-H-M.top-M.bottom;function de(e){if(e==="width"){return t&&f?Math.max(g,X):g}else if(e==="height"){return!t&&f?Math.max(_,X):_}else{return 0}}w.vertical(t).baseDimension(V).disabled(O.map(function(e){return e.disabled})).width(de("width")).height(de("height"));ie.data([P]).call(w);var he={top:0,right:0,bottom:0,left:0},pe={top:0,right:0,bottom:0,left:0};function me(){M.left=Math.max(pe.left,he.left);M.right=Math.max(pe.right,he.right);M.top=Math.max(pe.top,he.top);M.bottom=Math.max(pe.bottom,he.bottom)}function ge(){g=h-M.left-M.right;_=p-H-M.top-M.bottom;w.resetDimensions(de("width"),de("height"))}k.orient(t?"left":"bottom").margin(M).tickFormat(function(e,t){return k.valueFormat()(e,B)}).ticks(_/48);te.call(k);he=k.margin();me();ge();S.orient(t?"bottom":"left").margin(M).tickFormat(function(n,r,i){var a=S.valueFormat()(r,F,U);if(!i){a=e.utils.stringEllipsify(a,x,Math.max(t?V*2:h*.2,75))}return a});G=M.left+",";G+=M.top+(S.orient()==="bottom"?_:0);re.attr("transform","translate("+G+")");re.call(S);pe=S.margin();me();ge();S.tickSize(0).margin(M);re.call(S);k.tickSize(t?-g:-_,0).margin(M);te.call(k);ie.transition().call(w);M.top+=H;G=(t||S.orient()==="left"?0:g)+",";G+=t&&S.orient()==="bottom"?_+2:-2;re.attr("transform","translate("+G+")");G=M.left+(t||k.orient()==="bottom"?0:g)+",";G+=M.top+(t||k.orient()==="left"?0:_);te.attr("transform","translate("+G+")");ne.attr("transform","translate("+M.left+","+M.top+")");if(f){y=X>(t?g:_);re.select(".nv-axislabel").attr("x",(t?g:-_)/2);var _e=(t?g:_)-X,ve=function(){
v.tooltipHide(d3.event);b=E.pan(_e);re.select(".nv-axislabel").attr("x",(t?g-b*2:b*2-_)/2)};E.id(C.id()).enable(y).vertical(t).width(g).height(_).margin(M).minDimension(X).panHandler(ve);E(Q,K,ne,S);E.init(b,d);E.panHandler()()}};C.render();L.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled;e.active=false;if(!O.filter(function(e){return!e.disabled}).length){O.map(function(e){e.disabled=false;return e})}if(!O.filter(function(e){return e.active==="active"}).length){O.map(function(e){e.active="";return e})}m.disabled=O.map(function(e){return!!e.disabled});v.stateChange(m);x.transition().call(C)});T.dispatch.on("legendClick",function(e,t){if(!e.disabled){return}W=W.map(function(e){e.disabled=true;return e});e.disabled=false;switch(e.key){case"Grouped":w.stacked(false);break;case"Stacked":w.stacked(true);break}m.stacked=w.stacked();v.stateChange(m);x.transition().call(C)});v.on("tooltipShow",function(e){if(c){A(e,M.parentNode,N)}});v.on("tooltipMove",function(n){if(u){e.tooltip.position(M.parentNode,u,n,t?"s":"w")}});v.on("tooltipHide",function(){if(c){e.tooltip.cleanup()}});v.on("changeState",function(e){if(typeof e.disabled!=="undefined"){O.forEach(function(t,n){t.disabled=e.disabled[n]});m.disabled=e.disabled}if(typeof e.stacked!=="undefined"){w.stacked(e.stacked);m.stacked=e.stacked}x.transition().call(C)});v.on("chartClick",function(){if(T.enabled()){T.dispatch.closeMenu()}if(L.enabled()){L.dispatch.closeMenu()}});w.dispatch.on("elementClick",function(e){v.chartClick();Y(O,e,C)})});return C}w.dispatch.on("elementMouseover.tooltip",function(e){v.tooltipShow(e)});w.dispatch.on("elementMousemove.tooltip",function(e){v.tooltipMove(e)});w.dispatch.on("elementMouseout.tooltip",function(){v.tooltipHide()});C.dispatch=v;C.multibar=w;C.legend=L;C.controls=T;C.xAxis=S;C.yAxis=k;d3.rebind(C,w,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient","locality");d3.rebind(C,w,"stacked","showValues","valueFormat","labelFormat","nice");d3.rebind(C,S,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks");C.colorData=function(n){var r=arguments[0],i=arguments[1]||{};var a=function(t,n){return e.utils.defaultColor()(t,t.series)};var s=function(e,t){return"nv-group nv-series-"+e.series};switch(r){case"graduated":a=function(e,t){return d3.interpolateHsl(d3.rgb(i.c1),d3.rgb(i.c2))(e.series/i.l)};break;case"class":a=function(){return"inherit"};s=function(e,t){var n=e.series*(i.step||1)%14;n=(n>9?"":"0")+n;return"nv-group nv-series-"+e.series+" nv-fill"+n};break;case"data":a=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)};s=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")};break}var o=!i.gradient?a:function(e,n){var r={orientation:i.orientation||(t?"vertical":"horizontal"),position:i.position||"middle"};return w.gradient(e,e.series,r)};w.color(a);w.fill(o);w.classes(s);L.color(a);L.classes(s);return C};C.margin=function(e){if(!arguments.length){return n}for(var t in e){if(e.hasOwnProperty(t)){n[t]=e[t]}}return C};C.vertical=function(e){if(!arguments.length){return t}t=e;return C};C.width=function(e){if(!arguments.length){return r}r=e;return C};C.height=function(e){if(!arguments.length){return i}i=e;return C};C.showTitle=function(e){if(!arguments.length){return a}a=e;return C};C.showControls=function(e){if(!arguments.length){return s}s=e;return C};C.showLegend=function(e){if(!arguments.length){return o}o=e;return C};C.tooltip=function(e){if(!arguments.length){return u}u=e;return C};C.tooltips=function(e){if(!arguments.length){return c}c=e;return C};C.tooltipContent=function(e){if(!arguments.length){return D}D=e;return C};C.state=function(e){if(!arguments.length){return m}m=e;return C};C.strings=function(e){if(!arguments.length){return g}for(var t in e){if(e.hasOwnProperty(t)){g[t]=e[t]}}return C};C.allowScroll=function(e){if(!arguments.length){return f}f=e;return C};C.overflowHandler=function(e){if(!arguments.length){return d}d=d3.functor(e);return C};C.seriesClick=function(e){if(!arguments.length){return Y}Y=e;return C};C.hideEmptyGroups=function(e){if(!arguments.length){return _}_=e;return C};C.direction=function(e){if(!arguments.length){return l}l=e;w.direction(e);S.direction(e);k.direction(e);L.direction(e);T.direction(e);return C};return C};e.models.paretoChart=function(){var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=function(e){return e.x},a=function(e){return e.y},s=e.utils.buildLocality(),o=false,l=true,u=null,c=true,f="ltr",d=function(e,t,n,r,i){return"<p><b>"+e+"</b></p>"+"<p><b>"+n+"</b></p>"+"<p><b>"+t+"%</b></p>"},h=function(e,t,n,r,i){return"<p><p>"+e+": <b>"+n+"</b></p>"},p=function(e,t,n,r,i){return"<p>"+r.key+": <b>"+n+"</b></p>"},m,g,_={barlegend:{close:"Hide bar legend",open:"Show bar legend"},linelegend:{close:"Hide line legend",open:"Show line legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available.",noLabel:"undefined"},v=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove");var y=function(t,n,r){var i=isNaN(parseInt(t,10))||!n||!Array.isArray(n)?t:n[parseInt(t,10)]||t;return r?e.utils.dateFormat(i,"yMMMM",C.locality()):i};var b=function(t,n){return e.utils.numberFormatSI(t,2,n,C.locality())};var M=e.models.multiBar().stacked(true).clipEdge(false).withLine(true).nice(false),x=e.models.line().color(function(e,t){return"#FFF"}).fill(function(e,t){return"#FFF"}).useVoronoi(false).nice(false),w=e.models.line().useVoronoi(false).color("data").nice(false),S=e.models.axis().valueFormat(y).orient("bottom").tickSize(0).tickPadding(4).wrapTicks(true).highlightZero(false).showMaxMin(false),k=e.models.axis().valueFormat(b).orient("left").tickPadding(7).showMaxMin(true),L=e.models.legend().align("left").position("middle"),T=e.models.legend().align("right").position("middle");var E=function(t,n,r){var i=t.series.key,a=(t.point.y*100/r[t.pointIndex].t).toFixed(1),s=w.y()(t.point,t.pointIndex),o=t.series.type==="bar"?d(i,a,s,t,C):h(i,a,s,t,C);u=e.tooltip.show(t.e,o,"s",null,n)};var D=function(t,n){var r=p(t.key,0,t.val,t,C);u=e.tooltip.show(t.e,r,"s",null,n)};var A=function(e,t,n,r){return};var Y=function(e){var t=document.documentElement,n=e.getBoundingClientRect(),r=t.scrollLeft+document.body.scrollLeft,i=t.scrollTop+document.body.scrollTop,a=n.left+r,s=n.top+i;return{x:a,y:s}};function C(s){s.each(function(s){var d=s.properties,h=s.data,p=d3.select(this),_=this,y=(n||parseInt(p.style("width"),10)||960)-t.left-t.right,b=(r||parseInt(p.style("height"),10)||400)-t.top-t.bottom,Y=y,R=b,O={top:0,right:0,bottom:0,left:0},P=0,I=0,N=0,F=Math.pow(6,2)*Math.PI,H=s.properties.xDataType==="datetime"||false,j=s.properties.yDataType==="currency"||false;C.update=function(){p.call(C)};C.container=this;if(!h||!h.length||!h.filter(function(e){return e.values.length}).length){var U=p.selectAll(".nv-noData").data([C.strings().noData]);U.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");U.attr("x",t.left+y/2).attr("y",t.top+b/2).text(function(e){return e});return C}else{p.selectAll(".nv-noData").remove()}C.dataSeriesActivate=function(e){var t=e.series;t.active=!t.active||t.active==="inactive"?"active":"inactive";t.values.map(function(e){e.active=t.active});if(t.active==="active"){h.filter(function(e){return e.active!=="active"}).map(function(e){e.active="inactive";e.values.map(function(e){e.active="inactive"});return e})}if(!h.filter(function(e){return e.active==="active"}).length){h.map(function(e){e.active="";e.values.map(function(e){e.active=""});p.selectAll(".nv-series").classed("nv-inactive",false);return e})}p.call(C)};var B=h.filter(function(e){return!e.disabled&&(!e.type||e.type==="bar")});var z=h.filter(function(e){return!e.disabled&&e.type==="line"}).map(function(e){if(!M.stacked()){e.values=e.valuesOrig.map(function(e,t){return{series:e.series,x:e.x+e.series*.25-t*.25,y:e.y}})}else{e.values.map(function(e){e.y=0});B.map(function(t,n){t.values.map(function(t,n){e.values[n].y+=t.y})});e.values.map(function(t,n){if(n>0){t.y+=e.values[n-1].y}})}return e});var W=d.groupData,q=W.map(function(e){return[].concat(e.l)[0]||C.strings().noLabel}),G=d.quota||0,V=d.quotaLabel||"",$=d.targetQuota||0,J=d.targetQuotaLabel||"";B=B.length?B:[{values:[]}];z=z.length?z:[{values:[]}];var X=h.filter(function(e){return e.type==="line"});X.push({key:V,type:"dash",color:"#444",series:X.length,values:{series:X.length,x:0,y:0}});if($>0){X.push({key:J,type:"dash",color:"#777",series:X.length,values:{series:X.length+1,x:0,y:0}})}var Z=h.filter(function(e){return!e.disabled}).map(function(e){return e.valuesOrig.map(function(e,t){return i(e,t)})});var K=h.map(function(e){return e.valuesOrig.map(function(e,t){return a(e,t)})});m=M.xScale();g=M.yScale();S.tickFormat(function(t,n,r){var i=S.valueFormat()(n,q,H);if(!r){i=e.utils.stringEllipsify(i,p,Math.max(y*.2,75))}return i}).scale(m);k.tickFormat(function(e,t){return k.valueFormat()(e,j)}).scale(g);var Q=p.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([h]),ee=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),te=Q.select("g").attr("class","nv-chartWrap");ee.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("width",y+t.left+t.right).attr("height",b+t.top+t.bottom).attr("fill","#FFF");ee.append("g").attr("class","nv-titleWrap");var ne=te.select(".nv-titleWrap");ee.append("g").attr("class","nv-x nv-axis");var re=te.select(".nv-x.nv-axis");ee.append("g").attr("class","nv-y nv-axis");var ie=te.select(".nv-y.nv-axis");ee.append("g").attr("class","nv-barsWrap");var ae=te.select(".nv-barsWrap");ee.append("g").attr("class","nv-quotaWrap");var se=te.select(".nv-quotaWrap");ee.append("g").attr("class","nv-linesWrap1");var oe=te.select(".nv-linesWrap1");ee.append("g").attr("class","nv-linesWrap2");var le=te.select(".nv-linesWrap2");ee.append("g").attr("class","nv-legendWrap nv-barLegend");var ue=te.select(".nv-legendWrap.nv-barLegend");ee.append("g").attr("class","nv-legendWrap nv-lineLegend");var ce=te.select(".nv-legendWrap.nv-lineLegend");Q.attr("transform","translate("+t.left+","+t.top+")");if(o&&d.title){ne.select(".nv-title").remove();ne.append("text").text(d.title).attr("class","nv-title").attr("x",f==="rtl"?y:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").attr("stroke","none").attr("fill","black");O.top+=parseInt(te.select(".nv-title").node().getBoundingClientRect().height/1.15,10)+parseInt(te.select(".nv-title").style("margin-top"),10)+parseInt(te.select(".nv-title").style("margin-bottom"),10)}if(l){L.id("barlegend_"+C.id()).strings(C.strings().barlegend).align("left").height(b-O.top);ue.datum(h.filter(function(e){return e.type==="bar"})).call(L);P=L.calculateWidth();T.id("linelegend_"+C.id()).strings(C.strings().linelegend).align("right").height(b-O.top);ce.datum(X).call(T);I=T.calculateWidth();N=y/(P+I);L.arrange(Math.floor(N*P));T.arrange(Math.floor(N*I));ue.attr("transform","translate("+(f==="rtl"?y-L.width():0)+","+O.top+")");ce.attr("transform","translate("+(f==="rtl"?0:y-T.width())+","+O.top+")")}O.top+=Math.max(L.height(),T.height())+4;R=b-O.top-O.bottom;var fe=m.domain(d3.merge(Z)).rangeBands([0,y-t.left-t.right],.3),de=Math.max(d3.max(d3.merge(K)),G,$||0),he=Math.ceil(de*.1)*10,pe=fe(1)+fe.rangeBand()/(M.stacked()||z.length===1?2:4);M.width(Y).height(R).forceY([0,he]).id(C.id());ae.datum(B).call(M);x.margin({top:0,right:pe,bottom:0,left:pe}).width(Y).height(R).forceY([0,he]).useVoronoi(false).id("outline_"+C.id());w.margin({top:0,right:pe,bottom:0,left:pe}).width(Y).height(R).forceY([0,he]).useVoronoi(false).size(F).sizeRange([F,F]).sizeDomain([F,F]).id("foreground_"+C.id());oe.datum(z).call(x);le.datum(z).call(w);re.call(S);var me=S.margin();ie.style("opacity",B.length?1:0).call(k);var ge=k.margin();se.selectAll("line").remove();ie.selectAll("text.nv-quotaValue").remove();ie.selectAll("text.nv-targetQuotaValue").remove();var _e=0,ve=14;if($>0){se.append("line").attr("class","nv-quotaLineTarget").attr("x1",0).attr("y1",0).attr("x2",Y).attr("y2",0).attr("transform","translate(0,"+g($)+")").style("stroke-dasharray","8, 8");se.append("line").datum({key:J,val:$}).attr("class","nv-quotaLineTarget nv-quotaLineBackground").attr("x1",0).attr("y1",0).attr("x2",Y).attr("y2",0).attr("transform","translate(0,"+g($)+")");ie.append("text").text(k.valueFormat()($,true)).attr("class","nv-targetQuotaValue").attr("dy",".36em").attr("dx","0").attr("text-anchor",f==="rtl"?"start":"end").attr("transform","translate("+(0-k.tickPadding())+","+g($)+")");_e=Math.round(te.select("text.nv-targetQuotaValue").node().getBoundingClientRect().width+k.tickPadding())}if(G>0){se.append("line").attr("class","nv-quotaLine").attr("x1",0).attr("y1",0).attr("x2",Y).attr("y2",0).attr("transform","translate(0,"+g(G)+")").style("stroke-dasharray","8, 8");se.append("line").datum({key:V,val:G}).attr("class","nv-quotaLine nv-quotaLineBackground").attr("x1",0).attr("y1",0).attr("x2",Y).attr("y2",0).attr("transform","translate(0,"+g(G)+")");ie.append("text").text(k.valueFormat()(G,true)).attr("class","nv-quotaValue").attr("dy",".36em").attr("dx","0").attr("text-anchor",f==="rtl"?"start":"end").attr("transform","translate("+-k.tickPadding()+","+g(G)+")");_e=Math.max(_e,Math.round(te.select("text.nv-quotaValue").node().getBoundingClientRect().width+k.tickPadding()))}Y=y-O.left-Math.max(_e,ge.left)-O.right-ge.right;R=b-O.top-ge.top-O.bottom-ge.bottom;M.width(Y).height(R);ae.call(M);re.call(S);ie.call(k);me=S.margin();ge=k.margin();O.left+=Math.max(_e,me.left,ge.left);O.right+=Math.max(me.right,ge.right);O.top+=Math.max(me.top,ge.top);O.bottom+=Math.max(me.bottom,ge.bottom);Y=y-O.left-O.right;R=b-O.top-O.bottom;M.width(Y).height(R);ae.attr("transform","translate("+O.left+","+O.top+")").call(M);x.width(Y).height(R);w.width(Y).height(R);oe.attr("transform","translate("+O.left+","+O.top+")").call(x);le.attr("transform","translate("+O.left+","+O.top+")").call(w);se.attr("transform","translate("+O.left+","+O.top+")").selectAll("line").attr("x2",Y);re.attr("transform","translate("+O.left+","+(S.orient()==="bottom"?R+O.top:O.top)+")").call(S);k.ticks(Math.ceil(R/48)).tickSize(-Y,0);ie.attr("transform","translate("+(k.orient()==="left"?O.left:O.left+Y)+","+O.top+")").call(k);if($>0){se.select("line.nv-quotaLineTarget").attr("x2",Y).attr("transform","translate(0,"+g($)+")");ie.select("text.nv-targetQuotaValue").attr("transform","translate("+(0-k.tickPadding())+","+g($)+")");ve=Math.round(parseInt(te.select("text.nv-targetQuotaValue").node().getBoundingClientRect().height,10)/1.15);ie.selectAll("g.tick, g.nv-axisMaxMin").each(function(e,t){if(Math.abs(g(e)-g($))<=ve){d3.select(this).style("opacity",0)}})}if(G>0){se.select("line.nv-quotaLine").attr("x2",Y).attr("transform","translate(0,"+g(G)+")");ie.select("text.nv-quotaValue").attr("transform","translate("+(0-k.tickPadding())+","+g(G)+")");ve=Math.round(parseInt(te.select("text.nv-quotaValue").node().getBoundingClientRect().height,10)/1.15);ie.selectAll("g.tick, g.nv-axisMaxMin").each(function(e,t){if(Math.abs(g(e)-g(G))<=ve){d3.select(this).style("opacity",0)}});if($>0){if(Math.abs(g(G)-g($))<=ve){ie.select(".nv-targetQuotaValue").style("opacity",0)}}}se.selectAll("line.nv-quotaLineBackground").on("mouseover",function(e){if(c){var t={val:e.val,key:e.key,e:d3.event};D(t,_.parentNode)}}).on("mouseout",function(){v.tooltipHide()}).on("mousemove",function(){v.tooltipMove(d3.event)});L.dispatch.on("legendClick",function(e,t){var n=e.series;e.disabled=!e.disabled;if(!C.stacked()){h.filter(function(e){return e.series===n&&e.type==="line"}).map(function(e){e.disabled=!e.disabled;return e})}if(!h.filter(function(e){return!e.disabled&&e.type==="bar"}).length){h.map(function(e){e.disabled=false;te.selectAll(".nv-series").classed("disabled",false);return e})}p.call(C)});v.on("tooltipShow",function(e){if(c){E(e,_.parentNode,W)}});v.on("tooltipMove",function(t){if(u){e.tooltip.position(_.parentNode,u,t,"s")}});v.on("tooltipHide",function(){if(c){e.tooltip.cleanup()}});v.on("chartClick",function(){if(L.enabled()){L.dispatch.closeMenu()}if(T.enabled()){T.dispatch.closeMenu()}});M.dispatch.on("elementClick",function(e){v.chartClick();A(h,e,C,p)})});return C}w.dispatch.on("elementMouseover.tooltip",function(e){v.tooltipShow(e)});w.dispatch.on("elementMousemove",function(e){v.tooltipMove(e)});w.dispatch.on("elementMouseout.tooltip",function(){v.tooltipHide()});M.dispatch.on("elementMouseover.tooltip",function(e){v.tooltipShow(e)});M.dispatch.on("elementMousemove",function(e){v.tooltipMove(e)});M.dispatch.on("elementMouseout.tooltip",function(){v.tooltipHide()});C.dispatch=v;C.lines1=x;C.lines2=w;C.multibar=M;C.barLegend=L;C.lineLegend=T;C.xAxis=S;C.yAxis=k;d3.rebind(C,M,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","color","fill","classes","gradient");d3.rebind(C,M,"stacked","showValues","valueFormat","nice");d3.rebind(C,S,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks");C.colorData=function(t){var n=arguments[0],r=arguments[1]||{};var i=function(t,n){return e.utils.defaultColor()(t,t.series)};var a=function(e,t){return"nv-group nv-series-"+e.series};var s=function(e,t){var n=r.lineColor?r.lineColor:{c1:"#1A8221",c2:"#62B464",l:1};return e.color||d3.interpolateHsl(d3.rgb(n.c1),d3.rgb(n.c2))(e.series/2)};var o=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.barColor.c1),d3.rgb(r.barColor.c2))(e.series/r.barColor.l)};break;case"class":i=function(){return"inherit"};a=function(e,t){var n=e.series*(r.step||1)%14;n=(n>9?"":"0")+n;return"nv-group nv-series-"+e.series+" nv-fill"+n};o=function(e,t){var n=e.series*(r.step||1)%14;n=(n>9?"":"0")+n;return"nv-group nv-series-"+e.series+" nv-fill"+n+" nv-stroke"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)};a=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")};o=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")};break}var l=!r.gradient?i:function(e,t){var n={orientation:r.orientation||"vertical",position:r.position||"middle"};return M.gradient(e,e.series,n)};M.color(i);M.fill(l);M.classes(a);w.color(s);w.fill(s);w.classes(o);L.color(i);L.classes(a);T.color(s);T.classes(o);return C};C.x=function(e){if(!arguments.length){return i}i=e;lines.x(e);M.x(e);return C};C.y=function(e){if(!arguments.length){return a}a=e;lines.y(e);M.y(e);return C};C.margin=function(e){if(!arguments.length){return t}for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return C};C.width=function(e){if(!arguments.length){return n}n=e;return C};C.height=function(e){if(!arguments.length){return r}r=e;return C};C.showTitle=function(e){if(!arguments.length){return o}o=e;return C};C.showLegend=function(e){if(!arguments.length){return l}l=e;return C};C.showControls=function(e){if(!arguments.length){return false}return C};C.tooltipBar=function(e){if(!arguments.length){return d}d=e;return C};C.tooltipLine=function(e){if(!arguments.length){return h}h=e;return C};C.tooltipQuota=function(e){if(!arguments.length){return p}p=e;return C};C.tooltip=function(e){if(!arguments.length){return u}u=e;return C};C.tooltips=function(e){if(!arguments.length){return c}c=e;return C};C.tooltipContent=function(e){if(!arguments.length){return tooltipContent}tooltipContent=e;return C};C.barClick=function(e){if(!arguments.length){return A}A=e;return C};C.colorFill=function(e){return C};C.strings=function(e){if(!arguments.length){return _}for(var t in e){if(e.hasOwnProperty(t)){_[t]=e[t]}}return C};C.direction=function(e){if(!arguments.length){return f}f=e;M.direction(e);k.direction(e);L.direction(e);T.direction(e);return C};C.locality=function(t){if(!arguments.length){return s}s=e.utils.buildLocality(t);M.locality(t);x.locality(t);return C};return C};e.models.pie=function(){var t={top:0,right:0,bottom:0,left:0},n=500,r=500,i=Math.floor(Math.random()*1e4),a=function(e){return e},s=function(e){return e.key},o=function(e){return e.value},l=e.utils.buildLocality(),u=function(e){return e.description},c=function(e){return e.data?o(e.data):e},f=function(e){return e.data?s(e.data):e},d=true,h=true,p=true,m=true,g=.01,_=false,v=false,y=function(e,t){var n=e.selectAll(".nv-hole-container").data(t),r=n.enter().append("g").attr("class","nv-hole-container");r.append("text").text(t).attr("class","nv-pie-hole-value").attr("dy",".35em").attr("text-anchor","middle").style("font-size","50px");n.exit().remove()},b=false,M=20,x=5,w=360,S=0,k=function(t){return t.startAngle*w/360+e.utils.angleToRadians(S)},L=function(t){return t.endAngle*w/360+e.utils.angleToRadians(S)},T=.447,E=75,D=250,A=function(e){return null},Y=0,C="ltr",R=function(t,n){return e.utils.defaultColor()(t,t.series)},O=R,P=false,I=function(e,t){return"nv-slice nv-series-"+e.series},N=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function F(a){a.each(function(a){var l=n-t.left-t.right,u=r-t.top-t.bottom,w=d3.select(this);var S=d3.layout.pie().sort(null).value(function(e){return e.disabled?0:o(e)});var Y=[],H=d&&p?true:false;if(H){Y=e.utils.stringSetLengths(a.map(s),w,f,"nv-label")}var j=w.selectAll(".nv-wrap.nv-pie").data([a]);var U=j.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+i);var B=U.append("defs");var z=U.append("g");var W=j.select("g");F.gradient=function(t,n){var r={x:0,y:0,r:ce,s:_?T*100+"%":"0%",u:"userSpaceOnUse"};return e.utils.colorRadialGradient(t,i+"-"+n,r,R(t,n),j.select("defs"))};z.append("g").attr("class","nv-pie");var q=W.select(".nv-pie");z.append("g").attr("class","nv-holeWrap");var G=W.select(".nv-holeWrap");j.attr("transform","translate("+t.left+","+t.top+")");q.attr("transform","translate("+l/2+","+u/2+")");if(P){var V=e.utils.createTexture(B,i,-l/2,-u/2)}w.on("click",function(e,t){N.chartClick({data:e,index:t,pos:d3.event,id:i})});var $=j.select(".nv-pie").selectAll(".nv-slice").data(S);$.exit().remove();var J=$.enter().append("g").style("stroke","#ffffff").style("stroke-width",2).style("stroke-opacity",0).on("mouseover",function(e,t){d3.select(this).classed("hover",true);var n=he(d3.event,e,t);N.elementMouseover(n)}).on("mousemove",function(e,t){N.elementMousemove(d3.event)}).on("mouseout",function(e,t){d3.select(this).classed("hover",false);N.elementMouseout()}).on("click",function(e,t){d3.event.stopPropagation();var n=he(d3.event,e,t);N.elementClick(n)}).on("dblclick",function(e,t){d3.event.stopPropagation();var n=he(d3.event,e,t);N.elementDblClick(n)});J.append("path").attr("class","nv-base").each(function(e,t){this._current=e});if(P){J.append("path").attr("class","nv-texture").each(function(e,t){this._current=e}).style("mask","url("+V+")")}J.append("g").attr("transform","translate(0,0)").attr("class","nv-label");J.select(".nv-label").append("rect").style("fill-opacity",0).style("stroke-opacity",0);J.select(".nv-label").append("text").style("fill-opacity",0);J.append("polyline").attr("class","nv-label-leader").style("stroke-opacity",0);var X=l/2,Z=u/2,K=[],Q=[],ee=0,te=H?5:0,ne=0,re=M+x;$.select(".nv-base").call(pe,X,Z);G.call(y,v?[v]:[]);if(v){var ie=G.node().getBoundingClientRect().height*.3,ae=Math.abs(Z*d3.min(Q)),se=Math.round(ie-ae);if(se>0){te+=se;ee-=se/2}}var oe=l/2,le=u/2;if(H){M=Math.max(Math.min(Math.min(me())/12,20),10)}if(A(F)){E=A(F);D=A(F)}var ue=Math.min(Math.max(me(),E),D),ce=ue-(H?M:0);le+=((d3.max(Q)-d3.min(Q))/2+d3.min(Q))*((ue+ee)/le);oe+=((d3.max(K)-d3.min(K))/2-d3.max(K))*(ue/oe);le+=ee/2;q.attr("transform","translate("+oe+","+le+")");G.attr("transform","translate("+oe+","+le+")");q.select(V).attr("x",-ce/2).attr("y",-ce/2);var fe=d3.svg.arc().innerRadius(_?ce*T:0).outerRadius(ce).startAngle(k).endAngle(L);var de=d3.svg.arc().innerRadius(0).outerRadius(ce).startAngle(k).endAngle(L);if(p){if(!_||m){de.innerRadius(ue).outerRadius(ue)}else{de.outerRadius(ce*T)}}$.attr("class",function(e){return I(e.data,e.data.series)}).attr("fill",function(e){return O(e.data,e.data.series)}).classed("nv-active",function(e){return e.data.active==="active"}).classed("nv-inactive",function(e){return e.data.active==="inactive"});$.select(".nv-base").attr("d",fe).style("stroke-opacity",function(e){return k(e)===L(e)?0:1});if(P){$.select(".nv-texture").attr("d",fe).style("stroke-opacity",function(e){return k(e)===L(e)?0:1}).style("fill",function(t,n){var r=d3.select(this.parentNode).style("fill");return e.utils.getTextContrast(r,n)})}if(d){$.select(".nv-label").attr("transform",function(e){if(b){e.outerRadius=ce+10;e.innerRadius=ce+15;var t=(k(e)+L(e))/2*(180/Math.PI);t+=90*_e(e,de);return"translate("+de.centroid(e)+") rotate("+t+")"}else{var n=de.centroid(e),r=h?(M+x)*_e(e,de):0;return"translate("+[n[0]+r,n[1]]+")"}});$.select(".nv-label text").text(function(e){return f(e)}).attr("dy",".35em").style("fill","#555").style("fill-opacity",ge).style("text-anchor",function(e){if(!p){return"middle"}var t=_e(e,de)===1?"start":"end";if(C==="rtl"){t=t==="start"?"end":"start"}return t});$.each(function(t,n){if(Y[n]>E||ue===E){var r=(k(t)+L(t))/2,i=Math.abs(Math.sin(r)),a=ue*i+M+x+Y[n],s=l/2-oe+l/2-a;if(s<0){var o=e.utils.stringEllipsify(f(t),w,Y[n]+s);d3.select(this).select("text").text(o)}}});if(!p){$.select(".nv-label").each(function(e){if(!ge(e)){return}var t=d3.select(this),n=t.select("text").node().getBoundingClientRect();t.select("rect").attr("rx",3).attr("ry",3).attr("width",n.width+10).attr("height",n.height+10).attr("transform",function(){return"translate("+[n.x-5,n.y-5]+")"}).style("fill","#fff").style("fill-opacity",ge)})}else if(h){$.select(".nv-label-leader").attr("points",function(e){if(!ge(e)){return"0,0 0,0"}var t=d3.svg.arc().innerRadius(ce).outerRadius(ce).startAngle(k).endAngle(L);var n=h?M*_e(e,t):0,r=t.centroid(e),i=de.centroid(e),a=[i[0]+n,i[1]];return r+" "+i+" "+a}).style("stroke","#aaa").style("fill","none").style("stroke-opacity",ge)}}else{$.select(".nv-label-leader").style("stroke-opacity",0);$.select(".nv-label rect").style("fill-opacity",0);$.select(".nv-label text").style("fill-opacity",0)}function he(e,t,n){return{label:f(t),value:c(t),point:t.data,pointIndex:n,id:i,e:e}}function pe(e,t,n){var r=[],i=[],a=Math.PI,s=2*Math.PI,o=0,c=Math.PI/2,f=Math.PI,d=3*Math.PI/2,h=0;function p(e){return(e+h)%s}e.each(function(e,a){var l=(k(e)+s)%s,u=(L(e)+s)%s;var m=Math.round(Math.sin(l)*1e4)/1e4,g=Math.round(Math.sin(u)*1e4)/1e4,v=Math.round(Math.cos(l)*1e4)/1e4,y=Math.round(Math.cos(u)*1e4)/1e4;h=u<l?s-l:0;if(u===l){l=0;u=s}else{l=p(l);u=p(u)}o=p(o);c=p(c);f=p(f);d=p(d);if(l%s===0||u%s===0){i.push(n);if(_){i.push(n*T)}}if(l<=c&&u>=c){r.push(t);if(_){r.push(t*T)}}if(l<=f&&u>=f){i.push(-n);if(_){i.push(-n*T)}}if(l<=d&&u>=d){r.push(-t);if(_){r.push(-t*T)}}r.push(t*m);r.push(t*g);if(_){r.push(t*T*m);r.push(t*T*g)}else{r.push(0)}i.push(n*v);i.push(n*y);if(_){i.push(n*T*v);i.push(n*T*y)}else{i.push(0)}});K=d3.extent(r);Q=d3.extent(i);X*=l/(d3.max(K)-d3.min(K));Z*=u/(d3.max(Q)-d3.min(Q))}function me(){var e=[X],t=[Z+M];$.select(".nv-base").each(function(n,r){if(!ge(n)){return}var i=(k(n)+L(n))/2,a=d3.round(Math.sin(i),5),s=d3.round(Math.cos(i),5),o=X-re-Y[r],l=Z-te,u=a?o/a:o,c=s?l/s:l;e.push(u);t.push(c)});var n=d3.min(e.concat(t).concat([]),function(e){return Math.abs(e)});return n}function ge(e){var t=(L(e)-k(e))/(2*Math.PI);return t>g?1:0}function _e(e,t){var n=Math.PI*2,r=((k(e)+L(e))/2+n)%n;return r>0&&r<Math.PI?1:-1}function ve(e){if(!_){e.innerRadius=0}var t=d3.interpolate(this._current,e);this._current=t(0);return function(e){var n=t(e);return fe(n)}}function ye(e){e.innerRadius=0;var t=d3.interpolate({startAngle:0,endAngle:0},e);return function(e){return fe(t(e))}}});return F}F.dispatch=N;F.color=function(e){if(!arguments.length){return R}R=e;return F};F.fill=function(e){if(!arguments.length){return O}O=e;return F};F.classes=function(e){if(!arguments.length){return I}I=e;return F};F.gradient=function(e){if(!arguments.length){return gradient}gradient=e;return F};F.margin=function(e){if(!arguments.length){return t}t.top=typeof e.top!="undefined"?e.top:t.top;t.right=typeof e.right!="undefined"?e.right:t.right;t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom;t.left=typeof e.left!="undefined"?e.left:t.left;return F};F.width=function(e){if(!arguments.length){return n}n=e;return F};F.height=function(e){if(!arguments.length){return r}r=e;return F};F.values=function(e){if(!arguments.length){return a}a=e;return F};F.x=function(e){if(!arguments.length){return s}s=e;return F};F.y=function(e){if(!arguments.length){return o}o=d3.functor(e);return F};F.description=function(e){if(!arguments.length){return u}u=e;return F};F.showLabels=function(e){if(!arguments.length){return d}d=e;return F};F.labelSunbeamLayout=function(e){if(!arguments.length){return b}b=e;return F};F.donutLabelsOutside=function(e){if(!arguments.length){return m}m=e;return F};F.pieLabelsOutside=function(e){if(!arguments.length){return p}p=e;return F};F.showLeaders=function(e){if(!arguments.length){return h}h=e;return F};F.donut=function(e){if(!arguments.length){return _}_=e;return F};F.hole=function(e){if(!arguments.length){return v}v=e;return F};F.holeFormat=function(e){if(!arguments.length){return y}y=d3.functor(e);return F};F.donutRatio=function(e){if(!arguments.length){return T}T=e;return F};F.startAngle=function(e){if(!arguments.length){return k}k=e;return F};F.endAngle=function(e){if(!arguments.length){return L}L=e;return F};F.id=function(e){if(!arguments.length){return i}i=e;return F};F.valueFormat=function(e){if(!arguments.length){return c}c=e;return F};F.labelFormat=function(e){if(!arguments.length){return f}f=e;return F};F.labelThreshold=function(e){if(!arguments.length){return g}g=e;return F};F.direction=function(e){if(!arguments.length){return C}C=e;return F};F.arcDegrees=function(e){if(!arguments.length){return w}w=Math.max(Math.min(e,360),1);return F};F.rotateDegrees=function(e){if(!arguments.length){return S}S=e%360;return F};F.minRadius=function(e){if(!arguments.length){return E}E=e;return F};F.maxRadius=function(e){if(!arguments.length){return D}D=e;return F};F.fixedRadius=function(e){if(!arguments.length){return A}A=d3.functor(e);return F};F.textureFill=function(e){if(!arguments.length)return P;P=e;return F};F.locality=function(t){if(!arguments.length){return l}l=e.utils.buildLocality(t);return F};return F};e.models.pieChart=function(){var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=false,a=true,s="ltr",o=null,l=0,u=true,c=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},f={},d={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available.",noLabel:"undefined"},h=d3.dispatch("chartClick","elementClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState");var p=e.models.pie(),m=e.models.legend().align("center");var g=function(t,n,r){var i=t.point.key,a=r.total?(p.y()(t.point)*100/r.total).toFixed(1):100,s=p.y()(t.point),l=c(i,a,s,t,v);o=e.tooltip.show(t.e,l,null,null,n)};var _=function(e,t,n){return};function v(c){c.each(function(c){var d=c.properties||{},y=c.data,b=d3.select(this),M=this,x=(n||parseInt(b.style("width"),10)||960)-t.left-t.right,w=(r||parseInt(b.style("height"),10)||400)-t.top-t.bottom,S=d3.sum(y.map(function(e){return e.value})),k=x,L=w,T={top:0,right:0,bottom:0,left:0};v.update=function(){b.transition().duration(l).call(v)};v.dataSeriesActivate=function(e){var t=e.point;t.active=!t.active||t.active==="inactive"?"active":"inactive";if(t.active==="active"){y.filter(function(e){return e.active!=="active"}).map(function(e){e.active="inactive";return e})}if(!y.filter(function(e){return e.active==="active"}).length){y.map(function(e){e.active="";return e})}b.call(v)};v.container=this;if(!y||!y.length){B();return v}var E=y.map(function(e,t){e.series=t;if(!e.value&&!e.values){e.value=0;

e.disabled=true}else{e.value=e.value||d3.sum(e.values,function(e){return e.y||e});e.disabled=e.disabled||e.value===0}return e});var D=d3.sum(E.filter(function(e,t){return!e.disabled}).map(function(e,t){return e.value}));d.total=D;f.disabled=E.map(function(e){return!!e.disabled});if(!D){B();return v}else{b.selectAll(".nv-noData").remove()}var A=b.selectAll("g.nv-wrap.nv-pieChart").data([E]),Y=A.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),C=A.select("g").attr("class","nv-chartWrap");Y.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF");C.select(".nv-background").attr("width",x+t.left+t.right).attr("height",w+t.top+t.bottom);Y.append("g").attr("class","nv-titleWrap");var R=C.select(".nv-titleWrap");Y.append("g").attr("class","nv-pieWrap");var O=C.select(".nv-pieWrap");Y.append("g").attr("class","nv-legendWrap");var P=C.select(".nv-legendWrap");A.attr("transform","translate("+t.left+","+t.top+")");var I={width:0,height:0};R.select(".nv-title").remove();if(i&&d.title){R.append("text").attr("class","nv-title").attr("x",s==="rtl"?x:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(d.title).attr("stroke","none").attr("fill","black");I=e.utils.getTextBBox(C.select(".nv-title"));T.top+=I.height+12}if(a){m.id("legend_"+v.id()).strings(v.strings().legend).align("center").height(w-T.top);P.datum(E).call(m);m.arrange(x);var N=e.utils.getTextBBox(P.select(".nv-legend-link")),F=x-I.width-6,H=i&&m.collapsed()&&F>N.width?true:false,j=s==="rtl"||!m.collapsed()?0:x-m.width(),U=I.height;if(H){U=I.height-m.height()/2-N.height/2}else if(!i){U=-m.margin().top}P.attr("transform","translate("+j+","+U+")");T.top+=H?0:m.height()-12}L=w-T.top-T.bottom;k=x-T.left-T.right;p.width(k).height(L);O.datum(E.filter(function(e){return!e.disabled})).attr("transform","translate("+T.left+","+T.top+")").transition().duration(l).call(p);function B(){b.select(".nvd3.nv-wrap").remove();var e=b.selectAll(".nv-noData").data([v.strings().noData]);e.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");e.attr("x",t.left+x/2).attr("y",t.top+w/2).text(function(e){return e})}m.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled;e.active=false;if(!y.filter(function(e){return!e.disabled}).length){y.map(function(e){e.disabled=false;return e})}if(!y.filter(function(e){return e.active==="active"}).length){y.map(function(e){e.active="";return e})}f.disabled=y.map(function(e){return!!e.disabled});h.stateChange(f);b.transition().duration(l).call(v)});h.on("tooltipShow",function(e){if(u){g(e,M.parentNode,d)}});h.on("tooltipMove",function(t){if(o){e.tooltip.position(M.parentNode,o,t)}});h.on("tooltipHide",function(){if(u){e.tooltip.cleanup()}});h.on("changeState",function(e){if(typeof e.disabled!=="undefined"){E.forEach(function(t,n){t.disabled=e.disabled[n]});f.disabled=e.disabled}b.transition().duration(l).call(v)});h.on("chartClick",function(){if(m.enabled()){m.dispatch.closeMenu()}});p.dispatch.on("elementClick",function(e){h.chartClick();_(y,e,v)})});return v}p.dispatch.on("elementMouseover.tooltip",function(e){h.tooltipShow(e)});p.dispatch.on("elementMousemove.tooltip",function(e){h.tooltipMove(e)});p.dispatch.on("elementMouseout.tooltip",function(){h.tooltipHide()});v.dispatch=h;v.pie=p;v.legend=m;d3.rebind(v,p,"id","x","y","color","fill","classes","gradient","locality");d3.rebind(v,p,"valueFormat","labelFormat","values","description","showLabels","showLeaders","donutLabelsOutside","pieLabelsOutside","labelThreshold");d3.rebind(v,p,"arcDegrees","rotateDegrees","minRadius","maxRadius","fixedRadius","startAngle","endAngle","donut","hole","holeFormat","donutRatio");v.colorData=function(t){var n=arguments[0],r=arguments[1]||{};var i=function(t,n){return e.utils.defaultColor()(t,t.series)};var a=function(e,t){return"nv-slice nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"};a=function(e,t){var n=e.series*(r.step||1)%14;n=(n>9?"":"0")+n;return"nv-slice nv-series-"+e.series+" nv-fill"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)};a=function(e,t){return"nv-slice nv-series-"+e.series+(e.classes?" "+e.classes:"")};break}var s=!r.gradient?i:function(e,t){return p.gradient(e,e.series)};p.color(i);p.fill(s);p.classes(a);m.color(i);m.classes(a);return v};v.margin=function(e){if(!arguments.length){return t}for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return v};v.width=function(e){if(!arguments.length){return n}n=e;return v};v.height=function(e){if(!arguments.length){return r}r=e;return v};v.showTitle=function(e){if(!arguments.length){return i}i=e;return v};v.showLegend=function(e){if(!arguments.length){return a}a=e;return v};v.tooltip=function(e){if(!arguments.length){return o}o=e;return v};v.tooltips=function(e){if(!arguments.length){return u}u=e;return v};v.tooltipContent=function(e){if(!arguments.length){return c}c=e;return v};v.state=function(e){if(!arguments.length){return f}f=e;return v};v.colorFill=function(e){return v};v.strings=function(e){if(!arguments.length){return d}for(var t in e){if(e.hasOwnProperty(t)){d[t]=e[t]}}return v};v.seriesClick=function(e){if(!arguments.length){return _}_=e;return v};v.direction=function(e){if(!arguments.length){return s}s=e;p.direction(e);m.direction(e);return v};return v}})()},function(e,t){(function(){(function(e){var t=Date.now||function(){return+new Date};var n=60;var r=1e3;var i={};var a=1;if(!e.core){e.core={effect:{}}}else if(!core.effect){core.effect={}}core.effect.Animate={requestAnimationFrame:function(){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame;var n=!!t;if(t&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(t.toString())){n=false}if(n){return function(e,n){t(e,n)}}var r=60;var i={};var a=0;var s=1;var o=null;var l=+new Date;return function(e,t){var n=s++;i[n]=e;a++;if(o===null){o=setInterval(function(){var e=+new Date;var t=i;i={};a=0;for(var n in t){if(t.hasOwnProperty(n)){t[n](e);l=e}}if(e-l>2500){clearInterval(o);o=null}},1e3/r)}return n}}(),stop:function(e){var t=i[e]!=null;if(t){i[e]=null}return t},isRunning:function(e){return i[e]!=null},start:function(e,s,o,l,u,c){var f=t();var d=f;var h=0;var p=0;var m=a++;if(!c){c=document.body}if(m%20===0){var g={};for(var _ in i){g[_]=true}i=g}var v=function(a){var g=a!==true;var _=t();if(!i[m]||s&&!s(m)){i[m]=null;o&&o(n-p/((_-f)/r),m,false);return}if(g){var y=Math.round((_-d)/(r/n))-1;for(var b=0;b<Math.min(y,4);b++){v(true);p++}}if(l){h=(_-f)/l;if(h>1){h=1}}var M=u?u(h):h;if((e(M,_,g)===false||h===1)&&g){i[m]=null;o&&o(n-p/((_-f)/r),m,h===1||l==null)}else if(g){d=_;core.effect.Animate.requestAnimationFrame(v,c)}};i[m]=true;core.effect.Animate.requestAnimationFrame(v,c);return m}}})(this)}).call(window)},function(e,t){(function(e){var t=function(e){var t=this;var n=t.options=_.extend({},t.defaults,e);var r=n.template||function(){return""};var i=n.templateTarget;n.template=void 0;t.$target=this;var a=n.height;i.find(".pull-to-refresh").length||i.append(r(n));t.$holder=i.find(".pull-to-refresh");t.$msg=t.$holder.find(".message-container");t.$msg.css({height:a});t.$spinner=t.$holder.find(".spinner");t.$spinner_wrapper=t.$holder.find(".icon-wrap");n.scroller.activatePullToRefresh(a,function(){t.$spinner_wrapper.addClass("color")},function(){t.$spinner_wrapper.removeClass("color")},function(){t.$spinner.addClass("rotate360");if(!t.isLoading){t.isLoading=true;if(n.callback){n.callback()}}})};t.prototype={defaults:{height:50,animationDelay:300,callback:function(){}},hide:function(){var e=this;e.isLoading=false;if(!e.options)return;e.options.scroller.finishPullToRefresh();e.$spinner.removeClass("rotate360");e.$spinner_wrapper.removeClass("color")},destroy:function(){var e=this;if(!e.options){return}e.options.scroller.finishPullToRefresh();e.$holder.remove();e.options.callback=null;e.options=null;e.$div=null;e.$holder=null;e.$msg=null;e.$spinner=null;e.$spinner_wrapper=null;e.$target=null;e.isLoading=false}};e.fn.pullToRefresh=function(e){if(typeof e==="object"||!e){this._ptr=new t(e)}else if(this._ptr&&this._ptr[e]){this._ptr[e].apply(this._ptr,Array.prototype.slice.call(arguments,1));if(e==="destroy"){this._ptr=null}}}})(Zepto)},function(e,t){(function(e){e.__swipeHelper={init:function(){var t={},n=5;e.__swipeHelper.swipeOrientation="";var r=function(e,t,n,r){var i=Math.abs(e-t),a=Math.abs(n-r);return i>=a?"horizontal":"vertical"};e(document.body).on("touchstart",function(e){t.x1=e.touches[0].pageX;t.y1=e.touches[0].pageY}).on("touchmove",function(i){t.x2=i.touches[0].pageX;t.y2=i.touches[0].pageY;if(e.__swipeHelper.swipeOrientation===""&&(t.x2&&Math.abs(t.x1-t.x2)>n||t.y2&&Math.abs(t.y1-t.y2)>n)){e.__swipeHelper.swipeOrientation=r(t.x1,t.x2,t.y1,t.y2)}if(e.__swipeHelper.swipeOrientation==="horizontal"){i.preventDefault()}}).on("touchend",function(n){e.__swipeHelper.swipeOrientation="";t={}})}}})(Zepto)},function(e,t,n){(function(){"use strict";var e=function(n,r){if(!(this instanceof e))return new e(n,r);var i={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:false,autoplayDisableOnInteraction:true,freeMode:false,freeModeMomentum:true,freeModeMomentumRatio:1,freeModeMomentumBounce:true,freeModeMomentumBounceRatio:1,freeModeSticky:false,setWrapperSize:false,virtualTranslate:false,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:true},cube:{slideShadows:true,shadow:true,shadowOffset:20,shadowScale:.94},fade:{crossFade:false},parallax:false,scrollbar:null,scrollbarHide:true,keyboardControl:false,mousewheelControl:false,mousewheelForceToAxis:false,hashnav:false,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:false,touchRatio:1,touchAngle:45,simulateTouch:true,shortSwipes:true,longSwipes:true,longSwipesRatio:.5,longSwipesMs:300,followFinger:true,onlyExternal:false,threshold:0,touchMoveStopPropagation:true,pagination:null,paginationClickable:false,paginationHide:false,paginationBulletRender:null,resistance:true,resistanceRatio:.85,nextButton:null,prevButton:null,watchSlidesProgress:false,watchSlidesVisibility:false,grabCursor:false,preventClicks:true,preventClicksPropagation:true,slideToClickedSlide:false,lazyLoading:false,lazyLoadingInPrevNext:false,lazyLoadingOnTransitionStart:false,preloadImages:true,updateOnImagesReady:true,loop:false,loopAdditionalSlides:0,loopedSlides:null,control:undefined,controlInverse:false,allowSwipeToPrev:true,allowSwipeToNext:true,swipeHandler:null,noSwiping:true,noSwipingClass:"swiper-no-swiping",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationHiddenClass:"swiper-pagination-hidden",observer:false,observeParents:false,a11y:false,prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",runCallbacksOnInit:true};var a=r&&r.virtualTranslate;r=r||{};for(var s in i){if(typeof r[s]==="undefined"){r[s]=i[s]}else if(typeof r[s]==="object"){for(var o in i[s]){if(typeof r[s][o]==="undefined"){r[s][o]=i[s][o]}}}}var l=this;l.version="3.0.7";l.params=r;l.classNames=[];var u;if(typeof t==="undefined"){u=window.Dom7||window.Zepto||window.jQuery}else{u=t}if(!u)return;l.$=u;l.container=u(n);if(l.container.length===0)return;if(l.container.length>1){l.container.each(function(){new e(this,r)});return}l.container[0].swiper=l;l.container.data("swiper",l);l.classNames.push("swiper-container-"+l.params.direction);if(l.params.freeMode){l.classNames.push("swiper-container-free-mode")}if(!l.support.flexbox){l.classNames.push("swiper-container-no-flexbox");l.params.slidesPerColumn=1}if(l.params.parallax||l.params.watchSlidesVisibility){l.params.watchSlidesProgress=true}if(["cube","coverflow"].indexOf(l.params.effect)>=0){if(l.support.transforms3d){l.params.watchSlidesProgress=true;l.classNames.push("swiper-container-3d")}else{l.params.effect="slide"}}if(l.params.effect!=="slide"){l.classNames.push("swiper-container-"+l.params.effect)}if(l.params.effect==="cube"){l.params.resistanceRatio=0;l.params.slidesPerView=1;l.params.slidesPerColumn=1;l.params.slidesPerGroup=1;l.params.centeredSlides=false;l.params.spaceBetween=0;l.params.virtualTranslate=true;l.params.setWrapperSize=false}if(l.params.effect==="fade"){l.params.slidesPerView=1;l.params.slidesPerColumn=1;l.params.slidesPerGroup=1;l.params.watchSlidesProgress=true;l.params.spaceBetween=0;if(typeof a==="undefined"){l.params.virtualTranslate=true}}if(l.params.grabCursor&&l.support.touch){l.params.grabCursor=false}l.wrapper=l.container.children("."+l.params.wrapperClass);if(l.params.pagination){l.paginationContainer=u(l.params.pagination);if(l.params.paginationClickable){l.paginationContainer.addClass("swiper-pagination-clickable")}}function c(){return l.params.direction==="horizontal"}l.rtl=c()&&(l.container[0].dir.toLowerCase()==="rtl"||l.container.css("direction")==="rtl");if(l.rtl){l.classNames.push("swiper-container-rtl")}if(l.rtl){l.wrongRTL=l.wrapper.css("display")==="-webkit-box"}if(l.params.slidesPerColumn>1){l.classNames.push("swiper-container-multirow")}if(l.device.android){l.classNames.push("swiper-container-android")}l.container.addClass(l.classNames.join(" "));l.translate=0;l.progress=0;l.velocity=0;l.lockSwipeToNext=function(){l.params.allowSwipeToNext=false};l.lockSwipeToPrev=function(){l.params.allowSwipeToPrev=false};l.lockSwipes=function(){l.params.allowSwipeToNext=l.params.allowSwipeToPrev=false};l.unlockSwipeToNext=function(){l.params.allowSwipeToNext=true};l.unlockSwipeToPrev=function(){l.params.allowSwipeToPrev=true};l.unlockSwipes=function(){l.params.allowSwipeToNext=l.params.allowSwipeToPrev=true};if(l.params.grabCursor){l.container[0].style.cursor="move";l.container[0].style.cursor="-webkit-grab";l.container[0].style.cursor="-moz-grab";l.container[0].style.cursor="grab"}l.imagesToLoad=[];l.imagesLoaded=0;l.loadImage=function(e,t,n,r){var i;function a(){if(r)r()}if(!e.complete||!n){if(t){i=new window.Image;i.onload=a;i.onerror=a;i.src=t}else{a()}}else{a()}};l.preloadImages=function(){l.imagesToLoad=l.container.find("img");function e(){if(typeof l==="undefined"||l===null)return;if(l.imagesLoaded!==undefined)l.imagesLoaded++;if(l.imagesLoaded===l.imagesToLoad.length){if(l.params.updateOnImagesReady)l.update();l.emit("onImagesReady",l)}}for(var t=0;t<l.imagesToLoad.length;t++){l.loadImage(l.imagesToLoad[t],l.imagesToLoad[t].currentSrc||l.imagesToLoad[t].getAttribute("src"),true,e)}};l.autoplayTimeoutId=undefined;l.autoplaying=false;l.autoplayPaused=false;function f(){l.autoplayTimeoutId=setTimeout(function(){if(l.params.loop){l.fixLoop();l._slideNext()}else{if(!l.isEnd){l._slideNext()}else{if(!r.autoplayStopOnLast){l._slideTo(0)}else{l.stopAutoplay()}}}},l.params.autoplay)}l.startAutoplay=function(){if(typeof l.autoplayTimeoutId!=="undefined")return false;if(!l.params.autoplay)return false;if(l.autoplaying)return false;l.autoplaying=true;l.emit("onAutoplayStart",l);f()};l.stopAutoplay=function(e){if(!l.autoplayTimeoutId)return;if(l.autoplayTimeoutId)clearTimeout(l.autoplayTimeoutId);l.autoplaying=false;l.autoplayTimeoutId=undefined;l.emit("onAutoplayStop",l)};l.pauseAutoplay=function(e){if(l.autoplayPaused)return;if(l.autoplayTimeoutId)clearTimeout(l.autoplayTimeoutId);l.autoplayPaused=true;if(e===0){l.autoplayPaused=false;f()}else{l.wrapper.transitionEnd(function(){if(!l)return;l.autoplayPaused=false;if(!l.autoplaying){l.stopAutoplay()}else{f()}})}};l.minTranslate=function(){return-l.snapGrid[0]};l.maxTranslate=function(){return-l.snapGrid[l.snapGrid.length-1]};l.updateContainerSize=function(){var e,t;if(typeof l.params.width!=="undefined"){e=l.params.width}else{e=l.container[0].clientWidth}if(typeof l.params.height!=="undefined"){t=l.params.height}else{t=l.container[0].clientHeight}if(e===0&&c()||t===0&&!c()){return}l.width=e;l.height=t;l.size=c()?l.width:l.height};l.updateSlidesSize=function(){l.slides=l.wrapper.children("."+l.params.slideClass);l.snapGrid=[];l.slidesGrid=[];l.slidesSizesGrid=[];var e=l.params.spaceBetween,t=0,n,r=0,i=0;if(typeof e==="string"&&e.indexOf("%")>=0){e=parseFloat(e.replace("%",""))/100*l.size}l.virtualSize=-e;if(l.rtl)l.slides.css({marginLeft:"",marginTop:""});else l.slides.css({marginRight:"",marginBottom:""});var a;if(l.params.slidesPerColumn>1){if(Math.floor(l.slides.length/l.params.slidesPerColumn)===l.slides.length/l.params.slidesPerColumn){a=l.slides.length}else{a=Math.ceil(l.slides.length/l.params.slidesPerColumn)*l.params.slidesPerColumn}}var s;for(n=0;n<l.slides.length;n++){s=0;var o=l.slides.eq(n);if(l.params.slidesPerColumn>1){var u;var f,d;var h=l.params.slidesPerColumn;var p;if(l.params.slidesPerColumnFill==="column"){f=Math.floor(n/h);d=n-f*h;u=f+d*a/h;o.css({"-webkit-box-ordinal-group":u,"-moz-box-ordinal-group":u,"-ms-flex-order":u,"-webkit-order":u,order:u})}else{p=a/h;d=Math.floor(n/p);f=n-d*p}o.css({"margin-top":d!==0&&l.params.spaceBetween&&l.params.spaceBetween+"px"}).attr("data-swiper-column",f).attr("data-swiper-row",d)}if(o.css("display")==="none")continue;if(l.params.slidesPerView==="auto"){s=c()?o.outerWidth(true):o.outerHeight(true)}else{s=(l.size-(l.params.slidesPerView-1)*e)/l.params.slidesPerView;if(c()){l.slides[n].style.width=s+"px"}else{l.slides[n].style.height=s+"px"}}l.slides[n].swiperSlideSize=s;l.slidesSizesGrid.push(s);if(l.params.centeredSlides){t=t+s/2+r/2+e;if(n===0)t=t-l.size/2-e;if(Math.abs(t)<1/1e3)t=0;if(i%l.params.slidesPerGroup===0)l.snapGrid.push(t);l.slidesGrid.push(t)}else{if(i%l.params.slidesPerGroup===0)l.snapGrid.push(t);l.slidesGrid.push(t);t=t+s+e}l.virtualSize+=s+e;r=s;i++}l.virtualSize=Math.max(l.virtualSize,l.size);var m;if(l.rtl&&l.wrongRTL&&(l.params.effect==="slide"||l.params.effect==="coverflow")){l.wrapper.css({width:l.virtualSize+l.params.spaceBetween+"px"})}if(!l.support.flexbox||l.params.setWrapperSize){if(c())l.wrapper.css({width:l.virtualSize+l.params.spaceBetween+"px"});else l.wrapper.css({height:l.virtualSize+l.params.spaceBetween+"px"})}if(l.params.slidesPerColumn>1){l.virtualSize=(s+l.params.spaceBetween)*a;l.virtualSize=Math.ceil(l.virtualSize/l.params.slidesPerColumn)-l.params.spaceBetween;l.wrapper.css({width:l.virtualSize+l.params.spaceBetween+"px"});if(l.params.centeredSlides){m=[];for(n=0;n<l.snapGrid.length;n++){if(l.snapGrid[n]<l.virtualSize+l.snapGrid[0])m.push(l.snapGrid[n])}l.snapGrid=m}}if(!l.params.centeredSlides){m=[];for(n=0;n<l.snapGrid.length;n++){if(l.snapGrid[n]<=l.virtualSize-l.size){m.push(l.snapGrid[n])}}l.snapGrid=m;if(Math.floor(l.virtualSize-l.size)>Math.floor(l.snapGrid[l.snapGrid.length-1])){l.snapGrid.push(l.virtualSize-l.size)}}if(l.snapGrid.length===0)l.snapGrid=[0];if(l.params.spaceBetween!==0){if(c()){if(l.rtl)l.slides.css({marginLeft:e+"px"});else l.slides.css({marginRight:e+"px"})}else l.slides.css({marginBottom:e+"px"})}if(l.params.watchSlidesProgress){l.updateSlidesOffset()}};l.updateSlidesOffset=function(){for(var e=0;e<l.slides.length;e++){l.slides[e].swiperSlideOffset=c()?l.slides[e].offsetLeft:l.slides[e].offsetTop}};l.updateSlidesProgress=function(e){if(typeof e==="undefined"){e=l.translate||0}if(l.slides.length===0)return;if(typeof l.slides[0].swiperSlideOffset==="undefined")l.updateSlidesOffset();var t=l.params.centeredSlides?-e+l.size/2:-e;if(l.rtl)t=l.params.centeredSlides?e-l.size/2:e;var n=l.container[0].getBoundingClientRect();var r=c()?"left":"top";var i=c()?"right":"bottom";l.slides.removeClass(l.params.slideVisibleClass);for(var a=0;a<l.slides.length;a++){var s=l.slides[a];var o=l.params.centeredSlides===true?s.swiperSlideSize/2:0;var u=(t-s.swiperSlideOffset-o)/(s.swiperSlideSize+l.params.spaceBetween);if(l.params.watchSlidesVisibility){var f=-(t-s.swiperSlideOffset-o);var d=f+l.slidesSizesGrid[a];var h=f>=0&&f<l.size||d>0&&d<=l.size||f<=0&&d>=l.size;if(h){l.slides.eq(a).addClass(l.params.slideVisibleClass)}}s.progress=l.rtl?-u:u}};l.updateProgress=function(e){if(typeof e==="undefined"){e=l.translate||0}var t=l.maxTranslate()-l.minTranslate();if(t===0){l.progress=0;l.isBeginning=l.isEnd=true}else{l.progress=(e-l.minTranslate())/t;l.isBeginning=l.progress<=0;l.isEnd=l.progress>=1}if(l.isBeginning)l.emit("onReachBeginning",l);if(l.isEnd)l.emit("onReachEnd",l);if(l.params.watchSlidesProgress)l.updateSlidesProgress(e);l.emit("onProgress",l,l.progress)};l.updateActiveIndex=function(){var e=l.rtl?l.translate:-l.translate;var t,n,r;for(n=0;n<l.slidesGrid.length;n++){if(typeof l.slidesGrid[n+1]!=="undefined"){if(e>=l.slidesGrid[n]&&e<l.slidesGrid[n+1]-(l.slidesGrid[n+1]-l.slidesGrid[n])/2){t=n}else if(e>=l.slidesGrid[n]&&e<l.slidesGrid[n+1]){t=n+1}}else{if(e>=l.slidesGrid[n]){t=n}}}if(t<0||typeof t==="undefined")t=0;r=Math.floor(t/l.params.slidesPerGroup);if(r>=l.snapGrid.length)r=l.snapGrid.length-1;if(t===l.activeIndex){return}l.snapIndex=r;l.previousIndex=l.activeIndex;l.activeIndex=t;l.updateClasses()};l.updateClasses=function(){l.slides.removeClass(l.params.slideActiveClass+" "+l.params.slideNextClass+" "+l.params.slidePrevClass);var e=l.slides.eq(l.activeIndex);e.addClass(l.params.slideActiveClass);e.next("."+l.params.slideClass).addClass(l.params.slideNextClass);e.prev("."+l.params.slideClass).addClass(l.params.slidePrevClass);if(l.bullets&&l.bullets.length>0){l.bullets.removeClass(l.params.bulletActiveClass);var t;if(l.params.loop){t=Math.ceil(l.activeIndex-l.loopedSlides)/l.params.slidesPerGroup;if(t>l.slides.length-1-l.loopedSlides*2){t=t-(l.slides.length-l.loopedSlides*2)}if(t>l.bullets.length-1)t=t-l.bullets.length}else{if(typeof l.snapIndex!=="undefined"){t=l.snapIndex}else{t=l.activeIndex||0}}if(l.paginationContainer.length>1){l.bullets.each(function(){if(u(this).index()===t)u(this).addClass(l.params.bulletActiveClass)})}else{l.bullets.eq(t).addClass(l.params.bulletActiveClass)}}if(!l.params.loop){if(l.params.prevButton){if(l.isBeginning){u(l.params.prevButton).addClass(l.params.buttonDisabledClass);if(l.params.a11y&&l.a11y)l.a11y.disable(u(l.params.prevButton))}else{u(l.params.prevButton).removeClass(l.params.buttonDisabledClass);if(l.params.a11y&&l.a11y)l.a11y.enable(u(l.params.prevButton))}}if(l.params.nextButton){if(l.isEnd){u(l.params.nextButton).addClass(l.params.buttonDisabledClass);if(l.params.a11y&&l.a11y)l.a11y.disable(u(l.params.nextButton))}else{u(l.params.nextButton).removeClass(l.params.buttonDisabledClass);if(l.params.a11y&&l.a11y)l.a11y.enable(u(l.params.nextButton))}}}};l.updatePagination=function(){if(!l.params.pagination)return;if(l.paginationContainer&&l.paginationContainer.length>0){var e="";var t=l.params.loop?Math.ceil((l.slides.length-l.loopedSlides*2)/l.params.slidesPerGroup):l.snapGrid.length;for(var n=0;n<t;n++){if(l.params.paginationBulletRender){e+=l.params.paginationBulletRender(n,l.params.bulletClass)}else{e+='<span class="'+l.params.bulletClass+'"></span>'}}l.paginationContainer.html(e);l.bullets=l.paginationContainer.find("."+l.params.bulletClass.split(" ").join("."))}};l.update=function(e){l.updateContainerSize();l.updateSlidesSize();l.updateProgress();l.updatePagination();l.updateClasses();if(l.params.scrollbar&&l.scrollbar){l.scrollbar.set()}function t(){r=Math.min(Math.max(l.translate,l.maxTranslate()),l.minTranslate());l.setWrapperTranslate(r);l.updateActiveIndex();l.updateClasses()}if(e){var n,r;if(l.params.freeMode){t()}else{if(l.params.slidesPerView==="auto"&&l.isEnd&&!l.params.centeredSlides){n=l.slideTo(l.slides.length-1,0,false,true)}else{n=l.slideTo(l.activeIndex,0,false,true)}if(!n){t()}}}};l.onResize=function(e){l.updateContainerSize();l.updateSlidesSize();l.updateProgress();if(l.params.slidesPerView==="auto"||l.params.freeMode||e)l.updatePagination();if(l.params.scrollbar&&l.scrollbar){l.scrollbar.set()}if(l.params.freeMode){var t=Math.min(Math.max(l.translate,l.maxTranslate()),l.minTranslate());l.setWrapperTranslate(t);l.updateActiveIndex();l.updateClasses()}else{l.updateClasses();if(l.params.slidesPerView==="auto"&&l.isEnd&&!l.params.centeredSlides){l.slideTo(l.slides.length-1,0,false,true)}else{l.slideTo(l.activeIndex,0,false,true)}}};var d=["mousedown","mousemove","mouseup"];if(window.navigator.pointerEnabled)d=["pointerdown","pointermove","pointerup"];else if(window.navigator.msPointerEnabled)d=["MSPointerDown","MSPointerMove","MSPointerUp"];l.touchEvents={start:l.support.touch||!l.params.simulateTouch?"touchstart":d[0],move:l.support.touch||!l.params.simulateTouch?"touchmove":d[1],end:l.support.touch||!l.params.simulateTouch?"touchend":d[2]};if(window.navigator.pointerEnabled||window.navigator.msPointerEnabled){(l.params.touchEventsTarget==="container"?l.container:l.wrapper).addClass("swiper-wp8-"+l.params.direction)}l.initEvents=function(e){var t=e?"off":"on";var n=e?"removeEventListener":"addEventListener";var i=l.params.touchEventsTarget==="container"?l.container[0]:l.wrapper[0];var a=l.support.touch?i:document;var s=l.params.nested?true:false;if(l.browser.ie){i[n](l.touchEvents.start,l.onTouchStart,false);a[n](l.touchEvents.move,l.onTouchMove,s);a[n](l.touchEvents.end,l.onTouchEnd,false)}else{if(l.support.touch){i[n](l.touchEvents.start,l.onTouchStart,false);i[n](l.touchEvents.move,l.onTouchMove,s);i[n](l.touchEvents.end,l.onTouchEnd,false)}if(r.simulateTouch&&!l.device.ios&&!l.device.android){i[n]("mousedown",l.onTouchStart,false);document[n]("mousemove",l.onTouchMove,s);document[n]("mouseup",l.onTouchEnd,false)}}window[n]("resize",l.onResize);if(l.params.nextButton){u(l.params.nextButton)[t]("click",l.onClickNext);if(l.params.a11y&&l.a11y)u(l.params.nextButton)[t]("keydown",l.a11y.onEnterKey)}if(l.params.prevButton){u(l.params.prevButton)[t]("click",l.onClickPrev);if(l.params.a11y&&l.a11y)u(l.params.prevButton)[t]("keydown",l.a11y.onEnterKey)}if(l.params.pagination&&l.params.paginationClickable){u(l.paginationContainer)[t]("click","."+l.params.bulletClass,l.onClickIndex)}if(l.params.preventClicks||l.params.preventClicksPropagation)i[n]("click",l.preventClicks,true)};l.attachEvents=function(e){l.initEvents()};l.detachEvents=function(){l.initEvents(true)};l.allowClick=true;l.preventClicks=function(e){if(!l.allowClick){if(l.params.preventClicks)e.preventDefault();if(l.params.preventClicksPropagation){e.stopPropagation();e.stopImmediatePropagation()}}};l.onClickNext=function(e){e.preventDefault();l.params.onClickNext?l.params.onClickNext():l.slideNext()};l.onClickPrev=function(e){e.preventDefault();l.params.onClickPrev?l.params.onClickPrev():l.slidePrev()};l.onClickIndex=function(e){e.preventDefault();var t=u(this).index()*l.params.slidesPerGroup;if(l.params.loop)t=t+l.loopedSlides;l.slideTo(t)};function h(e,t){var n=u(e.target);if(!n.is(t)){if(typeof t==="string"){n=n.parents(t)}else if(t.nodeType){var r;n.parents().each(function(e,n){if(n===t)r=t});if(!r)return undefined;else return t}}if(n.length===0){return undefined}return n[0]}l.updateClickedSlide=function(e){var t=h(e,"."+l.params.slideClass);var n=false;if(t){for(var r=0;r<l.slides.length;r++){if(l.slides[r]===t)n=true}}if(t&&n){l.clickedSlide=t;l.clickedIndex=u(t).index()}else{l.clickedSlide=undefined;l.clickedIndex=undefined;return}if(l.params.slideToClickedSlide&&l.clickedIndex!==undefined&&l.clickedIndex!==l.activeIndex){var i=l.clickedIndex,a;if(l.params.loop){a=u(l.clickedSlide).attr("data-swiper-slide-index");if(i>l.slides.length-l.params.slidesPerView){l.fixLoop();i=l.wrapper.children("."+l.params.slideClass+'[data-swiper-slide-index="'+a+'"]').eq(0).index();setTimeout(function(){l.slideTo(i)},0)}else if(i<l.params.slidesPerView-1){l.fixLoop();var s=l.wrapper.children("."+l.params.slideClass+'[data-swiper-slide-index="'+a+'"]');i=s.eq(s.length-1).index();setTimeout(function(){l.slideTo(i)},0)}else{l.slideTo(i)}}else{l.slideTo(i)}}};var p,m,g,_,v,y,b,M="input, select, textarea, button",x=Date.now(),w,S=[],k;l.animating=false;l.touches={startX:0,startY:0,currentX:0,currentY:0,diff:0};var L,T;l.onTouchStart=function(e){if(e.originalEvent)e=e.originalEvent;L=e.type==="touchstart";if(!L&&"which"in e&&e.which===3)return;if(l.params.noSwiping&&h(e,"."+l.params.noSwipingClass)){l.allowClick=true;return}if(l.params.swipeHandler){if(!h(e,l.params.swipeHandler))return}p=true;m=false;_=undefined;T=undefined;l.touches.startX=l.touches.currentX=e.type==="touchstart"?e.targetTouches[0].pageX:e.pageX;l.touches.startY=l.touches.currentY=e.type==="touchstart"?e.targetTouches[0].pageY:e.pageY;g=Date.now();l.allowClick=true;l.updateContainerSize();l.swipeDirection=undefined;if(l.params.threshold>0)b=false;if(e.type!=="touchstart"){var t=true;if(u(e.target).is(M))t=false;if(document.activeElement&&u(document.activeElement).is(M)){document.activeElement.blur()}if(t){e.preventDefault()}}l.emit("onTouchStart",l,e)};l.onTouchMove=function(e){if(e.originalEvent)e=e.originalEvent;if(L&&e.type==="mousemove")return;if(e.preventedByNestedSwiper)return;if(l.params.onlyExternal){m=true;l.allowClick=false;return}if(L&&document.activeElement){if(e.target===document.activeElement&&u(e.target).is(M)){m=true;l.allowClick=false;return}}l.emit("onTouchMove",l,e);if(e.targetTouches&&e.targetTouches.length>1)return;l.touches.currentX=e.type==="touchmove"?e.targetTouches[0].pageX:e.pageX;l.touches.currentY=e.type==="touchmove"?e.targetTouches[0].pageY:e.pageY;if(typeof _==="undefined"){var t=Math.atan2(Math.abs(l.touches.currentY-l.touches.startY),Math.abs(l.touches.currentX-l.touches.startX))*180/Math.PI;_=c()?t>l.params.touchAngle:90-t>l.params.touchAngle}if(_){l.emit("onTouchMoveOpposite",l,e)}if(typeof T==="undefined"&&l.browser.ieTouch){if(l.touches.currentX!==l.touches.startX||l.touches.currentY!==l.touches.startY){T=true}}if(!p)return;if(_){p=false;return}if(!T&&l.browser.ieTouch){return}l.allowClick=false;l.emit("onSliderMove",l,e);e.preventDefault();if(l.params.touchMoveStopPropagation&&!l.params.nested){e.stopPropagation()}if(!m){if(r.loop){l.fixLoop()}y=l.getWrapperTranslate();l.setWrapperTransition(0);if(l.animating){l.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd")}if(l.params.autoplay&&l.autoplaying){if(l.params.autoplayDisableOnInteraction){l.stopAutoplay()}else{l.pauseAutoplay()}}k=false;if(l.params.grabCursor){l.container[0].style.cursor="move";l.container[0].style.cursor="-webkit-grabbing";l.container[0].style.cursor="-moz-grabbin";l.container[0].style.cursor="grabbing"}}m=true;var n=l.touches.diff=c()?l.touches.currentX-l.touches.startX:l.touches.currentY-l.touches.startY;n=n*l.params.touchRatio;if(l.rtl)n=-n;l.swipeDirection=n>0?"prev":"next";v=n+y;var i=true;if(n>0&&v>l.minTranslate()){i=false;if(l.params.resistance)v=l.minTranslate()-1+Math.pow(-l.minTranslate()+y+n,l.params.resistanceRatio)}else if(n<0&&v<l.maxTranslate()){i=false;if(l.params.resistance)v=l.maxTranslate()+1-Math.pow(l.maxTranslate()-y-n,l.params.resistanceRatio)}if(i){e.preventedByNestedSwiper=true}if(!l.params.allowSwipeToNext&&l.swipeDirection==="next"&&v<y){v=y}if(!l.params.allowSwipeToPrev&&l.swipeDirection==="prev"&&v>y){v=y}if(!l.params.followFinger)return;if(l.params.threshold>0){if(Math.abs(n)>l.params.threshold||b){if(!b){b=true;l.touches.startX=l.touches.currentX;l.touches.startY=l.touches.currentY;v=y;l.touches.diff=c()?l.touches.currentX-l.touches.startX:l.touches.currentY-l.touches.startY;return}}else{v=y;return}}if(l.params.freeMode||l.params.watchSlidesProgress){l.updateActiveIndex()}if(l.params.freeMode){if(S.length===0){S.push({position:l.touches[c()?"startX":"startY"],time:g})}S.push({position:l.touches[c()?"currentX":"currentY"],
time:(new window.Date).getTime()})}l.updateProgress(v);l.setWrapperTranslate(v)};l.onTouchEnd=function(e){if(e.originalEvent)e=e.originalEvent;l.emit("onTouchEnd",l,e);if(!p)return;if(l.params.grabCursor&&m&&p){l.container[0].style.cursor="move";l.container[0].style.cursor="-webkit-grab";l.container[0].style.cursor="-moz-grab";l.container[0].style.cursor="grab"}var t=Date.now();var n=t-g;if(l.allowClick){l.updateClickedSlide(e);l.emit("onTap",l,e);if(n<300&&t-x>300){if(w)clearTimeout(w);w=setTimeout(function(){if(!l)return;if(l.params.paginationHide&&l.paginationContainer.length>0&&!u(e.target).hasClass(l.params.bulletClass)){l.paginationContainer.toggleClass(l.params.paginationHiddenClass)}l.emit("onClick",l,e)},300)}if(n<300&&t-x<300){if(w)clearTimeout(w);l.emit("onDoubleTap",l,e)}}x=Date.now();setTimeout(function(){if(l&&l.allowClick)l.allowClick=true},0);if(!p||!m||!l.swipeDirection||l.touches.diff===0||v===y){p=m=false;return}p=m=false;var r;if(l.params.followFinger){r=l.rtl?l.translate:-l.translate}else{r=-v}if(l.params.freeMode){if(r<-l.minTranslate()){l.slideTo(l.activeIndex);return}else if(r>-l.maxTranslate()){if(l.slides.length<l.snapGrid.length){l.slideTo(l.snapGrid.length-1)}else{l.slideTo(l.slides.length-1)}return}if(l.params.freeModeMomentum){if(S.length>1){var i=S.pop(),a=S.pop();var s=i.position-a.position;var o=i.time-a.time;l.velocity=s/o;l.velocity=l.velocity/2;if(Math.abs(l.velocity)<.02){l.velocity=0}if(o>150||(new window.Date).getTime()-i.time>300){l.velocity=0}}else{l.velocity=0}S.length=0;var c=1e3*l.params.freeModeMomentumRatio;var f=l.velocity*c;var d=l.translate+f;if(l.rtl)d=-d;var h=false;var _;var b=Math.abs(l.velocity)*20*l.params.freeModeMomentumBounceRatio;if(d<l.maxTranslate()){if(l.params.freeModeMomentumBounce){if(d+l.maxTranslate()<-b){d=l.maxTranslate()-b}_=l.maxTranslate();h=true;k=true}else{d=l.maxTranslate()}}else if(d>l.minTranslate()){if(l.params.freeModeMomentumBounce){if(d-l.minTranslate()>b){d=l.minTranslate()+b}_=l.minTranslate();h=true;k=true}else{d=l.minTranslate()}}else if(l.params.freeModeSticky){var M=0,L;for(M=0;M<l.snapGrid.length;M+=1){if(l.snapGrid[M]>-d){L=M;break}}if(Math.abs(l.snapGrid[L]-d)<Math.abs(l.snapGrid[L-1]-d)||l.swipeDirection==="next"){d=l.snapGrid[L]}else{d=l.snapGrid[L-1]}if(!l.rtl)d=-d}if(l.velocity!==0){if(l.rtl){c=Math.abs((-d-l.translate)/l.velocity)}else{c=Math.abs((d-l.translate)/l.velocity)}}else if(l.params.freeModeSticky){l.slideReset();return}if(l.params.freeModeMomentumBounce&&h){l.updateProgress(_);l.setWrapperTransition(c);l.setWrapperTranslate(d);l.onTransitionStart();l.animating=true;l.wrapper.transitionEnd(function(){if(!l||!k)return;l.emit("onMomentumBounce",l);l.setWrapperTransition(l.params.speed);l.setWrapperTranslate(_);l.wrapper.transitionEnd(function(){if(!l)return;l.onTransitionEnd()})})}else if(l.velocity){l.updateProgress(d);l.setWrapperTransition(c);l.setWrapperTranslate(d);l.onTransitionStart();if(!l.animating){l.animating=true;l.wrapper.transitionEnd(function(){if(!l)return;l.onTransitionEnd()})}}else{l.updateProgress(d)}l.updateActiveIndex()}if(!l.params.freeModeMomentum||n>=l.params.longSwipesMs){l.updateProgress();l.updateActiveIndex()}return}var T,E=0,D=l.slidesSizesGrid[0];for(T=0;T<l.slidesGrid.length;T+=l.params.slidesPerGroup){if(typeof l.slidesGrid[T+l.params.slidesPerGroup]!=="undefined"){if(r>=l.slidesGrid[T]&&r<l.slidesGrid[T+l.params.slidesPerGroup]){E=T;D=l.slidesGrid[T+l.params.slidesPerGroup]-l.slidesGrid[T]}}else{if(r>=l.slidesGrid[T]){E=T;D=l.slidesGrid[l.slidesGrid.length-1]-l.slidesGrid[l.slidesGrid.length-2]}}}var A=(r-l.slidesGrid[E])/D;var Y=function(e){l.params.onSlide?l.params.onSlide(e):l.slideTo(e)};if(n>l.params.longSwipesMs){if(!l.params.longSwipes){Y(l.activeIndex);return}if(l.swipeDirection==="next"){if(A>=l.params.longSwipesRatio)Y(E+l.params.slidesPerGroup);else Y(E)}if(l.swipeDirection==="prev"){if(A>1-l.params.longSwipesRatio)Y(E+l.params.slidesPerGroup);else Y(E)}}else{if(!l.params.shortSwipes){Y(l.activeIndex);return}if(l.swipeDirection==="next"){Y(E+l.params.slidesPerGroup)}if(l.swipeDirection==="prev"){Y(E)}}};l._slideTo=function(e,t){return l.slideTo(e,t,true,true)};l.slideTo=function(e,t,n,r){if(typeof n==="undefined")n=true;if(typeof e==="undefined")e=0;if(e<0)e=0;l.snapIndex=Math.floor(e/l.params.slidesPerGroup);if(l.snapIndex>=l.snapGrid.length)l.snapIndex=l.snapGrid.length-1;var i=-l.snapGrid[l.snapIndex];if(!l.params.allowSwipeToNext&&i<l.translate){return false}if(!l.params.allowSwipeToPrev&&i>l.translate){return false}if(l.params.autoplay&&l.autoplaying){if(r||!l.params.autoplayDisableOnInteraction){l.pauseAutoplay(t)}else{l.stopAutoplay()}}l.updateProgress(i);for(var a=0;a<l.slidesGrid.length;a++){if(-i>=l.slidesGrid[a]){e=a}}if(typeof t==="undefined")t=l.params.speed;l.previousIndex=l.activeIndex||0;l.activeIndex=e;if(i===l.translate){l.updateClasses();return false}l.updateClasses();l.onTransitionStart(n);var s=c()?i:0,o=c()?0:i;if(t===0){l.setWrapperTransition(0);l.setWrapperTranslate(i);l.onTransitionEnd(n)}else{l.setWrapperTransition(t);l.setWrapperTranslate(i);if(!l.animating){l.animating=true;l.wrapper.transitionEnd(function(){if(!l)return;l.onTransitionEnd(n)})}}return true};l.onTransitionStart=function(e){if(typeof e==="undefined")e=true;if(l.lazy)l.lazy.onTransitionStart();if(e){l.emit("onTransitionStart",l);if(l.activeIndex!==l.previousIndex){l.emit("onSlideChangeStart",l)}}};l.onTransitionEnd=function(e){l.animating=false;l.setWrapperTransition(0);if(typeof e==="undefined")e=true;if(l.lazy)l.lazy.onTransitionEnd();if(e){l.emit("onTransitionEnd",l);if(l.activeIndex!==l.previousIndex){l.emit("onSlideChangeEnd",l)}}if(l.params.hashnav&&l.hashnav){l.hashnav.setHash()}};l.slideNext=function(e,t,n){if(l.params.loop){if(l.animating)return false;l.fixLoop();var r=l.container[0].clientLeft;return l.slideTo(l.activeIndex+l.params.slidesPerGroup,t,e,n)}else return l.slideTo(l.activeIndex+l.params.slidesPerGroup,t,e,n)};l._slideNext=function(e){return l.slideNext(true,e,true)};l.slidePrev=function(e,t,n){if(l.params.loop){if(l.animating)return false;l.fixLoop();var r=l.container[0].clientLeft;return l.slideTo(l.activeIndex-1,t,e,n)}else return l.slideTo(l.activeIndex-1,t,e,n)};l._slidePrev=function(e){return l.slidePrev(true,e,true)};l.slideReset=function(e,t,n){return l.slideTo(l.activeIndex,t,e)};l.setWrapperTransition=function(e,t){l.wrapper.transition(e);if(l.params.effect!=="slide"&&l.effects[l.params.effect]){l.effects[l.params.effect].setTransition(e)}if(l.params.parallax&&l.parallax){l.parallax.setTransition(e)}if(l.params.scrollbar&&l.scrollbar){l.scrollbar.setTransition(e)}if(l.params.control&&l.controller){l.controller.setTransition(e,t)}l.emit("onSetTransition",l,e)};l.setWrapperTranslate=function(e,t,n){var r=0,i=0,a=0;if(c()){r=l.rtl?-e:e}else{i=e}if(!l.params.virtualTranslate){if(l.support.transforms3d)l.wrapper.transform("translate3d("+r+"px, "+i+"px, "+a+"px)");else l.wrapper.transform("translate("+r+"px, "+i+"px)")}l.translate=c()?r:i;if(t)l.updateActiveIndex();if(l.params.effect!=="slide"&&l.effects[l.params.effect]){l.effects[l.params.effect].setTranslate(l.translate)}if(l.params.parallax&&l.parallax){l.parallax.setTranslate(l.translate)}if(l.params.scrollbar&&l.scrollbar){l.scrollbar.setTranslate(l.translate)}if(l.params.control&&l.controller){l.controller.setTranslate(l.translate,n)}l.emit("onSetTranslate",l,l.translate)};l.getTranslate=function(e,t){var n,r,i,a;if(typeof t==="undefined"){t="x"}if(l.params.virtualTranslate){return l.rtl?-l.translate:l.translate}i=window.getComputedStyle(e,null);if(window.WebKitCSSMatrix){a=new window.WebKitCSSMatrix(i.webkitTransform==="none"?"":i.webkitTransform)}else{a=i.MozTransform||i.OTransform||i.MsTransform||i.msTransform||i.transform||i.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,");n=a.toString().split(",")}if(t==="x"){if(window.WebKitCSSMatrix)r=a.m41;else if(n.length===16)r=parseFloat(n[12]);else r=parseFloat(n[4])}if(t==="y"){if(window.WebKitCSSMatrix)r=a.m42;else if(n.length===16)r=parseFloat(n[13]);else r=parseFloat(n[5])}if(l.rtl&&r)r=-r;return r||0};l.getWrapperTranslate=function(e){if(typeof e==="undefined"){e=c()?"x":"y"}return l.getTranslate(l.wrapper[0],e)};l.observers=[];function E(e,t){t=t||{};var n=window.MutationObserver||window.WebkitMutationObserver;var r=new n(function(e){e.forEach(function(e){l.onResize(true);l.emit("onObserverUpdate",l,e)})});r.observe(e,{attributes:typeof t.attributes==="undefined"?true:t.attributes,childList:typeof t.childList==="undefined"?true:t.childList,characterData:typeof t.characterData==="undefined"?true:t.characterData});l.observers.push(r)}l.initObservers=function(){if(l.params.observeParents){var e=l.container.parents();for(var t=0;t<e.length;t++){E(e[t])}}E(l.container[0],{childList:false});E(l.wrapper[0],{attributes:false})};l.disconnectObservers=function(){for(var e=0;e<l.observers.length;e++){l.observers[e].disconnect()}l.observers=[]};l.createLoop=function(){l.wrapper.children("."+l.params.slideClass+"."+l.params.slideDuplicateClass).remove();var e=l.wrapper.children("."+l.params.slideClass);l.loopedSlides=parseInt(l.params.loopedSlides||l.params.slidesPerView,10);l.loopedSlides=l.loopedSlides+l.params.loopAdditionalSlides;if(l.loopedSlides>e.length){l.loopedSlides=e.length}var t=[],n=[],r;e.each(function(r,i){var a=u(this);if(r<l.loopedSlides)n.push(i);if(r<e.length&&r>=e.length-l.loopedSlides)t.push(i);a.attr("data-swiper-slide-index",r)});for(r=0;r<n.length;r++){l.wrapper.append(u(n[r].cloneNode(true)).addClass(l.params.slideDuplicateClass))}for(r=t.length-1;r>=0;r--){l.wrapper.prepend(u(t[r].cloneNode(true)).addClass(l.params.slideDuplicateClass))}};l.destroyLoop=function(){l.wrapper.children("."+l.params.slideClass+"."+l.params.slideDuplicateClass).remove();l.slides.removeAttr("data-swiper-slide-index")};l.fixLoop=function(){var e;if(l.activeIndex<l.loopedSlides){e=l.slides.length-l.loopedSlides*3+l.activeIndex;e=e+l.loopedSlides;l.slideTo(e,0,false,true)}else if(l.params.slidesPerView==="auto"&&l.activeIndex>=l.loopedSlides*2||l.activeIndex>l.slides.length-l.params.slidesPerView*2){e=-l.slides.length+l.activeIndex+l.loopedSlides;e=e+l.loopedSlides;l.slideTo(e,0,false,true)}};l.appendSlide=function(e){if(l.params.loop){l.destroyLoop()}if(typeof e==="object"&&e.length){for(var t=0;t<e.length;t++){if(e[t])l.wrapper.append(e[t])}}else{l.wrapper.append(e)}if(l.params.loop){l.createLoop()}if(!(l.params.observer&&l.support.observer)){l.update(true)}};l.prependSlide=function(e){if(l.params.loop){l.destroyLoop()}var t=l.activeIndex+1;if(typeof e==="object"&&e.length){for(var n=0;n<e.length;n++){if(e[n])l.wrapper.prepend(e[n])}t=l.activeIndex+e.length}else{l.wrapper.prepend(e)}if(l.params.loop){l.createLoop()}if(!(l.params.observer&&l.support.observer)){l.update(true)}l.slideTo(t,0,false)};l.removeSlide=function(e){if(l.params.loop){l.destroyLoop();l.slides=l.wrapper.children("."+l.params.slideClass)}var t=l.activeIndex,n;if(typeof e==="object"&&e.length){for(var r=0;r<e.length;r++){n=e[r];if(l.slides[n])l.slides.eq(n).remove();if(n<t)t--}t=Math.max(t,0)}else{n=e;if(l.slides[n])l.slides.eq(n).remove();if(n<t)t--;t=Math.max(t,0)}if(l.params.loop){l.createLoop()}if(!(l.params.observer&&l.support.observer)){l.update(true)}if(l.params.loop){l.slideTo(t+l.loopedSlides,0,false)}else{l.slideTo(t,0,false)}};l.removeAllSlides=function(){var e=[];for(var t=0;t<l.slides.length;t++){e.push(t)}l.removeSlide(e)};l.effects={fade:{fadeIndex:null,setTranslate:function(){for(var e=0;e<l.slides.length;e++){var t=l.slides.eq(e);var n=t[0].swiperSlideOffset;var r=-n;if(!l.params.virtualTranslate)r=r-l.translate;var i=0;if(!c()){i=r;r=0}var a=l.params.fade.crossFade?Math.max(1-Math.abs(t[0].progress),0):1+Math.min(Math.max(t[0].progress,-1),0);if(a>0&&a<1){l.effects.fade.fadeIndex=e}t.css({opacity:a}).transform("translate3d("+r+"px, "+i+"px, 0px)")}},setTransition:function(e){l.slides.transition(e);if(l.params.virtualTranslate&&e!==0){var t=l.effects.fade.fadeIndex!==null?l.effects.fade.fadeIndex:l.activeIndex;if(!(l.params.loop||l.params.fade.crossFade)&&t===0){t=l.slides.length-1}l.slides.eq(t).transitionEnd(function(){if(!l)return;var e=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"];for(var t=0;t<e.length;t++){l.wrapper.trigger(e[t])}})}}},cube:{setTranslate:function(){var e=0,t;if(l.params.cube.shadow){if(c()){t=l.wrapper.find(".swiper-cube-shadow");if(t.length===0){t=u('<div class="swiper-cube-shadow"></div>');l.wrapper.append(t)}t.css({height:l.width+"px"})}else{t=l.container.find(".swiper-cube-shadow");if(t.length===0){t=u('<div class="swiper-cube-shadow"></div>');l.container.append(t)}}}for(var n=0;n<l.slides.length;n++){var r=l.slides.eq(n);var i=n*90;var a=Math.floor(i/360);if(l.rtl){i=-i;a=Math.floor(-i/360)}var s=Math.max(Math.min(r[0].progress,1),-1);var o=0,f=0,d=0;if(n%4===0){o=-a*4*l.size;d=0}else if((n-1)%4===0){o=0;d=-a*4*l.size}else if((n-2)%4===0){o=l.size+a*4*l.size;d=l.size}else if((n-3)%4===0){o=-l.size;d=3*l.size+l.size*4*a}if(l.rtl){o=-o}if(!c()){f=o;o=0}var h="rotateX("+(c()?0:-i)+"deg) rotateY("+(c()?i:0)+"deg) translate3d("+o+"px, "+f+"px, "+d+"px)";if(s<=1&&s>-1){e=n*90+s*90;if(l.rtl)e=-n*90-s*90}r.transform(h);if(l.params.cube.slideShadows){var p=c()?r.find(".swiper-slide-shadow-left"):r.find(".swiper-slide-shadow-top");var m=c()?r.find(".swiper-slide-shadow-right"):r.find(".swiper-slide-shadow-bottom");if(p.length===0){p=u('<div class="swiper-slide-shadow-'+(c()?"left":"top")+'"></div>');r.append(p)}if(m.length===0){m=u('<div class="swiper-slide-shadow-'+(c()?"right":"bottom")+'"></div>');r.append(m)}var g=r[0].progress;if(p.length)p[0].style.opacity=-r[0].progress;if(m.length)m[0].style.opacity=r[0].progress}}l.wrapper.css({"-webkit-transform-origin":"50% 50% -"+l.size/2+"px","-moz-transform-origin":"50% 50% -"+l.size/2+"px","-ms-transform-origin":"50% 50% -"+l.size/2+"px","transform-origin":"50% 50% -"+l.size/2+"px"});if(l.params.cube.shadow){if(c()){t.transform("translate3d(0px, "+(l.width/2+l.params.cube.shadowOffset)+"px, "+-l.width/2+"px) rotateX(90deg) rotateZ(0deg) scale("+l.params.cube.shadowScale+")")}else{var _=Math.abs(e)-Math.floor(Math.abs(e)/90)*90;var v=1.5-(Math.sin(_*2*Math.PI/360)/2+Math.cos(_*2*Math.PI/360)/2);var y=l.params.cube.shadowScale,b=l.params.cube.shadowScale/v,M=l.params.cube.shadowOffset;t.transform("scale3d("+y+", 1, "+b+") translate3d(0px, "+(l.height/2+M)+"px, "+-l.height/2/b+"px) rotateX(-90deg)")}}var x=l.isSafari||l.isUiWebView?-l.size/2:0;l.wrapper.transform("translate3d(0px,0,"+x+"px) rotateX("+(c()?0:e)+"deg) rotateY("+(c()?-e:0)+"deg)")},setTransition:function(e){l.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e);if(l.params.cube.shadow&&!c()){l.container.find(".swiper-cube-shadow").transition(e)}}},coverflow:{setTranslate:function(){var e=l.translate;var t=c()?-e+l.width/2:-e+l.height/2;var n=c()?l.params.coverflow.rotate:-l.params.coverflow.rotate;var r=l.params.coverflow.depth;for(var i=0,a=l.slides.length;i<a;i++){var s=l.slides.eq(i);var o=l.slidesSizesGrid[i];var f=s[0].swiperSlideOffset;var d=(t-f-o/2)/o*l.params.coverflow.modifier;var h=c()?n*d:0;var p=c()?0:n*d;var m=-r*Math.abs(d);var g=c()?0:l.params.coverflow.stretch*d;var _=c()?l.params.coverflow.stretch*d:0;if(Math.abs(_)<.001)_=0;if(Math.abs(g)<.001)g=0;if(Math.abs(m)<.001)m=0;if(Math.abs(h)<.001)h=0;if(Math.abs(p)<.001)p=0;var v="translate3d("+_+"px,"+g+"px,"+m+"px)  rotateX("+p+"deg) rotateY("+h+"deg)";s.transform(v);s[0].style.zIndex=-Math.abs(Math.round(d))+1;if(l.params.coverflow.slideShadows){var y=c()?s.find(".swiper-slide-shadow-left"):s.find(".swiper-slide-shadow-top");var b=c()?s.find(".swiper-slide-shadow-right"):s.find(".swiper-slide-shadow-bottom");if(y.length===0){y=u('<div class="swiper-slide-shadow-'+(c()?"left":"top")+'"></div>');s.append(y)}if(b.length===0){b=u('<div class="swiper-slide-shadow-'+(c()?"right":"bottom")+'"></div>');s.append(b)}if(y.length)y[0].style.opacity=d>0?d:0;if(b.length)b[0].style.opacity=-d>0?-d:0}}if(l.browser.ie){var M=l.wrapper[0].style;M.perspectiveOrigin=t+"px 50%"}},setTransition:function(e){l.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}}};l.lazy={initialImageLoaded:false,loadImageInSlide:function(e,t){if(typeof e==="undefined")return;if(typeof t==="undefined")t=true;if(l.slides.length===0)return;var n=l.slides.eq(e);var r=n.find(".swiper-lazy:not(.swiper-lazy-loaded):not(.swiper-lazy-loading)");if(n.hasClass("swiper-lazy")&&!n.hasClass("swiper-lazy-loaded")&&!n.hasClass("swiper-lazy-loading")){r.add(n[0])}if(r.length===0)return;r.each(function(){var e=u(this);e.addClass("swiper-lazy-loading");var r=e.attr("data-background");var i=e.attr("data-src");l.loadImage(e[0],i||r,false,function(){if(r){e.css("background-image","url("+r+")");e.removeAttr("data-background")}else{e.attr("src",i);e.removeAttr("data-src")}e.addClass("swiper-lazy-loaded").removeClass("swiper-lazy-loading");n.find(".swiper-lazy-preloader, .preloader").remove();if(l.params.loop&&t){var a=n.attr("data-swiper-slide-index");if(n.hasClass(l.params.slideDuplicateClass)){var s=l.wrapper.children('[data-swiper-slide-index="'+a+'"]:not(.'+l.params.slideDuplicateClass+")");l.lazy.loadImageInSlide(s.index(),false)}else{var o=l.wrapper.children("."+l.params.slideDuplicateClass+'[data-swiper-slide-index="'+a+'"]');l.lazy.loadImageInSlide(o.index(),false)}}l.emit("onLazyImageReady",l,n[0],e[0])});l.emit("onLazyImageLoad",l,n[0],e[0])})},load:function(){if(l.params.watchSlidesVisibility){l.wrapper.children("."+l.params.slideVisibleClass).each(function(){l.lazy.loadImageInSlide(u(this).index())})}else{if(l.params.slidesPerView>1){for(var e=l.activeIndex;e<l.activeIndex+l.params.slidesPerView;e++){if(l.slides[e])l.lazy.loadImageInSlide(e)}}else{l.lazy.loadImageInSlide(l.activeIndex)}}if(l.params.lazyLoadingInPrevNext){var t=l.wrapper.children("."+l.params.slideNextClass);if(t.length>0)l.lazy.loadImageInSlide(t.index());var n=l.wrapper.children("."+l.params.slidePrevClass);if(n.length>0)l.lazy.loadImageInSlide(n.index())}},onTransitionStart:function(){if(l.params.lazyLoading){if(l.params.lazyLoadingOnTransitionStart||!l.params.lazyLoadingOnTransitionStart&&!l.lazy.initialImageLoaded){l.lazy.load()}}},onTransitionEnd:function(){if(l.params.lazyLoading&&!l.params.lazyLoadingOnTransitionStart){l.lazy.load()}}};l.scrollbar={set:function(){if(!l.params.scrollbar)return;var e=l.scrollbar;e.track=u(l.params.scrollbar);e.drag=e.track.find(".swiper-scrollbar-drag");if(e.drag.length===0){e.drag=u('<div class="swiper-scrollbar-drag"></div>');e.track.append(e.drag)}e.drag[0].style.width="";e.drag[0].style.height="";e.trackSize=c()?e.track[0].offsetWidth:e.track[0].offsetHeight;e.divider=l.size/l.virtualSize;e.moveDivider=e.divider*(e.trackSize/l.size);e.dragSize=e.trackSize*e.divider;if(c()){e.drag[0].style.width=e.dragSize+"px"}else{e.drag[0].style.height=e.dragSize+"px"}if(e.divider>=1){e.track[0].style.display="none"}else{e.track[0].style.display=""}if(l.params.scrollbarHide){e.track[0].style.opacity=0}},setTranslate:function(){if(!l.params.scrollbar)return;var e;var t=l.scrollbar;var n=l.translate||0;var r;var i=t.dragSize;r=(t.trackSize-t.dragSize)*l.progress;if(l.rtl&&c()){r=-r;if(r>0){i=t.dragSize-r;r=0}else if(-r+t.dragSize>t.trackSize){i=t.trackSize+r}}else{if(r<0){i=t.dragSize+r;r=0}else if(r+t.dragSize>t.trackSize){i=t.trackSize-r}}if(c()){if(l.support.transforms3d){t.drag.transform("translate3d("+r+"px, 0, 0)")}else{t.drag.transform("translateX("+r+"px)")}t.drag[0].style.width=i+"px"}else{if(l.support.transforms3d){t.drag.transform("translate3d(0px, "+r+"px, 0)")}else{t.drag.transform("translateY("+r+"px)")}t.drag[0].style.height=i+"px"}if(l.params.scrollbarHide){clearTimeout(t.timeout);t.track[0].style.opacity=1;t.timeout=setTimeout(function(){t.track[0].style.opacity=0;t.track.transition(400)},1e3)}},setTransition:function(e){if(!l.params.scrollbar)return;l.scrollbar.drag.transition(e)}};l.controller={setTranslate:function(t,n){var r=l.params.control;var i,a;function s(e){t=e.rtl&&e.params.direction==="horizontal"?-l.translate:l.translate;i=(e.maxTranslate()-e.minTranslate())/(l.maxTranslate()-l.minTranslate());a=(t-l.minTranslate())*i+e.minTranslate();if(l.params.controlInverse){a=e.maxTranslate()-a}e.updateProgress(a);e.setWrapperTranslate(a,false,l);e.updateActiveIndex()}if(l.isArray(r)){for(var o=0;o<r.length;o++){if(r[o]!==n&&r[o]instanceof e){s(r[o])}}}else if(r instanceof e&&n!==r){s(r)}},setTransition:function(t,n){var r=l.params.control;var i;function a(e){e.setWrapperTransition(t,l);if(t!==0){e.onTransitionStart();e.wrapper.transitionEnd(function(){if(!r)return;e.onTransitionEnd()})}}if(l.isArray(r)){for(i=0;i<r.length;i++){if(r[i]!==n&&r[i]instanceof e){a(r[i])}}}else if(r instanceof e&&n!==r){a(r)}}};l.hashnav={init:function(){if(!l.params.hashnav)return;l.hashnav.initialized=true;var e=document.location.hash.replace("#","");if(!e)return;var t=0;for(var n=0,r=l.slides.length;n<r;n++){var i=l.slides.eq(n);var a=i.attr("data-hash");if(a===e&&!i.hasClass(l.params.slideDuplicateClass)){var s=i.index();l.slideTo(s,t,l.params.runCallbacksOnInit,true)}}},setHash:function(){if(!l.hashnav.initialized||!l.params.hashnav)return;document.location.hash=l.slides.eq(l.activeIndex).attr("data-hash")||""}};function D(e){if(e.originalEvent)e=e.originalEvent;var t=e.keyCode||e.charCode;if(!l.params.allowSwipeToNext&&(c()&&t===39||!c()&&t===40)){return false}if(!l.params.allowSwipeToPrev&&(c()&&t===37||!c()&&t===38)){return false}if(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey){return}if(document.activeElement&&document.activeElement.nodeName&&(document.activeElement.nodeName.toLowerCase()==="input"||document.activeElement.nodeName.toLowerCase()==="textarea")){return}if(t===37||t===39||t===38||t===40){var n=false;if(l.container.parents(".swiper-slide").length>0&&l.container.parents(".swiper-slide-active").length===0){return}var r={left:window.pageXOffset,top:window.pageYOffset};var i=window.innerWidth;var a=window.innerHeight;var s=l.container.offset();var o=[[s.left,s.top],[s.left+l.width,s.top],[s.left,s.top+l.height],[s.left+l.width,s.top+l.height]];for(var u=0;u<o.length;u++){var f=o[u];if(f[0]>=r.left&&f[0]<=r.left+i&&f[1]>=r.top&&f[1]<=r.top+a){n=true}}if(!n)return}if(c()){if(t===37||t===39){if(e.preventDefault)e.preventDefault();else e.returnValue=false}if(t===39)l.slideNext();if(t===37)l.slidePrev()}else{if(t===38||t===40){if(e.preventDefault)e.preventDefault();else e.returnValue=false}if(t===40)l.slideNext();if(t===38)l.slidePrev()}}l.disableKeyboardControl=function(){u(document).off("keydown",D)};l.enableKeyboardControl=function(){u(document).on("keydown",D)};l._wheelEvent=false;l._lastWheelScrollTime=(new window.Date).getTime();if(l.params.mousewheelControl){if(document.onmousewheel!==undefined){l._wheelEvent="mousewheel"}if(!l._wheelEvent){try{new window.WheelEvent("wheel");l._wheelEvent="wheel"}catch(A){}}if(!l._wheelEvent){l._wheelEvent="DOMMouseScroll"}}function Y(e){if(e.originalEvent)e=e.originalEvent;var t=l._wheelEvent;var n=0;if(e.detail)n=-e.detail;else if(t==="mousewheel"){if(l.params.mousewheelForceToAxis){if(c()){if(Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY))n=e.wheelDeltaX;else return}else{if(Math.abs(e.wheelDeltaY)>Math.abs(e.wheelDeltaX))n=e.wheelDeltaY;else return}}else{n=e.wheelDelta}}else if(t==="DOMMouseScroll")n=-e.detail;else if(t==="wheel"){if(l.params.mousewheelForceToAxis){if(c()){if(Math.abs(e.deltaX)>Math.abs(e.deltaY))n=-e.deltaX;else return}else{if(Math.abs(e.deltaY)>Math.abs(e.deltaX))n=-e.deltaY;else return}}else{n=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY}}if(!l.params.freeMode){if((new window.Date).getTime()-l._lastWheelScrollTime>60){if(n<0)l.slideNext();else l.slidePrev()}l._lastWheelScrollTime=(new window.Date).getTime()}else{var r=l.getWrapperTranslate()+n;if(r>0)r=0;if(r<l.maxTranslate())r=l.maxTranslate();l.setWrapperTransition(0);l.setWrapperTranslate(r);l.updateProgress();l.updateActiveIndex();if(r===0||r===l.maxTranslate())return}if(l.params.autoplay)l.stopAutoplay();if(e.preventDefault)e.preventDefault();else e.returnValue=false;return false}l.disableMousewheelControl=function(){if(!l._wheelEvent)return false;l.container.off(l._wheelEvent,Y);return true};l.enableMousewheelControl=function(){if(!l._wheelEvent)return false;l.container.on(l._wheelEvent,Y);return true};function C(e,t){e=u(e);var n,r,i;n=e.attr("data-swiper-parallax")||"0";r=e.attr("data-swiper-parallax-x");i=e.attr("data-swiper-parallax-y");if(r||i){r=r||"0";i=i||"0"}else{if(c()){r=n;i="0"}else{i=n;r="0"}}if(r.indexOf("%")>=0){r=parseInt(r,10)*t+"%"}else{r=r*t+"px"}if(i.indexOf("%")>=0){i=parseInt(i,10)*t+"%"}else{i=i*t+"px"}e.transform("translate3d("+r+", "+i+",0px)")}l.parallax={setTranslate:function(){l.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){C(this,l.progress)});l.slides.each(function(){var e=u(this);e.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var t=Math.min(Math.max(e[0].progress,-1),1);C(this,t)})})},setTransition:function(e){if(typeof e==="undefined")e=l.params.speed;l.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var t=u(this);var n=parseInt(t.attr("data-swiper-parallax-duration"),10)||e;if(e===0)n=0;t.transition(n)})}};l._plugins=[];for(var R in l.plugins){var O=l.plugins[R](l,l.params[R]);if(O)l._plugins.push(O)}l.callPlugins=function(e){for(var t=0;t<l._plugins.length;t++){if(e in l._plugins[t]){l._plugins[t][e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}}};function P(e){if(e.indexOf("on")!==0){if(e[0]!==e[0].toUpperCase()){e="on"+e[0].toUpperCase()+e.substring(1)}else{e="on"+e}}return e}l.emitterEventListeners={};l.emit=function(e){if(l.params[e]){l.params[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}var t;if(l.emitterEventListeners[e]){for(t=0;t<l.emitterEventListeners[e].length;t++){l.emitterEventListeners[e][t](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}}if(l.callPlugins)l.callPlugins(e,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])};l.on=function(e,t){e=P(e);if(!l.emitterEventListeners[e])l.emitterEventListeners[e]=[];l.emitterEventListeners[e].push(t);return l};l.off=function(e,t){var n;e=P(e);if(typeof t==="undefined"){l.emitterEventListeners[e]=[];return l}if(!l.emitterEventListeners[e]||l.emitterEventListeners[e].length===0)return;for(n=0;n<l.emitterEventListeners[e].length;n++){if(l.emitterEventListeners[e][n]===t)l.emitterEventListeners[e].splice(n,1)}return l};l.once=function(e,t){e=P(e);var n=function(){t(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);l.off(e,n)};l.on(e,n);return l};l.a11y={makeFocusable:function(e){e[0].tabIndex="0";return e},addRole:function(e,t){e.attr("role",t);return e},addLabel:function(e,t){e.attr("aria-label",t);return e},disable:function(e){e.attr("aria-disabled",true);return e},enable:function(e){e.attr("aria-disabled",false);return e},onEnterKey:function(e){if(e.keyCode!==13)return;if(u(e.target).is(l.params.nextButton)){l.onClickNext(e);if(l.isEnd){l.a11y.notify(l.params.lastSlideMsg)}else{l.a11y.notify(l.params.nextSlideMsg)}}else if(u(e.target).is(l.params.prevButton)){l.onClickPrev(e);if(l.isBeginning){l.a11y.notify(l.params.firstSlideMsg)}else{l.a11y.notify(l.params.prevSlideMsg)}}},liveRegion:u('<span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>'),notify:function(e){var t=l.a11y.liveRegion;if(t.length===0)return;t.html("");t.html(e)},init:function(){if(l.params.nextButton){var e=u(l.params.nextButton);l.a11y.makeFocusable(e);l.a11y.addRole(e,"button");l.a11y.addLabel(e,l.params.nextSlideMsg)}if(l.params.prevButton){var t=u(l.params.prevButton);l.a11y.makeFocusable(t);l.a11y.addRole(t,"button");l.a11y.addLabel(t,l.params.prevSlideMsg)}u(l.container).append(l.a11y.liveRegion)},destroy:function(){if(l.a11y.liveRegion&&l.a11y.liveRegion.length>0)l.a11y.liveRegion.remove()}};l.init=function(){if(l.params.loop)l.createLoop();l.updateContainerSize();l.updateSlidesSize();l.updatePagination();if(l.params.scrollbar&&l.scrollbar){l.scrollbar.set()}if(l.params.effect!=="slide"&&l.effects[l.params.effect]){if(!l.params.loop)l.updateProgress();l.effects[l.params.effect].setTranslate()}if(l.params.loop){l.slideTo(l.params.initialSlide+l.loopedSlides,0,l.params.runCallbacksOnInit)}else{l.slideTo(l.params.initialSlide,0,l.params.runCallbacksOnInit);if(l.params.initialSlide===0){if(l.parallax&&l.params.parallax)l.parallax.setTranslate();if(l.lazy&&l.params.lazyLoading){l.lazy.load();l.lazy.initialImageLoaded=true}}}l.attachEvents();if(l.params.observer&&l.support.observer){l.initObservers()}if(l.params.preloadImages&&!l.params.lazyLoading){l.preloadImages()}if(l.params.autoplay){l.startAutoplay()}if(l.params.keyboardControl){if(l.enableKeyboardControl)l.enableKeyboardControl()}if(l.params.mousewheelControl){if(l.enableMousewheelControl)l.enableMousewheelControl()}if(l.params.hashnav){if(l.hashnav)l.hashnav.init()}if(l.params.a11y&&l.a11y)l.a11y.init();l.emit("onInit",l)};l.cleanupStyles=function(){l.container.removeClass(l.classNames.join(" ")).removeAttr("style");l.wrapper.removeAttr("style");if(l.slides&&l.slides.length){l.slides.removeClass([l.params.slideVisibleClass,l.params.slideActiveClass,l.params.slideNextClass,l.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row")}if(l.paginationContainer&&l.paginationContainer.length){l.paginationContainer.removeClass(l.params.paginationHiddenClass)}if(l.bullets&&l.bullets.length){l.bullets.removeClass(l.params.bulletActiveClass)}if(l.params.prevButton)u(l.params.prevButton).removeClass(l.params.buttonDisabledClass);if(l.params.nextButton)u(l.params.nextButton).removeClass(l.params.buttonDisabledClass);if(l.params.scrollbar&&l.scrollbar){if(l.scrollbar.track&&l.scrollbar.track.length)l.scrollbar.track.removeAttr("style");if(l.scrollbar.drag&&l.scrollbar.drag.length)l.scrollbar.drag.removeAttr("style")}};l.destroy=function(e,t){l.detachEvents();l.stopAutoplay();if(l.params.loop){l.destroyLoop()}if(t){l.cleanupStyles()}l.disconnectObservers();if(l.params.keyboardControl){if(l.disableKeyboardControl)l.disableKeyboardControl()}if(l.params.mousewheelControl){if(l.disableMousewheelControl)l.disableMousewheelControl()}if(l.params.a11y&&l.a11y)l.a11y.destroy();l.emit("onDestroy");if(e!==false)l=null};l.init();return l};e.prototype={isSafari:function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),isArray:function(e){return Object.prototype.toString.apply(e)==="[object Array]"},browser:{ie:window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ieTouch:window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>1||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>1},device:function(){var e=navigator.userAgent;var t=e.match(/(Android);?[\s\/]+([\d.]+)?/);var n=e.match(/(iPad).*OS\s([\d_]+)/);var r=e.match(/(iPod)(.*OS\s([\d_]+))?/);var i=!n&&e.match(/(iPhone\sOS)\s([\d_]+)/);return{ios:n||i||n,android:t}}(),support:{touch:window.Modernizr&&Modernizr.touch===true||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===true||function(){var e=document.createElement("div").style;return"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e;

}(),flexbox:function(){var e=document.createElement("div").style;var t="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" ");for(var n=0;n<t.length;n++){if(t[n]in e)return true}}(),observer:function(){return"MutationObserver"in window||"WebkitMutationObserver"in window}()},plugins:{}};var t=function(){var e=function(e){var t=this,n=0;for(n=0;n<e.length;n++){t[n]=e[n]}t.length=e.length;return this};var t=function(t,n){var r=[],i=0;if(t&&!n){if(t instanceof e){return t}}if(t){if(typeof t==="string"){var a,s,o=t.trim();if(o.indexOf("<")>=0&&o.indexOf(">")>=0){var l="div";if(o.indexOf("<li")===0)l="ul";if(o.indexOf("<tr")===0)l="tbody";if(o.indexOf("<td")===0||o.indexOf("<th")===0)l="tr";if(o.indexOf("<tbody")===0)l="table";if(o.indexOf("<option")===0)l="select";s=document.createElement(l);s.innerHTML=t;for(i=0;i<s.childNodes.length;i++){r.push(s.childNodes[i])}}else{if(!n&&t[0]==="#"&&!t.match(/[ .<>:~]/)){a=[document.getElementById(t.split("#")[1])]}else{a=(n||document).querySelectorAll(t)}for(i=0;i<a.length;i++){if(a[i])r.push(a[i])}}}else if(t.nodeType||t===window||t===document){r.push(t)}else if(t.length>0&&t[0].nodeType){for(i=0;i<t.length;i++){r.push(t[i])}}}return new e(r)};e.prototype={addClass:function(e){if(typeof e==="undefined"){return this}var t=e.split(" ");for(var n=0;n<t.length;n++){for(var r=0;r<this.length;r++){this[r].classList.add(t[n])}}return this},removeClass:function(e){var t=e.split(" ");for(var n=0;n<t.length;n++){for(var r=0;r<this.length;r++){this[r].classList.remove(t[n])}}return this},hasClass:function(e){if(!this[0])return false;else return this[0].classList.contains(e)},toggleClass:function(e){var t=e.split(" ");for(var n=0;n<t.length;n++){for(var r=0;r<this.length;r++){this[r].classList.toggle(t[n])}}return this},attr:function(e,t){if(arguments.length===1&&typeof e==="string"){if(this[0])return this[0].getAttribute(e);else return undefined}else{for(var n=0;n<this.length;n++){if(arguments.length===2){this[n].setAttribute(e,t)}else{for(var r in e){this[n][r]=e[r];this[n].setAttribute(r,e[r])}}}return this}},removeAttr:function(e){for(var t=0;t<this.length;t++){this[t].removeAttribute(e)}return this},data:function(e,t){if(typeof t==="undefined"){if(this[0]){var n=this[0].getAttribute("data-"+e);if(n)return n;else if(this[0].dom7ElementDataStorage&&e in this[0].dom7ElementDataStorage)return this[0].dom7ElementDataStorage[e];else return undefined}else return undefined}else{for(var r=0;r<this.length;r++){var i=this[r];if(!i.dom7ElementDataStorage)i.dom7ElementDataStorage={};i.dom7ElementDataStorage[e]=t}return this}},transform:function(e){for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=e}return this},transition:function(e){if(typeof e!=="string"){e=e+"ms"}for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=e}return this},on:function(e,n,r,i){function a(e){var i=e.target;if(t(i).is(n))r.call(i,e);else{var a=t(i).parents();for(var s=0;s<a.length;s++){if(t(a[s]).is(n))r.call(a[s],e)}}}var s=e.split(" ");var o,l;for(o=0;o<this.length;o++){if(typeof n==="function"||n===false){if(typeof n==="function"){r=arguments[1];i=arguments[2]||false}for(l=0;l<s.length;l++){this[o].addEventListener(s[l],r,i)}}else{for(l=0;l<s.length;l++){if(!this[o].dom7LiveListeners)this[o].dom7LiveListeners=[];this[o].dom7LiveListeners.push({listener:r,liveListener:a});this[o].addEventListener(s[l],a,i)}}}return this},off:function(e,t,n,r){var i=e.split(" ");for(var a=0;a<i.length;a++){for(var s=0;s<this.length;s++){if(typeof t==="function"||t===false){if(typeof t==="function"){n=arguments[1];r=arguments[2]||false}this[s].removeEventListener(i[a],n,r)}else{if(this[s].dom7LiveListeners){for(var o=0;o<this[s].dom7LiveListeners.length;o++){if(this[s].dom7LiveListeners[o].listener===n){this[s].removeEventListener(i[a],this[s].dom7LiveListeners[o].liveListener,r)}}}}}}return this},once:function(e,t,n,r){var i=this;if(typeof t==="function"){t=false;n=arguments[1];r=arguments[2]}function a(s){n(s);i.off(e,t,a,r)}i.on(e,t,a,r)},trigger:function(e,t){for(var n=0;n<this.length;n++){var r;try{r=new window.CustomEvent(e,{detail:t,bubbles:true,cancelable:true})}catch(i){r=document.createEvent("Event");r.initEvent(e,true,true);r.detail=t}this[n].dispatchEvent(r)}return this},transitionEnd:function(e){var t=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],n,r,i=this;function a(r){if(r.target!==this)return;e.call(this,r);for(n=0;n<t.length;n++){i.off(t[n],a)}}if(e){for(n=0;n<t.length;n++){i.on(t[n],a)}}return this},width:function(){if(this[0]===window){return window.innerWidth}else{if(this.length>0){return parseFloat(this.css("width"))}else{return null}}},outerWidth:function(e){if(this.length>0){if(e)return this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left"));else return this[0].offsetWidth}else return null},height:function(){if(this[0]===window){return window.innerHeight}else{if(this.length>0){return parseFloat(this.css("height"))}else{return null}}},outerHeight:function(e){if(this.length>0){if(e)return this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom"));else return this[0].offsetHeight}else return null},offset:function(){if(this.length>0){var e=this[0];var t=e.getBoundingClientRect();var n=document.body;var r=e.clientTop||n.clientTop||0;var i=e.clientLeft||n.clientLeft||0;var a=window.pageYOffset||e.scrollTop;var s=window.pageXOffset||e.scrollLeft;return{top:t.top+a-r,left:t.left+s-i}}else{return null}},css:function(e,t){var n;if(arguments.length===1){if(typeof e==="string"){if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(e)}else{for(n=0;n<this.length;n++){for(var r in e){this[n].style[r]=e[r]}}return this}}if(arguments.length===2&&typeof e==="string"){for(n=0;n<this.length;n++){this[n].style[e]=t}return this}return this},each:function(e){for(var t=0;t<this.length;t++){e.call(this[t],t,this[t])}return this},html:function(e){if(typeof e==="undefined"){return this[0]?this[0].innerHTML:undefined}else{for(var t=0;t<this.length;t++){this[t].innerHTML=e}return this}},is:function(n){if(!this[0])return false;var r,i;if(typeof n==="string"){var a=this[0];if(a===document)return n===document;if(a===window)return n===window;if(a.matches)return a.matches(n);else if(a.webkitMatchesSelector)return a.webkitMatchesSelector(n);else if(a.mozMatchesSelector)return a.mozMatchesSelector(n);else if(a.msMatchesSelector)return a.msMatchesSelector(n);else{r=t(n);for(i=0;i<r.length;i++){if(r[i]===this[0])return true}return false}}else if(n===document)return this[0]===document;else if(n===window)return this[0]===window;else{if(n.nodeType||n instanceof e){r=n.nodeType?[n]:n;for(i=0;i<r.length;i++){if(r[i]===this[0])return true}return false}return false}},index:function(){if(this[0]){var e=this[0];var t=0;while((e=e.previousSibling)!==null){if(e.nodeType===1)t++}return t}else return undefined},eq:function(t){if(typeof t==="undefined")return this;var n=this.length;var r;if(t>n-1){return new e([])}if(t<0){r=n+t;if(r<0)return new e([]);else return new e([this[r]])}return new e([this[t]])},append:function(t){var n,r;for(n=0;n<this.length;n++){if(typeof t==="string"){var i=document.createElement("div");i.innerHTML=t;while(i.firstChild){this[n].appendChild(i.firstChild)}}else if(t instanceof e){for(r=0;r<t.length;r++){this[n].appendChild(t[r])}}else{this[n].appendChild(t)}}return this},prepend:function(t){var n,r;for(n=0;n<this.length;n++){if(typeof t==="string"){var i=document.createElement("div");i.innerHTML=t;for(r=i.childNodes.length-1;r>=0;r--){this[n].insertBefore(i.childNodes[r],this[n].childNodes[0])}}else if(t instanceof e){for(r=0;r<t.length;r++){this[n].insertBefore(t[r],this[n].childNodes[0])}}else{this[n].insertBefore(t,this[n].childNodes[0])}}return this},insertBefore:function(e){var n=t(e);for(var r=0;r<this.length;r++){if(n.length===1){n[0].parentNode.insertBefore(this[r],n[0])}else if(n.length>1){for(var i=0;i<n.length;i++){n[i].parentNode.insertBefore(this[r].cloneNode(true),n[i])}}}},insertAfter:function(e){var n=t(e);for(var r=0;r<this.length;r++){if(n.length===1){n[0].parentNode.insertBefore(this[r],n[0].nextSibling)}else if(n.length>1){for(var i=0;i<n.length;i++){n[i].parentNode.insertBefore(this[r].cloneNode(true),n[i].nextSibling)}}}},next:function(n){if(this.length>0){if(n){if(this[0].nextElementSibling&&t(this[0].nextElementSibling).is(n))return new e([this[0].nextElementSibling]);else return new e([])}else{if(this[0].nextElementSibling)return new e([this[0].nextElementSibling]);else return new e([])}}else return new e([])},nextAll:function(n){var r=[];var i=this[0];if(!i)return new e([]);while(i.nextElementSibling){var a=i.nextElementSibling;if(n){if(t(a).is(n))r.push(a)}else r.push(a);i=a}return new e(r)},prev:function(n){if(this.length>0){if(n){if(this[0].previousElementSibling&&t(this[0].previousElementSibling).is(n))return new e([this[0].previousElementSibling]);else return new e([])}else{if(this[0].previousElementSibling)return new e([this[0].previousElementSibling]);else return new e([])}}else return new e([])},prevAll:function(n){var r=[];var i=this[0];if(!i)return new e([]);while(i.previousElementSibling){var a=i.previousElementSibling;if(n){if(t(a).is(n))r.push(a)}else r.push(a);i=a}return new e(r)},parent:function(e){var n=[];for(var r=0;r<this.length;r++){if(e){if(t(this[r].parentNode).is(e))n.push(this[r].parentNode)}else{n.push(this[r].parentNode)}}return t(t.unique(n))},parents:function(e){var n=[];for(var r=0;r<this.length;r++){var i=this[r].parentNode;while(i){if(e){if(t(i).is(e))n.push(i)}else{n.push(i)}i=i.parentNode}}return t(t.unique(n))},find:function(t){var n=[];for(var r=0;r<this.length;r++){var i=this[r].querySelectorAll(t);for(var a=0;a<i.length;a++){n.push(i[a])}}return new e(n)},children:function(n){var r=[];for(var i=0;i<this.length;i++){var a=this[i].childNodes;for(var s=0;s<a.length;s++){if(!n){if(a[s].nodeType===1)r.push(a[s])}else{if(a[s].nodeType===1&&t(a[s]).is(n))r.push(a[s])}}}return new e(t.unique(r))},remove:function(){for(var e=0;e<this.length;e++){if(this[e].parentNode)this[e].parentNode.removeChild(this[e])}return this},add:function(){var e=this;var n,r;for(n=0;n<arguments.length;n++){var i=t(arguments[n]);for(r=0;r<i.length;r++){e[e.length]=i[r];e.length++}}return e}};t.fn=e.prototype;t.unique=function(e){var t=[];for(var n=0;n<e.length;n++){if(t.indexOf(e[n])===-1)t.push(e[n])}return t};return t}();var n=["jQuery","Zepto","Dom7"];function r(t){t.fn.swiper=function(n){var r;t(this).each(function(){var t=new e(this,n);if(!r)r=t});return r}}for(var i=0;i<n.length;i++){if(window[n[i]]){r(window[n[i]])}}var a;if(typeof t==="undefined"){a=window.Dom7||window.Zepto||window.jQuery}else{a=t}if(a){if(!("transitionEnd"in a.fn)){a.fn.transitionEnd=function(e){var t=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],n,r,i=this;function a(r){if(r.target!==this)return;e.call(this,r);for(n=0;n<t.length;n++){i.off(t[n],a)}}if(e){for(n=0;n<t.length;n++){i.on(t[n],a)}}return this}}if(!("transform"in a.fn)){a.fn.transform=function(e){for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=e}return this}}if(!("transition"in a.fn)){a.fn.transition=function(e){if(typeof e!=="string"){e=e+"ms"}for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=e}return this}}}window.Swiper=e})();if(true){e.exports=window.Swiper}else if(typeof define==="function"&&define.amd){define([],function(){"use strict";return window.Swiper})}},function(e,t){var n=function(e){var t,n;e=e||document.querySelector(e);if(!e)return;e.addEventListener("touchstart",function(r){t=r.touches[0].pageY;n=e.scrollTop;if(n<=0)e.scrollTop=1;if(n+e.offsetHeight>=e.scrollHeight)e.scrollTop=e.scrollHeight-e.offsetHeight-1},false)};e.exports=n},function(e,t){!function(e){var t=function(t){this.origHtmlMargin=parseFloat(e("html").css("margin-top"));this.options=e.extend({},e.smartbanner.defaults,t);var n=navigator.standalone,r=navigator.userAgent;if(this.options.force){this.type=this.options.force}else if(r.match(/iPhone|iPod/i)!=null||r.match(/iPad/)&&this.options.iOSUniversalApp){if(r.match(/Safari/i)!=null&&(r.match(/CriOS/i)!=null||window.Number(r.substr(r.indexOf("OS ")+3,3).replace("_","."))<6))this.type="ios"}else if(r.match(/\bSilk\/(.*\bMobile Safari\b)?/)||r.match(/\bKF\w/)||r.match("Kindle Fire")){this.type="kindle"}else if(r.match(/Android/i)!=null){this.type="android"}else if(r.match(/Windows NT 6.2/i)!=null&&r.match(/Touch/i)!==null){this.type="windows"}if(!this.type||n||this.getCookie("sb-closed")||this.getCookie("sb-installed")){return}this.scale=this.options.scale=="auto"?e(window).width()/window.screen.width:this.options.scale;if(this.scale<1)this.scale=1;var i=e(this.type=="android"?'meta[name="google-play-app"]':this.type=="ios"?'meta[name="apple-itunes-app"]':this.type=="kindle"?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]');if(i.length==0)return;if(this.type=="windows"){this.pfn=e('meta[name="msApplication-PackageFamilyName"]').attr("content");this.appId=i.attr("content")[1]}else{this.appId=/app-id=([^\s,]+)/.exec(i.attr("content"))[1]}this.title=this.options.title?this.options.title:i.data("title")||e("title").text().replace(/\s*[|\-].*$/,"");this.author=this.options.author?this.options.author:i.data("author")||(e('meta[name="author"]').length?e('meta[name="author"]').attr("content"):window.location.hostname);this.iconUrl=i.data("icon-url");this.price=i.data("price");this.create();this.show();this.listen()};t.prototype={constructor:t,create:function(){var t,n=this.options.url?this.options.url:(this.type=="windows"?"ms-windows-store:PDP?PFN="+this.pfn:this.type=="android"?"market://details?id=":this.type=="kindle"?"amzn://apps/android?asin=":"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id")+this.appId,r=this.price||this.options.price,i=r?r+" - "+(this.type=="android"?this.options.inGooglePlay:this.type=="kindle"?this.options.inAmazonAppStore:this.type=="ios"?this.options.inAppStore:this.options.inWindowsStore):"",a=this.options.iconGloss===null?this.type=="ios":this.options.iconGloss;if(this.options.url)n=this.options.url;else{if(this.type=="android"){n="market://details?id="+this.appId;if(this.options.GooglePlayParams)n=n+"&referrer="+this.options.GooglePlayParams}else n="https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id"+this.appId}var s='<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+i+'</span></div><a href="'+n+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>";e(this.options.appendToSelector).prepend(s);if(this.options.icon){t=this.options.icon}else if(this.iconUrl){t=this.iconUrl}else if(e('link[rel="apple-touch-icon-precomposed"]').length>0){t=e('link[rel="apple-touch-icon-precomposed"]').attr("href");if(this.options.iconGloss===null)a=false}else if(e('link[rel="apple-touch-icon"]').length>0){t=e('link[rel="apple-touch-icon"]').attr("href")}else if(e('meta[name="msApplication-TileImage"]').length>0){t=e('meta[name="msApplication-TileImage"]').attr("content")}else if(e('meta[name="msapplication-TileImage"]').length>0){t=e('meta[name="msapplication-TileImage"]').attr("content")}if(t){e("#smartbanner .sb-icon").css("background-image","url("+t+")");if(a)e("#smartbanner .sb-icon").addClass("gloss")}else{e("#smartbanner").addClass("no-icon")}this.bannerHeight=e("#smartbanner").height();if(this.scale>1){e("#smartbanner").css("top",parseFloat(e("#smartbanner").css("top"))*this.scale).css("height",parseFloat(e("#smartbanner").css("height"))*this.scale).hide();e("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",e(window).width()/this.scale)}e("#smartbanner").css("position",this.options.layer?"absolute":"static")},listen:function(){e("#smartbanner .sb-close").on("click",e.proxy(this.close,this));e("#smartbanner .sb-button").on("click",e.proxy(this.install,this))},show:function(t){var n=e("#smartbanner");if(this.options.layer){n.animate({top:0,display:"block"},this.options.speedIn).addClass("shown").show();e("#nomad").animate({top:this.origHtmlMargin+this.bannerHeight*this.scale},this.options.speedIn,"swing",t)}else{if(e.support.transition){n.animate({top:0},this.options.speedIn).addClass("shown");var r=function(){e("html").removeClass("sb-animation");if(t){t()}};e("html").addClass("sb-animation").one(e.support.transition.end,r).emulateTransitionEnd(this.options.speedIn).css("margin-top",this.origHtmlMargin+this.bannerHeight*this.scale)}else{n.slideDown(this.options.speedIn).addClass("shown")}}},hide:function(t){var n=e("#smartbanner");if(this.options.layer){n.animate({top:-1*this.bannerHeight*this.scale,display:"block"},this.options.speedIn).removeClass("shown");e("#nomad").animate({top:this.origHtmlMargin},this.options.speedIn,"swing",t)}else{if(e.support.transition){n.css("top",-1*this.bannerHeight*this.scale).removeClass("shown");var r=function(){e("html").removeClass("sb-animation");if(t){t()}};e("html").addClass("sb-animation").one(e.support.transition.end,r).emulateTransitionEnd(this.options.speedOut).css("margin-top",this.origHtmlMargin)}else{n.slideUp(this.options.speedOut).removeClass("shown")}}},close:function(e){e.preventDefault();this.hide();this.setCookie("sb-closed","true",this.options.daysHidden)},install:function(e){if(this.options.hideOnInstall){this.hide()}this.setCookie("sb-installed","true",this.options.daysReminder)},setCookie:function(e,t,n){var r=new Date;r.setDate(r.getDate()+n);t=encodeURI(t)+(n==null?"":"; expires="+r.toUTCString());document.cookie=e+"="+t+"; path=/;"},getCookie:function(e){var t,n,r,i=document.cookie.split(";");for(t=0;t<i.length;t++){n=i[t].substr(0,i[t].indexOf("="));r=i[t].substr(i[t].indexOf("=")+1);n=n.replace(/^\s+|\s+$/g,"");if(n==e){return decodeURI(r)}}return null},switchType:function(){var t=this;this.hide(function(){t.type=t.type=="android"?"ios":"android";var n=e(t.type=="android"?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");t.appId=/app-id=([^\s,]+)/.exec(n)[1];e("#smartbanner").detach();t.create();t.show()})}};e.smartbanner=function(n){var r=e(window),i=r.data("smartbanner"),a=typeof n=="object"&&n;if(!i)r.data("smartbanner",i=new t(a));if(typeof n=="string")i[n]()};e.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:"In Google Play",inAmazonAppStore:"In the Amazon Appstore",inWindowsStore:"In the Windows Store",GooglePlayParams:null,icon:null,iconGloss:null,button:"VIEW",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:true,layer:false,iOSUniversalApp:true,appendToSelector:"body"};e.smartbanner.Constructor=t;function n(){var e=document.createElement("smartbanner");var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t){if(e.style[n]!==undefined){return{end:t[n]}}}return false}if(e.support.transition!==undefined)return;e.fn.emulateTransitionEnd=function(t){var n=false,r=this;e(this).one(e.support.transition.end,function(){n=true});var i=function(){if(!n)e(r).trigger(e.support.transition.end)};setTimeout(i,t);return this};e(function(){e.support.transition=n()})}(window.Zepto)},function(e,t,n){var r=n(179);if(typeof r==="string")r=[[e.id,r,""]];var i=n(181)(r,{});if(r.locals)e.exports=r.locals;if(false){if(!r.locals){e.hot.accept("!!./../../node_modules/css-loader/index.js!./smartbanner.css",function(){var t=require("!!./../../node_modules/css-loader/index.js!./smartbanner.css");if(typeof t==="string")t=[[e.id,t,""]];i(t)})}e.hot.dispose(function(){i()})}},function(e,t,n){t=e.exports=n(180)();t.push([e.id,"#smartbanner { position:absolute; left:0; top:-82px; border-bottom:1px solid #e8e8e8; width:100%; height:78px; font-family:'Helvetica Neue',sans-serif; background:-webkit-linear-gradient(top, #f4f4f4 0%,#cdcdcd 100%); background-image: -ms-linear-gradient(top, #F4F4F4 0%, #CDCDCD 100%); background-image: -moz-linear-gradient(top, #F4F4F4 0%, #CDCDCD 100%); box-shadow:0 1px 2px rgba(0,0,0,0.5); z-index:9998; -webkit-font-smoothing:antialiased; overflow:hidden; -webkit-text-size-adjust:none; }\n#smartbanner, html.sb-animation {-webkit-transition: all .3s ease;}\n#smartbanner .sb-container { margin: 0 auto; }\n#smartbanner .sb-close { position:absolute; left:5px; top:5px; display:block; border:2px solid #fff; width:14px; height:14px; font-family:'ArialRoundedMTBold',Arial; font-size:15px; line-height:15px; text-align:center; color:#fff; background:#070707; text-decoration:none; text-shadow:none; border-radius:14px; box-shadow:0 2px 3px rgba(0,0,0,0.4); -webkit-font-smoothing:subpixel-antialiased; }\n#smartbanner .sb-close:active { font-size:13px; color:#aaa; }\n#smartbanner .sb-icon { position:absolute; left:30px; top:10px; display:block; width:57px; height:57px; background:rgba(0,0,0,0.6); background-size:cover; border-radius:10px; box-shadow:0 1px 3px rgba(0,0,0,0.3); }\n#smartbanner.no-icon .sb-icon { display:none; }\n#smartbanner .sb-info { position:absolute; left:98px; top:18px; width:44%; font-size:11px; line-height:1.2em; font-weight:bold; color:#6a6a6a; text-shadow:0 1px 0 rgba(255,255,255,0.8); }\n#smartbanner #smartbanner.no-icon .sb-info { left:34px; }\n#smartbanner .sb-info strong { display:block; font-size:13px; color:#4d4d4d; line-height: 18px; }\n#smartbanner .sb-info > span { display:block; }\n#smartbanner .sb-info em { font-style:normal; text-transform:uppercase; }\n#smartbanner .sb-button { position:absolute; right:20px; top:24px; border:1px solid #bfbfbf; padding: 0 10px; min-width: 10%; height:24px; font-size:14px; line-height:24px; text-align:center; font-weight:bold; color:#6a6a6a; background:-webkit-linear-gradient(top, #efefef 0%,#dcdcdc 100%); text-transform:uppercase; text-decoration:none; text-shadow:0 1px 0 rgba(255,255,255,0.8); border-radius:3px; box-shadow:0 1px 0 rgba(255,255,255,0.6),0 1px 0 rgba(255,255,255,0.7) inset; }\n#smartbanner .sb-button:active, #smartbanner .sb-button:hover { background:-webkit-linear-gradient(top, #dcdcdc 0%,#efefef 100%); }\n\n#smartbanner .sb-icon.gloss:after { content:''; position:absolute; left:0; top:-1px; border-top:1px solid rgba(255,255,255,0.8); width:100%; height:50%; background:-webkit-linear-gradient(top, rgba(255,255,255,0.7) 0%,rgba(255,255,255,0.2) 100%); border-radius:10px 10px 12px 12px; }\n\n#smartbanner.android { border-color:#212228; background-color: #3D3D3D; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAYAAABWKLW/AAAAG0lEQVQIW2MMDQ39v3r1akYGIAATMAEwByYAANRhCgK+E5vTAAAAAElFTkSuQmCC); border-top: 5px solid #88B131; box-shadow: none; }\n#smartbanner.android .sb-close { border:0; width:17px; height:17px; line-height:17px; color:#b1b1b3; background:#1c1e21; text-shadow:0 1px 1px #000; box-shadow:0 1px 2px rgba(0,0,0,0.8) inset,0 1px 1px rgba(255,255,255,0.3); }\n#smartbanner.android .sb-close:active { color:#eee; }\n#smartbanner.android .sb-info { color:#ccc; text-shadow:0 1px 2px #000; }\n#smartbanner.android .sb-info strong { color:#fff; }\n#smartbanner.android .sb-button { min-width: 12%; border:1px solid #DDDCDC; padding:1px; color:#d1d1d1; background: none; border-radius: 0; box-shadow: none; }\n#smartbanner.android .sb-button span { text-align: center; display: block; padding: 0 10px; background-color: #42B6C9; background-image: -webkit-gradient(linear,0 0,0 100%,from(#42B6C9),to(#39A9BB)); background-image: -moz-linear-gradient(top,#42B6C9,#39A9BB); text-transform:none; text-shadow:none; box-shadow:none; }\n#smartbanner.android .sb-button:active, #smartbanner.android .sb-button:hover { background: none; }\n#smartbanner.android .sb-button:active span, #smartbanner.android .sb-button:hover span { background:#2AC7E1; }\n\n#smartbanner.windows .sb-icon { border-radius: 0px; }",""])},function(e,t){e.exports=function(){var e=[];e.toString=function t(){var e=[];for(var t=0;t<this.length;t++){var n=this[t];if(n[2]){e.push("@media "+n[2]+"{"+n[1]+"}")}else{e.push(n[1])}}return e.join("")};e.i=function(t,n){if(typeof t==="string")t=[[null,t,""]];var r={};for(var i=0;i<this.length;i++){var a=this[i][0];if(typeof a==="number")r[a]=true}for(i=0;i<t.length;i++){var s=t[i];if(typeof s[0]!=="number"||!r[s[0]]){if(n&&!s[2]){s[2]=n}else if(n){s[2]="("+s[2]+") and ("+n+")"}e.push(s)}}};return e}},function(e,t,n){var r={},i=function(e){var t;return function(){if(typeof t==="undefined")t=e.apply(this,arguments);return t}},a=i(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),s=i(function(){return document.head||document.getElementsByTagName("head")[0]}),o=null,l=0,u=[];e.exports=function(e,t){if(false){if(typeof document!=="object")throw new Error("The style-loader cannot be used in a non-browser environment")}t=t||{};if(typeof t.singleton==="undefined")t.singleton=a();if(typeof t.insertAt==="undefined")t.insertAt="bottom";var n=f(e);c(n,t);return function i(e){var i=[];for(var a=0;a<n.length;a++){var s=n[a];var o=r[s.id];o.refs--;i.push(o)}if(e){var l=f(e);c(l,t)}for(var a=0;a<i.length;a++){var o=i[a];if(o.refs===0){for(var u=0;u<o.parts.length;u++)o.parts[u]();delete r[o.id]}}}};function c(e,t){for(var n=0;n<e.length;n++){var i=e[n];var a=r[i.id];if(a){a.refs++;for(var s=0;s<a.parts.length;s++){a.parts[s](i.parts[s])}for(;s<i.parts.length;s++){a.parts.push(g(i.parts[s],t))}}else{var o=[];for(var s=0;s<i.parts.length;s++){o.push(g(i.parts[s],t))}r[i.id]={id:i.id,refs:1,parts:o}}}}function f(e){var t=[];var n={};for(var r=0;r<e.length;r++){var i=e[r];var a=i[0];var s=i[1];var o=i[2];var l=i[3];var u={css:s,media:o,sourceMap:l};if(!n[a])t.push(n[a]={id:a,parts:[u]});else n[a].parts.push(u)}return t}function d(e,t){var n=s();var r=u[u.length-1];if(e.insertAt==="top"){if(!r){n.insertBefore(t,n.firstChild)}else if(r.nextSibling){n.insertBefore(t,r.nextSibling)}else{n.appendChild(t)}u.push(t)}else if(e.insertAt==="bottom"){n.appendChild(t)}else{throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.")}}function h(e){e.parentNode.removeChild(e);var t=u.indexOf(e);if(t>=0){u.splice(t,1)}}function p(e){var t=document.createElement("style");t.type="text/css";d(e,t);return t}function m(e){var t=document.createElement("link");t.rel="stylesheet";d(e,t);return t}function g(e,t){var n,r,i;if(t.singleton){var a=l++;n=o||(o=p(t));r=v.bind(null,n,a,false);i=v.bind(null,n,a,true)}else if(e.sourceMap&&typeof URL==="function"&&typeof URL.createObjectURL==="function"&&typeof URL.revokeObjectURL==="function"&&typeof Blob==="function"&&typeof btoa==="function"){n=m(t);r=b.bind(null,n);i=function(){h(n);if(n.href)URL.revokeObjectURL(n.href)}}else{n=p(t);r=y.bind(null,n);i=function(){h(n)}}r(e);return function s(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else{i()}}}var _=function(){var e=[];return function(t,n){e[t]=n;return e.filter(Boolean).join("\n")}}();function v(e,t,n,r){var i=n?"":r.css;if(e.styleSheet){e.styleSheet.cssText=_(t,i)}else{var a=document.createTextNode(i);var s=e.childNodes;if(s[t])e.removeChild(s[t]);if(s.length){e.insertBefore(a,s[t])}else{e.appendChild(a)}}}function y(e,t){var n=t.css;var r=t.media;var i=t.sourceMap;if(r){e.setAttribute("media",r)}if(e.styleSheet){e.styleSheet.cssText=n}else{while(e.firstChild){e.removeChild(e.firstChild)}e.appendChild(document.createTextNode(n))}}function b(e,t){var n=t.css;var r=t.media;var i=t.sourceMap;if(i){n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"}var a=new Blob([n],{type:"text/css"});var s=e.href;e.href=URL.createObjectURL(a);if(s)URL.revokeObjectURL(s)}},function(e,t,n){n(54)(n(183))},function(e,t){e.exports="//     Backbone.js 1.2.3\n\n//     (c) 2010-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n(function(factory) {\n\n  // Establish the root object, `window` (`self`) in the browser, or `global` on the server.\n  // We use `self` instead of `window` for `WebWorker` support.\n  var root = (typeof self == 'object' && self.self == self && self) ||\n            (typeof global == 'object' && global.global == global && global);\n\n  // Set up Backbone appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Backbone.\n      root.Backbone = factory(root, exports, _, $);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var _ = require('underscore'), $;\n    try { $ = require('jquery'); } catch(e) {}\n    factory(root, exports, _, $);\n\n  // Finally, as a browser global.\n  } else {\n    root.Backbone = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));\n  }\n\n}(function(root, Backbone, _, $) {\n\n  // Initial Setup\n  // -------------\n\n  // Save the previous value of the `Backbone` variable, so that it can be\n  // restored later on, if `noConflict` is used.\n  var previousBackbone = root.Backbone;\n\n  // Create a local reference to a common array method we'll want to use later.\n  var slice = Array.prototype.slice;\n\n  // Current version of the library. Keep in sync with `package.json`.\n  Backbone.VERSION = '1.2.3';\n\n  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\n  // the `$` variable.\n  Backbone.$ = $;\n\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\n  // to its previous owner. Returns a reference to this Backbone object.\n  Backbone.noConflict = function() {\n    root.Backbone = previousBackbone;\n    return this;\n  };\n\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n  // will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n  // set a `X-Http-Method-Override` header.\n  Backbone.emulateHTTP = false;\n\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\n  // `application/json` requests ... this will encode the body as\n  // `application/x-www-form-urlencoded` instead and will send the model in a\n  // form param named `model`.\n  Backbone.emulateJSON = false;\n\n  // Proxy Backbone class methods to Underscore functions, wrapping the model's\n  // `attributes` object or collection's `models` array behind the scenes.\n  //\n  // collection.filter(function(model) { return model.get('age') > 10 });\n  // collection.each(this.addView);\n  //\n  // `Function#apply` can be slow so we use the method's arg count, if we know it.\n  var addMethod = function(length, method, attribute) {\n    switch (length) {\n      case 1: return function() {\n        return _[method](this[attribute]);\n      };\n      case 2: return function(value) {\n        return _[method](this[attribute], value);\n      };\n      case 3: return function(iteratee, context) {\n        return _[method](this[attribute], cb(iteratee, this), context);\n      };\n      case 4: return function(iteratee, defaultVal, context) {\n        return _[method](this[attribute], cb(iteratee, this), defaultVal, context);\n      };\n      default: return function() {\n        var args = slice.call(arguments);\n        args.unshift(this[attribute]);\n        return _[method].apply(_, args);\n      };\n    }\n  };\n  var addUnderscoreMethods = function(Class, methods, attribute) {\n    _.each(methods, function(length, method) {\n      if (_[method]) Class.prototype[method] = addMethod(length, method, attribute);\n    });\n  };\n\n  // Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.\n  var cb = function(iteratee, instance) {\n    if (_.isFunction(iteratee)) return iteratee;\n    if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);\n    if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };\n    return iteratee;\n  };\n  var modelMatcher = function(attrs) {\n    var matcher = _.matches(attrs);\n    return function(model) {\n      return matcher(model.attributes);\n    };\n  };\n\n  // Backbone.Events\n  // ---------------\n\n  // A module that can be mixed in to *any object* in order to provide it with\n  // a custom event channel. You may bind a callback to an event with `on` or\n  // remove with `off`; `trigger`-ing an event fires all callbacks in\n  // succession.\n  //\n  //     var object = {};\n  //     _.extend(object, Backbone.Events);\n  //     object.on('expand', function(){ alert('expanded'); });\n  //     object.trigger('expand');\n  //\n  var Events = Backbone.Events = {};\n\n  // Regular expression used to split event strings.\n  var eventSplitter = /\\s+/;\n\n  // Iterates over the standard `event, callback` (as well as the fancy multiple\n  // space-separated events `\"change blur\", callback` and jQuery-style event\n  // maps `{event: callback}`).\n  var eventsApi = function(iteratee, events, name, callback, opts) {\n    var i = 0, names;\n    if (name && typeof name === 'object') {\n      // Handle event maps.\n      if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;\n      for (names = _.keys(name); i < names.length ; i++) {\n        events = eventsApi(iteratee, events, names[i], name[names[i]], opts);\n      }\n    } else if (name && eventSplitter.test(name)) {\n      // Handle space separated event names by delegating them individually.\n      for (names = name.split(eventSplitter); i < names.length; i++) {\n        events = iteratee(events, names[i], callback, opts);\n      }\n    } else {\n      // Finally, standard events.\n      events = iteratee(events, name, callback, opts);\n    }\n    return events;\n  };\n\n  // Bind an event to a `callback` function. Passing `\"all\"` will bind\n  // the callback to all events fired.\n  Events.on = function(name, callback, context) {\n    return internalOn(this, name, callback, context);\n  };\n\n  // Guard the `listening` argument from the public API.\n  var internalOn = function(obj, name, callback, context, listening) {\n    obj._events = eventsApi(onApi, obj._events || {}, name, callback, {\n        context: context,\n        ctx: obj,\n        listening: listening\n    });\n\n    if (listening) {\n      var listeners = obj._listeners || (obj._listeners = {});\n      listeners[listening.id] = listening;\n    }\n\n    return obj;\n  };\n\n  // Inversion-of-control versions of `on`. Tell *this* object to listen to\n  // an event in another object... keeping track of what it's listening to\n  // for easier unbinding later.\n  Events.listenTo =  function(obj, name, callback) {\n    if (!obj) return this;\n    var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\n    var listeningTo = this._listeningTo || (this._listeningTo = {});\n    var listening = listeningTo[id];\n\n    // This object is not listening to any other events on `obj` yet.\n    // Setup the necessary references to track the listening callbacks.\n    if (!listening) {\n      var thisId = this._listenId || (this._listenId = _.uniqueId('l'));\n      listening = listeningTo[id] = {obj: obj, objId: id, id: thisId, listeningTo: listeningTo, count: 0};\n    }\n\n    // Bind callbacks on obj, and keep track of them on listening.\n    internalOn(obj, name, callback, this, listening);\n    return this;\n  };\n\n  // The reducing API that adds a callback to the `events` object.\n  var onApi = function(events, name, callback, options) {\n    if (callback) {\n      var handlers = events[name] || (events[name] = []);\n      var context = options.context, ctx = options.ctx, listening = options.listening;\n      if (listening) listening.count++;\n\n      handlers.push({ callback: callback, context: context, ctx: context || ctx, listening: listening });\n    }\n    return events;\n  };\n\n  // Remove one or many callbacks. If `context` is null, removes all\n  // callbacks with that function. If `callback` is null, removes all\n  // callbacks for the event. If `name` is null, removes all bound\n  // callbacks for all events.\n  Events.off =  function(name, callback, context) {\n    if (!this._events) return this;\n    this._events = eventsApi(offApi, this._events, name, callback, {\n        context: context,\n        listeners: this._listeners\n    });\n    return this;\n  };\n\n  // Tell this object to stop listening to either specific events ... or\n  // to every object it's currently listening to.\n  Events.stopListening =  function(obj, name, callback) {\n    var listeningTo = this._listeningTo;\n    if (!listeningTo) return this;\n\n    var ids = obj ? [obj._listenId] : _.keys(listeningTo);\n\n    for (var i = 0; i < ids.length; i++) {\n      var listening = listeningTo[ids[i]];\n\n      // If listening doesn't exist, this object is not currently\n      // listening to obj. Break out early.\n      if (!listening) break;\n\n      listening.obj.off(name, callback, this);\n    }\n    if (_.isEmpty(listeningTo)) this._listeningTo = void 0;\n\n    return this;\n  };\n\n  // The reducing API that removes a callback from the `events` object.\n  var offApi = function(events, name, callback, options) {\n    if (!events) return;\n\n    var i = 0, listening;\n    var context = options.context, listeners = options.listeners;\n\n    // Delete all events listeners and \"drop\" events.\n    if (!name && !callback && !context) {\n      var ids = _.keys(listeners);\n      for (; i < ids.length; i++) {\n        listening = listeners[ids[i]];\n        delete listeners[listening.id];\n        delete listening.listeningTo[listening.objId];\n      }\n      return;\n    }\n\n    var names = name ? [name] : _.keys(events);\n    for (; i < names.length; i++) {\n      name = names[i];\n      var handlers = events[name];\n\n      // Bail out if there are no events stored.\n      if (!handlers) break;\n\n      // Replace events if there are any remaining.  Otherwise, clean up.\n      var remaining = [];\n      for (var j = 0; j < handlers.length; j++) {\n        var handler = handlers[j];\n        if (\n          callback && callback !== handler.callback &&\n            callback !== handler.callback._callback ||\n              context && context !== handler.context\n        ) {\n          remaining.push(handler);\n        } else {\n          listening = handler.listening;\n          if (listening && --listening.count === 0) {\n            delete listeners[listening.id];\n            delete listening.listeningTo[listening.objId];\n          }\n        }\n      }\n\n      // Update tail event if the list has any events.  Otherwise, clean up.\n      if (remaining.length) {\n        events[name] = remaining;\n      } else {\n        delete events[name];\n      }\n    }\n    if (_.size(events)) return events;\n  };\n\n  // Bind an event to only be triggered a single time. After the first time\n  // the callback is invoked, its listener will be removed. If multiple events\n  // are passed in using the space-separated syntax, the handler will fire\n  // once for each event, not once for a combination of all events.\n  Events.once =  function(name, callback, context) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.off, this));\n    return this.on(events, void 0, context);\n  };\n\n  // Inversion-of-control versions of `once`.\n  Events.listenToOnce =  function(obj, name, callback) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.stopListening, this, obj));\n    return this.listenTo(obj, events);\n  };\n\n  // Reduces the event callbacks into a map of `{event: onceWrapper}`.\n  // `offer` unbinds the `onceWrapper` after it has been called.\n  var onceMap = function(map, name, callback, offer) {\n    if (callback) {\n      var once = map[name] = _.once(function() {\n        offer(name, once);\n        callback.apply(this, arguments);\n      });\n      once._callback = callback;\n    }\n    return map;\n  };\n\n  // Trigger one or many events, firing all bound callbacks. Callbacks are\n  // passed the same arguments as `trigger` is, apart from the event name\n  // (unless you're listening on `\"all\"`, which will cause your callback to\n  // receive the true name of the event as the first argument).\n  Events.trigger =  function(name) {\n    if (!this._events) return this;\n\n    var length = Math.max(0, arguments.length - 1);\n    var args = Array(length);\n    for (var i = 0; i < length; i++) args[i] = arguments[i + 1];\n\n    eventsApi(triggerApi, this._events, name, void 0, args);\n    return this;\n  };\n\n  // Handles triggering the appropriate event callbacks.\n  var triggerApi = function(objEvents, name, cb, args) {\n    if (objEvents) {\n      var events = objEvents[name];\n      var allEvents = objEvents.all;\n      if (events && allEvents) allEvents = allEvents.slice();\n      if (events) triggerEvents(events, args);\n      if (allEvents) triggerEvents(allEvents, [name].concat(args));\n    }\n    return objEvents;\n  };\n\n  // A difficult-to-believe, but optimized internal dispatch function for\n  // triggering events. Tries to keep the usual cases speedy (most internal\n  // Backbone events have 3 arguments).\n  var triggerEvents = function(events, args) {\n    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\n    switch (args.length) {\n      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\n      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\n      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\n      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\n      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\n    }\n  };\n\n  // Aliases for backwards compatibility.\n  Events.bind   = Events.on;\n  Events.unbind = Events.off;\n\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\n  // want global \"pubsub\" in a convenient place.\n  _.extend(Backbone, Events);\n\n  // Backbone.Model\n  // --------------\n\n  // Backbone **Models** are the basic data object in the framework --\n  // frequently representing a row in a table in a database on your server.\n  // A discrete chunk of data and a bunch of useful, related methods for\n  // performing computations and transformations on that data.\n\n  // Create a new model with the specified attributes. A client id (`cid`)\n  // is automatically generated and assigned for you.\n  var Model = Backbone.Model = function(attributes, options) {\n    var attrs = attributes || {};\n    options || (options = {});\n    this.cid = _.uniqueId(this.cidPrefix);\n    this.attributes = {};\n    if (options.collection) this.collection = options.collection;\n    if (options.parse) attrs = this.parse(attrs, options) || {};\n    attrs = _.defaults({}, attrs, _.result(this, 'defaults'));\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.apply(this, arguments);\n  };\n\n  // Attach all inheritable methods to the Model prototype.\n  _.extend(Model.prototype, Events, {\n\n    // A hash of attributes whose current and previous value differ.\n    changed: null,\n\n    // The value returned during the last failed validation.\n    validationError: null,\n\n    // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n    // CouchDB users may want to set this to `\"_id\"`.\n    idAttribute: 'id',\n\n    // The prefix is used to create the client id which is used to identify models locally.\n    // You may want to override this if you're experiencing name clashes with model ids.\n    cidPrefix: 'c',\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Return a copy of the model's `attributes` object.\n    toJSON: function(options) {\n      return _.clone(this.attributes);\n    },\n\n    // Proxy `Backbone.sync` by default -- but override this if you need\n    // custom syncing semantics for *this* particular model.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Get the value of an attribute.\n    get: function(attr) {\n      return this.attributes[attr];\n    },\n\n    // Get the HTML-escaped value of an attribute.\n    escape: function(attr) {\n      return _.escape(this.get(attr));\n    },\n\n    // Returns `true` if the attribute contains a value that is not null\n    // or undefined.\n    has: function(attr) {\n      return this.get(attr) != null;\n    },\n\n    // Special-cased proxy to underscore's `_.matches` method.\n    matches: function(attrs) {\n      return !!_.iteratee(attrs, this)(this.attributes);\n    },\n\n    // Set a hash of model attributes on the object, firing `\"change\"`. This is\n    // the core primitive operation of a model, updating the data and notifying\n    // anyone who needs to know about the change in state. The heart of the beast.\n    set: function(key, val, options) {\n      if (key == null) return this;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options || (options = {});\n\n      // Run validation.\n      if (!this._validate(attrs, options)) return false;\n\n      // Extract attributes and options.\n      var unset      = options.unset;\n      var silent     = options.silent;\n      var changes    = [];\n      var changing   = this._changing;\n      this._changing = true;\n\n      if (!changing) {\n        this._previousAttributes = _.clone(this.attributes);\n        this.changed = {};\n      }\n\n      var current = this.attributes;\n      var changed = this.changed;\n      var prev    = this._previousAttributes;\n\n      // For each `set` attribute, update or delete the current value.\n      for (var attr in attrs) {\n        val = attrs[attr];\n        if (!_.isEqual(current[attr], val)) changes.push(attr);\n        if (!_.isEqual(prev[attr], val)) {\n          changed[attr] = val;\n        } else {\n          delete changed[attr];\n        }\n        unset ? delete current[attr] : current[attr] = val;\n      }\n\n      // Update the `id`.\n      this.id = this.get(this.idAttribute);\n\n      // Trigger all relevant attribute changes.\n      if (!silent) {\n        if (changes.length) this._pending = options;\n        for (var i = 0; i < changes.length; i++) {\n          this.trigger('change:' + changes[i], this, current[changes[i]], options);\n        }\n      }\n\n      // You might be wondering why there's a `while` loop here. Changes can\n      // be recursively nested within `\"change\"` events.\n      if (changing) return this;\n      if (!silent) {\n        while (this._pending) {\n          options = this._pending;\n          this._pending = false;\n          this.trigger('change', this, options);\n        }\n      }\n      this._pending = false;\n      this._changing = false;\n      return this;\n    },\n\n    // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\n    // if the attribute doesn't exist.\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    // Clear all attributes on the model, firing `\"change\"`.\n    clear: function(options) {\n      var attrs = {};\n      for (var key in this.attributes) attrs[key] = void 0;\n      return this.set(attrs, _.extend({}, options, {unset: true}));\n    },\n\n    // Determine if the model has changed since the last `\"change\"` event.\n    // If you specify an attribute name, determine if that attribute has changed.\n    hasChanged: function(attr) {\n      if (attr == null) return !_.isEmpty(this.changed);\n      return _.has(this.changed, attr);\n    },\n\n    // Return an object containing all the attributes that have changed, or\n    // false if there are no changed attributes. Useful for determining what\n    // parts of a view need to be updated and/or what attributes need to be\n    // persisted to the server. Unset attributes will be set to undefined.\n    // You can also pass an attributes object to diff against the model,\n    // determining if there *would be* a change.\n    changedAttributes: function(diff) {\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n      var old = this._changing ? this._previousAttributes : this.attributes;\n      var changed = {};\n      for (var attr in diff) {\n        var val = diff[attr];\n        if (_.isEqual(old[attr], val)) continue;\n        changed[attr] = val;\n      }\n      return _.size(changed) ? changed : false;\n    },\n\n    // Get the previous value of an attribute, recorded at the time the last\n    // `\"change\"` event was fired.\n    previous: function(attr) {\n      if (attr == null || !this._previousAttributes) return null;\n      return this._previousAttributes[attr];\n    },\n\n    // Get all of the attributes of the model at the time of the previous\n    // `\"change\"` event.\n    previousAttributes: function() {\n      return _.clone(this._previousAttributes);\n    },\n\n    // Fetch the model from the server, merging the response with the model's\n    // local attributes. Any changed attributes will trigger a \"change\" event.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (!model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Set a hash of model attributes, and sync the model to the server.\n    // If the server returns an attributes hash that differs, the model's\n    // state will be `set` again.\n    save: function(key, val, options) {\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (key == null || typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options = _.extend({validate: true, parse: true}, options);\n      var wait = options.wait;\n\n      // If we're not waiting and attributes exist, save acts as\n      // `set(attr).save(null, opts)` with validation. Otherwise, check if\n      // the model will be valid when the attributes, if any, are set.\n      if (attrs && !wait) {\n        if (!this.set(attrs, options)) return false;\n      } else {\n        if (!this._validate(attrs, options)) return false;\n      }\n\n      // After a successful server-side save, the client is (optionally)\n      // updated with the server-side state.\n      var model = this;\n      var success = options.success;\n      var attributes = this.attributes;\n      options.success = function(resp) {\n        // Ensure attributes are restored during synchronous saves.\n        model.attributes = attributes;\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);\n        if (serverAttrs && !model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n\n      // Set temporary attributes if `{wait: true}` to properly find new ids.\n      if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);\n\n      var method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');\n      if (method === 'patch' && !options.attrs) options.attrs = attrs;\n      var xhr = this.sync(method, this, options);\n\n      // Restore attributes.\n      this.attributes = attributes;\n\n      return xhr;\n    },\n\n    // Destroy this model on the server if it was already persisted.\n    // Optimistically removes the model from its collection, if it has one.\n    // If `wait: true` is passed, waits for the server to respond before removal.\n    destroy: function(options) {\n      options = options ? _.clone(options) : {};\n      var model = this;\n      var success = options.success;\n      var wait = options.wait;\n\n      var destroy = function() {\n        model.stopListening();\n        model.trigger('destroy', model, model.collection, options);\n      };\n\n      options.success = function(resp) {\n        if (wait) destroy();\n        if (success) success.call(options.context, model, resp, options);\n        if (!model.isNew()) model.trigger('sync', model, resp, options);\n      };\n\n      var xhr = false;\n      if (this.isNew()) {\n        _.defer(options.success);\n      } else {\n        wrapError(this, options);\n        xhr = this.sync('delete', this, options);\n      }\n      if (!wait) destroy();\n      return xhr;\n    },\n\n    // Default URL for the model's representation on the server -- if you're\n    // using Backbone's restful methods, override this to change the endpoint\n    // that will be called.\n    url: function() {\n      var base =\n        _.result(this, 'urlRoot') ||\n        _.result(this.collection, 'url') ||\n        urlError();\n      if (this.isNew()) return base;\n      var id = this.get(this.idAttribute);\n      return base.replace(/[^\\/]$/, '$&/') + encodeURIComponent(id);\n    },\n\n    // **parse** converts a response into the hash of attributes to be `set` on\n    // the model. The default implementation is just to pass the response along.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new model with identical attributes to this one.\n    clone: function() {\n      return new this.constructor(this.attributes);\n    },\n\n    // A model is new if it has never been saved to the server, and lacks an id.\n    isNew: function() {\n      return !this.has(this.idAttribute);\n    },\n\n    // Check if the model is currently in a valid state.\n    isValid: function(options) {\n      return this._validate({}, _.defaults({validate: true}, options));\n    },\n\n    // Run validation against the next complete set of model attributes,\n    // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\n    _validate: function(attrs, options) {\n      if (!options.validate || !this.validate) return true;\n      attrs = _.extend({}, this.attributes, attrs);\n      var error = this.validationError = this.validate(attrs, options) || null;\n      if (!error) return true;\n      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\n      return false;\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Model, mapped to the\n  // number of arguments they take.\n  var modelMethods = { keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,\n      omit: 0, chain: 1, isEmpty: 1 };\n\n  // Mix in each Underscore method as a proxy to `Model#attributes`.\n  addUnderscoreMethods(Model, modelMethods, 'attributes');\n\n  // Backbone.Collection\n  // -------------------\n\n  // If models tend to represent a single row of data, a Backbone Collection is\n  // more analogous to a table full of data ... or a small slice or page of that\n  // table, or a collection of rows that belong together for a particular reason\n  // -- all of the messages in this particular folder, all of the documents\n  // belonging to this particular author, and so on. Collections maintain\n  // indexes of their models, both in order, and for lookup by `id`.\n\n  // Create a new **Collection**, perhaps to contain a specific type of `model`.\n  // If a `comparator` is specified, the Collection will maintain\n  // its models in sort order, as they're added and removed.\n  var Collection = Backbone.Collection = function(models, options) {\n    options || (options = {});\n    if (options.model) this.model = options.model;\n    if (options.comparator !== void 0) this.comparator = options.comparator;\n    this._reset();\n    this.initialize.apply(this, arguments);\n    if (models) this.reset(models, _.extend({silent: true}, options));\n  };\n\n  // Default options for `Collection#set`.\n  var setOptions = {add: true, remove: true, merge: true};\n  var addOptions = {add: true, remove: false};\n\n  // Splices `insert` into `array` at index `at`.\n  var splice = function(array, insert, at) {\n    at = Math.min(Math.max(at, 0), array.length);\n    var tail = Array(array.length - at);\n    var length = insert.length;\n    for (var i = 0; i < tail.length; i++) tail[i] = array[i + at];\n    for (i = 0; i < length; i++) array[i + at] = insert[i];\n    for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];\n  };\n\n  // Define the Collection's inheritable methods.\n  _.extend(Collection.prototype, Events, {\n\n    // The default model for a collection is just a **Backbone.Model**.\n    // This should be overridden in most cases.\n    model: Model,\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // The JSON representation of a Collection is an array of the\n    // models' attributes.\n    toJSON: function(options) {\n      return this.map(function(model) { return model.toJSON(options); });\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Add a model, or list of models to the set. `models` may be Backbone\n    // Models or raw JavaScript objects to be converted to Models, or any\n    // combination of the two.\n    add: function(models, options) {\n      return this.set(models, _.extend({merge: false}, options, addOptions));\n    },\n\n    // Remove a model, or a list of models from the set.\n    remove: function(models, options) {\n      options = _.extend({}, options);\n      var singular = !_.isArray(models);\n      models = singular ? [models] : _.clone(models);\n      var removed = this._removeModels(models, options);\n      if (!options.silent && removed) this.trigger('update', this, options);\n      return singular ? removed[0] : removed;\n    },\n\n    // Update a collection by `set`-ing a new list of models, adding new ones,\n    // removing models that are no longer present, and merging models that\n    // already exist in the collection, as necessary. Similar to **Model#set**,\n    // the core operation for updating the data contained by the collection.\n    set: function(models, options) {\n      if (models == null) return;\n\n      options = _.defaults({}, options, setOptions);\n      if (options.parse && !this._isModel(models)) models = this.parse(models, options);\n\n      var singular = !_.isArray(models);\n      models = singular ? [models] : models.slice();\n\n      var at = options.at;\n      if (at != null) at = +at;\n      if (at < 0) at += this.length + 1;\n\n      var set = [];\n      var toAdd = [];\n      var toRemove = [];\n      var modelMap = {};\n\n      var add = options.add;\n      var merge = options.merge;\n      var remove = options.remove;\n\n      var sort = false;\n      var sortable = this.comparator && (at == null) && options.sort !== false;\n      var sortAttr = _.isString(this.comparator) ? this.comparator : null;\n\n      // Turn bare objects into model references, and prevent invalid models\n      // from being added.\n      var model;\n      for (var i = 0; i < models.length; i++) {\n        model = models[i];\n\n        // If a duplicate is found, prevent it from being added and\n        // optionally merge it into the existing model.\n        var existing = this.get(model);\n        if (existing) {\n          if (merge && model !== existing) {\n            var attrs = this._isModel(model) ? model.attributes : model;\n            if (options.parse) attrs = existing.parse(attrs, options);\n            existing.set(attrs, options);\n            if (sortable && !sort) sort = existing.hasChanged(sortAttr);\n          }\n          if (!modelMap[existing.cid]) {\n            modelMap[existing.cid] = true;\n            set.push(existing);\n          }\n          models[i] = existing;\n\n        // If this is a new, valid model, push it to the `toAdd` list.\n        } else if (add) {\n          model = models[i] = this._prepareModel(model, options);\n          if (model) {\n            toAdd.push(model);\n            this._addReference(model, options);\n            modelMap[model.cid] = true;\n            set.push(model);\n          }\n        }\n      }\n\n      // Remove stale models.\n      if (remove) {\n        for (i = 0; i < this.length; i++) {\n          model = this.models[i];\n          if (!modelMap[model.cid]) toRemove.push(model);\n        }\n        if (toRemove.length) this._removeModels(toRemove, options);\n      }\n\n      // See if sorting is needed, update `length` and splice in new models.\n      var orderChanged = false;\n      var replace = !sortable && add && remove;\n      if (set.length && replace) {\n        orderChanged = this.length != set.length || _.some(this.models, function(model, index) {\n          return model !== set[index];\n        });\n        this.models.length = 0;\n        splice(this.models, set, 0);\n        this.length = this.models.length;\n      } else if (toAdd.length) {\n        if (sortable) sort = true;\n        splice(this.models, toAdd, at == null ? this.length : at);\n        this.length = this.models.length;\n      }\n\n      // Silently sort the collection if appropriate.\n      if (sort) this.sort({silent: true});\n\n      // Unless silenced, it's time to fire all appropriate add/sort events.\n      if (!options.silent) {\n        for (i = 0; i < toAdd.length; i++) {\n          if (at != null) options.index = at + i;\n          model = toAdd[i];\n          model.trigger('add', model, this, options);\n        }\n        if (sort || orderChanged) this.trigger('sort', this, options);\n        if (toAdd.length || toRemove.length) this.trigger('update', this, options);\n      }\n\n      // Return the added (or merged) model (or models).\n      return singular ? models[0] : models;\n    },\n\n    // When you have more items than you want to add or remove individually,\n    // you can reset the entire set with a new list of models, without firing\n    // any granular `add` or `remove` events. Fires `reset` when finished.\n    // Useful for bulk operations and optimizations.\n    reset: function(models, options) {\n      options = options ? _.clone(options) : {};\n      for (var i = 0; i < this.models.length; i++) {\n        this._removeReference(this.models[i], options);\n      }\n      options.previousModels = this.models;\n      this._reset();\n      models = this.add(models, _.extend({silent: true}, options));\n      if (!options.silent) this.trigger('reset', this, options);\n      return models;\n    },\n\n    // Add a model to the end of the collection.\n    push: function(model, options) {\n      return this.add(model, _.extend({at: this.length}, options));\n    },\n\n    // Remove a model from the end of the collection.\n    pop: function(options) {\n      var model = this.at(this.length - 1);\n      return this.remove(model, options);\n    },\n\n    // Add a model to the beginning of the collection.\n    unshift: function(model, options) {\n      return this.add(model, _.extend({at: 0}, options));\n    },\n\n    // Remove a model from the beginning of the collection.\n    shift: function(options) {\n      var model = this.at(0);\n      return this.remove(model, options);\n    },\n\n    // Slice out a sub-array of models from the collection.\n    slice: function() {\n      return slice.apply(this.models, arguments);\n    },\n\n    // Get a model from the set by id.\n    get: function(obj) {\n      if (obj == null) return void 0;\n      var id = this.modelId(this._isModel(obj) ? obj.attributes : obj);\n      return this._byId[obj] || this._byId[id] || this._byId[obj.cid];\n    },\n\n    // Get the model at the given index.\n    at: function(index) {\n      if (index < 0) index += this.length;\n      return this.models[index];\n    },\n\n    // Return models with matching attributes. Useful for simple cases of\n    // `filter`.\n    where: function(attrs, first) {\n      return this[first ? 'find' : 'filter'](attrs);\n    },\n\n    // Return the first model with matching attributes. Useful for simple cases\n    // of `find`.\n    findWhere: function(attrs) {\n      return this.where(attrs, true);\n    },\n\n    // Force the collection to re-sort itself. You don't need to call this under\n    // normal circumstances, as the set will maintain sort order as each item\n    // is added.\n    sort: function(options) {\n      var comparator = this.comparator;\n      if (!comparator) throw new Error('Cannot sort a set without a comparator');\n      options || (options = {});\n\n      var length = comparator.length;\n      if (_.isFunction(comparator)) comparator = _.bind(comparator, this);\n\n      // Run sort based on type of `comparator`.\n      if (length === 1 || _.isString(comparator)) {\n        this.models = this.sortBy(comparator);\n      } else {\n        this.models.sort(comparator);\n      }\n      if (!options.silent) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // Pluck an attribute from each model in the collection.\n    pluck: function(attr) {\n      return _.invoke(this.models, 'get', attr);\n    },\n\n    // Fetch the default set of models for this collection, resetting the\n    // collection when they arrive. If `reset: true` is passed, the response\n    // data will be passed through the `reset` method instead of `set`.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var success = options.success;\n      var collection = this;\n      options.success = function(resp) {\n        var method = options.reset ? 'reset' : 'set';\n        collection[method](resp, options);\n        if (success) success.call(options.context, collection, resp, options);\n        collection.trigger('sync', collection, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Create a new instance of a model in this collection. Add the model to the\n    // collection immediately, unless `wait: true` is passed, in which case we\n    // wait for the server to agree.\n    create: function(model, options) {\n      options = options ? _.clone(options) : {};\n      var wait = options.wait;\n      model = this._prepareModel(model, options);\n      if (!model) return false;\n      if (!wait) this.add(model, options);\n      var collection = this;\n      var success = options.success;\n      options.success = function(model, resp, callbackOpts) {\n        if (wait) collection.add(model, callbackOpts);\n        if (success) success.call(callbackOpts.context, model, resp, callbackOpts);\n      };\n      model.save(null, options);\n      return model;\n    },\n\n    // **parse** converts a response into a list of models to be added to the\n    // collection. The default implementation is just to pass it through.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new collection with an identical list of models as this one.\n    clone: function() {\n      return new this.constructor(this.models, {\n        model: this.model,\n        comparator: this.comparator\n      });\n    },\n\n    // Define how to uniquely identify models in the collection.\n    modelId: function (attrs) {\n      return attrs[this.model.prototype.idAttribute || 'id'];\n    },\n\n    // Private method to reset all internal state. Called when the collection\n    // is first initialized or reset.\n    _reset: function() {\n      this.length = 0;\n      this.models = [];\n      this._byId  = {};\n    },\n\n    // Prepare a hash of attributes (or other model) to be added to this\n    // collection.\n    _prepareModel: function(attrs, options) {\n      if (this._isModel(attrs)) {\n        if (!attrs.collection) attrs.collection = this;\n        return attrs;\n      }\n      options = options ? _.clone(options) : {};\n      options.collection = this;\n      var model = new this.model(attrs, options);\n      if (!model.validationError) return model;\n      this.trigger('invalid', this, model.validationError, options);\n      return false;\n    },\n\n    // Internal method called by both remove and set.\n    _removeModels: function(models, options) {\n      var removed = [];\n      for (var i = 0; i < models.length; i++) {\n        var model = this.get(models[i]);\n        if (!model) continue;\n\n        var index = this.indexOf(model);\n        this.models.splice(index, 1);\n        this.length--;\n\n        if (!options.silent) {\n          options.index = index;\n          model.trigger('remove', model, this, options);\n        }\n\n        removed.push(model);\n        this._removeReference(model, options);\n      }\n      return removed.length ? removed : false;\n    },\n\n    // Method for checking whether an object should be considered a model for\n    // the purposes of adding to the collection.\n    _isModel: function (model) {\n      return model instanceof Model;\n    },\n\n    // Internal method to create a model's ties to a collection.\n    _addReference: function(model, options) {\n      this._byId[model.cid] = model;\n      var id = this.modelId(model.attributes);\n      if (id != null) this._byId[id] = model;\n      model.on('all', this._onModelEvent, this);\n    },\n\n    // Internal method to sever a model's ties to a collection.\n    _removeReference: function(model, options) {\n      delete this._byId[model.cid];\n      var id = this.modelId(model.attributes);\n      if (id != null) delete this._byId[id];\n      if (this === model.collection) delete model.collection;\n      model.off('all', this._onModelEvent, this);\n    },\n\n    // Internal method called every time a model in the set fires an event.\n    // Sets need to update their indexes when models change ids. All other\n    // events simply proxy through. \"add\" and \"remove\" events that originate\n    // in other collections are ignored.\n    _onModelEvent: function(event, model, collection, options) {\n      if ((event === 'add' || event === 'remove') && collection !== this) return;\n      if (event === 'destroy') this.remove(model, options);\n      if (event === 'change') {\n        var prevId = this.modelId(model.previousAttributes());\n        var id = this.modelId(model.attributes);\n        if (prevId !== id) {\n          if (prevId != null) delete this._byId[prevId];\n          if (id != null) this._byId[id] = model;\n        }\n      }\n      this.trigger.apply(this, arguments);\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  var collectionMethods = { forEach: 3, each: 3, map: 3, collect: 3, reduce: 4,\n      foldl: 4, inject: 4, reduceRight: 4, foldr: 4, find: 3, detect: 3, filter: 3,\n      select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,\n      contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,\n      head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,\n      without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,\n      isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,\n      sortBy: 3, indexBy: 3};\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n  addUnderscoreMethods(Collection, collectionMethods, 'models');\n\n  // Backbone.View\n  // -------------\n\n  // Backbone Views are almost more convention than they are actual code. A View\n  // is simply a JavaScript object that represents a logical chunk of UI in the\n  // DOM. This might be a single item, an entire list, a sidebar or panel, or\n  // even the surrounding frame which wraps your whole app. Defining a chunk of\n  // UI as a **View** allows you to define your DOM events declaratively, without\n  // having to worry about render order ... and makes it easy for the view to\n  // react to specific changes in the state of your models.\n\n  // Creating a Backbone.View creates its initial element outside of the DOM,\n  // if an existing element is not provided...\n  var View = Backbone.View = function(options) {\n    this.cid = _.uniqueId('view');\n    _.extend(this, _.pick(options, viewOptions));\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be set as properties.\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n  // Set up all inheritable **Backbone.View** properties and methods.\n  _.extend(View.prototype, Events, {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    // jQuery delegate for element lookup, scoped to DOM elements within the\n    // current view. This should be preferred to global lookups where possible.\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // **render** is the core function that your view should override, in order\n    // to populate its element (`this.el`), with the appropriate HTML. The\n    // convention is for **render** to always return `this`.\n    render: function() {\n      return this;\n    },\n\n    // Remove this view by taking the element out of the DOM, and removing any\n    // applicable Backbone.Events listeners.\n    remove: function() {\n      this._removeElement();\n      this.stopListening();\n      return this;\n    },\n\n    // Remove this view's element from the document and all event listeners\n    // attached to it. Exposed for subclasses using an alternative DOM\n    // manipulation API.\n    _removeElement: function() {\n      this.$el.remove();\n    },\n\n    // Change the view's element (`this.el` property) and re-delegate the\n    // view's events on the new element.\n    setElement: function(element) {\n      this.undelegateEvents();\n      this._setElement(element);\n      this.delegateEvents();\n      return this;\n    },\n\n    // Creates the `this.el` and `this.$el` references for this view using the\n    // given `el`. `el` can be a CSS selector or an HTML string, a jQuery\n    // context or an element. Subclasses can override this to utilize an\n    // alternative DOM manipulation API and are only required to set the\n    // `this.el` property.\n    _setElement: function(el) {\n      this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\n      this.el = this.$el[0];\n    },\n\n    // Set callbacks, where `this.events` is a hash of\n    //\n    // *{\"event selector\": \"callback\"}*\n    //\n    //     {\n    //       'mousedown .title':  'edit',\n    //       'click .button':     'save',\n    //       'click .open':       function(e) { ... }\n    //     }\n    //\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\n    // Uses event delegation for efficiency.\n    // Omitting the selector binds the event to `this.el`.\n    delegateEvents: function(events) {\n      events || (events = _.result(this, 'events'));\n      if (!events) return this;\n      this.undelegateEvents();\n      for (var key in events) {\n        var method = events[key];\n        if (!_.isFunction(method)) method = this[method];\n        if (!method) continue;\n        var match = key.match(delegateEventSplitter);\n        this.delegate(match[1], match[2], _.bind(method, this));\n      }\n      return this;\n    },\n\n    // Add a single event listener to the view's element (or a child element\n    // using `selector`). This only works for delegate-able events: not `focus`,\n    // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.\n    delegate: function(eventName, selector, listener) {\n      this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Clears all callbacks previously bound to the view by `delegateEvents`.\n    // You usually don't need to use this, but may wish to if you have multiple\n    // Backbone views attached to the same DOM element.\n    undelegateEvents: function() {\n      if (this.$el) this.$el.off('.delegateEvents' + this.cid);\n      return this;\n    },\n\n    // A finer-grained `undelegateEvents` for removing a single delegated event.\n    // `selector` and `listener` are both optional.\n    undelegate: function(eventName, selector, listener) {\n      this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Produces a DOM element to be assigned to your view. Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _createElement: function(tagName) {\n      return document.createElement(tagName);\n    },\n\n    // Ensure that the View has a DOM element to render into.\n    // If `this.el` is a string, pass it through `$()`, take the first\n    // matching element, and re-assign it to `el`. Otherwise, create\n    // an element from the `id`, `className` and `tagName` properties.\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = _.extend({}, _.result(this, 'attributes'));\n        if (this.id) attrs.id = _.result(this, 'id');\n        if (this.className) attrs['class'] = _.result(this, 'className');\n        this.setElement(this._createElement(_.result(this, 'tagName')));\n        this._setAttributes(attrs);\n      } else {\n        this.setElement(_.result(this, 'el'));\n      }\n    },\n\n    // Set attributes from a hash on this view's element.  Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _setAttributes: function(attributes) {\n      this.$el.attr(attributes);\n    }\n\n  });\n\n  // Backbone.sync\n  // -------------\n\n  // Override this function to change the manner in which Backbone persists\n  // models to the server. You will be passed the type of request, and the\n  // model in question. By default, makes a RESTful Ajax request\n  // to the model's `url()`. Some possible customizations could be:\n  //\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\n  // * Send up the models as XML instead of JSON.\n  // * Persist models via WebSockets instead of Ajax.\n  //\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\n  // instead of `application/json` with the model in a param named `model`.\n  // Useful when interfacing with server-side languages like **PHP** that make\n  // it difficult to read the body of `PUT` requests.\n  Backbone.sync = function(method, model, options) {\n    var type = methodMap[method];\n\n    // Default options, unless specified.\n    _.defaults(options || (options = {}), {\n      emulateHTTP: Backbone.emulateHTTP,\n      emulateJSON: Backbone.emulateJSON\n    });\n\n    // Default JSON-request options.\n    var params = {type: type, dataType: 'json'};\n\n    // Ensure that we have a URL.\n    if (!options.url) {\n      params.url = _.result(model, 'url') || urlError();\n    }\n\n    // Ensure that we have the appropriate request data.\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n      params.contentType = 'application/json';\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\n    }\n\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\n    if (options.emulateJSON) {\n      params.contentType = 'application/x-www-form-urlencoded';\n      params.data = params.data ? {model: params.data} : {};\n    }\n\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n    // And an `X-HTTP-Method-Override` header.\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n      params.type = 'POST';\n      if (options.emulateJSON) params.data._method = type;\n      var beforeSend = options.beforeSend;\n      options.beforeSend = function(xhr) {\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\n        if (beforeSend) return beforeSend.apply(this, arguments);\n      };\n    }\n\n    // Don't process data on a non-GET request.\n    if (params.type !== 'GET' && !options.emulateJSON) {\n      params.processData = false;\n    }\n\n    // Pass along `textStatus` and `errorThrown` from jQuery.\n    var error = options.error;\n    options.error = function(xhr, textStatus, errorThrown) {\n      options.textStatus = textStatus;\n      options.errorThrown = errorThrown;\n      if (error) error.call(options.context, xhr, textStatus, errorThrown);\n    };\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\n    model.trigger('request', model, xhr, options);\n    return xhr;\n  };\n\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n  var methodMap = {\n    'create': 'POST',\n    'update': 'PUT',\n    'patch':  'PATCH',\n    'delete': 'DELETE',\n    'read':   'GET'\n  };\n\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n  // Override this if you'd like to use a different library.\n  Backbone.ajax = function() {\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\n  };\n\n  // Backbone.Router\n  // ---------------\n\n  // Routers map faux-URLs to actions, and fire events when routes are\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\n  var Router = Backbone.Router = function(options) {\n    options || (options = {});\n    if (options.routes) this.routes = options.routes;\n    this._bindRoutes();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regular expressions for matching named param parts and splatted\n  // parts of route strings.\n  var optionalParam = /\\((.*?)\\)/g;\n  var namedParam    = /(\\(\\?)?:\\w+/g;\n  var splatParam    = /\\*\\w+/g;\n  var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n  // Set up all inheritable **Backbone.Router** properties and methods.\n  _.extend(Router.prototype, Events, {\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Manually bind a single named route to a callback. For example:\n    //\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\n    //       ...\n    //     });\n    //\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n      if (_.isFunction(name)) {\n        callback = name;\n        name = '';\n      }\n      if (!callback) callback = this[name];\n      var router = this;\n      Backbone.history.route(route, function(fragment) {\n        var args = router._extractParameters(route, fragment);\n        if (router.execute(callback, args, name) !== false) {\n          router.trigger.apply(router, ['route:' + name].concat(args));\n          router.trigger('route', name, args);\n          Backbone.history.trigger('route', router, name, args);\n        }\n      });\n      return this;\n    },\n\n    // Execute a route handler with the provided parameters.  This is an\n    // excellent place to do pre-route setup or post-route cleanup.\n    execute: function(callback, args, name) {\n      if (callback) callback.apply(this, args);\n    },\n\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\n    navigate: function(fragment, options) {\n      Backbone.history.navigate(fragment, options);\n      return this;\n    },\n\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\n    // order of the routes here to support behavior where the most general\n    // routes can be defined at the bottom of the route map.\n    _bindRoutes: function() {\n      if (!this.routes) return;\n      this.routes = _.result(this, 'routes');\n      var route, routes = _.keys(this.routes);\n      while ((route = routes.pop()) != null) {\n        this.route(route, this.routes[route]);\n      }\n    },\n\n    // Convert a route string into a regular expression, suitable for matching\n    // against the current location hash.\n    _routeToRegExp: function(route) {\n      route = route.replace(escapeRegExp, '\\\\$&')\n                   .replace(optionalParam, '(?:$1)?')\n                   .replace(namedParam, function(match, optional) {\n                     return optional ? match : '([^/?]+)';\n                   })\n                   .replace(splatParam, '([^?]*?)');\n      return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\n    },\n\n    // Given a route, and a URL fragment that it matches, return the array of\n    // extracted decoded parameters. Empty or unmatched parameters will be\n    // treated as `null` to normalize cross-browser behavior.\n    _extractParameters: function(route, fragment) {\n      var params = route.exec(fragment).slice(1);\n      return _.map(params, function(param, i) {\n        // Don't decode the search params.\n        if (i === params.length - 1) return param || null;\n        return param ? decodeURIComponent(param) : null;\n      });\n    }\n\n  });\n\n  // Backbone.History\n  // ----------------\n\n  // Handles cross-browser history management, based on either\n  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\n  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\n  // and URL fragments. If the browser supports neither (old IE, natch),\n  // falls back to polling.\n  var History = Backbone.History = function() {\n    this.handlers = [];\n    this.checkUrl = _.bind(this.checkUrl, this);\n\n    // Ensure that `History` can be used outside of the browser.\n    if (typeof window !== 'undefined') {\n      this.location = window.location;\n      this.history = window.history;\n    }\n  };\n\n  // Cached regex for stripping a leading hash/slash and trailing space.\n  var routeStripper = /^[#\\/]|\\s+$/g;\n\n  // Cached regex for stripping leading and trailing slashes.\n  var rootStripper = /^\\/+|\\/+$/g;\n\n  // Cached regex for stripping urls of hash.\n  var pathStripper = /#.*$/;\n\n  // Has the history handling already been started?\n  History.started = false;\n\n  // Set up all inheritable **Backbone.History** properties and methods.\n  _.extend(History.prototype, Events, {\n\n    // The default interval to poll for hash changes, if necessary, is\n    // twenty times a second.\n    interval: 50,\n\n    // Are we at the app root?\n    atRoot: function() {\n      var path = this.location.pathname.replace(/[^\\/]$/, '$&/');\n      return path === this.root && !this.getSearch();\n    },\n\n    // Does the pathname match the root?\n    matchRoot: function() {\n      var path = this.decodeFragment(this.location.pathname);\n      var root = path.slice(0, this.root.length - 1) + '/';\n      return root === this.root;\n    },\n\n    // Unicode characters in `location.pathname` are percent encoded so they're\n    // decoded for comparison. `%25` should not be decoded since it may be part\n    // of an encoded parameter.\n    decodeFragment: function(fragment) {\n      return decodeURI(fragment.replace(/%25/g, '%2525'));\n    },\n\n    // In IE6, the hash fragment and search params are incorrect if the\n    // fragment contains `?`.\n    getSearch: function() {\n      var match = this.location.href.replace(/#.*/, '').match(/\\?.+/);\n      return match ? match[0] : '';\n    },\n\n    // Gets the true hash value. Cannot use location.hash directly due to bug\n    // in Firefox where location.hash will always be decoded.\n    getHash: function(window) {\n      var match = (window || this).location.href.match(/#(.*)$/);\n      return match ? match[1] : '';\n    },\n\n    // Get the pathname and search params, without the root.\n    getPath: function() {\n      var path = this.decodeFragment(\n        this.location.pathname + this.getSearch()\n      ).slice(this.root.length - 1);\n      return path.charAt(0) === '/' ? path.slice(1) : path;\n    },\n\n    // Get the cross-browser normalized URL fragment from the path or hash.\n    getFragment: function(fragment) {\n      if (fragment == null) {\n        if (this._usePushState || !this._wantsHashChange) {\n          fragment = this.getPath();\n        } else {\n          fragment = this.getHash();\n        }\n      }\n      return fragment.replace(routeStripper, '');\n    },\n\n    // Start the hash change handling, returning `true` if the current URL matches\n    // an existing route, and `false` otherwise.\n    start: function(options) {\n      if (History.started) throw new Error('Backbone.history has already been started');\n      History.started = true;\n\n      // Figure out the initial configuration. Do we need an iframe?\n      // Is pushState desired ... is it available?\n      this.options          = _.extend({root: '/'}, this.options, options);\n      this.root             = this.options.root;\n      this._wantsHashChange = this.options.hashChange !== false;\n      this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);\n      this._useHashChange   = this._wantsHashChange && this._hasHashChange;\n      this._wantsPushState  = !!this.options.pushState;\n      this._hasPushState    = !!(this.history && this.history.pushState);\n      this._usePushState    = this._wantsPushState && this._hasPushState;\n      this.fragment         = this.getFragment();\n\n      // Normalize root to always include a leading and trailing slash.\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n      // Transition from hashChange to pushState or vice versa if both are\n      // requested.\n      if (this._wantsHashChange && this._wantsPushState) {\n\n        // If we've started off with a route from a `pushState`-enabled\n        // browser, but we're currently in a browser that doesn't support it...\n        if (!this._hasPushState && !this.atRoot()) {\n          var root = this.root.slice(0, -1) || '/';\n          this.location.replace(root + '#' + this.getPath());\n          // Return immediately as browser will do redirect to new url\n          return true;\n\n        // Or if we've started out with a hash-based route, but we're currently\n        // in a browser where it could be `pushState`-based instead...\n        } else if (this._hasPushState && this.atRoot()) {\n          this.navigate(this.getHash(), {replace: true});\n        }\n\n      }\n\n      // Proxy an iframe to handle location events if the browser doesn't\n      // support the `hashchange` event, HTML5 history, or the user wants\n      // `hashChange` but not `pushState`.\n      if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {\n        this.iframe = document.createElement('iframe');\n        this.iframe.src = 'javascript:0';\n        this.iframe.style.display = 'none';\n        this.iframe.tabIndex = -1;\n        var body = document.body;\n        // Using `appendChild` will throw on IE < 9 if the document is not ready.\n        var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;\n        iWindow.document.open();\n        iWindow.document.close();\n        iWindow.location.hash = '#' + this.fragment;\n      }\n\n      // Add a cross-platform `addEventListener` shim for older browsers.\n      var addEventListener = window.addEventListener || function (eventName, listener) {\n        return attachEvent('on' + eventName, listener);\n      };\n\n      // Depending on whether we're using pushState or hashes, and whether\n      // 'onhashchange' is supported, determine how we check the URL state.\n      if (this._usePushState) {\n        addEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        addEventListener('hashchange', this.checkUrl, false);\n      } else if (this._wantsHashChange) {\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n      }\n\n      if (!this.options.silent) return this.loadUrl();\n    },\n\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n    // but possibly useful for unit testing Routers.\n    stop: function() {\n      // Add a cross-platform `removeEventListener` shim for older browsers.\n      var removeEventListener = window.removeEventListener || function (eventName, listener) {\n        return detachEvent('on' + eventName, listener);\n      };\n\n      // Remove window listeners.\n      if (this._usePushState) {\n        removeEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        removeEventListener('hashchange', this.checkUrl, false);\n      }\n\n      // Clean up the iframe if necessary.\n      if (this.iframe) {\n        document.body.removeChild(this.iframe);\n        this.iframe = null;\n      }\n\n      // Some environments will throw when clearing an undefined interval.\n      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\n      History.started = false;\n    },\n\n    // Add a route to be tested when the fragment changes. Routes added later\n    // may override previous routes.\n    route: function(route, callback) {\n      this.handlers.unshift({route: route, callback: callback});\n    },\n\n    // Checks the current URL to see if it has changed, and if it has,\n    // calls `loadUrl`, normalizing across the hidden iframe.\n    checkUrl: function(e) {\n      var current = this.getFragment();\n\n      // If the user pressed the back button, the iframe's hash will have\n      // changed and we should use that for comparison.\n      if (current === this.fragment && this.iframe) {\n        current = this.getHash(this.iframe.contentWindow);\n      }\n\n      if (current === this.fragment) return false;\n      if (this.iframe) this.navigate(current);\n      this.loadUrl();\n    },\n\n    // Attempt to load the current URL fragment. If a route succeeds with a\n    // match, returns `true`. If no defined routes matches the fragment,\n    // returns `false`.\n    loadUrl: function(fragment) {\n      // If the root doesn't match, no routes can match either.\n      if (!this.matchRoot()) return false;\n      fragment = this.fragment = this.getFragment(fragment);\n      return _.some(this.handlers, function(handler) {\n        if (handler.route.test(fragment)) {\n          handler.callback(fragment);\n          return true;\n        }\n      });\n    },\n\n    // Save a fragment into the hash history, or replace the URL state if the\n    // 'replace' option is passed. You are responsible for properly URL-encoding\n    // the fragment in advance.\n    //\n    // The options object can contain `trigger: true` if you wish to have the\n    // route callback be fired (not usually desirable), or `replace: true`, if\n    // you wish to modify the current URL without adding an entry to the history.\n    navigate: function(fragment, options) {\n      if (!History.started) return false;\n      if (!options || options === true) options = {trigger: !!options};\n\n      // Normalize the fragment.\n      fragment = this.getFragment(fragment || '');\n\n      // Don't include a trailing slash on the root.\n      var root = this.root;\n      if (fragment === '' || fragment.charAt(0) === '?') {\n        root = root.slice(0, -1) || '/';\n      }\n      var url = root + fragment;\n\n      // Strip the hash and decode for matching.\n      fragment = this.decodeFragment(fragment.replace(pathStripper, ''));\n\n      if (this.fragment === fragment) return;\n      this.fragment = fragment;\n\n      // If pushState is available, we use it to set the fragment as a real URL.\n      if (this._usePushState) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n      // If hash changes haven't been explicitly disabled, update the hash\n      // fragment to store history.\n      } else if (this._wantsHashChange) {\n        this._updateHash(this.location, fragment, options.replace);\n        if (this.iframe && (fragment !== this.getHash(this.iframe.contentWindow))) {\n          var iWindow = this.iframe.contentWindow;\n\n          // Opening and closing the iframe tricks IE7 and earlier to push a\n          // history entry on hash-tag change.  When replace is true, we don't\n          // want this.\n          if (!options.replace) {\n            iWindow.document.open();\n            iWindow.document.close();\n          }\n\n          this._updateHash(iWindow.location, fragment, options.replace);\n        }\n\n      // If you've told us that you explicitly don't want fallback hashchange-\n      // based history, then `navigate` becomes a page refresh.\n      } else {\n        return this.location.assign(url);\n      }\n      if (options.trigger) return this.loadUrl(fragment);\n    },\n\n    // Update the hash location, either replacing the current entry, or adding\n    // a new one to the browser history.\n    _updateHash: function(location, fragment, replace) {\n      if (replace) {\n        var href = location.href.replace(/(javascript:|#).*$/, '');\n        location.replace(href + '#' + fragment);\n      } else {\n        // Some browsers require that `hash` contains a leading #.\n        location.hash = '#' + fragment;\n      }\n    }\n\n  });\n\n  // Create the default Backbone.history.\n  Backbone.history = new History;\n\n  // Helpers\n  // -------\n\n  // Helper function to correctly set up the prototype chain for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var extend = function(protoProps, staticProps) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent constructor.\n    if (protoProps && _.has(protoProps, 'constructor')) {\n      child = protoProps.constructor;\n    } else {\n      child = function(){ return parent.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent` constructor function.\n    var Surrogate = function(){ this.constructor = child; };\n    Surrogate.prototype = parent.prototype;\n    child.prototype = new Surrogate;\n\n    // Add prototype properties (instance properties) to the subclass,\n    // if supplied.\n    if (protoProps) _.extend(child.prototype, protoProps);\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Set up inheritance for the model, collection, router, view and history.\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function() {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n  // Wrap an optional error callback with a fallback error event.\n  var wrapError = function(model, options) {\n    var error = options.error;\n    options.error = function(resp) {\n      if (error) error.call(options.context, model, resp, options);\n      model.trigger('error', model, resp, options);\n    };\n  };\n\n  return Backbone;\n\n}));\n";

},function(e,t){var n=function(){var e=function(){"use strict";var e;function t(e){this.string=e}t.prototype.toString=function(){return""+this.string};e=t;return e}();var t=function(e){"use strict";var t={};var n=e;var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var i=/[&<>"'`]/g;var a=/[&<>"'`]/;function s(e){return r[e]||"&amp;"}function o(e,t){for(var n in t){if(Object.prototype.hasOwnProperty.call(t,n)){e[n]=t[n]}}}t.extend=o;var l=Object.prototype.toString;t.toString=l;var u=function(e){return typeof e==="function"};if(u(/x/)){u=function(e){return typeof e==="function"&&l.call(e)==="[object Function]"}}var u;t.isFunction=u;var c=Array.isArray||function(e){return e&&typeof e==="object"?l.call(e)==="[object Array]":false};t.isArray=c;function f(e){if(e instanceof n){return e.toString()}else if(!e&&e!==0){return""}e=""+e;if(!a.test(e)){return e}return e.replace(i,s)}t.escapeExpression=f;function d(e){if(!e&&e!==0){return true}else if(c(e)&&e.length===0){return true}else{return false}}t.isEmpty=d;return t}(e);var n=function(){"use strict";var e;var t=["description","fileName","lineNumber","message","name","number","stack"];function n(e,n){var r;if(n&&n.firstLine){r=n.firstLine;e+=" - "+r+":"+n.firstColumn}var i=Error.prototype.constructor.call(this,e);for(var a=0;a<t.length;a++){this[t[a]]=i[t[a]]}if(r){this.lineNumber=r;this.column=n.firstColumn}}n.prototype=new Error;e=n;return e}();var r=function(e,t){"use strict";var n={};var r=e;var i=t;var a="1.3.0";n.VERSION=a;var s=4;n.COMPILER_REVISION=s;var o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};n.REVISION_CHANGES=o;var l=r.isArray,u=r.isFunction,c=r.toString,f="[object Object]";function d(e,t){this.helpers=e||{};this.partials=t||{};h(this)}n.HandlebarsEnvironment=d;d.prototype={constructor:d,logger:p,log:m,registerHelper:function(e,t,n){if(c.call(e)===f){if(n||t){throw new i("Arg not supported with multiple helpers")}r.extend(this.helpers,e)}else{if(n){t.not=n}this.helpers[e]=t}},registerPartial:function(e,t){if(c.call(e)===f){r.extend(this.partials,e)}else{this.partials[e]=t}}};function h(e){e.registerHelper("helperMissing",function(e){if(arguments.length===2){return undefined}else{throw new i("Missing helper: '"+e+"'")}});e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse||function(){},i=n.fn;if(u(t)){t=t.call(this)}if(t===true){return i(this)}else if(t===false||t==null){return r(this)}else if(l(t)){if(t.length>0){return e.helpers.each(t,n)}else{return r(this)}}else{return i(t)}});e.registerHelper("each",function(e,t){var n=t.fn,r=t.inverse;var i=0,a="",s;if(u(e)){e=e.call(this)}if(t.data){s=g(t.data)}if(e&&typeof e==="object"){if(l(e)){for(var o=e.length;i<o;i++){if(s){s.index=i;s.first=i===0;s.last=i===e.length-1}a=a+n(e[i],{data:s})}}else{for(var c in e){if(e.hasOwnProperty(c)){if(s){s.key=c;s.index=i;s.first=i===0}a=a+n(e[c],{data:s});i++}}}}if(i===0){a=r(this)}return a});e.registerHelper("if",function(e,t){if(u(e)){e=e.call(this)}if(!t.hash.includeZero&&!e||r.isEmpty(e)){return t.inverse(this)}else{return t.fn(this)}});e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})});e.registerHelper("with",function(e,t){if(u(e)){e=e.call(this)}if(!r.isEmpty(e))return t.fn(e)});e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)})}var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(p.level<=e){var n=p.methodMap[e];if(typeof console!=="undefined"&&console[n]){console[n].call(console,t)}}}};n.logger=p;function m(e,t){p.log(e,t)}n.log=m;var g=function(e){var t={};r.extend(t,e);return t};n.createFrame=g;return n}(t,n);var i=function(e,t,n){"use strict";var r={};var i=e;var a=t;var s=n.COMPILER_REVISION;var o=n.REVISION_CHANGES;function l(e){var t=e&&e[0]||1,n=s;if(t!==n){if(t<n){var r=o[n],i=o[t];throw new a("Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}else{throw new a("Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+e[1]+").")}}}r.checkRevision=l;function u(e,t){if(!t){throw new a("No environment passed to template")}var n=function(e,n,r,i,s,o){var l=t.VM.invokePartial.apply(this,arguments);if(l!=null){return l}if(t.compile){var u={helpers:i,partials:s,data:o};s[n]=t.compile(e,{data:o!==undefined},t);return s[n](r,u)}else{throw new a("The partial "+n+" could not be compiled when running in runtime-only mode")}};var r={escapeExpression:i.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var r=this.programs[e];if(n){r=f(e,t,n)}else if(!r){r=this.programs[e]=f(e,t)}return r},merge:function(e,t){var n=e||t;if(e&&t&&e!==t){n={};i.extend(n,t);i.extend(n,e)}return n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,i){i=i||{};var a=i.partial?i:t,s,o;if(!i.partial){s=i.helpers;o=i.partials}var l=e.call(r,a,n,s,o,i.data);if(!i.partial){t.VM.checkRevision(r.compilerInfo)}return l}}r.template=u;function c(e,t,n){var r=Array.prototype.slice.call(arguments,3);var i=function(e,i){i=i||{};return t.apply(this,[e,i.data||n].concat(r))};i.program=e;i.depth=r.length;return i}r.programWithDepth=c;function f(e,t,n){var r=function(e,r){r=r||{};return t(e,r.data||n)};r.program=e;r.depth=0;return r}r.program=f;function d(e,t,n,r,i,s){var o={partial:true,helpers:r,partials:i,data:s};if(e===undefined){throw new a("The partial "+t+" could not be found")}else if(e instanceof Function){return e(n,o)}}r.invokePartial=d;function h(){return""}r.noop=h;return r}(t,n,r);var a=function(e,t,n,r,i){"use strict";var a;var s=e;var o=t;var l=n;var u=r;var c=i;var f=function(){var e=new s.HandlebarsEnvironment;u.extend(e,s);e.SafeString=o;e.Exception=l;e.Utils=u;e.VM=c;e.template=function(t){return c.template(t,e)};return e};var d=f();d.create=f;a=d;return a}(r,e,n,t,i);var s=function(e){"use strict";var t;var n=e;function r(e){e=e||{};this.firstLine=e.first_line;this.firstColumn=e.first_column;this.lastColumn=e.last_column;this.lastLine=e.last_line}var i={ProgramNode:function(e,t,n,a){var s,o;if(arguments.length===3){a=n;n=null}else if(arguments.length===2){a=t;t=null}r.call(this,a);this.type="program";this.statements=e;this.strip={};if(n){o=n[0];if(o){s={first_line:o.firstLine,last_line:o.lastLine,last_column:o.lastColumn,first_column:o.firstColumn};this.inverse=new i.ProgramNode(n,t,s)}else{this.inverse=new i.ProgramNode(n,t)}this.strip.right=t.left}else if(t){this.strip.left=t.right}},MustacheNode:function(e,t,n,a,s){r.call(this,s);this.type="mustache";this.strip=a;if(n!=null&&n.charAt){var o=n.charAt(3)||n.charAt(2);this.escaped=o!=="{"&&o!=="&"}else{this.escaped=!!n}if(e instanceof i.SexprNode){this.sexpr=e}else{this.sexpr=new i.SexprNode(e,t)}this.sexpr.isRoot=true;this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},SexprNode:function(e,t,n){r.call(this,n);this.type="sexpr";this.hash=t;var i=this.id=e[0];var a=this.params=e.slice(1);var s=this.eligibleHelper=i.isSimple;this.isHelper=s&&(a.length||t)},PartialNode:function(e,t,n,i){r.call(this,i);this.type="partial";this.partialName=e;this.context=t;this.strip=n},BlockNode:function(e,t,i,a,s){r.call(this,s);if(e.sexpr.id.original!==a.path.original){throw new n(e.sexpr.id.original+" doesn't match "+a.path.original,this)}this.type="block";this.mustache=e;this.program=t;this.inverse=i;this.strip={left:e.strip.left,right:a.strip.right};(t||i).strip.left=e.strip.right;(i||t).strip.right=a.strip.left;if(i&&!t){this.isInverse=true}},ContentNode:function(e,t){r.call(this,t);this.type="content";this.string=e},HashNode:function(e,t){r.call(this,t);this.type="hash";this.pairs=e},IdNode:function(e,t){r.call(this,t);this.type="ID";var i="",a=[],s=0;for(var o=0,l=e.length;o<l;o++){var u=e[o].part;i+=(e[o].separator||"")+u;if(u===".."||u==="."||u==="this"){if(a.length>0){throw new n("Invalid path: "+i,this)}else if(u===".."){s++}else{this.isScoped=true}}else{a.push(u)}}this.original=i;this.parts=a;this.string=a.join(".");this.depth=s;this.isSimple=e.length===1&&!this.isScoped&&s===0;this.stringModeValue=this.string},PartialNameNode:function(e,t){r.call(this,t);this.type="PARTIAL_NAME";this.name=e.original},DataNode:function(e,t){r.call(this,t);this.type="DATA";this.id=e},StringNode:function(e,t){r.call(this,t);this.type="STRING";this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,t){r.call(this,t);this.type="INTEGER";this.original=this.integer=e;this.stringModeValue=Number(e)},BooleanNode:function(e,t){r.call(this,t);this.type="BOOLEAN";this.bool=e;this.stringModeValue=e==="true"},CommentNode:function(e,t){r.call(this,t);this.type="comment";this.comment=e}};t=i;return t}(n);var o=function(){"use strict";var e;var t=function(){var e={trace:function i(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function a(e,n,r,i,s,o,l){var u=o.length-1;switch(s){case 1:return new i.ProgramNode(o[u-1],this._$);break;case 2:return new i.ProgramNode([],this._$);break;case 3:this.$=new i.ProgramNode([],o[u-1],o[u],this._$);break;case 4:this.$=new i.ProgramNode(o[u-2],o[u-1],o[u],this._$);break;case 5:this.$=new i.ProgramNode(o[u-1],o[u],[],this._$);break;case 6:this.$=new i.ProgramNode(o[u],this._$);break;case 7:this.$=new i.ProgramNode([],this._$);break;case 8:this.$=new i.ProgramNode([],this._$);break;case 9:this.$=[o[u]];break;case 10:o[u-1].push(o[u]);this.$=o[u-1];break;case 11:this.$=new i.BlockNode(o[u-2],o[u-1].inverse,o[u-1],o[u],this._$);break;case 12:this.$=new i.BlockNode(o[u-2],o[u-1],o[u-1].inverse,o[u],this._$);break;case 13:this.$=o[u];break;case 14:this.$=o[u];break;case 15:this.$=new i.ContentNode(o[u],this._$);break;case 16:this.$=new i.CommentNode(o[u],this._$);break;case 17:this.$=new i.MustacheNode(o[u-1],null,o[u-2],t(o[u-2],o[u]),this._$);break;case 18:this.$=new i.MustacheNode(o[u-1],null,o[u-2],t(o[u-2],o[u]),this._$);break;case 19:this.$={path:o[u-1],strip:t(o[u-2],o[u])};break;case 20:this.$=new i.MustacheNode(o[u-1],null,o[u-2],t(o[u-2],o[u]),this._$);break;case 21:this.$=new i.MustacheNode(o[u-1],null,o[u-2],t(o[u-2],o[u]),this._$);break;case 22:this.$=new i.PartialNode(o[u-2],o[u-1],t(o[u-3],o[u]),this._$);break;case 23:this.$=t(o[u-1],o[u]);break;case 24:this.$=new i.SexprNode([o[u-2]].concat(o[u-1]),o[u],this._$);break;case 25:this.$=new i.SexprNode([o[u]],null,this._$);break;case 26:this.$=o[u];break;case 27:this.$=new i.StringNode(o[u],this._$);break;case 28:this.$=new i.IntegerNode(o[u],this._$);break;case 29:this.$=new i.BooleanNode(o[u],this._$);break;case 30:this.$=o[u];break;case 31:o[u-1].isHelper=true;this.$=o[u-1];break;case 32:this.$=new i.HashNode(o[u],this._$);break;case 33:this.$=[o[u-2],o[u]];break;case 34:this.$=new i.PartialNameNode(o[u],this._$);break;case 35:this.$=new i.PartialNameNode(new i.StringNode(o[u],this._$),this._$);break;case 36:this.$=new i.PartialNameNode(new i.IntegerNode(o[u],this._$));break;case 37:this.$=new i.DataNode(o[u],this._$);break;case 38:this.$=new i.IdNode(o[u],this._$);break;case 39:o[u-2].push({part:o[u],separator:o[u-1]});this.$=o[u-2];break;case 40:this.$=[{part:o[u]}];break;case 43:this.$=[];break;case 44:o[u-1].push(o[u]);break;case 47:this.$=[o[u]];break;case 48:o[u-1].push(o[u]);break}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function s(e,t){throw new Error(e)},parse:function o(e){var t=this,n=[0],r=[null],i=[],a=this.table,s="",o=0,l=0,u=0,c=2,f=1;this.lexer.setInput(e);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")this.lexer.yylloc={};var d=this.lexer.yylloc;i.push(d);var h=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;function p(e){n.length=n.length-2*e;r.length=r.length-e;i.length=i.length-e}function m(){var e;e=t.lexer.lex()||1;if(typeof e!=="number"){e=t.symbols_[e]||e}return e}var g,_,v,y,b,M,x={},w,S,k,L;while(true){v=n[n.length-1];if(this.defaultActions[v]){y=this.defaultActions[v]}else{if(g===null||typeof g=="undefined"){g=m()}y=a[v]&&a[v][g]}if(typeof y==="undefined"||!y.length||!y[0]){var T="";if(!u){L=[];for(w in a[v])if(this.terminals_[w]&&w>2){L.push("'"+this.terminals_[w]+"'")}if(this.lexer.showPosition){T="Parse error on line "+(o+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+L.join(", ")+", got '"+(this.terminals_[g]||g)+"'"}else{T="Parse error on line "+(o+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'")}this.parseError(T,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:d,expected:L})}}if(y[0]instanceof Array&&y.length>1){throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+g)}switch(y[0]){case 1:n.push(g);r.push(this.lexer.yytext);i.push(this.lexer.yylloc);n.push(y[1]);g=null;if(!_){l=this.lexer.yyleng;s=this.lexer.yytext;o=this.lexer.yylineno;d=this.lexer.yylloc;if(u>0)u--}else{g=_;_=null}break;case 2:S=this.productions_[y[1]][1];x.$=r[r.length-S];x._$={first_line:i[i.length-(S||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(S||1)].first_column,last_column:i[i.length-1].last_column};if(h){x._$.range=[i[i.length-(S||1)].range[0],i[i.length-1].range[1]]}M=this.performAction.call(x,s,l,o,this.yy,y[1],r,i);if(typeof M!=="undefined"){return M}if(S){n=n.slice(0,-1*S*2);r=r.slice(0,-1*S);i=i.slice(0,-1*S)}n.push(this.productions_[y[1]][0]);r.push(x.$);i.push(x._$);k=a[n[n.length-2]][n[n.length-1]];n.push(k);break;case 3:return true}}return true}};function t(e,t){return{left:e.charAt(2)==="~",right:t.charAt(0)==="~"||t.charAt(1)==="~"}}var n=function(){var e={EOF:1,parseError:function t(e,n){if(this.yy.parser){this.yy.parser.parseError(e,n)}else{throw new Error(e)}},setInput:function(e){this._input=e;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=[0,0];this.offset=0;return this},input:function(){var e=this._input[0];this.yytext+=e;this.yyleng++;this.offset++;this.match+=e;this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);if(t){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges)this.yylloc.range[1]++;this._input=this._input.slice(1);return e},unput:function(e){var t=e.length;var n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-t-1);this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(n.length-1)this.yylineno-=n.length-1;var i=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t};if(this.options.ranges){this.yylloc.range=[i[0],i[0]+this.yyleng-t]}return this},more:function(){this._more=true;return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;if(e.length<20){e+=this._input.substr(0,20-e.length)}return(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput();var t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done){return this.EOF}if(!this._input)this.done=true;var e,t,n,r,i,a;if(!this._more){this.yytext="";this.match=""}var s=this._currentRules();for(var o=0;o<s.length;o++){n=this._input.match(this.rules[s[o]]);if(n&&(!t||n[0].length>t[0].length)){t=n;r=o;if(!this.options.flex)break}}if(t){a=t[0].match(/(?:\r\n?|\n).*/g);if(a)this.yylineno+=a.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:a?a[a.length-1].length-a[a.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length};this.yytext+=t[0];this.match+=t[0];this.matches=t;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(t[0].length);this.matched+=t[0];e=this.performAction.call(this,this.yy,this,s[r],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=false;if(e)return e;else return}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function n(){var e=this.next();if(typeof e!=="undefined"){return e}else{return this.lex()}},begin:function r(e){this.conditionStack.push(e)},popState:function i(){return this.conditionStack.pop()},_currentRules:function a(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function s(e){this.begin(e)}};e.options={};e.performAction=function o(e,t,n,r){function i(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}var a=r;switch(n){case 0:if(t.yytext.slice(-2)==="\\\\"){i(0,1);this.begin("mu")}else if(t.yytext.slice(-1)==="\\"){i(0,1);this.begin("emu")}else{this.begin("mu")}if(t.yytext)return 14;break;case 1:return 14;break;case 2:this.popState();return 14;break;case 3:i(0,4);this.popState();return 15;break;case 4:return 35;break;case 5:return 36;break;case 6:return 25;break;case 7:return 16;break;case 8:return 20;break;case 9:return 19;break;case 10:return 19;break;case 11:return 23;break;case 12:return 22;break;case 13:this.popState();this.begin("com");break;case 14:i(3,5);this.popState();return 15;break;case 15:return 22;break;case 16:return 41;break;case 17:return 40;break;case 18:return 40;break;case 19:return 44;break;case 20:break;case 21:this.popState();return 24;break;case 22:this.popState();return 18;break;case 23:t.yytext=i(1,2).replace(/\\"/g,'"');return 32;break;case 24:t.yytext=i(1,2).replace(/\\'/g,"'");return 32;break;case 25:return 42;break;case 26:return 34;break;case 27:return 34;break;case 28:return 33;break;case 29:return 40;break;case 30:t.yytext=i(1,2);return 40;break;case 31:return"INVALID";break;case 32:return 5;break}};e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:false},emu:{rules:[2],inclusive:false},com:{rules:[3],inclusive:false},INITIAL:{rules:[0,1,32],inclusive:true}};return e}();e.lexer=n;function r(){this.yy={}}r.prototype=e;e.Parser=r;return new r}();e=t;return e}();var l=function(e,t){"use strict";var n={};var r=e;var i=t;n.parser=r;function a(e){if(e.constructor===i.ProgramNode){return e}r.yy=i;return r.parse(e)}n.parse=a;return n}(o,s);var u=function(e){"use strict";var t={};var n=e;function r(){}t.Compiler=r;r.prototype={compiler:r,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var a=0,s=e.length;a<s;a++){t=e[a];if(t.opcode==="DECLARE"){n.push("DECLARE "+t.name+"="+t.value)}else{r=[];for(var o=0;o<t.args.length;o++){i=t.args[o];if(typeof i==="string"){i='"'+i.replace("\n","\\n")+'"'}r.push(i)}n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t){return false}for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length){return false}for(var a=0;a<r.args.length;a++){if(r.args[a]!==i.args[a]){return false}}}t=this.children.length;if(e.children.length!==t){return false}for(n=0;n<t;n++){if(!this.children[n].equals(e.children[n])){return false}}return true},guid:0,compile:function(e,t){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,"if":true,unless:true,"with":true,log:true};if(n){for(var r in n){this.options.knownHelpers[r]=n[r]}}return this.accept(e)},accept:function(e){var t=e.strip||{},n;if(t.left){this.opcode("strip")}n=this[e.type](e);if(t.right){this.opcode("strip")}return n},program:function(e){var t=e.statements;for(var n=0,r=t.length;n<r;n++){this.accept(t[n])}this.isSimple=r===1;this.depths.list=this.depths.list.sort(function(e,t){return e-t});return this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options);var n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial;this.children[n]=t;for(var i=0,a=t.depths.list.length;i<a;i++){r=t.depths.list[i];if(r<2){continue}else{this.addDepth(r-1)}}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;if(n){n=this.compileProgram(n)}if(r){r=this.compileProgram(r)}var i=t.sexpr;var a=this.classifySexpr(i);if(a==="helper"){this.helperSexpr(i,n,r)}else if(a==="simple"){this.simpleSexpr(i);this.opcode("pushProgram",n);this.opcode("pushProgram",r);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousSexpr(i,n,r);this.opcode("pushProgram",n);this.opcode("pushProgram",r);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,a=t.length;i<a;i++){n=t[i];r=n[1];if(this.options.stringParams){if(r.depth){this.addDepth(r.depth)}this.opcode("getContext",r.depth||0);this.opcode("pushStringParam",r.stringModeValue,r.type);if(r.type==="sexpr"){this.sexpr(r)}}else{this.accept(r)}this.opcode("assignToHash",n[0])}this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=true;if(e.context){this.ID(e.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",t.name);this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr);if(e.escaped&&!this.options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousSexpr:function(e,t,n){var r=e.id,i=r.parts[0],a=t!=null||n!=null;this.opcode("getContext",r.depth);this.opcode("pushProgram",t);this.opcode("pushProgram",n);this.opcode("invokeAmbiguous",i,a)},simpleSexpr:function(e){var t=e.id;if(t.type==="DATA"){this.DATA(t)}else if(t.parts.length){this.ID(t)}else{this.addDepth(t.depth);this.opcode("getContext",t.depth);this.opcode("pushContext")}this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,r){var i=this.setupFullMustacheParams(e,t,r),a=e.id.parts[0];if(this.options.knownHelpers[a]){this.opcode("invokeKnownHelper",i.length,a)}else if(this.options.knownHelpersOnly){throw new n("You specified knownHelpersOnly, but used the unknown helper "+a,e)}else{this.opcode("invokeHelper",i.length,a,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);if(t==="simple"){this.simpleSexpr(e)}else if(t==="helper"){this.helperSexpr(e)}else{this.ambiguousSexpr(e)}},ID:function(e){this.addDepth(e.depth);this.opcode("getContext",e.depth);var t=e.parts[0];if(!t){this.opcode("pushContext")}else{this.opcode("lookupOnContext",e.parts[0])}for(var n=1,r=e.parts.length;n<r;n++){this.opcode("lookup",e.parts[n])}},DATA:function(e){this.options.data=true;if(e.id.isScoped||e.id.depth){throw new n("Scoped data references are not supported: "+e.original,e)}this.opcode("lookupData");var t=e.id.parts;for(var r=0,i=t.length;r<i;r++){this.opcode("lookup",t[r])}},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(e===0){return}if(!this.depths[e]){this.depths[e]=true;this.depths.list.push(e)}},classifySexpr:function(e){var t=e.isHelper;var n=e.eligibleHelper;var r=this.options;if(n&&!t){var i=e.id.parts[0];if(r.knownHelpers[i]){t=true}else if(r.knownHelpersOnly){n=false}}if(t){return"helper"}else if(n){return"ambiguous"}else{return"simple"}},pushParams:function(e){var t=e.length,n;while(t--){n=e[t];if(this.options.stringParams){if(n.depth){this.addDepth(n.depth)}this.opcode("getContext",n.depth||0);this.opcode("pushStringParam",n.stringModeValue,n.type);if(n.type==="sexpr"){this.sexpr(n)}}else{this[n.type](n)}}},setupFullMustacheParams:function(e,t,n){var r=e.params;this.pushParams(r);this.opcode("pushProgram",t);this.opcode("pushProgram",n);if(e.hash){this.hash(e.hash)}else{this.opcode("emptyHash")}return r}};function i(e,t,r){if(e==null||typeof e!=="string"&&e.constructor!==r.AST.ProgramNode){throw new n("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e)}t=t||{};if(!("data"in t)){t.data=true}var i=r.parse(e);var a=(new r.Compiler).compile(i,t);return(new r.JavaScriptCompiler).compile(a,t)}t.precompile=i;function a(e,t,r){if(e==null||typeof e!=="string"&&e.constructor!==r.AST.ProgramNode){
throw new n("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e)}t=t||{};if(!("data"in t)){t.data=true}var i;function a(){var n=r.parse(e);var i=(new r.Compiler).compile(n,t);var a=(new r.JavaScriptCompiler).compile(i,t,undefined,true);return r.template(a)}return function(e,t){if(!i){i=a()}return i.call(this,e,t)}}t.compile=a;return t}(n);var c=function(e,t){"use strict";var n;var r=e.COMPILER_REVISION;var i=e.REVISION_CHANGES;var a=e.log;var s=t;function o(e){this.value=e}function l(){}l.prototype={nameLookup:function(e,t){var n,r;if(e.indexOf("depth")===0){n=true}if(/^[0-9]+$/.test(t)){r=e+"["+t+"]"}else if(l.isValidJavaScriptVariableName(t)){r=e+"."+t}else{r=e+"['"+t+"']"}if(n){return"("+e+" && "+r+")"}else{return r}},compilerInfo:function(){var e=r,t=i[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){if(this.environment.isSimple){return"return "+e+";"}else{return{appendToBuffer:true,content:e,toString:function(){return"buffer += "+e+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e;this.options=t||{};a("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!n;this.context=n||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.compileChildren(e,t);var i=e.opcodes,o;this.i=0;for(var l=i.length;this.i<l;this.i++){o=i[this.i];if(o.opcode==="DECLARE"){this[o.name]=o.value}else{this[o.opcode].apply(this,o.args)}if(o.opcode!==this.stripNext){this.stripNext=false}}this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length){throw new s("Compile completed with content left on stack")}return this.createFunctionContext(r)},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace;var n="helpers = this.merge(helpers, "+t+".helpers);";if(this.environment.usePartial){n=n+" partials = this.merge(partials, "+t+".partials);"}if(this.options.data){n=n+" data = data || {};"}e.push(n)}else{e.push("")}if(!this.environment.isSimple){e.push(", buffer = "+this.initializeBuffer())}else{e.push("")}this.lastContext=0;this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0){this.source[1]=this.source[1]+", "+t.join(", ")}if(!this.isChild){for(var n in this.context.aliases){if(this.context.aliases.hasOwnProperty(n)){this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]}}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.pushSource("return buffer;")}var r=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,s=this.environment.depths.list.length;i<s;i++){r.push("depth"+this.environment.depths.list[i])}var o=this.mergeSource();if(!this.isChild){o=this.compilerInfo()+o}if(e){r.push(o);return Function.apply(this,r)}else{var l="function "+(this.name||"")+"("+r.join(",")+") {\n  "+o+"}";a("debug",l+"\n\n");return l}},mergeSource:function(){var e="",t;for(var n=0,r=this.source.length;n<r;n++){var i=this.source[n];if(i.appendToBuffer){if(t){t=t+"\n    + "+i.content}else{t=i.content}}else{if(t){e+="buffer += "+t+";\n  ";t=undefined}e+=i+"\n  "}}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);this.replaceStack(function(t){e.splice(1,0,t);return"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t);this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){if(this.pendingContent){e=this.pendingContent+e}if(this.stripNext){e=e.replace(/^\s+/,"")}this.pendingContent=e},strip:function(){if(this.pendingContent){this.pendingContent=this.pendingContent.replace(/\s+$/,"")}this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }");if(this.environment.isSimple){this.pushSource("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){if(this.lastContext!==e){this.lastContext=e}},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext);this.pushString(t);if(t!=="sexpr"){if(typeof e==="string"){this.pushString(e)}else{this.pushStackLiteral(e)}}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.push("{}");this.push("{}")}},pushHash:function(){if(this.hash){this.hashes.push(this.hash)}this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop();if(this.options.stringParams){this.push("{"+e.contexts.join(",")+"}");this.push("{"+e.types.join(",")+"}")}this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){this.inlineStack.push(e);return e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){if(e!=null){this.pushStackLiteral(this.programExpression(e))}else{this.pushStackLiteral(null)}},invokeHelper:function(e,t,n){this.context.aliases.helperMissing="helpers.helperMissing";this.useRegister("helper");var r=this.lastHelper=this.setupHelper(e,t,true);var i=this.nameLookup("depth"+this.lastContext,t,"context");var a="helper = "+r.name+" || "+i;if(r.paramsInit){a+=","+r.paramsInit}this.push("("+a+",helper "+"? helper.call("+r.callParams+") "+": helperMissing.call("+r.helperMissingParams+"))");if(!n){this.flushInline()}},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"';this.useRegister("helper");this.emptyHash();var n=this.setupHelper(0,e,t);var r=this.lastHelper=this.nameLookup("helpers",e,"helper");var i=this.nameLookup("depth"+this.lastContext,e,"context");var a=this.nextStack();if(n.paramsInit){this.pushSource(n.paramsInit)}this.pushSource("if (helper = "+r+") { "+a+" = helper.call("+n.callParams+"); }");this.pushSource("else { helper = "+i+"; "+a+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];if(this.options.data){t.push("data")}this.context.aliases.self="this";this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n,r;if(this.options.stringParams){r=this.popStack();n=this.popStack()}var i=this.hash;if(n){i.contexts.push("'"+e+"': "+n)}if(r){i.types.push("'"+e+"': "+r)}i.values.push("'"+e+"': ("+t+")")},compiler:l,compileChildren:function(e,t){var n=e.children,r,i;for(var a=0,s=n.length;a<s;a++){r=n[a];i=new this.compiler;var o=this.matchExistingProgram(r);if(o==null){this.context.programs.push("");o=this.context.programs.length;r.index=o;r.name="program"+o;this.context.programs[o]=i.compile(r,t,this.context);this.context.environments[o]=r}else{r.index=o;r.name="program"+o}}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e)){return t}}},programExpression:function(e){this.context.aliases.self="this";if(e==null){return"self.noop"}var t=this.environment.children[e],n=t.depths.list,r;var i=[t.index,t.name,"data"];for(var a=0,s=n.length;a<s;a++){r=n[a];if(r===1){i.push("depth0")}else{i.push("depth"+(r-1))}}return(n.length===0?"self.program(":"self.programWithDepth(")+i.join(", ")+")"},register:function(e,t){this.useRegister(e);this.pushSource(e+" = "+t+";")},useRegister:function(e){if(!this.registers[e]){this.registers[e]=true;this.registers.list.push(e)}},pushStackLiteral:function(e){return this.push(new o(e))},pushSource:function(e){if(this.pendingContent){this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent)));this.pendingContent=undefined}if(e){this.source.push(e)}},pushStack:function(e){this.flushInline();var t=this.incrStack();if(e){this.pushSource(t+" = "+e+";")}this.compileStack.push(t);return t},replaceStack:function(e){var t="",n=this.isInline(),r,i,a;if(n){var s=this.popStack(true);if(s instanceof o){r=s.value;a=true}else{i=!this.stackSlot;var l=!i?this.topStackName():this.incrStack();t="("+this.push(l)+" = "+s+"),";r=this.topStack()}}else{r=this.topStack()}var u=e.call(this,r);if(n){if(!a){this.popStack()}if(i){this.stackSlot--}this.push("("+t+u+")")}else{if(!/^stack/.test(r)){r=this.nextStack()}this.pushSource(r+" = ("+t+u+");")}return r},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r instanceof o){this.compileStack.push(r)}else{this.pushStack(r)}}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof o){return n.value}else{if(!t){if(!this.stackSlot){throw new s("Invalid stack pop")}this.stackSlot--}return n}},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];if(!e&&n instanceof o){return n.value}else{return n}},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var r=[],i=this.setupParams(e,r,n);var a=this.nameLookup("helpers",t,"helper");return{params:r,paramsInit:i,name:a,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupOptions:function(e,t){var n=[],r=[],i=[],a,s,o;n.push("hash:"+this.popStack());if(this.options.stringParams){n.push("hashTypes:"+this.popStack());n.push("hashContexts:"+this.popStack())}s=this.popStack();o=this.popStack();if(o||s){if(!o){this.context.aliases.self="this";o="self.noop"}if(!s){this.context.aliases.self="this";s="self.noop"}n.push("inverse:"+s);n.push("fn:"+o)}for(var l=0;l<e;l++){a=this.popStack();t.push(a);if(this.options.stringParams){i.push(this.popStack());r.push(this.popStack())}}if(this.options.stringParams){n.push("contexts:["+r.join(",")+"]");n.push("types:["+i.join(",")+"]")}if(this.options.data){n.push("data:data")}return n},setupParams:function(e,t,n){var r="{"+this.setupOptions(e,t).join(",")+"}";if(n){this.useRegister("options");t.push("options");return"options="+r}else{t.push(r);return""}}};var u=("break else new var"+" case finally return void"+" catch for switch while"+" continue function this with"+" default if throw"+" delete in try"+" do instanceof typeof"+" abstract enum int short"+" boolean export interface static"+" byte extends long super"+" char final native synchronized"+" class float package throws"+" const goto private transient"+" debugger implements protected volatile"+" double import public let yield").split(" ");var c=l.RESERVED_WORDS={};for(var f=0,d=u.length;f<d;f++){c[u[f]]=true}l.isValidJavaScriptVariableName=function(e){if(!l.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)){return true}return false};n=l;return n}(r,n);var f=function(e,t,n,r,i){"use strict";var a;var s=e;var o=t;var l=n.parser;var u=n.parse;var c=r.Compiler;var f=r.compile;var d=r.precompile;var h=i;var p=s.create;var m=function(){var e=p();e.compile=function(t,n){return f(t,n,e)};e.precompile=function(t,n){return d(t,n,e)};e.AST=o;e.Compiler=c;e.JavaScriptCompiler=h;e.Parser=l;e.parse=u;return e};s=m();s.create=m;a=s;return a}(a,s,l,u,c);return f}();e.exports=n},function(e,t){function n(e,t,n){this.php_js=this.php_js||{};this.php_js.ENV=this.php_js.ENV||{};var r=0,i=0,a=0,s={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:-1,pl:-1},o=function(e){e=(""+e).replace(/[_\-+]/g,".");e=e.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,".");return!e.length?[-8]:e.split(".")},l=function(e){return!e?0:isNaN(e)?s[e]||-7:parseInt(e,10)};e=o(e);t=o(t);i=Math.max(e.length,t.length);for(r=0;r<i;r++){if(e[r]==t[r]){continue}e[r]=l(e[r]);t[r]=l(t[r]);if(e[r]<t[r]){a=-1;break}else if(e[r]>t[r]){a=1;break}}if(!n){return a}switch(n){case">":case"gt":return a>0;case">=":case"ge":return a>=0;case"<=":case"le":return a<=0;case"==":case"=":case"eq":return a===0;case"<>":case"!=":case"ne":return a!==0;case"":case"<":case"lt":return a<0;default:return null}}e.exports=n},function(e,t){var n=n||{};n.Api=function(){var e;var t={read:"GET",update:"PUT",create:"POST","delete":"DELETE"};var n=["read","update","create","delete"];var i=0;var a=function(e){e()};var s={};var o={};var l=function(e,t,n){e=e||{};e.xhr=e.xhr||{};this.request=e;this.status=e.xhr.status;this.responseText=e.xhr.responseText;this.textStatus=t;this.errorThrown=n;if(typeof this.responseText==="string"&&this.responseText.length>0){try{var r=this.request.xhr.getResponseHeader("Content-Type");if(r&&r.indexOf("application/json")===0){this.payload=JSON.parse(this.responseText);this.code=this.payload.error;this.message=this.payload.error_message}}catch(i){}}};_.extend(l.prototype,{toString:function(){return"HTTP error: "+this.status+"\ntype: "+this.textStatus+"\nerror: "+this.errorThrown+"\nresponse: "+this.responseText+"\ncode: "+this.code+"\nmessage: "+this.message}});var u=function(e,t){this.params=e;this.debug=t;this.numExecuted=0;this.state={}};_.extend(u.prototype,{execute:function(e,t,n){if(e){this.params.headers=this.params.headers||{};this.params.headers["OAuth-Token"]=e}if(t){this.params.headers=this.params.headers||{};this.params.headers["X-Metadata-Hash"]=t}if(n){this.params.headers=this.params.headers||{};this.params.headers["X-Userpref-Hash"]=n}this.state=_.extend(this.state,o);if(this.debug){console.log("====== Ajax Request Begin ======");console.log(this.params.type+" "+this.params.url);var r=this.params.data?JSON.parse(this.params.data):null;if(r&&r.password)r.password="***";console.log("Payload: ",this.params.data?r:"N/A");var a=$.extend({},this.params);delete a.data;console.log("params: ",a);console.log("====== Request End ======")}if(!this.numExecuted){var s=this.params.complete;this.params.complete=function(){i--;if(_.isFunction(s))s.apply(this,arguments)}}this.xhr=$.ajax(this.params);i++;this.numExecuted++}});var c=function(e,t){var n=e.contents||{};this.status=e.status||200;this.statusText=e.status_text||"";this.responseText=_.isObject(n)?JSON.stringify(n):n;this.readyState=4;this._parent=t.xhr;this.headers=e.headers};_.extend(c.prototype,{isResolved:function(){return this._parent.isResolved()},getResponseHeader:function(e){return this.headers[e]},getAllResponseHeaders:function(){return _.reduce(this.headers,function(e,t,n){return e.concat(n+": "+t+"\n")},"")}});function f(e){var f,d,h,p,m,g,v,y,b,M=null,x=null,w=null,S=null,k=[],L={},T=0;h=e&&e.keyValueStore;f=e&&e.serverUrl||"/rest/v10";v=e&&e.defaultErrorHandler||null;d=e&&e.platform||"";p=e&&e.clientID||"sugar";m=(e&&e.timeout||30)*1e3;y=false;b=!(e&&e.disableBulkApi);if(e&&e.externalLoginUICallback&&_.isFunction(e.externalLoginUICallback)){M=e.externalLoginUICallback}if(h){if(!$.isFunction(h.set)||!$.isFunction(h.get)||!$.isFunction(h.cut)){throw new Error("Failed to initialize Sugar API: key/value store provider is invalid")}var E=function(){x=h.get("AuthAccessToken");w=h.get("AuthRefreshToken");S=h.get("DownloadToken")};if($.isFunction(h.initAsync)){h.initAsync(E)}else{E()}if($.isFunction(h.on)){h.on("cache:clean",function(e){e(["AuthAccessToken","AuthRefreshToken","DownloadToken"])})}}g=false;if(e&&e.reset)i=0;var D=function(e){if(e){x=e.access_token;w=e.refresh_token;S=e.download_token;if(h){h.set("AuthAccessToken",x);h.set("AuthRefreshToken",w);h.set("DownloadToken",S)}}else{x=null;w=null;S=null;if(h){h.cut("AuthAccessToken");h.cut("AuthRefreshToken");h.cut("DownloadToken")}}};var A=function(e,t,n){return function(r,i,s){var o=new l(t,i,s);var u=function(){if(!k.length||e.refreshingToken(t.params.url)){if(n.error){n.error(o)}else if($.isFunction(e.defaultErrorHandler)){e.defaultErrorHandler(o)}}else{for(var r=0;r<k.length;++r){if(k[r]._oerror)k[r]._oerror(o)}}e.setRefreshingToken(false)};var c,f=true;if(e.needRefreshAuthToken(t.params.url,o.code)){if(t._dequeuing){if(t._oerror)t._oerror(o);e.resetAuth();return}k.push(t);e.setRefreshingToken(true);var h={complete:function(){if(f){c=k.shift();while(c){if(c._ocomplete){c._ocomplete.call(this,c)}c=k.shift()}}},success:function(){e.setRefreshingToken(false);f=false;a(function(){c=k.shift();while(c){c._dequeuing=true;c.execute(e.getOAuthToken());c=k.shift()}})},error:u};if(!("crosstab"in window)||!crosstab.supported){e.login(null,{refresh:true},{complete:h.complete,success:h.success,error:h.error});return}crosstab(function(){crosstab.on("auth:refresh:complete",function(e){var t=e.data;switch(t){case"success":h.success();break;case"error":h.error();break;case"complete":h.complete();crosstab.off("auth:refresh:complete");break}});crosstab.broadcastMaster("auth:refresh")})}else if(e.needQueue(t.params.url)){k.push(t)}else if(y&&o.status==401&&o.payload&&o.payload.url&&o.payload.platform==d){e.handleExternalLogin(o,u)}else{u()}}};return{clientID:p,serverUrl:f,defaultErrorHandler:v,timeout:m,debug:false,abortRequest:function(e){var t=L[e];if(t){t.aborted=true;if(t.xhr){t.xhr.aborted=true;t.xhr.abort()}}},getRequest:function(e){return L[e]},setRefreshTokenSuccessCallback:function(e){if(_.isFunction(e))a=e},call:function(e,n,r,i,a){var o,l,c=t[e],f=this,d=this.getOAuthToken();a=a||{};i=i||{};var h={type:c,dataType:"json",headers:{},timeout:a.timeout||this.timeout,contentType:"application/json"};if(!a.url){h.url=n}if(i.success){h.success=function(e,t){o.status=e&&e.status?e.status:t;i.success(e,o)}}h.complete=function(){L[o.uid]=null;if(!g&&i.complete){i.complete(o)}};if(a.iframe===true){if(d){r=r||{};r["OAuth-Token"]=d;h.data=r}}else{if(r&&(e=="create"||e=="update"||e=="delete")){h.data=JSON.stringify(r)}}if(h.type!=="GET"){h.processData=false}o=new u(_.extend(h,a),this.debug);h.error=A(f,o,i);o._oerror=i.error;o._ocomplete=i.complete;o.uid=T++;L[o.uid]=o;l=[d,a.skipMetadataHash?null:this.getMetadataHash(),a.skipMetadataHash?null:this.getUserprefHash()];if(this.isLoginRequest(n)){o.execute()}else if(this.isAuthRequest(n)){o.execute(d)}else if(h.bulk&&b){var p=s[h.bulk]||[];if(!s[h.bulk]){s[h.bulk]=p}p.push({request:o,args:l})}else{o.execute.apply(o,l)}return o},triggerBulkCall:function(e){if(!b){return}e=e||true;var t=s[e],n=[],r=_.last(this.serverUrl.split("/"));if(!t){return}_.each(t,function(e){var t=e.request.params,i=e.args,a=i[0],s=i[1],o=i[2];if(a){t.headers=t.headers||{};t.headers["OAuth-Token"]=a}if(s){t.headers=t.headers||{};t.headers["X-Metadata-Hash"]=s}if(o){t.headers=t.headers||{};t.headers["X-Userpref-Hash"]=o}if(!_.isEmpty(t.url)){t.url=r+t.url.substring(this.serverUrl.length)}n.push(t)},this);this.call("create",this.buildURL("bulk"),{requests:n},{success:function(e,n){_.each(t,function(t,r){var i=t.request,a=e[r],s=a.contents||{},o=new c(a,n),l;i.xhr=o;if(i.aborted===true||s.error){i.status="error";if(_.isFunction(i.params.error)){i.params.error.call(i.params,i,"error",o.statusText)}}else{if(_.isFunction(i.params.success)){i.params.success.call(i.params,s,"success")}}if(_.isFunction(i.params.complete)){i.params.complete.call(i.params,i)}})}});s[e]=null},clearBulkQueue:function(){s={}},buildURL:function(e,t,r,i){i=i||{};var a=[];var s;a.push(this.serverUrl);if(e){a.push(e)}if(t!="create"&&r&&r.id){a.push(r.id)}if(r&&r.link&&t!="file"){a.push("link");if(_.isString(r.link)){a.push(r.link)}}if(t&&$.inArray(t,n)===-1){a.push(t)}if(r&&r.relatedId){a.push(r.relatedId)}if(r&&t=="file"&&r.field){a.push(r.field);if(r.fileId)a.push(r.fileId)}s=a.join("/");_.each(i,function(e,t){if(e===null||e===undefined){delete i[t]}});i=$.param(i);if(i.length>0){s+="?"+i}return s},buildFileURL:function(e,t){var n={};t=t||{};if(e.field&&t.htmlJsonFormat!==false){n.format="sugar-html-json"}if(t.deleteIfFails===true){n.delete_if_fails=true}if(t.passOAuthToken){n.oauth_token=this.getOAuthToken()}if(t.passDownloadToken){n.download_token=this.getDownloadToken()}if(!_.isUndefined(t.forceDownload)){n.force_download=t.forceDownload?1:0}if(t.cleanCache===true){n[(new Date).getTime()]=1}if(t.platform!==undefined){n.platform=t.platform}else if(d){n.platform=d}if(t.keep===true){n.keep=1}return this.buildURL(e.module,"file",e,n)},getOAuthToken:function(){return h?h.get("AuthAccessToken")||x:x},getRefreshToken:function(){return h?h.get("AuthRefreshToken")||w:w},getDownloadToken:function(){return h?h.get("DownloadToken")||S:S},getMetadataHash:function(){return h?h.get("meta:hash"):null},getUserprefHash:function(){return h?h.get("userpref:hash"):null},getMetadata:function(e,t,n,r,i){i=i||{};var a=i.params||{},s,o;if(t){a.type_filter=t.join(",")}if(n){a.module_filter=n.join(",")}if(d){a.platform=d}s="read";if(i&&i.getPublic){s="public"}else{r=r||{};r.success=_.wrap(r.success,function(e,t,n){if(t){this._serverInfo=t.server_info}if(e){e(t,n)}})}a.module_dependencies=1;o=this.buildURL("metadata",s,null,a);return this.call(s,o,null,r)},records:function(e,t,n,r,i,a){var s=this.buildURL(t,e,n,r);return this.call(e,s,n,i,a)},relationships:function(e,t,n,r,i,a){var s=this.buildURL(t,null,n,r);return this.call(e,s,n.related,i,a)},favorite:function(e,t,n,r,i){var a=n?"favorite":"unfavorite";var s=this.buildURL(e,a,{id:t});return this.call("update",s,null,r,i)},follow:function(e,t,n,r,i){r=r||{};i=i||{};var a=n?"create":"delete",s=n?"subscribe":"unsubscribe",o=this.buildURL(e,s,{id:t});return this.call(a,o,null,r,i)},enumOptions:function(e,t,n,r){var i=this.buildURL(e+"/enum/"+t);return this.call("read",i,null,n,r)},bulk:function(e,t,n){var r=this.buildURL("bulk");return this.call("create",r,e,t,n)},fileDownload:function(e,t,n){n=n||{};var r={};r.success=function(r){if(n.iframe){n.iframe.prepend('<iframe class="hide" src="'+e+'"></iframe>')}else{window.location.href=e}if(_.isFunction(t.success)){t.success.apply(arguments)}};if(_.isFunction(t.error)){r.error=t.error}if(_.isFunction(t.complete)){r.complete=t.complete}return this.call("read",this.buildURL("ping"),{},r,{processData:false})},file:function(e,t,n,r,i){var a={files:n,processData:false};if(e==="delete"){a.iframe=false}else if(!i||i.iframe!==false){a.iframe=true;i=i||{};i.passOAuthToken=true}if(!i||i.deleteIfFails!==false){i=i||{};i.deleteIfFails=true}r.success=_.wrap(r.success,function(e,t,n){if(t.error&&_.isFunction(r.error)){r.error(t)}else if(_.isFunction(e)){e(t)}});return this.call(e,this.buildFileURL(t,i),null,r,a)},count:function(e,t,n,r){r=r||{};var i=this.buildURL(e,"count",t,r);return this.call("read",i,null,n)},exportRecords:function(e,t,n,r){var i=this;var a=this.buildURL(e.module,"record_list");r=r||{};return this.call("create",a,{records:e.uid},{success:function(a){e=_.omit(e,["uid","module"]);if(r.platform!==undefined){e.platform=r.platform}else if(d){e.platform=d}i.fileDownload(i.buildURL(a.module_name,"export",{relatedId:a.id},e),n,{iframe:t})}})},search:function(e,t,n){n=n||{};var r=null;if(n.data){r=n.data;delete n.data}var i="read";if(n.fetchWithPost){i="create"}var a=n.useNewApi?"globalsearch":"search";var s=this.buildURL(null,a,null,e);return this.call(i,s,r,t,n)},login:function(e,t,n){var i,s,o,l,u,c=this;e=e||{};n=n||{};s=function(e){D(e);if(y){c.setRefreshingToken(false);a(function(){r=k.shift();while(r){r._dequeuing=true;r.execute(c.getOAuthToken());r=k.shift()}})}if(n.success)n.success(e)};o=function(e){D();if(n.error)n.error(e)};if(t&&t.refresh){i=_.extend({grant_type:"refresh_token",client_id:this.clientID,client_secret:"",refresh_token:this.getRefreshToken(),platform:d?d:"base"},t)}else{i=_.extend({grant_type:"password",username:e.username,password:e.password,client_id:this.clientID,platform:d?d:"base",client_secret:""},t);i.client_info=t}l="create";u=this.buildURL("oauth2","token",i,{platform:d});return this.call(l,u,i,{success:s,error:o,complete:n.complete})},me:function(e,t,n,r){var i=this.buildURL("me",e,t,n);return this.call(e,i,t,r)},css:function(e,t,n){var r={platform:e,themeName:t};var i=this.buildURL("css","read",{},r);return this.call("read",i,{},n)},logout:function(e,t){e=e||{};var n={token:this.getOAuthToken(),refresh_token:this.getRefreshToken()};if(this._serverInfo&&this._serverInfo.version.charAt(0)==="6"){delete n.refresh_token}var r=this.buildURL("oauth2","logout",n);var i=e.complete;e.complete=function(){D();if(i)i()};return this.call("create",r,n,e,t)},ping:function(e,t,n){return this.call("read",this.buildURL("ping",e,null,{platform:d}),null,t,_.extend({skipMetadataHash:true},n||{}))},signup:function(e,t,n){var r=e;r.client_info=t;var i="create";var a=this.buildURL("Leads","register",r);return this.call(i,a,r,n)},verifyPassword:function(e,t){var n={password_to_verify:e};var r="create";var i=this.buildURL("me/password",r);return this.call(r,i,n,t)},updatePassword:function(e,t,n){var r={new_password:t,old_password:e};var i="update";var a=this.buildURL("me/password",i);return this.call(i,a,r,n)},info:function(e){var t=this.buildURL("ServerInfo");return this.call("read",t,null,e)},isAuthenticated:function(){return typeof this.getOAuthToken()==="string"&&this.getOAuthToken().length>0},resetAuth:function(){D()},needRefreshAuthToken:function(e,t){return!g&&(typeof this.getRefreshToken()==="string"&&this.getRefreshToken().length>0)&&!this.isAuthRequest(e)&&t==="invalid_grant"},needQueue:function(e){return g&&!this.isAuthRequest(e)},isAuthRequest:function(e){return new RegExp("/oauth2/").test(e)},isLoginRequest:function(e){return new RegExp("/oauth2/token").test(e)},refreshingToken:function(e){return g&&this.isAuthRequest(e)},setRefreshingToken:function(e){g=e},handleExternalLogin:function(e,t){var n=this;if(!n.isLoginRequest(request.params.url)){k.push(request)}n.setRefreshingToken(true);$(window).on("message",function(e){if(!e.originalEvent.origin||e.originalEvent.origin!==window.location.origin){return}$(window).on("message",null);authData=$.parseJSON(e.originalEvent.data);if(!authData||!authData.access_token){t()}n.setRefreshingToken(false);D(authData);a(function(){r=k.shift();while(r){r.execute(n.getOAuthToken());r=k.shift()}})});if(_.isFunction(M)){M(e.payload.url,"_blank","width=600,height=400,centerscreen=1,resizable=1")}},isExternalLogin:function(){return y},setExternalLogin:function(e){y=e},setExternalLoginUICallback:function(e){if(_.isFunction(e)){M=e}},getStateProperty:function(e){return o[e]},setStateProperty:function(e,t){o[e]=t},clearStateProperty:function(e){delete o[e]},resetState:function(){o={}}}}return{getInstance:function(t){return e||this.createInstance(t)},createInstance:function(t){e=new f(t);if(!("crosstab"in window)||!crosstab.supported){return e}crosstab(function(){crosstab.on("auth:refresh",_.bind(function(){if(this._runningRefreshToken){return}this._runningRefreshToken=true;var e=this;this.login(null,{refresh:true},{complete:function(){crosstab.broadcast("auth:refresh:complete","complete")},success:function(){delete e._runningRefreshToken;crosstab.broadcast("auth:refresh:complete","success")},error:function(){delete e._runningRefreshToken;crosstab.broadcast("auth:refresh:complete","error")}})},e))});return e},getCallsInProgressCount:function(){return i},HttpError:l,HttpRequest:u}}();e.exports=n},function(e,t){var n=window.SUGAR;var n=n||{};n.App=function(){var e,t={};var r=false;var i=[];var a=function(e){return e instanceof $?e:$(e)};function s(e){var t=_.uniqueId("SugarApp_");e=e||{};return _.extend({appId:t,$rootEl:a(e.el||"body"),$contentEl:a(e.contentEl||"#content"),additionalComponents:{}},this,Backbone.Events)}return{init:function(t){e=e||_.extend(this,new s(t));_.extend(e,e.beforeEvent);e.events.register("app:init",this);e.events.register("app:start",this);e.events.register("app:sync",this);e.events.register("app:sync:complete",this);e.events.register("app:sync:error",this);e.events.register("app:sync:public:error",this);e.events.register("app:login",this);e.events.register("app:login:success",this);e.events.register("app:logout",this);e.events.register("app:view:change",this);e.events.register("app:locale:change",this);e.events.register("lang:direction:change",this);if(e.cache){e.cache.init(this)}var r=e.utils.capitalize(e.config?e.config.appId:"")+"Controller";var i=this[r]||this.Controller;this.controller=new i;e.api=n.Api.getInstance({defaultErrorHandler:t&&t.defaultErrorHandler?t.defaultErrorHandler:n.App.error.handleHttpError,serverUrl:e.config.serverUrl,platform:e.config.platform,timeout:e.config.serverTimeout,keyValueStore:e[e.config.authStore||"cache"],clientID:e.config.clientID,disableBulkApi:e.config.disableBulkApi,externalLoginUICallback:t&&t.externalLoginUICallback});this._init(t);return e},_init:function(t){var n=this;var r=function(r){if(!e){return}if(r){n.trigger("app:sync:public:error",r);return}n._initModules();n._loadConfig();n._initRaven();if(!t.silent){e.trigger("app:init",n)}if(t.callback&&_.isFunction(t.callback)){t.callback(e)}};var i=function(t){if(e.config.loadCss){e.loadCss(t)}else{t()}};if(e.config.syncConfig!==false){var a={getPublic:true};i(function(){e.metadata.sync(r,a)})}else{i(function(){r()})}return e},_initModules:function(){_.each(t,function(e){if(_.isFunction(e.init)){e.init(this)}},this)},_loadConfig:function(){e.config=e.config||{};e.config=_.extend(e.config,e.metadata.getConfig())},_initRaven:function(){if(e.config.raven){e.raven.initialize(e.config.raven)}},loadCss:function(t){e.api.css(e.config.platform,e.config.themeName,{success:function(n){if(e.config.loadCss==="url"){_.each(n.url,function(t){$("<link>").attr({rel:"stylesheet",href:e.utils.buildUrl(t)}).appendTo("head")})}else{_.each(n.text,function(e){$("<style>").html(e).appendTo("head")})}if(_.isFunction(t)){t()}}})},start:function(){e.events.registerAjaxEvents();e.trigger("app:start",this);e.routing.start()},destroy:function(){if(Backbone.history){Backbone.history.stop()}e=null},augment:function(n,r,i){this[n]=r;t[n]=r;if(i&&r.init&&_.isFunction(r.init)){r.init.call(r,e)}},sync:function(t){var n=this;t=t||{};if(t.getPublic){return n.syncPublic(t)}if(t.callback){i.push(t.callback)}if(r){return}r=true;async.waterfall([function(r){n.isSynced=false;n.trigger("app:sync");var i=!t.noUserUpdate&&(t.language||e.cache.get("langHasChanged"));if(i){var a=t.language||e.lang.getLanguage();n.user.updateLanguage(a,r);e.cache.cut("langHasChanged")}else{r()}},function(e){async.parallel([function(e){n.user.load(e)},function(e){n.metadata.sync(function(t){n.data.declareModels();e(t)},t)}],function(t){e(t)})},function(e){var t=n.metadata.getServerInfo();n.config.sugarLogic=n.config.sugarLogic||{};if(t&&n.config.sugarLogic.enabled&&n.utils.versionCompare(t.version,n.config.sugarLogic.minServerVersion,">=")){n.fetchSugarLogic(e);

}else{n.config.sugarLogic.enabled=false;e()}},function(e){if(n.offline){n.offline.start({migrate:true,callback:e})}else e()}],function(e){if(e){n.trigger("app:sync:error",e)}else{n.isSynced=true;n.trigger("app:sync:complete")}_.each(i,function(t){t(e)});r=false;i=[]})},syncPublic:function(e){e=e||{};e.getPublic=true;this.metadata.sync(e.callback,e)},navigate:function(t,n,r){var i,a,s;t=t||e.controller.context;n=n||t.get("model");a=n.id;s=t.get("module")||n.module;i=this.router.buildRoute(s,a,r);this.router.navigate(i,{trigger:true})},login:function(t,n,r){r=r||{};n=n||{};n.current_language=e.lang.getLanguage();e.api.login(t,n,{success:function(n){e.trigger("app:login:success",n,t.username);if(r.success)r.success(n)},error:function(t){e.error.handleHttpError(t);if(r.error)r.error(t)},complete:r.complete})},logout:function(t,n,r){var i,a;t=t||{};i=t.complete;a=t.error;t.complete=function(t){e.trigger("app:logout",n);if(i){i(t)}};t.error=function(t){e.error.handleHttpError(t);if(a)a(t)};return e.api.logout(t,r)},fetchSugarLogic:function(t){if(e.config.sugarLogic.isDynamic){e.api.call("read",e.api.buildURL("ExpressionEngine","functions"),null,{success:function(n){e.cacheSugarLogicExpressions(n);e.loadSugarLogic(n,t)},error:function(e){t(e)}},{dataType:"application/text"})}else t()},cacheSugarLogicExpressions:function(t){e.cache.set("sugarlogic",t)},_loadSugarLogic:function(){return e.cache.get("sugarlogic")},loadSugarLogic:function(t,n){return e.compileJs(t||e._loadSugarLogic(),n)},compileJs:function(t,n){try{eval.call(window,t);if(n)n()}catch(r){e.logger.fatal("Failed to compile js");if(n)n(r);return r}return null},isServerCompatible:function(e){var t=this.config.supportedServerFlavors,n=this.config.minServerVersion,r,i,a;if(_.isEmpty(t)&&!n){return true}r=!!(_.isEmpty(t)||e&&_.contains(t,e.flavor));i=!!(!n||e&&this.utils.versionCompare(e.version,n,">="));if(r&&i){return true}else if(!i){a={code:"server_version_incompatible",label:"ERR_SERVER_VERSION_INCOMPATIBLE"}}else{a={code:"server_flavor_incompatible",label:"ERR_SERVER_FLAVOR_INCOMPATIBLE"}}a.server_info=e;return a},modules:t}}()},function(module,exports){(function(app){var _doWhenStack=[],_doWhenLocked=false,_doWhenInterval=false,_doWhenretryCount=0,_startDoWhenInterval=function(){if(!_doWhenInterval){_doWhenInterval=window.setInterval(app.utils._doWhenCheck,50)}};app.augment("utils",{capitalize:function(e){return e?e.charAt(0).toUpperCase()+(e.length>1?e.substr(1):""):""},capitalizeHyphenated:function(e){return this._classify(e,"-")},classify:function(e){return this._classify(e,"_")},_classify:function(e,t){var n=this,r="";t=t||"_";if(!e||e.lastIndexOf(t)===-1){r=n.capitalize(e)}else{var i=e.split(t);_.each(i,function(e){r+=n.capitalize(e)})}return r},extendClass:function(e,t,n,r,i){var a;if(!_.isObject(r)){a=e[n]=t;return a}if(_.isObject(r.extendsFrom)){app.logger.warn("Extending a component directly from an object is deprecated since 7.8. "+'Please update "'+n+"\"'s `extendsFrom` to be the class name.");a=e[n]=r.extendsFrom.extend(r);return a}if(!r.extendsFrom){a=e[n]=t.extend(r);return a}var s=e[i+"Custom"+r.extendsFrom]||e[i+r.extendsFrom]||e["Custom"+r.extendsFrom]||e[r.extendsFrom];if(!s){app.logger.warn('The "'+r.extendsFrom+'" component was not found to be used as '+'the "'+n+"\"'s parent. Please update your code to point to an existing class.");s=t}a=e[n]=s.extend(r);return a},formatNumber:function(e,t,n,r,i){t=t||n;var a=e;if(_.isNaN(e)||!_.isFinite(e)){return a}if(_.isString(e)){e=parseFloat(e,10);if(_.isNaN(e)){return a}}if(!_.isNumber(e)){if(!_.isNull(e)&&!_.isUndefined(e)){app.logger.warn("formatNumber: invalid variable type ("+typeof a+")")}return a}if(_.isString(n)){n=parseInt(n)}e=Big(e).toFixed(n);return _.isString(r)&&_.isString(i)?this.addNumberSeparators(e,r,i):e},formatNumberLocale:function(e){return this.formatNumber(e,app.user.getPreference("decimal_precision")||2,app.user.getPreference("decimal_precision")||2,app.user.getPreference("number_grouping_separator")||",",app.user.getPreference("decimal_separator")||".")},formatName:function(e,t){return t.replace(/(f)|(l)|(s)/g,function(t,n,r,i){if(n){return e.first_name||""}if(r){return e.last_name||""}if(i&&(e.last_name||e.first_name)){return e.salutation||""}return""}).replace(/^( )?,/g,"").replace(/, $/g,"").replace(/  /g," ").trim()},formatNameModel:function(e,t,n){n=n||app.user.getPreference("default_locale_name_format");t=t||{};var r=app.metadata.getModule(e)||{fields:{}};var i=r.nameFormat||{};return _.reduce(n.split(""),function(e,n){if(n<"a"||n>"z"){return e+n}if(!i[n]){return e}var a,s=r.fields[i[n]]&&r.fields[i[n]].type==="enum"&&!_.isEmpty(r.fields[i[n]].options);if(s){var o=app.lang.getAppListStrings(r.fields[i[n]].options);a=o[t[i[n]]]||t[i[n]]||""}return e+(a||t[i[n]]||"")},"").replace(/^( )?,/g,"").replace(/, +$/g,"").replace(/  /g," ").trim()},formatNameLocale:function(e){return this.formatName(e,app.user.getPreference("default_locale_name_format"))},addNumberSeparators:function(e,t,n){var r=e.split(".");var i=/(\d+)(\d{3})/;while(t!==""&&i.test(r[0])){r[0]=r[0].toString().replace(i,"$1"+t+"$2")}return r[0]+(r.length>1&&r[1]!==""?n+r[1]:"")},unformatNumberString:function(e,t,n,r){r=r||false;if(typeof t==="undefined"||typeof n==="undefined"){return e}if(!_.isString(e)){if(_.isFinite(e)){e.toString()}else{e=""}}if(t!==""){var i=new RegExp("\\"+t,"g");e=e.replace(i,"")}e=e.replace(n,".");if(e.length>0&&r){var a=parseFloat(e);if(a==e){return a}}return e},unformatNumberStringLocale:function(e,t){return this.unformatNumberString(e,app.user.getPreference("number_grouping_separator")||",",app.user.getPreference("decimal_separator")||".",t)},formatString:function(e,t){for(var n in t){e=e.replace("{"+n+"}",t[n])}return e},regexEscape:function e(t){if(typeof e.specialRegExp=="undefined"){var n=["/",".","*","+","?","|","(",")","[","]","{","}","\\","-",",","^","$","#"];e.specialRegExp=new RegExp("(\\"+n.join("|\\")+")","g")}return t.replace(e.specialRegExp,"\\$1")},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})},cookie:{setCookie:function(e,t,n,r){var i=new Date,a;i.setDate(i.getDate()+n);a=encodeURIComponent(t);if(n){a+="; expires="+i.toUTCString()}if(r){a+="; path="+r}document.cookie=e+"="+a},getCookie:function(e){var t,n,r,i=document.cookie.split(";");for(t=0;t<i.length;t++){n=i[t].substr(0,i[t].indexOf("="));r=i[t].substr(i[t].indexOf("=")+1);n=n.replace(/^\s+|\s+$/g,"");if(n===e){return decodeURIComponent(r)}}}},isValidEmailAddress:function(e){return/^.+@.+$/gi.test(e)},doWhen:function(e,t,n,r){_doWhenStack.push({check:e,fn:t,obj:n,overrideContext:r});_doWhenretryCount=50;_startDoWhenInterval()},_doWhenCheck:function(){if(_doWhenStack.length===0){_doWhenretryCount=0;if(_doWhenInterval){clearInterval(_doWhenInterval);_doWhenInterval=null}return}if(_doWhenLocked){return}_doWhenLocked=true;var tryAgain=$.isReady;if(!tryAgain){tryAgain=_doWhenretryCount>0&&_doWhenStack.length>0}var notAvail=[];var executeItem=function(e,t){if(t.overrideContext){if(t.overrideContext===true){e=t.obj}else{e=t.overrideContext}}if(t.fn){t.fn.call(e,t.obj)}};var i,len,item,test;for(i=0,len=_doWhenStack.length;i<len;i=i+1){item=_doWhenStack[i];if(item){test=item.check;if(typeof test=="string"&&eval(test)||typeof test=="function"&&test()){executeItem(this,item);_doWhenStack[i]=null}else{notAvail.push(item)}}}_doWhenretryCount--;if(tryAgain){for(i=_doWhenStack.length-1;i>-1;i--){item=_doWhenStack[i];if(!item||!item.check){_doWhenStack.splice(i,1)}}_startDoWhenInterval()}else{if(_doWhenInterval){clearInterval(_doWhenInterval);_doWhenInterval=null}}_doWhenLocked=false},versionCompare:function(e,t,n){return version_compare(e,t,n)},extendFrom:function(e,t,n){e.prototype=new t;_.extend(e.prototype,n)},deepCopy:function(e){return _.isObject(e)?JSON.parse(JSON.stringify(e)):e},compareBeans:function(e,t){var n;if(e.module!==t.module){throw Error("Only beans of the same module can be compared.")}n=_.reduce(e.attributes,function(n,r,i){if(i!=="id"&&i.indexOf("_")!==0){if(!this.areBeanValuesEqual(r,t.get(i))&&this.hasDefaultValueChanged(i,e)){n.push(i)}}return n},[],this);return n},areBeanValuesEqual:function(e,t){var n=function(e){if(_.isObject(e)&&_.isEmpty(e)){return""}else if(!_.isObject(e)&&(_.isUndefined(e)||_.isNull(e))){return""}else{return e}};e=n(e);t=n(t);return _.isObject(e)&&_.isEqual(e,t)||!_.isObject(e)&&e===t},hasDefaultValueChanged:function(e,t){var n=t._defaults?t._defaults[e]:"";return!this.areBeanValuesEqual(n,t.get(e))},isConnectivityError:function(e){return e.status===0||e.textStatus==="timeout"},getTimestamp:function(e,t){t=t||{};var n=e?new Date(e):new Date,r=n.toISOString();if(!t.msecPrecision){r=r.replace(/\.\d{3}/,"")}return r.replace(/Z/,"+00:00")},buildUrl:function(e){if(e.indexOf("http")!==0&&!_.isEmpty(app.config.siteUrl)){e=app.config.siteUrl.replace(/\/+$/,"")+"/"+e}return e},getChangedProps:function(e,t,n){function r(e){if(_.isObject(e)){if(_.isArray(e)){return"array"}return"object"}return"other"}function i(e,t){if(n)return _.isEqual(e,t);var a=r(e),s=r(t);if(a===s&&_.contains(["object","array"],a)){if(a==="array"&&e.length!==t.length){return false}var o=_.keys(e),l=_.keys(t);if(o.length!==l.length||!_.isEqual(o.sort(),l.sort())){return false}return!_.any(e,function(n,r){return!i(e[r],t[r])})}else{return n?e===t:e==t}}var a={};_.each(e,function(n,r){if(!i(e[r],t[r])){a[r]=n}});return a},getParentLayout:function(e){var t;if(e.view&&e.view.layout){t=e.view.layout}else{t=e.layout}return t},isSortable:function(e,t){var n=app.metadata.getModule(e).fields[t.name],r=true;if(n&&!_.isUndefined(n.sortable)){r=n.sortable}if(t&&!_.isUndefined(t.sortable)){r=t.sortable}return r},stripHttpPrefix:function(e){return e.replace(/^https?:\/\//,"")},hardRefresh:function(){window.location.reload(true)},isDirectionRTL:function(e){var t="A-Za-z-----"+"---",n="---",r=new RegExp("^[^"+t+"]*["+n+"]");return r.test(e)}})})(SUGAR.App)},function(e,t){(function(e){var t="";var n=function(t){if(_.isFunction(t)||_.isDate(t)||_.isRegExp(t)||t instanceof HTMLElement){e.logger.warn("Core.CacheManager: Providing any of Function, Date, RegExp, or HTMLElement to "+"the cache manager is deprecated in 7.8 and will be removed in 7.9")}};var r=function(e){return t+e};var i={store:stash,init:function(){t=e.config.env+":"+e.config.appId+":";e.events.register("cache:clean",this)},has:function(e){if(this.store===stash){return window.localStorage.getItem(r(e))!==null}else{this.store.has(r(e))}},get:function(e){n(e);return this.store.get(r(e))},set:function(e,t){n(t);try{this.store.set(r(e),t)}catch(i){if(i.name.toLowerCase().indexOf("quota")>-1){this.clean();this.store.set(r(e),t)}}},add:function(t,n){e.logger.warn("Core.CacheManager#add: This method has been deprecated since 7.8 "+"and will be removed in 7.9");try{this.store.add(r(t),n)}catch(i){if(i.name.toLowerCase().indexOf("quota")>-1){this.clean();this.store.add(r(t),n)}}},clean:function(){var e=[],t={};this.trigger("cache:clean",function(t){e=_.union(t,e)});_.each(e,function(e){t[e]=this.get(e)},this);this.cutAll();_.each(t,function(e,t){if(!_.isUndefined(e)){this.set(t,e)}},this)},cut:function(e){if(this.store.has(r(e))){this.store.cut(r(e))}},cutAll:function(e){if(e===true)return this.store.cutAll();var n=this.store.getAll();var r=_.keys(n);for(var i=0,a=r.length;i<a;i++){if(r[i].indexOf(t)===0){this.store.cut(r[i])}}}};_.extend(i,Backbone.Events);e.augment("cache",i)})(SUGAR.App)},function(e,t){(function(e){e.augment("events",_.extend({register:function(e,t){t.on(e,function(){var t=[].slice.call(arguments,0);t.unshift(e);this.trigger.apply(this,t)},this)},unregister:function(e,t){e.off(t)},registerAjaxEvents:function(){var e=this;$(document).off("ajaxStop");$(document).off("ajaxStart");$(document).on("ajaxStart",function(t){e.trigger("ajaxStart",t)});$(document).on("ajaxStop",function(t){e.trigger("ajaxStop",t)})}},Backbone.Events))})(SUGAR.App)},function(e,t){(function(e){var t=/\s+/;var n=function(e,n,r,i){if(!r)return true;if(typeof r==="object"){for(var a in r){e[n].apply(e,[a,r[a]].concat(i))}return false}if(t.test(r)){var s=r.split(t);for(var o=0,l=s.length;o<l;o++){e[n].apply(e,[s[o]].concat(i))}return false}return true};var r=function(e,t){var n=false;var r,i,a=-1,s=e.length;switch(t.length){case 0:case 1:case 2:case 3:while(++a<s)n=(r=e[a]).callback.call(r.ctx,t[0],t[1],t[2])===false||n;break;default:while(++a<s)n=(r=e[a]).callback.apply(r.ctx,t)===false||n}return!n};_.extend(e,{beforeEvent:{before:function(e,t,r){if(!n(this,"before",e,[t,r])||!t){return this}this._before=this._before||{};var i=this._before[e]||(this._before[e]=[]);i.push({callback:t,context:r,ctx:r||this});return this},triggerBefore:function(e){var n=false;if(!this._before){return!n}var i=Array.prototype.slice.call(arguments,1);if(t.test(e)){var a=e.split(t);for(var s=0,o=a.length;s<o;s++){n=!this.triggerBefore.apply(this,[a[s]].concat(i))||n}return!n}var l=this._before[e];var u=this._before.all;if(l){n=r(l,i)===false}if(u){n=r(u,i)===false||n}return!n},offBefore:function(e,t,r){var i,a,s,o,l,u,c,f;if(!this._before||!n(this,"offBefore",e,[t,r])){return this}if(!e&&!t&&!r){this._before=void 0;return this}o=e?[e]:_.keys(this._before);for(l=0,u=o.length;l<u;l++){e=o[l];s=this._before[e];if(s){this._before[e]=i=[];if(t||r){for(c=0,f=s.length;c<f;c++){a=s[c];if(t&&t!==a.callback||r&&r!==a.ctx){i.push(a)}}}if(!i.length){delete this._before[e]}}}return this}}})})(SUGAR.App)},function(e,t){(function(e){var t={plugins:{view:{},field:{},layout:{},model:{},collection:{}},_get:function(e,t){if(this.plugins[t]&&this.plugins[t][e]){return this.plugins[t][e]}},attach:function(e,t){_.each(e.plugins,function(n,r){var i=null;if(_.isObject(n)){var a=_.keys(n)[0];i=n[a];n=a}var s=this._get(n,t);if(s&&!this._isPluginDisabled(e,n)){var o=_.extend({},_.isFunction(e.events)?e.events():e.events,s.events);_.extend(e,s);if(i){_.extend(e,i);if(i.events){_.extend(o,i.events)}}e.events=o;if(_.isFunction(s.onAttach)){s.onAttach.call(e,e,s)}}},this)},detach:function(e,t){_.each(e.plugins,function(n){var r=this._get(n,t);if(r&&_.isFunction(r.onDetach)){r.onDetach.call(e,e,r)}},this)},_isPluginDisabled:function(e,t){return!!_.find(e.disabledPlugins,function(e){return e===t})},register:function(e,t,n){if(!_.isArray(t)){t=[t]}_.each(t,function(t){this.plugins[t]=this.plugins[t]||{};this.plugins[t][e]=n},this)}};e.augment("plugins",t,false)})(SUGAR.App)},function(e,t){(function(e){var t={init:function(){this.initialize()},initialize:function(e){e=e||{};this.remoteLogging=e.remoteLogging||false;this.statusCodes=e.statusCodes?_.extend(this.statusCodes,e.statusCodes):this.statusCodes;if(!e.disableOnError){this.enableOnError()}},_callCustomHandler:function(e,t,n){if(t){t.apply(this,_.union([e],n||[]))}else{this.handleStatusCodesFallback(e)}},_handleFineGrainedError:function(t,n){var r="handle"+e.utils.classify(t.code)+"Error";(this[r]||n||this.handleStatusCodesFallback).call(this,t)},statusCodes:{0:function(e,t,n){if(e.textStatus==="timeout"){this._callCustomHandler(e,this.handleTimeoutError)}else{this.handleStatusCodesFallback(e,t,n)}},400:function(e){this._handleFineGrainedError(e,this.handleUnspecified400Error)},401:function(e){this._handleFineGrainedError(e,this.handleUnauthorizedError)},403:function(e){this._callCustomHandler(e,this.handleForbiddenError)},404:function(e){this._callCustomHandler(e,this.handleNotFoundError,_.rest(arguments))},405:function(e){this._callCustomHandler(e,this.handleMethodNotAllowedError)},409:function(e){this._callCustomHandler(e,this.handleMethodConflictError)},412:function(e){this._callCustomHandler(e,this.handleHeaderPreconditionFailed)},422:function(e,t){e.model=t;this._callCustomHandler(e,this.handleValidationError,_.rest(arguments))},424:function(e,t){e.model=t;this._callCustomHandler(e,this.handleMethodFailureError,_.rest(arguments))},500:function(e){this._callCustomHandler(e,this.handleServerError)},502:function(e){this._callCustomHandler(e,this.handleServerError)},503:function(e){this._callCustomHandler(e,this.handleServerError)}},remoteLogging:false,errorName2Keys:{maxValue:"ERROR_MAXVALUE",minValue:"ERROR_MINVALUE",maxLength:"ERROR_MAX_FIELD_LENGTH",minLength:"ERROR_MIN_FIELD_LENGTH",datetime:"ERROR_DATETIME",required:"ERROR_FIELD_REQUIRED",email:"ERROR_EMAIL",primaryEmail:"ERROR_PRIMARY_EMAIL",duplicateEmail:"ERROR_DUPLICATE_EMAIL",number:"ERROR_NUMBER",isBefore:"ERROR_IS_BEFORE",isAfter:"ERROR_IS_AFTER",greaterThan:"ERROR_IS_GREATER_THAN",lessThan:"ERROR_IS_LESS_THAN"},getErrorString:function(t,n){var r=n.module||"";return e.lang.get(this.errorName2Keys[t]||t,r,n)},handleValidationError:function(t){var n=t.responseText;e.alert.dismissAll();_.each(n,function(t,n){var r="";if(_.isObject(t)){_.each(t,function(e,t){r+="(Message) "+this.getErrorString(t,e)+"\n"},this)}else{r=t}e.logger.debug("validation failed for field `"+n+"`:\n"+r)},this)},handleHttpError:function(t,n,r){if(e.error.statusCodes[t.status]){e.error.statusCodes[t.status].call(e.error,t,n,r)}else{e.error.handleStatusCodesFallback(t)}},handleUnhandledError:function(t,n,r){e.logger.fatal(t+" at "+n+" on line "+r)},handleStatusCodesFallback:function(t){e.logger.error(t.toString())},handleRenderError:function(t,n,r){var i="render_error_"+t.module+"_"+t.name;var a="error";var s,o;switch(n){case"_renderHtml":s=e.lang.get("ERR_RENDER_FAILED_TITLE");o=[e.lang.get("ERR_RENDER_FAILED_MSG"),e.lang.get("ERR_CONTACT_TECH_SUPPORT")];break;case"_renderField":s=e.lang.get("ERR_RENDER_FIELD_FAILED_TITLE");o=[e.utils.formatString(e.lang.get("ERR_RENDER_FIELD_FAILED_MSG"),[r.name]),e.lang.get("ERR_CONTACT_TECH_SUPPORT")];break;case"view_render_denied":s=e.lang.get("ERR_NO_VIEW_ACCESS_TITLE");a="warning";var l=e.lang.getModuleName(t.module,{plural:true});o=[e.utils.formatString(e.lang.get("ERR_NO_VIEW_ACCESS_MSG"),[l])];break;case"layout_render":s=e.lang.get("ERR_LAYOUT_RENDER_TITLE");o=[e.lang.get("ERR_LAYOUT_RENDER_MSG")];break;default:s=e.lang.get("ERR_GENERIC_TITLE");o=[e.lang.get("ERR_INTERNAL_ERR_MSG"),e.lang.get("ERR_CONTACT_TECH_SUPPORT")];e.logger.error("handleRenderError called for render error caught in "+n+", but we have no corresponding handler!");break}e.alert.show(i,{level:a,title:s,messages:o})},enableOnError:function(e,t){var n;var r=this;if(this.overloaded){return false}n=window.onerror;window.onerror=function(i,a,s){if(e){e.call(t)}else{r.handleUnhandledError(i,a,s)}if(n){n()}};this.overloaded=true;return true},throwErrorWithCallStack:function(e,t){if(_.isString(e)){e=new Error(e)}e.message=e.message+"; "+e.stack;if(t){return e}throw e}};e.augment("error",t,false)})(SUGAR.App)},function(module,exports){(function(app){var _header="(function() {\n  var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n",_footer="})();",_templates={},_sources={},_templateManager;_templateManager={init:function(){_templates=app.config.cacheMeta?app.cache.get("templates")||{}:{};var src="";_.each(_templates,function(e){src+=e});try{eval(_header+src+_footer)}catch(e){app.logger.error("Failed to eval templates retrieved from local storage:\n"+e)}},_add:function(e,t,n){var r=e[0],i=this.get(r,false);if(i&&!n){return}if(i&&n&&_sources[r]!=t){_templates[r]=Handlebars.templates[r]=null}_sources[r]=t},_compile:function(e,t,n){Handlebars.templates=Handlebars.templates||{};_templates[e[0]]=Handlebars.templates[e[0]]=n||!e[1]?this.compile(e[0],t):e[1];return _templates[e[0]]},compile:function(key,src){try{_templates[key]="templates['"+key+"'] = template("+Handlebars.precompile(src)+");\n";eval(_header+_templates[key]+_footer)}catch(e){app.logger.error("Failed to compile or eval template "+key+".\n"+e)}return this.get(key,false)||this.empty},get:function(e,t){t=_.isUndefined(t)||t;if(t&&!Handlebars.templates[e]&&_sources[e]){this._compile([e],_sources[e])}return Handlebars.templates?Handlebars.templates[e]:null},_getView:function(e,t,n){var r=e+(t?"."+t:"");return[r,this.get(r,n)]},getView:function(e,t){return this._getView(e,t,true)[1]},_getField:function(e,t,n,r,i,a){var s,o="f."+e+".",l=o+(n?n+".":"")+t;n+=".";s=this.get(o+n+t,a)||this.get(o+t,a);if(!s&&!i){s=this.get(o+n+r,a)||this.get(o+r,a);if(!s){s=this.get("f.base."+t,a)||this.get("f.base."+r,a)}}return[l,s]},getField:function(e,t,n,r){return this._getField(e,t,n,r,false,true)[1]},_getLayout:function(e,t,n){var r="l."+(t?t+".":"")+e;return[r,this.get(r,n)]},getLayout:function(e,t){return this._getLayout(e,t,true)[1]},setView:function(e,t,n,r){return this._add(this._getView(e,t,false),n,r)},setField:function(e,t,n,r,i){return this._add(this._getField(e,t,n,null,true,false),r,i)},setLayout:function(e,t,n,r){return this._add(this._getLayout(e,t,false),n,r)},set:function(e,t){if(e.views){_.each(e.views,function(e,n){if(n!="_hash"){_.each(e.templates,function(e,r){r=n==r?r:n+"."+r;this.setView(r,null,e,t)},this)}},this)}if(e.fields){_.each(e.fields,function(e,n){if(n!="_hash"){_.each(e.templates,function(e,r){this.setField(n,r,null,e,t)},this)}},this)}if(e.layouts){_.each(e.layouts,function(e,n){if(n!="_hash"){_.each(e.templates,function(e,r){r=n==r?r:n+"."+r;this.setLayout(r,null,e,t)},this)}},this)}},empty:function(){return""}};app.augment("template",_templateManager)})(SUGAR.App)},function(e,t){(function(e){e.Context=Backbone.Model.extend({initialize:function(e){Backbone.Model.prototype.initialize.call(this,e);this.id=this.cid;this.parent=null;this.children=[];this._fetchCalled=false},clear:function(e){var t=this.get("collection");if(t){t.abortFetchRequest()}e=_.extend({clearAllListeners:true},e||{});_.each(this.children,function(t){t.clear(e)});this.children=[];this.parent=null;_.each(this.attributes,function(t){if(t&&t.off===Backbone.Events.off){if(e.clearAllListeners){t.off();if(_.isFunction(t.dispose)){t.dispose()}}else{t.off(null,null,this)}}},this);delete e.clearAllListeners;this.off();Backbone.Model.prototype.clear.call(this,e);this.resetLoadFlag()},resetLoadFlag:function(t){if(_.isBoolean(t)){e.logger.warn("The signature of `Core.Context#resetLoadFlag` is deprecated, please update"+"your code.  Now you need to pass an object of options instead of a boolean. We will"+"remove the support of the old signature in 7.9.");t={recursive:t}}t=t||{};var n=_.isUndefined(t.recursive)?true:t.recursive;var r=_.isUndefined(t.resetModel)?true:t.resetModel;var i=_.isUndefined(t.resetCollection)?true:t.resetCollection;this._fetchCalled=false;if(this.get("model")&&r){this.get("model").dataFetched=false}if(this.get("collection")&&i){this.get("collection").dataFetched=false}if(n){_.each(this.children,function(e){e.resetLoadFlag()})}},isCreate:function(){return this.get("create")===true},getChildContext:function(t){var n,r=t.forceNew||false;delete t.forceNew;var i=t.cid||t.name||t.link||t.module;if(i&&!r){n=_.find(this.children,function(e){return e.cid==i||e.get("link")==i||e.get("module")==i})}if(!n){n=e.context.getContext(t);this.children.push(n);n.parent=this}if(t.link){var a=this.get("model");n.set({parentModel:a,parentModule:a?a.module:null})}else if(!t.module){n.set({module:this.get("module")})}this.trigger("context:child:add",n);return n},prepare:function(e){if(!e&&(this.get("model")||this.get("collection")))return;var t=this.get("modelId"),n=this.get("create"),r=this.get("link");this.set(r?this._prepareRelated(r,t,n):this._prepare(t,n));return this},_prepare:function(t,n){var r,i,a=this.get("module"),s=this.get("mixed"),o;if(t){r=e.data.createBean(a,{id:t});o=[r]}else if(n===true){r=e.data.createBean(a);o=[r]}else{r=e.data.createBean(a)}i=s===true?e.data.createMixedBeanCollection(o):e.data.createBeanCollection(a,o);return{collection:i,model:r}},_prepareRelated:function(t,n,r){var i,a,s=this.get("parentModel");s=s||e.data.createBean(this.get("parentModule"),{id:this.get("parentModelId")});if(n){i=e.data.createRelatedBean(s,n,t);a=e.data.createRelatedCollection(s,t,[i])}else if(r===true){i=e.data.createRelatedBean(s,null,t);a=e.data.createRelatedCollection(s,t,[i])}else{i=e.data.createRelatedBean(s,null,t);a=e.data.createRelatedCollection(s,t)}if(!this.has("parentModule")){this.set({parentModule:s.module},{silent:true})}if(!this.has("module")){this.set({module:i.module},{silent:true})}return{parentModel:s,collection:a,model:i}},addFields:function(e){if(!e){return}var t=_.union(e,this.get("fields")||[]);return this.set("fields",t)},loadData:function(t){if(this.isDataFetched()||this.get("create")===true)return;var n,r=this.get("modelId"),i=this.get("module"),a=e.config.orderByDefaults&&i?e.config.orderByDefaults[i]:null;t=t||{};n=r?this.get("model"):this.get("collection");if(a&&n instanceof e.BeanCollection&&!n.orderBy){n.orderBy=a}if(n&&(n instanceof e.Bean||n instanceof e.BeanCollection)){if(this.get("dataView")&&_.isString(this.get("dataView"))){n.setOption("view",this.get("dataView"))}if(this.get("fields")){n.setOption("fields",this.get("fields"))}if(this.get("limit")){n.setOption("limit",this.get("limit"))}if(this.get("module_list")){n.setOption("module_list",this.get("module_list"))}if(this.get("viewed")){n.setOption("viewed",this.get("viewed"))}t.context=this;if(this.get("skipFetch")!==true){n.fetch(t)}this._fetchCalled=true}else{e.logger.warn("Skipping fetch because model is not Bean, Bean Collection, or it is not defined, module: "+this.get("module"))}},reloadData:function(e){e=e||{};this.resetLoadFlag(e);this.loadData(e);this.trigger("reload",this,e)},isDataFetched:function(){var e=this.get("modelId")?this.get("model"):this.get("collection");return this._fetchCalled||e&&!!e.dataFetched}});e.augment("context",{getContext:function(t){return new e.Context(t)}})})(SUGAR.App)},function(e,t){(function(e){var t=Backbone.View.extend({initialize:function(){this.context=e.context.getContext();e.events.on("app:sync:complete",function(){e.api.setStateProperty("loadingAfterSync",true);_.each(e.additionalComponents,function(e){if(e&&_.isFunction(e._setLabels)){e._setLabels()}e.render()});e.router.reset();e.api.clearStateProperty("loadingAfterSync")});e.events.on("app:login:success",function(){e.sync()})},loadView:function(t){var n=this.layout;if(!e.triggerBefore("app:view:change")||!e.triggerBefore("app:view:load")){return}this.context.clear({silent:true});this.context.set(t);this.context.prepare();this.layout=e.view.createLayout({name:t.layout,module:t.module,context:this.context});if(n){var r=document.createDocumentFragment();r.appendChild(n.el)}e.$contentEl.append(this.layout.$el);this.layout.initComponents();if(!t||t&&!t.skipFetch){this.layout.loadData()}this.layout.render();if(n){n.dispose()}e.trigger("app:view:change",t.layout,t)},loadAdditionalComponents:function(t){if(!_.isEmpty(e.additionalComponents)){e.logger.error("`app.controller.loadAdditionalComponents` has already been called. It can not be called twice.");return}e.additionalComponents={};_.each(t,function(t,n){if(t.target){var r=this.$(t.target);if(!r.get(0)){e.logger.error('Unable to place additional component "'+n+'": the target specified does not exist.');return}if(t.layout){e.additionalComponents[n]=e.view.createLayout({context:this.context,type:t.layout,el:r});e.additionalComponents[n].initComponents()}else{e.additionalComponents[n]=e.view.createView({type:t.view||n,context:this.context,el:r})}e.additionalComponents[n].render()}else{e.logger.error('Unable to place additional component "'+n+'": no target specified.')}},this)}});e.augment("Controller",t,false);e.events.on("app:init",function(e){e.controller.setElement(e.$rootEl)},e.controller).on("app:start",function(e){e.controller.loadAdditionalComponents(e.config.additionalComponents)})})(SUGAR.App)},function(e,t){(function(e){var t;e.augment("routing",{beforeRoute:function(t,n){if(!this.triggerBefore("route",{route:t,args:n}))return false;if(_.indexOf(e.config.unsecureRoutes,t)>=0)return true;if(!e.api.isAuthenticated()){e.router.login();return false}else if(!e.isSynced){Backbone.history.stop();e.sync();return false}return true},after:function(e,t){},setRoutes:function(e){t=e},start:function(){var n={};if(t){n.customRoutes=t}e.augment("router",new e.Router(n),false);e.events.trigger("router:start",e.router);e.router.init();e.router.start()},stop:function(){e.router.stop();t=[]}});_.extend(e.routing,e.beforeEvent);e.Router=Backbone.Router.extend({initialize:function(e){e=e||{};this._previousFragment="";this._currentFragment="";if(e.customRoutes){this.customRoutes=e.customRoutes;this._bindCustomRoutes()}},_bindCustomRoutes:function(){if(!this.customRoutes)return;this.customRoutes.reverse();_.each(this.customRoutes,function(e){this.route(e.route,e.name,e.callback)},this)},_routeHandler:function(t){var n=Array.prototype.slice.call(arguments,1),r=t.route;if(e.routing.beforeRoute(r,n)){this._previousFragment=this._currentFragment;this._currentFragment=this.getFragment();t.apply(this,n);e.routing.after(r,n)}},_moduleExists:function(t){if(t&&_.isUndefined(e.metadata.getModule(t))){e.error.handleHttpError({status:404});return false}return true},_addDefaultRoutes:function(){var t=[{name:"not_found",route:/^.*$/,callback:function(){e.error.handleHttpError({status:404})}}];this.addRoutes(t)},route:function(e,t,n){if(!n)n=this[t];n.route=t;n=_.wrap(n,this._routeHandler);Backbone.Router.prototype.route.call(this,e,t,n)},getFragment:function(){return Backbone.history.getFragment()},navigate:function(e,t){Backbone.Router.prototype.navigate.apply(this,arguments);if(!(t&&t.trigger)){this._previousFragment=this._currentFragment;this._currentFragment=this.getFragment()}return this},getPreviousFragment:function(){return this._previousFragment},goBack:function(){e.logger.debug("Navigating back...");window.history.back()},go:function(e){window.history.go(e)},init:function(){this._addDefaultRoutes();e.events.trigger("router:init")},start:function(){if(!Backbone.History.started){Backbone.history.start()}},stop:function(){Backbone.history.stop()},reset:function(){e.router.stop();t=[];Backbone.history.handlers=[];e.router.init();e.router.start()},addRoutes:function(e){if(!e)return;var t=e.reverse();_.each(t,function(e){this.route(e.route,e.name,e.callback)},this)},refresh:function(){Backbone.history.loadUrl(Backbone.history.fragment)},buildRoute:function(t,n,r){var i;if(e.utils&&_.isFunction(e.utils.customBuildRoute)){i=e.utils.customBuildRoute.apply(this,arguments);if(!_.isEmpty(i)){return i}}if(t){i=_.isString(t)?t:t.get("module");if(n){i+="/"+n}if(r){i+="/"+r}}else{i=r}return i},index:function(){e.logger.debug("Route changed to index");if(e.config.defaultModule){this.navigate(e.config.defaultModule,{trigger:true})}else if(e.acl.hasAccess("read","Home")){this.navigate("Home",{trigger:true})}},list:function(t){if(!this._moduleExists(t)){return}e.logger.debug("Route changed to list of "+t);e.controller.loadView({module:t,layout:"records"})},layout:function(t,n){if(!this._moduleExists(t)){return}e.logger.debug("Route changed to layout: "+n+" for "+t);e.controller.loadView({module:t,layout:n})},create:function(t){if(!this._moduleExists(t)){return}e.logger.debug("Route changed: create "+t);e.controller.loadView({module:t,create:true,layout:"edit"})},login:function(){e.logger.debug("Logging in");e.controller.loadView({module:"Login",layout:"login",create:true});e.events.trigger("app:login");if(e.config.externalLogin){e.api.ping(null,{success:function(){e.events.trigger("app:login:success");e.router.refresh()},error:function(){e.alert.show("needs_login_error",{level:"error",messages:e.lang.getAppString("LBL_PORTAL_INVALID_CREDS_TITLE"),title:e.lang.get("LBL_PORTAL_INVALID_CREDS_TITLE")})}})}},logout:function(t){if(!e.api.isAuthenticated()){this.redirect("/");return}t=t==="1";e.logger.debug("Logging out: "+t);e.logout({complete:function(){e.router.navigate("#");if(t){window.location.reload()}else{if(e.config.externalLogin){e.controller.loadView({module:"Login",layout:"logout",skipFetch:true,create:true})}else{e.router.login();

}}},success:function(t,n){e.events.trigger("app:logout:success",t)}},t)},record:function(t,n,r,i){if(!this._moduleExists(t)){return}var a=e.controller.context.get("collection"),s=e.controller.context.get("listCollection"),o={module:t,layout:i||"record",action:r||"detail"};if(n!=="create"){_.extend(o,{modelId:n})}else{_.extend(o,{create:true});o.layout="create"}if(a&&a.module===t&&a.get(n)){o.listCollection=a}if(s&&s.module===t&&s.get(n)){o.listCollection=s}e.controller.loadView(o)},redirect:function(e,t){this.navigate(e,_.extend({trigger:true,replace:true},t))}})})(SUGAR.App)},function(e,t){(function(e){e.augment("lang",{direction:"ltr",get:function(e,t,n){var r=this.getModString(e,t,n)||this.getAppString(e,n)||e;return r},getModString:function(e,t,n){var r;if(_.isArray(t)){_.find(t,function(t){r=this._get("mod_strings",e,t,n);return!_.isEmpty(r)},this)}else{r=this._get("mod_strings",e,t,n)}return r},getAppString:function(e,t){return this._get("app_strings",e,null,t)},getAppListStrings:function(t){var n=e.metadata.getStrings("app_list_strings")[t]||{};if(_.isArray(n)){var r={};_.each(n,function(e){if(_.isString(e)){r[e]=e}else if(_.isArray(e)&&e.length===2){r[e[0]]=e[1]}});n=r}return n},getModuleName:function(e,t){t=t||{};var n=!t.plural&&this.getModString("LBL_MODULE_NAME_SINGULAR",e)||this.getModString("LBL_MODULE_NAME",e);if(!n&&!_.isUndefined(t.defaultValue)){n=this.get(t.defaultValue)}return n||e},getAppListKeys:function(t){var n=[],r=e.metadata.getStrings("app_list_strings")[t]||{};if(_.isArray(r)){_.each(r,function(e){if(e.length===2){n.push(e[0])}})}else if(_.isObject(r)){n=_.keys(r)}return n},_get:function(t,n,r,i){var a,s=e.metadata.getStrings(t);s=r?s[r]:s;if(!s||!_.isString(s[n])){return}a=this._sanitize(s[n]);if(!_.isUndefined(i)&&a.indexOf("{{")>-1){n="lang."+(r?n+"."+r:n);var o=Handlebars.templates[n];a=o?o(i):e.template.compile(n,a)(i)}return a},_sanitize:function(e){return e.slice(-1)===":"?e.slice(0,-1):e},getLanguage:function(){return this._currentLanguage},setLanguage:function(t,n,r){var i=this;r=r||{};_.each(Handlebars.templates,function(e,t){if(t.indexOf("lang.")===0){delete Handlebars.templates[t]}});if(r.noSync===true){this.updateLanguage(t);return}e.sync({callback:function(a){var s=false;if(!a){i.updateLanguage(t);s=!e.api.isAuthenticated()&&!r.noUserUpdate;e.cache.set("langHasChanged",s)}if(n)n(a)},getPublic:!e.api.isAuthenticated(),noUserUpdate:r.noUserUpdate||false,language:t,forceRefresh:true,metadataTypes:["labels"]})},updateLanguage:function(t){e.cache.set("lang",t);e.user.setPreference("language",t);e.trigger("app:locale:change");this.setCurrentLanguage(t)},setDefaultLanguage:function(e){this._defaultLanguage=e},getDefaultLanguage:function(){return this._defaultLanguage},setCurrentLanguage:function(e){this._currentLanguage=e;this.setDirection(e)},setDirection:function(t){var n=["he_IL","ar_SA"],r=_.contains(n,t),i=this.direction;this.direction=r?"rtl":"ltr";if(this.direction!==i){e.trigger("lang:direction:change")}}})})(SUGAR.App)},function(module,exports){(function(app){var _keyPrefix="meta:";var _metadata={};var _mdLoaded={};var _syncing=false;function _setHash(e,t){var n=t?"public:":"";app.cache.set(_keyPrefix+n+"hash",e._hash)}function _cacheMeta(e){app.cache.set(_keyPrefix+"data",e)}function _getCachedMeta(){return app.cache.get(_keyPrefix+"data")}function _injectLabels(e,t){_.each(t,function(n,r){if(r!=="_hash"){e[r]=t[r]}});delete e.labels}function _fetchLabels(e,t){var n,r,i,a=app.user.getLanguage();n=e.ordered_labels||e.labels;app.lang.setDefaultLanguage(n["default"]);if(t.language&&n[t.language]){r=t.language}else if(n[a]){r=a}else{r=app.lang.getDefaultLanguage();if(app.user.id){app.user.updateLanguage(r)}}app.lang.setCurrentLanguage(r);i=app.utils.buildUrl(n[r]);app.api.call("read",i,null,{success:function(e){try{e=_.isString(e)?JSON.parse(e):e}catch(n){app.logger.fatal("Failed to parse labels data: "+n);t.error({code:"sync_failed",label:"ERR_SYNC_FAILED"});return}t.success(e)},error:function(e){e.code="sync_failed";e.label="ERR_SYNC_FAILED";t.error(e)}})}function _initCustomComponents(e,t){var n=this,r=app.config.platform!=="base"?["base",app.config.platform]:["base"];_.each({layout:"layout",view:"view",fieldTemplate:"field",data:"data"},function(i,a){if(n._metaTypeIsSeparatedByPlatform(e,a,r)){_.each(r,function(r){var s=e[a+"s"][r];n._sortAndDeclareComponents(s,i,t,r)})}_.each(e[a+"s"],function(e,n){if(i==="view"&&e.templates){_.each(e.templates,function(e,r){var i=n===r;r=i?r:n+"."+r;app.template.setView(r,t,e,true)})}if(i==="layout"&&e.templates){_.each(e.templates,function(e,r){r=n===r?r:n+"."+r;app.template.setLayout(r,t,e,true)})}if(i==="field"&&e.templates){_.each(e.templates,function(e,r){app.template.setField(n,r,t,e,true)})}})},this)}app.augment("metadata",{fieldTypeMap:{varchar:"text",datetime:"datetimecombo",multienum:"enum",text:"textarea",decimal:"float"},_patchMetadata:function(e,t){if(!t||t._patched===true){return t}_.each(t.views,function(n){if(n.meta){_.each(n.meta.panels,function(n){n.fields=this._patchFields(e,t,n.fields)},this)}},this);t._patched=true;return t},_patchFields:function(e,t,n){var r=this;_.each(n,function(i,a){var s=_.isString(i)?i:i.name;var o=t.fields[s];if(i.fields){i.fields=r._patchFields(e,t,i.fields);return}if(!_.isEmpty(o)){if(_.isString(i)){i={name:i}}if(_.isObject(i.displayParams)){_.extend(i,i.displayParams);delete i.displayParams}i.type=i.type||o.custom_type||o.type||"base";i.type=r.fieldTypeMap[i.type]||i.type;i.label=i.label||o.vname||i.name;n[a]=i}else{if(i===""){i={view:"detail"};n[a]=i}}},this);return n},_sortControllers:function(type,components,module){var updated={},nameMap={},entries={},updateWeights=function(e){var t=e.controller;if(e.type==="base"){entries["Base"+app.utils.capitalize(type)].weight=-99999}if(_.isObject(t)&&_.isString(t.extendsFrom)&&entries[t.extendsFrom]&&!updated[t.extendsFrom]){entries[t.extendsFrom].weight--;updated[t.extendsFrom]=true;updateWeights(entries[t.extendsFrom])}};_.each(components,function(entry,name){if(entry.controller){var controller=entry.controller,className=(module||"")+app.utils.capitalizeHyphenated(name)+app.utils.capitalize(type);nameMap[className]=name;if(_.isString(controller)){try{controller=eval("["+controller+"][0]")}catch(e){app.logger.error("Failed to eval view controller for "+className+": "+e+":\n"+entry.controller)}}else{var emptyController=type!=="field"&&Object.getOwnPropertyNames(controller).length===1&&controller.hasOwnProperty("extendsFrom");if(emptyController){app.logger.warn("Instead of creating an empty js controller `"+className+"` and specify the parent with extendsFrom, please use `type` property in the metadata `"+name+"`, to specify controller to use. It will allow you to delete your empty controllers and save memory.")}}entries[className]={type:name,controller:controller,weight:0}}});_.each(entries,function(e,t){var n=e.controller,r;if(_.isObject(n)&&_.isString(n.extendsFrom)){r="Custom"+n.extendsFrom;if(r in entries&&t!=r){n.extendsFrom=r}}});_.each(entries,function(e){updated={};updateWeights(e)});return _.sortBy(entries,"weight")},_sortAndDeclareComponents:function(e,t,n,r){var i,a=this;if(!_.isUndefined(e)&&e){i=a._sortControllers(t,e,n);if(t==="data"){var s,o;_.each(i,function(e){if(e.type==="model"){s=e.controller}else if(e.type==="collection"){o=e.controller}});app.data.declareModelClass(n,null,r,s);app.data.declareCollectionClass(n,r,o)}else{_.each(i,function(e){app.view.declareComponent(t,e.type,n,e.controller,true,r)})}}},_metaTypeIsSeparatedByPlatform:function(e,t,n){if(!_.isUndefined(e[t+"s"])){for(var r=0;r<n.length;r++){if(!_.isUndefined(e[t+"s"][n[r]])){if(_.isUndefined(e[t+"s"][n[r]].controller)){return true}}}}return false},_declareClasses:function(e){var t=this,n=app.config.platform!=="base"?["base",app.config.platform]:["base"];_.each(["field","view","layout","data"],function(r){var i;if(t._metaTypeIsSeparatedByPlatform(e,r,n)){_.each(n,function(n){i=e[r+"s"][n];t._sortAndDeclareComponents(i,r,null,n)},this)}},this);_.each(e.modules,function(e,t){_initCustomComponents.call(this,e,t)},this)},getModules:function(){return _metadata.modules},getHiddenSubpanels:function(){return _metadata.hidden_subpanels},getModule:function(e,t){var n=this.getModules();if(n)n=n[e];if(n&&t)n=n[t];return n},getRelationship:function(e){return _metadata.relationships?_metadata.relationships[e]:null},getField:function(e){var t=_metadata.fields?_metadata.fields[e]||_metadata.base:null;return t?app.metadata.copy(t,{field:e}):t},getView:function(e,t,n){var r=_metadata.views;if(e){r=this.getModule(e,"views")}else if(n){r=this.getModule(n,"views")}if(t){if(r&&r[t]&&!_.isUndefined(r[t].meta)){r=r[t].meta}else if(n){return this.getView(n,t)}else if(e){return this.getView(null,t)}else{return null}}return r?app.metadata.copy(r,{module:e,view:t}):null},getLayout:function(e,t,n){var r=_metadata.layouts;if(e){r=this.getModule(e,"layouts")}else if(n){r=this.getModule(n,"layouts")}if(t){if(r&&r[t]){r=r[t].meta}else if(n){return this.getView(n,t)}else if(e){return this.getLayout(null,t)}else{return null}}return r?app.metadata.copy(r,{module:e,layout:t}):null},getModuleNames:function(e){var t=["enabled","!enabled","visible","!visible","display_tab","!display_tab","show_subpanels","!show_subpanels","quick_create","!quick_create"];e=e||{};var n=[];var r=_.isUndefined(_metadata.modules_info);if(r){n=_.clone(app.user.get("module_list"));if(e.access){n=_.filter(n,function(t){return app.acl.hasAccess(e.access,t)})}return n||[]}var i,a=false;if(e.filter){if(!_.isArray(e.filter)){e.filter=[e.filter]}i=[];_.each(e.filter,function(e){if(e&&_.indexOf(t,e)>-1){i.push(e);a=e==="display_tab"}else if(e){app.logger.warn("Can't filter getModuleNames by "+e)}});if(_.isEmpty(i)){i=undefined}}n=_.chain(_metadata.modules_info).keys().without("_hash").value();if(i){_.each(i,function(t){var r=t.charAt(0)==="!";if(r){var i=app.metadata.getModuleNames({filter:t.substring(1),access:e.access});n=_.difference(n,i)}else{n=_.filter(n,function(e){return _metadata.modules_info[e][t]})}})}if(!_.isEmpty(app.user.get("module_list"))){if(a){n=_.intersection(app.user.get("module_list"),n)}else if(!i){n=_.union(app.user.get("module_list"),n)}}if(e.access){n=_.filter(n,function(t){return app.acl.hasAccess(e.access,t)})}return n},getStrings:function(e){return _metadata[e]||{}},getFullModuleList:function(){return _metadata.full_module_list||{}},getConfig:function(){return _metadata.config||{}},getBaseCurrencyId:function(){return"-99"},getCurrency:function(e){return this.getCurrencies()[e]},getCurrencies:function(){return _metadata.currencies||{}},getLogoUrl:function(){return _metadata.logo_url},getServerInfo:function(){return _metadata.server_info||{}},getModuleTabMap:function(){return _metadata.module_tab_map||{}},getTabMappedModule:function(e){var t=this.getModuleTabMap();return t[e]||e},getFilterOperators:function(e){var t=_metadata.filters&&_metadata.filters.operators&&_metadata.filters.operators.meta||{};var n=e&&this.getModule(e,"filters");var r=n&&n.operators&&n.operators.meta;if(r){return _.extend({},t,r)}return t},get:function(){return _metadata},getEditableDropdownFilter:function(e){var t=_metadata.editable_dropdown_filters;if(t&&t[e]){return app.metadata.copy(t[e])}return{}},copy:function(e,t){return app.utils.deepCopy(e)},set:function(e,t,n){_.each(e.modules,function(e,t){this._patchMetadata(t,e)},this);this._declareClasses(e);app.config=_.extend(app.config||{},e.config);app.template.set(e,e._hash&&e._hash!=this.getHash(t));if(!_.isEmpty(e._hash))_setHash(e,t);if(!n){var r=e._override_values||[];delete e._override_values;_.each(e,function(e,t){_metadata[t]=_.isObject(e)&&!_.contains(r,t)?_.extend(_metadata[t]||{},e):e})}else{_metadata=e}if(app.config.cacheMeta&&!t){_cacheMeta(_metadata)}if(app.config.env!="prod"){this._dev_data=_metadata}},getHash:function(e){var t=e?_keyPrefix+"public:hash":_keyPrefix+"hash";return app.cache.get(t)||_metadata._hash||""},sync:function(e,t){_syncing=true;t=t||{};t.params=t.params||{};var n=this,r=t.metadataTypes||(t.getPublic?app.config.publicMetadataTypes:app.config.metadataTypes)||[],i=function(r){app.logger.debug("Failed fetching metadata");if(!t.getPublic){app.error.handleHttpError(r)}e.call(n,r)},a=e;e=function(e){_syncing=false;if(_.isFunction(a))a(e)};app.api.getMetadata(n.getHash(t.getPublic),r,[],{success:function(a){var s;t=t||{};if(!_.isEmpty(a)){app.logger.debug("Updating metadata");if(_mdLoaded[t.getPublic?"public:md":"md"]&&n.getHash(t.getPublic)==a._hash&&!t.forceRefresh){app.logger.debug("Skipping update as metadata hash matches");return e.call(n)}if(_.isEmpty(r)||_.include(r,"server_info")&&!t.getPublic){s=app.isServerCompatible(a.server_info);if(s!==true){return e(s)}}_mdLoaded[t.getPublic?"public:md":"md"]=true;if(a.jssource){n._loadJSSource(a,t,e,i,n)}else{if(a.labels||a.ordered_labels){_fetchLabels(a,{language:t.language,success:function(r){_injectLabels(a,r);n.set(a,t.getPublic);e.call(n)},error:i})}else{e.call(n)}}}else{e.call(n,{code:"sync_failed",label:"ERR_SYNC_FAILED"})}},error:i},t)},isSyncing:function(){return _syncing},_loadJSSource:function(e,t,n,r,i){var a,s=this._checkJSSourceUpdated(e,!!t.getPublic);if(s==="reload"){return app.utils.hardRefresh()}else if(s){SUGAR.jssource=false;a=document.createElement("script");a.src=app.utils.buildUrl(e.jssource);document.head.appendChild(a)}async.parallel([function(e){if(s){app.utils.doWhen("SUGAR.jssource",function(){i._declareClasses(SUGAR.jssource);e()})}else{e()}},function(n){_fetchLabels(e,{language:t.language,success:function(r){_injectLabels(e,r);i.set(e,t.getPublic);n()},error:function(){r.apply(i,arguments);n()}})}],function(e,t){if(n){n.call(i)}})},_checkJSSourceUpdated:function(e,t){if(t){if(this._publicJSSourceFile){if(this._publicJSSourceFile!=e.jssource){return"reload"}return false}else{this._publicJSSourceFile=e.jssource;return true}}if(e.jssource_public&&this._publicJSSourceFile&&e.jssource_public!=this._publicJSSourceFile){app.utils.hardRefresh();return"reload"}if(this._jsSourceFile){if(this._jsSourceFile!=e.jssource){return"reload"}return false}return true},init:function(){_.bindAll(this,"storageHandler");window.addEventListener("storage",this.storageHandler);if(app.config.cacheMeta){var e=_getCachedMeta();if(e)this.set(e,false)}app.events.on("cache:clean",function(e){e([_keyPrefix+"public:hash",_keyPrefix+"hash",_keyPrefix+"data"])})},storageHandler:function(){if(!_syncing&&(this.getHash()!=_metadata._hash&&_mdLoaded.md||app.api.getUserprefHash()&&app.user.get("_hash")&&app.api.getUserprefHash()!=app.user.get("_hash"))){_syncing=true;_mdLoaded.md=false;app.sync({getPublic:!app.api.isAuthenticated()})}},clearCache:function(){app.cache.cut(_keyPrefix+"public:hash");app.cache.cut(_keyPrefix+"hash");app.cache.cut(_keyPrefix+"data")},reset:function(){_metadata={};this.clearCache()}},false)})(SUGAR.App)},function(e,t){(function(e){e.augment("acl",{_accessToAny:{},action2permission:{view:"read",readonly:"read",edit:"write",detail:"read",list:"read",disabled:"write"},init:function(e){if(e){e.events.on("app:sync:complete",this.clearCache,this)}},clearCache:function(){this._accessToAny={}},_hasAccess:function(e,t){var n;if(t.access==="no"){n="no"}else{n=t[e]}return n!=="no"},_hasAccessToField:function(e,t,n){var r;e=this.action2permission[e]||e;if(t.fields[n]&&t.fields[n][e]){r=t.fields[n][e]}return r!=="no"},hasAccess:function(t,n,r,i,a){var s=e.user.getAcls()[n];var o=true;if(s||a){s=s||{};if(a){s=e.utils.deepCopy(s);s.fields=s.fields||{};_.extend(s.fields,a.fields);var l=s.fields;_.extend(s,a);s.fields=l}o=this._hasAccess(t,s);if(i&&s.fields&&o){o=this._hasAccessToField(t,s,i);var u=e.metadata.getModule(n);var c=u&&u.fields?u.fields[i]:null;if(o&&c&&c.group){o=this._hasAccessToField(t,s,c.group)}}}return o},hasAccessToModel:function(e,t,n){var r,i,a,s,o=true;if(t){r=t.id;i=t.module;a=t.original_assigned_user_id||t.get("assigned_user_id");s=t.get("_acl")||{fields:{}}}if(e=="edit"&&!r){e="create"}if(o===true){o=this.hasAccess(e,i,a,n,s)}return o},hasAccessToAny:function(t){if(_.isUndefined(this._accessToAny[t])){this._accessToAny[t]=_.some(e.user.getAcls(),function(e,n){return this.hasAccess(t,n)},this)}return this._accessToAny[t]}},true)})(SUGAR.App)},function(e,t){(function(e){var t=Backbone.Model.extend({load:function(t){e.api.me("read",null,null,{success:function(n){if(n&&n.current_user){if(n.current_user._hash){e.cache.set("userpref:hash",n.current_user._hash)}e.user.set(n.current_user);var r=e.user.getPreference("language");if(e.lang.getLanguage()!==r){e.lang.setLanguage(r,null,{noUserUpdate:true,noSync:e.isSynced||e.metadata.isSyncing()})}}if(t)t()},error:function(n){e.error.handleHttpError(n);if(t)t(n)}})},loadLocale:function(t){e.api.call("read",e.api.buildURL("locale"),null,{success:function(e){if(t)t(e)},error:function(n){e.error.handleHttpError(n);if(t)t(n)}})},getLanguage:function(){return e.user.getPreference("language")||e.cache.get("lang")},updateLanguage:function(t,n){var r=function(r){if(!r)e.lang.updateLanguage(t);if(n)n(r)};this.update("update",{preferred_language:t},r)},updateProfile:function(e,t){var n=function(e){if(t)t(e)};this.update("update",e,n)},updatePreferences:function(t,n){var r=this;if(e.api.isAuthenticated()){e.api.call("update",e.api.buildURL("me/preferences"),t,{success:function(i){if(i._hash){e.cache.set("userpref:hash",i._hash);e.user.set({_hash:i._hash})}_.each(t,function(e,t){if(i[t]){r.setPreference(t,i[t])}});if(n)n()},error:function(t){e.error.handleHttpError(t);if(n)n(t)}})}else{if(n)n()}},update:function(t,n,r){if(e.api.isAuthenticated()){e.api.me(t,n,null,{success:function(t){if(t.current_user){if(t.current_user._hash){e.cache.set("userpref:hash",t.current_user._hash)}e.user.set(t.current_user)}if(r)r()},error:function(t){e.error.handleHttpError(t);if(r)r(t)}})}else{r()}},getAcls:function(){return e.user.get("acl")||{}},getPreference:function(t){var n=e.user.get("preferences")||{};return n[t]},setPreference:function(t,n){var r=e.user.get("preferences")||{};r[t]=n;return e.user.set("preferences",r)},getCurrency:function(){var t=e.user.get("preferences"),n={};if(t){n.currency_id=t.currency_id;n.currency_iso=t.currency_iso;n.currency_name=t.currency_name;n.currency_rate=t.currency_rate;n.currency_show_preferred=t.currency_show_preferred;n.currency_symbol=t.currency_symbol}return n},lastState:function(){var t=":",n="last-state",r={},i=[];var a=function(r){var i=r.split(t),a=[e.user.id,n];a=a.concat(i);return a.join(t)};var s=function(e){var t;if(e.meta&&e.meta.last_state){t=e.meta.last_state.id}return t};return{get:function(t){var n,r;if(!_.isUndefined(t)){r=a(t);n=e.cache.get(r)||this.defaults(t)}return n},set:function(t,n){if(!_.isUndefined(t)&&!_.isUndefined(n)){var r=a(t);e.cache.set(r,n)}},preserve:function(e){if(!_.isUndefined(e)){i.push(e)}},key:function(e,t){var n=s(t);return this.buildKey(e,n,t.module)},buildKey:function(e,n,r){var i,a=[];if(n){if(r){a.push(r)}a.push(n,e);i=a.join(t)}return i},defaults:function(e){return r[e]},register:function(e){var t=s(e);if(t){_.each(e.meta.last_state.defaults,function(t,n){r[this.key(n,e)]=t},this)}},remove:function(t){var n;if(!_.isUndefined(t)){n=a(t);e.cache.cut(n)}},_getPreservedKeys:function(){var e=[];_.each(i,function(t){e.push(a(t))});return e}}}()});e.events.on("app:logout",function(t){e.cache.cut("userpref:hash");if(t===true){e.user.clear({silent:true})}});e.events.on("cache:clean",function(t){t(e.user.lastState._getPreservedKeys())});e.augment("user",new t,false)})(SUGAR.App)},function(e,t){(function(e){e.augment("logger",{levels:{TRACE:{value:1,name:"TRACE"},DEBUG:{value:2,name:"DEBUG"},INFO:{value:3,name:"INFO"},WARN:{value:4,name:"WARN"},ERROR:{value:5,name:"ERROR"},FATAL:{value:6,name:"FATAL"}},init:function(){if(!window.jQuery){return}e.on("app:sync:complete",function(){jQuery.migrateMute=this.getLevel().value>this.levels.WARN.value},this)},ConsoleWriter:{write:function(t,n){if(!window.console)window.console={};if(!window.console.log)window.console.log=function(){};if(t.value<=e.logger.levels.INFO.value){console.log(n)}else if(t.value==e.logger.levels.WARN.value){console.warn(n)}else{console.error(n)}}},ServerWriter:{write:function(t,n){if(t.value<e.logger.levels.WARN.value){return}if(!e.api.isAuthenticated()){return}var r=e.config.logger&&e.config.logger.writeToServer||false;if(!r||!n.trim().length){return}var i=e.api.buildURL(undefined,"logger");var a={level:t.name.toLowerCase(),message:n};e.api.call("create",i,a,{success:function(e){if(!e.status){throw"Failed to write log message {"+n+"} onto server"}},error:function(e){throw e}})}},SimpleFormatter:{format:function(e,t,n){var r=n.getUTCFullYear()+"-"+(n.getUTCMonth()+1)+"-"+n.getUTCDate()+" "+n.getUTCHours()+":"+n.getUTCMinutes()+":"+n.getUTCSeconds();return e.name+"["+r+"]: "+t}},trace:function(e){this.log(this.levels.TRACE,e)},debug:function(e){this.log(this.levels.DEBUG,e)},info:function(e){this.log(this.levels.INFO,e)},warn:function(e){this.log(this.levels.WARN,e)},error:function(e){this.log(this.levels.ERROR,e)},fatal:function(e){this.log(this.levels.FATAL,e)},getLevel:function(){var t=e.config.logger&&e.config.logger.level;var n=e.config.logLevel;if(!t&&n){t=n;console.warn("The property `app.config.logLevel` has been "+"deprecated since 7.7.0.0 and will be removed in 7.9.0.0."+" Use `app.config.logger.level` instead.")}if(!t){return this.levels.ERROR}t=t.toUpperCase();return this.levels[t]||this.levels.ERROR},log:function(t,n){try{var r=this.getLevel();if(t.value<r.value){return}n=n||"<none>";if(_.isFunction(n))n=n.call(this);if(_.isObject(n)){try{n=JSON.stringify(n)}catch(i){n=n.toString()}}var a=e.config.logger,s=this[e.config.logFormatter];if(!s){s=a&&this[a.formatter]||this.SimpleFormatter}n=s.format(t,n,new Date);var o=this[e.config.logWriter];if(!o){o=a&&this[a.consoleWriter]||this.ConsoleWriter}var l=a&&this[a.serverWriter]||this.ServerWriter;o.write(t,n);l.write(t,n)}catch(i){console.log("Failed to log message {"+n+"} due to exception: "+i)}}},false)})(SUGAR.App)},function(e,t){(function(e){var t=moment;_.extend(t,{InvalidException:function(e,t){this.name="InvalidException";this.message=e;this.date=t},_cachedFormats:{},_serverDateFormat:"YYYY-MM-DD",convertFormat:function(e){if(t._cachedFormats[e]){return t._cachedFormats[e]}var n={d:"DD",m:"MM",Y:"YYYY",H:"HH",h:"hh",i:"mm"};var r=e;_.each(n,function(e,t){r=r.replace(t,e)});t._cachedFormats[e]=r;return r},compare:function(e,n){var r=moment(e),i=moment(n);if(!r.isValid()){throw new t.InvalidException("Invalid date passed for comparison.",e)}if(!i.isValid()){throw new t.InvalidException("Invalid date passed for comparison.",n)}if(r.isBefore(i)){return-1}if(r.isAfter(i)){return 1}return 0},getUserDateFormat:function(t){t=t||e.user;return this.convertFormat(t.getPreference("datepref"))},getUserTimeFormat:function(t){t=t||e.user;return this.convertFormat(t.getPreference("timepref"))},phpStrToTime:function(e,t){var n,r,i,a,s,o,l,u,c,f,d,h=false;if(!e){return h}e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase();r=e.match(/^(\d{1,4})([\-\.\/\:])(\d{1,2})([\-\.\/\:])(\d{1,4})(?:\s(\d{1,2}):(\d{2})?:?(\d{2})?)?(?:\s([A-Z]+)?)?$/);if(r&&r[2]===r[4]){if(r[1]>1901){switch(r[2]){case"-":{if(r[3]>12||r[5]>31){return h}return new Date(r[1],parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3}case".":{return h}case"/":{if(r[3]>12||r[5]>31){return h}return new Date(r[1],parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3}}}else if(r[5]>1901){switch(r[2]){case"-":{if(r[3]>12||r[1]>31){return h}return new Date(r[5],parseInt(r[3],10)-1,r[1],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3}case".":{if(r[3]>12||r[1]>31){return h}return new Date(r[5],parseInt(r[3],10)-1,r[1],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3}case"/":{if(r[1]>12||r[3]>31){return h}return new Date(r[5],parseInt(r[1],10)-1,r[3],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3}}}else{switch(r[2]){case"-":{if(r[3]>12||r[5]>31||r[1]<70&&r[1]>38){return h}a=r[1]>=0&&r[1]<=38?+r[1]+2e3:r[1];return new Date(a,parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3}case".":{if(r[5]>=70){if(r[3]>12||r[1]>31){return h}return new Date(r[5],parseInt(r[3],10)-1,r[1],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3}if(r[5]<60&&!r[6]){if(r[1]>23||r[3]>59){return h}i=new Date;return new Date(i.getFullYear(),i.getMonth(),i.getDate(),r[1]||0,r[3]||0,r[5]||0,r[9]||0)/1e3}return h}case"/":{if(r[1]>12||r[3]>31||r[5]<70&&r[5]>38){return h}a=r[5]>=0&&r[5]<=38?+r[5]+2e3:r[5];return new Date(a,parseInt(r[1],10)-1,r[3],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3}case":":{if(r[1]>23||r[3]>59||r[5]>59){return h}i=new Date;return new Date(i.getFullYear(),i.getMonth(),i.getDate(),r[1]||0,r[3]||0,r[5]||0)/1e3}}}}if(e==="now"){return t===null||isNaN(t)?(new Date).getTime()/1e3|0:t|0}if(!isNaN(n=Date.parse(e))){return n/1e3|0}r=e.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2})[ t]([0-9]{2}:[0-9]{2}:[0-9]{2}(\.[0-9]+)?)([\+-][0-9]{2}(:[0-9]{2})?|z)/);if(r){if(r[4]=="z"){r[4]="Z"}else if(r[4].match(/^([\+-][0-9]{2})$/)){r[4]=r[4]+":00"}if(!isNaN(n=Date.parse(r[1]+"T"+r[2]+r[4]))){return n/1e3|0}}s=t?new Date(t*1e3):new Date;o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};l={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"};function p(e,t,n){var r,i=o[t];if(typeof i!=="undefined"){r=i-s.getDay();if(r===0){r=7*n}else if(r>0&&e==="last"){r-=7}else if(r<0&&e==="next"){r+=7}s.setDate(s.getDate()+r)}}function m(e){var t=e.split(" "),n=t[0],r=t[1].substring(0,3),i=/\d+/.test(n),a=t[2]==="ago",o=(n==="last"?-1:1)*(a?-1:1);if(i){o*=parseInt(n,10)}if(l.hasOwnProperty(r)&&!t[1].match(/^mon(day|\.)?$/i)){return s["set"+l[r]](s["get"+l[r]]()+o)}if(r==="wee"){return s.setDate(s.getDate()+o*7)}if(n==="next"||n==="last"){p(n,r,o)}else if(!i){return false}return true}c="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec"+"|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?"+"|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)";f="([+-]?\\d+\\s"+c+"|"+"(last|next)\\s"+c+")(\\sago)?";r=e.match(new RegExp(f,"gi"));if(!r){return h}for(d=0,u=r.length;d<u;d++){if(!m(r[d])){return h}}return s.getTime()/1e3}});var n={};_.extend(t,{parse:function(e,t){var n=new Date("Jan 1, 1970 00:00:00"),r="",i,a,s,o,l,u;if(e instanceof Date)return e;if(!t){t=this.guessFormat(e)}if(t===false){if(/^\d+$/.test(e)){return new Date(e)}return false}i=$.trim(e);t=$.trim(t)+" ";for(a=0;a<t.length;a++){s=t.charAt(a);if(s===":"||s==="/"||s==="-"||s==="."||s===" "||s==="a"||s==="A"){o=i.indexOf(s);if(o===-1)o=i.length;l=i.substring(0,o);i=i.substring(o+1);switch(r){case"m":if(!(l>0&&l<13))return false;n.setMonth(l-1);break;case"d":if(!(l>0&&l<32))return false;n.setDate(l);break;case"Y":if(l>0===false)return false;n.setYear(l);break;case"h":u=t.substring(t.length-4);l=parseInt(l,10);var c=$.trim(u.toLowerCase());if(c==="i a"||c===s+"ia"){var f=i.substring(i.length-2).toLowerCase();if(f==="pm"){if(l<12){l+=12}}else if(f==="am"&&l===12){l=0}}n.setHours(l);break;case"H":n.setHours(l);break;case"i":l=l.substring(0,2);n.setMinutes(l);break;case"s":n.setSeconds(l);break}r=""}else{r=s}}return n},guessFormat:function(e){if(typeof e!=="string")return false;var t="",n,r,i,a,s,o,l,u;if(e.indexOf(" ")!==-1){t=e.substring(e.indexOf(" ")+1,e.length);e=e.substring(0,e.indexOf(" "))}n="/";if(e.indexOf("/")!==-1){}else if(e.indexOf("-")!==-1){n="-"}else if(e.indexOf(".")!==-1){n="."}else{return false}r=e.split(n);i="";if(r[0].length===4){i="Y"+n+"m"+n+"d"}else if(r[2].length===4){i="m"+n+"d"+n+"Y"}else{return false}a="";s=[];if(t!==""){s.push("i");o=":";if(t.indexOf(".")===2){o="."}if(t.split(o).length===3){s.push("s")}l="";u=t.substring(t.length-2,t.length);if(u.toLowerCase()==="am"||u.toLowerCase()==="pm"){s.unshift("h");if(u.toLowerCase()===u){l="lower"}else{l="upper"}}else{s.unshift("H")}a=s.join(o);if(t.indexOf(" ")!==-1){a+=" "}if(l&&l==="upper"){a+="A"}else if(l&&l==="lower"){a+="a"}i=i+" "+a}return i},parseFormat:function(e){if(!(e in n)){var t={},r,i;for(r=0;r<e.length;r++){i=e.charAt(r);switch(i){case"m":case"n":t.month=i;break;case"d":case"j":t.day=i;break;case"Y":t.year=i;break;case"H":case"h":case"g":t.hours=i;break;case"i":t.minutes=i;break;case"s":t.seconds=i;break;case"A":case"a":t.amPm=i;break;default:break}}n[e]=t}return n[e]},format:function(e,t){if(!_.isDate(e))return"";var n="",r,i,a,s,o,l;for(r=0;r<t.length;r++){i=t.charAt(r);switch(i){case"\\":n+=t.charAt(r+1);r++;break;case"m":case"n":o=e.getMonth()+1;n+=o<10&&i==="m"?"0"+o:o;break;case"d":case"j":a=e.getDate();n+=a<10&&i==="d"?"0"+a:a;break;case"Y":n+=e.getFullYear();break;case"H":case"h":case"g":s=e.getHours();if(i==="h"||i==="g"){s=s>12?s-12:s;s=s===0?12:s}n+=s<10&&i!=="g"?"0"+s:s;break;case"i":o=e.getMinutes();n+=o<10?"0"+o:o;break;case"s":l=e.getSeconds();n+=l<10?"0"+l:l;break;case"a":case"A":if(e.getHours()<12)n+=i==="a"?"am":"AM";else n+=i==="a"?"pm":"PM";break;default:n+=i}}return n},roundTime:function(e){if(!e.getMinutes)return 0;var t=e.getMinutes();if(t<1){t=0}else if(t<16){t=15}else if(t<31){t=30}else if(t<46){t=45}else{t=0;e.setHours(e.getHours()+1)}e.setMinutes(t);return e},UTCtoLocalTime:function(e){if(!(e instanceof Date))return e;return new Date(this.toUTC(e))},UTCtoTimezone:function(e,t){if(!(e instanceof Date)||undefined===t||null===t){return e}t=parseFloat(t)*60*60*1e3;t-=e.getTimezoneOffset()*60*1e3*-1;return new Date(this.toUTC(e)+t)},toUTC:function(e){if(!(e instanceof Date)){return e}var t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),i=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),o=e.getMilliseconds();return Date.UTC(t,n,r,i,a,s,o)},getRelativeTimeLabel:function(e){var t=new Date;var n=t.getTime()<e.getTime();var r=n?e-t:t-e;var i=1e3,a=i*60,s=a*60,o=s*24,l={str:"",value:undefined};if(isNaN(r)||r<0){return l}if(r<i*2){l.str="LBL_TIME_AGO_NOW";return l}if(r<a){l.str=n?"LBL_TIME_UNTIL_SECONDS":"LBL_TIME_AGO_SECONDS";l.value=Math.floor(r/i);return l}if(r<a*2){l.str=n?"LBL_TIME_UNTIL_MINUTE":"LBL_TIME_AGO_MINUTE";return l}if(r<s){l.str=n?"LBL_TIME_UNTIL_MINUTES":"LBL_TIME_AGO_MINUTES";l.value=Math.floor(r/a);return l}if(r<s*2){l.str=n?"LBL_TIME_UNTIL_HOUR":"LBL_TIME_AGO_HOUR";return l}if(r<o){l.str=n?"LBL_TIME_UNTIL_HOURS":"LBL_TIME_AGO_HOURS";l.value=Math.floor(r/s);return l}if(r>o&&r<o*2){l.str=n?"LBL_TIME_UNTIL_DAY":"LBL_TIME_AGO_DAY";return l}if(r<o*365){l.str=n?"LBL_TIME_UNTIL_DAYS":"LBL_TIME_AGO_DAYS";l.value=Math.floor(r/o);return l}else{l.str=n?"LBL_TIME_UNTIL_YEAR":"LBL_TIME_AGO_YEAR";return l}},parseDisplayDefault:function(e,t){var n,r,i,a,s,o,l,u,c=t?t:new Date,f,d,h,p;if(!e)return e;o=function(e,t){var n=e.getDate();e.setMonth(e.getMonth()+t);if(e.getDate()<n){e.setDate(1);e.setDate(e.getDate()-1)}return e};l=function(e){var t,n,r;t=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];n=c.getDay();e=e.toLowerCase();for(var i=7;i--;){if(e===t[i]){e=i<=n?i+7:i;break}}r=e-n;return r};n={day:function(e){return new Date(c.setDate(c.getDate()+e))},week:function(e){return new Date(c.setDate(c.getDate()+e*7))},month:function(e){return o(c,e)},year:function(e){return o(c,e*12)},now:function(){return c},"next monday":function(){return new Date(c.setDate(c.getDate()+l("monday")))},"next friday":function(){return new Date(c.setDate(c.getDate()+l("friday")))},"first of next month":function(){c.setDate(1);var e=c.setMonth(c.getMonth()+1);return new Date(e)}};if(e&&e.indexOf("&")>=0){i=e.split("&");a=i[0];s=i[1]}else{a=e}if(a.match(/\b(now|day|week|month|year)/g)){if(a.indexOf("now")===0){d="now"}else if(a.indexOf("first day of next month")!==-1){d="firstnextmonth"}else{h=a.split(" ");f=h[0];d=h[1]}if(d.match("now")){r=n.now()}else if(d.match("firstnextmonth")){r=n["first of next month"]()}else if(d.match("days?")){r=n.day(parseInt(f,10))}else if(d.match("weeks?")){r=n.week(parseInt(f,10))}else if(d.match("months?")){r=n.month(parseInt(f,10))}else if(d.match("years?")){r=n.year(parseInt(f,10))}else{if(!n[a]){return}r=n[a]();

}}else{if(!n[a]){return}r=n[a]()}u=function(e){var t,n,r;t=/^(\d\d?).(\d{2}).?([ap]m)?$/.exec(s);if(t&&t.length>2){n=t[1];if(n){if(t[3]==="pm"){if(n<12){n=parseInt(n,10)+12}}else{if(n==="12"){n="0"}}e.setHours(parseInt(n,10))}r=t[2];if(r){e.setMinutes(parseInt(r,10))}}}(r);return r},toDatepickerFormat:function(e){if(_.isUndefined(e)||!e)return"";var t,n={y:"yy",Y:"yyyy",m:"mm",d:"dd"};t=e.replace(/[yYmd]/g,function(e){return n[e]});return t},stripIsoTimeDelimterAndTZ:function(e){if(!_.isUndefined(e)&&e){return e.replace("T"," ").substr(0,19)}},isIso:function(e){var t,n;t=e.match(/^([0-9]{4})-?(1[0-2]|0[1-9])-?(3[0-1]|0[1-9]|[1-2][0-9])$/);if(t){return true}if(e.match(/[T\+Z ]/g)){n=e.match(/^([0-9]{4})-?(1[0-2]|0[1-9])-?(3[0-1]|0[1-9]|[1-2][0-9])/);if(n)return true}return false},compareDates:function(n,r){e.logger.warn("date.compareDates() was called and is deprecated. "+"Please update code to use date.compare()");return t.compare(n,r)},isDateAfter:function(n,r){e.logger.warn("date.isDateAfter() was called and is deprecated. "+"Please update code to use date(date1).isAfter(date2)");return t(n).isAfter(r)},isDateBefore:function(n,r){e.logger.warn("date.isDateBefore() was called and is deprecated. "+"Please update code to use date(date1).isBefore(date2)");return t(n).isBefore(r)},isDateOn:function(n,r){e.logger.warn("date.isDateOn() was called and is deprecated. "+"Please update code to use date.isSame()");return t(n).isSame(r)},isDateBetween:function(n,r,i,a){e.logger.warn("date.isDateBetween() was called and is deprecated. "+"Please update code to use date.isBetween()");return t(n).isBetween(r,i,a)}});_.extend(t.fn,{formatUser:function(e,n){var r=t.getUserDateFormat(n);if(!e){r+=" "+t.getUserTimeFormat(n)}return this.format(r)},formatServer:function(e){var n=e&&t._serverDateFormat;return this.format(n)},isBetween:function(e,t,n){n=_.isUndefined(n)?true:n;var r=this.isAfter(e)&&this.isBefore(t);if(n&&!r){r=this.isSame(e)||this.isSame(t)}return r}});_.extend(t.duration.fn,{format:function(){var t=[],n=this.minutes(),r=this.hours(),i=Math.floor(this.asDays());if(i>0){t.push(i);t.push(e.lang.get(i===1?"LBL_DURATION_DAY":"LBL_DURATION_DAYS"))}if(r>0){t.push(r);t.push(e.lang.get(r===1?"LBL_DURATION_HOUR":"LBL_DURATION_HOURS"))}if(n>0){t.push(n);t.push(e.lang.get(n===1?"LBL_DURATION_MINUTE":"LBL_DURATION_MINUTES"))}return t.join(" ")}});e.augment("date",t)})(SUGAR.App)},function(e,t){(function(e){e.augment("math",{_math:function(e,t,n,r,i){r=_.isFinite(r)&&r>=0?parseInt(r):6;Big.E_NEG=-1*(r+1);i=i||false;var a;if(!_.isFinite(t)){return t}try{switch(e){case"round":a=Big(t).round(r);break;case"add":a=Big(t).plus(n);break;case"sub":a=Big(t).minus(n);break;case"mul":a=Big(t).times(n).round(r);break;case"div":a=Big(t).div(n).round(r);break;default:return t}}catch(s){if(s.name=="BigError"){return t}}if(i&&!_.isString(a)){return a.toFixed(r)}else if(!_.isString(a)){return a.toString()}else{return a}},round:function(e,t,n){return this._math("round",e,null,t,n)},add:function(e,t,n,r){return this._math("add",e,t,n,r)},sub:function(e,t,n,r){return this._math("sub",e,t,n,r)},mul:function(e,t,n,r){return this._math("mul",e,t,n,r)},div:function(e,t,n,r){return this._math("div",e,t,n,r)},isDifferentWithPrecision:function(t,n,r){var i=e.metadata.getConfig();var a=r||e.user.getPreference("decimal_precision");r=_.isFinite(a)?a:i.defaultCurrencySignificantDigits||2;var s=this._math("round",this.getDifference(t,n,true),null,r);var o=r===0?"0":this._math("div",.1,Math.pow(10,r-1));return s==="0"?false:parseFloat(s)>=parseFloat(o)},getDifference:function(e,t,n){var r=this._math("sub",e,t);n=_.isUndefined(n)?false:n;return n?Math.abs(r):r}},false)})(SUGAR.App)},function(e,t){(function(e){e.augment("currency",{getBaseCurrencyId:function(){return e.metadata.getBaseCurrencyId()},getBaseCurrency:function(){var t=e.metadata.getBaseCurrencyId(),n=e.metadata.getCurrency(t);n.currency_id=t;return n},getCurrenciesSelector:function(t){var n={};_.each(e.metadata.getCurrencies(),function(e,r){n[r]=t(e)});return n},getCurrencySymbol:function(t){var n=e.metadata.getCurrency(t);return n?n.symbol:""},formatAmount:function(t,n,r,i,a,s){if(!_.isFinite(t)){return t}var o,l=e.metadata.getConfig();n=n||this.getBaseCurrencyId();s=s||"";if(!_.isFinite(r)){if(_.isFinite(l.defaultCurrencySignificantDigits)){r=l.defaultCurrencySignificantDigits}else{r=2}}a=a||l.defaultDecimalSeparator||".";i=!_.isUndefined(i)?i:l.defaultNumberGroupingSeparator||",";o=this.getCurrencySymbol(n)||this.getCurrencySymbol(this.getBaseCurrencyId());t=e.utils.formatNumber(t,r,r,i,a);return o+s+t},formatAmountLocale:function(t,n,r){var i=e.user.getPreference("decimal_separator");var a=e.user.getPreference("number_grouping_separator");r=_.isFinite(r)?r:e.user.getPreference("decimal_precision");return this.formatAmount(t,n,r,a,i)},unformatAmount:function(t,n,r,i){i=i||false;t=t.toString().replace(/^[^\d\.\,-]+/,"");return e.utils.unformatNumberString(t,n,r,i)},unformatAmountLocale:function(t,n){var r,i,a=e.metadata.getConfig();r=e.user.getPreference("decimal_separator")||a.defaultDecimalSeparator||".";i=e.user.getPreference("number_grouping_separator")||a.defaultNumberGroupingSeparator||",";return this.unformatAmount(t,i,r,n)},convertAmount:function(t,n,r){var i;var a;if(n==r){return e.math.round(t,undefined,true)}i=e.metadata.getCurrency(n);a=e.metadata.getCurrency(r);return this.convertWithRate(t,i.conversion_rate,a.conversion_rate)},convertToBase:function(e,t){return this.convertAmount(e,t,this.getBaseCurrencyId())},convertFromBase:function(e,t){return this.convertAmount(e,this.getBaseCurrencyId(),t)},convertWithRate:function(t,n,r){n=n||1;r=r||1;return e.math.mul(e.math.div(t,n,undefined,true),r,undefined,true)}},false)})(SUGAR.App)},function(e,t){(function(e){e.events.on("app:init",function(){_.mixin({isEmptyValue:function(e){return!_.isNumber(e)&&!_.isBoolean(e)&&!_.isDate(e)&&_.isEmpty(e)},changed:function(e,t){if(_.isEmpty(e)&&_.isEmpty(t)){return}var n={};var r=_.keys(_.extend(n,t,e));_.each(r,function(r){var i=false;if(!_.has(e,r)||!_.has(t,r)||!_.isEqual(e[r],t[r])){i=true}n[r]=i});return n}})})})(SUGAR.App)},function(e,t){(function(e){Backbone.Model.prototype.doValidate=function(e,t){t(this.isValid())};e.augment("Bean",Backbone.Model.extend({constructor:function(t,n){e.plugins.attach(this,"model");Backbone.Model.prototype.constructor.call(this,t,n)},initialize:function(t){Backbone.Model.prototype.initialize.call(this,t);this.setSyncedAttributes(t);this._bindEvents();this._relatedCollections=null;this._activeFetchRequest=null;if(this.isNew()&&this._defaults){_.each(this._defaults,function(e,t){if(!this.has(t)){this.set(t,e,{silent:true})}},this)}if(this.fields){this.fields=e.metadata.copy(this.fields,{bean:this})}this.addValidationTask("sidecar",_.bind(this._doValidate,this))},fetch:function(e){e=_.extend({},this.getOption(),e);this.abortFetchRequest();this._activeFetchRequest=Backbone.Model.prototype.fetch.call(this,e);return this._activeFetchRequest},getFetchRequest:function(){return this._activeFetchRequest},abortFetchRequest:function(){var t=this.getFetchRequest();if(t){e.api.abortRequest(t.uid)}},_bindEvents:function(){this.on("sync",function(){this.setSyncedAttributes(this.attributes);this._checkAcl();this._setLockedFields()},this)},_checkAcl:function(){var e=this.get("_acl");var t=e&&e.fields||{};this._prevAcls=this._prevAcls||{};var n=_.changed(t,this._prevAcls);this._prevAcls=t;if(!n){return}var r=false;_.each(n,function(e,t){if(e){r=true;this.trigger("acl:change:"+t)}else{delete n[t]}},this);if(r){this.trigger("acl:change",n)}},_setLockedFields:function(){var e=this.getLockedFields();this._prevLockedFields=this._prevLockedFields||[];var t=_.difference(e,this._prevLockedFields);var n=_.difference(this._prevLockedFields,e);if(t.length>0||n.length>0){this.trigger("fields:lock:change")}this._prevLockedFields=e},getLockedFields:function(){return this.get("_locked_fields")||[]},isFieldLocked:function(e){return _.contains(this.getLockedFields(),e)},dispose:function(){e.plugins.detach(this,"model")},_setRelatedCollection:function(e,t){if(!this._relatedCollections)this._relatedCollections={};this._relatedCollections[e]=t},getRelatedCollection:function(t){if(this._relatedCollections&&this._relatedCollections[t]){return this._relatedCollections[t]}return e.data.createRelatedCollection(this,t)},isValidAsync:function(e,t){e=e||this.fields;async.waterfall(_.flatten([function(t){t(null,e,{})},_.sortBy(this._validationTasks)]),function(e,n,r){if(!e){var i=_.isEmpty(r);if(_.isFunction(t)){t(i,r)}}})},doValidate:function(e,t){var n=this;this.trigger("validation:start");this.isValidAsync(e,function(e,r){if(e){n.trigger("validation:success")}n.trigger("validation:complete",n._processValidationErrors(r));if(_.isFunction(t)){t(e)}})},_doValidate:function(n,r,i){var a;_.each(n,function(n,i){if(_.isString(n)){i=n;n=this.fields[i]}a=this.get(i);if(n){t(r,e.validation.requiredValidator(n,n.name,this,a),i,"required");if(a||a===0){_.each(e.validation.validators,function(e,s){t(r,e(n,a,this),i,s)},this)}}},this);i(null,n,r)},addValidationTask:function(e,t){this._validationTasks=this._validationTasks||{};this._validationTasks[e]=t},removeValidationTask:function(e){if(this._validationTasks){this._validationTasks=_.omit(this._validationTasks,e)}},_processValidationErrors:function(t){var n=true;if(!_.isEmpty(t)){e.error.handleValidationError(this,t);_.each(t,function(e,t){this.trigger("error:validation:"+t,e)},this);this.trigger("error:validation",t);n=false}return n},save:function(e,t){var n=true,r=this;if(t&&t.fieldsToValidate){this.doValidate(t.fieldsToValidate,function(n){if(n)Backbone.Model.prototype.save.call(r,e,t)});return}return Backbone.Model.prototype.save.call(this,e,t)},canHaveAttachments:function(){return _.has(this.fields,"attachment_list")},getFiles:function(t,n){n=n||{};n.passOAuthToken=false;return e.api.file("read",{module:this.module,id:this.id},null,t,n)},copy:function(t,n,r){var i={};var a=e.metadata.getModule(this.module).fields;n=n||_.pluck(a,"name");_.each(n,function(n){var r=a[n],s;if(!r||r.duplicate_on_record_copy==="no"){return}s=r.duplicate_on_record_copy==="always"||n!=="id"&&r.type!=="link"&&!r.auto_increment;if(s&&t.has(n)){var o=t.get(n);if(_.isObject(o)){o=e.utils.deepCopy(o)}i[n]=o}});this.set(i,r);this.isCopied=true},isCopy:function(){return this.isCopied===true},uploadFile:function(t,n,r,i){r=r||{};i=i||{};return e.api.file("create",{id:i.temp!==true?this.id:"temp",module:this.module,field:t},n,r,i)},favorite:function(e,t){t=t||{};t.favorite=true;return this.save({my_favorite:!!e},t)},follow:function(e,t){t=t||{};e=e||false;t.following=true;return this.save({following:e},t)},isFavorite:function(){var e=this.get("my_favorite");return e==="1"||e===true},getChangeDiff:function(e,t){var n={};e=e||{};t=t||[];_.each(this.attributes,function(r,i){if(_.contains(t,i))return;var a=e[i];if(!_.isEqual(a,r)){n[i]=a}});return n},toJSON:function(e){var t=e&&e.fields?e.fields:_.keys(this.attributes),n={};_.each(t,function(t){var r=this.get(t);if(_.isObject(r)&&_.isFunction(r.toJSON)){r=r.toJSON(e)}n[t]=r},this);return n},toString:function(){return"bean:"+this.module+"/"+(this.id?this.id:"<no-id>")},revertAttributes:function(t){t=t||{};t.revert=true;var n=this.changedAttributes(this.getSynced());this.set(e.utils.deepCopy(n)||{},t);if(!t.silent){this.trigger("attributes:revert")}},setSyncedAttributes:function(t){this._syncedAttributes=t?e.utils.deepCopy(t):{}},getSynced:function(e){return e?this._syncedAttributes[e]:this._syncedAttributes},getDefault:function(e){var t=_.clone(this._defaults)||{};if(_.isUndefined(e)){return t}return t[e]},setDefault:function(e,t){var n;if(_.isObject(e)){n=e}else{(n={})[e]=t}this._defaults=_.extend({},this._defaults,n);this.attributes=_.defaults(this.attributes,n);return this},setOption:function(e,t){var n;if(_.isObject(e)){n=e}else{(n={})[e]=t}this._persistentOptions=_.extend({},this._persistentOptions,n);return this},unsetOption:function(e){if(e){this.setOption(e,void 0)}else{this._persistentOptions={}}return this},getOption:function(e){if(e){return this._persistentOptions[e]}return this._persistentOptions}},{merge:function(e,t,n){return _.extend(e,t)}}),false);function t(e,t,n,r){if(_.isUndefined(t))return;if(_.isUndefined(e[n])){e[n]={}}e[n][r]=t}})(SUGAR.App)},function(e,t){(function(e){e.augment("BeanCollection",Backbone.Collection.extend({_activeFetchRequest:null,model:e.Bean,constructor:function(t,n){e.plugins.attach(this,"collection");if(n&&n.link){this.link=n.link;delete n.link}Backbone.Collection.prototype.constructor.call(this,t,n)},initialize:function(t,n){this._persistentOptions={};if(!_.isEmpty(n)){n=e.utils.deepCopy(n);this.setOption(n);e.logger.warn("You should not pass persistent fetch options in initialize "+"(The options hash is supposed to be Backbone.js options hash, allowing you "+"to pass Backbone options used when setting the models into the collection)."+" Please use setOption() instead.")}this._initOptions=n;this._bindCollectionEvents();Backbone.Collection.prototype.initialize.call(this,t,n);this.total=null},_bindCollectionEvents:function(){this.on("data:sync:complete",function(){var e=this.getFetchRequest();if(e){this._activeFetchRequest=null}},this);this.on("remove",this._decrementTotal,this)},_decrementTotal:function(){if(this.total){this.total--}},dispose:function(){e.plugins.detach(this,"collection")},_prepareModel:function(e,t){var n=e._search;delete e._search;e=Backbone.Collection.prototype._prepareModel.call(this,e,t);if(e&&!e.link)e.link=this.link;if(n){e.searchInfo=n}return e},fetch:function(e){e=_.extend({},this.getOption(),e);this.abortFetchRequest();e.fields=this.fields=e.fields||this.fields||null;e.myItems=_.isUndefined(e.myItems)?this.myItems:e.myItems;e.favorites=_.isUndefined(e.favorites)?this.favorites:e.favorites;e.query=_.isUndefined(e.query)?this.query:e.query;e.reset=_.isUndefined(e.reset)?true:e.reset;this._activeFetchRequest=Backbone.Collection.prototype.fetch.call(this,e);return this.getFetchRequest()},getFetchRequest:function(){if(_.isFunction(this._activeFetchRequest)){return this._activeFetchRequest()}else{return this._activeFetchRequest}},abortFetchRequest:function(){var t=this.getFetchRequest();if(t){e.api.abortRequest(t.uid);this._activeFetchRequest=null}},resetPagination:function(){var e={offset:0,next_offset:0,page:1};var t=_.keys(e);this.resetOptions(t);var n=this.getOption();_.each(t,function(t){this[t]=n[t]||e[t]},this)},resetOptions:function(e){if(_.isEmpty(this._initOptions)&&_.isEmpty(this.getOption())){this.unsetOption()}else{_.each(e,function(e){if(!_.isUndefined(this._initOptions[e])){this.setOption(e,this._initOptions[e])}else if(!_.isEmpty(this.options)&&_.has(this.options,e)){this.unsetOption(e)}},this)}},paginate:function(t){t=t||{};var n=t.limit||e.config.maxQueryResult;t.page=t.page||1;t.reset=_.isUndefined(t.reset)?false:t.reset;t.page--;if(n){t.offset=this.offset+t.page*n}if(t.add){t=_.extend({update:true,remove:false},t)}this.fetch(t)},fetchTotal:function(t){t=t||{};if(!_.isNull(this.total)&&_.isFunction(t.success)){t.success.call(this,this.total);return}t.success=_.wrap(t.success,_.bind(function(e,t){this.total=parseInt(t.record_count,10);if(e&&_.isFunction(e)){e(this.total)}},this));var n=this.module;var r=null;t.filter=t.filterDef||this.filterDef;if(this.link){r={id:this.link.bean.id,link:this.link.name};n=this.link.bean.module}var i=_.pick(t,"success","complete","error");t=_.omit(t,"success","complete","error");return e.api.count(n,r,i,t)},hasAtLeast:function(t,n){n=n||{};var r="read";n.fields=["id"];delete n.view;n.silent=true;n.success=_.wrap(n.success,_.bind(function(e,n){var r=n.records.length;var i=r>=t;var a={length:r,hasMore:n.next_offset!==-1};if(_.isFunction(e)){e(i,a)}this.reset(null,{silent:true})},this));var i=this.module;var a=null;var s="records";n.filter=n.filterDef||this.filterDef;n.limit=n.limit||t;if(this.link){a={id:this.link.bean.id,link:this.link.name};i=this.link.bean.module;s="relationships"}var o=_.pick(n,"success","complete","error");n=_.omit(n,"success","complete","error");n=e.data.parseOptionsForSync(r,this,n);return e.api[s](r,i,a,n.params,o,n.apiOptions)},getPageNumber:function(t){var n=1;var r=e.config.maxQueryResult;if(t){r=t.limit||r}if(this.offset&&r){n=Math.ceil(this.offset/r)}return n},toString:function(){return"coll:"+(this.link?this.link.bean.module+"/"+this.link.bean.id+"/":"")+this.module+"-"+this.length},getNext:function(e,t){var n=-1,r=null,i=this;if(this.hasNextModel(e)){n=this.getModelIndex(e);if(n+1>=this.length){this.paginate({add:true,success:function(e,r,a){t.apply(i,[i.at(n+1),"next"])}})}else{t.apply(i,[i.at(n+1),"next"])}}},getPrev:function(e,t){var n=-1,r=null,i=this;if(this.hasPreviousModel(e)){n=this.getModelIndex(e);r=this.at(n-1)}t.apply(i,[r,"prev"])},hasNextModel:function(e){var t=this.getModelIndex(e),n=!_.isUndefined(this.next_offset)?parseInt(this.next_offset,10):-1;return t>=0&&(this.length>t+1||n!==-1)},hasPreviousModel:function(e){return this.getModelIndex(e)>0},getModelIndex:function(e){return this.indexOf(this.get(e.id))},setOption:function(e,t){var n;if(_.isObject(e)){n=e}else{(n={})[e]=t}_.extend(this._persistentOptions,n);return this},unsetOption:function(e){if(e){this.setOption(e,void 0)}else{this._persistentOptions={}}return this},getOption:function(e){if(e){return this._persistentOptions[e]}return this._persistentOptions},clone:function(){var e=Backbone.Collection.prototype.clone.call(this);e.link=_.clone(this.link);e.setOption(_.clone(this.getOption()));return e}}),false)})(SUGAR.App)},function(e,t){(function(e){e.augment("MixedBeanCollection",e.BeanCollection.extend({_prepareModel:function(t,n){var r=t instanceof e.Bean?t.module:t._module;this.model=e.data.getBeanClass(r);return e.BeanCollection.prototype._prepareModel.call(this,t,n)},fetch:function(t){t=t||{};t.module_list=this.module_list=t.module_list||this.module_list||e.metadata.getModuleNames({filter:"visible"});return e.BeanCollection.prototype.fetch.call(this,t)},groupByModule:function(){return _.groupBy(this.models,function(e){return e.module})},toString:function(){return"mcoll:"+this.length}}),false)})(SUGAR.App)},function(e,t){(function(e){var t={};var n={};var r=_.extend({beanModel:e.Bean,beanCollection:e.BeanCollection,mixedBeanCollection:e.MixedBeanCollection,init:function(){var t=_.bind(this.sync,this);e.Bean.prototype.sync=t;e.BeanCollection.prototype.sync=t;e.events.register("data:sync:start",this);e.events.register("data:sync:complete",this);e.events.register("data:sync:success",this);e.events.register("data:sync:error",this);e.events.register("data:sync:abort",this)},reset:function(e){this.resetModel(e);this.resetCollection(e)},resetModel:function(e){if(e){delete t[e]}else{t={}}},resetCollection:function(e){if(e){delete n[e]}else{n={}}},declareModel:function(t,n,r,i,a){r=r||e.config.platform||"base";var s=this.declareModelClass(t,n,r,i);this.declareCollectionClass(t,r,a)},declareModelClass:function(n,r,i,a){var s=e.utils.capitalize(i);n=n||s+"Model";this.resetModel(n);var o=r?r.fields:{};var l=null;_.each(_.values(o),function(e){if(!_.isUndefined(e["default"])){if(l===null){l={}}l[e.name]=e["default"]}});var u={_defaults:l,module:n,fields:o};var c=t[s+"Model"]||t.BaseModel||this.beanModel;a=_.extend(a||{},u);return e.utils.extendClass(t,c,n,a,s)},declareCollectionClass:function(r,i,a){var s=e.utils.capitalize(i);var o=r||s+"Model";var l=t[o];r=r||s+"Collection";if(!l){return}this.resetCollection(r);var u={model:l,module:r,offset:0};var c=n[s+"Collection"]||n.BaseCollection||this.beanCollection;a=_.extend(a||{},u);return e.utils.extendClass(n,c,r,a,s)},mergeModel:function(e,n){var r=n?n.fields:{};var i=null;_.each(_.values(r),function(e){if(!_.isUndefined(e["default"])){if(i===null){i={}}i[e.name]=e["default"]}});var a={_defaults:i,module:e,fields:r};_.extend(t[e].prototype,a)},getModelClasses:function(){return t},getCollectionClasses:function(){return n},declareModels:function(n){n=n||e.metadata.getModules();_.each(n,function(e,n){if(!t[n]){this.declareModel(n,e)}else{this.mergeModel(n,e)}},this)},getBeanClass:function(e){return t[e]||Backbone.Model},createBean:function(n,r,i){return t[n]?new t[n](r,i):new e.data.beanModel(r,i)},createBeanCollection:function(t,r,i){return n[t]?new n[t](r,i):new e.data.beanCollection(r,i)},createRelatedBean:function(e,t,n,r){var i=this.getRelatedModule(e.module,n);r=r||{};if(_.isString(t)){r.id=t;t=this.createBean(i,r)}else if(_.isNull(t)){t=this.createBean(i,r)}else{t.set(r)}t.link={name:n,bean:e,isNew:true};t.setOption("relate",true);return t},createRelatedCollection:function(e,t,n){var r=this.getRelatedModule(e.module,t);var i=this.createBeanCollection(r,n,{link:{name:t,bean:e}});i.setOption("relate",true);e._setRelatedCollection(t,i);return i},createMixedBeanCollection:function(t){return new e.data.mixedBeanCollection(t)},canHaveMany:function(t,n){var r=e.metadata.getModule(t);if(!r||!r.fields||!r.fields[n]){return false}if(r.fields[n].link_type){return r.fields[n].link_type==="many"}var i=r.fields[n].relationship;var a=e.metadata.getRelationship(i);var s=a.relationship_type.split("-");var o;if(r.fields[n].side){o=r.fields[n].side==="left"?s[0]:s[2]}else if(a.lhs_module!==a.rhs_module){o=t===a.rhs_module?s[0]:s[2]}else{o=s[0]==="many"||s[2]==="many"?"many":"one"}return o==="many"},getRelateFields:function(t,n){var r=e.metadata.getModule(t);if(!r.fields[n]){return[]}var i=r.fields[n].relationship;var a=this.getRelatedModule(t,n);var s=e.metadata.getModule(a).fields;var o=_.find(s,function(e){return e.type=="link"&&e.relationship==i});if(o){o=_.filter(s,function(e){return e.type=="relate"&&e.link==o.name})}return o||[]},getRelationshipFields:function(t,n){var r=null;var i=e.metadata.getModule(t).fields[n];if(i.rel_fields){var a=i.relationship;var s=this.getRelatedModule(t,n);var o=e.metadata.getModule(s).fields;var l=_.find(o,function(e){return e.type=="link"&&e.relationship==a});if(l){l=_.find(o,function(e){return e.link==l.name&&e.link_type=="relationship_info"})}if(l&&l.relationship_fields){var u=_.keys(i.rel_fields);_.each(l.relationship_fields,function(e,t){if(_.include(u,t)){if(!r)r=[];r.push(e)}})}}return r},getRelatedModule:function(t,n){var r=e.metadata.getModule(t);if(!r||!r.fields||!r.fields[n]){return false}var i=r.fields[n]&&r.fields[n].relationship;var a=e.metadata.getRelationship(i);if(!a){return r.fields[n].module||false}return r.fields[n].module||(t===a.rhs_module?a.lhs_module:a.rhs_module)},getRelatedNameField:function(t,n){return _.find(e.metadata.getModule(t).fields,function(e){if(e.name!==n&&e.id_name===n){return e}},this)},getEditableFields:function(t,n,r){var i=["id"],a=["parent","relate"];n=n||[];if(!n.length){n=_.keys(t.attributes)}_.each(n,function(n){var r;if(t.has(n)&&(t.fields[n]&&(!t.fields[n].source||t.fields[n].source!=="non-db"||!t.fields[n].type||a.indexOf(t.fields[n].type)===-1))&&e.acl.hasAccessToModel("edit",t,n)){r=t.get(n);if(r&&t.fields[n].type==="collection"){_.each(r.links,function(e){i.push(e.link.name)})}else{i.push(n)}}});return t.toJSON({fields:i})},sync:function(t,n,r){e.logger.trace("data-sync-"+(r.relate?"relate-":"")+t+": "+n);r=this.parseOptionsForSync(t,n,r);var i=this.getSyncCallbacks(t,n,r),a=null;n.dataFetched=false;this.trigger("data:sync:start",t,n,r);n.trigger("data:sync:start",t,r);if(_.isFunction(r.endpoint)){r.endpoint(t,n,r,i)}else if(n.link&&n.link.bean&&r.relate===true){var s=null;if(t=="create"||t=="update"){s=this.getEditableFields(n,r.fields);if(t=="update"&&n.link.isNew){t="create"}}a=e.api.relationships(t,n.link.bean.module,{id:n.link.bean.id,link:n.link.name,relatedId:n.id,related:s},r.params,i,r.apiOptions)}else if(r.favorite){a=e.api.favorite(n.module,n.id,n.isFavorite(),i,r.apiOptions)}else if(r.following){a=e.api.follow(n.module,n.id,n.get("following"),i,r.apiOptions)}else{if(r.query||n instanceof e.MixedBeanCollection){a=e.api.search(r.params,i,r.apiOptions)}else if(n.module){a=e.api.records(t,n.module,t=="update"||t=="create"?this.getEditableFields(n,r.fields):n.attributes,r.params,i,r.apiOptions)}else{e.logger.error("Unable to sync model with no module")}}return a},parseOptionsForSync:function(t,n,r){r=r||{};r.params=_.extend({},r.params);r.filterDef=r.filter||n.filterDef;r.method=t;if(r.view&&_.isString(r.view)&&t=="read"){r.params.view=r.view}if(r.fields&&t=="read"){r.params.fields=r.fields.join(",")}if(r.viewed===true){r.params.viewed="1"}if(t=="read"&&n instanceof e.BeanCollection){if(r.offset&&r.offset!==0){r.params.offset=r.offset}if(r.limit||e.config&&e.config.maxQueryResult){r.params.max_num=r.limit||e.config.maxQueryResult}if(n.orderBy&&n.orderBy.field){r.params.order_by=n.orderBy.field+":"+n.orderBy.direction}if(r.myItems===true){r.params.my_items="1"}if(r.favorites===true){r.params.favorites="1"}if(!_.isEmpty(r.filterDef)){var i=e.utils.deepCopy(r.filterDef);if(_.has(i,"filter")){i=i.filter}if(!_.isArray(i)){i=[i]}r.params.filter=i}if(!_.isEmpty(r.query)){r.params.q=r.query;if(_.isEmpty(r.module_list)&&n.module){r.module_list=[n.module]}}if(r.module_list){r.params.module_list=r.module_list.join(",")}}if(t==="update"&&r.lastModified){r.apiOptions=r.apiOptions||{};r.apiOptions.headers=r.apiOptions.headers||{};r.apiOptions.headers["X-TIMESTAMP"]=r.lastModified}return r},getSyncCallbacks:function(e,t,n){return{success:this.getSyncSuccessCallback(e,t,n),error:this.getSyncErrorCallback(e,t,n),complete:this.getSyncCompleteCallback(e,t,n),abort:this.getSyncAbortCallback(e,t,n)}},getSyncSuccessCallback:function(t,n,r){var i=this;return function(a,s){n.inSync=true;n.original_assigned_user_id=n.get("assigned_user_id");if(t=="read"&&n instanceof e.BeanCollection){var o=r.offset||0;a=a||{};if(a.next_offset){n.offset=a.next_offset!=-1?a.next_offset:o+(a.records||[]).length;n.next_offset=a.next_offset;n.page=n.getPageNumber(r)}n.total=_.isNumber(a.total)?a.total:null;if(n instanceof e.MixedBeanCollection){n.xmod_aggs=a.xmod_aggs||null;n.tags=a.tags||null}a=a.records||[];i._updateCollectionProperties(n,r)}if(r.relate===true&&n instanceof e.Bean){n.link.isNew=false;if(t!="read"){if(n.link.bean){var l=n.link.bean.getSynced(),u=_.reduce(a.record,function(e,t,n){if(!_.isEqual(l[n],t)){e[n]=t}return e},{});n.link.bean.set(u);n.link.bean.setSyncedAttributes(a.record)}a=a.related_record;if(t=="delete"){n.set(a);delete n.link}}}n.dataFetched=true;if(r.success)r.success(a);i.trigger("data:sync:success",t,n,r,s);n.inSync=null}},getSyncErrorCallback:function(t,n,r){return _.bind(function(i){if(i.request&&i.request.aborted){var a=this.getSyncAbortCallback(t,n,r);return a(i.request)}e.error.handleHttpError(i,n,r);this.trigger("data:sync:error",t,n,r,i);n.trigger("data:sync:error",t,r,i);if(_.isFunction(r.error)){r.error(i)}},this)},getSyncCompleteCallback:function(e,t,n){return _.bind(function(r){this.trigger("data:sync:complete",e,t,n,r);t.trigger("data:sync:complete",e,n,r);if(_.isFunction(n.complete)){n.complete(r)}n.previousModels=null;n={}},this)},getSyncAbortCallback:function(e,t,n){return _.bind(function(r){this._updateCollectionProperties(t,n);this.trigger("data:sync:abort",e,t,n,r);t.trigger("data:sync:abort",e,n,r)},this)},_updateCollectionProperties:function(e,t){t=t||{};e.myItems=t.myItems;e.favorites=t.favorites;e.query=t.query;e.modelList=t.modelList;e.filterDef=t.filterDef}},Backbone.Events);e.augment("data",r,false)})(SUGAR.App)},function(e,t){(function(e){e.augment("validation",{validators:function(){var t=function(e,t,n){var r=_.isUndefined(e[n])?e.validation?e.validation[n]:null:e[n];if(_.contains(["int","float","decimal","currency"],e.type)&&_.isFinite(r)){if(e.type=="int"){t=parseInt(t)}else{t=parseFloat(t)}if(n=="max"){if(t>r)return r}else if(n=="min"){if(t<r)return r}else if(n=="greaterthan"){if(t<=r)return r}else if(n=="lessthan"){if(t>=r)return r}}};var n=function(t,n,r,i){if(_.indexOf(["date","datetimecombo"],t.type)!==-1&&t.validation&&t.validation.type===r){var a=i.fields[t.validation.compareto];if(!_.isUndefined(a)&&_.indexOf(["date","datetimecombo"],a.type)!=-1){var s=Date.parse(i.get(a.name));n=Date.parse(n.toString());if(!_.isNaN(s)&&!_.isNaN(n)){var o=e.lang.get(a.label||a.vname||a.name,i.module);if(r=="isbefore"){return s<n?o:undefined}if(r=="isafter"){return s>n?o:undefined}}}}};return{maxLength:function(e,t){if(_.isNumber(t)){t=t.toString()}if(_.isNumber(e.len)&&_.isString(t)){var n=e.len;t=t||"";t=t.toString();if(t.length>n){return n}}},minLength:function(e,t){if(_.isNumber(e.minlen)){var n=e.minlen;t=t||"";t=t.toString();if(t.length<n){return n}}},url:function(e,t){},email:function(t,n){var r;if(t.type=="email"||t.type==="email-text"){if(n.length>0){_.each(n,function(n){if(n.email_address===""&&(_.isUndefined(t.required)||!t.required)){return}if(!e.utils.isValidEmailAddress(n.email_address)){if(!r)r=[];r.push(n.email_address)}})}if(r&&r.length>0){return r}}},primaryEmail:function(e,t){if(e.type=="email"){if(t.length>0&&!_.find(t,function(e){return e.primary_address=="1"})){return true}}},duplicateEmail:function(e,t){if(e.type=="email"){var n=_.pluck(t,"email_address"),r=[],i=n.length,a,s;for(a=0;a<i;a++){for(s=a+1;s<i;s++){if(n[a]==n[s])r.push(n[a])}}if(r&&r.length>0){return r}}},datetime:function(t,n){var r,i,a,s,o,l,u,c;function f(e,t,n){var r=parseInt(e,10);return!isNaN(r)&&r>=t&&r<=n}if(t.type==="date"||t.type==="datetimecombo"){if(_.isNaN(Date.parse(n))&&_.isNaN(Date.parse(n.replace(/[\.\-]/g,"/")))){return n}else{if(!e.date.isIso(n)){l=n.replace(/[\.\-]/g,"/").split("/");i=_.filter(l,function(e,t){return e.length===3||e.length>4});if(i.length){return n}if(/([\.\/\-])\1/.test(n)===true){return n}a=e.user.getPreference("datepref");s=a.match(/[.\/\-\s].*?/);o=a.split(s);for(u=0,c=o.length;u<c;u++){r=l[u];switch(o[u].toLowerCase().charAt(0)){case"m":if(!f(r,1,12)){return n}break;case"d":if(!f(r,1,31)){return n}break}}}else{if(n.charAt(0)==="0")return n}}}},minValue:function(e,n){return t(e,n,"min")},maxValue:function(e,n){return t(e,n,"max")},greaterThan:function(e,n){return t(e,n,"greaterthan")},lessThan:function(e,n){return t(e,n,"lessthan")},number:function(e,t){if(_.indexOf(["int","float","decimal","currency"],e.type)!=-1){return _.isBoolean(t)||_.isString(t)&&!t.trim().length||isNaN(parseFloat(t))||!_.isFinite(t)?true:undefined}},isBefore:function(e,t,r){return n(e,t,"isbefore",r)},isAfter:function(e,t,r){return n(e,t,"isafter",r)}}}(),requiredValidator:function(e,t,n,r){if(e.required===true&&t!=="id"&&e.type!=="image"&&_.isUndefined(e.auto_increment)){var i=n.get(t);var a=_.isUndefined(i);var s=_.isNull(r)||r===""||r===false||_.isArray(r)&&this._isArrayEmpty(r)||r instanceof Backbone.Collection&&!r.length;if(a&&_.isUndefined(r)||s){return true}}},_isArrayEmpty:function(e){return _.every(e,_.isEmpty)}},false)})(SUGAR.App)},function(e,t){(function(e){var t="meta:hashes",n,r,i,a=["offline:enabled","offline:failure","offline:prefetch:start","offline:prefetch:complete","offline:prefetch:progress","offline:api:read:success","offline:status:update","offline:server:read","offline:data:updated","offline:data:sync:success","offline:tx:create","offline:tx:success","offline:tx:delete","offline:tx:error","offline:tx:rollback","offline:wins:completed","offline:encryption:start","offline:encryption:complete"];var s={combiners:["$or","$and"],filterKeys:{my_items:{$owner:""},favorites:{$favorite:"_this"}}};e.augment("offline",{_parsedFiltersCache:{},INITIALIZED_TS_KEY:"offline:initialized_ts",STATE:{OK:0,WARNING:1,ERROR:2},userEnabled:true,noConnection:false,status:null,init:function(){this.SYNC_ACTIONS_SYMBOLS=_.invert(this.SYNC_ACTIONS);e.events.on("app:start",function(){if(e.isSynced)this.start()},this).on("app:logout",function(){this._uninitialize()},this).on("app:sync",function(){this._uninitialize()},this)},isSupported:function(t){return e.utils.versionCompare(t.version||"",e.config.offline.minServerVersion,">=")},_registerEvents:function(){_.each(a,function(t){e.events.unregister(e,t);

e.events.register(t,e)})},_initialize:function(){if(this._initialized){return}this._uninitialize();$(document).on("ajaxComplete",this._onAjaxComplete);n=e.data.beanModel;r=e.data.beanCollection;i=e.data.mixedBeanCollection;e.data.beanModel=this.declareOfflineBean();e.data.beanCollection=this.declareOfflineBeanCollection();e.data.mixedBeanCollection=this.declareOfflineMixedBeanCollection();e.data.reset();e.data.declareModels();this.storage.init(e.metadata.get());this.api.override();this.syncManager.httpErrorHandler=_.bind(e.error.handleStatusCodesFallback,e.error);this.syncManager.init();this._registerSyncExecutors();this.status={state:this.STATE.OK};this._initialized=true;e.logger.debug("Offline initialized")},_registerSyncExecutors:function(){_.each(e.config.offline.syncManager.executors,function(t,n){var r=new(e.offline[e.utils.capitalize(n)+"SyncExecutor"])(t);e.offline.syncManager.registerExecutor(r)})},_initStorage:function(){return e.offline.storage.open({env:e.config.env,name:e.config.appId,size:e.config.offline.storageSize,adapter:e.offline[e.config.offline.storageAdapter+"Adapter"]})},uninitialize:function o(t){t=t||function(){};if(!this._initialized){t();return}e.logger.debug("Offline mode disabled");this.syncManager.dispose();this.stopMonitorStatus();this.dropStorage(_.bind(function(e){this._uninitialize();t()},this))},_uninitialize:function(){if(!this._initialized){return}$(document).off("ajaxComplete",this._onAjaxComplete);e.offline.api.restore();e.data.beanModel=n;e.data.beanCollection=r;e.data.mixedBeanCollection=i;e.data.reset();e.data.declareModels();e.status=null;e.offlineEnabled=false;this._initialized=false;e.logger.debug("Offline uninitialized")},start:function(t){t=t||{};e.config.offline=_.extend({enabled:true,prefetch:{},storageSize:5,storageProvider:"sql",storageAdapter:"webSql",syncTimeout:5e3,debug:{render:false,online:true,forceMigrate:false,syncManagerEnabled:true,monitorStatus:true}},e.config.offline||{});if(e.config.offline.debug.ignoreEnabled)e.config.offlineEnabled=true;var n=this,r=this.isSupported(e.metadata.getServerInfo());e.offlineEnabled=e.config.offlineEnabled&&e.config.offline.enabled&&this.userEnabled&&r;var i=e.cache.get("offline:version");t.migrate=t.migrate||!i;this._registerEvents();var a=function(){n.startSyncManager();n.startMonitorStatus();e.logger.debug("Offline started");if(t.callback)t.callback();e.trigger("offline:enabled",true)};if(e.offlineEnabled||i&&!e.offlineEnabled){var s=this._initStorage();if(s&&!e.offlineEnabled){n.uninitialize(t.callback);return}else if(s){this._initialize();var o=[];if(t.migrate){o.push(function u(t){var n=e.utils.deepCopy(e.metadata.get());n.modules=_.omit(n.modules,e.config.offline.exclude);e.offline.upgrade(n,t)});o.push(e.offline.migrate)}var l=e.cache.get("offline:encrypted");if(e.config.offline.dbEncryptionEnabled&&!l){o.push(e.offline.encrypt)}if(o.length){async.waterfall(o,function(r){if(r){e.trigger("offline:failure",r);n.uninitialize(t.callback)}else{a()}})}else{a()}}else{e.logger.error("Storage unavailable");e.offlineEnabled=false;e.trigger("offline:failure",n.Error.StorageUnavailableError)}}if(!e.offlineEnabled){this.uninitialize(t.callback);e.trigger("offline:enabled",false)}},disable:function(t){var n=function(n){e.logger.debug("Offline stopped");e.trigger("offline:enabled",false);if(t){t(n)}};this.uninitialize(n)},dropStorage:function(n){e.logger.debug("Dropping storage");this.storage.drop(function(r){e.cache.cut("offline:version");e.cache.cut(t);e.cache.cut("offline:encrypted");if(r)e.logger.error("Failed to drop storage: "+r);if(n)n(r)})},SYNC_ACTIONS:{CREATE:1,UPDATE:2,DELETE:3,LINK:4,UNLINK:5,FAVORITE:6,FOLLOW:7},SYNC_ACTIONS_SYMBOLS:null,TRANSACTION_STATUSES:{UNRECOVERABLE:[403,405,422,500]},upgrade:function(n,r){var i=this,a=e.cache.get(t);e.logger.debug("Upgrading offline storage");e.offline.storage.upgrade(n,a,{success:function(t,n){e.logger.debug("Successfully upgraded offline storage");i.storeOfflineMeta(t);e.cache.set("offline:version",i.storage.getSqlStorageVersion());r(null,t,n)},error:function(t){e.logger.error("Failed to upgrade offline storage. "+t);r(t)}})},encrypt:function(t){if(e.offline.storage.isEncryptionSupported()){e.trigger("offline:encryption:start");_.defer(function(){e.offline.storage.encrypt(function n(){e.logger.debug("Successfully encrypted offline storage");e.trigger("offline:encryption:complete");e.cache.set("offline:encrypted",true);t()},function r(n){e.logger.error("Failed to encrypt offline storage. "+n);e.trigger("offline:encryption:complete",e.offline.Error.EncryptionFailedError);t()})})}else{t()}},migrate:function(t,n,r){var i=[],a=!e.config.offline.debug.forceMigrate&&n&&n._hash===t._hash&&n._userId===e.user.get("id")&&n.siteUrl===e.utils.stripHttpPrefix(e.config.siteUrl);var s=function(t){if(!t){e.logger.debug("Successfully migrated offline storage")}else{t.label=e.lang.get("ERR_OFFLINE_STORAGE_CREATE");e.logger.error("Failed to migrate offline storage. "+t)}r(t)};e.offline.storage.resetMigrationSummary();if(!a){e.logger.debug("Migrating offline storage");i=[function o(t){e.offline.utils.getServerTime(function(n,r){if(n){e.logger.error("Failed to get server time: "+n);n=new e.offline.Error("server_time_unavailable","Failed to retrieve server time","ERR_OFFLINE_SERVERTIME_UNAVAILABLE",n);t(n)}else{e.cache.set(e.offline.INITIALIZED_TS_KEY,r);t()}})},function l(r){e.offline.storage.migrate(t,n,{forceDrop:e.config.offline.debug.forceMigrate,success:r,error:r})}];async.series(i,s)}else{s()}},compactStorage:function(t){e.offline.storage.compact(t)},clearStorage:function(t){e.offline.storage.migrate(e.metadata.get(),null,{forceDrop:true,success:t.callback,error:t.callback})},storeOfflineMeta:function(n){var r={};r._hash=n._hash;r._userId=e.user.id;r.relationships={_hash:n.relationships._hash};r.siteUrl=e.utils.stripHttpPrefix(e.config.siteUrl);r.modules={};_.chain(n.modules).omit(e.config.offline.exclude).each(function(e,t){if(e._hash){r.modules[t]={_hash:e._hash,fields:{_hash:e.fields._hash}};_.each(e.fields,function(e,n){if(n==="_hash"){return}r.modules[t].fields[n]={type:e.type,name:e.name}})}});e.cache.set(t,r)},isOnline:function(){return e.config.offline.debug.online&&window.navigator.onLine},isOfflineEnabled:function(t){return(e.config.offline.exclude||[]).indexOf(t)===-1},startSyncManager:function(){if(e.config.offline.enabled&&!e.offline.syncManager.isStarted&&e.api.isAuthenticated()){e.offline.syncManager.start()}},stopSyncManager:function(){e.offline.syncManager.stop()},startMonitorStatus:function(){if(this._monitorIntervalId||!e.config.offline.debug.monitorStatus)return;var t=this,n=function(){async.parallel({transactions:function(n){t.storage.exec([{op:"countTransactions"}],function(e){n(null,e)},function r(t){e.logger.error("Failed to count transactions: "+t);n(t)})},isOutOfSpace:function(e){t.storage.isOutOfSpace(function(t){e(null,t)})}},function(n,r){var i=r.transactions||{};i.noConnection=t.noConnection||!t.isOnline();i.isSyncing=t.syncManager.isSyncing();i.lastSyncTs=t.syncManager.lastSyncTs;i.isOutOfSpace=r.isOutOfSpace;if(i.failedTransactions>0||i.isOutOfSpace){i.state=t.STATE.ERROR}else if(i.noConnection||i.totalTransactions>0){i.state=t.STATE.WARNING}else{i.state=t.STATE.OK}t.status=i;e.trigger("offline:status:update",i)})};n();this._monitorIntervalId=window.setInterval(n,e.config.offline.monitorTimeout||1e4)},stopMonitorStatus:function(){window.clearInterval(this._monitorIntervalId);this._monitorIntervalId=null},_onAjaxComplete:function(t,n){e.offline.noConnection=!n.aborted&&!n.status},convertReadRecordsFilter:function(t,n){var r=[];var i=t.filter?t.filter:[];var a,o,l,u;_.each(s.filterKeys,function(e,n){if(!_.isUndefined(t[n])){r.push(e)}});if(_.isEmpty(i)&&_.isEmpty(r)){return}a=!_.isEmpty(r)||!_.find(s.combiners,function(e){return i[0][e]});if(a){i=[{$and:_.union(i,r)}]}o=JSON.stringify({module:n,filter:i});if(this._parsedFiltersCache[o]){return this._parsedFiltersCache[o]}l=this._convertFilterRecursive(i,[]);if(!l){this._parsedFiltersCache[o]={isSupported:false};return this._parsedFiltersCache[o]}u=e.offline.storage.convertFilter(n,l)||{};this._parsedFiltersCache[o]={filter:l,filterFields:u.fields,filterSql:u.sql,isSupported:!!u.sql};return this._parsedFiltersCache[o]},_convertFilterRecursive:function l(e,t){if(_.isArray(e)){_.each(e,function(e){l(e,t)})}else if(_.isObject(e)){_.each(e,function(e,n){if(_.contains(s.combiners,n)){var r=[];t.push({operator:n,filters:r});l(e,r)}else{if(_.isObject(e)){_.each(e,function(e,r){t.push({field:n,condition:r,value:e})})}else{t.push({field:n,value:e,condition:"$equals"})}}})}return t.length?t:null},Error:function(e,t,n,r,i){this.code=e;this.message=t;this.label=n;this.err=r;this.sqlInfo=i}},false);_.extend(e.offline.Error.prototype,{localizedMessage:function(){var t;try{t=e.lang.get(this.label||"ERR_OFFLINE")}catch(n){t="Offline Error";e.logger.fatal("Failed to localize offline error. "+n)}return t},toString:function(){var t=this.localizedMessage()+": ("+this.code+") "+this.message;if(this.err){var n;try{n=JSON.stringify(this.err)}catch(r){n=this.err.toString()}t+="\nOriginal error: "+n}if(this.sqlInfo){var i=/\\\"/g,a,s;if(e.config.env==="dev"){a=this.sqlInfo.failedSql;s=this.sqlInfo.transactionSql}else{a=this.sqlInfo.failedSql.sql;s=_.map(this.sqlInfo.transactionSql,function(e){return{module:e.module,sql:_.map(e.sql,function(e){return{sql:e.sql}})}})}t+=". Failed SQL: "+JSON.stringify(a).replace(i,'"');t+=". All SQL in transaction: "+JSON.stringify(s).replace(i,'"')}return t}});_.extend(e.offline.Error,{OfflineDisabledError:new e.offline.Error("offline_disabled","Offline Mode is disabled","Offline is not initialized"),OutOfSpaceError:new e.offline.Error("out_of_space","Out of space","ERR_OFFLINE_OUT_OF_SPACE"),StorageUnavailableError:new e.offline.Error("storage_unavailable","Failed to open db","ERR_OFFLINE_STORAGE_UNAVAILABLE"),EncryptionFailedError:new e.offline.Error("encryption_failed","Failed to encrypt local storage.","ERR_OFFLINE_ENCRYPTION_FAILED"),UnknownError:new e.offline.Error("unknown","Unknown error")})})(SUGAR.App)},function(e,t){(function(e){e.offline.utils={notImplemented:function(){throw new Error("Not implemented. Please override this method with your implementation")},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})},isDataSynchronized:function(t){if(t instanceof e.Bean){return t.get("_client_date_modified")===t.get("date_modified")}else if(_.isObject(t)){return t._client_date_modified&&t.date_modified&&t._client_date_modified===t.date_modified}else return false},prepareHighlightQuery:function(e){var t="(\\*|\\%)+";e=e?e.trim().replace(/[-\[\]{}()+.,\\\^$|#\s]/g,"\\$&").replace(new RegExp("(^"+t+")|("+t+"$)","g"),"").replace(/%|\*/g,".*").replace(/_|\?/g,"."):"";return e},prepareQuery:function(e){e=e?e.trim().replace(/[-\[\]{}()+.,\\\^$|#\s]/g,"\\$&").replace(/%|\*/g,".*").replace(/_|\?/g,"."):"";return"^"+e},checkIsEmptyQuery:function(e){e=e?e:"";e=e.replace(/%|\*/g,"").replace(/_|\?/g,"");e=e.trim();return _.isEmpty(e)},compileHighlightRegExp:function(e){e=this.prepareHighlightQuery(e);return new RegExp("([^\\s:-;,><]*"+e+"[^\\s:-;,><]*)","i")},compileSearchRegExp:function(e){return new RegExp(this.prepareQuery(e))},actionToSymbol:function(t){var n=t._tx_action||t.action,r=t._tx_related_id||t.relate;return e.offline.SYNC_ACTIONS_SYMBOLS[n]+(r?"_RELATED":"")},getTxAge:function(e){return parseInt((new Date-new Date(e._tx_ts))/1e3,10)},getCleanedParams:function(e){return _.omit(e,["changedFields","skipServerSync","skipOfflineRead","serverSyncSuccess","deferSync","initialState","forceServerSync","relate"])},actionToString:function(t){if(t===e.offline.SYNC_ACTIONS.CREATE){return"createSingle"}else if(t===e.offline.SYNC_ACTIONS.UPDATE||t===e.offline.SYNC_ACTIONS.LINK){return"updateValuesSingle"}else if(t===e.offline.SYNC_ACTIONS.DELETE||t===e.offline.SYNC_ACTIONS.UNLINK){return"hardDeleteSingle"}else if(t===e.offline.SYNC_ACTIONS.FAVORITE||t===e.offline.SYNC_ACTIONS.FOLLOW){return"updateValuesSingle"}else{throw new Error("Invalid action")}},isRecordAssignedToLoginUser:function(t){return t.assigned_user_id&&t.assigned_user_id===e.user.id},getOfflineModules:function(){return _.filter(_.keys(e.metadata.get().modules),function(t){return e.offline.isOfflineEnabled(t)})},getBeforeAndAfter:function(e,t){t=t||{};var n={};_.each(e,function(e,r){if(r==="_client_date_modified"||r==="id"||e===t[r]){return}n[r]={after:e,before:t[r]?t[r]:null}},this);return _.isEmpty(n)?null:n},getInitialState:function(e,t){var n=JSON.parse(e._tx_updated_fields);_.each(n,function(e,n){if(n==="email"){return}t[n]=e.before});return t},fetchPageByPage:function(t,n,r,i,a){var s=a.maxRecords||20,o=a.pageSize||20;i=i||0;_.extend(n,{offset:n.offset||0,max_num:o,order_by:n.order_by||"date_modified:DESC"});e.offline.api.callOriginalApi("records",["read",t,null,n,{success:function(l){if(_.isEmpty(l.records)){return a.callback()}r({module:t,records:l.records,callback:function(u){if(u){return a.callback(u)}var c=i>=s;i+=o;n.offset+=o;if(a.iterator){a.iterator(c?s:i)}if(c||l.next_offset===-1){a.callback()}else{e.offline.utils.fetchPageByPage.call(e.offline.utils,t,n,r,i,a)}}})},error:a.callback}])},ping:function(t){var n=+new Date;e.offline.api.callOriginalApi("ping",[null,{success:function(){var e=new Date-n;t(null,e)},error:function(e){t(e)}}])},getServerTime:function(t){e.offline.api.callOriginalApi("ping",["whattimeisit",{success:function(e){t(null,e)},error:t},{skipMetadataHash:true}])},shouldUpdateLastViewedDate:function(e){return e&&e.viewed},callOnce:function(e){var t={success:false,error:false,complete:false};_.each(e,function(n,r){e[r]=function(){if(t[r]){return}t[r]=true;n.apply(this,arguments);n=null}})},paginate:function(e,t){var n=0,r,i=[];if(_.isEmpty(e)){return i}function a(e,n){var r=n*t,i=(n+1)*t;return e.slice(r,i)}r=a(e,n);while(!_.isEmpty(r)){i.push(r);r=a(e,++n)}return i},getStoppableAsyncFlow:function(t,n,r){var i=false,a;a=_.map(n,function(t){return function n(){if(i){e.logger.debug("Async flow interrupted");r()}else{t.apply(null,arguments)}}});async[t](a,r);return function s(){i=true}}}})(SUGAR.App)},function(e,t){(function(e){e.offline.syncManager={httpErrorHandler:null,lastSyncTs:null,syncExecutors:[],_currentExecutor:null,start:function(){this.intervalId=window.setInterval(this._runSyncIteration,e.config.offline.syncManager.syncTimeout*1e3||1e4)},stop:function(){window.clearInterval(this.intervalId)},dispose:function(){e.events.off("offline:data:sync:success",null,this);this.syncExecutors=[];this.stop()},init:function(){this.dispose();e.events.on("offline:data:sync:success",function(){this._runSyncIteration()},this)},registerExecutor:function(e){t.syncExecutors.push(e);t.syncExecutors=_.sortBy(t.syncExecutors,function(e){return e.getPriority()})},isSyncing:function(){var e=false;_.each(t.syncExecutors,function(t){e=e||t.isWorking()});return e},_syncErrorHandler:function(n){if(n instanceof SUGAR.Api.HttpError){if(e.utils.isConnectivityError(n)){return}else if(n.status===412&&t.httpErrorHandler){t.stop();t.httpErrorHandler(n)}else{e.logger.error(n)}}else if(n instanceof e.offline.Error){t.stop();var r=n===e.offline.Error.OfflineDisabledError?n:new e.offline.Error("synchronization_error","Synchronization failed","ERR_OFFLINE_SYNC_ERROR",n);e.trigger("offline:failure",r);e.logger.error(n)}else if(n){e.logger.error(n)}},_runSyncIteration:function(n){if(!e.offline.isOnline()||!e.config.offline.debug.syncManagerEnabled||!e.config.offline.syncManager.enabled||_.isEmpty(t.syncExecutors)){if(n)n();return}var r=[];_.each(t.syncExecutors,function(e){r.push(function(){t._currentExecutor=e;e.sync.apply(e,arguments)})});async.series(r,function(e){t._currentExecutor=null;t.lastSyncTs=new Date;t._syncErrorHandler(e);if(n)n(e)})},sync:function(t){if(e.offlineEnabled){this._runSyncIteration(t)}},startRecordsPreloader:function(e){e=e||{};t.stop();if(t._currentExecutor){t._currentExecutor.stop()}var n=e.callback;t.recordsPreloader.start(_.extend(e,{callback:function(e){t.start();if(n)n(e)}}))}};var t=e.offline.syncManager})(SUGAR.App)},function(e,t){(function(e){var t;e.offline.api={originalMethods:{},NO_CONNECTION_ERROR:{status:0,textStatus:"error",toString:function(){return"No internet connection"}},SERVER_READ_STATUS:{start:1,finish:2,error:3},override:function(){_.extend(this.originalMethods,{records:e.api.records,relationships:e.api.relationships,favorite:e.api.favorite,follow:e.api.follow,search:e.api.search,file:e.api.file});_.extend(e.api,{records:this.records,relationships:this.relationships,favorite:this.favorite,follow:this.follow,search:this.search,file:this.file})},restore:function(){if(_.isEmpty(this.originalMethods))return;_.extend(e.api,{records:this.originalMethods["records"],relationships:this.originalMethods["relationships"],favorite:this.originalMethods["favorite"],follow:this.originalMethods["follow"],search:this.originalMethods["search"],file:this.originalMethods["file"]});this.originalMethods={}},records:function(n,r,i,a,s,o){if(e.offline.isOfflineEnabled(r)||_.contains(e.config.offline.customOfflineModules||[],r)){return t._executeOfflineApi(n,r,i,a,s,t.originalMethods["records"],o)}else{return t.originalMethods["records"].call(e.api,n,r,i,e.offline.utils.getCleanedParams(a),s,o)}},relationships:function(n,r,i,a,s,o){var l=e.data.getRelatedModule(r,i.link);if(e.offline.isOfflineEnabled(r)&&e.offline.isOfflineEnabled(l)){a.relate=true;i.relatedModule=l;return t._executeOfflineApi(n,r,i,a,s,t.originalMethods["relationships"],o)}else{return t.originalMethods["relationships"].call(e.api,n,r,i,e.offline.utils.getCleanedParams(a),s,o)}},favorite:function(n,r,i,a,s){s=s||{};if(e.offline.isOfflineEnabled(n)){return t._executeOfflineApi("favorite",n,{id:r,my_favorite:i},s,a,t.originalMethods["favorite"])}else{return t.originalMethods["favorite"].apply(e.api,arguments)}},follow:function(n,r,i,a,s){s=s||{};if(e.offline.isOfflineEnabled(n)){return t._executeOfflineApi("follow",n,{id:r,following:i},s,a,t.originalMethods["follow"])}else{return t.originalMethods["follow"].apply(e.api,arguments)}},search:function(e,n,r){return t._executeOfflineApi("search",null,null,e,n,null,r)},file:function(n,r,i,a,s){var o=a.success,l=r.module;if(_.contains(["create","delete"],n)){a.success=function(t,n,i){var a={id:r.id};a[r.field]=_.isEmpty(t.record)?"":t.record[r.field];e.offline.storage.saveRecords({serverData:a,module:l,ignoreRecordDirtiness:true,callback:_.bind(o,e.api,t,n,i)})}}return t.originalMethods["file"].apply(e.api,arguments)},callOriginalApi:function(n,r){var i,a,s,o,l={search:1,ping:1,follow:3,favorite:3,file:3,records:4,relationships:4};if(_.isString(n)){if(n==="read"){i=e.api.call;a=r[3]}else{i=t.originalMethods[n]||e.api[n];a=r[l[n]]}}else{i=n;_.find(t.originalMethods,function(e,t){if(e===n){a=r[l[t]];return true}})}o=_.last(r)||{};var u=a["error"],c=function(){e.logger.debug("Original API callback suppressed. Offline layer is not initialized")},f=o.catchServerRequest||function(){};if(!e.offlineEnabled){return u?u.call(this,e.offline.Error.OfflineDisabledError):c()}_.each(a,function(t,n){if(_.isFunction(t)){a[n]=function(){f(null);if(!e.offlineEnabled){return u?u.call(this,e.offline.Error.OfflineDisabledError):c()}else{t.apply(this,arguments)}}}});s=i.apply(e.api,r);f(s)},_executeOfflineApi:function(e,t,n,r,i,a,s){s=s||{};var o,l={method:e,module:t,data:n,params:r,callbacks:i,originalApi:a,options:s};s.catchServerRequest=function(e){o=e};function u(){return o}switch(e){case"search":this.readMixedCollection(l);break;case"read":var c=n&&n.link?n.relatedId:n?n.id:null,f=c?this.readSingle:this.readCollection;f.call(this,l);break;default:this.createUpdateDelete(l)}return u}};t=e.offline.api})(SUGAR.App)},function(e,t){(function(e){var t={readSingle:function n(t){var n={"offline:api:read:success":{}},r=false,i=t.method,a=t.module,s=t.data,o=t.params,l=t.callbacks,u=t.options;function c(){if(l.error)l.error({status:404})}e.offline.utils.callOnce(l);function f(){e.offline.storage.sync("read",s,a,_.extend({},o,{ts:e.utils.getTimestamp(),success:function(t){var n=!o.skipServerSync&&e.offline.isOnline();if(t){if(l.success){l.success(t);r=true}n=n&&e.offline.utils.isDataSynchronized(t)}else if(!n){c()}if(n){d(t)}else{h()}},error:function(e){if(l.error)l.error(e);p(e)},complete:l.complete}))}function d(t){var c=o.relate?"relationships":"records";e.offline.api.callOriginalApi(c,[i,a,s,e.offline.utils.getCleanedParams(o),{success:function(u){e.offline.api.cacheRequest(i,a,s,o);e.offline.storage.saveRecords({serverData:u,module:a,relationshipData:o.relate?s:null,callback:function(i){if(!i){if(!r&&l.success){l.success(u)}n["offline:data:updated"]={isCollection:false,action:t?"update":"create",id:s.id,date_modified:e.utils.getTimestamp(u.date_modified)};h()}else{p(i)}}})},error:function(t){if(l.error)l.error(t);if(t===e.offline.Error.OfflineDisabledError){return}var r=o.relate?s.relatedModule:a,i=o.relate?s.relatedId:s.id;switch(t.status){case 412:return;case 403:case 404:n["offline:data:updated"]={isCollection:false,action:"delete",status:t.status,module:r,data:s,id:s.id}}var u=o.relate?{module:a,data:s,relate:o.relate}:{module:r,id:i,relate:o.relate};e.offline.storage.resolveError({nonTransactionResolve:u,error:t,callback:function(e){if(e){p(e)}else{h()}}})}},u])}function h(){e.logger.debug("readSyncSingle success");_.each(n,function(t,n){e.trigger(n,t)})}function p(t){e.logger.error("readSyncSingle failed. "+t)}f()}};_.extend(e.offline.api,{readSingle:_.bind(t.readSingle,t),_readSingleScope:t})})(SUGAR.App)},function(e,t){(function(e){var t={readCollection:function n(t){var n=t.method,r=t.module,i=t.data,a=i&&i.relatedModule||r,s=t.params,o=t.callbacks,l=t.options,u=[],c;e.offline.utils.callOnce(o);if(r==="Recents"){e.offline.utils.callOnce(o);return this._readRecentsCollection(n,r,i,s,o,l)}if(r==="TxLog"){s.skipServerSync=true}if(!s.skipOfflineRead){c=this._getOfflineReadParams(a,s);if(!c.skipOfflineRead){u.push(_.bind(function d(e){this._offlineRead(e,n,r,i,c,o,l)},this))}}if(e.offline.isOnline()){if(!s.skipServerSync){u.push(_.bind(function(e){if(s.filter&&c&&!c.skipOfflineRead){s.fields=_.union(s.fields?s.fields.split(","):[],c.filterParsed.filterFields).join()}this._serverRead(e,n,r,i,s,o,l)},this))}}else{if(o.error){var f=_.extend({},e.offline.api.NO_CONNECTION_ERROR,{request:{params:l}});o.error(f)}}async.waterfall(u,_.bind(function h(e,t){this._onReadCollectionComplete(e,t,o)},this))},_offlineRead:function(t,n,r,i,a,s,o){e.offline.storage.sync("read",i,r,_.extend({},a,{ts:e.utils.getTimestamp(),success:function l(n){var i;n=n||[];n=!_.isArray(n)?[n]:n;if(r==="TxLog"){var o;o=n.pop().totalTransactions;n=_.map(n,function(e){e.id=e._tx_uid;return e});var l=(a.offset||0)+n.length;i=o>l?l:-1;e.offline.storage.fillTxLogData(n,function(){s.success({records:n,next_offset:i})})}else{i=a.max_num>n.length||a.serverNextOffset===-1?-1:(a.offset||0)+n.length;var u={records:n,next_offset:i};if(s.success)s.success(u)}t()},error:function(e){if(s.error)s.error(e);t(e)},complete:s.complete}))},_getOfflineReadParams:function r(t,n){var r=e.utils.deepCopy(n),i,a,s,o;s=e.offline.convertReadRecordsFilter(r,t);if(s){if(s.isSupported){r.filterParsed=s}else{r.skipOfflineRead=true}}if(r.order_by){i=r.order_by.split(":")[0];a=r.order_by.split(":")[1];if(i==="email"){r.order_by=["email1",a].join(":")}else if(i==="name"){o=e.metadata.getModule(t,"fields").name;if(o.group){r.order_by=[o.group,a].join(":")}}}return r},_serverRead:function(t,n,r,i,a,s,o){var l=a.relate?"relationships":"records";var u=e.offline.api.SERVER_READ_STATUS;var c=false;var f=false;e.trigger("offline:server:read",{status:u.start,apiOptions:o});e.offline.api.callOriginalApi(l,[n,r,i,e.offline.utils.getCleanedParams(a),{success:function(l){e.offline.api.cacheRequest(n,r,i,a);if(s.success)s.success(l);l=l||{};if(a.serverSyncSuccess&&l.records){a.serverSyncSuccess({records:l.records,next_offset:l.next_offset},a)}if(!_.isEmpty(l.records)){c=true;e.offline.storage.saveRecords({module:r,serverData:l.records,relationshipData:a.relate?i:null,callback:function(n){t(n,l);if(!n&&!a.skipOfflineRead){e.trigger("offline:data:updated",{isCollection:true,action:"update",module:r,relationsData:i,serverNextOffset:l.next_offset,requestParams:a,cid:o.cid})}}})}else{t(null,l)}},error:function(e){f=true;if(s.error)s.error(e);t(e)},complete:function(){e.trigger("offline:server:read",{status:f?u.error:u.finish,apiOptions:o,dataUpdated:c});if(s.complete){s.complete(arguments)}}},o])},_onReadCollectionComplete:function(t,n,r){if(t){if(r.error){r.error(t)}if(t instanceof e.offline.Error&&t!==e.offline.Error.OfflineDisabledError){e.logger.error("readSyncCollection failed. "+t)}}else{e.logger.debug("readSyncCollection success");e.trigger("offline:api:read:success")}if(r.complete){r.complete(n)}},_readRecentsCollection:function i(t,n,r,a,s,o){var l=this;async.waterfall([function u(t){var n=e.offline.utils.getOfflineModules(),r=a.module_list?a.module_list.split(","):n,i=_.chain(n).without("Teams").intersection(r).value(),o=_.map(i,function(t){return{op:"readRecents",module:t,options:{max_num:e.config.fetchLimit.recents}}});var l=function(e,n){s.complete(e||n);t(e,n)};e.offline.storage.exec(o,function(e){if(!e){e=[]}else if(!_.isArray(e)){e=[e]}e=_.sortBy(e,function(e){return-new Date(e._last_viewed_date)});s.success({records:e,next_offset:-1});l(null,e)},l)},function c(r,i){if(!e.offline.isOnline()||a.skipServerSync){i();return}var s=e.offline.api.SERVER_READ_STATUS;var l=false;var u=false;a=e.offline.utils.getCleanedParams(a);a.module_list=_.intersection(a.module_list.split(","),e.offline.utils.getOfflineModules()).join(",");e.trigger("offline:server:read",{status:s.start,apiOptions:o});e.offline.api.callOriginalApi("records",[t,n,null,a,{success:function(t){if(!_.isEmpty(t.records)){var n=t.records,r=[];l=true;r.push(function(n){e.offline.storage.saveRecords({serverData:t.records,callback:n})});r.push(function(r){e.offline.storage.exec([{op:"readLastViewed",options:{ids:_.pluck(t.records,"id")}}],function(e){if(e){if(!_.isArray(e)){e=[e]}n=_.reject(n,function t(n){var r=_.findWhere(e,{bean_id:n.id});return r&&new Date(r.date_last_viewed)-0>new Date(n._last_viewed_date)-0})}r()},r)});async.series(r,function a(t,r){if(!t){e.offline.storage.exec(_.map(n,function(t){return{op:"updateLastViewed",data:t,module:t._module,options:{ts:e.utils.getTimestamp(t._last_viewed_date)}}}),function a(){e.trigger("offline:data:updated",{isCollection:true,action:"update",module:"Recents",cid:o.cid});i()},i)}i(t)})}else{i()}},error:function(e){u=true;i(e)},complete:function(){e.trigger("offline:server:read",{status:u?s.error:s.finish,apiOptions:o,dataUpdated:l})}},o])}],function(e,t){l._onReadCollectionComplete(e,t,s)})}};_.extend(e.offline.api,{readCollection:_.bind(t.readCollection,t),_readCollectionScope:t})})(SUGAR.App)},function(e,t){(function(e){var t={readMixedCollection:function n(t){var n=t.method,r=t.data,i=t.params,a=t.callbacks,s=t.options,o=[];e.offline.utils.callOnce(a);if(!i.skipOfflineRead){o.push(_.bind(function u(e){this._offlineRead(e,n,r,i,a,s)},this))}if(e.offline.isOnline()){if(!i.skipServerSync){o.push(_.bind(function c(e){this._serverRead(e,n,r,i,a,s)},this))}}else{if(a.error){var l=_.extend({},e.offline.api.NO_CONNECTION_ERROR,{request:{params:s}});a.error(l)}}async.waterfall(o,_.bind(function f(e,t){this._onReadCollectionComplete(e,t,a)},this))},_offlineRead:function r(t,n,i,a,s,o){e.offline.storage.sync("search",null,null,_.extend({},a,{ts:e.utils.getTimestamp(),success:function l(n){var r=a.module_list&&a.module_list.split(",").length>1,i,o,l,u={};n=n||[];n=!_.isArray(n)?[n]:n;if(!e.offline.utils.checkIsEmptyQuery(a.q)){o=e.offline.utils.compileSearchRegExp(a.q);l=e.offline.utils.compileHighlightRegExp(a.q);_.each(a.module_list.split(","),function(t){u[t]=e.metadata.getModule(t).fields});_.each(n,function(t){i=t._module||t.module;t._search={isOffline:true};_.each(e.offline.storage.offlineMeta[i].searchFields,function(e){var n=e.name,r=t[n];if((_.isString(r)||_.isNumber(r))&&o.test(r)){t._search.highlighted=t._search.highlighted||{};t._search.highlighted[n]={module:i,text:r.toString().replace(l,"<strong>$1</strong>"),label:u[i][n].vname}}})})}if(r){n=_.sortBy(n,function(e){return e._client_date_modified}).reverse()}if(r){var c=a.max_num||e.config.maxQueryResult;n=n.splice(a.offset||0,c)}var f=a.max_num>n.length?-1:(a.offset||0)+n.length;var d={records:n,next_offset:f};if(s.success)s.success(d);t()},error:function(e){if(s.error)s.error(e);t(e)},complete:s.complete}))},_serverRead:function(t,n,r,i,a,s){var o=false;var l=false;var u=e.offline.api.SERVER_READ_STATUS;e.trigger("offline:server:read",{status:u.start,apiOptions:s});e.offline.api.callOriginalApi(n,[e.offline.utils.getCleanedParams(i),{success:function(n){if(a.success)a.success(n);n=n||{};if(i.serverSyncSuccess&&n.records){i.serverSyncSuccess({records:n.records,next_offset:n.next_offset},i)}if(!_.isEmpty(n.records)){o=true;e.offline.storage.saveRecords({serverData:n.records,callback:function(n){t(n);if(!n&&!i.skipOfflineRead){e.trigger("offline:data:updated",{isCollection:true,action:"update",mixedCollection:true,requestParams:i,cid:s.cid})}}})}else{t()}},error:function(e){l=true;if(a.error){a.error(e)}t(e)},complete:function(){e.trigger("offline:server:read",{status:l?u.error:u.finish,apiOptions:s,dataUpdated:o});if(a.complete){a.complete(arguments)}}},s])},_onReadCollectionComplete:function(t,n,r){if(t){if(t instanceof e.offline.Error&&t!==e.offline.Error.OfflineDisabledError){e.logger.error("readSyncMixedCollection failed. "+t)}}else{e.logger.debug("Read mixed collection success")}if(r.complete){r.complete(n)}}};_.extend(e.offline.api,{readMixedCollection:_.bind(t.readMixedCollection,t),_readMixedCollectionScope:t})})(SUGAR.App)},function(e,t){(function(e){var t={createUpdateDelete:function n(t){var n=this,r=t.method,i=t.module,a=t.data,s=t.params||{},o=t.callbacks,l=t.originalApi,u=t.options;if(!s.deferSync&&e.offline.isOnline()){async.waterfall([function c(t){e.offline.storage.readTransactions({limit:1,success:function(e){t(null,e)},error:t})}],function f(t,c){if(t&&o.error){e.logger.error("createUpdateDeleteSync failed"+t);o.error(t)}else{if(c){n._offlineSync(r,i,a,s,o)}else{n._serverSync(r,i,a,s,o,l,u)}}})}else{n._offlineSync(r,i,a,s,o)}},_isInitialStateRequired:function r(e,t,n,i){return e==="update"||e==="favorite"||e==="follow"||(e==="create"||e==="delete")&&n.link},_offlineSync:function i(t,n,r,a,s){var o=this;async.series([function l(i){if(o._isInitialStateRequired(t,n,r,a)){var s=a.relate?r.relatedModule:n,l=a.relate?r.relatedId:r.id;e.offline.storage.readSingleRawRecord(s,{id:l},{success:function(e){a.initialState=e;i()},error:i})}else i()}],function(i){if(i){var o="Failed to read initial record during offline sync. Module: {0}, data: {1}";o=e.utils.formatString(o,[n,JSON.stringify(r||{})]);e.logger.error(o);if(s.error){s.error(i)}return}e.offline.storage.sync(t,r,n,_.extend({},{ts:e.utils.getTimestamp(),success:function(n){e.trigger("offline:data:sync:success",n);if(s.success)s.success(n);e.logger.trace("Successfully executed: "+t)},error:function(e){if(s.error){s.error(e)}},complete:s.complete},a))})},_serverSync:function a(t,n,r,i,s,o,l){var u=this;var c=function(a){var o,l=e.acl.hasAccessToModel("access",e.data.createBean(n,a));if(t==="delete"||!l){o=[function(t){e.offline.storage.sync("delete",r,n,_.extend(i,{hardDelete:true,success:function(){t()},error:t}))}];if(i.relate){o.push(function(t){e.offline.storage.saveRecords({serverData:a.record,module:n,callback:t})});o.push(function(t){e.offline.storage.saveRecords({serverData:a.related_record,module:r.relatedModule,callback:t})})}async.series(o,function c(t){if(t){e.logger.error(t);s.error(t)}else{s.success(a)}})}else{var u=t!=="follow"?a:{id:r.id,
following:r.following};if(_.isObject(u)){o=[function(t){e.offline.storage.saveRecords({serverData:i.relate?u.record:u,module:n,callback:t})}];if(i.relate){o.push(function(t){e.offline.storage.saveRecords({serverData:u.related_record,module:n,relationshipData:r,callback:t})})}if(t==="create"&&!i.relate||t==="create"&&(i.relate&&!r.relatedId)){o.push(function(t){e.offline.storage.updateLastViewed(i.relate?u.related_record:u,{module:i.relate?r.relatedModule:n,callback:t})})}if(t!=="delete"){o.push(function(t){e.offline.storage.markToBeSynced({module:i.relate?r.relatedModule:n,callback:t,action:"update",record:i.relate?u.related_record:u})})}async.series(o,function f(t){if(t){e.logger.error(t);s.error(t)}else{s.success(a);e.trigger("offline:data:updated",{isCollection:false,action:"update"})}})}else{s.success(a)}}};var f=function(a){if(a&&e.utils.isConnectivityError(a)){u._offlineSync(t,n,r,i,s)}else{if(s.error)s.error(a)}};if(t==="favorite"||t==="follow"){e.offline.api.callOriginalApi(o,[n,r.id,t==="favorite"?r.my_favorite:r.following,{success:c,error:f,complete:s.complete}])}else{if(t==="create"&&!r.relatedId){var d=r.link?r.related:r;d.id=e.utils.generateUUID()}e.offline.api.callOriginalApi(o,[t,n,r,e.offline.utils.getCleanedParams(i),{success:c,error:f,complete:s.complete},l])}}};_.extend(e.offline.api,{createUpdateDelete:_.bind(t.createUpdateDelete,t),_createUpdateDeleteScope:t})})(SUGAR.App)},function(e,t){(function(e){var t={_rStack:[],_rTs:{},_getPseudoUrl:function(e,t,n,r){var i=r.relate?n:n?{id:n.id}:null;var a=JSON.stringify({module:t,data:i,params:_.pick(r,"max_num","offset","relate","favorites","my_items")});return a},handleServerSyncSkip:function(e,t,n,r){if(r.skipServerSync||r.forceServerSync||r.skipOfflineRead){return}var i=this._getPseudoUrl(e,t,n,r);if(this._shouldSuppressRemoteSync(i)){r.skipServerSync=true}},_shouldSuppressRemoteSync:function(t){return _.contains(this._rStack,t)&&(new Date).getTime()-this._rTs[t]<e.config.offline.httpThrottleTimeout},cacheRequest:function(t,n,r,i){var a=this._getPseudoUrl(t,n,r,i),s=this._rStack,o=this._rTs,l=e.config.offline.httpThrottleCacheSize;var u=s.indexOf(a);if(u>-1){s.splice(u,1)}s.splice(0,0,a);o[a]=(new Date).getTime();if(s.length>l){delete o[s.pop()]}return{rStack:s,rTs:o}}};_.extend(e.offline.api,{handleServerSyncSkip:_.bind(t.handleServerSyncSkip,t),cacheRequest:_.bind(t.cacheRequest,t),_httpThrottlingScope:t})})(SUGAR.App)},function(e,t){(function(e){var t="No records found using this filter",n="%";e.offline.syncManager.recordsPreloader={_requestTime:0,start:function(t){var n=this;e.trigger("offline:prefetch:start");t=t||{};var r=t.callback;_.extend(t,{callback:function(t){if(t){e.logger.error("Prefetch failed. "+t)}else{e.logger.debug("Successfully prefetched modules")}n._requestTime=0;e.trigger("offline:prefetch:complete",t);if(r){r(t)}}});if(!_.isEmpty(t.relatedModules)){this.preloadRelationships(t)}else{if(_.isEmpty(t.modules)){t.modules=e.config.offline.prefetch.staticModules}this._prefetch(t)}},preloadRelationships:function(t){var n=this,r=[],i=e.config.offline.prefetch.relationships.pageSize,a=t.relatedModules;_.each(a,function(a,s){r.push(function(r){async.waterfall([function o(n){e.offline.storage.sync("read",undefined,s,_.extend(t,{max_num:a.maxThreshold,selectFields:"id",success:function(e){n(null,e)},error:n}))},function l(t,r){var o=e.offline.utils.paginate(t,i),l=a.relationships;n._fetchRelatedModules({relatedModules:l,parentModule:s,pagedRecords:o,pageSize:i,callback:r})}],r)})});async.series(r,t.callback)},_fetchRelatedModules:function(t){var n=[],r=this;if(_.isEmpty(t.pagedRecords)){return t.callback(null)}_.each(t.pagedRecords,function(i){var a={},s={};_.each(t.relatedModules,function(t,n){var r={};r[t.rhs_key]={$in:_.pluck(i,"id")};a[n]=[r];s[n]=e.config.offline.prefetch.relationships.maxThreshold});n.push(function(e){r._prefetch({modules:s,parentModule:t.parentModule,relatedModules:t.relatedModules,callback:e,filter:a,skipRecordsCount:true,pageSize:t.pageSize})})});async.series(n,t.callback)},_prefetch:function(n){var r=[],i=this,a=n.modules;_.each(a,function(a,s){if(!e.metadata.getModule(s)||!e.acl.hasAccess("list",s)){e.logger.debug("Skipping prefetch of "+s+". Either metadata is missing or no access is given");return}r.push(function(r){var o;o=[function(r){if(!n.skipRecordsCount){i._calculateEstimatedTimePerModule(s,n,function(n,i,a){if(n){e.logger.error("Calculating estimated prefetching time failed in module "+s+"."+n);r(n)}else if(a){e.logger.debug("Successfully calculated prefetching time for module "+s+". Estimated time is "+i);r(n,i,a)}else{r(t)}})}else{r(null,null,e.config.offline.prefetch.maxThreshold)}},function(e,t,r){i._prefetchModule(_.extend({},n,{maxRecords:a,moduleName:s,estimatedTime:e,recordsCount:t,callback:r}))}];async.waterfall(o,function(e){if(e===t){r()}else{r(e)}})})},this);async.series(r,function(t){if(t)e.error.handleHttpError(t);if(n.callback){n.callback(t)}})},_prefetchModule:function(t){var n=t.pageSize||e.config.offline.prefetch.pageSize,r=0,i=this,a=+new Date,s=t.maxRecords||e.config.offline.prefetch.maxThreshold,o=t.recordsCount,l=t.moduleName,u=e.metadata.getModule(l,"mergedFields"),c,f,d,h,p;if(o&&o<s){f=o}else{f=s}c={max_num:n,offset:r,fields:u.join(",")};if(t.filter){c.filter=t.filter[l]||t.filter}d=function(t){e.offline.storage.saveRecords.call(e.offline.storage,{module:t.module,serverData:t.records,callback:t.callback})};h=function(e){var n=+new Date,r;i._requestTime=n-a;r=i._getEstimatedTime(f-e);p=i._getProgressValue(e,f);i._processPrefetchProgress(_.extend({},t,{estimatedTime:r,progressValue:p}));a=n};i._processPrefetchProgress(_.extend({},t,{estimatedTime:t.estimatedTime,progressValue:i._getProgressValue(r,f)}));e.offline.utils.fetchPageByPage(l,c,d,null,{callback:t.callback,maxRecords:f,pageSize:n,iterator:h})},_processPrefetchProgress:function(t){var r=_.extend({},t,{estimatedTime:t.estimatedTime,module:t.moduleName});r.progressValue=t.parentModule?"":t.progressValue+n;e.trigger("offline:prefetch:progress",r)},_calculateEstimatedTimePerModule:function(t,n,r){var i=this;if(!i._requestTime){e.offline.utils.ping(function(e,a){i._requestTime=a;i._getRecordsCount(t,n,r)})}else{i._getRecordsCount(t,n,r)}},_getEstimatedTime:function(t){var n=e.config.offline.prefetch.pageSize||20;return this._requestTime&&(t/n/1e3*this._requestTime).toFixed(2)},_getRecordsCount:function(t,n,r){e.api.count(t,null,{success:_.bind(function(e){var t=parseInt(e.record_count,10);r(null,this._getEstimatedTime(t),t)},this),error:r},{filter:n.filter})},_getProgressValue:function(e,t){if(e>t){e=t}return Math.round(e/t*100)}}})(SUGAR.App)},function(e,t){(function(e){var t=function(e){this._module=e};_.extend(t.prototype,{combiners:{$or:" OR ",$and:" AND "},conditions:{base:{$equals:"=",$not_equals:"!=",$lt:"<",$lte:"<=",$gt:">",$gte:">=",$starts:function(e,t){return e+' LIKE "'+t+'%"'},$ends:function(e,t){return e+' LIKE "%'+t+'"'},$contains:function(e,t){return e+' LIKE "%'+t+'%"'},$not_contains:function(e,t){return e+' NOT LIKE "%'+t+'%"'},$in:function(e,t,n){t=n.value;return e+" IN ("+(_.isArray(t)?t.map(this._quotStr).join():t)+")"},$not_in:function(e,t,n){t=n.value;return e+" NOT IN ("+(_.isArray(t)?t.map(this._quotStr).join():t)+")"},$is_null:function(e){return e+" ISNULL"},$not_null:function(e){return e+" NOTNULL"},$empty:function(e){return"("+e+'="")'},$not_empty:function(e){return"("+e+'!="")'},$dateBetween:function(t,n,r){n=r.value;var i=e.date.utc(n[0]).startOf("day").toDate();var a=e.date.utc(n[1]).endOf("day").toDate();i=this._quotStr(this._getValue(i,t));a=this._quotStr(this._getValue(a,t));return t+" BETWEEN "+i+" AND "+a},$between:function(e,t,n){t=n.value;return e+" BETWEEN "+this._quotStr(t[0])+" AND "+this._quotStr(t[1])},$dateRange:function(e,t,n){t=n.value;var r=this._parseRange(t);if(r){var i={field:e,value:r[0],condition:"$gte"};var a={field:e,value:r[1],condition:"$lte"};return this._buildCondition(i)+" AND "+this._buildCondition(a)}return false}},byType:{tag:{$in:function(e,t,n){t=n.value.join("|");return e+' REGEXP "^.*""name"":""('+t+')"".*$"'},$not_in:function(e,t,n){var r=e+" ISNULL OR "+e+' REGEXP "^((?!';r+=_.map(n.value,function(e){return'""name"":""'+e+'""'}).join("|");r+=').)*$"';return r},$empty:function(e){return e+'="[]" OR '+e+" ISNULL"},$not_empty:function(e){return e+'!="[]" AND '+e+" NOTNULL"}},team_list:{$equals:function(e,t){return'team_name LIKE "%""id"":""'+t+'""%"'},$not_equals:function(e,t){return'team_name NOT LIKE "%""id"":""'+t+'""%"'}},json:{},email:{},teamset:{},metadata:{},multienum:{}}},customFilters:{$favorite:function(){return{filter:{field:"my_favorite",condition:"$equals",value:1}}},$owner:function(){return e.metadata.getModule(this._module,"fields").assigned_user_id?{sql:'"assigned_user_id"='+this._quotStr(e.user.get("id")),fields:["assigned_user_id"]}:false},$tracker:function(t){var n=this._parseDate(t.value);return n?{sql:'id IN (SELECT bean_id FROM _view_dates WHERE bean_module="'+this._module+'" AND date_last_viewed>="'+e.utils.getTimestamp(n)+'")'}:false},$creator:function(){return{filter:{field:"created_by",condition:"$equals",value:e.user.get("id")},fields:["created_by"]}},$following:function(){return{filter:{field:"following",condition:"$equals",value:1}}}},getExtractedFields:function(){return _.unique(this._filterFields)},buildSql:function(e,t){var n;this._filterFields=[];n=this._buildSql(e,"");if(t&&t.omitParentheses&&n){n=n.replace(/^\(|\)$/g,"")}return n},_buildSql:function n(e,t,r){for(var i=0,a=e.length;i<a;i++){var s=e[i];var o;if(s.operator){o=n.call(this,s.filters,"",this.combiners[s.operator]);if(o){t+="("+o+")"}}else{o=this._buildCondition(s);if(o){t+=o}}if(o&&a-i>1){t+=r}else if(o===false){return false}}return t},_buildCondition:function(e){var t,n,r,i,a,s,o;t=this.customFilters[e.field];if(t){t=t.call(this,e);if(t===false){return false}else if(t.sql){this._filterFields.push.apply(this._filterFields,t.fields);return t.sql}else if(t.filter){e=t.filter}}i=this._getCondition(e);if(!i){return false}n=e.field;r=e.value;a=this._getField(n);s=this._getValue(r,n);if(!a){return false}if(n.indexOf(".")!==-1){return this._processLink(e)}if(_.isFunction(i)){o=i.call(this,a,s,{field:n,value:r})}else if(_.isString(i)){o=a+i+this._quotStr(s)}if(o){this._filterFields.push(n);return o}return false},_processLink:function(n){var r=n.field;var i=r.split(".");var a=i[0];var s=e.offline.storage.getRelationshipByLink(this._module,a);var o=e.offline.storage.relTypes;var l=function(e){return new t(e).buildSql([{operator:"$and",filters:[{field:r,condition:"$equals",value:n.value}]}],{omitParentheses:true})};var u,c,f,d;r=i[1];if(s.relationship_type===o.MANY_TO_MANY){d=e.offline.storage._wrapManyToManyRelationship(this._module,a);f=l(d.dataTable);if(f){c="SELECT lt."+d.parentKey+" FROM "+d.parentModule+" lt INNER JOIN "+d.relationshipTable+" jt ON lt."+d.parentKey+"="+"jt."+d.parentIdColumn+" INNER JOIN "+d.dataTable+" rt ON rt."+d.childKey+"="+"jt."+d.childIdColumn;u=d.parentKey+" IN ("+c+" WHERE rt."+f+")"}}else if(s.relationship_type===o.ONE_TO_MANY){f=l(s.rhs_module);if(f){c="SELECT lt."+s.lhs_key+" FROM "+s.lhs_table+" lt INNER JOIN "+s.rhs_table+" rt ON lt."+s.lhs_key+"="+"rt."+s.rhs_key;u=s.lhs_key+" IN ("+c+" WHERE rt."+f+")"}}else if(s.relationship_type===o.ONE_TO_ONE){}return u||false},_getCondition:function(t){var n=t.condition;var r=this.conditions;var i=e.metadata.getModule(this._module).fields[t.field];var a=i&&i.type;return r.byType[a]?r.byType[a][n]:r.base[n]},_quotStr:function(e){return'"'+e+'"'},_getValue:function(t,n){return e.offline.storage._getValue(t,n,this._module,e.metadata.getModule(this._module).fields)},_getField:function(e){var t=e;switch(e){case"date_modified":t="_client_date_modified";break}return t},_dateRanges:{yesterday:["days",-1,-1],today:["days",0,0],tomorrow:["days",1,1],last_7_days:["days",-6,0],next_7_days:["days",0,6],last_30_days:["days",-29,0],next_30_days:["days",0,29],next_month:["months",1,1],this_month:["months",0,0],last_month:["months",-1,0],last_year:["years",-1,0],this_year:["years",0,0],next_year:["years",1,1]},_parseRange:function(t){var n=this._dateRanges[t];if(!n){return false}var r=n[0];var i=e.date.utc().add(n[1],r).startOf(r).toDate();var a=e.date.utc().add(n[2],r).endOf(r).toDate();return[e.utils.getTimestamp(i),e.utils.getTimestamp(a)]},_parseDate:function(t){var n=e.date.utc();var r="month";var i;switch(t){case"first day of this month":i=n.startOf(r);break;case"first day of next month":i=n.add(1,"month").startOf(r);break;case"last day of this month":i=n.endOf("month");break;case"last day of next month":i=n.add(1,r).endOf(r);break}if(i){return i.toDate()}i=e.date.phpStrToTime(t);if(i){return new Date(i*1e3)}return false}});e.offline.SqlFilterBuilder=t})(SUGAR.App)},function(e,t){(function(e){function t(e){return e.replace(/'/g,"''")}var n=function(e,t,n){this.name=e;this.definition=t;this._tableName=e;this.fields=n;var r=_.map(this.fields,function(e){return'"'+e.name+'"'});r.unshift('"_acl"');r.unshift('"_deleted"');r.unshift('"_client_date_modified"');r.unshift('"id"');var i=_.map(r,function(e){return e+"=?"});var a="("+r.join(",")+")";var s="SET "+i.join(",");var o=[];_.times(r.length,function(){o.push("?")});var l="("+o.join(",")+")";this.sqlCreate='INSERT INTO "'+this._tableName+'" '+a+" VALUES "+l;this.sqlReplace='REPLACE INTO "'+this._tableName+'" '+a+" VALUES "+l;this.sqlUpdate='UPDATE "'+this._tableName+'" '+s+" WHERE id=?";this.sqlMarkDeleted="UPDATE "+this._tableName+" SET _deleted=1 WHERE id=?";this.sqlResetDeleted="UPDATE "+this._tableName+" SET _deleted=0 WHERE id=?";this.sqlDelete='DELETE FROM "'+this._tableName+'" WHERE id=?';this.sqlSelectOne="SELECT * FROM "+this._tableName+" WHERE id=? AND _deleted!=1";this.sqlSelectOneWithDeleted="SELECT * FROM "+this._tableName+" WHERE id=?"};_.extend(n.prototype,{buildSqlReadModuleRecordsByIds:function(e){var t=" WHERE ";if(_.isArray(e)){t+='"id" IN ("'+e.join('","')+'")'}else{t+='"id" = "'+e+'"'}return"SELECT * FROM "+this._tableName+t},getSchema:function(t,r){var i=[],a=[],s=[];a.push('"id" TEXT PRIMARY KEY COLLATE NOCASE');a.push('"_client_date_modified" TEXT COLLATE NOCASE');a.push('"_deleted" INTEGER');a.push('"_acl" TEXT COLLATE NOCASE');function o(e,t){return'"'+e+'"'+t}_.each(this.fields,function(t){if(_.isEmpty(t.name)){return}var i=n.getSqlTypeByMetaType(t.type),l=o(t.name,i);if(_.contains(a,l)){e.logger.warn(l+" column already exists in "+this.name+" table. Skipping")}else{a.push(l);if(t.type==="email"&&!r.fields.email1){a.push(o("email1",i))}}if(t.unified_search===true){var u=this.name+"_"+t.name+"_IDX";s.push("DROP INDEX IF EXISTS "+u);s.push("CREATE INDEX "+u+' ON "'+this._tableName+'" ("'+t.name+'" COLLATE NOCASE)')}},this);i.push('DROP TABLE IF EXISTS "'+this._tableName+'"');i.push('CREATE TABLE "'+this._tableName+'" ('+a.join(",")+")");_.each(s,function(e){i.push(e)});return i},buildSqlSelectMany:function(t){var r=t.offset||0;var i=t.max_num||e.config.maxQueryResult;var a=t.selectFields;var s=_.isEmpty(a)?"*":_.isArray(a)?a.join():a;var o=(t.order_by||"_client_date_modified:DESC").replace(":"," ");var l="SELECT {0} FROM {1} "+n.buildWhere(this.name,t,{andSql:"_deleted!=1"})+" ORDER BY {4} LIMIT {2},{3}";return e.utils.formatString(l,[s,this._tableName,r,i,o])},buildSqlUpdate:function(e,t){var n=_.map(t,function(e){return e+"=?"});var r="SET "+n.join(",");return'UPDATE "'+this._tableName+'" '+r+" WHERE id=?"}});n.DEFAULT_TEXT_COLUMN_TYPE=" TEXT COLLATE NOCASE";n.getSqlTypeByMetaType=function r(e){var t;switch(e){case"bool":case"boolean":case"int":case"integer":t=" INTEGER";break;case"float":case"double":case"currency":t=" REAL";break;default:t=this.DEFAULT_TEXT_COLUMN_TYPE;break}return t};n.buildWhere=function(t,r,i){var a=n.buildSearchQuery(t,r,i);var s=r.filter;var o,l;if(r.filterParsed&&r.filterParsed.isSupported){o=r.filterParsed.filterSql}else{s=e.offline.convertReadRecordsFilter(r,t);o=s&&s.isSupported?s.filterSql:""}l=_.compact([o,a,i.andSql]).join(" AND ");return l?"WHERE "+l:""};n.buildSearchQuery=function(n,r,i){if(!r.q){return""}var a=r.q.indexOf("?")!==-1||r.q.indexOf("*")!==-1;var s;r.q=t(r.q.trim());s=_.map(e.offline.storage.offlineMeta[n].searchFields,function(e){return e.name+(a?" GLOB '":" LIKE '")+r.q+(a?"*":"%")+"'"}).join(" OR ");return s?"("+s+")":""};n.buildFilterQuery=function(t,n){if(!n){return}var r=new e.offline.SqlFilterBuilder(t);var i=r.buildSql(n);var a=r.getExtractedFields();return{sql:i,fields:a}};n.relationships={getCreateSchemaStatements:function(t){var n=[];_.each(t,function(t){if(t.type===e.offline.storage.relTypes.MANY_TO_MANY){n.push(e.utils.formatString('DROP TABLE IF EXISTS "{0}"',[t.relationshipTable]));var r="",i=t.additionalColumns;if(!_.isEmpty(i)){var a=[];_.each(i,function(t,n){a.push(e.utils.formatString('"{0}" TEXT COLLATE NOCASE',[n]))},this);r=a.join(",")}if(t.primaryFlagModule){r+='"primary_flag" INTEGER DEFAULT 0'}var s='CREATE TABLE "{0}" ("{1}" TEXT COLLATE NOCASE, "{2}" TEXT COLLATE NOCASE, "_client_date_modified" TEXT COLLATE NOCASE, "_deleted" INTEGER,{3} PRIMARY KEY ("{1}","{2}"))';s=s.replace(/\{0\}/g,t.relationshipTable);s=s.replace(/\{1\}/g,t.parentIdColumn);s=s.replace(/\{2\}/g,t.childIdColumn);s=s.replace(/\{3\}/g,r?r+",":"");n.push(s)}},this);return n},_getRelColumnsAliasSql:function(t){var n="";if(!_.isEmpty(t.additionalColumns)){n+=",";var r=[];_.each(t.additionalColumns,function(t,n){r.push(e.utils.formatString("r.{0} AS {1}",[n,t]))},this);n+=r.join(",")}return n},buildSqlSelectSingleRelated:function(t,n){var r=e.offline.storage.getRelationshipByLink(t,n.link),i=r.type;if(i===e.offline.storage.relTypes.MANY_TO_MANY){var a=this._getRelColumnsAliasSql(r);var s=e.utils.formatString('SELECT d.*,r.*{0} FROM {1} AS d JOIN {2} AS r ON (d.id=r.{3} AND r.{5}="{6}") WHERE (d._deleted!=1 AND r._deleted!=1 AND d.id="{4}")',[a,n.relatedModule,r.relationshipTable,r.childIdColumn,n.relatedId,r.parentIdColumn,n.id]);if(r.singleModule){var o=e.utils.formatString('SELECT d.*,r.*{0} FROM {1} AS d JOIN {2} AS r ON (d.id=r.{3} AND r.{5}="{6}") WHERE (d._deleted!=1 AND d.id="{4}")',[a,n.relatedModule,r.relationshipTable,r.parentIdColumn,n.relatedId,r.childIdColumn,n.id]);s=s+" UNION "+o}return s}else{return e.utils.formatString('SELECT * FROM {0} WHERE id="{1}" AND _deleted!=1',[n.relatedModule,n.relatedId])}},buildSqlSelectManyRelated:function(t,r,i){var a="SELECT * FROM {0} ",s=e.offline.storage.getRelationshipByLink(t,r.link),o=s.type,l=i.offset||0,u=i.max_num||e.config.maxQueryResult,c="",f=(i.order_by||"_client_date_modified:DESC").replace(":"," "),d,h,p;if(o===e.offline.storage.relTypes.MANY_TO_MANY){d=this._getRelColumnsAliasSql(s);p=n.buildWhere(s.childModule,i,{andSql:'(r._deleted!=1 AND d._deleted!=1 AND r.{4}="{5}")'});h="SELECT d.*,r.*{6} FROM {0} AS r JOIN {1} AS d ON r.{2}=d.id "+p;c=e.utils.formatString(h,[s.relationshipTable,s.parentModule,s.childIdColumn,s.childIdColumn,s.parentIdColumn,r.id,d]);if(s.singleModule){var m=e.utils.formatString(h,[s.relationshipTable,s.childModule,s.parentIdColumn,s.childIdColumn,s.childIdColumn,r.id,d]);c=c+" UNION "+m}f=(i.order_by||"d._client_date_modified:DESC, d._last_fetched:ASC").replace(/:/g," ")}else if(o===e.offline.storage.relTypes.ONE_TO_MANY||o===e.offline.storage.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN){p=n.buildWhere(s.childModule,i,{andSql:'({1}="{2}" AND _deleted!=1)'});c=e.utils.formatString(a+p,[s.childModule,s.parentIdColumn,r.id])}c=c+" ORDER BY {2} LIMIT {0},{1}";return e.utils.formatString(c,[l,u,f])},buildSqlReplaceRelationship:function(t,n,r){r=r||{};var i=n.relDef||e.offline.storage.getRelationshipByLink(t,n.link),a=i.type;if(a===e.offline.storage.relTypes.ONE_TO_MANY||a===e.offline.storage.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN){if(!n.id||r.skipUpdateRelRecord){return}var s=r.ts?e.utils.formatString(', _client_date_modified="{0}"',[r.ts]):"",o=i.parentNameFieldDef;if(o&&n.related&&_.isEmpty(n.related[o.name])){s+=e.utils.formatString(', {0}=(SELECT {1} FROM {2} WHERE id="{3}")',[o.name,"name",t,n.id]);if(_.isEmpty(n.related["parent_type"])&&a===e.offline.storage.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN){s+=e.utils.formatString(', parent_type="{0}"',[t])}}return e.utils.formatString('UPDATE {0} SET {1}="{2}"{3} WHERE id="{4}"',[i.childModule,i.parentIdColumn,n.id,s,n.relatedId])}else{var l='REPLACE INTO "{0}" ({1}) VALUES ({2})',u=[],c;c=[i.parentIdColumn,i.childIdColumn,"_client_date_modified","_deleted"];if(!n.id&&i){n.id=n.related[i.parentIdColumn]}if(!n.id){return}var f=[n.id,n.relatedId,r.ts||e.utils.getTimestamp(),0];_.each(i.additionalColumns,function(e,t){if(n.related&&!_.isEmpty(n.related[e])){c.push(t);f.push(n.related[e])}});if(i.primaryFlagModule){if(n.id){c.push("primary_flag");f.push(1);u.push({sql:e.utils.formatString('UPDATE "{0}" SET "{3}"={4} WHERE {1}="{2}"',[i.relationshipTable,i.childIdColumn,n.relatedId,"primary_flag","0"])})}}c='"'+c.join('","')+'"';f='"'+f.join('","')+'"';if(i.originalType===e.offline.storage.relTypes.ONE_TO_MANY){u.push({sql:e.utils.formatString('DELETE FROM "{0}" WHERE {1}="{2}"',[i.relationshipTable,i.childIdColumn,n.relatedId])})}else if(i.originalType===e.offline.storage.relTypes.ONE_TO_ONE){u.push({sql:e.utils.formatString('DELETE FROM "{0}" WHERE {1}="{2}"',[i.relationshipTable,i.parentIdColumn,n.id])})}u.push({sql:e.utils.formatString(l,[i.relationshipTable,c,f])});if(e.offline.storage._shouldCustomRelUpdateChild(i,r)){var d=i.primaryFlagModule?e.metadata.getModule(i.primaryFlagModule):null,h=d?e.data.getRelateFields(i.primaryFlagModule,i.link)[0]:e.data.getRelateFields(i.childModule,i.name)[0];if(h){[].push.apply(u,this.buildCustomRelUpdateChild(h,i,n,false))}}return u}},buildDeleteRelationship:function(t,n,r){r=r||{};var i=n.relDef||e.offline.storage.getRelationshipByLink(t,n.link),a=i.type,s;if(a===e.offline.storage.relTypes.ONE_TO_MANY||a===e.offline.storage.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN){if(r.skipUpdateRelRecord){return}var o=r.ts?',_client_date_modified="'+r.ts+'"':"";if(a===e.offline.storage.relTypes.ONE_TO_MANY){var l=i.parentNameFieldDef;if(l){s="UPDATE {0} SET {1}=NULL, "+l.name+'=NULL {3} WHERE id="{2}"'}else{s='UPDATE {0} SET {1}=NULL {3} WHERE id="{2}"'}}else{s='UPDATE {0} SET parent_type=NULL, parent_name=NULL, {1}=NULL {3} WHERE id="{2}"'}return e.utils.formatString(s,[i.childModule,i.parentIdColumn,n.relatedId,o])}else{var u=[];if(!n.id&&i){n.id=n.related[i.parentIdColumn]||r.initialState&&r.initialState[i.parentIdColumn]}if(!n.id){return}if(i.singleModule){var c;if(r.hardDelete){s='DELETE FROM {0} WHERE (({1}="{2}" AND {3}="{4}") OR ({3}="{2}" AND {1}="{4}"))';c=s.replace(/\{0\}/g,i.relationshipTable).replace(/\{1\}/g,i.parentIdColumn).replace(/\{2\}/g,n.id).replace(/\{3\}/g,i.childIdColumn).replace(/\{4\}/g,n.relatedId)}else{s='UPDATE {0} SET _deleted=1,_client_date_modified="{5}" WHERE (({1}="{2}" AND {3}="{4}") OR ({3}="{2}" AND {1}="{4}"))';c=s.replace(/\{0\}/g,i.relationshipTable).replace(/\{1\}/g,i.parentIdColumn).replace(/\{2\}/g,n.id).replace(/\{3\}/g,i.childIdColumn).replace(/\{4\}/g,n.relatedId).replace(/\{5\}/g,r.ts||e.utils.getTimestamp())}return c}else{var f=i.primaryFlagModule?", primary_flag=0":"";s=r.hardDelete?'DELETE FROM {0} WHERE {1}="{2}" AND {3}="{4}"':"UPDATE {0} SET _deleted=1"+f+',_client_date_modified="{5}" WHERE {1}="{2}" AND {3}="{4}"';u.push({sql:e.utils.formatString(s,[i.relationshipTable,i.parentIdColumn,n.id,i.childIdColumn,n.relatedId,r.ts||e.utils.getTimestamp()])})}if(i.primaryFlagModule){u.push({sql:'UPDATE {0} SET primary_flag=1 WHERE {1}="{2}" AND _client_date_modified=(SELECT MAX(_client_date_modified) FROM {0} WHERE {1}="{2}" AND _deleted<>1)'.replace(/\{0\}/g,i.relationshipTable).replace(/\{1\}/g,i.childIdColumn).replace(/\{2\}/g,n.relatedId)})}if(e.offline.storage._shouldCustomRelUpdateChild(i,r)){var d=i.primaryFlagModule?e.data.getRelateFields(i.primaryFlagModule,i.link)[0]:e.data.getRelateFields(i.childModule,i.name)[0];if(d){[].push.apply(u,this.buildCustomRelUpdateChild(d,i,n,true))}}return u}},buildCustomRelUpdateChild:function(t,n,r,i){var a=n.originalType===e.offline.storage.relTypes.ONE_TO_ONE,s,o,l,u,c,f,d,h,p=[];if(a){s=n.parentIdColumn;o=n.childIdColumn;l=n.childModule;u=n.parentModule;c=i?"":r.relatedId;f=r.id}else{s=n.childIdColumn;o=r.relatedModule?n.parentIdColumn:n.childIdColumn;l=n.parentModule;u=n.childModule;c=i?"":r.id;f=r.relatedId}d=i?"''":e.utils.formatString("(SELECT name FROM {0} WHERE id='{1}')",[u,c]);h="UPDATE {0} SET {1}={2}, {3}='{4}' WHERE id='{5}'";if(a&&!i){var m="(SELECT {0} FROM {1} WHERE id='{2}')",g="UPDATE {0} SET {1}={2}, {3}='{4}' WHERE id={5}",_=e.utils.formatString(m,[o,l,f]),v=e.utils.formatString(m,[s,u,c]),y=e.utils.formatString(m,["name",u,c]);p.push({sql:e.utils.formatString(g,[u,t.name,"''",s,"",_])});p.push({sql:e.utils.formatString(g,[l,t.name,"''",o,"",v])});p.push({sql:e.utils.formatString(h,[l,t.name,y,o,c,f])})}else if(n.primaryFlagModule){c=e.utils.formatString('(SELECT {0} FROM {1} WHERE {2}="{3}" AND primary_flag=1 AND _deleted<>1)',[o,n.relationshipTable,n.childIdColumn,r.relatedId]);d=e.utils.formatString("(SELECT name FROM {0} WHERE id={1})",[t.module,c]);var b="UPDATE {0} SET {1}={2} WHERE id='{3}'",M="UPDATE {0} SET {1}={2} WHERE id='{3}' AND {4}",x=e.utils.formatString("EXISTS (SELECT id FROM {0} WHERE id={1})",[u,c]);p.push({sql:e.utils.formatString(M,[l,t.name,d,f,x])});p.push({sql:e.utils.formatString(b,[l,o,c,f])})}else{p.push({sql:e.utils.formatString(h,[l,t.name,d,o,c,f])})}return p},buildSqlUpdateChildren:function(n,r){var i=[],a=e.offline.storage._getModuleRelationships(n),s=_.filter(a,function(t){return t.type!==e.offline.storage.relTypes.MANY_TO_MANY&&t.parentModule===n},this);_.each(s,function(n){if(n.parentNameFieldDef){i.push(e.utils.formatString("UPDATE {0} SET {1}='{2}' WHERE {3}='{4}'",[n.childModule,n.parentNameFieldDef.name,t(r.name),n.parentIdColumn,r.id]))}},this);return i.length>0?i:null},buildSqlCleanRelationships:function(t,n,r){r=r||{};var i,a={},s=[],o,l;i=e.offline.storage._getModuleRelationships(t);_.each(i,function(i){if(i.type!==e.offline.storage.relTypes.MANY_TO_MANY){if(r.skipOneToManyChildren){return}if(i.parentModule===t){var u=i.childModule;o=i.parentIdColumn;l=e.metadata.getModule(u);if(l.fields[o]){a[u]=a[u]||{};a[u][o]="parent_id"}}}else{var c=i.relationshipTable;o=i.parentIdColumn;s.push(e.utils.formatString('DELETE FROM {0} WHERE {1}="{2}"',[c,o,n.id]))}},this);_.each(a,function(t,n){var r=e.metadata.getModule(n).fields,i;_.each(t,function(r,i){var a=e.data.getRelatedNameField(n,i);if(a){t[a.name]="parent_name"}});i=_.keys(t);if(_.contains(i,"parent_id")&&_.contains(i,"parent_name")&&r["parent_type"]){t["parent_type"]="parent_type"}});_.each(a,function(t,r){var i=[],a=[],o="UPDATE {0} SET {1} WHERE {2}";_.each(t,function(e,t){i.push(t+"=NULL");if(e==="parent_id"){a.push(t+'="'+n.id+'"')}});i=i.join(",");a=a.join(" OR ");s.push(e.utils.formatString(o,[r,i,a]))});return s}};n.init=function(e){};n.getDropTableStatement=function(e){return"DROP TABLE "+e};n.getSelectTablesStatement=function(){return"SELECT tbl_name FROM sqlite_master WHERE type='table' AND tbl_name!='__WebKitDatabaseInfoTable__'"};n.getDropTableStatements=function(e){return _.map(e,function(e){return n.getDropTableStatement(e)})};n.getAlterTableStatement=function(t,r){var i=r.name,a=n.getSqlTypeByMetaType(r.type);return e.utils.formatString('ALTER TABLE {0} ADD COLUMN "{1}" {2}',[t,i,a])};n.getResetDateModifiedStatement=function(t,n){return e.utils.formatString('UPDATE {0} SET _client_date_modified=date_modified WHERE id="{1}"',[t,n.id])};n.getStatsRetrieveStatements=function(e){var t="(SELECT COUNT(*) FROM {0}) AS {0}, (SELECT COUNT(*) FROM {0} JOIN _view_dates ON {0}.id=_view_dates.bean_id) AS {0}_Viewed",n=[];_.each(e.modules,function(e){var r=t.replace(/\{0\}/g,e);n.push(r)});return"SELECT "+n.join(", ")};n.transactionLog={getCreateSchemaStatements:function(){var e=[];e.push('DROP TABLE IF EXISTS "_tx_log"');e.push('CREATE TABLE "_tx_log" ("_tx_uid" TEXT COLLATE NOCASE PRIMARY KEY, "_tx_action" INTEGER, "_tx_ts" TEXT COLLATE NOCASE, "_tx_bean_id" TEXT COLLATE NOCASE,"_tx_bean_module" TEXT COLLATE NOCASE, "_tx_related_id" TEXT COLLATE NOCASE, "_tx_related_module" TEXT COLLATE NOCASE, "_tx_updated_fields" TEXT COLLATE NOCASE, "_tx_link" TEXT COLLATE NOCASE, "_tx_error" TEXT COLLATE NOCASE, "_tx_error_count" INTEGER DEFAULT 0)');e.push("DROP INDEX IF EXISTS _tx_log_ts_IDX");e.push('CREATE INDEX _tx_log_ts_IDX ON "_tx_log" ("_tx_ts")');e.push("DROP INDEX IF EXISTS _tx_log_bean_id_IDX");e.push('CREATE INDEX _tx_log_bean_id_IDX ON "_tx_log" ("_tx_bean_id" COLLATE NOCASE)');return e},getCountAssociatedTransactionsStatements:function(t){return e.utils.formatString('SELECT COUNT(*) AS count FROM _tx_log WHERE _tx_bean_id="{0}" AND _tx_uid!="{1}"',[t._tx_bean_id,t._tx_uid])},getReadTransactionsStatements:function(t){var n="ORDER BY ";if(t.errFirst){n+='"_tx_error_count" = 0, '}n+='"_tx_ts" '+(t.dateAsc?"ASC":"DESC");return e.utils.formatString('SELECT * FROM "_tx_log" {0} LIMIT ?,?',[n])},sqlTxLogAction:'INSERT INTO "_tx_log" ("_tx_action", "_tx_ts", "_tx_bean_id", "_tx_bean_module", "_tx_related_id", "_tx_related_module", "_tx_updated_fields", "_tx_uid", "_tx_link") VALUES (?,?,?,?,?,?,?,?,?)',updateTransaction:function(t,n){var r=[];_.each(n,function(e,t){r.push(t+"="+"'"+e+"'")});return e.utils.formatString("UPDATE _tx_log SET "+r.join(",")+" WHERE _tx_uid='{0}'",[t])},getTxLog:'SELECT * FROM "_tx_log" WHERE _tx_uid = ?',_deleteTransaction:"DELETE FROM _tx_log WHERE _tx_uid = ?",clearTransactionLog:"DELETE FROM _tx_log",countTransactions:"SELECT (SELECT COUNT(*) FROM _tx_log WHERE _tx_error in ("+e.offline.TRANSACTION_STATUSES.UNRECOVERABLE.join(",")+")) AS failedTransactions, (SELECT COUNT(*) FROM _tx_log) AS totalTransactions"};n.lastViewed={buildRead:function(e){return'SELECT * FROM "_view_dates" ORDER BY "date_last_viewed"'+(e?"":"DESC")+" LIMIT ?"},buildReadForRecords:function(e){return'SELECT * FROM "_view_dates" WHERE "bean_id" IN ("'+e.join('","')+'")'},buildReadForModule:function(e){return'SELECT "'+e+'".*, "_view_dates"."date_last_viewed" as "_last_viewed_date" FROM "'+e+'" INNER JOIN "_view_dates" ON "_view_dates"."bean_id" = "'+e+'"."id" WHERE _deleted != 1 ORDER BY "_view_dates"."date_last_viewed" DESC LIMIT ?'},getCreateSchemaStatements:function(){var e=[];e.push('DROP TABLE IF EXISTS "_view_dates"');e.push('CREATE TABLE "_view_dates" ("bean_id" TEXT COLLATE NOCASE PRIMARY KEY, "bean_module" TEXT COLLATE NOCASE, "date_last_viewed" TEXT COLLATE NOCASE)');return e},buildReplace:function(t,n,r){var i=r.ts||e.utils.getTimestamp();return e.utils.formatString('REPLACE INTO "_view_dates" ("bean_id","bean_module", "date_last_viewed") VALUES ("{0}","{1}","{2}")',[n.id,t,i])},buildDelete:function(t,n){return e.utils.formatString('DELETE FROM _view_dates WHERE bean_id="{0}"',[n.id])},buildFindViewedBefore:function(t,n){return e.utils.formatString('SELECT name, id, date_last_viewed FROM {0} AS d LEFT JOIN _view_dates AS v on d.id=v.bean_id WHERE (date_last_viewed IS NULL OR date_last_viewed < "{1}")',[t,n.expirationDate])},buildCleanupMyModule:function(t){return e.utils.formatString('DELETE FROM _view_dates WHERE bean_module="{0}"',[t])}};n.sync={getCreateSchemaStatements:function(){var e=[];e.push('DROP TABLE IF EXISTS "_to_be_synced"');e.push('CREATE TABLE "_to_be_synced" ("bean_id" TEXT COLLATE NOCASE PRIMARY KEY, "bean_module" TEXT COLLATE NOCASE, "action" TEXT COLLATE NOCASE)');return e},getMarkToBeSyncedSql:function(t,n){return e.utils.formatString('REPLACE INTO "_to_be_synced" ("bean_id","bean_module", "action") VALUES ("{0}","{1}","{2}")',[n.record.id,t,n.action])},getResetToBeSyncedSql:function(e,t){var n=_.pluck(t.records,"id");return'DELETE FROM "_to_be_synced" WHERE "bean_id" IN ("'+n.join('","')+'")'},getReadToBeSyncedSql:function(t,n,r){var i=e.utils.formatString('SELECT * FROM "_to_be_synced" WHERE bean_module="{0}" ORDER BY bean_id',[t]);

if(!_.isUndefined(r.offset)){i+=e.utils.formatString(" LIMIT {0},{1}",[r.offset,r.max_num])}return i}};n.upgrade={getUpgrade1Sql:function(t){var r=[];_.each(t.relationships,function(t){if(t.primary_flag_column){r.push(e.utils.formatString('ALTER TABLE {0} ADD COLUMN "primary_flag" INTEGER DEFAULT 0',[t["join_table"]]))}});Array.prototype.push.apply(r,n.sync.getCreateSchemaStatements());return r}};e.offline.SqlHelper=n})(SUGAR.App)},function(e,t){(function(e){function t(){throw new Error("Not implemented. Please override this method with your implementation")}var n={createTransaction:"offline:tx:create",deleteTransaction:"offline:tx:delete"};e.offline.storage={_regularSyncOperations:["create","update","favorite","delete","follow"],relTypes:{ONE_TO_ONE:"one-to-one",ONE_TO_MANY:"one-to-many",MANY_TO_MANY:"many-to-many",ONE_TO_MANY_BY_ROLE_COLUMN:"one-to-many-byRoleColumn"},offlineMeta:{},_execQueue:null,_migrationSummary:{},getMigrationSummary:function(){return this._migrationSummary},resetMigrationSummary:function(){this._migrationSummary={}},exec:function(t,r,i){this._exec(t,function a(i){if(r)r(i);_.each(t,function(t){var r=n[t.op];if(r){e.trigger(r,{txOptions:t.options})}})},function s(t){if(i){i.apply(this,arguments)}var s=e.offline._initialized?t||e.offline.UnknownError:e.offline.Error.OfflineDisabledError;e.trigger("offline:failure",s)})},_exec:function(e,n,r){t()},execAndSpecificReturn:function(t,n){var r=!_.isEmpty(n)&&n.regularSync,i=n.dbSuccess;if(r&&_.contains(this._regularSyncOperations,n.method)){if(n.method!=="delete"){t.unshift({op:"createTransaction",data:n.data,module:n.module,options:n});t.push({op:"readSingle",data:n.data,module:n.module,options:n})}else{t.push({op:"readSingle",data:n.data,module:n.module,options:_.extend(n,{readDeleted:true})});n.dbSuccess=function(e){i.call(this,e?{id:e.id}:{id:n.data.id})}}if(n.relate){t.push({op:"readSingleRelated",data:n.data,module:n.module,options:n});n.dbSuccess=function(e){i.call(this,{record:e[0],related_record:e[1]})}}var a=n.action===e.offline.SYNC_ACTIONS.LINK||n.action===e.offline.SYNC_ACTIONS.UNLINK;if(!a){t.push({op:"updateLastViewed",data:n.relate?{id:n.data.relatedId}:n.data,module:n.relate?n.data.relatedModule:n.module,options:n})}if(n.method!=="delete"){t.push({op:"markToBeSynced",data:{action:"update",record:{id:n.relate?n.data.relatedId:n.data.id}},module:n.relate?n.data.relatedModule:n.module})}}this.exec(t,n.dbSuccess,n.dbFailure)},_executeSynchronized:function(e){this._execQueue.push(e)},init:function(e){this.computeOfflineMeta(e);this._init(e);if(!this._execQueue){this.initExecQueue()}},initExecQueue:function(){var e=this;this._execQueue=async.queue(function(t,n){t.call(e,n)},1)},_init:function(e){},computeOfflineMeta:function(e){_.each(e.modules,function(e,t){this.offlineMeta[t]={}},this);this.prepareOfflineRelationships(e.relationships);this.offlineMeta.modules=e.modules;_.each(e.modules,function(t,n){var r=this.offlineMeta[n];r.fields=this._getOfflineModuleFields(t,r);r.searchFields=this._getOfflineModuleSearchFields(e,t,r)},this)},_getOfflineModuleFields:function r(e,t){var n=_.pluck(e.fields,"name");var r=_.union(["date_modified"],t.oneToManyRelFields,n);var i=[{type:"boolean",name:"my_favorite"},{type:"boolean",name:"following"},{type:"date",name:"_last_fetched"}];var a=_.where(e.fields,{link_type:"relationship_info"});_.each(a,function(e){_.each(e.relationship_fields,function(e,n){t.fieldsBlacklist=t.fieldsBlacklist||[];if(n!=="id"&&!_.contains(t.fieldsBlacklist,e)){t.fieldsBlacklist.push(e)}})});_.each(e.fields,function(e){if(_.isObject(e)&&e.type!=="link"&&e.name!=="id"&&!_.contains(t.fieldsBlacklist,e.name)&&!_.findWhere(i,{name:e.name})&&_.contains(r,e.name)){i.push(e)}},this);return i},_getOfflineModuleSearchFields:function i(e,t,n){var r=e.server_info,i=r&&r.fts&&r.fts.enabled&&t.ftsEnabled;return _.select(n.fields,function(e){return e.unified_search||e.name==="name"||i&&e.full_text_search&&e.full_text_search.enabled},this)},prepareOfflineRelationships:function a(e){var t={};_.each(e,function(e,n){if(n==="_hash"||e.relationship_type==="user-based"){return false}var r=this.getRelationshipType(e);var i=r===this.relTypes.ONE_TO_MANY||r===this.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN?"_wrapOneToManyRelationship":"_wrapManyToManyRelationship";t[n]=this[i](e,r);t[n].type=r},this);this.offlineMeta.relationships=_.extend({},this.offlineMeta.relationships,t)},getRelationshipType:function(e){if(!_.isEmpty(e["join_table"])){return this.relTypes.MANY_TO_MANY}else if(_.isEmpty(e["join_table"])&&_.isEmpty(e["relationship_role_column"])){return this.relTypes.ONE_TO_MANY}else if(_.isEmpty(e["join_table"])&&!_.isEmpty(e["relationship_role_column"])){return this.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN}},getRelationshipByLink:function(t,n){var r=e.metadata.getModule(t).fields[n].relationship;return this.getAdjustedRelationship(t,r)},getAdjustedRelationship:function s(e,t){var n=this.offlineMeta.relationships[t];if(!n){return null}var r=n.type===this.relTypes.MANY_TO_MANY&&e===n.parentModule;if(r){n=_.extend({},n,{parentModule:n.childModule,childModule:n.parentModule,parentIdColumn:n.childIdColumn,childIdColumn:n.parentIdColumn})}return n},getCUTransactionParams:function(t,n,r){var i,a,s,o,l=null,u=null,c=r.txId||e.utils.generateUUID(),f=e.utils.getTimestamp(null,{msecPrecision:true});if(r.relate){i=n.relatedId;a=n.relatedModule;s=n.id;o=t;l=n.link;if(r.action===e.offline.SYNC_ACTIONS.UNLINK){u={before:{module:n.relatedModule,id:n.relatedId},after:null}}else if(r.action===e.offline.SYNC_ACTIONS.LINK){var d=this.getRelationshipByLink(t,n.link);if(d.type===this.relTypes.MANY_TO_MANY){u={before:null,after:{module:n.relatedModule,id:n.relatedId}}}else{var h=r.initialState[d.parentIdColumn],p=d.type===this.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN;if(h){u={before:{module:p?r.initialState["parent_type"]:t,id:p?r.initialState["parent_id"]:r.initialState[d.parentIdColumn]},after:{module:n.relatedModule,id:n.relatedId}}}else{u={before:null,after:{module:n.relatedModule,id:n.relatedId}}}}}else{u=e.offline.utils.getBeforeAndAfter(n.related,r.initialState)}}else{i=n.id;a=t;s=null;o=null;if(r.action!==e.offline.SYNC_ACTIONS.DELETE){u=e.offline.utils.getBeforeAndAfter(n,r.initialState)}}if(u){u=JSON.stringify(u)}return[r.action,f,i,a,s,o,u,c,l]},_wrapOneToManyRelationship:function(t,n){var r=this._getParentModule(t),i=this._isParentOnRight(r,t),a=i?t.lhs_key:t.rhs_key,s=i?t.lhs_module:t.rhs_module,o=this.offlineMeta[s],l="parent_type";o.oneToManyRelFields=o.oneToManyRelFields||[];if(!_.contains(o.oneToManyRelFields,a)){o.oneToManyRelFields.push(a)}if(n===this.relTypes.ONE_TO_MANY_BY_ROLE_COLUMN&&!_.contains(o.oneToManyRelFields,l)){o.oneToManyRelFields.push(l)}return{name:t.name,parentModule:r,childModule:s,parentIdColumn:a,parentNameFieldDef:e.data.getRelatedNameField(s,a)}},_wrapManyToManyRelationship:function(t){var n=this._getParentModule(t);var r=this.offlineMeta[n];var i=this._isParentOnRight(n,t);var a=i?t.lhs_module:t.rhs_module;var s=i?t.lhs_table:t.rhs_table;var o=e.metadata.getModule(n,"fields");var l={};var u=_.findWhere(o,{link_type:"relationship_info",link:s});if(u){l=_.omit(u.relationship_fields,"id")}var c={name:t.name,parentModule:n,relationshipTable:t.join_table,childModule:a,childIdColumn:i?t.join_key_rhs:t.join_key_lhs,parentIdColumn:i?t.join_key_lhs:t.join_key_rhs,childKey:i?t.lhs_key:t.rhs_key,parentKey:i?t.rhs_key:t.lhs_key,additionalColumns:l,singleModule:t.lhs_module===t.rhs_module,originalType:t.relationship_type};if(t.primary_flag_column){c.primaryFlagModule=t.primary_flag_side==="rhs"?t.lhs_module:t.rhs_module;c.link=t[t.primary_flag_side+"_table"]}return c},_isParentOnRight:function(e,t){var n=this.getRelationshipType(t);if(n===this.relTypes.MANY_TO_MANY){return e===t.rhs_module}else{return t.rhs_key==="id"}},_getModuleRelationships:function(t){var n=e.metadata.getModule(t),r=e.offline.utils.getOfflineModules(),i=[];_.each(n.fields,function(e){if(e.type==="link"){var n=this.getAdjustedRelationship(t,e.relationship);if(n&&_.contains(r,n.parentModule)&&_.contains(r,n.childModule)){i.push(n)}}},this);return i},_shouldCustomRelUpdateChild:function(e,t){return e.originalType===this.relTypes.ONE_TO_MANY&&!t.skipUpdateRelRecord||e.originalType===this.relTypes.ONE_TO_ONE||!!e.primaryFlagModule},_getParentModule:function(e){return e.rhs_key==="id"?e.rhs_module:e.lhs_module},openDb:function(e,n,r){t()},migrate:function(e,n,r){t()},isEncryptionSupported:function(){return false},encrypt:function(e,n){t()},upgrade:function(t,n,r){r=r||{};var i=parseInt(this.getSqlStorageVersion(),10),a=parseInt(e.cache.get("offline:version"),10),s=i-a,o,l=[],u=r.success||function(){},c=r.error||function(){};if(!s){e.logger.debug("Version has not changed. No actual upgrade required");u(t,n);return}n=this._getUpgradedMeta(n);while(s--){o=a+s;if(this._upgrade[o]){l.unshift(this._upgrade[o](t))}}if(_.isEmpty(l)){e.logger.debug("Storage structure has not changed");u(t,n)}else{this._runUpgrade(_.flatten(l),function f(){u(t,n)},function d(e){c(e)})}},_runUpgrade:function(e,n,r){t()},_getUpgradedMeta:function(t){var n={modules:{},relationships:t.relationships,_hash:t.hash,_userId:t.userId};delete t.relationships;delete t.hash;delete t.userId;_.chain(t).omit(e.config.offline.exclude).each(function(e,t){n.modules[t]={_hash:e.hash,fields:{_hash:e.fieldsHash}}});return n},drop:function(e){t()},getDetails:function(){return{type:e.config.offline.storageAdapter}},isOutOfSpace:function(e){this._isOutOfSpace(e)},open:function(t){t=_.extend({env:"dev",name:"sidecar",size:5,version:"1.0"},t);var n=t.name+"-"+t.env,r=t.size*1024*1024,i=t.version;try{this.openDb(n,i,r)}catch(a){e.logger.fatal("Failed to open database: "+n+" "+i+" ("+r+" bytes). "+a);return false}return true},sync:function(t,n,r,i){this._executeSynchronized(function(a){var s=this;e.logger.trace("storageAdapter: "+t+"-"+r+(n&&n.id?"-"+n.id:""));i=_.extend({regularSync:true,method:t,dbSuccess:function l(e){a();if(i.success)i.success(e);if(i.complete)i.complete(e)},dbFailure:function u(e){a();if(i.error)i.error(e);if(i.complete)i.complete(e)}},i||{});switch(t){case"read":i.dbSuccess=function c(e){a();if(i.success){e=s._parseReadSuccessResponse(n,r,e,i)}if(i.complete)i.complete(e)};var o=n&&n.link?n.relatedId:n?n.id:null;if(o){this._readSimpleOrRelated(r,n,i)}else{if(i.relate){this._readManyRelatedRecords(r,n,i)}else if(r==="TxLog"){this._readTxLogRecords(r,n,i)}else{this._readManyRecords(r,i)}}break;case"create":if(i.relate){this._createRelatedRecord(r,n,i)}else{this._createRecord(r,n,i)}break;case"update":if(i.relate){this._updateRelatedRecord(r,n,i)}else{this._updateRecord(r,n,i)}break;case"delete":if(i.relate){this._unlinkRecord(r,n,i)}else if(i.hardDelete){this._hardDeleteRecord(r,n,i)}else{this._softDeleteRecord(r,n,i)}break;case"favorite":this._favorite(r,n,i);break;case"follow":this._follow(r,n,i);break;case"search":i.max_num=i.max_num||e.config.maxQueryResult;if(i.module_list.split(",").length>1){i=_.omit(i,"offset");i.max_num=e.config.offline.maxMixedCollectionQueryResult||30}i.dbSuccess=function f(e){a();if(i.success)i.success(e);if(i.complete)i.complete(e)};this._search(i);break;default:break}})},_parseReadSuccessResponse:function(e,t,n,r){if(n){var i=false;if(r.relate){i=_.isEmpty(e.relatedId)}else{i=_.isUndefined(e)}if(i&&!_.isArray(n)){n=[n]}else if(!i&&_.isArray(n)){n=n[0]}}r.success(n);return n},_readTxLogRecords:function(e,t,n){n=_.extend({limit:n.max_num,count:true,errFirst:true},n||{});this.exec([{op:"readTransactions",bean:null,data:t,options:n}],n.dbSuccess,n.dbFailure)},saveRecords:function(t){var n=_.isArray(t.serverData)?t.serverData:[t.serverData];var r=this;var i;if(t.backgroundMode){var a=0;var s=e.config.offline.saveRecordsBatchSize;var o;var l=function(){o=n.slice(a,a+s);a+=s;i=r._getSaveRecordsTasks(o,t);_.defer(function(){async.series(i,function(e){if(!e&&a<n.length){l()}else{t.callback(e)}})})};l()}else{i=this._getSaveRecordsTasks(n,t);this._executeSynchronized(function(e){async.series(i,function(n){e();t.callback(n)})})}},_getSaveRecordsTasks:function(e,t){var n=this;return _.map(e,function(e){return function(r){n._saveRecord({data:e,module:t.module||e._module,callback:r,ignoreRecordDirtiness:t.ignoreRecordDirtiness,relationshipData:t.relationshipData})}})},_saveRecord:function(t){var n=t.callback,r=t.relationshipData,i=this;async.waterfall([function a(e){i.exec([{op:"readSingle",data:{id:t.data.id},module:r?r.relatedModule:t.module,options:{readDeleted:true}}],function(t){e(null,t)},e)},function s(n,a){var s=[],o=n?e.offline.utils.actionToString(e.offline.SYNC_ACTIONS.UPDATE):e.offline.utils.actionToString(e.offline.SYNC_ACTIONS.CREATE);if(t.ignoreRecordDirtiness||!(n&&!e.offline.utils.isDataSynchronized(n))){var l=t.data;if(l.date_modified){l._client_date_modified=l.date_modified}l._last_fetched=e.utils.getTimestamp();s=[{op:o,module:r?r.relatedModule:t.module,data:l,options:{initialState:n}}];if(r){var u=_.clone(r);_.extend(u,{related:t.data,relatedId:t.data.id});s.push({op:"createLink",module:t.module,data:u,options:{ts:e.utils.getTimestamp(l.date_modified)}})}}if(s.length>0){i.exec(s,a,a)}else{a()}}],n)},resolveSuccess:function(e){this._executeSynchronized(function(t){this._resolveTransaction({transaction:e.transaction,module:e.module,serverData:e.serverData,relationshipData:e.relationshipData,callback:function(){t();if(e.callback){e.callback.apply(this,arguments)}}})})},_resolveTransaction:function(t){var n=t.callback,r=t.relationshipData,i=false,a=false,s=e.utils.getTimestamp(),o=this;async.waterfall([function l(e){o.exec([{op:"countAssociatedTransactions",options:{txData:t.transaction}}],function(t){i=t&&t.count>0;e()},e)},function u(e){if(!r){e();return}o.exec([{op:"countAssociatedTransactions",options:{txData:{_tx_uid:t.transaction._tx_uid,_tx_bean_id:t.transaction._tx_related_id}}}],function(t){a=t&&t.count>0;e()},e)},function c(e){o.exec([{op:"readSingle",data:{id:t.serverData.id},module:r?r.relatedModule:t.module,options:{readDeleted:true}}],function(t){e(null,t)},e)},function f(n,l){var u=t.transaction,c=u._tx_action,f=u._tx_bean_module;if(c===e.offline.SYNC_ACTIONS.CREATE){c=e.offline.SYNC_ACTIONS.UPDATE}var d=[{op:"deleteTransaction",data:null,module:null,options:{txId:u._tx_uid}}];function h(e){d.push({op:"updateValuesSingle",data:_.pick(e,"id","date_modified"),module:f})}if(r){if(c===e.offline.SYNC_ACTIONS.UPDATE||c===e.offline.SYNC_ACTIONS.LINK||c===e.offline.SYNC_ACTIONS.UNLINK){if(!_.isEmpty(r.related)){if(!i){r.related._last_fetched=s;d.push({op:"updateValuesSingle",module:r.relatedModule,data:r.related});d.push({op:"resetDateModified",data:{id:r.related.id},module:r.relatedModule})}else{h(r.related)}}if(r.record&&!a){r.record._last_fetched=s;d.push({op:"updateValuesSingle",module:r.recordModule,data:r.record});d.push({op:"resetDateModified",data:{id:r.record.id},module:r.recordModule})}}if(c===e.offline.SYNC_ACTIONS.UNLINK&&!a&&!i){d.push({op:"deleteLink",module:r.recordModule,data:{id:r.id,link:r.link,related:r.related,relatedId:r.relatedId,relatedModule:r.relatedModule},options:{hardDelete:true}})}}else{if(c===e.offline.SYNC_ACTIONS.DELETE){d.push({op:"hardDeleteSingle",module:f,data:t.serverData});d.push({op:"deleteLastViewed",data:t.serverData,module:f})}else if(!i){t.serverData._last_fetched=s;d.push({op:e.offline.utils.actionToString(c),data:t.serverData,module:f});d.push({op:"resetDateModified",data:{id:t.serverData.id},module:f})}else{h(t.serverData)}}o.exec(d,function p(){e.trigger("offline:tx:success",{tx:u});l()},function m(e){l(e)})}],n)},resolveError:function(t){var n,r,i;if(t.nonTransactionResolve&&!(t.error.status===404||t.error.status===403)){t.callback();return}if(!e.utils.isConnectivityError(t.error)&&!t.nonTransactionResolve){e.trigger("offline:tx:error",{tx:t.txLog,errorCode:t.error.status})}switch(t.error.status){case 0:if(t.callback){_.defer(t.callback,t.error)}break;case 409:t.error.record=t.error.record||t.error.payload&&t.error.payload.record||{};var a=t.txLog,s=e.offline.utils.getOfflineModules(),o=[];if(!_.contains(s,a._tx_bean_module)||_.isEmpty(e.utils.getChangedProps(t.updatedFields,t.error.record))){o.push({op:"deleteTransaction",options:{txId:a._tx_uid}})}else{var l={op:"updateValuesSingle",data:null,module:a._tx_bean_module};o=[l,{op:"updateTransaction",data:{txLog:_.extend(_.clone(a),{_tx_error_count:a._tx_error_count+1,_tx_error:t.error.status})}}]}this._executeSynchronized(function(n){var r=function(e){n();if(t.callback){t.callback(e)}};if(l){this.exec([{op:"countAssociatedTransactions",options:{txData:a}}],_.bind(function(n){if(n&&n.count>0){l.data=_.pick(t.error.record,"id","date_modified")}else{l.data=e.utils.deepCopy(t.error.record);l.data._last_fetched=e.utils.getTimestamp()}this.exec(o,r,r)},this),r)}else{this.exec(o,r,r)}});break;case 404:if(t.nonTransactionResolve){if(t.nonTransactionResolve.relate){n=[{op:"deleteLink",module:t.nonTransactionResolve.module,data:t.nonTransactionResolve.data}]}else{n=[{op:"hardDeleteSingle",module:t.nonTransactionResolve.module,data:{id:t.nonTransactionResolve.id}}]}}else{r=t.txLog._tx_bean_module,i=t.txLog._tx_bean_id;n=[{op:"hardDeleteSingle",module:r,data:{id:i}}];n.push({op:"deleteTransaction",data:null,module:null,options:{txId:t.txLog._tx_uid}})}this._executeSynchronized(function(e){this.exec(n,function(){e();if(t.callback){t.callback()}},function(n){e();if(t.callback){t.callback(n)}})});break;case 422:if(t.txLog){n=[{op:"deleteTransaction",data:null,module:null,options:{txId:t.txLog._tx_uid}},{op:"updateValuesSingle",data:{id:t.txLog._tx_bean_id,date_modified:t.txLog._tx_ts,_client_date_modified:t.txLog._tx_ts},module:t.txLog._tx_bean_module}]}this._executeSynchronized(function(e){this.exec(n,function(){e();if(t.callback){t.callback()}},function(n){e();if(t.callback){t.callback(n)}})});break;case 403:var u;if(t.nonTransactionResolve){r=t.relate?t.nonTransactionResolve.data.relatedModule:t.nonTransactionResolve.module;var c=t.relate?t.nonTransactionResolve.data.id:t.nonTransactionResolve.id;u={op:"hardDeleteSingle",module:r,data:{id:c},options:{skipRelationshipsClean:true}}}else{u={op:"updateTransaction",data:{txLog:_.extend(t.txLog,{_tx_error_count:++t.txLog._tx_error_count,_tx_error:t.error.status})}}}this._executeSynchronized(function(e){this.exec([u],function(){e();if(t.callback){t.callback(t.nonTransactionResolve?null:t.error)}},function(n){e();if(t.callback){t.callback(n)}})});break;case 500:default:this._executeSynchronized(function(e){this.exec([{op:"updateTransaction",data:{txLog:_.extend(t.txLog,{_tx_error_count:++t.txLog._tx_error_count,_tx_error:t.error.status})}}],function(){e();if(t.callback){t.callback(t.error)}},function(n){e();if(t.callback){t.callback(n)}})});break}},rollbackTransaction:function(t,n,r){n=n||{};var i=this;this._executeSynchronized(function(a){this.exec([{op:"countAssociatedTransactions",options:{txData:t}}],function(s){n.resetDirty=!s||s.count===0;var o=[{op:"deleteTransaction",options:{txId:t._tx_uid}}];var l;if(t._tx_action===e.offline.SYNC_ACTIONS.UPDATE){l=i._getRollbackUpdateTasks}else if(t._tx_action===e.offline.SYNC_ACTIONS.CREATE){l=i._getRollbackCreateTasks}else if(t._tx_action===e.offline.SYNC_ACTIONS.DELETE){l=i._getRollbackDeleteTasks}else if(t._tx_action===e.offline.SYNC_ACTIONS.FAVORITE){l=i._getRollbackFavoriteTasks}else if(t._tx_action===e.offline.SYNC_ACTIONS.FOLLOW){l=i._getRollbackFollowTasks}else if(t._tx_action===e.offline.SYNC_ACTIONS.UNLINK){l=i._getRollbackUnlinkTasks}else if(t._tx_action===e.offline.SYNC_ACTIONS.LINK){l=i._getRollbackLinkTasks}l=_.bind(l,i);o=o.concat(l(t,n));i.exec(o,function u(){a();e.trigger("offline:tx:rollback",{tx:t});r()},function c(e){a();r(e)})},function s(e){a();r(e)})})},_getRollbackUpdateTasks:function(e,t){var n=this._getTxUpdatedFields(e),r=e._tx_bean_module,i={id:e._tx_bean_id};_.each(n,function(e,t){i[t]=e.before},this);var a=[{op:"updateValuesSingle",data:i,module:r,options:t}];if(t.resetDirty){a.push({op:"resetDateModified",module:r,data:i})}return a},_getRollbackCreateTasks:function(e,t){return[{op:"hardDeleteSingle",data:{id:e._tx_bean_id},module:e._tx_bean_module,options:t}]},_getRollbackDeleteTasks:function(e){return[{op:"resetDeletedSingle",data:{id:e._tx_bean_id},module:e._tx_bean_module}]},_getRollbackFavoriteTasks:function(e,t){var n=this._getTxUpdatedFields(e),r=e._tx_bean_module;var i={id:e._tx_bean_id,my_favorite:n.my_favorite.before};if(n.following){i.following=n.following.before}var a=[{op:"updateValuesSingle",data:i,module:r,options:t}];if(t.resetDirty){a.push({op:"resetDateModified",module:r,data:{id:e._tx_bean_id}})}return a},_getRollbackFollowTasks:function(e,t){var n=this._getTxUpdatedFields(e),r=e._tx_bean_module;var i=[{op:"updateValuesSingle",data:{id:e._tx_bean_id,following:!!n.following.before},module:r,options:t}];if(t.resetDirty){i.push({op:"resetDateModified",module:r,data:{id:e._tx_bean_id}})}return i},_getRollbackUnlinkTasks:function(e,t){var n=[{op:"createLink",module:e._tx_related_module,data:{id:e._tx_related_id,link:e._tx_link,related:{id:e._tx_bean_id},relatedId:e._tx_bean_id,relatedModule:e._tx_bean_module}}];if(t.resetDirty){n.push({op:"resetDateModified",module:e._tx_bean_module,data:{id:e._tx_bean_id}})}return n},_getRollbackLinkTasks:function(e,t){var n=this._getTxUpdatedFields(e),r;if(n.before){r=[{op:"createLink",module:n.before.module,data:{id:n.before.id,link:e._tx_link,related:{id:e._tx_bean_id},relatedId:e._tx_bean_id,relatedModule:e._tx_bean_module}}]}else{r=[{op:"deleteLink",module:e._tx_related_module,data:{id:e._tx_related_id,link:e._tx_link,related:{id:e._tx_bean_id},relatedId:e._tx_bean_id,relatedModule:e._tx_bean_module}}]}if(t.resetDirty){r.push({op:"resetDateModified",module:e._tx_bean_module,data:{id:e._tx_bean_id}})}return r},_getTxUpdatedFields:function(e){return _.isString(e._tx_updated_fields)?JSON.parse(e._tx_updated_fields):e._tx_updated_fields},readSingleRawRecord:function(e,t,n){this._executeSynchronized(function(r){this.exec([{op:"readSingle",data:t,module:e,options:_.extend(n,{readDeleted:true})}],function i(){r();if(n.success){n.success.apply(this,arguments)}},function a(){r();if(n.error){n.error.apply(this,arguments)}})})},readRecordsByIds:function(e,t,n){this._executeSynchronized(function(r){this.exec([{op:"readModuleRecords",data:{id:t},module:e}],function i(){r();if(n.success){n.success.apply(this,arguments)}},function a(){r();if(n.error){n.error.apply(this,arguments)}})})},readTransactions:function(e,t){this._executeSynchronized(function(n){this.exec([{op:"readTransactions",bean:null,data:t,options:e}],function r(t){n();if(e.success){e.success.apply(this,arguments)}},function i(){n();if(e.error){e.error.apply(this,arguments)}})})},getStats:function(t){t=t||{};t=_.defaults(t,{modules:e.offline.utils.getOfflineModules(),success:function(t){e.logger.debug(t)},error:function(t){e.logger.error("getStats failed. "+t)}});var n={count:{},viewed:{}},r=this;this._executeSynchronized(function(e){async.series([function i(e){r.getRecordsCount(t,function(t,r){_.each(r,function(e,t){if(t.indexOf("_Viewed")!==-1){n.viewed[t.replace("_Viewed","")]=e;delete r[t]}});n.count=r;e(t,r)})},function a(e){r.getStorageSize(t,function(t,r){if(!t){_.extend(n,r)}e(t,r)})}],function s(r){e();if(r){t.error(r)}else{t.success(n)}})})},getRecordsCount:function(e,t){this.exec([{op:"getStats",data:null,module:null,options:e}],function(e){t(null,e)},t)},_NO_STORAGE_INFO:{dbSize:-1,totalDiskSpace:-1,freeDiskSpace:-1},getStorageSize:function(e,t){t(null,_.clone(this._NO_STORAGE_INFO))},compact:function(t){t=t||{};var n=(new Date).getTime(),r=new Date(n-1e3*60*60*24*(e.config.offline.defaultPurgeInterval||7)),i=this;var a=_.keys(e.config.offline.prefetch.staticModules||[]),s=_.filter(e.offline.utils.getOfflineModules(),function(e){return!_.contains(a,e)});t=_.defaults(t,{modules:s,expirationDate:e.utils.getTimestamp(r),callback:function(t){e.logger.debug(t||"Offline DB cleaning up completed")}});var o=[];if(t.flushTransactions){o.push(function l(e){i.exec([{op:"clearTransactionLog"}],function(){e()},e)})}_.each(t.modules,function(e){o.push(function(n){i._cleanUpModule(e,t.expirationDate,n)})});this._executeSynchronized(function(n){async.series(o,function(r){n();if(r){e.logger.error("Failed to clean up database. "+r)}t.callback(r)})})},_cleanUpModule:function(e,t,n){var r=this;async.waterfall([function i(n){r.exec([{op:"findViewedBefore",module:e,options:{expirationDate:t}}],function(e){n(null,e)},n)},function a(t,n){if(_.isEmpty(t)){return n()}var i=[];t=_.isArray(t)?t:[t];_.each(t,function(t){i.push(function(n){r._hardDeleteRecord(e,{id:t.id},{skipOneToManyChildren:true,dbSuccess:function(){n()},dbFailure:function(e){n(e)}})})});async.series(i,n)}],function s(e,t){n(e)})},_favorite:function(t,n,r){r.action=e.offline.SYNC_ACTIONS.FAVORITE;n={id:n.id,my_favorite:n.my_favorite,_client_date_modified:r.ts};if(n.my_favorite){n.following=true}this.execAndSpecificReturn([{op:"updateValuesSingle",data:n,module:t,options:r}],_.extend({data:n,module:t},r))},_follow:function(t,n,r){r.action=e.offline.SYNC_ACTIONS.FOLLOW;this.execAndSpecificReturn([{op:"updateValuesSingle",data:{id:n.id,following:n.following,_client_date_modified:r.ts},module:t,options:r}],_.extend({data:n,module:t},r))},_updateRecord:function(t,n,r){r.action=e.offline.SYNC_ACTIONS.UPDATE;n._client_date_modified=r.ts;if(e.offline.utils.isRecordAssignedToLoginUser(n)){n.following=true}this.execAndSpecificReturn([{op:"updateValuesSingle",data:n,module:t,options:r}],_.extend({data:n,module:t},r))},_updateRelatedRecord:function(t,n,r){r.action=e.offline.SYNC_ACTIONS.UPDATE;n.related._client_date_modified=r.ts;if(e.offline.utils.isRecordAssignedToLoginUser(n.related)){n.related.following=true}var i=[{op:"updateValuesSingle",data:n.related,module:n.relatedModule,options:r}];var a=this.getRelationshipByLink(t,n.link),s=this.getRelationshipType(a);var o=e.data.getRelationshipFields(t,n.link),l=!_.isEmpty(_.pick(n.related,o));if(s===this.relTypes.MANY_TO_MANY&&l){i.push({op:"createLink",module:t,data:n,options:r})}this.execAndSpecificReturn(i,_.extend({data:n,module:t},r))},_createRecord:function(t,n,r){n.id=n.id||e.utils.generateUUID();n.date_entered=n._client_date_modified=r.ts;if(e.offline.utils.isRecordAssignedToLoginUser(n)){n.following=true}r.action=e.offline.SYNC_ACTIONS.CREATE;this.execAndSpecificReturn([{op:"createSingle",data:n,module:t,options:r}],_.extend({data:n,module:t},r))},_createRelatedRecord:function(t,n,r){var i=this;n.related._client_date_modified=r.ts;if(n.relatedId){var a=function(){r.action=e.offline.SYNC_ACTIONS.LINK;i.execAndSpecificReturn([{op:"createLink",module:t,data:n,options:r}],_.extend({data:n,module:t},r))};var s=function(e){var t=e[0],n=e[1];if(!_.isEmpty(n)){return r.dbSuccess({record:t,relatedRecord:n})}else{a()}};var o=e.offline.storage.getRelationshipByLink(t,n.link),l=e.offline.storage.getRelationshipType(o);if(l===e.offline.storage.relTypes.MANY_TO_MANY){i.exec([{op:"readSingle",data:n,module:t,options:_.extend(r,{readDeleted:true})},{op:"readSingleRelated",module:t,data:n,options:r}],s,r.dbFailure)}else{a()}}else{var u=e.utils.generateUUID();n.relatedId=n.related.id=u;r.action=e.offline.SYNC_ACTIONS.CREATE;if(e.offline.utils.isRecordAssignedToLoginUser(n.related)){n.related.following=true}this.execAndSpecificReturn([{op:"createSingle",module:n.relatedModule,data:n.related,options:r},{op:"createLink",module:t,data:n,options:r}],_.extend({data:n,module:t},r))}},_softDeleteRecord:function(t,n,r){r.action=e.offline.SYNC_ACTIONS.DELETE;this.execAndSpecificReturn([{op:"createTransaction",module:t,data:n,options:r},{op:"softDeleteSingle",module:t,data:n,options:r}],_.extend({data:n,module:t},r))},_hardDeleteRecord:function(t,n,r){r.action=e.offline.SYNC_ACTIONS.DELETE;this.execAndSpecificReturn([{op:"hardDeleteSingle",module:t,data:n,options:r},{op:"deleteLastViewed",data:n,module:t}],_.extend({data:n,module:t},r))},_unlinkRecord:function(t,n,r){r.action=e.offline.SYNC_ACTIONS.UNLINK;var i=[{op:"deleteLink",module:t,data:n,options:r}];if(!r.hardDelete){i.push({op:"createTransaction",module:t,data:n,options:r})}this.execAndSpecificReturn(i,_.extend({data:n,module:t},r))},_readSimpleOrRelated:function(e,t,n){var r={op:n.relate?"readSingleRelated":"readSingle",data:t,module:e,options:n};var i=[r];if(this._shouldUpdateLastViewedDate(n)){i.splice(0,0,{op:"updateLastViewed",data:n.relate?{id:t.relatedId}:t,module:n.relate?t.relatedModule:e,options:n});i.splice(0,0,{op:"markToBeSynced",module:n.relate?t.relatedModule:e,data:{action:"update",record:{id:n.relate?t.relatedId:t.id}}})}this.exec(i,n.dbSuccess,n.dbFailure)},_readManyRecords:function(e,t){this.exec([{op:"readMany",module:e,options:t}],t.dbSuccess,t.dbFailure)},_readManyRelatedRecords:function(e,t,n){this.exec([{op:"readManyRelated",module:e,data:t,options:n}],n.dbSuccess,n.dbFailure)},_search:function(e){if(_.isString(e.order_by)){e.order_by=e.order_by.replace("date_modified","_client_date_modified")}this.exec([{op:"search",options:e}],e.dbSuccess,e.dbFailure)},_shouldUpdateLastViewedDate:function(e){return e&&e.viewed},fillTxLogData:function(e,t){_.each(e,function(e){if(e._tx_updated_fields){e._tx_updated_fields=JSON.parse(e._tx_updated_fields)}});var n={};function r(e,t){var r=e["_tx_"+t+"_module"];if(!r){return}if(!_.has(n,r)){n[r]=[]}n[r].push(e["_tx_"+t+"_id"])}_.each(e,function(e){r(e,"bean");r(e,"related")});function i(e,t,n){var r=e["_tx_"+t+"_id"];if(!r){return}var i=e["_tx_"+t+"_module"];if(!_.isArray(n[i])){e[t]=n[i]}else{e[t]=_.find(n[i],function(e){return e.id===r})}}this._executeSynchronized(function(r){this.readModuleRecords(n,function(n,a){r();if(!n){_.each(e,function(e){i(e,"bean",a);i(e,"related",a)})}t(n,e)})})},readModuleRecords:function(e,t,n){var r=this;_.each(e,function(t,n){var i={op:"readModuleRecords",module:n,data:{id:t},options:{}};e[n]=function(e){r.exec([i],function(t){e(null,t)},e)}});async.parallel(e,t)},markToBeSynced:function(e){this.exec([{op:"markToBeSynced",module:e.module,data:{action:e.action,record:e.record}}],e.callback,e.callback)},resetToBeSynced:function(e){this.exec([{op:"resetToBeSynced",module:e.module,data:{records:e.records}}],e.callback,e.callback)},readToBeSynced:function(e){this.exec([{op:"readToBeSynced",module:e.module,options:e}],function(t){t=t||[];if(!_.isArray(t)){t=[t]}e.callback({records:t})},e.callback)},updateLastViewed:function(e,t){this.exec([{op:"updateLastViewed",data:e,module:t.module,options:t}],t.callback,t.callback)}}})(SUGAR.App)},function(e,t){(function(e){var t={},n={},r,i,a=["email","teamset","multienum","metadata","json","tag"];function s(e){return _.isEmpty(e)||_.isEmpty(e.fields)&&_.isEqual(_.keys(e),["fields"])}function o(t,n){if(t.code===4){return e.offline.Error.OutOfSpaceError}return new e.offline.Error(t.code,t.message,null,t,n)}function l(n,r){var i=[r.id,r._client_date_modified?e.utils.getTimestamp(r._client_date_modified):undefined,r._deleted==1?1:0,s(r._acl)?null:JSON.stringify(r._acl)],a=e.metadata.getModule(n).fields;_.each(t[n].fields,function(e){i.push(u(r[e.name],e.name,n,a))});return i}function u(t,r,i,a){var o=a[r];if(r==="_acl"){t=s(t)?null:JSON.stringify(t)}else if(r==="_deleted"){t=t==1?1:0}else if(_.isUndefined(t)){t=null}else if(_.isBoolean(t)){t=t?1:0}else if(_.contains(n[i],r)){t=JSON.stringify(t)}else if(r==="_client_date_modified"||t&&o&&(o.type==="datetime"||o.type==="datetimecombo")&&!isNaN(Date.parse(t))){t=e.utils.getTimestamp(t)}if(o&&(t||t===0)&&e.offline.SqlHelper.getSqlTypeByMetaType(o.type)===e.offline.SqlHelper.DEFAULT_TEXT_COLUMN_TYPE){t=String(t)}return t}_.extend(e.offline.storage,{_version:"2.0",_getValues:l,_getValue:u,_init:function(){t={};n={};e.offline.SqlHelper.init(this.offlineMeta);_.each(this.offlineMeta.modules,function(r,i){t[i]=new e.offline.SqlHelper(i,r,this.offlineMeta[i].fields);n[i]=[];_.each(r.fields,function(e){if(_.contains(a,e.type)){n[i].push(e.name)}})},this)},convertFilter:function(t,n){
return e.offline.SqlHelper.buildFilterQuery(t,n)},getSqlStorageVersion:function(){return this._version},openDb:function(t,n,a){if(r)return r;r=this._openDb(t,n,a);if(r){i=t}else{throw new Error("`openDatabase` returned nothing")}e.logger.debug("Opened database "+t+" "+n+" ("+a+" bytes)");return r},_openDb:function(t,n,r){if(e.config.offline.storageAdapter==="native"){return window.sqlitePlugin.openDatabase({name:t,bgType:1,encrypt:e.config.offline.dbEncryptionEnabled})}else{return window.openDatabase(t,n,t,r)}},migrate:function(n,r,i){var a=this,s=[],o=false,l=false,u=false;i=i||{};r=r||{modules:{},relationships:{},serverInfo:{}};a.init(n);if(i.forceDrop||_.isEmpty(r)||r._userId!==e.user.get("id")||n.relationships._hash!==r.relationships._hash||r.siteUrl!==e.utils.stripHttpPrefix(e.config.siteUrl)){o=true;l=true;u=true;a._migrationSummary={storageRebuilt:true};_.each(n.modules,function(n,r){if(e.offline.isOfflineEnabled(r)){s.push(t[r].getSchema(r,n))}})}else if(n._hash!==r._hash){var c=_.filter(_.keys(r.modules),function(t){return e.offline.isOfflineEnabled(t)}),f=_.filter(_.keys(n.modules),function(t){return e.offline.isOfflineEnabled(t)}),d=[],h=[];_.each(c,function(t){if(!_.contains(f,t)){d.push(t);s.push(e.offline.SqlHelper.getDropTableStatement(t));s.push(e.offline.SqlHelper.lastViewed.buildCleanupMyModule(t));o=true}},this);_.each(f,function(e){if(!_.contains(c,e)){h.push(e);s.push(t[e].getSchema(e,n.modules[e]));o=true}},this);_.each(n.modules,function(t,i){if(_.contains(h,i)){return}if(r.modules[i]._hash!==t._hash&&t.fields._hash!==r.modules[i].fields._hash){var a=_.difference(_.keys(n.modules[i].fields),_.keys(r.modules[i].fields));_.each(a,function(t){var r=n.modules[i].fields[t];if(_.isEmpty(r.name))return;s.push(e.offline.SqlHelper.getAlterTableStatement(i,r))})}},this)}if(o){e.offline.storage.prepareOfflineRelationships(n.relationships);s.push(e.offline.SqlHelper.relationships.getCreateSchemaStatements(this.offlineMeta.relationships))}if(l){s.push(e.offline.SqlHelper.transactionLog.getCreateSchemaStatements())}if(u){s.push(e.offline.SqlHelper.lastViewed.getCreateSchemaStatements())}s.push(e.offline.SqlHelper.sync.getCreateSchemaStatements());if(s.length===0){e.logger.debug("No actual migration required");return i.success()}this._execRawStatements(_.flatten(s),function p(){if(i.success){i.success()}},function m(e){if(i.error){i.error(e)}})},isEncryptionSupported:function(){return _.isFunction(r.encrypt)},encrypt:function(e,t){r.encrypt(e,t)},_upgrade:{1:function(t){return e.offline.SqlHelper.upgrade.getUpgrade1Sql(t)}},_runUpgrade:function(e,t,n){this._execRawStatements(e,t,n)},_execRawStatements:function(t,n,i){var a;r.transaction(function(n){_.each(t,function(t){a=t;e.logger.trace(t);n.executeSql(t)})},function s(e){if(i){i(o(e),{failedSql:a,transactionSql:t})}},n)},_exec:function(t,n,i){var a=[],s=[],l,u,c=this;_.each(t,function(e){var t=_.clone(e.data),n=_.clone(e.options),r=c._sqlHandlers[e.op](e.module,t,n);if(!r){return}if(!r.module&&e.options){if(e.options.relate&&e.op!=="readSingle"){r.module=e.data.relatedModule}else{r.module=e.module}}if(e.module){l=e.module}s.push(r)});function f(e){return _.any(e,function(e){return _.isArray(e.sql)?f(e.sql):/^\s*(UPDATE|INSERT|REPLACE)/i.test(e.sql)})}if(e.config.offline.debug.outOfSpace&&f(s)){_.defer(function(){if(i){i(o({code:4},{failedSql:{sql:"SELECT 1;",params:[]},transactionSql:s}))}});return}r.transaction(function(t){_.each(s,function(n){function r(n){e.logger.trace("Executing SQL: "+n.sql);e.logger.trace("Params: "+(n.params?n.params:"(no params)"));u=n;t.executeSql(n.sql,n.params,function r(e,t){t=t?c._recordSetToArray(t,n.module||l):[];if(n.module){t=_.map(t,function(e){e._module=n.module;return e})}a=a.concat(t)})}if(_.isArray(n.sql)){_.each(n.sql,r)}else{r(n)}})},function d(e){if(i){i(o(e,{failedSql:{sql:u.sql,params:u.params},transactionSql:s}))}},function h(){if(a.length===1){a=a[0]}else if(a.length===0){a=null}n(a)})},_isOutOfSpace:function(t){var n=this;if(e.config.offline.debug.outOfSpace){_.defer(t,true);return}r.transaction(function(e){var t=n._sqlHandlers["updateTransaction"]("Module",{txLog:{_tx_uid:"tx_id",_tx_error_count:0}});t.sql+=" AND 1 <> 1";e.executeSql(t.sql,t.params)},function(e){t(e.code===4)},function(){t(false)})},drop:function(t){var n=this;r.transaction(function(t){t.executeSql(e.offline.SqlHelper.getSelectTablesStatement(),null,function(t,r){var i=e.offline.SqlHelper.getDropTableStatements(_.map(n._recordSetToArray(r),function(e){return e.tbl_name}));_.each(i,function(e){t.executeSql(e)})})},function i(e){if(t)t(o(e))},function a(){if(t)t()})},_sqlHandlers:{readSingle:function(e,n,r){r=r||{};return t[e]?{sql:r.readDeleted?t[e].sqlSelectOneWithDeleted:t[e].sqlSelectOne,params:[n.id]}:null},search:function(e,n,r){var i=r.module_list.split(","),a=[];_.each(i,function(e){a.push({sql:t[e].buildSqlSelectMany(r),params:null,module:e})});return{sql:a}},readSingleRelated:function(t,n,r){r=r||{};return{sql:e.offline.SqlHelper.relationships.buildSqlSelectSingleRelated(t,n,r),params:null}},readMany:function(e,n,r){return{sql:t[e].buildSqlSelectMany(r),params:null}},readManyRelated:function(t,n,r){return{sql:e.offline.SqlHelper.relationships.buildSqlSelectManyRelated(t,n,r),params:null}},readModuleRecords:function(e,n){return t[e]?{sql:t[e].buildSqlReadModuleRecordsByIds(n.id),params:null}:null},createSingle:function(n,r,i){r.id=r.id||e.utils.generateUUID();var a=l(n,r),s=[],o=this.updateRelationships(n,r,i);s.push({sql:t[n].sqlCreate,params:a});if(!_.isEmpty(o)){s=s.concat(o)}return{sql:s}},resetDateModified:function(n,r){return t[n]?{sql:e.offline.SqlHelper.getResetDateModifiedStatement(n,r)}:null},updateValuesSingle:function(n,r,i){if(_.isEmpty(r.id)){e.error.throwErrorWithCallStack("Undefined id passed to updateValuesSingle")}if(_.isUndefined(t[n])){return null}var a=["id","_client_date_modified","_acl"];_.each(t[n]?t[n].fields:[],function(e){a.push(e.name)});r=_.pick(r,a);var s=[],o=[],l=r.id,c=[],f=e.metadata.getModule(n).fields,d=this.updateRelationships(n,r,i);if(r.name){var h=e.offline.SqlHelper.relationships.buildSqlUpdateChildren(n,r);if(h){_.each(h,function(e){c.push({sql:e,params:null})})}}if(!_.isEmpty(d)){c=c.concat(d)}delete r.id;delete r._module;delete r._search;if(_.isEmpty(r)){return null}_.each(r,function(e,t){o.push(t);s.push(u(e,t,n,f))});s.push(l);c.push({sql:t[n].buildSqlUpdate(l,o),params:s});return{sql:c}},updateRelationships:function(t,n,r){var i=[],a=e.metadata.getModule(t).fields,s={};_.each(n,function(t,n){if(a[n]&&a[n].link&&a[a[n].link]){var r=e.metadata.getRelationship(a[a[n].link].relationship);if(r&&!s[r.name]){s[r.name]=r;s[r.name].create=!!t}}});_.each(s,function(a){var s=a.create?e.offline.SqlHelper.relationships.buildSqlReplaceRelationship:e.offline.SqlHelper.relationships.buildDeleteRelationship,o=a.rhs_module===t?a.lhs_module:a.rhs_module,l=e.offline.storage.offlineMeta.relationships[a.name];if(!l){return false}var u=s.call(e.offline.SqlHelper.relationships,o,{related:n,relatedId:n.id,relatedModule:t,relDef:l},_.extend({},r,{skipUpdateRelRecord:true}));if(u&&!_.isArray(u)){u=[{sql:u}]}if(!_.isEmpty(u)){_.each(u,function(e){i.push({sql:e.sql,params:null})})}},this);return i},hardDeleteSingle:function(n,r,i){var a=[],s=[];i=i||{};if(_.isUndefined(t[n])){return null}if(!i.skipRelationshipsClean){s=e.offline.SqlHelper.relationships.buildSqlCleanRelationships(n,r,i)}var o=s.map(function(e){return{sql:e,params:null}});var l=a.concat({sql:t[n].sqlDelete,params:[r.id]},o);return{sql:l}},softDeleteSingle:function(e,n){return{sql:t[e].sqlMarkDeleted,params:[n.id]}},resetDeletedSingle:function(e,n){return t[e]?{sql:t[e].sqlResetDeleted,params:[n.id]}:null},createLink:function(n,r,i){return t[n]?{sql:e.offline.SqlHelper.relationships.buildSqlReplaceRelationship(n,r,i),params:null}:null},deleteLink:function(n,r,i){return t[n]?{sql:e.offline.SqlHelper.relationships.buildDeleteRelationship(n,r,i),params:null}:null},readTransactions:function(t,n,r){if(n&&n.id){return{sql:e.offline.SqlHelper.transactionLog.getTxLog,params:[n.id]}}else{var i=[{sql:e.offline.SqlHelper.transactionLog.getReadTransactionsStatements(r),params:[r.offset||0,r.limit]}];if(r.count){i.push({sql:e.offline.SqlHelper.transactionLog.countTransactions})}return{sql:i}}},readToBeSynced:function(t,n,r){return{sql:e.offline.SqlHelper.sync.getReadToBeSyncedSql(t,n,r),params:null}},markToBeSynced:function(t,n,r){return{sql:e.offline.SqlHelper.sync.getMarkToBeSyncedSql(t,n,r),params:null}},resetToBeSynced:function(t,n,r){return{sql:e.offline.SqlHelper.sync.getResetToBeSyncedSql(t,n,r),params:null}},createTransaction:function(t,n,r){return{sql:e.offline.SqlHelper.transactionLog.sqlTxLogAction,params:e.offline.storage.getCUTransactionParams(t,n,r)}},updateTransaction:function(t,n,r){var i,a=n.txLog,s=["_tx_updated_fields","_tx_error","_tx_error_count","_tx_ts"];if(r&&r.initialState){i=e.offline.storage.getCUTransactionParams(t,n.updatedFields,{action:a._tx_action,txId:a._tx_uid,initialState:r.initialState,relate:r.relate});a._tx_updated_fields=i[6]}return{sql:e.offline.SqlHelper.transactionLog.updateTransaction(a._tx_uid,_.pick(a,s))}},deleteTransaction:function(t,n,r){return{sql:e.offline.SqlHelper.transactionLog._deleteTransaction,params:[r.txId]}},clearTransactionLog:function(){return{sql:e.offline.SqlHelper.transactionLog.clearTransactionLog}},countAssociatedTransactions:function(t,n,r){return{sql:e.offline.SqlHelper.transactionLog.getCountAssociatedTransactionsStatements(r.txData)}},countTransactions:function(){return{sql:e.offline.SqlHelper.transactionLog.countTransactions}},readLastViewed:function(t,n,r){if(r.ids){return{sql:e.offline.SqlHelper.lastViewed.buildReadForRecords(r.ids)}}return{sql:e.offline.SqlHelper.lastViewed.buildRead(r.desc),params:[r.max_num]}},readRecents:function(t,n,r){return{sql:e.offline.SqlHelper.lastViewed.buildReadForModule(t),params:[r.max_num]}},updateLastViewed:function(t,n,r){return{sql:e.offline.SqlHelper.lastViewed.buildReplace(t,n,r)}},deleteLastViewed:function(t,n,r){return{sql:e.offline.SqlHelper.lastViewed.buildDelete(t,n,r)}},findViewedBefore:function(t,n,r){return{sql:e.offline.SqlHelper.lastViewed.buildFindViewedBefore(t,r)}},getStats:function(t,n,r){return{sql:e.offline.SqlHelper.getStatsRetrieveStatements(r)}}},_deserialize:function(e,t){var r=_.clone(e);_.each(r,function(e,i){if(_.isString(e)&&_.contains(n[t],i)){r[i]=JSON.parse(e)}});if(r._acl){r._acl=JSON.parse(r._acl)}return r},_recordSetToArray:function(e,t){var n=[];if(e){for(var r=0;r<e.rows.length;r++){n.push(this._deserialize(e.rows.item(r),t))}}return n},getDetails:function(){var t=e.offline.storage.getDetails;return function(){return _.extend(t(),{dbName:i})}}()})})(SUGAR.App)},function(e,t){(function(e){_.extend(e.offline,{declareOfflineBean:function(){var t=e.data.beanModel.prototype.save;e.OfflineBean=e.data.beanModel.extend({save:function(e,n){if(n&&n.fields&&_.contains(n.fields,"email")){var r,i;r=_.find(this.attributes,function(e,t){return this.fields[t]&&this.fields[t].type==="email"},this);if(r){i=_.find(r,function(e){return e.primary_address});if(i){n.fields.push("email1");this.attributes["email1"]=i.email_address}}}t.apply(this,arguments)}});return e.OfflineBean}})})(SUGAR.App)},function(e,t){(function(e){_.extend(e.offline,{declareOfflineBeanCollection:function(){var t=e.data.beanCollection;e.OfflineBeanCollection=e.data.beanCollection.extend({initialize:function(e,n){this.cid=_.uniqueId("c");t.prototype.initialize.apply(this,arguments)},fetch:function(e){this._handleFetchWithQuery(this._mergeCollection,e);return t.prototype.fetch.call(this,e)},_handleFetchWithQuery:function n(e,t){t=t||{};t.params=t.params||{};if(t.params.q){t.params.serverSyncSuccess=_.bind(e,this)}},_mergeCollection:function(t,n){var r=t.records,i=t.next_offset;var a=_.filter(r,function(t){var n=this.get(t.id);return!(n&&!e.offline.utils.isDataSynchronized(n))},this);this.set(a,{remove:false});this.offset=i!==-1?i:this.offset+(r||[]).length;this.next_offset=i}});return e.OfflineBeanCollection}})})(SUGAR.App)},function(e,t){(function(e){_.extend(e.offline,{declareOfflineMixedBeanCollection:function(){var t=e.data.mixedBeanCollection;e.OfflineMixedBeanCollection=e.data.mixedBeanCollection.extend({fetch:function(n){var r=e.OfflineBeanCollection.prototype;r._handleFetchWithQuery.call(this,r._mergeCollection,n);return t.prototype.fetch.call(this,n)}});return e.OfflineMixedBeanCollection}})})(SUGAR.App)},function(e,t){(function(e){e.offline.SyncExecutor=function(e){this.options=e;this.init()};_.extend(e.offline.SyncExecutor.prototype,{_working:false,isWorking:function(){return this._working},_lastSyncTime:null,getLastSyncTime:function(){return this._lastSyncTime},init:function(){},shouldRun:function(){var t=this._lastSyncTime&&(new Date).getTime()-this._lastSyncTime.getTime()<this.options.interval*1e3;if(!this.options.enabled||!e.api.isAuthenticated()||t){return false}return!this._working},beforeSync:function(){this._working=true},sync:function(e){if(!this.shouldRun()){e();return}this.beforeSync();this._sync(_.bind(function(t){this.afterSync();e.apply(this,arguments)},this))},afterSync:function(){this._lastSyncTime=new Date;this._working=false},_sync:function(){e.offline.utils.notImplemented()},getPriority:function(){return this.options.priority},stop:function(){e.offline.utils.notImplemented()}});e.offline.SyncExecutor.extend=Backbone.Model.extend})(SUGAR.App)},function(e,t){(function(e){e.offline.WinsSyncExecutor=e.offline.SyncExecutor.extend({SYNC_PHASES:{PRE_SYNC:1,SYNC:2},WINS_STATUS_CACHE_NAME:"sync:wins:status",_status:null,_stopAsyncFlow:null,_updateStatus:function(t){_.each(t,function(e,t){this._status[t]=e},this);e.cache.set(this.WINS_STATUS_CACHE_NAME,this._status)},_loadStatus:function(){var t=e.cache.get(this.WINS_STATUS_CACHE_NAME);if(t&&e.user.get("id")===t.userId){this._status=t;if(this._status.winsStartedTime){this._status.winsInterruptedTimes++;this._updateStatus({winsInterruptedTimes:this._status.winsInterruptedTimes})}}else{this._resetStatus()}},_resetStatus:function(){this._status={phase:this.SYNC_PHASES.PRE_SYNC,preSyncedModules:[],minDate:this._status&&this._status.maxDate||e.cache.get(e.offline.INITIALIZED_TS_KEY),maxDate:null,winsCompletedTime:null,winsStartedTime:null,winsInterruptedTimes:0,syncedRecords:0,userId:e.user.get("id")};this._updateStatus()},_sync:function(t){var n=this;var r=function(r){e.logger.debug("WINS completed.");if(r){n._status.winsInterruptedTimes++;n._updateStatus({winsInterruptedTimes:n._status.winsInterruptedTimes})}else{n._updateStatus({winsCompletedTime:+new Date-n._status.winsStartedTime});e.trigger("offline:wins:completed",_.pick(n._status,["winsCompletedTime","winsInterruptedTimes","syncedRecords"]));n._resetStatus()}if(t){t(r)}};this._loadStatus();if(!this._status.winsStartedTime){this._updateStatus({winsStartedTime:+new Date})}if(_.isEmpty(this._status.minDate)){e.logger.debug("Skipping sync as last synced date is unknown. Fetching and saving current server time");e.offline.utils.getServerTime(function(e,t){if(!e){n._updateStatus({minDate:t})}r(e)})}else if(this._status.phase===this.SYNC_PHASES.PRE_SYNC){this._preSync(function(e){if(!e){n._updateStatus({phase:n.SYNC_PHASES.SYNC});n._recordsSync(r)}else{r(e)}})}else{this._recordsSync(r)}},_preSync:function(t){var n=this,r=[];if(_.isEmpty(this._status.maxDate)){r.push(function(t){e.offline.utils.getServerTime(function(e,r){if(e){t(e)}else{n._updateStatus({maxDate:r});t()}})})}var i=_.difference(e.offline.utils.getOfflineModules(),this._status.preSyncedModules,_.keys(e.config.offline.prefetch.staticModules));i=_.filter(i,function(t){return e.acl.hasAccess("list",t)});if(i.length!==0){_.each(i,function(e){r.push(function(t){n._preSyncModule(e,t)})},this)}this._stopAsyncFlow=e.offline.utils.getStoppableAsyncFlow("series",r,t)},_preSyncModule:function(t,n){var r=this,i={fields:"id",deleted:true,filter:[{date_modified:{$gte:this._status.minDate,$lt:this._status.maxDate}}]};e.offline.utils.fetchPageByPage(t,i,_.bind(this._markLocalRecordsToBeUpdated,this),null,{maxRecords:this.options.preSyncMaxRecords,pageSize:this.options.preSyncPageSize,callback:function(e){if(!e){r._status.preSyncedModules.push(t);r._updateStatus({preSyncedModules:r._status.preSyncedModules})}n(e)}})},_markLocalRecordsToBeUpdated:function(t){this._processLocalMatchedRecords(t,function(n,r,i){e.offline.storage.markToBeSynced({module:t.module,action:r.deleted?"delete":"update",record:n,callback:i})})},_recordsSync:function(t){var n=this,r=[];_.each(e.offline.utils.getOfflineModules(),function(e){r.push(function(t){n._syncModule(e,t)})},this);this._stopAsyncFlow=e.offline.utils.getStoppableAsyncFlow("series",r,t)},_syncModule:function(t,n){var r=this;e.offline.storage.readToBeSynced({offset:0,max_num:this.options.syncPageSize||20,module:t,callback:function(e){if(e.err||_.isEmpty(e.records)){n(e.err)}else{r._syncRecords({module:t,records:e.records,callback:function(i){if(i){n(i)}else{r._status.syncedRecords+=e.records.length;r._updateStatus({syncedRecords:r._status.syncedRecords});r._syncModule(t,n)}}})}}})},_syncRecords:function(t){var n=_.map(t.records,function(e){return{id:e.bean_id,module:e.bean_module,action:e.action}}),r=t.module,i=_.filter(n,function(e){return e.action==="update"}),a=_.filter(n,function(e){return e.action==="delete"}),s=[];if(i.length>0){var o=_.pluck(i,"id"),l=e.metadata.getModule(r).mergedFields,u={filter:[{id:{$in:o}}]};if(!_.isEmpty(l)){u.fields=l.join(",")}s.push(function(t){e.offline.api.callOriginalApi("records",["read",r,null,u,{success:function(n){n=n||{records:[]};e.offline.storage.saveRecords({serverData:n.records,module:r,callback:function(n){if(n){return t(n)}else{e.offline.storage.resetToBeSynced({records:i,callback:t})}}})},error:t}])})}if(a.length>0){_.each(a,function(t){s.push(function(n){e.offline.storage.readSingleRawRecord(r,{id:t.id},{success:function(t){if(t&&e.offline.utils.isDataSynchronized(t)){e.offline.storage.sync("delete",{id:t.id},r,{hardDelete:true,success:function(){e.offline.storage.resetToBeSynced({records:a,callback:n})},error:n})}else{e.offline.storage.resetToBeSynced({records:a,callback:n})}},error:n})})})}async.series(s,t.callback)},_processLocalMatchedRecords:function(t,n){var r=_.pluck(t.records,"id"),i=t.module;e.offline.storage.readRecordsByIds(i,r,{success:function(e){if(_.isEmpty(e)){return t.callback()}e=_.isArray(e)?e:[e];var r=[];_.each(e,function(e){r.push(function(r){var i=_.find(t.records,function(t){return t.id===e.id});n(e,i,r)})});async.series(r,t.callback)},error:t.callback})},stop:function(){if(this._stopAsyncFlow){this._stopAsyncFlow();this._stopAsyncFlow=null;e.logger.debug("WinsSync interrupted")}}})})(SUGAR.App)},function(e,t){(function(e){e.offline.TxLogSyncExecutor=e.offline.SyncExecutor.extend({SYNC_ITERATION_COMPLETE_MESSAGE:"sync_iteration_complete",_immediateStop:false,_getBeanStub:function(e){return{id:e._tx_bean_id,module:e._tx_bean_module,related_id:e._tx_related_id,related_module:e._tx_related_module}},_sync:function(t){var n=this;var r=function(r){e.logger.debug("TxLogSync completed");if(r===n.SYNC_ITERATION_COMPLETE_MESSAGE){r=null}t(r)};function i(){if(n._immediateStop){n._immediateStop=false;e.logger.debug("TxLogSync interrupted");return r()}n._syncOldestTransaction(function(e){if(e){r(e)}else i()})}i()},_syncOldestTransaction:function(t){var n=this;e.offline.storage.readTransactions({limit:1,dateAsc:true,error:t,success:function(r){if(!r){return t(n.SYNC_ITERATION_COMPLETE_MESSAGE)}var i=n._getBeanStub(r);e.offline.storage.readSingleRawRecord(i.module,i,{success:function(a){a=a||{};var s=r._tx_updated_fields?JSON.parse(r._tx_updated_fields):{},o={};if(r._tx_action!==e.offline.SYNC_ACTIONS.LINK&&r._tx_action!==e.offline.SYNC_ACTIONS.UNLINK){_.each(s,function(e,t){o[t]=e.after});if(r._tx_action!==e.offline.SYNC_ACTIONS.CREATE){o.date_modified=a.date_modified||e.utils.getTimestamp()}o.id=a.id||i.id}n._handleSyncTransaction(r,t,o);o={}},error:t})}})},_handleSyncTransaction:function(t,n,r){var i,a={id:t._tx_bean_id,module:t._tx_bean_module,related_id:t._tx_related_id,related_module:t._tx_related_module};if(t._tx_action===e.offline.SYNC_ACTIONS.CREATE||t._tx_action===e.offline.SYNC_ACTIONS.LINK){i="create"}else if(t._tx_action===e.offline.SYNC_ACTIONS.UPDATE){i="update"}else if(t._tx_action===e.offline.SYNC_ACTIONS.DELETE||t._tx_action===e.offline.SYNC_ACTIONS.UNLINK){i="delete"}else if(t._tx_action===e.offline.SYNC_ACTIONS.FAVORITE){i="favorite"}else if(t._tx_action===e.offline.SYNC_ACTIONS.FOLLOW){i="follow"}else{throw new Error("Undefined action in transaction log!")}if(t._tx_related_id&&t._tx_related_module){this._syncRelationships(i,a,t,n,r)}else if(i==="favorite"){this._syncFavorite(i,a,t,n,r)}else if(i==="follow"){this._syncFollow(i,a,t,n,r)}else{this._syncRecords(i,a,t,n,r)}},_syncRecords:function(t,n,r,i,a){var s={};a=this._addXTimestampHeader(a,s);e.offline.api.callOriginalApi("records",[t,n.module,a,{viewed:true},{success:function(t){e.offline.storage.resolveSuccess({module:n.module,transaction:r,serverData:t,callback:i})},error:function(t){e.offline.storage.resolveError({error:t,updatedFields:a,txLog:r,callback:i})}},s])},_syncRelationships:function(t,n,r,i,a){var s={};a=this._addXTimestampHeader(a,s);var o={id:n.related_id,link:r._tx_link,related:a?a:{id:n.id},relatedId:n.id};if(r._tx_action===e.offline.SYNC_ACTIONS.CREATE){o.relatedId=null}e.offline.api.callOriginalApi("relationships",[t,n.related_module,o,{},{success:function(t){var a=_.extend(o,{related:t.related_record,record:t.record,recordModule:n.related_module,relatedModule:n.module});e.offline.storage.resolveSuccess({module:r._tx_related_module,transaction:r,serverData:t,relationshipData:a,callback:i})},error:function(t){e.offline.storage.resolveError({error:t,updatedFields:a,txLog:r,callback:i})}},s])},_syncFavorite:function(t,n,r,i,a){e.offline.api.callOriginalApi("favorite",[n.module,n.id,a.my_favorite,{success:function(t){e.offline.storage.resolveSuccess({module:n.module,transaction:r,serverData:t,callback:i})},error:function(t){e.offline.storage.resolveError({error:t,updatedFields:a,txLog:r,callback:i})}}])},_syncFollow:function(t,n,r,i,a){e.offline.api.callOriginalApi("follow",[n.module,n.id,a.following,{success:function(){e.offline.storage.resolveSuccess({module:n.module,transaction:r,serverData:{id:n.id,following:a.following},callback:i})},error:function(t){e.offline.storage.resolveError({error:t,updatedFields:a,txLog:r,callback:i})}}])},_addXTimestampHeader:function(e,t){if(e&&e.date_modified){t.headers={"X-TIMESTAMP":e.date_modified};e=_.omit(e,"date_modified")}return e},stop:function(){this._immediateStop=true}})})(SUGAR.App)},function(e,t){(function(e){Handlebars.registerHelper("field",function(t,n){var r=e.view.createField({def:this,view:t,model:n.hash.model,viewName:n.hash.template});if(n.hash.parent&&_.isArray(n.hash.parent.fields)){n.hash.parent.fields.push(r)}return r.getPlaceholder()});Handlebars.registerHelper("fieldOfType",function(t,n){var r={type:t,name:t,label:n};var i=e.view.createField({def:r,view:this});return i.getPlaceholder()});Handlebars.registerHelper("component",function(e,t){var n,r,i="";n=_.find(e.meta.components,function(e){var n,r;r=e.layout||e.view;if(_.isString(r)){n=r}else{n=r.name||r.type}return n===t});if(_.isObject(n)&&!_.isEmpty(n)){r=e.initComponents([n])[0];n.initializedInTemplate=true;i=r.getPlaceholder()}return i});Handlebars.registerHelper("eachOptions",function(t,n){var r,i="",a;r=_.isString(t)?e.lang.getAppListStrings(t):t;if(_.isArray(r)){a=function(e,t){i=i+n.fn({key:t,value:e})}}else if(_.isObject(r)){a=function(e,t){i=i+n.fn({key:t,value:e})}}else{r=null}if(r)_.each(r,a,this);return i});Handlebars.registerHelper("buildRoute",function(t){var n=t.hash.context,r=t.hash.model||(n&&n.get("model")?n.get("model"):{}),i=t.hash.module||r.module||(n&&n.get("module")?n.get("module"):null),a=t.hash.id||r.id,s=t.hash.action;return e.router.buildRoute(i,a,s)});Handlebars.registerHelper("fieldValue",function(e,t,n){return e.get(t)||n.hash.defaultValue||""});Handlebars.registerHelper("has",function(e,t,n){if(!_.isArray(t)&&!_.isObject(t)){t=[t]}return _.include(t,e)?n.fn(this):n.inverse(this)});Handlebars.registerHelper("notHas",function(e,t,n){var r=n.fn,i=n.inverse;n.fn=i;n.inverse=r;return Handlebars.helpers.has.call(this,e,t,n)});Handlebars.registerHelper("isSortable",function(t,n,r){if(e.utils.isSortable(t,n)){return r.fn(this)}else{return""}});Handlebars.registerHelper("eq",function(e,t,n){return e==t?n.fn(this):n.inverse(this)});Handlebars.registerHelper("notEq",function(e,t,n){return e!=t?n.fn(this):n.inverse(this)});Handlebars.registerHelper("match",function(e,t,n){var r=new RegExp(t);if(r.test(e)){return n.fn(this)}else{return n.inverse(this)}});Handlebars.registerHelper("notMatch",function(e,t,n){var r=new RegExp(t);if(!r.test(e)){return n.fn(this)}else{return n.inverse(this)}});Handlebars.registerHelper("log",function(t){e.logger.debug("*****HBS: Current Context*****");e.logger.debug(this);e.logger.debug("*****HBS: Current Value*****");e.logger.debug(t);console.log(t);e.logger.debug("***********************")});Handlebars.registerHelper("str",function(t,n,r){n=_.isString(n)?n:null;return e.lang.get(t,n,r)});Handlebars.registerHelper("relativeTime",function(t,n){var r=e.date(t),i,a;n.hash.title=n.hash.title||r.formatUser(n.hash.dateOnly);i=_.map(n.hash,function(e,t){return t+'="'+Handlebars.Utils.escapeExpression(e)+'"'}).join(" ");a='<time datetime="'+r.format()+'" '+i+">"+r.fromNow()+"</time>";return new Handlebars.SafeString(a)});Handlebars.registerHelper("arrayJoin",function(e,t){return e.join(t)});Handlebars.registerHelper("nl2br",function(e){e=Handlebars.Utils.escapeExpression(e);var t=e.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+"<br>");return new Handlebars.SafeString(t)});Handlebars.registerHelper("formatCurrency",function(t,n){if(_.isObject(n)){n=n.hash.currencyId||undefined}return e.currency.formatAmountLocale(t,n)});Handlebars.registerHelper("firstChars",function(e,t){return e.substring(0,t)});Handlebars.registerHelper("formatDate",function(t,n){t=e.date(t);return t.formatUser(n.hash.dateOnly)});Handlebars.registerHelper("getModuleName",function(t,n){var r={plural:n.hash.plural,defaultValue:n.hash.defaultValue};return e.lang.getModuleName(t,r)});Handlebars.registerHelper("partial",function(t,n,r,i){var a,s,o;if(!i&&r.hash){i=r;r={}}o=_.extend({templateComponent:n},r,i.hash);a=i.hash.module||n.module;if(n&&n.options.templateOptions&&n.options.templateOptions.partials){s=n.options.templateOptions.partials[t]}else if(n instanceof e.view.Field){var l=i.hash.fallbackTemplate;s=e.template.getField(n.type,t||"detail",a,l)}else if(n instanceof e.view.View){var u=n.tplName;s=e.template.getView(n.name+"."+t,a)||e.template.getView(n.name+"."+t);if(!s&&u){s=e.template.getView(u+"."+t,a)||e.template.getView(u+"."+t)}}else if(n instanceof e.view.Layout){s=e.template.getLayout(n.name+"."+t,a)||e.template.getLayout(n.name+"."+t)}return new Handlebars.SafeString(s?s(o):"")})})(SUGAR.App)},function(e,t){(function(e){var t=0;var n=[];var r={reset:function(){_.each(this.layouts,function(e,t){delete this.layouts[t]},this);_.each(this.views,function(e,t){delete this.views[t]},this);_.each(this.fields,function(e,t){delete this.fields[t]},this)},getFieldId:function(){return t},views:{},layouts:{},fields:{},_createComponent:function(e,t,n){var r=this.declareComponent(e,n.type||t,n.loadModule||n.module,n.controller,false,this._getPlatform(n));var i=new r(n);i.trigger("init");i.bindDataChange();return i},createView:function(t){t.context=t.context||e.controller.context;t.module=t.module||t.context.get("module");t.name=t.name||t.type;t.meta=t.meta||e.metadata.getView(t.module,t.name,t.loadModule);if(t.def&&t.def.xmeta){t.meta=_.extend({},t.meta,t.def.xmeta)}var n=t.meta||{};t.type=t.type||n.type||t.name;return this._createComponent("view",t.type,t)},createLayout:function(t){t.context=t.context||e.controller.context;t.module=t.module||t.context.get("module");t.name=t.name||t.type;t.meta=t.meta||e.metadata.getLayout(t.module,t.name,t.loadModule);if(t.def&&t.def.xmeta){t.meta=_.extend({},t.meta,t.def.xmeta)}var n=t.meta||{};t.type=t.type||n.type||t.name;return this._createComponent("layout",t.type,t)},createField:function(n){var r=n.def.type;n.context=n.context||n.view.context||e.controller.context;n.model=n.model||n.context.get("model");n.module=n.module||(n.model&&n.model.module?n.model.module:n.context.get("module"))||"";n.meta=n.meta||e.metadata.getField(r,n.module);if(n.meta&&n.meta.controller)n.controller=n.meta.controller;n.sfId=++t;var i=this._createComponent("field",r,n);n.view.fields[i.sfId]=i;return i},_getPlatform:function(t){return t.platform||(e.config&&e.config.platform?e.config.platform:"base")},_getController:function(e){var t=this._getBaseComponent(e.type,e.name,e.module,e.platform);if(t.cache[t.moduleBasedClassName]){return t.cache[t.moduleBasedClassName]}return t.baseClass},componentHasPlugin:function(t){var n;if(!t.type||!t.name||!t.plugin){e.logger.error("componentHasPlugin requires type, name, and plugin parameters");return null}n=this._getController(t);return n&&n.prototype&&_.contains(n.prototype.plugins,t.plugin)},declareComponent:function(t,n,r,i,a,s){var o=this._getBaseComponent(t,n,r,s,a&&i);return o.cache[o.moduleBasedClassName]||e.utils.extendClass(o.cache,o.baseClass,o.moduleBasedClassName,i,o.platformNamespace)||o.baseClass},_getBaseComponent:function(t,n,r,i,a){i=this._getPlatform({platform:i});var s=e.utils.capitalize(t),o=e.utils.capitalize(i),l=e.utils.capitalizeHyphenated(n)+s,u=o+(r||"")+l,c=o+(r||"")+"Custom"+l,f=e.view[t+"s"],d=e.utils.capitalize(e.config.appId)+s;if(a){if(f[u])delete f[u]}var h=f[o+"Custom"+l]||f[o+l]||f["BaseCustom"+l]||f["Base"+l]||f[l]||f["BaseBase"+s]||e.view["Custom"+d]||e.view[d]||e.view[s];if(f[c]&&!a){u=c}return{cache:f,platformNamespace:o,moduleBasedClassName:u,baseClass:h}}};e.augment("view",r,false)})(SUGAR.App)},function(e,t){(function(e){e.view.Component=Backbone.View.extend({_isInitialized:false,constructor:function(e){this.options=e||{};this._wrapInitialize(e);return Backbone.View.apply(this,arguments)},_wrapInitialize:function(e){this.initialize=_.wrap(this.initialize,_.bind(function(t){t.call(this,e);this.initialize=t;this._isInitialized=true;this.delegateEvents()},this))},initialize:function(t){this.context=t.context||e.controller&&e.controller.context||new Backbone.Model;this.meta=t.meta;this.module=t.module||this.context.get("module");this.model=t.model||this.context.get("model");this.collection=t.collection||this.context.get("collection");if(this.meta&&this.meta.css_class){this.$el.addClass(this.meta.css_class)}this.updateVisibleState(true);e.user.lastState.register(this)},_render:function(){return this},render:function(){if(this.disposed===true){e.logger.error("Unable to render component because it's disposed "+this+"\n");return false}if(!this.triggerBefore("render"))return false;this._render();this.trigger("render");return this},delegateEvents:function(){if(!this._isInitialized){return this}return Backbone.View.prototype.delegateEvents.apply(this,arguments)},setTemplateOption:function(e,t){this.options.templateOptions=this.options.templateOptions||{};this.options.templateOptions[e]=_.extend({},this.options.templateOptions[e],t)},bindDataChange:function(){},unbindData:function(){if(this.model)this.model.off(null,null,this);if(this.collection)this.collection.off(null,null,this)},unbind:function(){this.off();this.offBefore();this.undelegateEvents();e.events.off(null,null,this);e.events.unregister(this);if(this.context)this.context.off(null,null,this);if(this.layout)this.layout.off(null,null,this)},loadData:function(){},_dispose:function(){this.unbindData();this.unbind();this.remove();this.model=null;this.collection=null;this.context=null;this.$el=null;this.el=null},dispose:function(){if(this.disposed===true)return;

this._dispose();this.disposed=true},toString:function(){return this.cid+"-"+(this.$el&&this.$el.id?this.$el.id:"<no-id>")+"/"+this.module+"/"+this.model+"/"+this.collection},closestComponent:function(e){},show:function(){if(!this.isVisible()){if(!this.triggerBefore("show")){return false}this._show();this.trigger("show")}},hide:function(){if(this.isVisible()){if(!this.triggerBefore("hide")){return false}this._hide();this.trigger("hide")}},isVisible:function(){return this._isVisible},updateVisibleState:function(e){this._isVisible=!!e},_show:function(){this.$el.removeClass("hide").show();this.updateVisibleState(true)},_hide:function(){this.$el.addClass("hide").hide();this.updateVisibleState(false)},_super:function(t,n){if(!t||!_.isString(t)){return e.logger.error("tried to call _super without specifying a parent method in "+this.name)}var r,i=null,a=Object.getPrototypeOf(this);n=n||[];this._superStack=this._superStack||{};this._superStack[t]=this._superStack[t]||[];if(this._superStack[t].length>0){r=Object.getPrototypeOf(_.last(this._superStack[t]));if(_.contains(this._superStack[t],r)){return e.logger.error("Loop detected calling "+t+" from "+this.name)}}else{r=Object.getPrototypeOf(a)}if(!a[t]){return e.logger.error("Unable to find method "+t+" on class "+this.name)}while(!r.hasOwnProperty(t)&&r!==e.view.Component.prototype){r=Object.getPrototypeOf(r)}while(a[t]===r[t]&&r!==e.view.Component.prototype){a=r;r=Object.getPrototypeOf(r)}this._superStack[t].push(r);if(!r){return e.logger.error("Unable to find parent of component "+this.name)}if(!r[t]){return e.logger.error("Unable to find method "+t+" on parent class of "+this.name)}var s=r[t].apply(this,n);this._superStack[t].pop();if(_.isEmpty(this._superStack[t])){this._superStack[t]=null}return s},getPlaceholder:function(){return new Handlebars.SafeString('<span cid="'+this.cid+'"></span>')}});_.extend(e.view.Component.prototype,e.beforeEvent)})(SUGAR.App)},function(e,t){(function(e){e.view.View=e.view.Component.extend({initialize:function(t){e.plugins.attach(this,"view");e.view.Component.prototype.initialize.call(this,t);this.type=t.type;this.name=t.name||this.type;this.action=t.meta&&t.meta.action?t.meta.action:this.name;this._loadTemplate(t);this.fields={};this.fallbackFieldTemplate=this.fallbackFieldTemplate||"detail";this.layout=this.options.layout;this.primary=t.primary;this._setLabels();this.context.addFields(this.getFieldNames());e.events.on("app:locale:change",function(){this._setLabels()},this)},_loadTemplate:function(t){var n,r;if(n=t&&t.template){r=null}else if(n=this.meta&&this.meta.template&&e.template.getView(this.meta.template)){r=this.meta.template}else if(n=e.template.getView(this.name,this.module)||e.template.getView(this.name)){r=this.name}else if(n=this.meta&&this.meta.type&&e.template.getView(this.meta.type)){r=this.meta.type}else{n=e.template.empty;r=""}this.tplName=r;this.template=n},_renderHtml:function(t,n){if(this.template){try{this.$el.html(this.template(t||this,n||this.options.templateOptions))}catch(r){e.logger.error("Failed to render "+this+"\n"+r);e.error.handleRenderError(this,"_renderHtml")}}},_renderFields:function(){var e=this;var t={};this.$("span[sfuuid]").each(function(){var e=$(this),n=e.attr("sfuuid");t[n]=e});_.each(this.fields,function(n){e._renderField(n,t[n.sfId])})},_renderField:function(t,n){t.setElement(n||this.$("span[sfuuid='"+t.sfId+"']"));try{t.render()}catch(r){e.logger.error("Failed to render "+t+" on "+this+"\n"+r);e.error.handleRenderError(this,"_renderField",t)}},_render:function(){if(e.acl.hasAccessToModel(this.action,this.model)){this._disposeFields();this._renderHtml();this._renderFields()}else{e.logger.info("Current user does not have access to this module view. name: "+this.name+" module:"+this.module);if(this.primary){e.error.handleRenderError(this,"view_render_denied")}}return this},_setLabels:function(){this.modulePlural=e.lang.getAppListStrings("moduleList")[this.module]||this.module;this.moduleSingular=e.lang.getAppListStrings("moduleListSingular")[this.module]||this.modulePlural},loadData:function(t,n){if(e.acl.hasAccess("read",this.module)){n=_.isUndefined(n)?true:n;if(n){this.context.set("fields",this.getFieldNames())}this.context.loadData(t)}},getFieldNames:function(t,n){var r=[];t=t||this.context.get("module");if(this.meta&&this.meta.panels){r=_.reduce(_.map(this.meta.panels,function(e){var t=_.flatten(_.compact(_.pluck(e.fields,"fields")));return _.pluck(e.fields,"name").concat(_.pluck(t,"name")).concat(_.flatten(_.compact(_.pluck(e.fields,"related_fields"))))}),function(e,t){return e.concat(t)},[])}r=_.compact(_.uniq(r));var i=e.metadata.getModule(t,"fields");if(i){r=_.reject(r,function(e){return _.isUndefined(i[e])});var a=[];_.each(r,function(e){if(i[e].type=="relate"){a.push(i[e].id_name)}else if(i[e].type=="parent"){a.push(i[e].id_name);a.push(i[e].type_name)}if(_.isArray(i[e].fields)){a=a.concat(i[e].fields)}});r=_.union(r,a)}return r},getFields:function(e,t){var n={};var r=this.getFieldNames(e);_.each(r,function(e){var r=this.getField(e,t);if(r){n[e]=r.def}},this);return n},getField:function(e,t){return _.find(this.fields,function(n){return n.name==e&&(!t||n.model==t)})},closestComponent:function(e){if(!this.layout){return}if(this.layout.name===e){return this.layout}return this.layout.closestComponent(e)},_show:function(){e.view.Component.prototype._show.call(this);_.each(this.fields,function(e){e.updateVisibleState(true)})},_hide:function(){e.view.Component.prototype._hide.call(this);_.each(this.fields,function(e){e.updateVisibleState(true)})},_dispose:function(){e.plugins.detach(this,"view");this._disposeFields();e.view.Component.prototype._dispose.call(this)},_disposeFields:function(){_.each(this.fields,function(e){e.dispose()});this.fields={}},toString:function(){return"view-"+this.name+"-"+e.view.Component.prototype.toString.call(this)},getFieldMeta:function(e,t){var n=_.flatten(_.pluck(this.meta.panels,"fields")),r=_.find(n,function(t){return t.name===e});if(!r&&t){r=_.find(_.flatten(_.pluck(n,"fields")),function(t){return t&&t.name===e});if(r){r._isChild=true}}return r},setFieldMeta:function(e,t){_.each(this.meta.panels,function(n){_.each(n.fields,function(r,i){if(r.name===e){n.fields[i]=_.extend(r,t)}else if(_.isArray(r.fields)){_.each(r.fields,function(n,i){if(n.name===e){r.fields[i]=_.extend(n,t)}})}})})}})})(SUGAR.App)},function(e,t){(function(e){e.view.Layout=e.view.Component.extend({initialize:function(t){e.plugins.attach(this,"layout");e.view.Component.prototype.initialize.call(this,t);this._components=[];this.meta=this.meta||{};this.type=this.meta.type||this.options.type;this.name=this.meta.name||this.options.name||this.type||"";if(this.meta.label){this.label=this.meta.label}else if(this.options.def&&this.options.def.label){this.label=this.options.def.label}else if(this.options.label){this.label=this.options.label}else{this.label=""}this.layout=this.options.layout;this.template=e.template.getLayout(this.name,this.module)||e.template.getLayout(this.type,this.module)||e.template.getLayout(this.name)||e.template.getLayout(this.type);if(this.template){this.$el.append(this.template(this,t));this.placeComponentsFromTemplate()}this.context.addFields(this.getFieldNames());if(this.meta.lazy_loaded){this._componentsMeta=this.meta.components;this.meta.components=[]}e.events.on("app:locale:change",function(){this.render()},this)},placeComponentsFromTemplate:function(){var e={};if(_.isEmpty(this._components)){return}this.$("span[cid]").each(function(){var t=$(this),n=t.attr("cid");e[n]=t});_.each(this._components,function(t){var n=e[t.cid];if(n){n.replaceWith(t.el)}},this)},initComponents:function(e,t,n){if(this.disposed){return}var r,i;e=e||this.meta.components;i=this._components.length;this._addComponentsFromDef(e,t,n);r=this._components.slice(i);_.each(r,function(e){if(_.isFunction(e.initComponents)){e.initComponents()}});this.trigger("init");return r},createComponentFromDef:function(t,n,r){n=n||this.context;r=r||this.module;if(t.context){if(t.context instanceof e.Context){n=t.context}else{n=n.getChildContext(t.context);n.prepare()}r=n.get("module")}if(t.view){if(_.isString(t.view)){return e.view.createView({context:n,name:t.view,def:t,module:r,loadModule:t.loadModule,primary:t.primary,layout:this})}else if(_.isObject(t.view)){return e.view.createView({context:n,module:r,loadModule:t.loadModule,meta:t.view.meta||t.view,type:t.view.type,name:t.view.name,primary:t.view.primary,layout:this})}}else if(t.layout){if(_.isString(t.layout)){return e.view.createLayout({context:n,name:t.layout,def:t,module:r,loadModule:t.loadModule,layout:this})}else if(_.isObject(t.layout)){return e.view.createLayout({context:n,module:r,loadModule:t.loadModule,meta:t.layout.meta||t.layout,type:t.layout.type,name:t.layout.name,def:t,layout:this})}}else{e.logger.warn("Invalid layout definition:\n"+t.layout)}},_addComponentsFromDef:function(e,t,n){e=e||[];_.each(e,function(e){if(e.initializedInTemplate){delete e.initializedInTemplate;return}if(e.view||e.layout){this.addComponent(this.createComponentFromDef(e,t,n),e)}},this)},addComponent:function(e,t){if(!e.layout)e.layout=this;this._components.push(e);this._placeComponent(e,t)},_placeComponent:function(e){this.$el.append(e.el)},removeComponent:function(e){var t=_.isNumber(e)?e:this._components.indexOf(e);if(t>-1){var n=this._components.splice(t,1);n[0].layout=null}},getComponent:function(e){return _.find(this._components,function(t){return t.name===e})},_render:function(){if(this._components&&this._components.length>0){_.each(this._components,function(e){e.render()},this)}else{e.logger.info("Can't render anything because the layout has no components: "+this.toString()+"\n"+"Either supply metadata or override Layout.render method")}return this},loadData:function(e,t){if(this.disposed){return}t=_.isUndefined(t)?true:t;if(t){this.context.set("fields",this.getFieldNames())}this.context.loadData(e);_.each(this._components,function(t){t.loadData(e,t.context!=this.context)},this)},getFieldNames:function(e){var t=[];e=e||this.module;_.each(this._components,function(n){if(n.module==e){t=_.union(t,n.getFieldNames(null,true))}},this);return t},getFields:function(e){var t={};_.each(this._components,function(n){_.extend(t,n.getFields(e))});return t},closestComponent:function(e){if(!this.layout){return}if(this.layout.name===e){return this.layout}return this.layout.closestComponent(e)},_show:function(){e.view.Component.prototype._show.call(this);_.each(this._components,function(e){e.updateVisibleState(true)})},_hide:function(){e.view.Component.prototype._hide.call(this);_.each(this._components,function(e){e.updateVisibleState(true)})},_dispose:function(){e.plugins.detach(this,"layout");this._disposeComponents();e.view.Component.prototype._dispose.call(this)},_disposeComponents:function(){_.each(this._components,function(e){e.dispose()});this._components=[]},toString:function(){return"layout-"+(this.options.type||this.options.name)+"-"+e.view.Component.prototype.toString.call(this)}})})(SUGAR.App)},function(e,t){(function(e){e.view.Field=e.view.Component.extend({fieldTag:"input",initialize:function(t){e.plugins.attach(this,"field");e.view.Component.prototype.initialize.call(this,t);this.sfId=t.sfId;this.view=t.view;this.name=this.options.def.name;this.type=this.options.def.type;if(this.model&&this.model.fields){var n=_.clone(this.model.fields[this.name]);this.def=n?_.extend(n,t.def):t.def}else{this.def=this.options.def}this.label=e.lang.get(this.def.label||this.def.vname||this.name,this.module);this.template=e.template.empty;if(this.model){this.model.on("error:validation:"+this.name,this.handleValidationError,this);this.model.on("validation:start attributes:revert",this.removeValidationErrors,this);this.model.on("acl:change:"+this.name,this.handleAclChange,this)}},viewFallbackMap:{edit:"detail"},handleAclChange:function(){this.action=void 0;this.render()},isLocked:function(){return this.model.isFieldLocked(this.name)},_checkAccessToAction:function(t){return e.acl.hasAccessToModel(t,this.model,this.name)},_getFallbackTemplate:function(e){return this.isDisabled()&&e==="disabled"?"edit":this.view.fallbackFieldTemplate||"detail"},_loadTemplate:function(){var t;var n=this.options.viewName||this.options.def.view||(this.view.meta&&this.view.meta.type?this.view.meta.type:this.view.name);var r=this.action;if(this.isDisabled()&&n==="edit"){n=this.action}else{r=this.action||(this.view.action&&this.view.name!=this.view.action?this.view.action:n)}while(n){if(this._checkAccessToAction(r))break;n=this.viewFallbackMap[n];r=n}if(n){var i=this.module||this.context.get("module");t=this._getFallbackTemplate(n);this.template=e.template.getField(this.type,n,i,t)||e.template.getField("base",n,i,t)||e.template.empty}else{this.template=e.template.empty}this.tplName=n;this.action=r},delegateEvents:function(e){e=e||_.result(this,"events")||(this.def?this.def.events:null);if(!e)return;e=_.clone(e);_.each(e,function(t,n){var r=this[t];if(!r&&_.isString(t)){r=_.bind(function(e){if(_.isFunction(this.triggerMetadataEvent)){this.triggerMetadataEvent(e,t)}},this);this["callback_"+n]=r;e[n]="callback_"+n}if(!_.isFunction(t)&&!r){delete e[n]}},this);Backbone.View.prototype.delegateEvents.call(this,e)},_render:function(){this._loadTemplate();if(this.model instanceof Backbone.Model){this.value=this.getFormattedValue()}this.dir=_.result(this,"direction");if(e.lang.direction===this.dir){delete this.dir}this.unbindDom();this.$el.html(this.template(this)||"");if(this.def&&this.def.css_class){this.getFieldElement().addClass(this.def.css_class)}this.$(this.fieldTag).attr("dir",this.dir);this.bindDomChange();return this},getFieldElement:function(){return this.$el},bindDomChange:function(){if(!(this.model instanceof Backbone.Model))return;var e=this;var t=this.$el.find(this.fieldTag);t.on("change",function(){e.model.set(e.name,e.unformat(t.val()))})},bindDataChange:function(){if(this.model){this.model.on("change:"+this.name,function(e,t){if(this.action==="edit"){this.$(this.fieldTag).val(this.format(t))}else{this.render()}},this)}},hasChanged:function(){return!_.isEqual(this.format(this.model.getSynced(this.name)),this.format(this.model.get(this.name)))},format:function(e){return e},unformat:function(e){return e},getFormattedValue:function(){return this.format(this.model.has(this.name)?this.model.get(this.name):null)},handleValidationError:function(e){},removeValidationErrors:function(){},getPlaceholder:function(){return new Handlebars.SafeString('<span sfuuid="'+this.sfId+'"></span>')},setDisabled:function(e){e=_.isUndefined(e)?true:e;if(e&&this.isDisabled()===false){this._previousAction=this.action;this.action="disabled";this.render()}else if(e===false&&this.isDisabled()){this.action=this._previousAction;delete this._previousAction;this.render()}},isDisabled:function(){return this.action==="disabled"},setViewName:function(e){this.options.viewName=e},setMode:function(e){if(this.isDisabled()){this._previousAction=e}else{this.action=e}this.setViewName(e);this.render()},unbindDom:function(){this.$el.find(this.fieldTag).off()},_dispose:function(){e.plugins.detach(this,"field");this.unbindDom();e.view.Component.prototype._dispose.call(this)},toString:function(){return"field-"+this.name+"-"+this.sfId+"-"+e.view.Component.prototype.toString.call(this)},_show:function(){this.getFieldElement().removeClass("hide").show();this.updateVisibleState(true)},_hide:function(){this.getFieldElement().addClass("hide").hide();this.updateVisibleState(false)},equals:function(e){return this.type===e.type&&_.isEqual(this.getFormattedValue(),e.getFormattedValue())},closestComponent:function(e){if(!this.view){return}if(this.view.name===e){return this.view}return this.view.closestComponent(e)}})})(SUGAR.App)},function(e,t){(function(e){e(window.jQuery||window.Zepto,SUGAR.App.date)})(function(e,t){var n=6e4,r=e([]),i;var a=function(){if(!r.length){return}i=setTimeout(a,n);s.update()};var s={update:function(n){n=n||r;n.each(function(n,i){var a=e(i),s=a.data("liveRelativeDate"),o;if(!s){r=r.not(i);return}o=s.date?a.data(s.date):a.attr("datetime");var l=a.html(),u=t(o).fromNow();if(l===u){return}var c=e.Event("change.liveRelativeDate");a.trigger(c,[l,u]);if(!c.isDefaultPrevented()){a.html(u)}})},pause:function(){clearTimeout(i);i=null},resume:function(){if(!i){a()}},interval:function(e){if(e===undefined){return n}n=e}};var o={add:function(e,t){if(!e||e.length===0){return e}t=t||{};e.data("liveRelativeDate",JSON.stringify(t));r=r.add(e);s.resume();return e},destroy:function(e){r=r.not(e);e.removeAttr("data-live-relative-date");return e},isLiveRelativeDate:function(t){var n=true;e.each(t,function(t){if(e(t).data("liveRelativeDate")===undefined){n=false;return true}});return n}};e.liverelativedate=s;e.fn.liverelativedate=function(e,t){if(!o[e]){t=e;e="add"}return o[e](this,t)}})},function(e,t){if(typeof SUGAR=="undefined")SUGAR={};if(typeof SUGAR.util=="undefined")SUGAR.util={};if(typeof SUGAR.expressions=="undefined")SUGAR.expressions={};(function(){SUGAR.util.extend=SUGAR.util.extend||(SUGAR.App?SUGAR.App.utils.extendFrom:null);var e=SUGAR.expressions.Expression=function(e){this.context=e};e.INFINITY=-1;e.STRING_TYPE="string";e.NUMERIC_TYPE="number";e.DATE_TYPE="date";e.TIME_TYPE="time";e.BOOLEAN_TYPE="boolean";e.ENUM_TYPE="enum";e.RELATE_TYPE="relate";e.GENERIC_TYPE="generic";e.TRUE="true";e.FALSE="false";e.isTruthy=function(t){return _.isString(t)?t=="1"||t==e.TRUE:!!t};SUGAR.expressions.NumericConstants={pi:3.14159265,e:2.718281828459045};e.prototype.init=function(e){if(e instanceof Array&&e.length==1){this.params=e[0]}else{this.params=e}this.validateParameters()};e.prototype.getParameters=function(){if(!this.params){return this.params}var n,r,i=[],a=this.getParameterTypes(),s=this.getParamCount()==1,o,l;if(s||!_.isArray(this.params)&&_.isObject(this.params)){n=[this.params]}else{n=this.params}if(!(a instanceof Array)){o=a;a=[];for(l=0;l<n.length;l++){a.push(o)}}var u=this.constructor.TYPE_CAST_MAP;for(l=0;l<n.length;l++){r=n[l];if(r instanceof e){o=t.prototype.getType(r);if(o!=a[l]&&a[l]in u){r=new SUGAR.expressions[u[a[l]]](r,this.context)}}i.push(r)}if(s){i=i.shift()}return i};e.prototype.validateParameters=function(){var t=this.params;var n=this.getParamCount();var r=this.getParameterTypes();if(typeof n!="number"){throw this.getClass()+": Number of paramters required must be a number"}if(typeof r!="string"&&!(r instanceof Array)){throw this.getClass()+": Parameter types must be valid and match the parameter count"}if(r instanceof Array&&n!=e.INFINITY&&n!=r.length){throw this.getClass()+": Parameter types must be valid and match the parameter count"}if(typeof r=="string"){if(e.TYPE_MAP[r]==null){throw this.getClass()+": Invalid type requirement '"+r+"'"}}else{for(var i=0;i<r.length;i++){if(typeof e.TYPE_MAP[r[i]]=="undefined"){throw this.getClass()+": Invalid type requirement '"+r[i]+"'"}}}if(n==0&&typeof t=="undefined"){return}if(n==1&&this.isProperType(t,r)){return}if(n>1&&!(t instanceof Array)){throw this.getClass()+": Requires exactly "+n+" parameter(s)"}if(n==1&&t instanceof Array){throw this.getClass()+": Requires exactly 1 parameter"}if(n!=e.INFINITY&&t instanceof Array&&t.length!=n){throw this.getClass()+": Requires exactly "+n+" parameter(s)"}if(typeof r=="string"){if(!(t instanceof Array)){if(this.isProperType(t,r)){return}throw this.getClass()+": Parameter must be of type '"+r+"'"}for(var i=0;i<t.length;i++){if(!this.isProperType(t[i],r)){throw this.getClass()+": All parameters must be of type '"+r+"'"}}}else{if(!(t instanceof Array)){if(this.isProperType(t,r[0])){return}throw this.getClass()+": Parameter must be of type '"+r[0]+"'"}for(var i=0;i<r.length;i++){if(!this.isProperType(t[i],r[i])){throw this.getClass()+": The parameter at index "+i+" must be of type "+r[i]}}}};e.prototype.getParamCount=function(){return e.INFINITY};e.prototype.isProperType=function(t,n){var r=e;if(n instanceof Array){return false}var i=r.TYPE_MAP[n];if(typeof i=="undefined"||i==null||i==""){return false}if(t instanceof i||t instanceof r.TYPE_MAP.generic||n==r.GENERIC_TYPE)return true;if(t instanceof r){t=t.evaluate()}switch(n){case r.STRING_TYPE:return typeof t=="string"||typeof t=="number"||t instanceof r.TYPE_MAP[r.NUMERIC_TYPE];break;case r.NUMERIC_TYPE:return typeof t=="number"||SUGAR.expressions.isNumeric(t);break;case r.BOOLEAN_TYPE:return t==r.TRUE||t==r.FALSE||t===1||t===0||t==="1"||t==="0"||t==="";break;case r.DATE_TYPE:case r.TIME_TYPE:if(t===null||t===""||typeof t=="string"&&SUGAR.util.DateUtils.guessFormat(t))return true;break;case r.RELATE_TYPE:return true;break}return false};e.prototype.evaluate=function(){};e.prototype.getClass=function(e){for(var t in SUGAR.FunctionMap){if(typeof SUGAR.FunctionMap[t]=="function"&&SUGAR.FunctionMap[t].prototype&&this instanceof SUGAR.FunctionMap[t])return t}return false};e.prototype.getParameterTypes=function(){};SUGAR.expressions.GenericExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.GenericExpression,e,{getParameterTypes:function(){return e.GENERIC_TYPE}});SUGAR.expressions.NumericExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.NumericExpression,e,{getParameterTypes:function(){return e.NUMERIC_TYPE}});SUGAR.expressions.StringExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.StringExpression,e,{getParameterTypes:function(){return e.STRING_TYPE}});SUGAR.expressions.BooleanExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.BooleanExpression,e,{getParameterTypes:function(){return e.BOOLEAN_TYPE}});SUGAR.expressions.EnumExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.EnumExpression,e,{getParameterTypes:function(){return e.ENUM_TYPE}});SUGAR.expressions.DateExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.DateExpression,e,{getParameterTypes:function(){return e.DATE_TYPE}});SUGAR.expressions.TimeExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.TimeExpression,e,{getParameterTypes:function(){return e.TIME_TYPE}});SUGAR.expressions.RelateExpression=function(e){};SUGAR.util.extend(SUGAR.expressions.RelateExpression,e,{getParameterTypes:function(){return e.GENERIC_TYPE}});e.TYPE_MAP={number:SUGAR.expressions.NumericExpression,string:SUGAR.expressions.StringExpression,date:SUGAR.expressions.DateExpression,time:SUGAR.expressions.TimeExpression,"boolean":SUGAR.expressions.BooleanExpression,"enum":SUGAR.expressions.EnumExpression,relate:SUGAR.expressions.RelateExpression,generic:SUGAR.expressions.GenericExpression};e.TYPE_CAST_MAP={number:"ValueOfExpression",string:"DefineStringExpression"};SUGAR.expressions.ConstantExpression=function(e){this.init(e)};SUGAR.util.extend(SUGAR.expressions.ConstantExpression,SUGAR.expressions.NumericExpression,{evaluate:function(){return this.getParameters()},getParamCount:function(){return 1}});SUGAR.expressions.StringLiteralExpression=function(e){this.init(e)};SUGAR.util.extend(SUGAR.expressions.StringLiteralExpression,SUGAR.expressions.StringExpression,{evaluate:function(){return this.getParameters()},getParamCount:function(){return 1}});SUGAR.expressions.FalseExpression=function(e){this.init(e)};SUGAR.util.extend(SUGAR.expressions.FalseExpression,SUGAR.expressions.BooleanExpression,{evaluate:function(){return e.FALSE},getParamCount:function(){return 0}});SUGAR.expressions.TrueExpression=function(e){this.init(e)};SUGAR.util.extend(SUGAR.expressions.TrueExpression,SUGAR.expressions.BooleanExpression,{evaluate:function(){return e.TRUE},getParamCount:function(){return 0}});var t=SUGAR.expressions.ExpressionParser=function(){};t.prototype.getFieldsFromExpression=function(e){return _.map(e.match(/\$(\w+)/g),function(e){return e.replace(/\$/g,"")})};t.prototype._generateRange=function(e,t,n){var r="";var i=parseInt(t);if(typeof n=="undefined")while(this.getElement(e+""+i)!=null)r+="$"+e+""+i++ +",";else for(;i<=n;i++){var a=e+""+i;if(this.getElement(a)!=null)r+="$"+a+","}return r.substring(0,r.length-1)};t.prototype._valueReplace=function(e){if(!/^\$.*$/.test(e)){return e}return this.getValue(e.substring(1))};t.prototype._performRangeReplace=function(e){var t=false;var n;var r;for(var i=0;;i++){if(i==e.length)break;var a=e.charAt(i);if(a=='"'&&n!="\\")t=!t;if(!t&&a=="%"){r=true;var s=e.indexOf("[",i+1);var o=e.indexOf(",",s);var l=e.indexOf("]",s);if(s<0||l<0)throw"Invalid range syntax";var u=e.substring(i+1,s);var c,f;if(o>-1&&o<l){c=e.substring(s+1,o);f=e.substring(o+1,l)}else{c=e.substring(s+1,l)}if(o>-1&&o<l)f=e.substring(o+1,l);var d=this._generateRange(u,this._valueReplace(c),this._valueReplace(f));if(typeof f=="undefined")e=e.replace("%"+u+"["+c+"]",d);else e=e.replace("%"+u+"["+c+","+f+"]",d);i=i+d.length-1}n=a}return e};t.prototype.validate=function(e){if(typeof e!="string")throw"ExpressionParser requires a string expression.";var t=this.toConstant(e);if(t!=null&&typeof t!="undefined")return true;if(/^[\w\-]+\(.*\)$/.exec(e)==null){throw"Syntax Error (Expression Format Incorrect '"+e+"' )"}if(e.indexOf("(")<0)throw"Syntax Error (No opening paranthesis found)";return true};t.prototype.tokenize=function(e){var t=this.toConstant(e);if(t!=null&&typeof t!="undefined"){return{type:"constant",returnType:this.getType(t),value:t.evaluate()}}if(/^[$]\w+$/.test(e)){return{type:"variable",name:$.trim(e).substr(1)}}if(/^[$]\w+\.\w+$/.test(e)){e=$.trim(e);return{type:"variable",name:e.substr(1,e.indexOf(".")-1),relate:e.substr(e.indexOf(".")+1)}}var n=e.indexOf("(");if(n<1)throw e+": Syntax Error, no open parentheses found";if(e.charAt(e.length-1)!=")")throw e+": Syntax Error, no close parentheses found";var r=e.substring(0,n);var i=e.substring(n+1,e.length-1);var a=0;var s=i.length;var o="";var l=new Array;var u=null;var c=null;var f=false;var d=false;var h=false;var p=false;for(var m=0;m<=s;m++){c=u;d=false;if(m==s){o=$.trim(o);if(o!="")l[l.length]=this.tokenize(o);break}p=c=="\\";u=i.charAt(m);if(h&&u!='"'&&!p){o+=u;continue}if(u=='"'&&!p&&a==0){if(h){var g=i.indexOf(",",m);if(g<0)g=i.length-1;var _=m<s-1?m+1:s-1;var v=i.substring(_,g);if(/^\s*$/.exec(v)==null)throw r+": Syntax Error (Improperly Terminated String '"+v+"')"+_+" "+g}h=!h}if(u=="("){a++}else if(u==")"){a--}else if(u==","&&a==0){o=$.trim(o);if(o=="")throw"Syntax Error: Unexpected ','";l[l.length]=this.tokenize(o);o="";d=true;continue}o+=u}if(h)throw"Syntax Error (Unterminated String Literal)";if(a!=0)throw"Syntax Error (Incorrectly Matched Parantheses)";if(d)throw"Syntax Error (No parameter after comma near <b>"+r+"</b>)";return{type:"function",name:$.trim(r),args:l}};t.prototype.getType=function(t){for(var n in e.TYPE_MAP){if(t instanceof e.TYPE_MAP[n]){return n}}return false};t.prototype.evaluate=function(e,t){if(typeof e!="string")throw"ExpressionParser requires a string expression.";e=e.replace(/^\s+|\s+$|\n/g,"");var n=this.toConstant(e);if(n!=null&&typeof n!="undefined")return n;if(e.match(/^\$\w+$/)){if(typeof t=="undefined")throw"Syntax Error: variable "+e+" without context";return t.getValue(e.substring(1))}if(e.match(/^\$\w+\.\w+$/)){return t.getRelatedValue(e.substr(1,e.indexOf(".")-1),e.substr(e.indexOf(".")+1))}if(/^[\w\-]+\(.*\)$/.exec(e)==null){throw"Syntax Error (Expression Format Incorrect '"+e+"' )"}var r=e.indexOf("(");if(r<0)throw"Syntax Error (No opening paranthesis found)";var i=e.substring(0,r);if(SUGAR.FunctionMap[i]==null)throw i+": No such function defined";var a=e.substring(r+1,e.length-1);var s=0;var o=a.length;var l="";var u=new Array;var c=null;var f=null;var d=false;var h=false;var p=false;var m=false;if(o>0){for(var g=0;g<=o;g++){f=c;if(g==o){u[u.length]=this.evaluate(l,t);break}p=f=="\\";c=a.charAt(g);if(h&&c!='"'&&!p){l+=c;continue}if(m&&(c==" "||c==","))m=false;if(c=='"'&&!p&&s==0){if(h){var _=a.indexOf(",",g);if(_<0)_=a.length-1;var v=g<o-1?g+1:o-1;var y=a.substring(v,_);if(/^\s*$/.exec(y)==null)throw i+": Syntax Error (Improperly Terminated String '"+y+"')"+v+" "+_}h=!h}if(c=="$"&&!p&&!h&&s==0){if(m)throw i+": Syntax Error (unexpeted '$' in  '"+l+"')";else{m=true}}if(c=="("){s++}else if(c==")"){s--}else if(c==","&&s==0){u[u.length]=this.evaluate(l,t);l="";continue}l+=c}}if(h)throw"Syntax Error (Unterminated String Literal)";if(s!=0)throw"Syntax Error (Incorrectly Matched Parantheses)";return new SUGAR.FunctionMap[i](u,t)};t.prototype.toConstant=function(e){if(isFinite(e)&&!isNaN(parseFloat(e))){return new SUGAR.expressions.ConstantExpression(parseFloat(e))}var t=SUGAR.expressions.NumericConstants[e];if(t!=null&&typeof t!="undefined")return new SUGAR.expressions.ConstantExpression(parseFloat(t));if(/^"[\s\S]*"$/.exec(e)!=null){e=e.substring(1,e.length-1);return new SUGAR.expressions.StringLiteralExpression(e)}if(e==""){return new SUGAR.expressions.StringLiteralExpression(e)}if(e=="true"){return new SUGAR.expressions.TrueExpression}else if(e=="false"){return new SUGAR.expressions.FalseExpression}if(/^(0[0-9]|1[0-2])\/([0-2][0-9]|3[0-1])\/[0-3][0-9]{3,3}$/.exec(e)!=null){var n=parseFloat(e.substring(0,2));var r=parseFloat(e.substring(3,2));var i=parseFloat(e.substring(6,4));return new SUGAR.DateExpression([n,r,i])}if(/^([0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9]$/.exec(e)!=null){var a=parseFloat(e.substring(0,2));var s=parseFloat(e.substring(3,2));var o=parseFloat(e.substring(6,2));return new SUGAR.TimeExpression([a,s,o])}return null};t.prototype.getRelatedFieldsFromFormula=function(e,t){var n=[],r=["related","count","rollupSum","rollupMax","rollupMin","rollupAve","rollupAvg","rollupCurrencySum","rollupConditionalSum","countConditional","maxRelatedDate"];var i=function(e,t){if(e.type=="variable"&&e.relate){n.push({type:"related",link:e.name,relate:e.relate})}else if(e.type=="function"&&r.indexOf(e.name)!=-1){switch(e.name){case"related":if(e.args[1].type=="constant")n.push({type:"related",link:e.args[0].name,relate:e.args[1].value});break;case"rollupConditionalSum":var a={type:"rollupConditionalSum",link:e.args[0].name,relate:e.args[1].value,condition_field:e.args[2].value};if(e.args[3].type=="function"){var s=[];for(var o=0;o<e.args[3].args.length;o++){s.push('"'+e.args[3].args[o].value+'"')}a.condition_expr=e.args[3].name+"("+s.join(",")+")"}else{a.condition_expr=e.args[3].value}n.push(a);break;case"countConditional":var a={target:t,type:"countConditional",link:e.args[0].name,condition_field:e.args[1].value};if(e.args[2].type=="function"){var s=[];for(var o=0;o<e.args[2].args.length;o++){s.push('"'+e.args[2].args[o].value+'"')}a.condition_expr=e.args[2].name+"("+s.join(",")+")"}else{a.condition_expr=e.args[2].value}n.push(a);break;case"count":n.push({type:"count",link:e.args[0].name});break;default:if(e.args[1].type=="constant"){n.push({type:e.name,link:e.args[0].name,relate:e.args[1].value})}}}else if(e.type=="function"){for(var o=0;o<e.args.length;o++){i(e.args[o],t)}}};try{var a=this.tokenize(e);i(a,t)}catch(s){}return n};var n=SUGAR.expressions.ExpressionContext=function(){};n.prototype.getValue=function(e){return""};n.prototype.setValue=function(e,t){return""};n.prototype.addListener=function(e,t,n){return""};n.prototype.getRelatedValue=function(e,t){return new SUGAR.RelatedFieldExpression([new SUGAR.expressions.StringLiteralExpression(e),new SUGAR.expressions.StringLiteralExpression(t)])};SUGAR.expressions.isNumeric=function(e){if(typeof e!="number"&&typeof e!="string"){return false}e=SUGAR.expressions.unFormatNumber(e);return isFinite(e)&&!isNaN(parseFloat(e))};SUGAR.expressions.unFormatNumber=function(e){if(typeof e=="string"){var t=SUGAR.expressions;var n=",",r=".";if(t.userPrefs){n=t.userPrefs.num_grp_sep;r=t.userPrefs.dec_sep}e=t.replaceAll(e,n,"");e=t.replaceAll(e,r,".")}return e};SUGAR.expressions.replaceAll=function(e,t,n){if(t==n||e==""||t=="")return e;var r=e;while(r.indexOf(t)>-1){r=r.replace(t,n)}return r};SUGAR.util.DateUtils={parse:function(e,t){if(e instanceof Date)return e;if(t=="user"){if(SUGAR.expressions.userPrefs&&SUGAR.expressions.userPrefs.datef){t=SUGAR.expressions.userPrefs.datef+" "+SUGAR.expressions.userPrefs.timef}else{t=SUGAR.util.DateUtils.guessFormat(e);

}}if(t==null||t==""){t=SUGAR.util.DateUtils.guessFormat(e)}if(t==false){if(/^\d+$/.test(e))return new Date(e);return false}var n=new Date("Jan 1, 1970 00:00:00");var r="";var i=$.trim(e);t=$.trim(t)+" ";for(var a=0;a<t.length;a++){var s=t.charAt(a);if(s==":"||s=="/"||s=="-"||s=="."||s==" "||s=="a"||s=="A"||s=="T"){var o=i.indexOf(s);if(o==-1)o=i.length;var l=i.substring(0,o);i=i.substring(o+1);switch(r){case"m":if(!(l>0&&l<13))return false;n.setMonth(l-1);break;case"d":if(!(l>0&&l<32))return false;n.setDate(l);break;case"Y":if(!(l>0))return false;n.setYear(l);break;case"h":var u=t.substring(t.length-4);if(u.toLowerCase()=="i a "||u.toLowerCase()==s+"ia "){if(i.substring(i.length-2).toLowerCase()=="pm"){l=l*1;if(l<12){l+=12}}}case"H":n.setHours(l);break;case"i":l=l.substring(0,2);n.setMinutes(l);break}r=""}else{r=s}}return n},guessFormat:function(e){if(typeof e!="string")return false;var t="";var n;if(e.indexOf(" ")!=-1){n=" "}else if(e.indexOf("T")!=-1){n="T"}if(n){t=e.substring(e.indexOf(n)+1,e.length);e=e.substring(0,e.indexOf(n))}var r="/";if(e.indexOf("/")!=-1){}else if(e.indexOf("-")!=-1){r="-"}else if(e.indexOf(".")!=-1){r="."}else{return false}var i=e.split(r);var a="";var s=new Date("Jan 1, 1970 00:00:00");if(i[0].length==4){a="Y"+r+"m"+r+"d"}else if(i[2].length==4){a="m"+r+"d"+r+"Y"}else{return false}if(t!=""){var o="";var l=":";if(t.indexOf(".")==2){l="."}if(t.indexOf(" ")!=-1){var u=t.split(" ");if(u[1]=="am"||u[1]=="pm"){return a+n+"h"+l+"i a"}else if(u[1]=="AM"||u[1]=="PM"){return a+n+"h"+l+"i A"}}else{var c=t.substring(t.length-2,t.length);if(c=="AM"||c=="PM"){return a+n+"h"+l+"iA"}if(c=="am"||c=="pm"){return a+n+"h"+l+"iA"}return a+n+"H"+l+"i"}}return a},formatDate:function(e,t,n){if(!n&&SUGAR.expressions.userPrefs.datef&&SUGAR.expressions.userPrefs.timef){if(t)n=SUGAR.expressions.userPrefs.datef+" "+SUGAR.expressions.userPrefs.timef;else n=SUGAR.expressions.userPrefs.datef}var r="";for(var i=0;i<n.length;i++){var a=n.charAt(i);switch(a){case"m":var s=e.getMonth()+1;r+=s<10?"0"+s:s;break;case"d":var o=e.getDate();r+=o<10?"0"+o:o;break;case"Y":r+=e.getFullYear();break;case"H":case"h":var l=e.getHours();if(a=="h")l=l>12?l-12:l;r+=l<10?"0"+l:l;break;case"i":var s=e.getMinutes();r+=s<10?"0"+s:s;break;case"a":if(e.getHours()<12)r+="am";else r+="pm";break;case"A":if(e.getHours()<12)r+="AM";else r+="PM";break;default:r+=a}}return r},roundTime:function(e){var t=e.getMinutes();if(t<1){t=0}else if(t<16){t=15}else if(t<31){t=30}else if(t<46){t=45}else{t=0;e.setHours(e.getHours()+1)}e.setMinutes(t);return e},getUserTime:function(){var e=new Date;if(SUGAR.expressions.userPrefs&&typeof SUGAR.expressions.userPrefs.gmt_offset!="undefined"){var t=SUGAR.expressions.userPrefs.gmt_offset;e.setMinutes(e.getMinutes()+(e.getTimezoneOffset()+t))}return e}}})()},function(e,t){(function(){SUGAR.forms=SUGAR.forms||{};SUGAR.forms.animation=SUGAR.forms.animation||{};var e=SUGAR.expressions,t=e.SidecarExpressionContext=function(e){this.view=e;this.model=e.model||e.context.get("model")};SUGAR.util.extend(t,e.ExpressionContext,{getValue:function(n){var r=this.model.get(n),i=this.model.fields[n],a;if(i.type=="link")r=n;if(typeof r=="string"){r=r.replace(/\n/g,"");if(/^(\s*)$/.exec(r)!=null||r===""){a=t.parser.toConstant('""')}else if(i.type!=="currency"&&i.type!=="enum"&&e.isNumeric(r)){a=t.parser.toConstant(e.unFormatNumber(r))}else if(i.type=="date"||i.type=="datetime"){r=App.date.stripIsoTimeDelimterAndTZ(r);r=App.date.parse(r);r.type=i.type;a=this.getDateExpression(r)}else{a=t.parser.toConstant('"'+r+'"')}}else if(typeof r=="object"&&r!=null&&r.getTime){a=this.getDateExpression(r)}else if(typeof r=="number"){a=t.parser.toConstant(""+r)}else if(_.isBoolean(r)){a=r?new SUGAR.expressions.TrueExpression:new SUGAR.expressions.FalseExpression}else{a=t.parser.toConstant('""')}return a},setValue:function(e,t){if(typeof this.model.fields[e]!="object"){return}var n=this.model.fields[e];this.lockedFields=this.lockedFields||[];if(typeof t=="object"&&t.length>0&&n.type!="multienum"){t=t.join(", ")}else if(t&&n.type==="date"){t=App.date(t).formatServer(true)}else if(t&&n.type==="datetimecombo"){t=App.date(t).format()}if(n.type=="bool"&&_.isString(t)){t=SUGAR.expressions.Expression.isTruthy(t)}if(t&&(n.type==="decimal"||n.type==="float")){t=App.utils.formatNumber(t,n.round||6,n.precision||6,null,null)}if(_.isString(t)&&n.len&&t.length>n.len){var r=this;t=t.substring(0,n.len);this.model.once("change:"+e,function(){var t=SUGAR.App.lang.getAppString("LBL_FIELD_TRIMMED");SUGAR.forms.markField(e,r.getElement(e),t)})}else if(SUGAR.forms.markedField[e]){SUGAR.forms.unmarkField(e,this.getElement(e))}if(!this.lockedFields[e]){this.lockedFields[e]=true;var i=this.getElement(e);if(i){SUGAR.forms.FlashField($(i).parents('[data-fieldname="'+e+'"]'),null,e)}var a=this.model.set(e,t);this.lockedFields=[];return a}},addListener:function(e,t,n){if(this.view.collection){this.view.collection.off("change:"+e,t,n);this.view.collection.on("change:"+e,t,n)}else{this.model.off("change:"+e,t,n);this.model.on("change:"+e,t,n)}},getElement:function(e){var t=this.getField(e);if(t&&t.el)return t.el},getField:function(e){return this.view.getField(e,this.model)},addClass:function(e,t,n){var r=this.view.getFieldMeta(e,true),i=n?["css_class","cell_css"]:["css_class"],a=this.getElement(e),s=$(a).closest("div.record-cell");_.each(i,function(e){if(!r[e]){r[e]=t}else if(r[e].indexOf(t)==-1){r[e]+=" "+t}});this.view.setFieldMeta(e,r);$(a).addClass(t);if(!r._isChild&&n&&s){s.addClass(t)}},removeClass:function(e,t,n){var r=this.view.getFieldMeta(e,true),i=this.view.getField(e),a=n?["css_class","cell_css"]:["css_class"],s=this.getElement(e),o=$(s).closest("div.record-cell");_.each([i.def,r],function(e){_.each(a,function(n){if(e[n]&&e[n].indexOf(t)!=-1){e[n]=$.trim((" "+e[n]+" ").replace(new RegExp(" "+t+" "),""))}})});this.view.setFieldMeta(e,r);$(s).removeClass(t);if(!r._isChild&&n&&o){o.removeClass(t);o.find("."+t).removeClass(t)}},getLink:function(e){var t=this.model;if(t&&t.fields&&t.fields[e])return t.fields[e]},showError:function(e,t){},clearError:function(e){},setStyle:function(e,t){},setRelatedFields:function(e,t){t=!!t;var n=this.model;for(var r in e){var i=n.get(r),a=!!i,s=i||{};_.each(e[r],function(e,t){if(_.isObject(e)){s[t]=_.extend(s[t]||{},e)}else{s[t]=e}});var o={};o[r]=s;n.set(o,{silent:t});if(!t&&a){n.trigger("change:"+r,n)}}},getRelatedFieldValues:function(e,t,n,r){var i=this,a=App.api;if(e.length>0){t=t||this.model.module||this.view.context.get("module");n=n||this.model.get("id");for(var s=0;s<e.length;s++){var o=e[s].link,l={};if(e[s].type=="related"){var u=this.model.fields[o];if(u&&u.id_name&&u.module){var c=this.model.get(u.id_name);if(c){e[s].relId=c;e[s].relModule=u.module}}}if(e[s].relate){l[o]={};l[o][e[s].type]={};l[o][e[s].type][e[s].relate]="";i.setRelatedFields(l,true)}}var f={id:n,action:"related"},d={module:t,fields:JSON.stringify(e)};a.call("read",a.buildURL("ExpressionEngine","related",f,d),f,d,{success:function(e){i.setRelatedFields(e,r);return e}})}return null},updateRelatedFieldValue:function(e,t,n,r,i){var a=this.model.get(e)||{},i=i||false,s={};if(!_.isUndefined(a[t])||i){if(!n){a[t]=r}else if(!i&&!_.isUndefined(a[t][n])){a[t][n]=r}else if(i){if(_.isUndefined(a[t])){a[t]={}}a[t][n]=r}}s[e]=a;this.setRelatedFields(s,true)},getRelatedField:function(e,t,n){var r=this.model.get(e)||{};if(t=="related"&&!this.inCollection){return this._handleRelateExpression(e,n)}if(typeof r[t]!="undefined"){if(!n){return r[t]}else if(typeof r[t][n]!="undefined"){return r[t][n]}}if(this.inCollection){r[t]=r[t]||{};r[t][n]=r[t][n]||"";this.model.set(e,r,{silent:true});return""}if(!this.model.get("id")){return""}var i={link:e,type:t};if(n){i.relate=n}this.getRelatedFieldValues([i]);if(typeof r[t]=="undefined")return"";return r[t]},_handleRelateExpression:function(e,t){this.view.context.set("model",this.model);var n=this.view.context.getChildContext({link:e});n.prepare();var r=n.get("collection"),i=n.get("fields")||[],a=this,s=_.find(this.model.fields,function(t){return t.type&&t.type=="relate"&&t.id_name&&t.link&&t.link==e}),o=n.get("model");if(n.isDataFetched()&&!n.get("modelId")){o=r.length>0?r.models[0]:null}if(s&&(!this.model.get(s.id_name)||o&&o.get("id")!=this.model.get(s.id_name))){n.set({model:null});n.resetLoadFlag();if(!this.model.get(s.id_name))return""}if(_.isUndefined(this.view._loadedRelatedFields)){this.view._loadedRelatedFields={}}var l=e+"_"+t+"_"+this.model.get(s.id_name);if(t&&(!n.isDataFetched()||o&&_.isUndefined(o.get(t)))&&!this.view._loadedRelatedFields.hasOwnProperty(l)){_.each(i,_.bind(function(t){var n=e+"_"+t+"_"+this.model.get(s.id_name);this.view._loadedRelatedFields[n]=n},this));if(!_.contains(i,t)){i.push(t)}this._loadRelatedData(e,i,n,s);this.addListener(s.id_name,function(){this.view._loadedRelatedFields={}},this)}else if(o){var u=o.get(t);if(u){var c=o.fields[t];if(c.type=="date"||c.type=="datetime"){u=App.date.stripIsoTimeDelimterAndTZ(u);u=App.date.parse(u);u.type=c.type}}return u}else if(!r.page){var f=this.model;SUGAR.App.utils.doWhen(function(){return r.page>0},function(){f.trigger("change:"+e,f)})}return""},getDateExpression:function(t){var n=new e.DateExpression("");n.evaluate=function(){return this.value};n.value=t;return n},_loadRelatedData:function(e,t,n,r){var i=this;if(r&&this.model.get(r.id_name)){var a=this.model.get(r.id_name),s=n.get("model")||SUGAR.App.data.createRelatedBean(this.model,this.model.get(r.id_name),e);n.set({modelId:a,model:s})}else{if(_.isEmpty(this.model.get("id")))return""}n.prepare();n.set({fields:_.union(n.get("fields")||[],t),skipFetch:false});if(n.isDataFetched()){n.resetLoadFlag()}var s=this.model;n.loadData({relate:!r,success:function(){s.trigger("change:"+e,s)}})},_setupLinks:function(e){_.each(e,function(e){if(e.link&&e.relate&&e.type=="related"){var t=this.view.context.getChildContext({link:e.link});if(t){t.set("fields",_.union(t.get("fields")||[],[e.relate]))}}},this)},_requestRollups:function(e){if(this.model.get("id")){this.getRelatedFieldValues(e,null,null,true)}},fireOnLoad:function(e){},getAppListStrings:function(e){return SUGAR.App.lang.getAppListStrings(e)},parseDate:function(e,t){return SUGAR.App.date.parse(e)},setFieldDisabled:function(e,t){t=_.isUndefined(t)?true:t;var n=this.getField(e);if(n){n.setDisabled(t);this.view.$(".record-edit-link[data-name="+e+"]").toggleClass("hide",t);if(_.isEqual(t,false)&&!_.isEqual(n.currentState,"edit")&&_.isEqual(this.view.currentState,"edit")&&!_.isEqual(this.view.inlineEditMode,true)){n.setMode("edit");this.view.editableFields.push(n)}if(_.isFunction(this.view.setEditableFields)){this.view.setEditableFields()}}},setFieldVisibility:function(e,t){var n="vis_action_hidden",r="record-panel-content",i=this.view.getField(e,this.model);this.requiredFields=this.requiredFields||[];this.requiredInvisibleFields=this.requiredInvisibleFields||[];this.visibleFields=this.visibleFields||[];if(_.isUndefined(this.requiredFields[e])){this.requiredFields[e]=i.def.required}if(t){this.addClass(e,n,true);if(i.def.required===true){this.setFieldRequired(e,false)}this.visibleFields[e]=!t}else{this.removeClass(e,n,true);this.visibleFields[e]=!t;if(i.def.required===false&&(this.requiredInvisibleFields[e]||this.requiredFields[e])){delete this.requiredInvisibleFields[e];this.setFieldRequired(e,true)}}},setFieldRequired:function(e,t){var t=SUGAR.expressions.Expression.isTruthy(t),n=this.view.getField(e,this.model);this.requiredFields=this.requiredFields||[];this.requiredInvisibleFields=this.requiredInvisibleFields||[];this.visibleFields=this.visibleFields||[];this.requiredFields[e]=n.def.required;if(n){if(_.isUndefined(this.visibleFields[e])||this.visibleFields[e]===true){n.def.required=t;n.render()}else{this.requiredInvisibleFields[e]=t}}},setAssignedUserName:function(e,t){if(this.model.has("assigned_user_name")&&this.model.has("assigned_user_id")){var n=this,r={},i=SUGAR.App.data.createBeanCollection("Users");r.filter={filter:[{user_name:t}]};r.success=function(t){var r=t.first();if(r){n.model.set({assigned_user_name:r.get("full_name"),assigned_user_id:r.get("id")});var i=n.view.getField(e,n.model);if(i&&i.el){SUGAR.forms.FlashField(i.el,null,e)}}};r.error=function(){SUGAR.App.alert.show("server-error",{level:"error",title:SUGAR.App.lang.get("ERR_GENERIC_TITLE"),messages:SUGAR.App.lang.get("ERR_ASSIGNTO_ACTION")})};i.fetch({fields:["full_name"],limit:1,params:r.filter,success:r.success,error:r.error})}},setModel:function(e){this.model=e},setRelatedModel:function(e){this.relatedModel=e},add:function(e,t){return SUGAR.App.math.add(e,t,6,true)},subtract:function(e,t){return SUGAR.App.math.sub(e,t,6,true)},multiply:function(e,t){return SUGAR.App.math.mul(e,t,6,true)},divide:function(e,t){return SUGAR.App.math.div(e,t,6,true)},round:function(e,t){return SUGAR.App.math.round(e,t,true)},getLinkContext:function(e,t){var n=e.context.getChildContext({link:t});n.prepare();return n}});t.parser=new SUGAR.expressions.ExpressionParser;t.evalVariableExpression=function(e,n){return t.parser.evaluate(e,new t(n))};SUGAR.forms.Dependency=function(e,t,n,r,i){this.actions=t;this.falseActions=n;this.context=i;this.testOnLoad=r;e.setContext(this.context);e.setDependency(this);this.trigger=e;if(r){i.fireOnLoad(this)}};SUGAR.forms.Dependency.fromMeta=function(t,n){var r=t.trigger||"true",i=t.triggerFields||e.ExpressionParser.prototype.getFieldsFromExpression(r),a=t.relatedFields||[],s=t.actions||[],o=t.notActions||[],l=t.onload||false,u=n.model&&_.isEmpty(n.model.get("id")),c=[],f=[];if(_.isEmpty(i)&&!l&&!u)return null;if(_.isEmpty(s)&&_.isEmpty(o))return null;_.each(s,function(e){if(!e.action||!SUGAR.forms[e.action+"Action"])return;var t=true;if(e.action==="SetValue"&&e.params.target){t=App.acl.hasAccess("edit",this.model.module,undefined,e.params.target)}if(t){c.push(new SUGAR.forms[e.action+"Action"](e.params))}},n);_.each(o,function(e){if(!e.action||!SUGAR.forms[e.action+"Action"])return;var t=true;if(e.action==="SetValue"&&e.params.target){t=App.acl.hasAccess("edit",this.model.module,undefined,e.params.target)}if(t){f.push(new SUGAR.forms[e.action+"Action"](e.params))}},n);return new SUGAR.forms.Dependency(new SUGAR.forms.Trigger(i,r,n,a),c,f,l,n)};SUGAR.forms.Dependency.prototype.fireLinkOnlyDependency=function(){if(!this.testOnLoad){return false}var e=true;if(this.context.model.fields){_.each(this.trigger.variables,function(t){e=e&&this.context.model.fields[t]&&this.context.model.fields[t].type=="link"},this)}return e};SUGAR.forms.Dependency.prototype.fire=function(e){if(this.context.view.disposed||!this.context.view.context){return}try{var t=this.context.model;this.lastTriggeredActions=this.lastTriggeredActions||[];if(t.inSync&&!this.testOnLoad){return}var n=this.actions;if(e&&this.falseActions!=null)n=this.falseActions;_.each(this.lastTriggeredActions,function(e){this.context.view.off(null,null,e)},this);if(n instanceof SUGAR.forms.AbstractAction)n=[n];for(var r in n){var i=n[r];if(typeof i.exec=="function"){i.setContext(this.context);i.exec();if(this.testOnLoad&&i.afterRender){this.context.view.on("render",i.exec,i)}}}this.lastTriggeredActions=n}catch(a){if(!SUGAR.isIE&&console&&console.log){console.log("ERROR: "+a)}return}};SUGAR.forms.Dependency.prototype.getRelatedFields=function(){var e=t.parser,n=e.getRelatedFieldsFromFormula(this.trigger.condition);var r=function(t){if(t instanceof SUGAR.forms.AbstractAction){t=[t]}for(var r in t){var i=t[r],a=i.target||undefined;if(typeof i.exec=="function"){for(var s in i){if(typeof i[s]=="string"){n=$.merge(n,e.getRelatedFieldsFromFormula(i[s],a))}}}}};r(this.actions);r(this.falseActions);return n};SUGAR.forms.AbstractAction=function(e){this.target=e};SUGAR.forms.AbstractAction.prototype.exec=function(){};SUGAR.forms.AbstractAction.prototype.setContext=function(e){this.context=e};SUGAR.forms.AbstractAction.prototype.evalExpression=function(e,n){n=n||this.context;return t.parser.evaluate(e,n).evaluate()};SUGAR.forms.AbstractAction.prototype.canSetValue=function(e){if(e.options&&e.options.revert){return false}if(e.isOnLoad){return false}return true};SUGAR.forms.Trigger=function(e,t,n,r){this.variables=e;this.condition=t;this.context=n;this.relatedFields=r||[];this.dependency={};this._attachListeners()};SUGAR.forms.Trigger.prototype._attachListeners=function(){if(!(this.variables instanceof Array)){this.variables=[this.variables]}for(var e=0;e<this.variables.length;e++){this.context.addListener(this.variables[e],SUGAR.forms.Trigger.fire,this,true);if(this.relatedFields.length===0&&this.context.model.isNew()&&!_.isUndefined(this.context.target)){var t=this.context.getLinkContext(this.context.view,this.variables[e]);if(t&&t.has("collection")){var n=t.get("collection");n.off("add",null,this);n.on("add",function(e,t,n){this.context.fromRelated=true;var r=_.bind(SUGAR.forms.Trigger.fire,this);r(e);delete this.context.fromRelated},this);n.off("remove",null,this);n.on("remove",function(e,t,n){this.context.isRemoveEvent=true;this.context.fromRelated=true;var r=_.bind(SUGAR.forms.Trigger.fire,this);r(e);delete this.context.fromRelated;delete this.context.isRemoveEvent},this)}}if(this.relatedFields.length>0&&_.isUndefined(this.context.view.parent)){var t=this.context.getLinkContext(this.context.view,this.variables[e]);if(t&&t.has("collection")){var n=t.get("collection"),r=this.relatedFields;var i=function(e,t,n){var i;_.find(e.changed,function(e,n){i=n;return _.contains(r,n)&&e===t});this.context.changingField=i;this.context.fromRelated=true;var a=_.bind(SUGAR.forms.Trigger.fire,this);a(e);delete this.context.fromRelated;delete this.context.changingField};var a="change:"+_.unique(this.relatedFields).join(" change:");n.off(a,null,this);n.on(a,i,this);n.off("add",null,this);n.on("add",i,this);if(this.context.model.isNew()){n.off("remove",null,this);n.on("remove",function(e,t,n){this.context.isRemoveEvent=true;this.context.fromRelated=true;var r=_.bind(SUGAR.forms.Trigger.fire,this);r(e);delete this.context.fromRelated;delete this.context.isRemoveEvent},this)}}}}};SUGAR.forms.Trigger.prototype.setDependency=function(e){this.dependency=e};SUGAR.forms.Trigger.prototype.setContext=function(e){this.context=e};SUGAR.forms.Trigger.fire=function(e,n,r){var i,a;if(e){var s=this.context.fromRelated||false;if(!s&&e){this.context.setModel(e)}else if(s){this.context.setRelatedModel(e)}}this.context.options=r;try{i=t.parser.evaluate(this.condition,this.context)}catch(o){if(!SUGAR.isIE&&console&&console.log){console.log("ERROR:"+o+"; in Condition: "+this.condition)}}if(!_.isUndefined(i)){a=i.evaluate()}if(a==SUGAR.expressions.Expression.TRUE){if(this.dependency instanceof SUGAR.forms.Dependency){this.dependency.fire(false);return}}else if(a==SUGAR.expressions.Expression.FALSE){if(this.dependency instanceof SUGAR.forms.Dependency){this.dependency.fire(true);return}}};SUGAR.forms.flashInProgress={};SUGAR.forms.markedField={};SUGAR.forms.exclamationMarkTemplate=Handlebars.compile('<span class="warning-tooltip add-on" data-container="body" rel="tooltip" title="{{this}}"><i class="fa fa-warning"></i></span>');SUGAR.forms.FlashField=function(e,t,n){if(typeof e=="undefined"||!n&&!e.id)return;n=n||e.id;if(SUGAR.forms.flashInProgress[n])return;SUGAR.forms.flashInProgress[n]=true;t=t||"#FF8F8F";var r=e.style&&e.style.backgroundColor?e.style.backgroundColor:"#FFFFFF";$(e).css("backgroundColor",r);$(e).animate({backgroundColor:t},200,function(){$(e).animate({backgroundColor:r},200,function(){delete SUGAR.forms.flashInProgress[n]})})};SUGAR.forms.markField=function(e,t,n){if(SUGAR.forms.markedField[e])return;if(!t)return;var r=$(t).parents('[data-fieldname="'+e+'"]');var i=$(t).children();r.addClass("warning");var a=$(SUGAR.forms.exclamationMarkTemplate(n));var s=i.parent().hasClass("input-append");if(!s){i.wrap('<div class="input-append warning">')}i.parent().addClass("warning");i.after(a);SUGAR.forms.markedField[e]=a};SUGAR.forms.unmarkField=function(e,t){if(!SUGAR.forms.markedField[e])return;if(!t)return;var n=$(t).parents('[data-fieldname="'+e+'"]');n.removeClass("warning");SUGAR.forms.markedField[e].remove();SUGAR.forms.markedField[e]=null};if(SUGAR.App&&SUGAR.App.plugins){SUGAR.App.plugins.register("SugarLogic","view",{onAttach:function(){this.on("init",function(){if(this.triggerBefore("sugarlogic:initialize")===false){return}this.initSugarLogic()})},initSugarLogic:function(e){this.deps=[];var t=this.slContext=new SUGAR.expressions.SidecarExpressionContext(this),e=e||this.context.get("module"),n=this.getApplicableDeps(),r=[],i=function(e,t){if(t.dependency.testOnLoad){t.context.isOnLoad=true;_.each(e,function(e){SUGAR.forms.Trigger.fire.apply(t,[e])});t.context.isOnLoad=null}};_.each(n,function(e){var n=SUGAR.forms.Dependency.fromMeta(e,t);if(n){r=_.union(r,n.getRelatedFields());if(this.context.isCreate()||n.fireLinkOnlyDependency()){SUGAR.forms.Trigger.fire.apply(n.trigger);this.trigger("sugarlogic:initialize")}if(n.testOnLoad){this.context.on("list:editrow:fire",function(){this.context.isOnLoad=true;SUGAR.forms.Trigger.fire.apply(this,arguments);delete this.context.isOnLoad},n.trigger);if(this.collection){this.collection.on("sync",function(e,t){var r,a;if(e instanceof Backbone.Collection){a=_.pluck(t,"id");r=e.filter(function(e){return _.contains(a,e.id)});_.defer(i,r,n.trigger)}else{SUGAR.forms.Trigger.fire.apply(n.trigger,[e])}},this)}}this.deps.push(n)}},this);t._setupLinks(r);t._requestRollups(r);this.on("render",function(){_.each(this.deps,function(e){if(this.context.isCreate()||e.fireLinkOnlyDependency()){SUGAR.forms.Trigger.fire.apply(e.trigger);this.trigger("sugarlogic:initialize")}},this)})},getFieldNames:function(){var t=e.ExpressionParser.prototype.getFieldsFromExpression,n=Object.getPrototypeOf(this).getFieldNames.apply(this,arguments),r=this.getApplicableDeps();_.each(r,function(e){if(e.trigger){n=_.union(n,t(e.trigger))}_.each(e.actions,function(e){if(e.params){_.each(e.params,function(e){if(_.isString(e)){n=_.union(n,t(e))}})}})});if(this.model){n=_.filter(n,function(e){return this.model.fields[e]&&this.model.fields[e].type!="link"},this)}return n},getApplicableDeps:function(){var e=_.extend({},this.meta,this.options.meta),t=SUGAR.App.metadata.getModule(this.context.get("module"),"dependencies"),n=_.contains(this.plugins,"Editable")||this.name=="edit"||this.name=="create"?"edit":"view",r=e.dependencies;if(!_.isEmpty(t)){var i=_.filter(t,function(e){if(_.contains(e.hooks,"all")||_.contains(e.hooks,n)){return true}return false});r=!_.isEmpty(r)?_.union(r,i):i}return r}})}else if(console.error){console.error("unable to find the plugin manager")}})()},function(e,t){(function(e){e.events=e.events||{};e.events.on({"offline:enabled":function(e){i("offline",e)},"app:start":function(){i("api",true)},"app:login:success":function(e,t){i("api",true,t)},"app:logout":function(){i("api",false)}});var t={offline:{readSimpleOrRelated:{status:false,operation:"fakeSelect"},readManyRecords:{status:false,operation:"fakeSelect"},readManyRelatedRecords:{status:false,operation:"fakeSelect"},createRecord:{status:false,operation:"fakeInsert"},createRelatedRecord:{status:false,operation:"fakeInsert"},updateRecord:{status:false,operation:"fakeUpdate"},updateRelatedRecord:{status:false,operation:"fakeUpdate"},softDeleteRecord:{status:false,operation:"fakeUpdate"},hardDeleteRecord:{status:false,operation:"fakeUpdate"},unlinkRecord:{status:false,operation:"fakeUpdate"}}},n={api:{records:{status:false,callbackIndex:4,optionsIndex:5,dataIndex:2,crudIndex:0,crud:[{name:"create",status:true},{name:"read one",status:false},{name:"read list",status:false},{name:"update",status:false},{name:"delete",status:false}]},relationships:{status:false,callbackIndex:4,optionsIndex:5,dataIndex:2,crudIndex:0,crud:[{name:"create",status:true},{name:"read one",status:false},{name:"read list",status:false},{name:"update",status:false},{name:"delete",status:false}]},favorite:{status:false,callbackIndex:3,optionsIndex:4},follow:{status:false,callbackIndex:3,optionsIndex:4}},http:[{name:"e0",status:false},{name:"e403",status:false},{name:"e404",status:false},{name:"e409",status:false},{name:"e422",status:false},{name:"e500",status:false}],emulationExceptions:{e409:{operation:"update",methods:["records","relationships"]}}},r={fakeSelect:function(){return{sql:"select xxxx"}},fakeInsert:function(){return{sql:"insert into xxxx"}},fakeUpdate:function(){return{sql:"update xxxx"}}};function i(r,i,u){var c=e.config.errorEmulation.user.toLowerCase();if(e.config.errorEmulation.enabled&&(e.user.get("user_name")===c||u===c)){if(r==="api"){a(i,n);l(i)}else{a(i,t);s(i);o(i);h()}}}function a(t,n){if(t){var r=e.utils.deepCopy(n);_.extend(e.config.errorEmulation,r)}else{_.each(n,function(t,n){delete e.config.errorEmulation[n]})}}function s(t){if(t){e.events.on("app:error:emulation:offline",function(t){var n=e.config.errorEmulation.offline[t],r=n&&n.status,i="_"+t,a=n.operation;u(r,i,a)})}else{e.events.off("app:error:emulation:offline");_.each(e.offline.storage.savedMethods,function(e,t){u(false,t)});delete e.offline.storage.savedMethods}}function o(t){if(t){_.extend(e.offline.storage._sqlHandlers,r)}else{_.each(r,function(t,n){delete e.offline.storage._sqlHandlers[n]})}}function l(t){if(t){if(!e.config.errorEmulation.apiFlag){e.events.on({"app:error:emulation:http":function(e){d(e);c(e)},"app:error:emulation:api":f,"app:error:emulation:crud":f});e.config.errorEmulation.apiFlag=true}}else{e.events.off("app:error:emulation:http app:error:emulation:api app:error:emulation:crud");delete e.config.errorEmulation.apiFlag;d("default");c("default")}}function u(t,n,r){if(t){e.offline.storage.savedMethods=e.offline.storage.savedMethods||{};if(!e.offline.storage.savedMethods[n]){e.offline.storage.savedMethods[n]=e.offline.storage[n]}e.offline.storage[n]=function(){var e=[{op:r,data:null,module:null,options:null}],t=arguments[arguments.length-1];this.exec(e,t.dbSuccess,t.dbFailure)}}else{e.offline.storage[n]=e.offline.storage.savedMethods[n];delete e.offline.storage.savedMethods[n]}}function c(t){var n=e.config.errorEmulation.api,r=[];_.each(n,function(e,t){if(e.status){r.push(t)}});_.each(e.api.savedMethods,function(t,n){e.api[n]=e.api.savedMethods[n]});delete e.api.savedMethods;e.controller.clean();if(t!=="default"){_.each(r,function(r){var i=_.findWhere(n[r].crud,{status:true});e.api.savedMethods=e.api.savedMethods||{};if(!e.api.savedMethods[r]){e.api.savedMethods[r]=e.api[r]}e.api[r]=function(){var e=n[r].callbackIndex,a=n[r].optionsIndex,s=n[r].crudIndex,o=n[r].dataIndex,l=i&&arguments[s]==="read"&&i.name.indexOf("read")>=0,u,c;if(!isNaN(o)){u=arguments[o]?arguments[o].link?arguments[o].relatedId?"one":"list":"one":"list";c=i.name==="read "+u}if(!i||arguments[s]===i.name||l&&c){arguments[e].error(new SUGAR.Api.HttpError({xhr:{status:t.substr(1)-0,responseText:'{"error":"emulated"}',getResponseHeader:function(){return"application/json"}},params:arguments[a]}));arguments[e].complete()}else{this.savedMethods[r].apply(this,arguments)}}})}}function f(){var t=_.findWhere(e.config.errorEmulation.http,{status:true});if(t){c(t.name)}}function d(t){var r=n.emulationExceptions[t],i=r?{code:t,operation:r.operation,methods:r.methods}:{code:"enableAll"};e.trigger("app:error:emulation:exceptions",i)}function h(){_.each(e.api.savedMethods,function(t,n){if(e.offline&&!_.isEmpty(e.offline.api.originalMethods)){e.offline.api.originalMethods[n]=e.api.savedMethods[n]}e.api.savedMethods[n]=e.api[n]});f()}})(SUGAR.App)}]);